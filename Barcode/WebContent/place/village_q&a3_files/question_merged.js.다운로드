var PwFilter=$Class({_oOption:null,PWFILTER_AJAX_URL:"/mobile/qna/pwfilter.nhn",SERVICE_ID:"AA",DEFAULT_UGC_TYPE:"UGC010",
DEFAULT_ELEMENT_ID:"contents",RESULT_CODE_WHEN_CONTENTS_INCLUDE_PROHIBITED_WORDS:"03",MESSAGE:{TIMEOUT_ALERT:"\ub124\ud2b8\uc6cc\ud06c \uc9c0\uc5f0\uc774 \ubc1c\uc0dd\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",
ERROR_ALERT:"\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",
CONTENTS_INCLUDE_PROHIBITED_WORDS_ALERT:"\uc774\uc6a9\uc790\uc758 \uc2e0\uace0\uac00 \ub9ce\uc740 \ud45c\ud604\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\n\ub2e4\ub978 \ud45c\ud604\uc744 \uc0ac\uc6a9\ud574 \uc8fc\uc138\uc694.\n"},
$init:function(htOption){this._oOption=htOption;$Fn(this.destroy,this).attach(window,"unload")},
process:function(){if(!this._oOption||!this._oOption.contents)return;var elementId=this._oOption.elementId||
this.DEFAULT_ELEMENT_ID;var oParam={content:this._oOption.contents,messageKey:elementId+":"+(new Date).getTime(),
serviceId:this._oOption.serviceId||this.SERVICE_ID,ugcTypeId:this._oOption.ugcId||this.DEFAULT_UGC_TYPE};
var oOption={onload:$Fn(this._pwFilterCallback,this).bind(),method:"post",timeout:3,ontimeout:$Fn(function(){if(this._oOption.errorCallbackFunc)this._oOption.errorCallbackFunc();
alert(this.MESSAGE.TIMEOUT_ALERT)},this).bind(),
onerror:$Fn(function(){if(this._oOption.errorCallbackFunc)this._oOption.errorCallbackFunc();alert(this.MESSAGE.ERROR_ALERT)},
this).bind()};
var oAjax=new $Ajax(this.PWFILTER_AJAX_URL,oOption);oAjax.request(oParam)},
_pwFilterCallback:function(oResponse){var oJson=oResponse.json();if(oJson&&oJson.message){var oResult=
oJson.message.result;if(oResult&&oResult.status&&oResult.status.code==this.RESULT_CODE_WHEN_CONTENTS_INCLUDE_PROHIBITED_WORDS){var aFilteredWords=
[];var aProhibitedWords=oResult.ugcTypes.ugcType.pwords;if(this.isArray(aProhibitedWords.pword))for(var i in aProhibitedWords.pword)aFilteredWords.push(aProhibitedWords.pword[i].name);
else aFilteredWords.push(aProhibitedWords.pword.name);try{if(this._oOption.containPwCallbackFunc)this._oOption.containPwCallbackFunc(aFilteredWords);
else{alert(this.MESSAGE.CONTENTS_INCLUDE_PROHIBITED_WORDS_ALERT+aFilteredWords.join(", "));if(this._oOption.resetFunc)this._oOption.resetFunc()}}catch(e){}return}}this._oOption.submitFunc()},
isArray:function(o){return Object.prototype.toString.call(o)=="[object Array]"},
destroy:function(){this._oOption=null}});
var AttachInfoManager=$Class({_nMaxPhotoCount:20,FORBIDDEN_PHOTO_INFO:[{sDirStr:"|70113|70104|70114|",
sAlertMsg:"\uc99d\uc0c1\uc9c8\ubb38\uc774\ub77c\ub3c4 \ud2b9\uc815\uc2e0\uccb4\ubd80\uc704\n(\uc131\uae30, \ud56d\ubb38 \ub4f1)\uc758 \uc0ac\uc9c4\uc744 \ud3ec\ud568\ud55c\n\uc9c8\ubb38\uc740 \uac8c\uc2dc\ubb3c \uc0ad\uc81c\uc6d0\uce59\uc5d0 \ub530\ub77c\n\ub0b4\uc6a9\uc774 \uc0ad\uc81c\ub420 \ubfd0 \uc544\ub2c8\ub77c,\n\uc11c\ube44\uc2a4 \uc774\uc6a9\uc5d0 \uc81c\ud55c\uc744 \ubc1b\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."},
{sDirStr:"|306|",sAlertMsg:"\ud2b9\uc815\uc2e0\uccb4\ubd80\uc704(\uc131\uae30, \ud56d\ubb38 \ub4f1)\uc758\n\uc0ac\uc9c4\uc744 \ud3ec\ud568\ud55c \uc9c8\ubb38\uc740\n\uac8c\uc2dc\ubb3c \uc0ad\uc81c\uc6d0\uce59\uc5d0 \ub530\ub77c\n\ub0b4\uc6a9\uc774 \uc0ad\uc81c\ub420 \ubfd0 \uc544\ub2c8\ub77c,\n\uc11c\ube44\uc2a4 \uc774\uc6a9\uc5d0 \uc81c\ud55c\uc744 \ubc1b\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}],
FILE_ICON_LIST_STR:"|ic_doc|ic_docx|ic_ndoc|ic_xls|ic_xlsx|ic_nxls|ic_ppt|ic_pptx|ic_nppt|ic_rtf|ic_gul|ic_txt|ic_hwp|ic_html|ic_htm|ic_pdf|ic_nfrm|ic_zip|ic_alz|ic_3gp|ic_3gpp|ic_exe|ic_wmv|ic_mp3|ic_wma|ic_gif|ic_png|ic_jpg|ic_jpeg|ic_tif|ic_tiff|ic_bmp|ic_ico|ic_wav|ic_avi|ic_mpg|ic_mpeg|ic_mp4|ic_flv|ic_ts|ic_asf|ic_3g2|ic_rm|ic_mov|ic_mkv|ic_m1v|ic_m2v|ic_k3g|ic_skm|",
MAX_FILE_SIZE:1024*1024*10,MAX_FILE_COUNT:10,MAX_FILE_NAME_LENGTH:100,FILE_UPLOAD_SUCCESS_CODE:200,FILE_ERROR_MSG_LIST:{FILE_SIZE_ERROR:"\ucd5c\ub300 \ucca8\ubd80\uac00\ub2a5\uc6a9\ub7c9 \ucd08\uacfc\ub85c \uc778\ud55c \ucca8\ubd80\ubd88\uac00",
FILE_COUNT_ERROR:"\ucd5c\ub300 \ucca8\ubd80\uac00\ub2a5\uc218 \ucd08\uacfc\ub85c \uc778\ud55c \ucca8\ubd80\ubd88\uac00",
FILE_NAME_LENGTH_ERROR:"\ud30c\uc77c\uba85 100\uc790 \ucd08\uacfc\ub85c \uc778\ud55c \ucca8\ubd80\ubd88\uac00",
INTERNAL_SERVER_ERROR:"\uc77c\uc2dc\uc801\uc778 \uc624\ub958\ub85c \uc778\ud55c \ucca8\ubd80\ubd88\uac00"},
MESSAGE:{IMPOSSIBLE_UPLOAD_VIDEO_FROM_NAVERAPP:"\uc0ac\uc6a9\ud558\uace0 \uacc4\uc2e0 \ub2e8\ub9d0\uae30 \uc6b4\uc601\ud658\uacbd\uc5d0\uc11c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.\n\uc9c0\uc2ddiN\uc571\uc744 \uc774\uc6a9\ud558\uc2dc\uac70\ub098 '\ub124\uc774\ubc84\uc571(\ucd5c\uc2e0\ubc84\uc804) \x3e \uc124\uc815 \x3e \ud0b7\ucea3\uc6a9 \ube0c\ub77c\uc6b0\uc800\uc5d4\uc9c4'\uc744 \uc0ac\uc6a9\uc73c\ub85c \ubcc0\uacbd\ud574\uc57c \uc774\uc6a9\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",
IMPOSSIBLE_UPLOAD_FILE_FROM_NAVERAPP:"\uc0ac\uc6a9\ud558\uace0 \uacc4\uc2e0 \ub2e8\ub9d0\uae30 \uc6b4\uc601\ud658\uacbd\uc5d0\uc11c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.\n'\ub124\uc774\ubc84\uc571(\ucd5c\uc2e0\ubc84\uc804) \x3e \uc124\uc815 \x3e \ud0b7\ucea3\uc6a9 \ube0c\ub77c\uc6b0\uc800\uc5d4\uc9c4'\uc744 \uc0ac\uc6a9\uc73c\ub85c \ubcc0\uacbd\ud574\uc57c \uc774\uc6a9\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."},
_MAX_IMAGE_UPLOAD_SIZE:10485760,_oElement:null,_wElement:null,_oEvent:null,_oOption:null,_hAttachInfoList:null,
_oPhotoTpl:null,_oFileTplOfUploadLayer:null,_oFileTplOfForm:null,_oGeoTpl:null,_oAudioTpl:null,_oAttachedLocation:null,
bHasGeoInfo:null,bHasAudioInfo:null,bUploadProgress:null,_oPhotoUploader:null,_oFileUploader:null,_oOsInfo:null,
_oResizeTimeout:null,_bIsAlreadyShowAlert:false,_oScrollOfAttachImageList:null,_oScrollOfFileUploadLayer:null,
_oLoadingOfUploadLayer:null,_aNdriveUploadFileQueue:null,_sArticleType:null,_sModifyFlag:null,_fnCallbackAttach:null,
_fnCallbackShowDividedQuestionSetting:null,_fnCallbackHideDividedQuestionSetting:null,$init:function(oData){this._nPhotoIdIdx=
0;this._nFileIdIdx=0;this._nDummyFileIdIdx=0;this._videoTempIndex=0;this._oElement={};this._wElement=
{};this._oEvent={};this._hAttachInfoList=$H();this._aNdriveUploadFileQueue=$A();this._oOption=oData||
{};this.setElement();this.setEvent();this._sArticleType=oData.articleType||"QUESTION";this._sModifyFlag=
oData.modifyFlag||"N";this._nMaxPhotoCount=oData.maxPhotoCount||20;this._fnCallbackAttach=oData.fnCallbackAttach;
this._fnCallbackShowDividedQuestionSetting=oData.fnCallbackShowDividedQuestionSetting;this._fnCallbackHideDividedQuestionSetting=
oData.fnCallbackHideDividedQuestionSetting;this._oPhotoTpl=$Template($(oData.photoTemplateId));this._oFileTplOfUploadLayer=
$Template($(oData.fileTemplateIdOfUploadLayer));this._oFileTplOfForm=$Template($(oData.fileTemplateIdOfForm));
if(oData.geolocationTemplateId)this._oGeoTpl=$Template($(oData.geolocationTemplateId));if(oData.videoTemplateId)this._oVideoTpl=
$Template($(oData.videoTemplateId));if(oData.audioTemplateId)this._oAudioTpl=$Template($(oData.audioTemplateId));
if(this._wElement["fileUploadLayer"]&&this._wElement["scrollAreaOfUploadLayer"])this._setLoadingOfUploadLayer();
this.bHasGeoInfo=false;this.bHasAudioInfo=false;if(this._wElement["attachLstScroller"])this._setAttachImageListScroller();
if(this._oElement["photoUploadBtn"]||this._oElement["photoUploadBtnImage"])this._oPhotoUploader=(new jindo.FileUploader(this._oElement["fileSelect"],
{sUrl:oData.upload_server+"/androidUpload.nhn",sFiletype:"*",sMsgNotAllowedExt:"jpg, png, jpeg, gif \ud615\uc2dd\uc758 \uc774\ubbf8\uc9c0\ub9cc\n\ucca8\ubd80 \uac00\ub2a5\ud569\ub2c8\ub2e4.",
bAutoUpload:false,htData:{key:oData.userId}})).attach({select:$Fn(function(e){if(!e.bAllowed)return;try{welFileSelect=
$Element("file_select");var nFileSize=welFileSelect._element.files[0].size;if(this._MAX_IMAGE_UPLOAD_SIZE<
nFileSize){oTimeout=setTimeout($Fn(function(){var aByteUnits=[" KB"," MB"," GB"," TB","PB","EB","ZB",
"YB"];var index=0;for(index=0;index<aByteUnits.length;index++){nFileSize=nFileSize/1024;if(nFileSize<
1024)break}alert("\ucd5c\ub300 10MB\uae4c\uc9c0\ub9cc \ucca8\ubd80\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc0ac\uc9c4\uc6a9\ub7c9\uc744 \ud655\uc778\ud6c4 \ub2e4\uc2dc \ucca8\ubd80\ud574\uc8fc\uc138\uc694.\n\n\ucca8\ubd80\ud55c \uc0ac\uc9c4\uc6a9\ub7c9 : "+
(Math.max(nFileSize,.1).toFixed(1)+aByteUnits[index]))},this).bind(),100);
this._oPhotoUploader.reset();return}}catch(e){}this.showLoadingIndicator();this.bUploadProgress=true;
this._oPhotoUploader.upload()},this).bind(),
success:$Fn(this._onSuccessPhotoUpload,this).bind(),error:$Fn(function(response){this.hideLoadingIndicator();
var errorMessage="\uc0ac\uc9c4 \uc804\uc1a1\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.";
try{if(typeof response!="undefined"&&typeof response.htResult!="undefined")errorMessage=response.htResult.message.error.message.content}catch(e){}alert(errorMessage);
this.bUploadProgress=false;this._oPhotoUploader.reset()},this).bind()});
if(this._oElement["localFileUploadInput"])this._oFileUploader=(new jindo.FileUploader(this._oElement["localFileUploadInput"],
{sUrl:oData.upload_server+"/attachFile.nhn",sFiletype:"*",bAutoUpload:false,htData:{sumAttachedFileSize:this._getTotalFileSize(),
limitAttachedFileCount:this._getTotalFileCount(),isNdrive:false}})).attach({select:$Fn(function(oEvent){oEvent.stop();
this._localFileName=this._oElement["localFileUploadInput"].files[0].name;this._localFileSize=this._oElement["localFileUploadInput"].files[0].size;
var sErrorMsg=this._checkFileAttachableByMetadata(this._localFileSize,this._localFileName);if(sErrorMsg){this._addDummyFileToUploadLayer({name:encodeURIComponent(this._localFileName),
size:this._localFileSize,noti:sErrorMsg||this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR});this._oFileUploader.reset();
return}this._oLoadingOfUploadLayer.show();this.bUploadProgress=true;this._oFileUploader.upload()},this).bind(),
success:$Fn(function(oResponse){if(oResponse&&oResponse.htResult&&oResponse.htResult.code&&oResponse.htResult.code==
this.FILE_UPLOAD_SUCCESS_CODE)this._addFileToUploadLayer(oResponse.htResult);this._oFileUploader.reset();
this.bUploadProgress=false;this._oLoadingOfUploadLayer.hide()},this).bind(),
error:$Fn(function(oResponse){var sErrorMsg=this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR;try{if(oResponse&&
oResponse.htResult&&oResponse.htResult.message){sErrorMsg=decodeURIComponent(oResponse.htResult.message);
sErrorMsg=sErrorMsg.replace(/\+/g," ")}}catch(e){}this._addDummyFileToUploadLayer({name:encodeURIComponent(this._localFileName)||
"",size:this._localFileSize||0,noti:sErrorMsg||this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR});this._oPhotoUploader.reset();
this.bUploadProgress=false;this._oLoadingOfUploadLayer.hide()},this).bind()})},
setElement:function(){this._oElement["contentsArea"]=$("ct");this._oElement["headerArea"]=$("headerArea");
this._oElement["form"]=$("form");this._oElement["photoUploadBtn"]=$$.getSingle("._photo_up_btn",this._oElement["contentsArea"]);
this._oElement["photoUploadBtnImage"]=$$.getSingle("._photo_up_btn_img",this._oElement["contentsArea"]);
this._oElement["attachImageList"]=$$.getSingle("._attach_image_list",this._oElement["contentsArea"]);
this._oElement["attachLstScroller"]=$("attach_lst_scroller");this._oElement["attachList"]=$$.getSingle("ul._attach_list",
this._oElement["contentsArea"]);this._oElement["fileSelect"]=$("file_select");this._oElement["ugcUploadBtn"]=
$$.getSingle("div._ugcUploadButton",this._oElement["contentsArea"]);this._oElement["videoUploadBtn"]=
$$.getSingle("button._video_upload_btn",this._oElement["contentsArea"]);this._wElement["fileUploadLayer"]=
$Element($$.getSingle("div._file_upload_layer"));this._wElement["fileListOfUploadLayer"]=$Element($$.getSingle("ul._file_list_of_upload_layer"));
if(this._wElement["fileUploadLayer"]){this._wElement["totalFileCount"]=$Element($$.getSingle("strong._totalFileCount",
this._wElement["fileUploadLayer"].$value()));this._wElement["totalFileSize"]=$Element($$.getSingle("strong._totalFileSize",
this._wElement["fileUploadLayer"].$value()));this._oElement["fileUploadLayerCloseBtn"]=$$.getSingle("a._close_file_upload_layer",
this._wElement["fileUploadLayer"].$value());this._oElement["localFileUploadInput"]=$$.getSingle("input._local_file_upload_input",
this._wElement["fileUploadLayer"].$value());this._oElement["localFileUploadBtn"]=$$.getSingle("a._local_file_upload_btn",
this._wElement["fileUploadLayer"].$value());this._oElement["ndriveFileUploadBtn"]=$$.getSingle("a._ndrive_file_upload_btn",
this._wElement["fileUploadLayer"].$value())}this._wElement["headerAreaOfUploadLayer"]=$Element("header_area_of_file_upload_layer");
this._wElement["scrollAreaOfUploadLayer"]=$Element("scroll_area_of_file_upload_layer");this._oElement["fileUploadLayerOpenBtn"]=
$$.getSingle("button._open_file_upload_layer");this._wElement["attachList"]=$Element(this._oElement["attachList"]);
this._wElement["attachImageListDiv"]=$Element($$.getSingle("._attach_image_list_div"));this._wElement["attachImageList"]=
$Element(this._oElement["attachImageList"]);this._wElement["attachLstScroller"]=$Element("attach_lst_scroller")},
setEvent:function(){if(this._oElement["photoUploadBtn"])this._oEvent["photoUploadBtn"]=$Fn(this._onClickPhotoUploadBtn,
this).attach(this._oElement["photoUploadBtn"],"click");if(this._oElement["photoUploadBtnImage"])this._oEvent["photoUploadBtnImage"]=
$Fn(this.onClickPhotoUploadBtnAndFireEvent,this).attach(this._oElement["photoUploadBtnImage"],"click");
if(this._oElement["videoUploadBtn"])this._oEvent["videoUploadBtn"]=$Fn(this.onClickVideoUploadBtn,this).attach(this._oElement["videoUploadBtn"],
"click");if(this._oElement["fileUploadLayerOpenBtn"])this._oEvent["clickFileUploadLayerOpenBtn"]=$Fn(this._onClickFileUploadLayerOpenBtn,
this).attach(this._oElement["fileUploadLayerOpenBtn"],"click");if(this._oElement["fileUploadLayerCloseBtn"])this._oEvent["clickFileUploadLayerCloseBtn"]=
$Fn(this._onClickFileUploadLayerCloseBtn,this).attach(this._oElement["fileUploadLayerCloseBtn"],"click");
if(this._oElement["localFileUploadBtn"])this._oEvent["clickLocalFileUploadBtn"]=$Fn(this._onClickLocalFileUploadBtn,
this).attach(this._oElement["localFileUploadBtn"],"click");if(this._oElement["localFileUploadInput"])this._oEvent["clickLocalFileUploadInput"]=
$Fn(this._onClickLocalFileUploadInput,this).attach(this._oElement["localFileUploadInput"],"click");if(this._wElement["fileListOfUploadLayer"])this._oEvent["clickFileListOfUploadLayer"]=
$Fn(this._onClickFileListOfUploadLayer,this).attach(this._wElement["fileListOfUploadLayer"].$value(),
"click");if(this._oElement["ndriveFileUploadBtn"])this._oEvent["clickNdriveFileUploadBtn"]=$Fn(this._onClickNdriveFileUploadBtn,
this).attach(this._oElement["ndriveFileUploadBtn"],"click");if(nhn.Kin.OS.android){this._fnOnResizeWindow=
$Fn(this._onResizeWindow,this).bind();jindo.m.bindRotate(this._fnOnResizeWindow)}else this._oEvent["resize"]=
$Fn(this._onResizeWindow,this).attach(window,"resize");this._oEvent["pageshow"]=$Fn(this._onResizeWindow,
this).attach(window,"pageshow");this._oEvent["attachList"]=$Fn(this._onClickAttachList,this).attach(this._oElement["attachList"],
"click");this._oEvent["attachImageList"]=$Fn(this._onClickAttachList,this).attach(this._oElement["attachImageList"],
"click");document.addEventListener("locationSelected",$Fn(this._locationSelected,this).bind(),false);
$Fn(this.destroy,this).attach(window,"unload")},
destroy:function(){if(this._oEvent){if(this._oEvent["photoUploadBtn"])this._oEvent["photoUploadBtn"].detach(this._oElement["photoUploadBtn"],
"click");if(this._oEvent["photoUploadBtnImage"])this._oEvent["photoUploadBtnImage"].detach(this._oElement["photoUploadBtnImage"],
"click");if(this._oEvent["clickFileUploadLayerOpenBtn"])this._oEvent["clickFileUploadLayerOpenBtn"].detach(this._oElement["fileUploadLayerOpenBtn"],
"click");if(this._oEvent["clickFileUploadLayerCloseBtn"])this._oEvent["clickFileUploadLayerCloseBtn"].detach(this._oElement["fileUploadLayerCloseBtn"],
"click");if(this._oEvent["clickLocalFileUploadInput"])this._oEvent["clickLocalFileUploadInput"].detach(this._oElement["localFileUploadInput"],
"click");if(this._oEvent["clickFileListOfUploadLayer"])this._oEvent["clickFileListOfUploadLayer"].detach(this._wElement["fileListOfUploadLayer"].$value(),
"click");if(this._oEvent["clickNdriveFileUploadBtn"])this._oEvent["clickNdriveFileUploadBtn"].detach(this._oElement["ndriveFileUploadBtn"],
"click");if(nhn.Kin.OS.android)jindo.m.unbindRotate(this._fnOnResizeWindow);else if(this._oEvent["resize"])this._oEvent["resize"].detach(window,
"resize");if(this._oEvent["pageshow"])this._oEvent["pageshow"].detach(window,"pageshow");this._oEvent["attachList"].detach(this._oElement["attachList"],
"click");this._oEvent["attachImageList"].detach(this._oElement["attachImageList"],"click")}this._detachScrollEvent();
this._oElement=this._oEvent=this._oOption=null},
_showDivideQuestionSetting:function(nAttachedPhotoCount){if(typeof this._fnCallbackShowDividedQuestionSetting!=
"undefined"&&this._fnCallbackShowDividedQuestionSetting!==null&&typeof this._fnCallbackShowDividedQuestionSetting===
"function")if(nAttachedPhotoCount>1)this._fnCallbackShowDividedQuestionSetting()},
_hideDivideQuestionSetting:function(){if(typeof this._fnCallbackHideDividedQuestionSetting!="undefined"&&
this._fnCallbackHideDividedQuestionSetting!==null&&typeof this._fnCallbackHideDividedQuestionSetting===
"function")this._fnCallbackHideDividedQuestionSetting()},
_setLoadingOfUploadLayer:function(){this._oLoadingOfUploadLayer=new jindo.m.Loading(null,{nWidth:30,nHeight:30,
sDefaultForeground:"#999",bUseFoggy:false,sLoadingText:""})},
_checkFileAttachableByMetadata:function(nSize,sName){var sErrorMsg=null;try{if(nSize+this._getTotalFileSize()>
this.MAX_FILE_SIZE)sErrorMsg=this.FILE_ERROR_MSG_LIST.FILE_SIZE_ERROR;else if(this._getTotalFileCount()+
1>this.MAX_FILE_COUNT)sErrorMsg=this.FILE_ERROR_MSG_LIST.FILE_COUNT_ERROR;else if(sName.length>this.MAX_FILE_NAME_LENGTH)sErrorMsg=
this.FILE_ERROR_MSG_LIST.FILE_NAME_LENGTH_ERROR}catch(e){sErrorMsg=null}return sErrorMsg},
_onResizeWindow:function(){if(!this._wElement["fileUploadLayer"]||!this._wElement["fileUploadLayer"].visible())return;
if(window.scrollTop>0)window.scrollTo(0,0);this._adjustHeightOfLayer()},
_adjustHeightOfLayer:function(){if(!this._wElement["fileUploadLayer"]||!this._wElement["fileUploadLayer"].visible()||
!this._wElement["scrollAreaOfUploadLayer"])return;var nBrowserHeight=$Document(document).clientSize().height;
var nScrollHeight=nBrowserHeight-this._wElement["headerAreaOfUploadLayer"].height();this._wElement["scrollAreaOfUploadLayer"].height(nScrollHeight);
this._wElement["fileUploadLayer"].height(nBrowserHeight);this._setScrollEvent(nScrollHeight)},
_setAttachImageListScroller:function(){if(!this._wElement["attachLstScroller"])return;if(!this._oScrollOfAttachImageList)this._oScrollOfAttachImageList=
new jindo.m.Scroll(this._wElement["attachLstScroller"],{bUseHScroll:true,bUseVScroll:false,bUseMomentum:true,
bUseScrollbar:false,nDeceleration:.0015,bUseScrollbar:true,width:720,sScrollbarBorder:"0px",sScrollbarColor:"#ccc"});
else{var wImageLi=$ElementList("._attachedFile",this._wElement["attachImageList"]);var nImageCnt=wImageLi.length();
var nWidth=0;var nScrollerWidth=$Element("attach_lst_scroller").width();if(nImageCnt>0)nWidth=wImageLi.get(0).width()+
15;var nListWidth=nWidth*(nImageCnt+1);this._wElement["attachImageList"].parent().width(nListWidth);this._oScrollOfAttachImageList.refresh()}},
_setScrollEvent:function(nScrollHeight){if(nScrollHeight<1)return;if(!this._oScrollOfFileUploadLayer)this._oScrollOfFileUploadLayer=
new jindo.m.Scroll(this._wElement["scrollAreaOfUploadLayer"],{bActivateOnload:true,bUseHScroll:false,
bUseVScroll:true,bUseMomentum:true,nDeceleration:6E-4,nOffsetTop:0,nOffsetBottom:0,nHeight:nScrollHeight,
nWidth:0,bUseBounce:true,bUseHighlight:true,sClassPrefix:"scroll_",bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),
bUseTranslate:true,bAutoResize:true,sListElement:"",nRatio:1.5,nScrollbarHideThreshold:0,bUseScrollbar:false,
bUseFixedScrollbar:false,sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUseScrollBarRadius:true,
bUsePullDown:false,bUsePullUp:false,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,
fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null});else{this._oScrollOfFileUploadLayer.activate();
this._oScrollOfFileUploadLayer.height(nScrollHeight);this._oScrollOfFileUploadLayer.refresh()}},
_detachScrollEvent:function(){if(this._oScrollOfFileUploadLayer){this._oScrollOfFileUploadLayer.deactivate();
this._oScrollOfFileUploadLayer.destroy();this._oScrollOfFileUploadLayer=null}},
_addDummyFileToUploadLayer:function(oDummyFileInfos){var sDummyFileId="dummy_"+this._nDummyFileIdIdx++;
var sHtml=this._makeFileHtml(oDummyFileInfos,sDummyFileId,false);if(this._wElement["fileListOfUploadLayer"])this._wElement["fileListOfUploadLayer"].appendHTML(sHtml);
this._adjustHeightOfLayer()},
_makeFileHtml:function(oFileInfos,sFileId,bNeedToTransferFile){var sHtml="";if(!oFileInfos||!sFileId||
!bNeedToTransferFile&&!this._oFileTplOfUploadLayer||bNeedToTransferFile&&!this._oFileTplOfForm)return sHtml;
var sName=(oFileInfos.fileName?oFileInfos.fileName:oFileInfos.name)||"";var nSize=(oFileInfos.fileSize?
oFileInfos.fileSize:oFileInfos.size)||0;var bCopied=(oFileInfos.isCopyright?oFileInfos.isCopyright:oFileInfos.copied)||
false;var sNoti=(bCopied?"\uc800\uc791\uad8c\uc774 \uc788\ub294 \ud30c\uc77c":oFileInfos.noti)||null;
var sRegDate=oFileInfos.date||this._getCurrentDate();if(!bNeedToTransferFile){var bIsDummyFile=sFileId.indexOf("dummy_")>
-1;if(bIsDummyFile)var sFileIconClass="ic_fail";else var sFileIconClass=this._getFileIconClass(sName);
sHtml=this._oFileTplOfUploadLayer.process({id:sFileId,name:decodeURIComponent(sName),size:Math.floor(nSize/
1024),noti:sNoti,date:sRegDate,iconClass:sFileIconClass,isDummyFile:bIsDummyFile?"Y":"N"})}else sHtml=
this._oFileTplOfForm.process({id:sFileId,name:decodeURIComponent(sName),size:Math.floor(nSize/1024),noti:sNoti});
return sHtml},
_getFileIconClass:function(sName){var sFileIconClass="ic_etc";var sExtName=sName.slice(sName.lastIndexOf(".")+
1).toLowerCase();if(this.FILE_ICON_LIST_STR.indexOf("|ic_"+sExtName+"|")>-1)sFileIconClass="ic_"+sExtName;
return sFileIconClass},
_addFile:function(oFileInfos,sFileId,bNeedToTransferFile){if(!oFileInfos||!sFileId)return;var sName=(oFileInfos.fileName?
oFileInfos.fileName:oFileInfos.name)||"";var nSize=(oFileInfos.fileSize?oFileInfos.fileSize:oFileInfos.size)||
0;var bCopied=(oFileInfos.isCopyright?oFileInfos.isCopyright:oFileInfos.copied)||false;var sInfo=(oFileInfos.attachFileInfo?
oFileInfos.attachFileInfo:oFileInfos.info)||"";var sNoti=(bCopied?"\uc800\uc791\uad8c\uc774 \uc788\ub294 \ud30c\uc77c":
oFileInfos.noti)||null;var sRegDate=oFileInfos.date||this._getCurrentDate();var sStatus=oFileInfos.status||
"add";this._hAttachInfoList.add(sFileId,{status:sStatus,type:"F",name:sName,size:nSize,copied:bCopied,
info:sInfo,noti:sNoti,date:sRegDate,needToTransferFile:bNeedToTransferFile||false});if(typeof this._fnCallbackAttach!=
"undefined"&&this._fnCallbackAttach!==null&&typeof this._fnCallbackAttach==="function")this._fnCallbackAttach("file");
this._hideDivideQuestionSetting()},
_addFileToUploadLayer:function(oFileInfos,sFileId){if(!oFileInfos)return;var bNeedToTransferFile=false;
var bNotExistsFile=!sFileId;if(bNotExistsFile){sFileId="file_"+this._nFileIdIdx++;oFileInfos.status="add";
this._addFile(oFileInfos,sFileId,bNeedToTransferFile)}var sHtml=this._makeFileHtml(oFileInfos,sFileId,
bNeedToTransferFile);if(this._wElement["fileListOfUploadLayer"])this._wElement["fileListOfUploadLayer"].appendHTML(sHtml);
if(oFileInfos.status!="remove")this._refreshUploadLayerSizeAndCount();this._adjustHeightOfLayer()},
addFileToForm:function(oFileInfos,sFileId){if(!oFileInfos)return;var bNeedToTransferFile=true;var bNotExistsFile=
!sFileId;if(bNotExistsFile){sFileId="file_"+this._nFileIdIdx++;oFileInfos.status=oFileInfos.status?oFileInfos.status:
"add";this._addFile(oFileInfos,sFileId,bNeedToTransferFile)}var sHtml=this._makeFileHtml(oFileInfos,sFileId,
bNeedToTransferFile);if(this._wElement["attachList"])this._wElement["attachList"].appendHTML(sHtml)},
_refreshUploadLayerSizeAndCount:function(){if(this._wElement["totalFileCount"])this._wElement["totalFileCount"].text(this._getTotalFileCount());
if(this._wElement["totalFileSize"]){var nFileSize=this._getTotalFileSize();this._wElement["totalFileSize"].text(this._getShowFileSize(nFileSize)+
this._getFileSizeUnit(nFileSize))}},
_getShowFileSize:function(size){while(size>=1024)size=size/1024;size=Math.round(size*10)/10;return size},
_getFileSizeUnit:function(size){var unit=["B","KB","MB","GB"];var unit_idx=0;while(size>=1024){size=size/
1024;unit_idx++}return unit[unit_idx]},
_refreshAttachList:function(){var aElAttachedFileList=$$("li._attachedFile",this._oElement["attachList"]);
if(aElAttachedFileList&&aElAttachedFileList.length>0){var aWelAttachedFileList=$ElementList(aElAttachedFileList);
if(aWelAttachedFileList)aWelAttachedFileList.leave()}var that=this;this._hAttachInfoList.forEach(function(value,
key,object){if(value.type==="F"&&value.needToTransferFile&&value.status!=="remove")that.addFileToForm(value,
key)})},
_getTotalFileSize:function(){var nFileSize=0;this._hAttachInfoList.forEach(function(value,key,object){if(value.type===
"F"&&value.status!=="remove")nFileSize+=value.size});
return nFileSize},
_getTotalFileCount:function(){var nFileCount=0;this._hAttachInfoList.forEach(function(value,key,object){if(value.type===
"F"&&value.status!=="remove")nFileCount++});
return nFileCount},
_getCurrentDate:function(){var oCurrentDate=new Date,yyyy=oCurrentDate.getFullYear(),mm=oCurrentDate.getMonth()+
1,dd=oCurrentDate.getDate();return yyyy+"."+(mm<10?"0"+mm:mm)+"."+(dd<10?"0"+dd:dd)+"."},
_checkFileAttachable:function(){if(this.bUploadProgress){alert("\ud30c\uc77c\uc744 \ucca8\ubd80\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.");
return false}if(this._getTotalFileSize()>this.MAX_FILE_SIZE){alert("\ud30c\uc77c\uc740 \ucd1d 10MB\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4.");
return false}else if(this._getTotalFileCount()>this.MAX_FILE_COUNT){alert("\ud30c\uc77c\uc758 \ucd5c\ub300 10\uac1c\uae4c\uc9c0 \ucca8\ubd80 \uac00\ub2a5\ud569\ub2c8\ub2e4.");
return false}return true},
addNdriveFiles:function(aFileInfos){if(!aFileInfos)return;if(!this._aNdriveUploadFileQueue)this._aNdriveUploadFileQueue=
$A();if(this._aNdriveUploadFileQueue.length()>0)this._aNdriveUploadFileQueue.empty();var nLengthOfFileInfos=
aFileInfos.length;for(var i=0;i<nLengthOfFileInfos;i++){var oFileInfos=aFileInfos[i];if(!oFileInfos)continue;
this._aNdriveUploadFileQueue.push(oFileInfos)}this._uploadNdriveFile()},
_uploadNdriveFile:function(){if(!this._aNdriveUploadFileQueue||this._aNdriveUploadFileQueue.length()<
1){this.bUploadProgress=false;this._oLoadingOfUploadLayer.hide();return}this._oLoadingOfUploadLayer.show();
this.bUploadProgress=true;var oFileInfos=this._aNdriveUploadFileQueue.shift();var sErrorMsg=this._checkFileAttachableByMetadata(oFileInfos.fileSize,
decodeURIComponent(oFileInfos.fileName));if(sErrorMsg){this._addDummyFileToUploadLayer({name:oFileInfos.fileName,
size:oFileInfos.fileSize,noti:sErrorMsg||this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR});this._uploadNdriveFile();
return}var oOption={type:"jsonp",callbackname:"uploadNdriveFileCallback",timeout:5,onload:$Fn(function(oResponse){var oJson=
oResponse.json();if(oJson)if(oJson.code==this.FILE_UPLOAD_SUCCESS_CODE)this._addFileToUploadLayer(oJson);
else this._addDummyFileToUploadLayer({name:oFileInfos.fileName,size:oFileInfos.fileSize,noti:decodeURIComponent(oJson.message.replace(/\+/g,
" "))||this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR});this._uploadNdriveFile()},this).bind(),
ontimeout:$Fn(function(){this._addDummyFileToUploadLayer({name:oFileInfos.filePath,size:oFileInfos.fileSize,
noti:this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR});this._uploadNdriveFile()},this).bind(),
onerror:$Fn(function(){this._addDummyFileToUploadLayer({name:oFileInfos.filePath,size:oFileInfos.fileSize,
noti:this.FILE_ERROR_MSG_LIST.INTERNAL_SERVER_ERROR});this._uploadNdriveFile()},this).bind()};
var oParams={sumAttachedFileSize:this._getTotalFileSize(),limitAttachedFileCount:this._getTotalFileCount(),
modifyFlag:this._sModifyFlag,articleType:this._sArticleType,serviceType:"MOBILE_KIN",fileInfos:encodeURIComponent($Json(oFileInfos).toString())};
var oAjax=new $Ajax(this._oOption.upload_server+"/uploadNdriveFileFromMobile.nhn",oOption);oAjax.request(oParams)},
_onClickNdriveFileUploadBtn:function(oEvent){if(!this._checkFileAttachable()){oEvent.stop();return}var sServiceUrl=
location.protocol+"//"+location.host+"/mobile/qna/addNdriveFiles.nhn";var nMaxAttachedFileCount=this.MAX_FILE_COUNT-
this._getTotalFileCount();var sNdriveAPIUrl=this._oOption.ndrive_mobile_server+"/mobile/mobileLinkage.nhn?m\x3dattachFiles\x26servicetype\x3dMOBILE_KIN\x26maxAttachedFileCount\x3d"+
nMaxAttachedFileCount+"\x26serviceurl\x3d"+encodeURIComponent(sServiceUrl);var oPopup=window.open(sNdriveAPIUrl);
if(oPopup)oPopup.focus();oEvent.stop()},
_onClickFileUploadLayerOpenBtn:function(oEvent){if(!this._oOsInfo)this._oOsInfo=jindo.m.getOsInfo();if(this._oOption.isKitKatAndNaverAppBrowser){alert(this.MESSAGE.IMPOSSIBLE_UPLOAD_FILE_FROM_NAVERAPP);
oEvent.stop();return}if(this._oOsInfo&&this._oOsInfo.ios&&(this._oOsInfo.version>="8.0.0"&&this._oOsInfo.version<
"8.1.1")){alert("\uc0ac\uc6a9\uc790 \ub2e8\ub9d0\uae30\uc758 ios \ubc84\uc804\uc5d0\uc11c\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.");
oEvent.stop();return}if(this._wElement["fileListOfUploadLayer"])this._wElement["fileListOfUploadLayer"].html("");
var that=this;this._hAttachInfoList.forEach(function(value,key,object){if(value.type==="F"&&value.status!==
"remove")that._addFileToUploadLayer(value,key)});
if(this._wElement["fileUploadLayer"])this._wElement["fileUploadLayer"].show();var welHeaderArea=$Element(this._oElement["headerArea"]);
if(welHeaderArea)welHeaderArea.css("display","none");var welContentsArea=$Element(this._oElement["contentsArea"]);
if(welContentsArea)welContentsArea.hide();if(this._oResizeTimeout)clearTimeout(this._oResizeTimeout);
this._oResizeTimeout=setTimeout($Fn(function(){this._onResizeWindow()},this).bind(),300);
if(this._oScrollOfFileUploadLayer)this._oScrollOfFileUploadLayer.scrollTo(0,1);oEvent.stop()},
_onClickFileUploadLayerCloseBtn:function(oEvent){if(this.bUploadProgress){oEvent.stop();return}this._hAttachInfoList.forEach(function(value,
key,object){if(!value.needToTransferFile&&value.type==="F")value.needToTransferFile=true});
this._refreshAttachList();if(this._wElement["fileListOfUploadLayer"])this._wElement["fileListOfUploadLayer"].html("");
var welHeaderArea=$Element(this._oElement["headerArea"]);if(welHeaderArea)welHeaderArea.css("display",
"block");var welContentsArea=$Element(this._oElement["contentsArea"]);if(welContentsArea)welContentsArea.show();
this._showAttachArea();this._detachScrollEvent();if(this._wElement["fileUploadLayer"])this._wElement["fileUploadLayer"].hide();
this.scrollToAnswer();oEvent.stop()},
_onClickLocalFileUploadBtn:function(oEvent){oEvent.stop();if(!this._oElement["localFileUploadInput"])return;
if(nhn.Kin.getScreenType()==="TABLET_LANDSCAPE")setTimeout($Fn(function(){$Element(this._oElement["localFileUploadInput"]).fireEvent("click")},
this).bind(),30);
else $Element(this._oElement["localFileUploadInput"]).fireEvent("click")},
_onClickLocalFileUploadInput:function(oEvent){if(!this._checkFileAttachable())oEvent.stop()},
_onClickFileListOfUploadLayer:function(oEvent){var el=oEvent.element;if(!el){oEvent.stop();return}if(/(?:i)/i.test(el.tagName))el=
el.parentNode;if(!/(?:button)/i.test(el.tagName)){oEvent.stop();return}var el=el.parentNode;if(!el){oEvent.stop();
return}if(!confirm("\ud30c\uc77c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){oEvent.stop();
return}var welLi=$Element(el);var sLiId=welLi.attr("id");var oFile=this._hAttachInfoList.$(sLiId);this._deleteAttach(oFile);
if(oFile.status=="add")this._hAttachInfoList.remove(sLiId);else if(oFile.status=="keep"){oFile.status=
"remove";this._hAttachInfoList.$(sLiId,oFile)}welLi.leave();this._refreshUploadLayerSizeAndCount();oEvent.stop()},
_onSuccessPhotoUpload:function(response){this.bUploadProgress=false;this._oPhotoUploader.reset();var result=
response.htResult?response.htResult.message.result:response;var oOption={fileInfo:result.fileInfo,width:result.width,
height:result.height,size:result.size,directory:result.directory,name:result.name};this.afterUploadProcess(oOption);
this.hideLoadingIndicator()},
afterUploadProcess:function(oUploadedFileInfo){if(!oUploadedFileInfo)return;this.addPhoto(oUploadedFileInfo);
if(this._oOption.isFireUploadCallback)this._fireUploadCompleteEvent(this._oOption["image_server"]+oUploadedFileInfo.fileInfo)},
fireRefreshImageRecommendDirEvent:function(){var eRefreshImageRecommendDirEvent=document.createEvent("Event");
eRefreshImageRecommendDirEvent.initEvent("refreshImageRecommendDir",true,true);eRefreshImageRecommendDirEvent["uploadedImageList"]=
this._getImageUrlArray()||[];document.dispatchEvent(eRefreshImageRecommendDirEvent)},
fireRefreshLocationRecommendDirEvent:function(){var eRefreshLocationRecommendDirEvent=document.createEvent("Event");
eRefreshLocationRecommendDirEvent.initEvent("refreshLocationRecommendDir",true,true);eRefreshLocationRecommendDirEvent["attachedLocation"]=
this._oAttachedLocation;document.dispatchEvent(eRefreshLocationRecommendDirEvent)},
_fireUploadCompleteEvent:function(sCurrentImageUrl){var eUploadCompleteEvent=document.createEvent("Event");
eUploadCompleteEvent.initEvent("photoUploadComplete",true,true);eUploadCompleteEvent["currentImageUrl"]=
sCurrentImageUrl||"";eUploadCompleteEvent["uploadedImageList"]=this._getImageUrlArray()||[];document.dispatchEvent(eUploadCompleteEvent)},
_getImageUrlArray:function(){var sImageServerDomain=this._oOption["image_server"];if(!sImageServerDomain)return null;
var aImageUrlArray=[];this._hAttachInfoList.forEach(function(value,key,object){if(value.type==="P"&&value.status!==
"remove"&&value.url)aImageUrlArray.push(value.url)});
return aImageUrlArray},
addPhoto:function(oOption){var id="photo_"+this._nPhotoIdIdx++;var sHtml=this._oPhotoTpl.process({id:id,
src:this._oOption["image_server"]+oOption.fileInfo});this._wElement["attachImageList"].appendHTML(sHtml);
this._setAttachImageListScroller();this._showAttachArea("image");if(this._oElement["photoUploadBtnImage"]){var wPhotoBtn=
$Element(this._oElement["photoUploadBtnImage"]).parent();wPhotoBtn.addClass("upload_photo_on")}var fileObj=
{};fileObj.size=oOption.size;fileObj.status=oOption.status||"add";fileObj.type="P";fileObj.directory=
oOption.directory;fileObj.name=oOption.name;fileObj.copied=false;fileObj.width=oOption.width;fileObj.height=
oOption.height;fileObj.url=this._oOption["image_server"]+oOption.fileInfo;fileObj.path=oOption.fileInfo;
this._hAttachInfoList.add(id,fileObj);if(typeof this._fnCallbackAttach!="undefined"&&this._fnCallbackAttach!==
null&&typeof this._fnCallbackAttach==="function")this._fnCallbackAttach("image");var nPhotoCount=this.getAttachedPhotoCount();
var nTotalCount=this._getAttachedInfoCount();var bSameCount=nPhotoCount===nTotalCount;if(!this.bHasGeoInfo&&
!this.bHasAudioInfo&&bSameCount)this._showDivideQuestionSetting(nPhotoCount)},
addVideo:function(oOption){var id="video_"+this._videoTempIndex++;var sHtml=this._oVideoTpl.process({id:id,
src:oOption.thumbUrl});this._wElement["attachImageList"].appendHTML(sHtml);this._setAttachImageListScroller();
this._showAttachArea("image");var fileObj={};fileObj.id=-1;fileObj.status=oOption.status||"add";fileObj.parentId=
oOption.parentId||0;fileObj.type="M";fileObj.directory=oOption.directory||"/data2/someWhere";fileObj.name=
oOption.name||"filename.wmv";fileObj.size=oOption.size||0;fileObj.copied=false;fileObj.width=oOption.width||
300;fileObj.height=oOption.height||375;fileObj.videoId=oOption.videoId||"";fileObj.videoBitRate=0;fileObj.videoPlayTime=
oOption.videoPlayTime||"";fileObj.videoThumbnailTime="";fileObj.videoThumbnailPath=oOption.videoThumbnailPath||
"";fileObj.thumbUrl=oOption.thumbUrl||"";fileObj.url="http://kinimage.naver.net";this._hAttachInfoList.add(id,
fileObj);if(typeof this._fnCallbackAttach!="undefined"&&this._fnCallbackAttach!==null&&typeof this._fnCallbackAttach===
"function")this._fnCallbackAttach("video");this._hideDivideQuestionSetting()},
_showAttachArea:function(sType){sType=sType||"";if(sType==="image"){if(this._wElement["attachImageListDiv"].visible()==
false)this._wElement["attachImageListDiv"].show()}else if(this._wElement["attachList"].visible()==false)this._wElement["attachList"].show()},
_checkPhotoAttachable:function(){if(this.bUploadProgress){alert("\uc0ac\uc9c4\uc744 \ucca8\ubd80\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4\uc5d0 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.");
return false}var nPhotoCount=this.getAttachedPhotoCount();if(nPhotoCount>=this._nMaxPhotoCount){alert("\uc0ac\uc9c4\uc740 \ucd5c\ub300 "+
this._nMaxPhotoCount+"\uc7a5\uae4c\uc9c0 \ucca8\ubd80 \uac00\ub2a5\ud569\ub2c8\ub2e4.");return false}return true},
getAttachedPhotoCount:function(){var nPhotoCount=0;this._hAttachInfoList.forEach(function(value,key,object){if(value.type===
"P"&&value.status!=="remove")nPhotoCount++});
return nPhotoCount},
_checkVideoAttachable:function(){if(!$Element(this._oElement["ugcUploadBtn"]).visible()){if(this._oOption.isKitKatAndNaverAppBrowser)alert(this.MESSAGE.IMPOSSIBLE_UPLOAD_VIDEO_FROM_NAVERAPP);
return false}var nVideoCount=0;this._hAttachInfoList.forEach(function(value,key,object){if(value.type===
"M"&&value.status!=="remove")nVideoCount++});
if(nVideoCount>9){alert("\ub3d9\uc601\uc0c1\uc740 \ucd5c\ub300 10\uac1c\uae4c\uc9c0 \ucca8\ubd80 \uac00\ub2a5\ud569\ub2c8\ub2e4.");
return false}return true},
hasPhotoInfo:function(){var bHasPhotoInfo=false;this._hAttachInfoList.forEach(function(value,key,object){if(value.type===
"P"&&value.status!=="remove")bHasPhotoInfo=true});
return bHasPhotoInfo},
checkForbiddenPhotoDirectory:function(nDirId,bHaveToCheckPhotoCount){if(this._bIsAlreadyShowAlert||bHaveToCheckPhotoCount&&
!this.hasPhotoInfo())return;var sAlertMsg=null;for(var i in this.FORBIDDEN_PHOTO_INFO)if(this.FORBIDDEN_PHOTO_INFO[i].sDirStr.indexOf("|"+
nDirId+"|")>-1){sAlertMsg=this.FORBIDDEN_PHOTO_INFO[i].sAlertMsg;break}if(sAlertMsg){alert(sAlertMsg);
this._bIsAlreadyShowAlert=true}},
_onClickPhotoUploadBtn:function(we){this.checkForbiddenPhotoDirectory($("dirId").value);if(!this._checkPhotoAttachable())we.stop()},
onClickPhotoUploadBtnAndFireEvent:function(we){if(!this._checkPhotoAttachable()){we.stop();return}var wEl=
$Element(we.element);we.stop();if(nhn.Kin.getScreenType()==="TABLET_LANDSCAPE")setTimeout($Fn(function(){$Element("file_select").fireEvent("click")},
this).bind(),30);
else $Element("file_select").fireEvent("click")},
onClickFileUploadBtnAndFireEvent:function(oEvent){if(!this._checkFileAttachable()){oEvent.stop();return}oEvent.stop();
if(nhn.Kin.getScreenType()==="TABLET_LANDSCAPE")setTimeout($Fn(function(){$Element(this._oElement["fileUploadLayerOpenBtn"]).fireEvent("click")},
this).bind(),30);
else $Element(this._oElement["fileUploadLayerOpenBtn"]).fireEvent("click")},
_onClickAttachList:function(we){if(/(?:i|em|span)/i.test(we.element.tagName))wel=$Element(we.element.parentNode);
else wel=$Element(we.element);if(!/(?:button|a)/i.test(wel)){we.stop();return}var welLi=wel.parent();
if(wel.hasClass("_del_photo")&&confirm("\uc0ac\uc9c4\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var oPhoto=
this._hAttachInfoList.$(welLi.attr("id"));this._deleteAttach(oPhoto);if(this._oElement["photoUploadBtnImage"]){var wPhotoBtn=
$Element(this._oElement["photoUploadBtnImage"]).parent();wPhotoBtn.removeClass("upload_photo_on")}oPhoto.status=
"remove";this._hAttachInfoList.$(welLi.attr("id"),oPhoto);if(welLi.next()==null&&welLi.prev()==null)this._wElement["attachImageListDiv"].hide();
welLi.leave();this._setAttachImageListScroller();if(this.getAttachedPhotoCount()<2)this._hideDivideQuestionSetting()}else if(wel.hasClass("_del_video")&&
confirm("\ub3d9\uc601\uc0c1\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var oVideo=this._hAttachInfoList.$(welLi.attr("id"));
this._deleteAttach(oVideo);oVideo.status="remove";this._hAttachInfoList.$(welLi.attr("id"),oVideo);if(welLi.next()==
null&&welLi.prev()==null)this._wElement["attachImageListDiv"].hide();welLi.leave();this._setAttachImageListScroller();
var nPhotoCount=this.getAttachedPhotoCount();var nTotalCount=this._getAttachedInfoCount();var bSameCount=
nPhotoCount===nTotalCount;if(!this.bHasGeoInfo&&!this.bHasAudioInfo&&bSameCount)this._showDivideQuestionSetting(nPhotoCount)}else if(wel.hasClass("_del_geo")&&
confirm("\uc704\uce58\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var sBeforeLocationSource=
$("locationSource").value||"CUSTOM";$("locationSource").value="";$("latitude").value=0;$("longitude").value=
0;$("address").value="";$("ncode").value="";$("poiId").value=0;$("poi").value="";if(sBeforeLocationSource===
"MY")this.setAttachFile({type:"L",status:"remove"});this.bHasGeoInfo=false;this._oAttachedLocation=null;
welLi.leave();var nPhotoCount=this.getAttachedPhotoCount();var nTotalCount=this._getAttachedInfoCount();
var bSameCount=nPhotoCount===nTotalCount;if(!this.bHasAudioInfo&&bSameCount)this._showDivideQuestionSetting(nPhotoCount)}else if(wel.hasClass("_del_audio")&&
confirm("\uc74c\uc131\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var value='{type: "A", status : "remove" }';
this.setAttachFile(value);this.bHasAudioInfo=false;welLi.leave();var nPhotoCount=this.getAttachedPhotoCount();
var nTotalCount=this._getAttachedInfoCount();var bSameCount=nPhotoCount===nTotalCount;if(!this.bHasGeoInfo&&
bSameCount)this._showDivideQuestionSetting(nPhotoCount)}else if(wel.hasClass("_modifyLocation"))this._fireInitializeMapEvent(true);
else if(wel.hasClass("_del_file")&&confirm("\ud30c\uc77c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var sLiId=
welLi.attr("id");var oFile=this._hAttachInfoList.$(sLiId);this._deleteAttach(oFile);if(oFile.status==
"add")this._hAttachInfoList.remove(sLiId);else if(oFile.status=="keep"){oFile.status="remove";this._hAttachInfoList.$(sLiId,
oFile)}welLi.leave();this._refreshUploadLayerSizeAndCount();var nPhotoCount=this.getAttachedPhotoCount();
var nTotalCount=this._getAttachedInfoCount();var bSameCount=nPhotoCount===nTotalCount;if(!this.bHasGeoInfo&&
!this.bHasAudioInfo&&bSameCount)this._showDivideQuestionSetting(nPhotoCount)}if(we.element.tagName.toLowerCase()!=
"a"&&we.element.tagName.toLowerCase()!="em")we.stop()},
_getAttachedInfoCount:function(){var nInfoCount=0;this._hAttachInfoList.forEach(function(value,key,object){if(value.status!==
"remove")nInfoCount++});
return nInfoCount},
_deleteAttach:function(oAttachFile){try{var oParam={"attachFile":$Json(oAttachFile).toString()};var that=
this;var oAjax=new $Ajax("/mobile/ajax/deleteAttach.nhn",{method:"post",onload:$Fn(function(oResponse){},
this).bind(),
onerror:$Fn(function(oResponse){},this).bind(),
ontimeout:$Fn(function(oResponse){},this).bind(),
timeout:1});oAjax.request(oParam)}catch(e){}},
scrollToAnswer:function(){var welAnswerForm=$Element("answerForm");if(welAnswerForm)nhn.Kin.scrollToPosition(0,
welAnswerForm.offset().top)},
callbackVideoUpload:function(oResponse){var oOption={};this.scrollToAnswer();try{if(!oResponse||oResponse.code!=
"OK"){alert("\ub3d9\uc601\uc0c1\uc744 \ucca8\ubd80\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");return}var oUrl=
nhn.Kin.getUrlInfo(oResponse.result.thumbnailURL);oOption.status="add";oOption.thumbUrl=oResponse.result.thumbnailURL.replace("_logo.jpg",
"_s60.jpg");oOption.videoThumbnailPath=oUrl.pathname;oOption.directory=oUrl.pathname.substring(0,oUrl.pathname.lastIndexOf("/")+
1);oOption.name=oUrl.pathname.substring(oUrl.pathname.lastIndexOf("/")+1,oUrl.pathname.length);oOption.size=
oResponse.result.fileSize||0;oOption.videoPlayTime=Math.floor(oResponse.result.playTime||0);oOption.videoId=
oResponse.result.videoId||"";this.addVideo(oOption)}catch(e){alert("\ub3d9\uc601\uc0c1\uc744 \ucca8\ubd80\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")}},
onClickVideoUploadBtn:function(){if(!this._checkVideoAttachable())return;scrollTo(0,0);$Element(this._oElement["ugcUploadBtn"]).fireEvent("click")},
processAttachInfos:function(){var that=this;this._hAttachInfoList.forEach(function(value,key,object){if(value.type===
"F"){if(value.needToTransferFile)that.setAttachFile(value)}else that.setAttachFile(value)})},
setAttachFile:function(value){var welForm=$Element(this._oElement["form"]);var welInput=$Element("\x3cinput\x3e");
welInput.attr("type","hidden");welInput.attr("name","attachFile");welInput.attr("value",$Json(value).toString());
welForm.append(welInput)},
resetAttachFile:function(){var wElAttachedFileList=$ElementList("input[name\x3dattachFile]");if(wElAttachedFileList&&
wElAttachedFileList.length()>0)wElAttachedFileList.leave()},
getAttachedPhotoString:function(){var that=this;var photoInfoStr=null;this._hAttachInfoList.forEach(function(value,
key,object){if(value.type==="P")if(!photoInfoStr)photoInfoStr=$Json(value).toString();else photoInfoStr+=
","+$Json(value).toString()});
return!photoInfoStr?null:"["+photoInfoStr+"]"},
_fireInitializeMapEvent:function(bIsModify){if(typeof KinMapHandler==="undefined")alert("\uc9c0\ub3c4\ucca8\ubd80 \ubaa8\ub4c8\uc744 \ub85c\ub529\uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");
if(!bIsModify&&this.bHasGeoInfo){alert("\uad81\uae08\ud55c \uacf3\uc740 1\uac1c\ub9cc \ucca8\ubd80\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ubbf8 \ucca8\ubd80\ud55c \uacf3\uc744 \uc0ad\uc81c\ud558\uace0 \ub2e4\uc2dc \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");
return}var eInitializeMapEvent=document.createEvent("Event");eInitializeMapEvent.initEvent("initializeMap",
false,true);if(bIsModify&&this._oAttachedLocation)eInitializeMapEvent["attachedLocation"]=this._oAttachedLocation;
document.dispatchEvent(eInitializeMapEvent)},
_locationSelected:function(oCustomEvent){var oSelectedLocation=oCustomEvent.selectedLocation;if(!oSelectedLocation)return;
this.setLocationData(oSelectedLocation)},
setLocationData:function(result){var sBeforeLocationSource=$("locationSource").value||"CUSTOM";var oSelectedLocation=
{latitude:result.latitude||0,longitude:result.longitude||0,address:result.address||"",roadAddress:result.roadAddress||
"",ncode:result.ncode||"",poiId:result.poiId||0,poiName:result.poiName||""};$("locationSource").value=
result.locationSource||"CUSTOM";$("latitude").value=oSelectedLocation.latitude;$("longitude").value=oSelectedLocation.longitude;
$("address").value=oSelectedLocation.address;$("ncode").value=oSelectedLocation.ncode;$("poiId").value=
oSelectedLocation.poiId;$("poi").value=oSelectedLocation.poiName;this._oAttachedLocation=oSelectedLocation;
var sHtml=this._oGeoTpl.process({address:result.poiName||result.address});if(this.bHasGeoInfo){var welAttachedGeo=
$Element($$.getSingle("li._attachedGeo",this._wElement["attachList"].$value()));if(welAttachedGeo)this._wElement["attachList"].remove(welAttachedGeo);
if(sBeforeLocationSource==="MY")this.setAttachFile({type:"L",status:"remove"})}var welFirstAttachedFile=
$Element($$.getSingle("li._attachedFile",this._wElement["attachList"].$value()));if(welFirstAttachedFile)welFirstAttachedFile.beforeHTML(sHtml);
else this._wElement["attachList"].appendHTML(sHtml);this._showAttachArea();this.bHasGeoInfo=true;this._hideDivideQuestionSetting()},
setAudioInfo:function(){var sHtml=this._oAudioTpl.process();var welFirstAttachedFile=$Element($$.getSingle("li._attachedFile",
this._wElement["attachList"].$value()));if(welFirstAttachedFile)welFirstAttachedFile.beforeHTML(sHtml);
else this._wElement["attachList"].appendHTML(sHtml);this._showAttachArea();this.bHasAudioInfo=true;this._hideDivideQuestionSetting()},
showLoadingIndicator:function(){if(showLoadingIndicator)showLoadingIndicator()},
hideLoadingIndicator:function(){if(hideLoadingIndicator)hideLoadingIndicator()},
hasAttachInfo:function(){if(!this._wElement["attachList"])return false;if(!this._wElement["attachList"].child())return false;
return this._wElement["attachList"].child().length>0}});
var NaverApp=$Class({PHOTOINFRA_SESSION_KEY_API_URL:"/mobile/ajax/getSimplePhotoUploaderSessionKey.nhn",
PHOTO_META_INFO_API_URL:"/mobile/ajax/getImageMetaInfo.nhn",NAVERAPP_PHOTO_UPLOAD_URLSCHEME:"naversearchapp://photoUpload?version\x3d4\x26service\x3ddefault",
sLoginUserId:null,sBrowser:null,sMenu:null,bIsFromNaverApp:false,bIsEnablePhotoUploadUrlScheme:false,
fnOnSuccessUpload:null,fnBeforeRedirect:null,_oLoading:null,_oElement:null,_wElement:null,_oEvent:null,
_wTemplate:null,_oAppLauncher:null,$init:function(oOption){this.setElement();this.setEvent();this.setLoading();
this.sLoginUserId=oOption.userId||"";this.sBrowser=oOption.browser||"SAFARI";this.fnBeforeRedirect=oOption.fnBeforeRedirect||
null;this.fnOnSuccessUpload=oOption.fnOnSuccessUpload||null;this.bIsFromNaverApp=oOption.isFromNaverApp||
false;this.bIsEnablePhotoUploadUrlScheme=oOption.isEnablePhotoUploadUrlScheme||false;if(this.bIsEnablePhotoUploadUrlScheme)if(nhn.Kin.OS.android)window.addEventListener("photoUrl",
$Fn(this._photoUploadCallback,this).bind(null),false);else window.onPhotoUpload=$Fn(this._photoUploadCallback,
this).bind()},
setElement:function(){this._oElement={};this._oElement["writeNaverAppQuestionBtn"]=$$("button._writeNaverAppQuestion");
this._oElement["naverAppLayer"]=$("app_link_layer");this._wElement={};if(this._oElement["naverAppLayer"]){this._wElement["naverAppLayer"]=
$Element(this._oElement["naverAppLayer"]);this._wElement["naverAppLayerBox"]=$Element($$.getSingle("div._layer_box",
this._oElement["naverAppLayer"]))}this._wTemplate={};this._wTemplate["layerContents"]={};this._wTemplate["layerContents"]["voice"]=
$Template("layerContentsForVoiceQuestion")},
setEvent:function(){this._oEvent={};if(this._oElement["writeNaverAppQuestionBtn"])this._oEvent["writeNaverAppQuestionBtn"]=
$Fn(this.onClickNaverAppQuestionBtn,this).attach(this._oElement["writeNaverAppQuestionBtn"],"click");
if(this._wElement["naverAppLayerBox"])this._oEvent["naverAppLayer"]=$Fn(this.onClickNaverAppLayer,this).attach(this._wElement["naverAppLayerBox"].$value(),
"click");$Fn(this.destroy,this).attach(window,"unload")},
destroy:function(){if(this._oEvent){if(this._oEvent["writeNaverAppQuestionBtn"])this._oEvent["writeNaverAppQuestionBtn"].detach(this._oElement["writeNaverAppQuestionBtn"],
"click");if(this._oEvent["naverAppLayer"])this._oEvent["naverAppLayer"].detach(this._wElement["naverAppLayerBox"].$value(),
"click")}this._oElement=this._wElement=this._oEvent=this._wTemplate=this._oLoading=this._oAppLauncher=
null;this.sLoginUserId=this.sBrowser=this.sMenu=this.bIsFromNaverApp=this.bIsEnablePhotoUploadUrlScheme=
null;this.fnOnSuccessUpload=this.fnBeforeRedirect=null;this.PHOTOINFRA_SESSION_KEY_API_URL=this.PHOTO_META_INFO_API_URL=
this.NAVERAPP_PHOTO_UPLOAD_URLSCHEME=null},
setLoading:function(){this._oLoading=new jindo.m.Loading(null,{nWidth:30,nHeight:30,sDefaultForeground:"#999",
sLoadingText:""})},
onClickNaverAppQuestionBtn:function(oEvent){var sQuestionType=nhn.Kin.extractParam(oEvent.element);if(!sQuestionType){oEvent.stop();
return}this.linkByCondition(sQuestionType);oEvent.stop()},
linkByCondition:function(sQuestionType){if(this.bIsFromNaverApp)this.goApp(sQuestionType);else this.showNaverAppLayer(sQuestionType)},
showNaverAppLayer:function(sQuestionType){var sContentsTemplate=this._wTemplate["layerContents"][sQuestionType];
if(!sContentsTemplate)return;this._wElement["naverAppLayerBox"].html(sContentsTemplate.process());this._wElement["naverAppLayer"].show();
var oClientSize=$Document(document).clientSize();var wLinkToAppLayer=this._wElement["naverAppLayerBox"];
var layerHeight=wLinkToAppLayer.height();var layerTop=(oClientSize.height-layerHeight)/2;wLinkToAppLayer.css({"top":layerTop,
"position":"fixed"})},
onClickNaverAppLayer:function(oEvent){var oEl=oEvent.element;var wEl=$Element(oEl);if(wEl.hasClass("_writeNaverAppQuestion"))this.goApp(nhn.Kin.extractParam(oEl));
else if(wEl.hasClass("_closeLayer"))this._wElement["naverAppLayer"].hide();oEvent.stop()},
goApp:function(menu){var os=$Agent().os();if(os.ipad){var menuName=menu=="photo"?"\uc0ac\uc9c4":menu==
"voice"?"\ub179\uc74c":"";alert("\uc544\uc774\ud328\ub4dc\uc6a9 \ub124\uc774\ubc84\uc571\uc5d0\uc11c\ub294 "+
menuName+"\uc9c8\ubb38\ud558\uae30\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");return}if(typeof this.fnBeforeRedirect===
"function")this.fnBeforeRedirect();if(typeof nhn==="undefined"||!nhn.mobile||!nhn.mobile.AppLauncher)return;
if(!this._oAppLauncher)this._oAppLauncher=new nhn.mobile.AppLauncher;var sUrlSchemeQuery="kin?version\x3d4\x26menu\x3d"+
menu+"\x26user_id\x3d"+this.sLoginUserId;var oAppLaunchParams={ios:{scheme:"naversearchapp",installId:"393499958",
query:sUrlSchemeQuery,universal:""},android:{scheme:"naversearchapp","package":"com.nhn.android.search",
query:sUrlSchemeQuery,action:"android.intent.action.VIEW",category:"android.intent.category.BROWSABLE"},
config:{unsupportedMsg:"\ub124\uc774\ubc84\uc571\uc740 iOS / Android \ub2e8\ub9d0\uae30\uc5d0\uc11c\ub9cc \ub2e4\uc6b4\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4."}};
this._oAppLauncher.launch(oAppLaunchParams)},
uploadPhotoByUrlScheme:function(){if(!this.bIsEnablePhotoUploadUrlScheme||!nhn.Kin.OS.android&&!nhn.Kin.OS.ios){alert("\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud658\uacbd\uc785\ub2c8\ub2e4.");
return}this._oLoading.show();var oPhotoinfraSessionKeyAjax=new $Ajax(this.PHOTOINFRA_SESSION_KEY_API_URL,
{method:"post",onload:$Fn(function(oResponse){this._oLoading.hide();var jsonResult=oResponse.json();if(jsonResult&&
jsonResult.isSuccess&&jsonResult.result){var sSessionKey=jsonResult.result[0].sessionKey;if(!sSessionKey){alert("\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
return}location.href=this.NAVERAPP_PHOTO_UPLOAD_URLSCHEME+"\x26user_id\x3d"+this.sLoginUserId+"\x26sessionKey\x3d"+
sSessionKey}else alert("\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")},
this).bind(),
onerror:$Fn(function(oResponse){alert("\ub124\ud2b8\uc6cc\ud06c \uc9c0\uc5f0\uc774 \ubc1c\uc0dd\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");
this._oLoading.hide()},this).bind(),
ontimeout:$Fn(function(oResponse){alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.");
this._oLoading.hide()},this).bind(),
timeout:3});oPhotoinfraSessionKeyAjax.request()},
_photoUploadCallback:function(sPhotoUrl,oEvent){var sUploadedPhotoUrl=sPhotoUrl;if(!sUploadedPhotoUrl){if(typeof photoUrl===
"undefined"||!photoUrl||photoUrl==="null"){alert("\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
return}sUploadedPhotoUrl=photoUrl}this._oLoading.show();var oPhotoMetaInfoAjax=new $Ajax(this.PHOTO_META_INFO_API_URL,
{method:"post",onload:$Fn(function(oResponse){this._oLoading.hide();var jsonResult=oResponse.json();if(jsonResult&&
jsonResult.isSuccess&&jsonResult.result){var oPhotoMetaInfo=jsonResult.result[0];if(!oPhotoMetaInfo){alert("\uc0ac\uc9c4 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
return}this._setImageFileInfo(oPhotoMetaInfo.fileInfo,oPhotoMetaInfo.directory,oPhotoMetaInfo.name,oPhotoMetaInfo.width,
oPhotoMetaInfo.height,oPhotoMetaInfo.fileSize)}else alert("\uc0ac\uc9c4 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")},
this).bind(),
onerror:$Fn(function(oResponse){alert("\ub124\ud2b8\uc6cc\ud06c \uc9c0\uc5f0\uc774 \ubc1c\uc0dd\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");
this._oLoading.hide()},this).bind(),
ontimeout:$Fn(function(oResponse){alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.");
this._oLoading.hide()},this).bind(),
timeout:3});oPhotoMetaInfoAjax.request({"imageUrl":sUploadedPhotoUrl||""})},
_setImageFileInfo:function(sFileInfo,sDirectory,sName,nWidth,nHeight,nFileSize){if(!sFileInfo||!sDirectory||
!sName||!nWidth||!nHeight||!nFileSize){alert("\uc0ac\uc9c4 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
return}var oImageInfo={fileInfo:sFileInfo,width:nWidth,height:nHeight,size:nFileSize,directory:sDirectory,
name:sName};if(typeof this.fnOnSuccessUpload==="function")this.fnOnSuccessUpload(oImageInfo)}});
var ImageClassification=$Class({_aClassifiedImageList:null,_fnGetExpertType:null,_fnCallbackForImageClassification:null,
MAX_IMAGE_CLASSIFICATION_COUNT:2,RECOMMEND_IMAGE_DIRECTORY_AJAX_URL:"/mobile/ajax/recommendImageDir.nhn",
$init:function(htOption){this._aClassifiedImageList=$A();this._fnGetExpertType=htOption.fnGetExpertType;
this._fnCallbackForImageClassification=htOption.fnCallback;this.setEventListener();$Fn(this.destroy,this).attach(window,
"unload")},
setEventListener:function(){document.addEventListener("photoUploadComplete",$Fn(this._photoUploadCallback,
this).bind(),false);document.addEventListener("refreshImageRecommendDir",$Fn(this._getRecommendedDirectoryForImage,
this).bind(),false)},
_photoUploadCallback:function(oCustomEvent){var aUploadedImageList=oCustomEvent.uploadedImageList||[];
if(aUploadedImageList.length>this.MAX_IMAGE_CLASSIFICATION_COUNT)return;this._getRecommendedDirectoryForImage(oCustomEvent)},
_getRecommendedDirectoryForImage:function(oCustomEvent){var aUploadedImageList=oCustomEvent.uploadedImageList||
[];var aClassifiedImageUrl=[];var aUnclassifiedImageUrl=[];for(var i=0,len=aUploadedImageList.length;i<
len;i++){if(i>=this.MAX_IMAGE_CLASSIFICATION_COUNT)break;var sImageUrl=aUploadedImageList[i];if(this._aClassifiedImageList.has(sImageUrl))aClassifiedImageUrl.push(sImageUrl);
else aUnclassifiedImageUrl.push(sImageUrl)}this._getRecommendDirectoryListAjax(aUnclassifiedImageUrl,
aClassifiedImageUrl)},
_getRecommendDirectoryListAjax:function(aUnclassifiedImageUrl,aClassifiedImageUrl){var sUnclassifiedImageParam=
"";if(aUnclassifiedImageUrl)for(var i=0,len=aUnclassifiedImageUrl.length;i<len;i++){if(i>0)sUnclassifiedImageParam+=
";";sUnclassifiedImageParam+=aUnclassifiedImageUrl[i]}var sClassifiedImageParam="";if(aClassifiedImageUrl)for(var j=
0,len=aClassifiedImageUrl.length;j<len;j++){if(j>0)sClassifiedImageParam+=";";sClassifiedImageParam+=
aClassifiedImageUrl[j]}var oParam={"unclassifiedImageList":sUnclassifiedImageParam,"classifiedImageList":sClassifiedImageParam,
"expertType":typeof this._fnGetExpertType==="function"?this._fnGetExpertType():""};var oOption={onload:$Fn(this._imageDirectoryRecommendCallback,
this).bind(aUnclassifiedImageUrl),method:"post",timeout:5,ontimeout:$Fn(function(){},this).bind(),
onerror:$Fn(function(){},this).bind()};
var oAjax=new $Ajax(this.RECOMMEND_IMAGE_DIRECTORY_AJAX_URL,oOption);oAjax.request(oParam)},
_imageDirectoryRecommendCallback:function(aUnclassifiedImageUrl,oResponse){var oResponseJson=oResponse.json();
if(oResponseJson.isSuccess){if(typeof this._fnCallbackForImageClassification==="function")this._fnCallbackForImageClassification(oResponseJson.result)}else if(typeof this._fnCallbackForImageClassification===
"function")this._fnCallbackForImageClassification([]);if(aUnclassifiedImageUrl)for(var i=0,len=aUnclassifiedImageUrl.length;i<
len;i++)this._aClassifiedImageList.push(aUnclassifiedImageUrl[i])},
destroy:function(){document.removeEventListener("photoUploadComplete",$Fn(this._photoUploadCallback,this).bind(),
false);document.removeEventListener("refreshImageRecommendDir",$Fn(this._getRecommendedDirectoryForImage,
this).bind(),false);this._aClassifiedImageList=this._fnCallbackForImageClassification=null}});
var KinMapHandler=$Class({_oElement:null,_wElement:null,_wEvent:null,_wTemplate:null,_oOption:null,_oKinAutoComplete:null,
_oKinMap:null,_oMarkerOfMap:null,_oLoading:null,_oResizeTimeout:null,_sSortType:null,_nCurrentPage:0,
_bIsLessThanAndroidGingerbread:false,_sAutoCompleteFrom:null,_oAutoCompleteScroll:null,_oSearchScroll:null,
_bIsSearchProcessing:false,_bIsNoMoreList:false,_oSearchOption:null,_oCurrentLocation:null,_oRecommendDirectoryInfo:null,
ADDRESSINFO_BY_COORD_AJAX:"/mobile/ajax/getAddressInfoByCoord.nhn",PLACE_ADDRESS_LIST_AJAX:"/mobile/ajax/getPlaceAddressList.nhn",
PLACE_ADDRESS_AUTO_COMPLETE_AJAX:"http://ac.map.naver.com/mobilePlaceAddress/ac",GEOLOCATION_AGREEMENT_URL:"https://nid.naver.com/iasystem/m_pop.nhn?todo\x3dsetTermAgree_popup\x26target\x3dpersAuth_popup\x26",
MESSAGE:{FAILED_TO_LOAD_SCRIPT:"\uc704\uce58\ucca8\ubd80 \uae30\ub2a5\uc744 \ucd08\uae30\ud654\ud558\uc9c0 \ubabb\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",
LOCATION_SEARCH_FAIL:"\uc7a5\uc18c \uac80\uc0c9\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",
NOT_EXIST_KEYWORD_FOR_SEARCH:"\uc785\ub825\ub41c \ud0a4\uc6cc\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.",
EMPTY_SEARCH_LIST:"\uac80\uc0c9\ub41c \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.",FAILED_TO_CHECK_GEOLOCATION_AGREEMENT:"\uc704\uce58\uc815\ubcf4 \uc81c\uacf5 \ub3d9\uc758\uc5ec\ubd80\ub97c \ud655\uc778\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
CONFIRM_MESSAGE_FOR_GEOLOCATION_AGREEMENT:"\ud604\uc7ac \uc704\uce58\uc815\ubcf4\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc704\uce58\uc815\ubcf4 \uc774\uc6a9\ub3d9\uc758\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.\n\n\uc704\uce58\uc815\ubcf4 \uc774\uc6a9\uc5d0 \ub3d9\uc758 \uc2dc, \ucca8\ubd80\ub41c \uc0ac\uc9c4\uc740 \uc720\uc9c0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",
IMPOSSIBLE_TO_GEOLOCATION:"\uc704\uce58\uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\ub294 \ud658\uacbd\uc785\ub2c8\ub2e4.",
FAILED_TO_GEOLOCATION_BY_SETTING:"\uc704\uce58\uc11c\ube44\uc2a4\uac00 \uaebc\uc838 \uc788\uc5b4\n\ud604\uc7ac \uc704\uce58\uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\n\ub2e8\ub9d0\uae30 \uc124\uc815\ud654\uba74\uc5d0\uc11c '\uc704\uce58\uc815\ubcf4' \uc0ac\uc6a9\uc744\n\ud5c8\uc6a9\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.",
FAILED_TO_GEOLOCATION_BY_UNKNOWN:"\ud604\uc7ac \uc704\uce58\uc815\ubcf4\ub97c \ud655\uc778\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.",
NOT_EXISTS_ATTACHED_LOCATION:"\uc120\ud0dd\ub41c \uc704\uce58\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.",WAIT_FOR_SEARCH_PROCESS:"\ubaa9\ub85d\uc744 \uac31\uc2e0\uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694."},
INITIAL_LOCATION:{latitude:37.5666103,longitude:126.9783882},$init:function(htOption){if(!htOption)return;
this._oOption=htOption||{};this._sSortType="accuracy";this._nCurrentPage=1;var oOsInfo=jindo.m.getOsInfo();
if(oOsInfo)this._bIsLessThanAndroidGingerbread=oOsInfo&&oOsInfo.android&&oOsInfo.version<"3.0";if(htOption.isInitializeOnLoad!==
false)$Fn(this.initialize,this).attach(window,"load");else this.initialize();$Fn(this.destroy,this).attach(window,
"unload")},
initialize:function(){this._setElement();this._setEvent();this._setLoading();var oBrowserInfo=jindo.m.getBrowserInfo();
if(oBrowserInfo&&oBrowserInfo.chrome&&oBrowserInfo.version>=50)this._wElement["currentPositionIcon"].hide()},
_setElement:function(){this._oElement={};this._oElement["kinMapTopMenu"]=$("kin_map_top_menu");if(this._oElement["kinMapTopMenu"])this._oElement["closeKinMapLayer"]=
$$.getSingle("a._cancel",this._oElement["kinMapTopMenu"]);this._oElement["kinMapBottomMenu"]=$("kin_map_bottom_menu");
if(this._oElement["kinMapBottomMenu"])this._oElement["submitButton"]=$$.getSingle("button._submit",this._oElement["kinMapBottomMenu"]);
this._oElement["searchWindowArea"]=$("search_area");if(this._oElement["searchWindowArea"]){this._oElement["mapSearchQuery"]=
$$.getSingle("input._searchQueryInput",this._oElement["searchWindowArea"]);this._oElement["searchInputClearBtn"]=
$$.getSingle("button._searchInputClear",this._oElement["searchWindowArea"]);this._oElement["mapSearchBtn"]=
$$.getSingle("button._searchBtn",this._oElement["searchWindowArea"])}this._wElement={};this._wElement["html"]=
$Element($$.getSingle("html"));this._wElement["kinMapLayer"]=$Element($$.getSingle("div._map_layer"));
this._wElement["kinMapWrapper"]=$Element($$.getSingle("div._kinMapWrapper",this._wElement["kinMapLayer"].$value()));
this._wElement["searchWindowArea"]=$Element(this._oElement["searchWindowArea"]);this._wElement["kinMapArea"]=
$Element("kin_map");this._wElement["kinMapTopMenu"]=$Element(this._oElement["kinMapTopMenu"]);this._oElement["currentPositionIcon"]=
$$.getSingle("a._currentPositionIcon",this._wElement["kinMapWrapper"].$value());if(this._oElement["currentPositionIcon"]){this._wElement["currentPositionIcon"]=
$Element(this._oElement["currentPositionIcon"]);this._wElement["currentPositionLoading"]=$Element($$.getSingle("span._currentPositionLoading",
this._wElement["kinMapWrapper"].$value()))}if(this._oElement["kinMapBottomMenu"]){this._wElement["kinMapBottomMenu"]=
$Element(this._oElement["kinMapBottomMenu"]);this._wElement["addressArea"]=$Element($$.getSingle("dl._addressArea",
this._oElement["kinMapBottomMenu"]));this._wElement["showSearchListButton"]=$Element($$.getSingle("a._showSearchList",
this._oElement["kinMapBottomMenu"]));this._wElement["submitButton"]=$Element(this._oElement["submitButton"])}this._wElement["scrollArea"]=
$Element("view");this._wElement["autoCompleteArea"]=$Element("autocomplete_layer_top");this._wElement["autoCompleteResult"]=
$Element($$.getSingle("ul._autoCompleteResult",this._wElement["autoCompleteArea"].$value()));this._wElement["autoCompleteCloseButton"]=
$Element($$.getSingle("button._closeButton",this._wElement["autoCompleteArea"].$value()));this._wElement["searchListArea"]=
$Element("searchListArea");this._wElement["searchSortArea"]=$Element($$.getSingle("div._searchSortArea",
this._wElement["searchListArea"].$value()));this._wElement["searchResult"]=$Element($$.getSingle("div._searchResult",
this._wElement["searchListArea"].$value()));this._wElement["noSearchResult"]=$Element($$.getSingle("div._noSearchResult",
this._wElement["searchListArea"].$value()));this._wElement["searchListWrapper"]=$Element("searchListWrapper");
this._wElement["searchList"]=$Element("searchList");this._wTemplate={};this._wTemplate["addressAreaTpl"]=
$Template("addressAreaTpl");this._wTemplate["searchListTpl"]=$Template("searchListTpl");this._wTemplate["loadingIndicatorTpl"]=
$Template("loadingIndicatorTpl");this._wTemplate["autoCompleteAreaTpl"]=$Template("autoCompleteAreaTpl")},
_setEvent:function(){this._wEvent={};if(this._oElement["closeKinMapLayer"])this._wEvent["closeKinMapLayer"]=
$Fn(this._closeKinMapLayer,this).attach(this._oElement["closeKinMapLayer"],"click");if(this._oElement["mapSearchBtn"]){this._wEvent["mapSearchBtn"]=
$Fn(this._onClickMapSearchBtn,this).attach(this._oElement["mapSearchBtn"],"click");this._wEvent["searchInputClearBtn"]=
$Fn(this._onClickSearchInputClearBtn,this).attach(this._oElement["searchInputClearBtn"],"click");this._wEvent["mapSearchQuery"]=
$Fn(this._onKeyDownFromSearchInput,this).attach(this._oElement["mapSearchQuery"],"keyDown");this._wEvent["mapSearchQueryBlur"]=
$Fn(this._onBlurFromSearchInput,this).attach(this._oElement["mapSearchQuery"],"blur")}if(this._wElement["autoCompleteResult"])this._wEvent["autoCompleteResult"]=
$Fn(this._onClickAutoCompleteResult,this).attach(this._wElement["autoCompleteResult"].$value(),"click");
if(this._wElement["autoCompleteCloseButton"])this._wEvent["autoCompleteCloseButton"]=$Fn(this._onClickAutoCompleteCloseButton,
this).attach(this._wElement["autoCompleteCloseButton"].$value(),"click");if(this._wElement["searchList"])this._wEvent["searchList"]=
$Fn(this._onClickSearchList,this).attach(this._wElement["searchList"].$value(),"click");if(this._oElement["submitButton"])this._wEvent["submitButton"]=
$Fn(this._onSubmit,this).attach(this._oElement["submitButton"],"click");if(this._oElement["currentPositionIcon"])this._wEvent["currentPositionIcon"]=
$Fn(this._onClickCurrentPositionIcon,this).attach(this._oElement["currentPositionIcon"],"click");if(this._wElement["showSearchListButton"])this._wEvent["showSearchListButton"]=
$Fn(this._onClickShowSearchListButton,this).attach(this._wElement["showSearchListButton"].$value(),"click");
if(this._wElement["searchSortArea"])this._wEvent["searchSortArea"]=$Fn(this._onClickSearchSortArea,this).attach(this._wElement["searchSortArea"].$value(),
"click");document.addEventListener("initializeMap",$Fn(this._initializeMap,this).bind(),false);if(this._oOption.isRecommendDirectory)document.addEventListener("refreshLocationRecommendDir",
$Fn(this._refreshLocationRecommendDir,this).bind(),false);this._wEvent["resize"]=$Fn(this._onResizeWindow,
this).attach(window,"resize");this._wEvent["pageshow"]=$Fn(this._onResizeWindow,this).attach(window,"pageshow")},
_onResizeWindow:function(){if(this._oKinMap==null||!this._wElement["kinMapLayer"].visible())return;if(window.scrollTop>
0)window.scrollTo(0,0);this._adjustHeightOfLayer()},
_adjustHeightOfLayer:function(){if(this._wElement["searchListArea"].visible())if(this._wElement["noSearchResult"].visible()){this._detachScrollEvent();
var nResizeHeight=this._getHeightOfNoSearchListArea();this._wElement["noSearchResult"].height(nResizeHeight)}else{var nResizeHeight=
this._getHeightOfSearchListArea();this._wElement["searchListWrapper"].height(nResizeHeight);this._setScrollEvent(nResizeHeight)}else if(this._wElement["autoCompleteArea"].visible()){var nResizeHeight=
this._getHeightOfNoSearchListArea();this._wElement["autoCompleteArea"].height(nResizeHeight);this._setScrollEvent(nResizeHeight)}else{var nResizeWidth=
$Document(document).clientSize().width||0;var nResizeHeight=this._getHeightOfMapArea();if(nResizeHeight<
1)return;this._oKinMap.setSize(new naver.maps.Size(nResizeWidth,nResizeHeight))}},
_getHeightOfMapArea:function(){return $Document(document).clientSize().height-this._wElement["kinMapTopMenu"].height()-
this._wElement["searchWindowArea"].height()-this._wElement["kinMapBottomMenu"].height()},
_getHeightOfSearchListArea:function(){return $Document(document).clientSize().height-this._wElement["kinMapTopMenu"].height()-
this._wElement["searchWindowArea"].height()-this._wElement["searchSortArea"].height()},
_getHeightOfNoSearchListArea:function(){return $Document(document).clientSize().height-this._wElement["kinMapTopMenu"].height()-
this._wElement["searchWindowArea"].height()},
_setLoading:function(){this._oLoading=new jindo.m.Loading(null,{nWidth:30,nHeight:30,sDefaultForeground:"#999",
bUseFoggy:false,sLoadingText:""})},
_setAutoComplete:function(){if(typeof KinAutoComplete==="undefined"||this._oKinAutoComplete)return;this._oKinAutoComplete=
new KinAutoComplete({inputElement:this._oElement["mapSearchQuery"],autoCompleteUrl:this.PLACE_ADDRESS_AUTO_COMPLETE_AJAX,
autoCompleteParam:{frm:"naver_kin_mLocationSearch",ver:"1.0.0",r_format:"json",q_enc:"UTF-8",r_enc:"UTF-8",
st:1,r_lt:1,t_koreng:1,r_unicode:0,r_escape:1},queryParamName:"q",fnAutoCompleteCallback:$Fn(this._onResponseAutoComplete,
this).bind()})},
_onResponseAutoComplete:function(oResponseJson){if(!oResponseJson){this._refreshAutoCompleteArea(null);
return}var aAutoCompleteResult=this._getAutoCompleteResult(oResponseJson.items);this._refreshAutoCompleteArea(aAutoCompleteResult)},
_getAutoCompleteResult:function(aResult){if(!aResult||aResult.length<2)return null;var aAutoCompleteResult=
[];var aOriginalQueryResult=aResult[0];var nOriginalResultCount=aOriginalQueryResult.length;for(var i=
0;i<nOriginalResultCount;i++){var aResultItem=aOriginalQueryResult[i];if(!aResultItem||aResultItem.length<
1)continue;aAutoCompleteResult.push(aResultItem[0])}if(aAutoCompleteResult.length>0)return aAutoCompleteResult;
var aRevisedQueryResult=aResult[1];var nRevisedResultCount=aRevisedQueryResult.length;for(var j=0;j<nRevisedResultCount;j++){var aResultItem=
aRevisedQueryResult[j];if(!aResultItem||aResultItem.length<1)continue;aAutoCompleteResult.push(aResultItem[0])}return aAutoCompleteResult.length<
1?null:aAutoCompleteResult},
_refreshAutoCompleteArea:function(aResult){if(this._wElement["searchListArea"].visible())this._sAutoCompleteFrom=
"search";else if(this._wElement["kinMapWrapper"].visible())this._sAutoCompleteFrom="map";if(!aResult){this._hideAutoCompleteLayer();
return}this._wElement["autoCompleteResult"].html(this._wTemplate["autoCompleteAreaTpl"].process({result:aResult}));
if(this._oAutoCompleteScroll)this._oAutoCompleteScroll.scrollTo(0,0);this._showAutoCompleteArea()},
_hideAutoCompleteLayer:function(){if(this._wElement["autoCompleteArea"].visible()===false)return;this._wElement["autoCompleteResult"].html("");
if(this._sAutoCompleteFrom==="search")this._showSearchListArea(false);else this._showMapArea()},
_onClickAutoCompleteResult:function(oEvent){var oEl=oEvent.element;if(oEl.tagName.toLowerCase()!=="a"){oEvent.stop();
return}var sQuery=oEl.innerHTML;if(!sQuery){oEvent.stop();return}this._oElement["mapSearchQuery"].value=
sQuery;this._onClickMapSearchBtn(oEvent)},
_onClickAutoCompleteCloseButton:function(oEvent){this._hideAutoCompleteLayer();oEvent.stop()},
_initializeMap:function(oCustomEvent){if(oCustomEvent.attachedLocation)this._oCurrentLocation=oCustomEvent.attachedLocation;
if(typeof naver==="undefined"||typeof naver.maps==="undefined"||typeof naver.maps.Map==="undefined")this._loadMapOpenApiScript();
else if(this._oKinMap){this._showKinMapLayer(false);var oCurrentLocation=this._oCurrentLocation;if(oCurrentLocation){this._oKinMap.setCenter(new naver.maps.LatLng(oCurrentLocation.latitude,
oCurrentLocation.longitude));this._oKinMap.setZoom(11);this._refreshAddressArea(oCurrentLocation.address,
oCurrentLocation.roadAddress,oCurrentLocation.poiName)}}else this._showKinMapLayer(true);this._initializeAutoComplete()},
_loadMapOpenApiScript:function(){if(this._oLoading)this._oLoading.show();var sMapOpenApiScriptUrl="https://openapi.map.naver.com/openapi/maps3.js?ver\x3d"+
nhn.Kin.getScriptVersionOfToday();jindo.LazyLoading.load(sMapOpenApiScriptUrl,$Fn(this._onLoadMapOpenApiScript,
this).bind())},
_onLoadMapOpenApiScript:function(){if(this._oLoading)this._oLoading.hide();if(typeof naver==="undefined"||
typeof naver.maps==="undefined"||typeof naver.maps.Map==="undefined"){alert(this.MESSAGE.FAILED_TO_LOAD_SCRIPT);
return}this._showKinMapLayer(true)},
_initializeAutoComplete:function(){if(typeof KinAutoComplete!=="undefined")this._setAutoComplete();else{var sAutoCompleteScriptUrl=
(this._oOption.jsDir||"")+"/m.KinAutoComplete.js";jindo.LazyLoading.load(sAutoCompleteScriptUrl,$Fn(this._setAutoComplete,
this).bind())}},
_showKinMapLayer:function(bIsInitMapArea){if(window.scrollTop>0)window.scrollTo(0,0);if(!this._wElement["html"].hasClass("poi"))this._wElement["html"].addClass("poi");
this._wElement["kinMapLayer"].show();if(bIsInitMapArea)this._initMapArea();else this._onResizeWindow()},
_initMapArea:function(){this._wElement["kinMapArea"].height(this._getHeightOfMapArea());var oCurrentLocation=
this._oCurrentLocation||this._getLastLocationFromLocalStorage();var nInitialLatitude=oCurrentLocation?
oCurrentLocation.latitude:this.INITIAL_LOCATION.latitude;var nInitialLongitude=oCurrentLocation?oCurrentLocation.longitude:
this.INITIAL_LOCATION.longitude;var oCurrentPosition=new naver.maps.LatLng(nInitialLatitude,nInitialLongitude);
var oKinMapOptions={"zoom":11,"minZoom":2,"center":oCurrentPosition,"mapTypeId":"normal","draggable":true,
"scrollWheel":true,"pinchZoom":true,"resizeOrigin":naver.maps.Position.CENTER,"disableKineticPan":true,
"fitBoundsTransition":true,"tileTransition":true,"mapTypeControl":false,"logoControl":true,"logoControlOptions":{"position":naver.maps.Position.BOTTOM_RIGHT},
"scaleControl":true,"scaleControlOptions":{"position":naver.maps.Position.BOTTOM_RIGHT},"mapDataControl":true,
"mapDataControlOptions":{"position":naver.maps.Position.TOP_RIGHT},"zoomControl":true,"zoomControlOptions":{"style":naver.maps.ZoomControlStyle.SMALL,
"position":naver.maps.Position.BOTTOM_LEFT}};var oKinMap=new naver.maps.Map(this._wElement["kinMapArea"].$value(),
oKinMapOptions);this._oMarkerOfMap=new naver.maps.Marker({"position":oCurrentPosition,"map":oKinMap,"title":"\uc5ec\uae30\uac00 \uad81\uae08\ud574\uc694!",
"icon":"https://ssl.pstatic.net/static/kin/m/ic_cpos.png"});this._oKinMap=oKinMap;if(oCurrentLocation)this._refreshAddressArea(oCurrentLocation.address,
oCurrentLocation.roadAddress,oCurrentLocation.poiName);else this._getAddressInfoByCoord(nInitialLatitude,
nInitialLongitude);this._setEventForMap()},
_setEventForMap:function(){var oKinMap=this._oKinMap;if(!oKinMap)return;naver.maps.Event.addListener(oKinMap,
"center_changed",$Fn(function(oEvent){var oPosition=oKinMap.getCenter();if(this._oMarkerOfMap)this._oMarkerOfMap.setPosition(new naver.maps.LatLng(oPosition.lat(),
oPosition.lng()))},this).bind());
naver.maps.Event.addListener(oKinMap,"dragend",$Fn(function(){var oPosition=oKinMap.getCenter();var nLatitude=
oPosition.lat()||0;var nLongitude=oPosition.lng()||0;if(this._wElement["currentPositionIcon"])if(this._wElement["currentPositionIcon"].hasClass("on"))this._wElement["currentPositionIcon"].removeClass("on");
this._getAddressInfoByCoord(nLatitude,nLongitude)},this).bind());
this._setNclicksEventForMap()},
_setNclicksEventForMap:function(){try{if(!this._wEvent["zoomInButton"]){this._oElement["zoomInButton"]=
this._oKinMap.zoomControl._doms.zoomIn;if(this._oElement["zoomInButton"])this._wEvent["zoomInButton"]=
$Fn(function(oEvent){nclk(this._oElement["zoomInButton"],"loc.plus","","")},this).attach(this._oElement["zoomInButton"],
"click")}if(!this._wEvent["zoomOutButton"]){this._oElement["zoomOutButton"]=this._oKinMap.zoomControl._doms.zoomOut;
if(this._oElement["zoomOutButton"])this._wEvent["zoomOutButton"]=$Fn(function(oEvent){nclk(this._oElement["zoomOutButton"],
"loc.minus","","")},this).attach(this._oElement["zoomOutButton"],"click")}}catch(e){}},
_getAddressInfoByCoord:function(nLatitude,nLongitude){if(!nLatitude&&!nLongitude)return;var oParam={latitude:nLatitude,
longitude:nLongitude,ts:(new Date).getTime()};var oOption={method:"post",timeout:5,onload:$Fn(this._refreshAddress,
this).bind(nLatitude,nLongitude),ontimeout:$Fn(this._showUnknownAreaMessage,this).bind(),onerror:$Fn(this._showUnknownAreaMessage,
this).bind()};var oAddressInfoAjax=new $Ajax(this.ADDRESSINFO_BY_COORD_AJAX,oOption);oAddressInfoAjax.request(oParam)},
_refreshAddress:function(nLatitude,nLongitude,oResponse){var oResponseJson=oResponse.json();if(!oResponseJson||
!oResponseJson.isSuccess){this._showUnknownAreaMessage();return}var oAddressInfo=oResponseJson.addressInfo;
if(!oAddressInfo){this._showUnknownAreaMessage();return}var sAddress=(oAddressInfo.address||"")+(oAddressInfo.lotNumber||
"");var sRoadAddress=oAddressInfo.roadAddress||null;var nNcode=oAddressInfo.ncode||0;var nDirId=oAddressInfo.dirId||
0;if(sRoadAddress)sRoadAddress=$S(sRoadAddress).trim().$value();this._refreshAddressArea(sAddress,sRoadAddress,
null);this._oCurrentLocation={"poiId":0,"poiName":null,"address":sAddress,"roadAddress":sRoadAddress,
"latitude":nLatitude||0,"longitude":nLongitude||0};if(this._oOption.isRecommendDirectory)this._oRecommendDirectoryInfo=
oResponseJson.recommendDirectoryInfo},
_showUnknownAreaMessage:function(){this._oCurrentLocation=null;this._oRecommendDirectoryInfo=null;if(!this._wElement["addressArea"])return;
this._wElement["submitButton"].hide();this._wElement["addressArea"].html(this._wTemplate["addressAreaTpl"].process({addressType:"unknown"}));
this._onResizeWindow()},
_refreshAddressArea:function(sAddress,sRoadAddress,sPoiName){if(!this._wElement["addressArea"])return;
this._wElement["addressArea"].html(this._wTemplate["addressAreaTpl"].process({addressType:!sPoiName?"address":
"poi",poiName:sPoiName||null,address:sAddress||null,roadAddress:sRoadAddress||null}));if(this._wElement["submitButton"].visible()===
false)this._wElement["submitButton"].show();this._onResizeWindow()},
_onClickCurrentPositionIcon:function(oEvent){var wEl=$Element(oEvent.element);if(wEl.hasClass("on")){oEvent.stop();
return}this._isAgreeToGeolocation();oEvent.stop()},
_isAgreeToGeolocation:function(){this._wElement["currentPositionLoading"].show();var oOption={method:"get",
timeout:3,onload:$Fn(function(oResponse){var oResponseJson=oResponse.json();if(!oResponseJson||!oResponseJson.isSuccess){alert(oResponseJson.errorMsg||
this.MESSAGE.FAILED_TO_CHECK_GEOLOCATION_AGREEMENT);this._wElement["currentPositionLoading"].hide();return}if(oResponseJson.isAgree)this._getCurrentPosition();
else if(confirm(this.MESSAGE.CONFIRM_MESSAGE_FOR_GEOLOCATION_AGREEMENT)){this._wElement["currentPositionLoading"].hide();
var sGeoLocationAgreementUrl=this.GEOLOCATION_AGREEMENT_URL+"\x26token\x3d"+(oResponseJson.token||"");
var oTempSaveSetting=this._oOption.tempSaveSetting;if(oTempSaveSetting&&typeof oTempSaveSetting.fnTempSave===
"function")oTempSaveSetting.fnTempSave(null,function(bIsSuccess,sResponseErrorMsg){if(bIsSuccess){if(typeof oTempSaveSetting.fnBeforeRedirect===
"function")oTempSaveSetting.fnBeforeRedirect();var sRedirectUrl=oTempSaveSetting.sReturnUrl||location.href;
location.href=sGeoLocationAgreementUrl+"\x26return_url\x3d"+encodeURIComponent(sRedirectUrl)}else location.href=
sGeoLocationAgreementUrl+"\x26return_url\x3d"+encodeURIComponent(location.href)});
else location.href=sGeoLocationAgreementUrl+"\x26return_url\x3d"+encodeURIComponent(location.href)}else this._wElement["currentPositionLoading"].hide()},
this).bind(),
ontimeout:$Fn(function(){this._wElement["currentPositionLoading"].hide();alert(nhn.Kin.oMessage.TIMEOUT)},
this).bind(),
onerror:$Fn(function(){this._wElement["currentPositionLoading"].hide();alert(nhn.Kin.oMessage.ERROR)},
this).bind()};
var oCheckAgreeToGeolocationAjax=new $Ajax("/mobile/ajax/isAgreeToGeolocation.nhn",oOption);oCheckAgreeToGeolocationAjax.request()},
_getCurrentPosition:function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition($Fn(this._succeedInGeolocation,
this).bind(),$Fn(this._failedToGeolocation,this).bind(),{enableHighAccuracy:false,timeout:5E3,maximumAge:0});
else{alert(this.MESSAGE.IMPOSSIBLE_TO_GEOLOCATION);this._wElement["currentPositionLoading"].hide()}},
_succeedInGeolocation:function(oLatLng){var nLatitude=oLatLng.coords.latitude||0;var nLongitude=oLatLng.coords.longitude||
0;if(nhn.Kin.isDomesticArea(nLatitude,nLongitude)===false){alert(this.MESSAGE.INVALID_LOCATION);this._wElement["currentPositionLoading"].hide();
return}this._getAddressInfoByCoord(nLatitude,nLongitude);this._oKinMap.setCenter(new naver.maps.LatLng(nLatitude,
nLongitude));this._oKinMap.setZoom(11);this._wElement["currentPositionLoading"].hide();this._wElement["currentPositionIcon"].addClass("on")},
_failedToGeolocation:function(oError){this._wElement["currentPositionLoading"].hide();var sErrorCode=
oError.code;if(sErrorCode===oError.PERMISSION_DENIED||sErrorCode===oError.POSITION_UNAVAILABLE)alert(this.MESSAGE.FAILED_TO_GEOLOCATION_BY_SETTING);
else if(sErrorCode===oError.TIMEOUT)alert(nhn.Kin.oMessage.TIMEOUT);else alert(this.MESSAGE.FAILED_TO_GEOLOCATION_BY_UNKNOWN)},
_closeKinMapLayer:function(oEvent){this._wElement["html"].removeClass("poi");this._wElement["kinMapLayer"].hide();
oEvent.stop()},
_onSubmit:function(oEvent){if(!this._oCurrentLocation){alert(this.MESSAGE.NOT_EXISTS_ATTACHED_LOCATION);
return}if(this._oOption.isRecommendDirectory&&!this._oRecommendDirectoryInfo)this._getRecommendDirectoryAndCloseLayer(this._oCurrentLocation.latitude,
this._oCurrentLocation.longitude);else this._closeLayerAndSelectLocation();oEvent.stop()},
_closeLayerAndSelectLocation:function(){this._wElement["html"].removeClass("poi");this._wElement["kinMapLayer"].hide();
this._saveCurrentLocationToLocalStorage();this._fireLocationSelectedEvent()},
_getRecommendDirectoryAndCloseLayer:function(nLatitude,nLongitude){if(!nLatitude&&!nLongitude){this._closeLayerAndSelectLocation();
return}if(this._oLoading)this._oLoading.show();var oParam={latitude:nLatitude,longitude:nLongitude,ts:(new Date).getTime()};
var oOption={method:"post",timeout:5,onload:$Fn(function(nLatitude,nLongitude,oResponse){if(this._oLoading)this._oLoading.hide();
var oResponseJson=oResponse.json();if(!oResponseJson||!oResponseJson.isSuccess){this._closeLayerAndSelectLocation();
return}this._oRecommendDirectoryInfo=oResponseJson.recommendDirectoryInfo;this._closeLayerAndSelectLocation()},
this).bind(nLatitude,nLongitude),
ontimeout:$Fn(function(){if(this._oLoading)this._oLoading.hide();this._closeLayerAndSelectLocation()},
this).bind(),
onerror:$Fn(function(){if(this._oLoading)this._oLoading.hide();this._closeLayerAndSelectLocation()},this).bind()};
var oRecommendDirectoryInfoAjax=new $Ajax(this.ADDRESSINFO_BY_COORD_AJAX,oOption);oRecommendDirectoryInfoAjax.request(oParam)},
_refreshLocationRecommendDir:function(oCustomEvent){if(typeof this._oOption.fnCallbackForRefreshLocationRecommendDir!==
"function")return;var oAttachedLocation=oCustomEvent.attachedLocation;if(oAttachedLocation)this._oCurrentLocation=
oAttachedLocation;else{this._oOption.fnCallbackForRefreshLocationRecommendDir(null);return}var nLatitude=
oAttachedLocation.latitude;var nLongitude=oAttachedLocation.longitude;if(!nLatitude&&!nLongitude){this._oOption.fnCallbackForRefreshLocationRecommendDir(null);
return}var oParam={latitude:nLatitude,longitude:nLongitude,ts:(new Date).getTime()};var oOption={method:"post",
timeout:5,onload:$Fn(function(oResponse){var oResponseJson=oResponse.json();var oRecommendDirectoryInfo=
null;if(oResponseJson&&oResponseJson.isSuccess){oRecommendDirectoryInfo=oResponseJson.recommendDirectoryInfo;
this._oRecommendDirectoryInfo=oRecommendDirectoryInfo}this._oOption.fnCallbackForRefreshLocationRecommendDir(oRecommendDirectoryInfo)},
this).bind(),
ontimeout:$Fn(function(){},this).bind(),
onerror:$Fn(function(){},this).bind()};
var oRecommendDirectoryInfoAjax=new $Ajax(this.ADDRESSINFO_BY_COORD_AJAX,oOption);oRecommendDirectoryInfoAjax.request(oParam)},
_saveCurrentLocationToLocalStorage:function(){if(!this._oCurrentLocation)return;try{nhn.Kin.LocalStorage.setItem(nhn.Kin.LocalStorage.KEY.MOBILEWEB_QUESTION_LAST_ATTACHED_LOCATION,
$Json(this._oCurrentLocation).toString())}catch(e){}},
_getLastLocationFromLocalStorage:function(){var sLastLocation=nhn.Kin.LocalStorage.getItem(nhn.Kin.LocalStorage.KEY.MOBILEWEB_QUESTION_LAST_ATTACHED_LOCATION);
if(!sLastLocation)return null;try{var oLastLocation=$Json(sLastLocation).toObject()||null;this._oCurrentLocation=
oLastLocation;return oLastLocation}catch(e){}return null},
_fireLocationSelectedEvent:function(){var eLocationSelectedEvent=document.createEvent("Event");eLocationSelectedEvent.initEvent("locationSelected",
false,true);eLocationSelectedEvent["selectedLocation"]=this._oCurrentLocation||null;if(this._oOption.isRecommendDirectory&&
this._oRecommendDirectoryInfo)eLocationSelectedEvent["recommendDirectory"]=this._oRecommendDirectoryInfo;
document.dispatchEvent(eLocationSelectedEvent)},
_onClickSearchInputClearBtn:function(oEvent){this._oElement["mapSearchQuery"].value="";this._hideAutoCompleteLayer();
oEvent.stop()},
_onClickSortBtn:function(oEvent){var sSortType=nhn.Kin.extractParams(oEvent.element);if(!sSortType||sSortType===
this._sSortType){oEvent.stop();return}this._sSortType=sSortType;this._onClickMapSearchBtn(oEvent)},
_onKeyDownFromSearchInput:function(oEvent){if(oEvent.key().enter){this._onClickMapSearchBtn(oEvent);this._oElement["mapSearchQuery"].blur()}},
_onBlurFromSearchInput:function(oEvent){if(this._oResizeTimeout)clearTimeout(this._oResizeTimeout);this._oResizeTimeout=
setTimeout($Fn(this._onResizeWindow,this).bind(),400)},
_onClickMapSearchBtn:function(oEvent){if(this._bIsSearchProcessing){alert(this.MESSAGE.WAIT_FOR_SEARCH_PROCESS);
oEvent.stop();return}var sQuery=this._oElement["mapSearchQuery"].value;if(!sQuery){alert(this.MESSAGE.NOT_EXIST_KEYWORD_FOR_SEARCH);
oEvent.stop();return}this._bIsNoMoreList=false;this._wElement["searchList"].html("");if(this._oSearchScroll)this._oSearchScroll.scrollTo(0,
0);var oSearchOption={"query":sQuery,"sort":this._sSortType,"page":1,"count":20,"ts":(new Date).getTime()};
if(this._oKinMap){var oPosition=this._oKinMap.getCenter();oSearchOption["latitude"]=oPosition.lat()||
0;oSearchOption["longitude"]=oPosition.lng()||0}this._oSearchOption=oSearchOption;this._searchPlaceAddressList(oSearchOption);
oEvent.stop()},
_searchPlaceAddressList:function(oSearchOption){var oParam=oSearchOption||this._oSearchOption;if(!oParam||
!oParam.query){alert(this.MESSAGE.NOT_EXIST_KEYWORD_FOR_SEARCH);return}this._bIsSearchProcessing=true;
this._showLoadingIndicator();var oOption={method:"post",timeout:5,onload:$Fn(this._onSearchPlaceAddressList,
this).bind(oParam.page||1),ontimeout:$Fn(function(){this._bIsSearchProcessing=false;this._hideLoadingIndicator();
alert(nhn.Kin.oMessage.TIMEOUT)},this).bind(),
onerror:$Fn(function(){this._bIsSearchProcessing=false;this._hideLoadingIndicator();alert(nhn.Kin.oMessage.ERROR)},
this).bind()};
var oPlaceAddressListAjax=new $Ajax(this.PLACE_ADDRESS_LIST_AJAX,oOption);oPlaceAddressListAjax.request(oParam)},
_onSearchPlaceAddressList:function(nPage,oResponse){this._bIsSearchProcessing=false;this._hideLoadingIndicator();
var oResponseJson=oResponse.json();if(!oResponseJson){this._showSearchListArea(true);return}if(!oResponseJson.isSuccess){this._bIsNoMoreList=
true;this._showSearchListArea(true);return}var sQueryType=oResponseJson.queryType||"place";var nTotalCount=
oResponseJson.totalCount||0;var oSearchList=oResponseJson.searchList;if(!oSearchList||oSearchList.length<
1){this._bIsNoMoreList=true;this._showSearchListArea(true);return}if(nTotalCount<nPage*this._oSearchOption["count"])this._bIsNoMoreList=
true;for(var i=0,len=oSearchList.length;i<len;i++){if(!oSearchList[i])continue;oSearchList[i].abbrCategory=
this._getAbbrCategory(oSearchList[i].category)}this._wElement["searchList"].html(this._wElement["searchList"].html()+
this._wTemplate["searchListTpl"].process({queryType:sQueryType,searchList:oSearchList||[]}));this._showSearchListArea(true)},
_showLoadingIndicator:function(){if(this._wElement["searchListArea"].visible()&&this._wElement["searchResult"].visible()){if(!this._oElement["loadingIndicator"]){this._oElement["loadingIndicator"]=
$(this._wTemplate["loadingIndicatorTpl"].process());this._wElement["searchList"].append(this._oElement["loadingIndicator"]);
this._onResizeWindow()}}else if(this._oLoading)this._oLoading.show()},
_hideLoadingIndicator:function(){if(this._wElement["searchListArea"].visible()&&this._wElement["searchResult"].visible()){if(this._oElement["loadingIndicator"]){$Element(this._oElement["loadingIndicator"]).leave();
this._oElement["loadingIndicator"]=null}}else if(this._oLoading)this._oLoading.hide()},
_getAbbrCategory:function(sAbbrCategoryStr){if(!sAbbrCategoryStr)return null;var nLastDelimiterIndex=
sAbbrCategoryStr.indexOf("\x3e");if(nLastDelimiterIndex<0||nLastDelimiterIndex>=sAbbrCategoryStr.length-
1)return sAbbrCategoryStr;return sAbbrCategoryStr.substr(nLastDelimiterIndex+1)},
_showAutoCompleteArea:function(){this._wElement["kinMapWrapper"].hide();this._wElement["searchListArea"].hide();
this._wElement["autoCompleteArea"].show();this._wElement["scrollArea"].show();this._onResizeWindow()},
_showSearchListArea:function(bIsDelayedResizing){this._wElement["kinMapWrapper"].hide();this._wElement["autoCompleteArea"].hide();
if(this._wElement["searchList"].html()===""){this._wElement["noSearchResult"].show();this._wElement["searchResult"].hide()}else{this._wElement["noSearchResult"].hide();
this._wElement["searchResult"].show()}this._wElement["searchListArea"].show();this._wElement["scrollArea"].show();
if(bIsDelayedResizing)setTimeout($Fn(function(){this._onResizeWindow()},this).bind(),200);
else this._onResizeWindow()},
_showMapArea:function(){if(this._oSearchScroll)this._oSearchScroll.deactivate();if(this._oAutoCompleteScroll)this._oAutoCompleteScroll.deactivate();
this._wElement["autoCompleteArea"].hide();this._wElement["searchListArea"].hide();this._wElement["scrollArea"].hide();
this._wElement["kinMapWrapper"].show();if(this._wElement["searchList"].html()==="")this._wElement["showSearchListButton"].hide();
else this._wElement["showSearchListButton"].show();this._onResizeWindow()},
_setScrollEvent:function(nScrollHeight){if(nScrollHeight<1)return;if(this._wElement["searchListArea"].visible()){if(this._oAutoCompleteScroll)this._oAutoCompleteScroll.deactivate();
if(!this._oSearchScroll){this._oSearchScroll=new jindo.m.Scroll(this._wElement["searchListWrapper"],{bActivateOnload:true,
bUseHScroll:false,bUseVScroll:true,bUseMomentum:true,nDeceleration:6E-4,nOffsetTop:0,nOffsetBottom:0,
nHeight:nScrollHeight,nWidth:0,bUseBounce:true,bUseHighlight:true,sClassPrefix:"scroll_",bUseCss3d:jindo.m._isUseCss3d(),
bUseTimingFunction:jindo.m._isUseTimingFunction(),bUseTranslate:true,bAutoResize:true,sListElement:"",
nRatio:1.5,nScrollbarHideThreshold:0,bUseScrollbar:false,bUseFixedScrollbar:false,sScrollbarBorder:"1px solid white",
sScrollbarColor:"#8e8e8e",bUseScrollBarRadius:true,bUsePullDown:false,bUsePullUp:false,fnPullDownIdle:null,
fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null});
this._oSearchScroll.attach("afterScroll",$Fn(function(oEvent){var nUpdateBoundaryHeight=120;if(oEvent.nTop<
oEvent.nMaxScrollTop+nUpdateBoundaryHeight)this._nextSearchList()},this).bind())}else{this._oSearchScroll.activate();
this._oSearchScroll.height(nScrollHeight);this._oSearchScroll.refresh()}}else if(this._wElement["autoCompleteArea"].visible()){if(this._oSearchScroll)this._oSearchScroll.deactivate();
if(this._bIsLessThanAndroidGingerbread){var oFocussedInput=$$.getSingle("input:focus");if(oFocussedInput){this._detachScrollEvent();
return}}if(!this._oAutoCompleteScroll){this._oAutoCompleteScroll=new jindo.m.Scroll(this._wElement["autoCompleteArea"],
{bActivateOnload:true,bUseHScroll:false,bUseVScroll:true,bUseMomentum:true,nDeceleration:6E-4,nOffsetTop:0,
nOffsetBottom:0,nHeight:nScrollHeight,nWidth:0,bUseBounce:true,bUseHighlight:true,sClassPrefix:"scroll_",
bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),bUseTranslate:true,
bAutoResize:true,sListElement:"",nRatio:1.5,nScrollbarHideThreshold:0,bUseScrollbar:false,bUseFixedScrollbar:false,
sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUseScrollBarRadius:true,bUsePullDown:false,
bUsePullUp:false,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,
fnPullUpBeforeUpdate:null,fnPullUpUpdating:null});if(!this._bIsLessThanAndroidGingerbread)this._oAutoCompleteScroll.attach("beforeTouchMove",
$Fn(function(oEvent){var oFocussedInput=$$.getSingle("input:focus");if(oFocussedInput)oFocussedInput.blur()},
this).bind())}else{this._oAutoCompleteScroll.activate();
this._oAutoCompleteScroll.height(nScrollHeight);this._oAutoCompleteScroll.refresh()}}},
_detachScrollEvent:function(){if(this._oSearchScroll){this._oSearchScroll.deactivate();this._oSearchScroll.destroy();
this._oSearchScroll=null}if(this._oAutoCompleteScroll){this._oAutoCompleteScroll.deactivate();this._oAutoCompleteScroll.destroy();
this._oAutoCompleteScroll=null}},
_nextSearchList:function(){if(this._bIsSearchProcessing||this._bIsNoMoreList||!this._oSearchOption)return;
this._oSearchOption["page"]=this._oSearchOption["page"]+1;this._oSearchOption["ts"]=(new Date).getTime();
this._searchPlaceAddressList(this._oSearchOption)},
_onClickShowSearchListButton:function(oEvent){if(this._wElement["searchList"].html()===""){oEvent.stop();
return}this._showSearchListArea();oEvent.stop()},
_onClickSearchSortArea:function(oEvent){var oEl=oEvent.element;if(oEl.tagName.toLowerCase()!=="a"){oEl=
oEl.parentNode;if(oEl.tagName.toLowerCase()!=="a"){oEvent.stop();return}}var wEl=$Element(oEl);if(wEl.hasClass("_sort")){var sSortType=
nhn.Kin.extractParam(oEl);if(!sSortType||this._sSortType===sSortType){oEvent.stop();return}this._sSortType=
sSortType;var wCurrentSelectedOption=$Element($$.getSingle("a.on",oEl.parentNode));if(wCurrentSelectedOption)wCurrentSelectedOption.removeClass("on");
wEl.addClass("on");this._onClickMapSearchBtn(oEvent)}else if(wEl.hasClass("_showMap")){this._showMapArea();
oEvent.stop()}else oEvent.stop()},
_onClickSearchList:function(oEvent){var oEl=oEvent.element;if(oEl.tagName.toLowerCase()!=="a"){var aLinkParent=
$Element(oEl).parent(function(wEl){return wEl.$value().tagName.toLowerCase()==="a"},3);
if(aLinkParent.length<1){oEvent.stop();return}oEl=aLinkParent[0].$value()}var aParams=nhn.Kin.extractParams(oEl);
if(!aParams||aParams.length<3){oEvent.stop();return}var nLatitude=aParams[0]||0;var nLongitude=aParams[1]||
0;var nPoiId=aParams[2]||0;var oPoiName=$$.getSingle("strong._poiName",oEl);var oAddress=$$.getSingle("span._address",
oEl);var oRoadAddress=$$.getSingle("span._roadAddress",oEl);var sPoiName=oPoiName?$Element(oPoiName).text():
null;var sAddress=oAddress?$Element(oAddress).text():null;var sRoadAddress=oRoadAddress?$Element(oRoadAddress).text():
null;this._showMapArea();this._oKinMap.setCenter(new naver.maps.LatLng(nLatitude,nLongitude));this._oKinMap.setZoom(11);
if(this._wElement["currentPositionIcon"])if(this._wElement["currentPositionIcon"].hasClass("on"))this._wElement["currentPositionIcon"].removeClass("on");
this._refreshAddressArea(sAddress,sRoadAddress,sPoiName);this._oCurrentLocation={"poiId":nPoiId,"poiName":sPoiName,
"address":sAddress,"roadAddress":sRoadAddress,"latitude":nLatitude,"longitude":nLongitude};if(this._oOption.isRecommendDirectory)this._oRecommendDirectoryInfo=
null;oEvent.stop()},
destroy:function(){if(this._wEvent){if(this._wEvent["closeKinMapLayer"])this._wEvent["closeKinMapLayer"].detach(this._oElement["closeKinMapLayer"],
"click");if(this._wEvent["mapSearchBtn"])this._wEvent["mapSearchBtn"].detach(this._oElement["mapSearchBtn"],
"click");if(this._wEvent["searchInputClearBtn"])this._wEvent["searchInputClearBtn"].detach(this._oElement["searchInputClearBtn"],
"click");if(this._wEvent["mapSearchQuery"])this._wEvent["mapSearchQuery"].detach(this._oElement["mapSearchQuery"],
"keyDown");if(this._wEvent["mapSearchQueryBlur"])this._wEvent["mapSearchQueryBlur"].detach(this._oElement["mapSearchQuery"],
"blur");if(this._wEvent["autoCompleteResult"])this._wEvent["autoCompleteResult"].detach(this._wElement["autoCompleteResult"].$value(),
"click");if(this._wEvent["autoCompleteCloseButton"])this._wEvent["autoCompleteCloseButton"].detach(this._wElement["autoCompleteCloseButton"].$value(),
"click");if(this._wEvent["searchList"])this._wEvent["searchList"].detach(this._wElement["searchList"].$value(),
"click");if(this._wEvent["submitButton"])this._wEvent["submitButton"].detach(this._oElement["submitButton"],
"click");if(this._wEvent["currentPositionIcon"])this._wEvent["currentPositionIcon"].detach(this._oElement["currentPositionIcon"],
"click");if(this._wEvent["showSearchListButton"])this._wEvent["showSearchListButton"].detach(this._wElement["showSearchListButton"].$value(),
"click");if(this._wEvent["searchSortArea"])this._wEvent["searchSortArea"].detach(this._wElement["searchSortArea"].$value(),
"click");if(this._wEvent["zoomInButton"])this._wEvent["zoomInButton"].detach(this._oElement["zoomInButton"],
"click");if(this._wEvent["zoomOutButton"])this._wEvent["zoomOutButton"].detach(this._oElement["zoomOutButton"],
"click");if(this._wEvent["resize"])this._wEvent["resize"].detach(window,"resize");if(this._wEvent["pageshow"])this._wEvent["pageshow"].detach(window,
"pageshow")}document.removeEventListener("initializeMap",$Fn(this._initializeMap,this).bind(),false);
if(this._oOption&&this._oOption.isRecommendDirectory)document.removeEventListener("refreshLocationRecommendDir",
$Fn(this._refreshLocationRecommendDir,this).bind(),false);this._detachScrollEvent();this._oElement=this._wElement=
this._wEvent=this._wTemplate=this._oOption=null;this._oKinMap=this._oMarkerOfMap=this._oLoading=this._oResizeTimeout=
null;this._sSortType=this._nCurrentPage=this._oSearchScroll=this._bIsSearchProcessing=null;this._bIsNoMoreList=
this._oSearchOption=this._oCurrentLocation=this._oRecommendDirectoryInfo=null;this._oKinAutoComplete=
this._bIsLessThanAndroidGingerbread=this._oAutoCompleteScroll=this._sAutoCompleteFrom=null}});
var QuestionRegister=$Class({_oElement:null,_wElement:null,_oEvent:null,_bCaptchaFlag:false,_nTextAreaBeforeHeight:0,
_isFromNaverApp:false,_isEnableNaverAppPhotoUpload:false,_isFromSearch:false,_isIgnoreMsgForExpert:false,
_isJunior:false,_isProcessingForParentalConsent:false,_sCurrentUserId:null,_sNclicksAreaName:null,_oQuestionType:null,
_bIsDirModifiable:true,_bIsModify:false,_oLocationInfo:null,_oRecommendDirList:null,_bTitleFocus:false,
_bIsSupportOninputEvent:false,_nInitializedDirId:0,_oVolunteerDirIdList:[],_bIsClosedVolunteerHelp:false,
_nFixedDirId:0,_nDefaultDirId:0,_bHaveDefaultRecommededDirectory:false,_bIsWorryQuestion:false,_bIsExpertQuestion:false,
_bHaveRecommendedDirectory:false,oImageClassification:null,oKinMapHandler:null,oKinCaptcha:null,sBrowser:null,
oTempSave:null,oNaverApp:null,oLoading:null,DEFAULT_TITLE:"\uc81c\ubaa9(\uc120\ud0dd\uc0ac\ud56d)",bIsDirClickedByUser:false,
bPwFilterTitle:false,bPwFilterContents:false,bOnLoadingRecommendDirectory:false,bOnSubmit:false,bExpertCheck:true,
bUseAnimation:false,nDirId:0,nDocId:0,sMode:null,nCurrentPoint:0,aAttachedInfo:null,_sWaitForSelectionType:null,
_sRecommendReviewStat:"NONE",_sRecommendedDirIdList:"",_sDivideYn:"N",_nWritableQuestionCount:0,_RECOMMEND_REVIEW_STAT:{NONE:"NONE",
GOOD:"GOOD",BAD:"BAD"},oExpertDirMap:{701:"doctor",702:"doctor",703:"oriental",602:"lawyer",608:"laboragent",
401030304:"laboragent",80511:"animalDoctor",704:"pharmacist",403:"taxacc",711:"dietitian",70601:"dietitian",
8030401:"dietitian"},oExpertOccupationMap:{"doctor":{"occupation":"\uc758\uc0ac","area":"\uc758\ub8cc"},
"oriental":{"occupation":"\ud55c\uc758\uc0ac","area":"\ud55c\uc758\ud559"},"lawyer":{"occupation":"\ubcc0\ud638\uc0ac",
"area":"\ubc95\ub960"},"laboragent":{"occupation":"\ub178\ubb34\uc0ac","area":"\ub178\ubb34"},"animalDoctor":{"occupation":"\uc218\uc758\uc0ac",
"area":"\uc218\uc758\ud559"},"pharmacist":{"occupation":"\uc57d\uc0ac","area":"\uc57d\ud559"},"taxacc":{"occupation":"\uc138\ubb34\uc0ac",
"area":"\uc138\ubb34"},"dietitian":{"occupation":"\uc601\uc591\uc0ac","area":"\uc601\uc591\ud559"},"patentLawyer":{"occupation":"\ubcc0\ub9ac\uc0ac",
"area":"\ubc95\ub960"}},oMessage:{"CHECK_EXPERT":"#areaName# \uad00\ub828 \uc9c8\ubb38\uc758 \uacbd\uc6b0,\n"+
"\uba87 \uac00\uc9c0 \ucd94\uac00 \uc815\ubcf4\ub97c \ub354 \uc785\ub825\ud558\uba74\n"+"#occupation# \ub2f5\ubcc0\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\n"+
"\uc815\ud655\ud55c \uc804\ubb38\uac00 \uc0c1\ub2f4\uc744 \uc6d0\ud558\uc2dc\uba74\n"+"\ucd94\uac00 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.\n\n"+
"\uc774 \ub54c \uc9c8\ubb38\uc790 \uc544\uc774\ub514\ub294 \ube44\uacf5\uac1c\ub418\uba70\n"+"\ucd94\uac00 \uc815\ubcf4\ub294 \uc804\ubb38\uac00\uc5d0\uac8c\ub9cc \uacf5\uac1c\ub429\ub2c8\ub2e4.\n\n"+
"\ub2f5\ubcc0\uc790(\uc18c\uc18d\ud611\ud68c), \ub124\uc774\ubc84\ub294\n"+"\ub2f5\ubcc0\uc758 \ubc95\uc801 \ucc45\uc784\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.\n\n"+
"\ucd94\uac00 \uc815\ubcf4\ub97c \uc785\ub825\ud558\uace0\n\uc804\ubb38\uac00\uc5d0\uac8c \uc9c8\ubb38\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",
"CHECK_PARENTAL_CONSENT":"\ub9cc 14\uc138 \ubbf8\ub9cc\uc758 \uc0ac\uc6a9\uc790\ub294\n"+"\uc9c8\ubb38\uc790 \ucd94\uac00\uc815\ubcf4 \uc785\ub825\uc744 \uc704\ud574\n"+
"\ubcf4\ud638\uc790 \ub3d9\uc758\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.\n"+"\ub3d9\uc758\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",
"CHECK_PARENTAL_CONSENT_IN_WRITING":"\ub9cc 14\uc138 \ubbf8\ub9cc\uc758 \uc0ac\uc6a9\uc790\ub294\n"+"\uc9c8\ubb38\uc790 \ucd94\uac00\uc815\ubcf4 \uc785\ub825\uc744 \uc704\ud574\n"+
"\ubcf4\ud638\uc790 \ub3d9\uc758\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.\n"+"\ub3d9\uc758\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n"+
"\uc791\uc131\uc911\uc778 \ub0b4\uc6a9\uc740\n"+"\uc720\uc9c0\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",
"EXPERT_CANNOT_MOVE_DIR":"\uc804\ubb38\uac00\ub2f5\ubcc0 \uc9c8\ubb38 \ubd84\uc57c\uc5d0 \ub4f1\ub85d\ud55c \uc9c8\ubb38\uc740 \ubd84\uc57c\ub97c \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
"WORRY_CANNOT_MOVE_DIR":"\uace0\ubbfcQ\x26A\ub85c \ub4f1\ub85d\ub41c \uc9c8\ubb38\uc740 \ubd84\uc57c\ub97c \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
"IMPOSSIBLE_TO_UPLOAD_PHOTO":"\uc0ac\uc6a9\ud558\uace0 \uacc4\uc2e0 \ub2e8\ub9d0\uae30\uc5d0\uc11c \uc0ac\uc9c4\ucca8\ubd80 \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc544 \uc774\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\uc591\ud574 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4.",
"CANCEL_REGISTER_QUESTION":"\uc9c8\ubb38 \uc791\uc131\uc744 \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uc774 \ud398\uc774\uc9c0\uc5d0\uc11c \ub098\uac00\uba74 \uc791\uc131\ud588\ub358 \uae00\uc740 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4.",
"NEED_TO_SELECT_DIRECTORY":"\uc9c8\ubb38 \ubd84\uc57c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.","HAS_NOT_RECOMMEND_DIRECTORY":"\ucd94\ucc9c \uc9c8\ubb38 \ubd84\uc57c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc9c1\uc811 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",
"IMPOSSIBLE_TO_CHANGE_OPEN_QUESTION":"\ube44\uacf5\uac1c\ub85c \ub4f1\ub85d\ub41c \uc9c8\ubb38\uc744 \uacf5\uac1c\ub85c \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
"IS_UNDER_14_ANSWERER":"1:1 \uc9c8\ubb38\uc744 \ubc1b\uc740 \ub2f5\ubcc0\uc790\uac00 \ub9cc 14\uc138 \ubbf8\ub9cc\uc784\uc5d0 \ub530\ub77c \uc124\uc815\uc744 \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",
"IMPOSSIBLE_TO_ADD_POINT":"\ub0b4\uacf5\ucd94\uac00\ub294 \ubcf4\uc720\ub0b4\uacf5\uc758 30%\uae4c\uc9c0\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.",
"NEED_TO_SELECT_3DEPTH_DIRECTORY":"3\ucc28 \uc9c8\ubb38 \ubd84\uc57c\uae4c\uc9c0 \ubc18\ub4dc\uc2dc \uc120\ud0dd\ud574 \uc8fc\uc138\uc694.",
"IS_IMPOSSIBLE_TO_REGIST_QUESTION_DIRECTORY":"\uc9c8\ubb38\uc744 \ub4f1\ub85d\ud560 \uc218 \uc5c6\ub294 \ubd84\uc57c\uc785\ub2c8\ub2e4.\n\ud558\uc704 \ubd84\uc57c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",
"IS_PROCESSING_REGIST_QUESTION":"\uc9c8\ubb38\uc744 \ub4f1\ub85d\uc911\uc785\ub2c8\ub2e4.\n\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824 \uc8fc\uc138\uc694.",
"TIMEOUT":"\ub124\ud2b8\uc6cc\ud06c \uc9c0\uc5f0\uc774 \ubc1c\uc0dd\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",
"ERROR":"\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.",
"IS_EMPTY_TITLE":"\uc81c\ubaa9\ubd80\ud130 \uc785\ub825\ud574\uc8fc\uc138\uc694.","IS_LESS_THAN_MIN_LENGTH_TITLE":"\uc81c\ubaa9\uc744 5\uc790\uc774\uc0c1 \uc791\uc131\ud574\uc8fc\uc138\uc694.",
"IS_NOT_ALLOWED_TITLE":"\uc9c8\ubb38 \uc81c\ubaa9\uc744 \uc0c1\uc138\ud558\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694.",
"IS_EMPTY_CONTENTS":"\uc9c8\ubb38\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.","IS_LESS_THAN_MIN_LENGTH_CONTENTS":"\uc9c8\ubb38\uc740 \ucd5c\uc18c 5\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694.",
"IS_NOT_ALLOWED_CONTENTS":"\uc9c8\ubb38 \ub0b4\uc6a9\uc744 \uc0c1\uc138\ud558\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694.",
"IS_NOT_ALLOWED_DEPTH_1_DIRID":"1\ucc28 \uc9c8\ubb38 \ubd84\uc57c\ub9cc \uc120\ud0dd\ud558\uc168\uc2b5\ub2c8\ub2e4. 2\ucc28 \uc9c8\ubb38 \ubd84\uc57c \uc774\ud558\ub85c \uc120\ud0dd\ud574\uc11c \uc9c8\ubb38\uc744 \ub4f1\ub85d\ud574\uc8fc\uc138\uc694.",
"QUESTION_REGISTER_WARNING":"\ub2f5\ubcc0\uc774 \ub4f1\ub85d\ub41c \uacbd\uc6b0 \uc9c8\ubb38 \uc218\uc815\uc0ad\uc81c\uac00 \ubd88\uac00\ud569\ub2c8\ub2e4.\n\uac1c\uc778\uc815\ubcf4\uac00 \ub178\ucd9c\ub418\uc9c0 \uc54a\ub3c4\ub85d \uc720\uc758\ud574\uc8fc\uc138\uc694.\n\uc9c8\ubb38\uc744 \ub4f1\ub85d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"},
_MAX_TOTAL_RECOMMEND_DIRECTORY_COUNT:3,_MAX_DIRECTORY_DEPTH:5,_QUICK_DIRECTORY_SEARCH_INPUT_WATCH_PERIOD:200,
_MAX_KEYWORD_LENGTH:720,_GO_KINAPP_INTRODUCTION_URL:pcDomainWithProtocol+"/common/introKinApp.nhn",_QUICK_DIRECTORY_SEARCH_URL:"/mobile/ajax/quickDirectorySearchAjax.nhn",
_RECOMMEND_TYPE:{RECOMMEND:"RECOMMEND",KEYWORD:"KEYWORD",ETC:"ETC"},_DIRECTORY_SELECTION_TYPE:{RECOMMEND:"RECOMMEND",
SEARCH:"SEARCH",NONE:"NONE"},_RECOMMEND_DIRECTORY_INFOMATION:{EXPERT:'\x3ci class\x3d"sp_question directory_information__icon_exclamation"\x3e\x3c/i\x3e \uc804\ubb38\uac00 \ub2f5\ubcc0 \ubd84\uc57c\uc5d0 \ub4f1\ub85d\ub41c \uc9c8\ubb38\uc740 \ubd84\uc57c\ub97c \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.',
WORRY:'\x3ci class\x3d"sp_question directory_information__icon_exclamation"\x3e\x3c/i\x3e \uace0\ubbfcQ\x26A\ub85c \ub4f1\ub85d\ub41c \uc9c8\ubb38\uc740 \ubd84\uc57c\ub97c \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.'},
_RECOMMEND_DIRECTORY_MESSAGE:{EMPTY:'\x3cspan class\x3d"sp_question ico question_directory__i_logo"\x3e\uc9c0\uc2ddi\x3c/span\x3e \ucd94\ucc9c \uc9c8\ubb38 \ubd84\uc57c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694. ',
RECOMMEND:'\x3cspan class\x3d"sp_question ico question_directory__i_logo"\x3e\uc9c0\uc2ddi\x3c/span\x3e \uc9c8\ubb38 \ubd84\uc57c\ub97c \uc790\ub3d9\uc73c\ub85c \ucd94\ucc9c\ud574\ub4dc\ub824\uc694.',
KEYWORD:'\x3cspan class\x3d"sp_question ico question_directory__i_logo"\x3e\uc9c0\uc2ddi\x3c/span\x3e \uc9c8\ubb38\uc790\uac00 \uc9c1\uc811 \uc120\ud0dd\ud55c \uc9c8\ubb38 \ubd84\uc57c\uc785\ub2c8\ub2e4',
ERROR:'\x3cspan class\x3d"sp_question ico question_directory__i_logo"\x3e\uc9c0\uc2ddi\x3c/span\x3e \uc9c8\ubb38 \ubd84\uc57c\ub97c \uac00\uc838\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.'},
_RECOMMEND_DIR_CRITERIA_ARRAY:[{"key":"fixed","recommendType":"FIXED","maxRecommendCnt":1},{"key":"targetUser",
"recommendType":"TARGET_USER","maxRecommendCnt":1},{"key":"image","recommendType":"IMAGE","maxRecommendCnt":1},
{"key":"location","recommendType":"LOCATION","maxRecommendCnt":1},{"key":"contents","recommendType":"CONTENTS",
"maxRecommendCnt":3}],_WAIT_FOR_SELECTION_TYPE:{NONE:"none",CACHEABLE:"cacheable",CANCELABLE:"cancelable",
NOTCANCELABLE:"notCancelable"},_CONSTANTS_FOR_WAITFORSELECTION_LAYER:{"maxHideTime":24*60*60},_NOT_ALLOWED_WORD_PATTERN:new RegExp("^[\u3131-\u314e\\d\\s\\(\\)\\{\\}\\[\\]\\^\\\\`~!@#$%\x26*_+-\x3d:;\"'?/,.|\x3c\x3e]*$"),
$init:function(htOption){this._oElement={};this._oTemplate={};this._wElement={};this._oEvent={};this._oRecommendDirList=
{};this._bIsSupportOninputEvent="oninput"in window;var aRecommendDirListByTargetUser=htOption.recommendDirListByTargetUser;
if(aRecommendDirListByTargetUser&&aRecommendDirListByTargetUser instanceof Array)this._oRecommendDirList["targetUser"]=
aRecommendDirListByTargetUser;$Fn(this.initialize,this).attach(window,"load");$Fn(this.destroy,this).attach(window,
"unload");if(htOption.isJunior)this._isJunior=htOption.isJunior;this._bIsModify=htOption.isModify;this._sCurrentUserId=
htOption.userId;this._sNclicksAreaName=htOption.nClicksAreaName||"qwr";this.sBrowser=htOption.browser||
"ANDROID";this._isFromNaverApp=htOption.isFromNaverApp||false;this._isEnableNaverAppPhotoUpload=htOption.isEnableNaverAppPhotoUpload||
false;this._oQuestionType=htOption.questionType;this._oVolunteerDirIdList=htOption.volunteerDirIdList||
[];var sExpertType=htOption.expertType;this._isFromSearch=htOption.isFromSearch||false;this._nWritableQuestionCount=
htOption.writableQuestionCount;var oOsInfo=jindo.m.getOsInfo();if(oOsInfo)this.bUseAnimation=oOsInfo.android&&
oOsInfo.version>="4.0"||(oOsInfo.iphone||oOsInfo.ipad)&&oOsInfo.version>="7.0";if(!this._bIsModify&&!sExpertType){var sExpertiseInfoFlag=
$("expertiseInfoFlag")?$("expertiseInfoFlag").value||"N":"N";if(sExpertiseInfoFlag==="Y"){var nDirId=
$("dirId").value||0;sExpertType=this.oExpertDirMap[this._isExpertDir(nDirId)]||""}}if(!this._bIsModify&&
sExpertType){var oParam={expertType:sExpertType};this._checkEnableQuestionToExpert(oParam)}this.oAttachInfoManager=
new AttachInfoManager({upload_server:htOption.uploadServer,image_server:htOption.imageServer,ndrive_mobile_server:htOption.ndriveMobileServer,
isKitKatAndNaverAppBrowser:this._isEnableNaverAppPhotoUpload,userId:this._sCurrentUserId,photoTemplateId:"photo_tpl",
videoTemplateId:"video_tpl",audioTemplateId:"audio_tpl",fileTemplateIdOfUploadLayer:"file_tpl_of_upload_layer",
fileTemplateIdOfForm:"file_tpl_of_form",geolocationTemplateId:"geo_tpl",nclicksCode:this._sNclicksAreaName+
".picture",isFireUploadCallback:true,articleType:"QUESTION",modifyFlag:this._bIsModify?"Y":"N",fnCallbackShowDividedQuestionSetting:$Fn(this._showDividedQuestionSetting,
this).bind(),fnCallbackHideDividedQuestionSetting:$Fn(this._hideDividedQuestionSetting,this).bind()});
this.oNaverApp=new NaverApp({userId:this._sCurrentUserId,browser:htOption.browser,isFromNaverApp:this._isFromNaverApp,
isEnablePhotoUploadUrlScheme:this._isEnableNaverAppPhotoUpload,fnBeforeRedirect:$Fn(this.detachBeforeUnloadEvent,
this).bind(),fnOnSuccessUpload:$Fn(this.oAttachInfoManager.afterUploadProcess,this.oAttachInfoManager).bind()});
this.oTagRegister=new TagRegister({jsDir:htOption.jsDir,tagListStr:htOption.tagListStr});if(!this._bIsModify||
!this._isExpertDir(htOption.dirId))this.oImageClassification=new ImageClassification({fnGetExpertType:$Fn(this._getExpertType,
this).bind(),fnCallback:$Fn(this.refreshRecommendDirectoryArea,this).bind()});if(htOption.oTempSave){this.oTempSave=
htOption.oTempSave;this.oKinMapHandler=new KinMapHandler({jsDir:htOption.jsDir,isRecommendDirectory:true,
fnCallbackForRefreshLocationRecommendDir:$Fn(this._onRefreshLocationRecommendDir,this).bind(),tempSaveSetting:{sReturnUrl:mobileKinServiceProtocol+
"://"+location.host+"/mobile/qna/question.nhn?temporaryId\x3d1",fnTempSave:$Fn(this.oTempSave.systemTempSave,
this.oTempSave).bind(),fnBeforeRedirect:$Fn(this.detachBeforeUnloadEvent,this).bind()}})}else this.oKinMapHandler=
new KinMapHandler({jsDir:htOption.jsDir,isRecommendDirectory:true});if(!this._bIsModify)this.oKinCaptcha=
new Captcha({svc:"KIN",mode:"QUESTION",dirId:htOption.dirId,docId:0,answerNo:0,userId:this._sCurrentUserId,
check:"N",fOnShowCaptcha:$Fn(this._onShowCaptcha,this).bind(),fOnPassCaptcha:$Fn(this._onPassCaptcha,
this).bind(),fOnFailCaptcha:$Fn(this._onFailCaptcha,this).bind()});this._isIgnoreMsgForExpert=htOption.isIgnoreMsgForExpert||
false;this.nDirId=htOption.dirId;this.nDocId=htOption.docId;this.sMode=htOption.mode;this.nCurrentPoint=
htOption.currentPoint;this._sWaitForSelectionType=htOption.waitForSelectionType||this._WAIT_FOR_SELECTION_TYPE.NONE;
if(htOption&&htOption.photoInfo&&htOption.photoInfo.fileInfo!=="")this.oAttachInfoManager._onSuccessPhotoUpload(htOption.photoInfo);
if(htOption&&htOption.attachedInfo)this.aAttachedInfo=htOption.attachedInfo;this._oLocationInfo=htOption.locationInfo||
null;if(this._oLocationInfo){this.oAttachInfoManager.setLocationData(this._oLocationInfo);setTimeout($Fn(function(){this.oAttachInfoManager.fireRefreshLocationRecommendDirEvent()},
this).bind(),200)}},
initialize:function(){this.setElement();this.setTemplate();this.setEvent();this.oTextArea=(new jindo.m.TextArea("contents_textarea",
{sClassPrefix:"ta-",bUseRadius:false,bUseAutoHeight:true,nExpandHeight:15})).attach({"change":$Fn(this._resizeHeight,
this).bind()});this._nTextAreaPadding=(parseInt($Element(this._oElement["contentsTextarea"]).css("paddingTop"),
10)||0)*2;this._nTextAreaBeforeHeight=this._oElement["contentsTextarea"].scrollHeight;this._oElement["contentsTextarea"].style.height=
this._nTextAreaBeforeHeight+"px";if(!this._bIsModify)this._hideOptions();if(this.nDirId>0)if(this._bIsModify)this._initDirForModify();
else this._initDirForRegister();if(this.sMode=="photo")if(this._isEnableNaverAppPhotoUpload){if(this.oAttachInfoManager._checkPhotoAttachable())this.oNaverApp.uploadPhotoByUrlScheme()}else $Element("file_select").fireEvent("click");
else if(this.sMode=="location")setTimeout($Fn(this._onClickLocationBtn,this).bind(),200);if(this._bIsModify){this._initOptionsForModify();
this._initAttachInfoForModify()}else if(this._isFromSearch)this._initializeForSearch();else{var sRecommendKeyword=
this._getRecommendTargetString();if(sRecommendKeyword&&sRecommendKeyword.length>=5)this._refreshRecommendDirectoryWithoutAlert(sRecommendKeyword);
this._initAttachInfo()}this._initDirectoryLayer();if(this._oElement["titleInput"]&&this._oElement["titleInput"].value.length>
0||Number($("temporaryId").value)!==0)this._bTitleFocus=true;this._checkWaitForSelectionLayer()},
_initDirForRegister:function(){this._nInitializedDirId=this.nDirId||0;$Element(this._oElement["recommendList"]).html(this._oTemplate["recommendDirListTpl"].process({nClicksAreaName:this._sNclicksAreaName,
recommendDirList:null}))},
_initDirForModify:function(){this._bIsExpertQuestion=this._isExpertDir(this.nDirId);this._bIsWorryQuestion=
nhn.Kin.getD1Id(this.nDirId)===20;if(this._oQuestionType.noAnswer&&!this._oQuestionType.report)if(this._bIsExpertQuestion){this._wElement["directoryInformation"].html(this._RECOMMEND_DIRECTORY_INFOMATION.EXPERT);
this._wElement["directoryInformation"].show()}else if(this._bIsWorryQuestion){this._wElement["directoryInformation"].html(this._RECOMMEND_DIRECTORY_INFOMATION.WORRY);
this._wElement["directoryInformation"].show()}else{this._nInitializedDirId=this.nDirId||0;$Element(this._oElement["recommendList"]).html(this._oTemplate["recommendDirListTpl"].process({nClicksAreaName:this._sNclicksAreaName,
recommendDirList:null}))}},
setFixedDirId:function(nDirId){this._nFixedDirId=nDirId|0},
_initDirectoryLayer:function(){if(this.nDirId)this._nFixedDirId=this.nDirId;if(this._bIsModify){if(this._bIsExpertQuestion||
this._bIsWorryQuestion)this._refreshRecommendDirectory(true);else this._refreshRecommendDirectory(false);
this._wElement["recommendSlogan"].hide()}else{this._wElement["keywordSearchArea"].hide();if(this.nDirId!==
0){this._refreshRecommendDirectory(true);this._wElement["recommendSlogan"].hide()}}},
setElement:function(){this._oElement["ct"]=$("ct");this._oElement["titleInput"]=$("title_input");this._oElement["questionArea"]=
$("question_area");this._oElement["contentsTextarea"]=$("contents_textarea");this._oElement["settingOpenId"]=
$("setting_open_id");this._oElement["settingAllowJunior"]=$("setting_allow_junior");this._oElement["settingAllowRss"]=
$("setting_allow_rss");this._oElement["settingAllowAdult"]=$("setting_allow_adult");this._oElement["autoTitleFlag"]=
$("autoTitleFlag");this._oElement["submitBtns"]=$("submit_btns");this._oElement["headerBtns"]=$("header_btns");
this._oElement["refreshRecommendDirs"]=$$.getSingle("button._refresh_recommend");this._oElement["recommendList"]=
$("recommend_directory_area");this._oElement["cancelBtn"]=$$.getSingle("button._cancel",this._oElement["submitBtns"]);
this._oElement["cancelBtnHeader"]=$$.getSingle("a._cancel",this._oElement["headerBtns"]);this._oElement["tRegisterBtn"]=
$$.getSingle("a._register",this._oElement["headerBtns"]);this._oElement["bRegisterBtn"]=$$.getSingle("button._register",
this._oElement["submitBtns"]);this._oElement["betPoint"]=$("betPoint");this._oElement["useFirstQuestionBetPoint"]=
$("useFirstQuestionBetPoint");this._oElement["settingDetail"]=$("setting_detail");this._oElement["enableHideOptions"]=
$$("._enable_hide",this._oElement["settingDetail"]);this._oElement["changeSettingBtn"]=$("change_setting_btn");
this._oElement["settingBetPoint"]=$("setting_bet_point");this._oElement["betPointBtn"]=$("bet_point_btn");
this._oElement["settingDivideQuestion"]=$("setting_divide_question");this._oElement["firstQuestionBetPoint"]=
$("first_question_bet_point");this._oElement["photoBtn"]=$("photo_btn");this._oElement["recordBtn"]=$("record_btn");
this._oElement["locationBtn"]=$("location_btn");this._oElement["volunteerLayer"]=$("volunteerLayer");
this._oElement["volunteerLayerInnerArea"]=$$.getSingle("._innerArea",this._oElement["volunteerLayer"]);
this._oElement["volunteerLayerCloseBtn"]=$$("._closeBtn",this._oElement["volunteerLayer"]);this._oElement["suicidalPreventionBanner"]=
$("suicidalPreventionBanner");this._oElement["suicideCounselingToDoctor"]=$$.getSingle("._suicideCounselingToDoctor");
this._wElement["PWLayerArea"]=$Element("prohibited_words_layer_area");if(this._sWaitForSelectionType===
this._WAIT_FOR_SELECTION_TYPE.NOTCANCELABLE)this._wElement["waitForSelectionLayer"]=$Element("wait_for_selection_ban_layer");
else if(this._sWaitForSelectionType===this._WAIT_FOR_SELECTION_TYPE.CANCELABLE)this._wElement["waitForSelectionLayer"]=
$Element("wait_for_selection_warning_layer");else if(this._sWaitForSelectionType===this._WAIT_FOR_SELECTION_TYPE.CACHEABLE)this._wElement["waitForSelectionLayer"]=
$Element("wait_for_selection_layer");if(this._wElement["waitForSelectionLayer"])this._wElement["waitForSelectionLayerInnerBox"]=
$Element($$.getSingle("div._layer",this._wElement["waitForSelectionLayer"].$value()));this._wElement["descriptionArea"]=
$Element($$.getSingle("div._descriptionArea",this._oElement["questionArea"]));this._oElement["directoryArea"]=
$("directory_area");this._oElement["recommendedDirectoryReview"]=$("recommended_directory_review");this._oElement["goodRecommendDirectoryReview"]=
$$.getSingle("button._good_recommend",this._oElement["recommendedDirectoryReview"]);this._oElement["badRecommendDirectoryReview"]=
$$.getSingle("button._bad_recommend",this._oElement["recommendedDirectoryReview"]);this._wElement["directoryArea"]=
$Element(this._oElement["directoryArea"]);this._wElement["directoryTitle"]=$Element($("directory_title"));
this._wElement["recommendSlogan"]=$Element($("recommend_slogan"));this._wElement["keywordSearchArea"]=
$Element($("keyword_search_area"));this._wElement["recommendedDirectoryReview"]=$Element(this._oElement["recommendedDirectoryReview"]);
this._wElement["badRecommendDirectoryReview"]=$Element(this._oElement["badRecommendDirectoryReview"]);
this._wElement["goodRecommendDirectoryReview"]=$Element(this._oElement["goodRecommendDirectoryReview"]);
this._wElement["directoryInformation"]=$Element($("directory_information"));this._oElement["quickDirectorySearchBox"]=
$$.getSingle("div._quickDirectorySearchBox",this._oElement["directoryArea"]);this._oElement["quickDirectorySearchIcon"]=
$$.getSingle("i._quickDirectorySearchIcon",this._oElement["quickDirectorySearchBox"]);this._oElement["quickDirectorySearchInput"]=
$$.getSingle("input._quickDirectorySearchInput",this._oElement["quickDirectorySearchBox"]);this._oElement["quickDirectorySearchResultList"]=
$$.getSingle("ul._quickDirectorySearchResultList",this._oElement["quickDirectorySearchBox"]);this._wElement["quickDirectorySearchBox"]=
$Element(this._oElement["quickDirectorySearchBox"]);this._oElement["dividedQuestionConfirmLayer"]=$("dividedQuestionConfirmLayer");
this._oElement["dividedQuestionConfirmLayerBtnArea"]=$$.getSingle("div._buttonArea",this._oElement["dividedQuestionConfirmLayer"]);
this._oElement["dividedQuestionConfirmLayerDescription"]=$$.getSingle("p._description",this._oElement["dividedQuestionConfirmLayer"]);
this._oElement["settingDivideQuestionBtnArea"]=$$.getSingle("div._btnArea",this._oElement["settingDivideQuestion"]);
this._wElement["settingDivideQuestion"]=$Element(this._oElement["settingDivideQuestion"]);this._wElement["dividedQuestionConfirmLayer"]=
$Element(this._oElement["dividedQuestionConfirmLayer"]);this._wElement["dividedQuestionConfirmLayerDescription"]=
$Element(this._oElement["dividedQuestionConfirmLayerDescription"])},
setTemplate:function(){this._oTemplate["whenIsAllowOnlyAdult"]=$Template("whenIsAllowOnlyAdult");this._oTemplate["whenIsAllowOnlyJunior"]=
$Template("whenIsAllowOnlyJunior");this._oTemplate["whenIsAllowAll"]=$Template("whenIsAllowAll");this._oTemplate["whenIsAdultDirectory"]=
$Template("whenIsAdultDirectory");this._oTemplate["whenIsAllowNormalDirectory"]=$Template("whenIsAllowNormalDirectory");
this._oTemplate["recommendDirListTpl"]=$Template("recommendDirListTpl");this._oTemplate["expertTemplateForm"]=
$Template("expertTemplateForm");this._oTemplate["PWLayer"]=$Template("prohibited_words_layer_tpl");this._oTemplate["quickDirectorySearchResultList"]=
$Template("quickDirectorySearchResultListTpl")},
setEvent:function(){if(this._oElement["titleInput"]){this._oEvent["titleFocus"]=$Fn(this._titleFocus,
this).attach(this._oElement["titleInput"],"focus");this._oEvent["titleBlur"]=$Fn(this._titleBlur,this).attach(this._oElement["titleInput"],
"blur")}this._oEvent["contentsFocus"]=$Fn(this._contentsFocus,this).attach(this._oElement["contentsTextarea"],
"focus");this._oEvent["contentsBlur"]=$Fn(this._contentsBlur,this).attach(this._oElement["contentsTextarea"],
"blur");this._oEvent["settingOpenId"]=$Fn(this._onClickSettingOpenId,this).attach(this._oElement["settingOpenId"],
"click");this._oEvent["settingAllowJunior"]=$Fn(this._onClickSettingAllowJunior,this).attach(this._oElement["settingAllowJunior"],
"click");this._oEvent["settingAllowRss"]=$Fn(this._onClickSettingAllowRss,this).attach(this._oElement["settingAllowRss"],
"click");this._oEvent["settingAllowAdult"]=$Fn(this._onClickSettingAllowAdult,this).attach(this._oElement["settingAllowAdult"],
"click");this._oEvent["recommendList"]=$Fn(this._onClickRecommendList,this).attach(this._oElement["recommendList"],
"click");this._oEvent["cancelBtn"]=$Fn(this._onClickCancelBtn,this).attach(this._oElement["cancelBtn"],
"click");this._oEvent["tRegisterBtn"]=$Fn(this._onClickRegisterBtn,this).attach(this._oElement["tRegisterBtn"],
"click");this._oEvent["bRegisterBtn"]=$Fn(this._onClickRegisterBtn,this).attach(this._oElement["bRegisterBtn"],
"click");this._oEvent["cancelBtnHeader"]=$Fn(this._onClickCancelBtn,this).attach(this._oElement["cancelBtnHeader"],
"click");this._oEvent["refreshRecommendDirs"]=$Fn(this._onClickRefreshRecommendDirectory,this).attach(this._oElement["refreshRecommendDirs"],
"click");this._oEvent["changeSettingBtn"]=$Fn(this._onClickChangeSettingBtn,this).attach(this._oElement["changeSettingBtn"],
"click");this._oEvent["settingBetPoint"]=$Fn(this._onClickBetPointSetting,this).attach(this._oElement["settingBetPoint"],
"click");this._oEvent["betPointBtn"]=$Fn(this._onClickBetPointBtn,this).attach(this._oElement["betPointBtn"],
"click");this._oEvent["settingDivideQuestion"]=$Fn(this._onClickDivideQuestionSetting,this).attach(this._oElement["settingDivideQuestionBtnArea"],
"click");this._oEvent["firstQuestionBetPoint"]=$Fn(this._onClickFirstQuestionBetPointBtn,this).attach(this._oElement["firstQuestionBetPoint"],
"click");if(this._oElement["photoBtn"])this._oEvent["photoBtn"]=$Fn(this._onClickPhotoBtn,this).attach(this._oElement["photoBtn"],
"click");this._oEvent["locationBtn"]=$Fn(this._onClickLocationBtn,this).attach(this._oElement["locationBtn"],
"click");this._oEvent["unload"]=$Fn(function(){var hasTitle=!this.isEmptyTitle();var hasContents=!this.isEmptyContents();
var hasAttachInfo=this.oAttachInfoManager.hasAttachInfo();if(hasTitle||hasContents||hasAttachInfo)return this.oMessage.CANCEL_REGISTER_QUESTION},
this).attach(window,"beforeunload");
this._oEvent["pageShow"]=$Fn(this._onPageShow,this).attach(window,"pageshow");if(this._oElement["suicideCounselingToDoctor"])this._oEvent["suicideCounselingToDoctor"]=
$Fn(this._suicideCounselingToDoctor,this).attach(this._oElement["suicideCounselingToDoctor"],"click");
if(this._wElement["PWLayerArea"])this._oEvent["clickPWLayer"]=$Fn(this._onClickPWLayer,this).attach(this._wElement["PWLayerArea"].$value(),
"click");document.addEventListener("locationSelected",$Fn(this._onLocationSelected,this).bind(),false);
this._oEvent["good_recommend_review_click"]=$Fn(this._onClickGoodRecommendReview,this).attach(this._oElement["goodRecommendDirectoryReview"],
"click");this._oEvent["bad_recommend_review_click"]=$Fn(this._onClickBadRecommendReview,this).attach(this._oElement["badRecommendDirectoryReview"],
"click");if(!(this._bIsModify&&this._oQuestionType.expert))if(this._bIsSupportOninputEvent){this._oEvent["inputQuestionArea"]=
$Fn(this._onInputQuestionArea,this).attach(this._oElement["questionArea"],"input");this._oEvent["keyupQuestionArea"]=
$Fn(this._onKeyupQuestionAreaCheckEnter,this).attach(this._oElement["questionArea"],"keyup")}else{this._oEvent["keyupQuestionArea"]=
$Fn(this._onKeyupQuestionArea,this).attach(this._oElement["questionArea"],"keyup");this._oEvent["pasteQuestionArea"]=
$Fn(this._onPasteQuestionArea,this).attach(this._oElement["questionArea"],"paste")}if(this._wElement["waitForSelectionLayer"])this._oEvent["onClickWaitForSelectionLayer"]=
$Fn(this._onClickWaitForSelectionLayer,this).attach(this._wElement["waitForSelectionLayer"].$value(),
"click");this._oEvent["focusQuickDirectorySearchInput"]=$Fn(this._onFocusQuickDirectorySearchInput,this).attach(this._oElement["quickDirectorySearchInput"],
"focus");this._oEvent["blurQuickDirectorySearchInput"]=$Fn(this._onBlurQuickDirectorySearchInput,this).attach(this._oElement["quickDirectorySearchInput"],
"blur");this._oEvent["clickQuickDirectorySearchResultList"]=$Fn(this._onClickQuickDirectorySearchResultList,
this).attach(this._oElement["quickDirectorySearchResultList"],"click");if(this._oElement["volunteerLayer"])this._oEvent["volunteerLayerCloseBtn"]=
$Fn(this._onClickVolunteerLayerCloseBtn,this).attach(this._oElement["volunteerLayerCloseBtn"],"click");
if(this._oElement["dividedQuestionConfirmLayerBtnArea"])this._oEvent["dividedQuestionConfirmLayerBtnArea"]=
$Fn(this._onClickDividedQuestionConfirmLayerBtnArea,this).attach(this._oElement["dividedQuestionConfirmLayerBtnArea"],
"click")},
_showDividedQuestionSetting:function(){if(this._wElement["settingDivideQuestion"])this._wElement["settingDivideQuestion"].show()},
_hideDividedQuestionSetting:function(){if(this._wElement["settingDivideQuestion"]){this._initDivideQuestionSetting();
this._wElement["settingDivideQuestion"].hide()}},
_onClickDividedQuestionConfirmLayerBtnArea:function(we){var wEl=$Element(we.element);if(wEl.hasClass("_yes")){this._wElement["dividedQuestionConfirmLayer"].hide();
setTimeout($Fn(this._submitForm,this).bind(),100)}else{this._initDivideQuestionSetting();this._wElement["dividedQuestionConfirmLayer"].hide()}we.stop()},
_initDivideQuestionSetting:function(){var welBtn=$Element($$.getSingle("label._disUse",this._oElement["settingDivideQuestionBtnArea"]));
this._setDivideQuestionSetting(this._oElement["settingDivideQuestionBtnArea"],welBtn)},
_onClickBadRecommendReview:function(we){if(this._wElement["badRecommendDirectoryReview"].hasClass("is_active")){this._wElement["badRecommendDirectoryReview"].removeClass("is_active");
this._sRecommendReviewStat=this._RECOMMEND_REVIEW_STAT.NONE}else{this._wElement["badRecommendDirectoryReview"].addClass("is_active");
this._wElement["goodRecommendDirectoryReview"].removeClass("is_active");this._wElement["keywordSearchArea"].show();
this._sRecommendReviewStat=this._RECOMMEND_REVIEW_STAT.BAD}we.stop()},
_onClickGoodRecommendReview:function(we){if(this._wElement["goodRecommendDirectoryReview"].hasClass("is_active")){this._wElement["goodRecommendDirectoryReview"].removeClass("is_active");
this._sRecommendReviewStat=this._RECOMMEND_REVIEW_STAT.NONE}else{this._wElement["goodRecommendDirectoryReview"].addClass("is_active");
this._wElement["badRecommendDirectoryReview"].removeClass("is_active");this._sRecommendReviewStat=this._RECOMMEND_REVIEW_STAT.GOOD}we.stop()},
_onClickQuickDirectorySearchResultList:function(we){var el=we.element;if(!/input/i.test(el.tagName))return;
var nDirId=el.value;if(nDirId===this._getFormDirId())return;this.bIsDirClickedByUser=true;this._setFormDirId(nDirId);
this._showVolunteerLayer(nDirId);if(this.oAttachInfoManager)this.oAttachInfoManager.checkForbiddenPhotoDirectory(nDirId,
true);if(this._wElement["quickDirectorySearchBox"])this._wElement["quickDirectorySearchBox"].addClass("is_focused")},
_onFocusQuickDirectorySearchInput:function(we){if(this._wElement["quickDirectorySearchBox"]&&!this._wElement["quickDirectorySearchBox"].hasClass("is_focused"))this._wElement["quickDirectorySearchBox"].addClass("is_focused");
if(this._oInputCheckTimer)clearInterval(this._oInputCheckTimer);this._oInputCheckTimer=setInterval($Fn(this._watchQuickDirectorySearchInputChange,
this).bind(),this._QUICK_DIRECTORY_SEARCH_INPUT_WATCH_PERIOD)},
_onBlurQuickDirectorySearchInput:function(we){if(this._wElement["quickDirectorySearchBox"]&&this._wElement["quickDirectorySearchBox"].hasClass("is_focused"))this._wElement["quickDirectorySearchBox"].removeClass("is_focused");
if(this._oInputCheckTimer){clearInterval(this._oInputCheckTimer);this._oInputCheckTimer=null}},
_watchQuickDirectorySearchInputChange:function(){var sInputValue=this._oElement["quickDirectorySearchInput"].value||
null;if(sInputValue===this._sLastInputValue)return;this._sLastInputValue=sInputValue;if(!sInputValue||
!$S(sInputValue).trim().toString()){if(this._wElement["quickDirectorySearchBox"]&&this._wElement["quickDirectorySearchBox"].hasClass("is_typing"))this._wElement["quickDirectorySearchBox"].removeClass("is_typing");
this._hideQuickDirectorySearchResultList()}else{if(this._wElement["quickDirectorySearchBox"]&&!this._wElement["quickDirectorySearchBox"].hasClass("is_typing"))this._wElement["quickDirectorySearchBox"].addClass("is_typing");
this._refreshQuickDirectorySearchResultList(sInputValue)}},
_refreshQuickDirectorySearchResultList:function(sKeyword){var oParam={keyword:sKeyword,localSearchType:"IGNORE",
expertType:this._getExpertType(),ts:(new Date).getTime()};var oOption={method:"get",timeout:3,onload:$Fn(this._onRefreshQuickDirectorySearchResultList,
this).bind(),ontimeout:$Fn(this._hideQuickDirectorySearchResultList,this).bind(),onerror:$Fn(this._hideQuickDirectorySearchResultList,
this).bind()};var oAjax=new $Ajax(this._QUICK_DIRECTORY_SEARCH_URL,oOption);oAjax.request(oParam)},
_onRefreshQuickDirectorySearchResultList:function(oResponse){var oJson=oResponse.json();if(this._oElement["quickDirectorySearchResultList"]&&
this._oTemplate["quickDirectorySearchResultList"]&&oJson&&oJson.isSuccess&&oJson.result&&oJson.result.length>
0){var nCurrentDirId=this._getFormDirId()||0;var sExpertType="";for(var i=0;i<oJson.result.length;i++){var oRecommendedDirectoryInfo=
oJson.result[i];sExpertType=oRecommendedDirectoryInfo["expertType"];if(oRecommendedDirectoryInfo["isExpert"]&&
sExpertType&&this.oExpertOccupationMap[sExpertType])oRecommendedDirectoryInfo["expertTypeName"]=this.oExpertOccupationMap[sExpertType]["occupation"]}$Element(this._oElement["quickDirectorySearchResultList"]).html(this._oTemplate["quickDirectorySearchResultList"].process({quickDirectorySearchResultList:oJson.result,
selectedDirId:nCurrentDirId}));this._showQuickDirectorySearchResultList()}else{if(this._wElement["quickDirectorySearchBox"])this._wElement["quickDirectorySearchBox"].removeClass("is_typing");
this._hideQuickDirectorySearchResultList()}},
_showQuickDirectorySearchResultList:function(){if(this._oElement["quickDirectorySearchResultList"])$Element(this._oElement["quickDirectorySearchResultList"]).show()},
_hideQuickDirectorySearchResultList:function(){if(this._oElement["quickDirectorySearchResultList"])$Element(this._oElement["quickDirectorySearchResultList"]).hide()},
_initializeForSearch:function(){this._setElementForSearch();this._setEventForSearch();this._refreshRecommendDirectoryWithoutAlert(this._getRecommendTargetString());
if(nhn.Kin.isEnableResponsiveWeb())this._toggleAdditionalSettingButton()},
_setElementForSearch:function(){this._oElement["additionalSettingMenu"]=$$.getSingle("div._additionalSettingMenu",
this._oElement["ct"]);this._oElement["additionalSettingButtonArea"]=$$.getSingle("div._buttonArea",this._oElement["additionalSettingMenu"]);
this._oElement["additionalSettingButton"]=$$.getSingle("button._settingButton",this._oElement["additionalSettingButtonArea"]);
this._wElement["additionalSettingInfoTxt"]=$Element($$.getSingle("i._infoTxt",this._oElement["additionalSettingButton"]));
this._wElement["additionalSettingArea"]=$Element($$.getSingle("div._additionalSettingArea",this._oElement["ct"]))},
_setEventForSearch:function(){this._oEvent["additionalSettingButton"]=$Fn(this._onClickAdditionalSettingButton,
this).attach(this._oElement["additionalSettingButton"],"click")},
_initAttachInfo:function(){var nAttachedLength=this.aAttachedInfo?this.aAttachedInfo.length:0;if(nAttachedLength>
0)for(var i=0;i<nAttachedLength;i++){var attachedInfo=this.aAttachedInfo[i];if(attachedInfo.type==="P"){var photoInfo=
{fileInfo:attachedInfo.realPath,size:attachedInfo.size,width:attachedInfo.width||0,height:attachedInfo.height||
0,name:attachedInfo.name,status:"add"};this.oAttachInfoManager.addPhoto(photoInfo)}}},
_initAttachInfoForModify:function(){var nAttachedLength=this.aAttachedInfo?this.aAttachedInfo.length:
0;if(nAttachedLength>0)for(var i=0;i<nAttachedLength;i++){var attachedInfo=this.aAttachedInfo[i];if(attachedInfo.type===
"P"){var photoInfo={fileInfo:attachedInfo.realPath,size:attachedInfo.size,width:attachedInfo.width||0,
height:attachedInfo.height||0,name:attachedInfo.name,status:"keep"};this.oAttachInfoManager.addPhoto(photoInfo)}else if(attachedInfo.type===
"M"){var videoInfo={thumbUrl:attachedInfo.thumbUrl||"",videoThumbnailPath:attachedInfo.videoThumbnailPath||
"",size:attachedInfo.size||"",width:attachedInfo.width||0,height:attachedInfo.height||0,name:attachedInfo.name||
"",directory:attachedInfo.directory||"",videoPlayTime:attachedInfo.videoPlayTime||attachedInfo.playTime||
"",videoId:attachedInfo.videoId,status:"keep"};this.oAttachInfoManager.addVideo(videoInfo)}else if(attachedInfo.type===
"L"){var locationInfo={locationSource:"MY",latitude:attachedInfo.latitude,longitude:attachedInfo.longitude,
address:attachedInfo.address,code:attachedInfo.ncode,status:"keep"};this.oAttachInfoManager.setLocationData(locationInfo)}else if(attachedInfo.type===
"A")this.oAttachInfoManager.setAudioInfo();else if(attachedInfo.type==="F"){var oFileInfo={status:"keep",
name:attachedInfo.name,size:attachedInfo.size,info:attachedInfo.info,noti:attachedInfo.noti,date:attachedInfo.date||
null,needToTransferFile:true};this.oAttachInfoManager.addFileToForm(oFileInfo)}}},
_checkEnableQuestionToExpert:function(oParam){if(this._isProcessingForParentalConsent)return;if(this._isJunior){this._isProcessingForParentalConsent=
true;this._checkParentalConsent(oParam)}else{this._setExpertQuestion(oParam);if(typeof oParam.callbackFunction!=
"undefined"&&oParam.callbackFunction!==null&&typeof oParam.callbackFunction==="function"){var fnCallback=
typeof oParam.callbackParam!="undefined"&&oParam.callbackParam!==null?$Fn(oParam.callbackFunction,this).bind(oParam.callbackParam):
$Fn(oParam.callbackFunction,this).bind();fnCallback()}}},
_checkParentalConsent:function(oParam){var oOption={method:"post",timeout:5,onload:$Fn(this._onCheckParentalConsent,
this).bind(oParam),ontimeout:$Fn(function(){alert(nhn.Kin.oMessage.TIMEOUT)},this).bind(),
onerror:$Fn(function(){alert(nhn.Kin.oMessage.ERROR)},this).bind()};
var oAjax=new $Ajax("/mobile/ajax/endabledUserForExpertQuestion.nhn",oOption);oAjax.request()},
_onCheckParentalConsent:function(oParam,oResponse){var oJson=oResponse.json();if(oJson&&oJson.isSuccess){this._setExpertQuestion(oParam);
if(typeof oParam.callbackFunction!="undefined"&&oParam.callbackFunction!==null&&typeof oParam.callbackFunction===
"function"){var fnCallback=typeof oParam.callbackParam!="undefined"&&oParam.callbackParam!==null?$Fn(oParam.callbackFunction,
this).bind(oParam.callbackParam):$Fn(oParam.callbackFunction,this).bind();fnCallback()}}else{var sConfirmMsg=
typeof oParam.confirmMsg!="undefined"&&oParam.confirmMsg!==null?oParam.confirmMsg:this.oMessage.CHECK_PARENTAL_CONSENT;
if(confirm(sConfirmMsg)){this.detachBeforeUnloadEvent();var sQuestionUrl=mobileKinServiceProtocol+"://"+
location.host+"/mobile/qna/"+(this._isFromSearch?"questionForSearch.nhn":"question.nhn");location.href=
"https://nid.naver.com/mobile/user/help/parentsAgree.nhn?cpcd\x3d211\x26termcd\x3d24"+"\x26surl\x3d"+
encodeURIComponent(sQuestionUrl)+"\x26rurl\x3d"+encodeURIComponent(sQuestionUrl+(typeof oParam.expertType!=
"undefined"&&oParam.expertType!==null?"?expertType\x3d"+oParam.expertType:""))}else if(oParam.isCallCallbackFunctionWhenExpertQuestionOrNot&&
typeof oParam.callbackFunction!="undefined"&&oParam.callbackFunction!==null&&typeof oParam.callbackFunction===
"function"){var fnCallback=typeof oParam.callbackParam!="undefined"&&oParam.callbackParam!==null?$Fn(oParam.callbackFunction,
this).bind(oParam.callbackParam):$Fn(oParam.callbackFunction,this).bind();fnCallback()}}this._isProcessingForParentalConsent=
false},
detachBeforeUnloadEvent:function(){if(this._oEvent["unload"]){this._oEvent["unload"].detach(window,"beforeunload");
this._oEvent["unload"]=null}},
destroy:function(){if(this._oEvent){if(this._oEvent["titleFocus"])this._oEvent["titleFocus"].detach(this._oElement["titleInput"],
"focus");if(this._oEvent["titleBlur"])this._oEvent["titleBlur"].detach(this._oElement["titleInput"],"blur");
if(this._oEvent["contentsFocus"])this._oEvent["contentsFocus"].detach(this._oElement["contentsTextarea"],
"focus");if(this._oEvent["contentsBlur"])this._oEvent["contentsBlur"].detach(this._oElement["contentsTextarea"],
"blur");if(this._oEvent["settingOpenId"])this._oEvent["settingOpenId"].detach(this._oElement["settingOpenId"],
"click");if(this._oEvent["settingAllowJunior"])this._oEvent["settingAllowJunior"].detach(this._oElement["settingAllowJunior"],
"click");if(this._oEvent["recommendList"])this._oEvent["recommendList"].detach(this._oElement["recommendList"],
"click");if(this._oEvent["cancelBtn"])this._oEvent["cancelBtn"].detach(this._oElement["cancelBtn"],"click");
if(this._oEvent["tRegisterBtn"])this._oEvent["tRegisterBtn"].detach(this._oElement["tRegisterBtn"],"click");
if(this._oEvent["bRegisterBtn"])this._oEvent["bRegisterBtn"].detach(this._oElement["bRegisterBtn"],"click");
if(this._oEvent["cancelBtnHeader"])this._oEvent["cancelBtnHeader"].detach(this._oElement["cancelBtnHeader"],
"click");if(this._oEvent["refreshRecommendDirs"])this._oEvent["refreshRecommendDirs"].detach(this._oElement["refreshRecommendDirs"],
"change");if(this._oEvent["changeSettingBtn"])this._oEvent["changeSettingBtn"].detach(this._oElement["changeSettingBtn"],
"click");if(this._oEvent["settingBetPoint"])this._oEvent["settingBetPoint"].detach(this._oElement["settingBetPoint"],
"change");if(this._oEvent["betPointBtn"])this._oEvent["betPointBtn"].detach(this._oElement["betPointBtn"],
"click");if(this._oEvent["firstQuestionBetPoint"])this._oEvent["firstQuestionBetPoint"].detach(this._oElement["firstQuestionBetPoint"],
"click");if(this._bIsSupportOninputEvent){if(this._oEvent["inputQuestionArea"])this._oEvent["inputQuestionArea"].detach(this._oElement["questionArea"],
"input");if(this._oEvent["keyupQuestionArea"])this._oEvent["keyupQuestionArea"].detach(this._oElement["questionArea"],
"keyup")}else{if(this._oEvent["keyupQuestionArea"])this._oEvent["keyupQuestionArea"].detach(this._oElement["questionArea"],
"keyup");if(this._oEvent["pasteQuestionArea"])this._oEvent["pasteQuestionArea"].detach(this._oElement["questionArea"],
"paste")}if(this._oEvent["photoBtn"])this._oEvent["photoBtn"].detach(this._oElement["photoBtn"],"click");
if(this._oEvent["pageShow"])this._oEvent["pageShow"].detach(window,"pageshow");this.detachBeforeUnloadEvent();
if(this._isFromSearch)this._oEvent["additionalSettingButton"].detach(this._oElement["additionalSettingButton"],
"click");if(this._oEvent["suicideCounselingToDoctor"])this._oEvent["suicideCounselingToDoctor"].detach(this._oElement["suicideCounselingToDoctor"],
"click");if(this._oEvent["clickPWLayer"])this._oEvent["clickPWLayer"].detach(this._wElement["PWLayerArea"].$value(),
"click");if(this._oEvent["onClickWaitForSelectionLayer"]&&this._wElement["waitForSelectionLayer"])this._oEvent["onClickWaitForSelectionLayer"].detach(this._wElement["waitForSelectionLayer"].$value(),
"click")}document.removeEventListener("locationSelected",$Fn(this._onLocationSelected,this).bind(),false);
if(this.oTextArea)this.oTextArea.destroy();this._wElement=this._oElement=this._oTemplate=this._oEvent=
null;this.oKinCaptcha=this.oTempSave=this.oNaverApp=this.oImageClassification=null;this.oKinMapHandler=
this._oRecommendDirList=this._nInitializedDirId=this.bUseAnimation=null},
_setFormDirId:function(nDirId){if(this._bIsModify&&this._bIsDirModifiable)$("moveDirId").value=nDirId;
else $("dirId").value=nDirId},
_getFormDirId:function(){if(this._bIsModify&&this._bIsDirModifiable)return $("moveDirId").value;else return $("dirId").value},
_onDirectorySelect:function(nDirId,elSelectedElement){this.bIsDirClickedByUser=true;this._setFormDirId(nDirId);
this._showVolunteerLayer(nDirId);if(!this.bExpertCheck&&nDirId<100)this.bExpertCheck=true;var elOption=
$$.getSingle("option[value\x3d"+nDirId+"]",elSelectedElement);if(elOption&&$Element(elOption).hasClass("_ADULT")){this._openOnlyAdultWhenAdultDirectory();
this._juniorAnswerNotAllow()}else this._openWhenNormalDirectory();if(this.oAttachInfoManager)this.oAttachInfoManager.checkForbiddenPhotoDirectory(nDirId,
true)},
_blurFromSelectedElement:function(elSelectedElement){if(typeof elSelectedElement!="undefined"&&elSelectedElement!==
null)elSelectedElement.blur()},
_openOnlyAdultWhenAdultDirectory:function(){if(!this._bIsModify){$Element($("setting_allow_adult")).html(this._oTemplate["whenIsAdultDirectory"].process());
$("adultFlag").value="Y"}},
_openWhenNormalDirectory:function(){if(!this._bIsModify)$Element($("setting_allow_adult")).html(this._oTemplate["whenIsAllowNormalDirectory"].process({adultFlag:$("adultFlag").value}))},
_checkExpertDir:function(nDirId,sExpertType){var _expertDir=this._isExpertDir(nDirId);if(this.bExpertCheck&&
_expertDir&&!this.oExpertQuestionRegister){sExpertType=sExpertType||this.oExpertDirMap[_expertDir];var bAllowAdditionalInfoForExpert=
true;if(!this._isIgnoreMsgForExpert)bAllowAdditionalInfoForExpert=confirm(this._getCheckExpertMessage(sExpertType));
if(bAllowAdditionalInfoForExpert)return true;else{this.bExpertCheck=false;return false}}return false},
_setExpertQuestion:function(oParam){this.oExpertQuestionRegister=new ExpertQuestionRegister({expertType:oParam.expertType,
expertTypeKorean:this.oExpertOccupationMap[oParam.expertType]["occupation"],isEnableNaverAppPhotoUpload:this._isEnableNaverAppPhotoUpload,
isFromSearch:this._isFromSearch,oQuestionRegister:this});if(oParam.isNeedRefreshRecommendDir){this._oRecommendDirList["image"]=
null;this._oRecommendDirList["location"]=null;this._refreshRecommendDirectoryWithoutAlert(this._getRecommendTargetString())}},
_getCheckExpertMessage:function(sExpertType){var oOccupationMap=this.oExpertOccupationMap[sExpertType];
var sOccupation=(oOccupationMap?oOccupationMap["occupation"]:null)||"\uc804\ubb38\uac00";var sAreaName=
(oOccupationMap?oOccupationMap["area"]:null)||"\uc804\ubb38\uac00";var sCheckExpertMessage=this.oMessage.CHECK_EXPERT;
sCheckExpertMessage=sCheckExpertMessage.split("#occupation#").join(sOccupation);sCheckExpertMessage=sCheckExpertMessage.split("#areaName#").join(sAreaName);
return sCheckExpertMessage},
_isExpertDir:function(nDirId){if(nDirId<100)return false;var _nSubDir=nDirId.toString().substring(0,3);
if(this.oExpertDirMap[_nSubDir])return _nSubDir;else if(this.oExpertDirMap[nDirId])return nDirId;return false},
_titleFocus:function(we){var wel=$Element(we.element);this._bTitleFocus=true;scrollTo(0,wel.offset().top-
wel.height()-10);if(!this._bIsModify&&this._oElement["autoTitleFlag"])this._oElement["autoTitleFlag"].value=
"N"},
_titleBlur:function(we){var wel=$Element(we.element);if(this._oElement["suicidalPreventionBanner"]){var wElBanner=
$Element(this._oElement["suicidalPreventionBanner"]);if(nhn.Kin.containSuicideKeywords(wel.$value().value)){wElBanner.show();
if(wElBanner.visible())if(this.sBrowser&&this.sBrowser.indexOf("SAFARI"))nhn.Kin.scrollToPosition(0,0)}else wElBanner.hide()}},
_contentsFocus:function(we){var wel=$Element(we.element);if(!wel){we.stop();return}if(this._wElement["descriptionArea"]&&
this._wElement["descriptionArea"].visible())this._wElement["descriptionArea"].hide();if(!wel.hasClass("on"))wel.addClass("on");
nhn.Kin.scrollToPosition(0,$Element(this._oElement["titleInput"]).offset().top)},
_contentsBlur:function(we){var wel=$Element(we.element);if(!wel){we.stop();return}if(wel.$value().value.length>=
5){this._refreshRecommendDirectory(true);this._wElement["recommendSlogan"].hide()}if(!wel.attr("value")){if(this._wElement["descriptionArea"]&&
!this._wElement["descriptionArea"].visible())this._wElement["descriptionArea"].show();wel.removeClass("on")}else if(this._isFromSearch)if(this._oElement["suicidalPreventionBanner"]){var wElBanner=
$Element(this._oElement["suicidalPreventionBanner"]);if(nhn.Kin.containSuicideKeywords(wel.$value().value)){wElBanner.show();
if(wElBanner.visible())wElBanner.attr("tabIndex",-1).$value().focus()}else wElBanner.hide()}},
_onClickPhotoBtn:function(we){if(this.oAttachInfoManager)this.oAttachInfoManager.checkForbiddenPhotoDirectory($("dirId").value);
if(this._isEnableNaverAppPhotoUpload){if(this.oAttachInfoManager._checkPhotoAttachable())this.oNaverApp.uploadPhotoByUrlScheme()}else alert(this.oMessage.IMPOSSIBLE_TO_UPLOAD_PHOTO);
we.stop()},
_onClickLocationBtn:function(we){this.oAttachInfoManager._fireInitializeMapEvent();if(we)we.stop()},
_onClickRefreshRecommendDirectory:function(we){this._refreshRecommendDirectory();we.stop();return false},
_refreshRecommendDirectory:function(bOnlyDirectory){this.bHasRecommendDirList=true;bOnlyDirectory=bOnlyDirectory||
false;var msg=this.validateTitle();if(msg){alert(msg);scrollTo(0,$Element(this._oElement["titleInput"]).offset().top-
5);return}this._refreshRecommendDirectoryWithoutAlert(this._getRecommendTargetString());if(this.oAttachInfoManager&&
!bOnlyDirectory){this.oAttachInfoManager.fireRefreshImageRecommendDirEvent();this.oAttachInfoManager.fireRefreshLocationRecommendDirEvent()}},
_refreshRecommendDirectoryWithoutAlert:function(sKeyword){if(this.bOnLoadingRecommendDirectory||!this._bIsDirModifiable)return;
var sUrl="/mobile/ajax/directoryRecommend.nhn";var sExpertType=this.oExpertQuestionRegister?this.oExpertQuestionRegister.sExpertType:
"";var oParam={keyword:sKeyword||"",expertType:sExpertType,dirid:this.nDirId||0,fixedDirId:this._nFixedDirId,
defaultDirId:this._nDefaultDirId,localSearchType:"IGNORE",isReturnDefaultDirectory:this._isFromSearch&&
!sExpertType?"true":"false",ts:(new Date).getTime()};var oOption={method:"post",timeout:3,onload:$Fn(this._showRecommendedList,
this).bind(),ontimeout:$Fn(function(res){this._dirRecommendFailProcess()},this).bind(),
onerror:$Fn(function(res){this._dirRecommendFailProcess()},this).bind()};
this.bOnLoadingRecommendDirectory=true;var oAjax=new $Ajax(sUrl,oOption);oAjax.request(oParam)},
_getRecommendTargetString:function(){var sTitle=this._oElement["titleInput"].value;var sContentsTextarea=
this._getContents();if(sContentsTextarea)sContentsTextarea=sContentsTextarea.replace(/\n|&nbsp;/g," ");
var sTargetString="";var sTitleLength=sTitle.length;if(this._oElement["autoTitleFlag"]&&this._oElement["autoTitleFlag"].value===
"Y"||sTitleLength===0||sTitle===sContentsTextarea.substring(0,sTitleLength))sTargetString=sContentsTextarea;
else sTargetString=sTitle+" "+sContentsTextarea;if(sTargetString.length>this._MAX_KEYWORD_LENGTH)sTargetString=
sTargetString.substring(0,this._MAX_KEYWORD_LENGTH);return sTargetString},
_showRecommendedList:function(oResponse){this.bOnLoadingRecommendDirectory=false;var resultJson=oResponse.json();
if(resultJson.isSuccess&&resultJson.totalCount>0)this.refreshRecommendDirectoryArea(null,resultJson.result||
[]);else this.refreshRecommendDirectoryArea(null,[])},
_onLocationSelected:function(oCustomEvent){var oRecommendDirectoryInfo=oCustomEvent.recommendDirectory;
this._onRefreshLocationRecommendDir(oRecommendDirectoryInfo)},
_onRefreshLocationRecommendDir:function(oRecommendDirectoryInfo){if(this._isExpertDir(this.nDirId)||this.oExpertQuestionRegister||
!oRecommendDirectoryInfo)this.refreshRecommendDirectoryArea(null,null,[]);else{var aRecommendDirListByLocation=
[];aRecommendDirListByLocation.push(oRecommendDirectoryInfo);this.refreshRecommendDirectoryArea(null,
null,aRecommendDirListByLocation)}},
_setRecommendedDirectoryList:function(aRecommendDirListByContents){if(!aRecommendDirListByContents)return;
if(this._bIsModify&&(this._bIsExpertQuestion||this._bIsWorryQuestion))this._bIsDirModifiable=false;this._bHaveDefaultRecommededDirectory=
false;this._bHaveRecommendedDirectory=false;var nDeleteIndex=-1;for(var i=0,len=aRecommendDirListByContents.length;i<
len;i++){var dirInfo=aRecommendDirListByContents[i];if(dirInfo.isFixedDirId){this._oRecommendDirList["fixed"]=
dirInfo;nDeleteIndex=i}else if(dirInfo.isDefaultDirId)this._bHaveDefaultRecommededDirectory=true;else{dirInfo.isRecommendDirectory=
true;this._bHaveRecommendedDirectory=true}}if(nDeleteIndex>-1)aRecommendDirListByContents.slice(nDeleteIndex,
1);this._oRecommendDirList["contents"]=aRecommendDirListByContents},
refreshRecommendDirectoryArea:function(aRecommendDirListByImage,aRecommendDirListByContents,aRecommendDirListByLocation){if(aRecommendDirListByImage)this._oRecommendDirList["image"]=
aRecommendDirListByImage;if(aRecommendDirListByContents)this._setRecommendedDirectoryList(aRecommendDirListByContents);
if(aRecommendDirListByLocation)this._oRecommendDirList["location"]=aRecommendDirListByLocation;if(!this.oAttachInfoManager.hasPhotoInfo())this._oRecommendDirList["image"]=
null;if(!this.oAttachInfoManager.bHasGeoInfo)this._oRecommendDirList["location"]=null;var aTotalRecommendDirList=
this._getTotalRecommendDirList();$Element(this._oElement["recommendList"]).html(this._oTemplate["recommendDirListTpl"].process({nClicksAreaName:this._sNclicksAreaName,
recommendDirList:aTotalRecommendDirList||null}));if(this._wElement["quickDirectorySearchBox"])this._wElement["quickDirectorySearchBox"].removeClass("is_focused");
this._changeDirectoryAreaByRecommendedResult(aTotalRecommendDirList&&aTotalRecommendDirList.length||0)},
_changeDirectoryAreaByRecommendedResult:function(nRecommendedDirListLength){if(nRecommendedDirListLength===
0)this._wElement["directoryTitle"].html(this._RECOMMEND_DIRECTORY_MESSAGE.EMPTY);else if(this._bHaveDefaultRecommededDirectory)this._wElement["directoryTitle"].html(this._RECOMMEND_DIRECTORY_MESSAGE.KEYWORD);
else this._wElement["directoryTitle"].html(this._RECOMMEND_DIRECTORY_MESSAGE.RECOMMEND);if(this._bHaveRecommendedDirectory)this._wElement["recommendedDirectoryReview"].show();
else this._wElement["recommendedDirectoryReview"].hide();if(this._bIsModify)if(this._bIsExpertQuestion||
this._bIsWorryQuestion)this._wElement["keywordSearchArea"].hide();else this._wElement["keywordSearchArea"].show();
else if(nRecommendedDirListLength===0)this._wElement["keywordSearchArea"].show();else if(this._bHaveDefaultRecommededDirectory&&
nRecommendedDirListLength===1)this._wElement["keywordSearchArea"].show();else if(this._sRecommendReviewStat===
this._RECOMMEND_REVIEW_STAT.BAD)this._wElement["keywordSearchArea"].show();else this._wElement["keywordSearchArea"].hide()},
_hasSelectedRecommendDirectory:function(){var aElRecommendList=$$("label",this._oElement["recommendList"]);
if(aElRecommendList&&aElRecommendList.length>0)for(var i=0;i<aElRecommendList.length;i++){var welRecommendLabel=
$Element(aElRecommendList[i]);if(welRecommendLabel&&welRecommendLabel.hasClass("on"))return true}return false},
_getTotalRecommendDirList:function(){if(!this._oRecommendDirList)return null;var nDirIdForSelect=this._getFormDirId()||
0;if(!this.bIsDirClickedByUser&&nDirIdForSelect!==0)nDirIdForSelect=0;var bIsExistsSelectedDir=false;
var aTotalRecommendDirIdList=$A();var aTotalRecommendDirList=[];for(var i=0,nCriteriaCnt=this._RECOMMEND_DIR_CRITERIA_ARRAY.length;i<
nCriteriaCnt;i++){var oCriteria=this._RECOMMEND_DIR_CRITERIA_ARRAY[i];if(!oCriteria)continue;var aRecommendDirList=
this._oRecommendDirList[oCriteria.key];if(!aRecommendDirList||aRecommendDirList.length<1)continue;var nRecommendCnt=
0;var nMaxRecommendCnt=oCriteria.maxRecommendCnt||this._MAX_TOTAL_RECOMMEND_DIRECTORY_COUNT;for(var j=
0,nRecommendDirCnt=aRecommendDirList.length;j<nRecommendDirCnt;j++){if(nRecommendCnt>=nMaxRecommendCnt)break;
if(aTotalRecommendDirList.length>=this._MAX_TOTAL_RECOMMEND_DIRECTORY_COUNT)break;var oDirInfo=aRecommendDirList[j];
if(!oDirInfo)continue;var nCurrentDirId=oDirInfo.dirId||0;if(aTotalRecommendDirIdList.has(nCurrentDirId))continue;
oDirInfo=this._getProcessedDirInfo(oCriteria.recommendType,oDirInfo,nDirIdForSelect,aTotalRecommendDirList.length);
if(!oDirInfo)continue;if(oDirInfo["isSelected"]===true)bIsExistsSelectedDir=true;aTotalRecommendDirIdList.push(oDirInfo.dirId);
aTotalRecommendDirList.push(oDirInfo);nRecommendCnt++}}if(aTotalRecommendDirList.length<1)return null;
if(!bIsExistsSelectedDir){aTotalRecommendDirList[0]["isSelected"]=true;this._setFormDirId(aTotalRecommendDirList[0]["dirId"]);
this._showVolunteerLayer(aTotalRecommendDirList[0]["dirId"])}return aTotalRecommendDirList},
_getProcessedDirInfo:function(sRecommendType,oDirInfo,nDirIdForSelect,index){if(!oDirInfo)return null;
var nCurrentDirId=oDirInfo.dirId||0;if(this._isDirNotRecommend(nDirIdForSelect,nCurrentDirId))return null;
oDirInfo["index"]=index;oDirInfo["depth"]=this._getDepth(nCurrentDirId);oDirInfo["recommendType"]=sRecommendType;
oDirInfo["isSelected"]=nCurrentDirId==nDirIdForSelect;if(oDirInfo["isExpert"]&&this.oExpertOccupationMap[oDirInfo["expertType"]])oDirInfo["expertTypeName"]=
this.oExpertOccupationMap[oDirInfo["expertType"]]["occupation"];if(nhn.Kin.isNumber(oDirInfo["userInterestDirsCnt"]))if(oDirInfo["userInterestDirsCnt"]>=
1E5)oDirInfo["userInterestDirsCnt"]="10\ub9cc\uba85 \uc774\uc0c1";else oDirInfo["userInterestDirsCnt"]=
nhn.Kin.getFormattedNumber(oDirInfo["userInterestDirsCnt"])+"\uba85";return oDirInfo},
_isDirNotRecommend:function(nBeforeDirId,nRecommendedDirId){if(!this._bIsModify)return false;var nBeforeD1Id=
nhn.Kin.getD1Id(nBeforeDirId);var nRecommendD1Id=nhn.Kin.getD1Id(nRecommendedDirId);if(nBeforeD1Id==13)return nRecommendD1Id!=
13;return false},
_dirRecommendFailProcess:function(){this.bOnLoadingRecommendDirectory=false;if(!this._wElement["directoryArea"])return;
$Element(this._oElement["recommendList"]).html("");this._wElement["keywordSearchArea"].show();this._wElement["directoryTitle"].html(this._RECOMMEND_DIRECTORY_MESSAGE.ERROR)},
_getDepth:function(dirId){var depth=0;if(dirId>1E8)depth=5;else if(dirId>1E6)depth=4;else if(dirId>1E4)depth=
3;else if(dirId>100)depth=2;else if(dirId>0)depth=1;return depth},
_onClickRecommendList:function(we){var oEl=we.element;if(!/input/i.test(oEl.tagName))return;this.bIsDirClickedByUser=
true;if(this._getFormDirId()===oEl.value)return;this._setFormDirId(oEl.value);this._showVolunteerLayer(oEl.value);
if(this._wElement["quickDirectorySearchBox"])this._wElement["quickDirectorySearchBox"].removeClass("is_focused");
if(this.oAttachInfoManager)this.oAttachInfoManager.checkForbiddenPhotoDirectory(oEl.value,true)},
_isVolunteerDirectory:function(sDirId){var nDirId=parseInt(sDirId,10);var nLength=this._oVolunteerDirIdList?
this._oVolunteerDirIdList.length:0;for(i=0;i<nLength;i++)if(this._oVolunteerDirIdList[i]==nDirId)return true;
return false},
_onClickVolunteerLayerCloseBtn:function(we){this._bIsClosedVolunteerHelp=true;$Element(this._oElement["volunteerLayer"]).hide();
var wel=$Element(we.element);if(wel.hasClass("_30days")===false)return;if(nhn.Kin.LocalStorage.isSupportLocalStorage()){var oJson=
{};oJson.closedTime=(new $Date).time();nhn.Kin.LocalStorage.setItem(nhn.Kin.LocalStorage.KEY.MOBILEWEB_QUESTION_VOLUNTEER_LAYER_CLOSED_TIME,
JSON.stringify(oJson))}},
_showVolunteerLayer:function(sDirId){if(this._bIsClosedVolunteerHelp)return;if(this._oElement["volunteerLayer"]&&
this._isVolunteerDirectory(sDirId))if(nhn.Kin.LocalStorage.isSupportLocalStorage()){var sClosedTime=nhn.Kin.LocalStorage.getItem(nhn.Kin.LocalStorage.KEY.MOBILEWEB_QUESTION_VOLUNTEER_LAYER_CLOSED_TIME);
if(sClosedTime){var oJson=JSON.parse(sClosedTime);var sLastClosedTime=oJson.closedTime;if(sLastClosedTime){var oCurrentTime=
new $Date;var oLastClosedTime=new $Date(sLastClosedTime);var nDiff=oCurrentTime.time()-oLastClosedTime.time();
var nClosedTerm=2592E6;if(nDiff<nClosedTerm)return}}$Element(this._oElement["volunteerLayer"]).show();
this._adjustPositionOfLayerInnerBox($Element(this._oElement["volunteerLayerInnerArea"]))}},
_adjustPositionOfLayerInnerBox:function(welLayer){if(welLayer){var nLayerTop=window.pageYOffset+($Document(document).clientSize().height-
welLayer.height())/2;welLayer.css({"top":nLayerTop})}},
_onClickChangeSettingBtn:function(we){var wel=$Element(we.element);if(wel.hasClass("on")){wel.removeClass("on");
this._hideOptions()}else{wel.addClass("on");this._showOptions()}},
_hideOptions:function(){if(!this._oElement["enableHideOptions"])return;for(var i=0;i<this._oElement["enableHideOptions"].length;i++)$Element(this._oElement["enableHideOptions"][i]).hide()},
_showOptions:function(){if(!this._oElement["enableHideOptions"])return;for(var i=0;i<this._oElement["enableHideOptions"].length;i++)$Element(this._oElement["enableHideOptions"][i]).show()},
_onClickSettingOpenId:function(we){if(this._bIsModify&&!this._oQuestionType.openFlag){alert(this.oMessage.IMPOSSIBLE_TO_CHANGE_OPEN_QUESTION);
we.stop();return}var wel=$Element(we.element);if(/^input$/i.test(wel.$value().tagName))wel=wel.parent();
var aelLabel=cssquery("label",this._oElement["settingOpenId"]);if(aelLabel)for(var i=0,len=aelLabel.length;i<
len;i++)$Element(aelLabel[i]).removeClass("on");wel.addClass("on");if(wel.hasClass("_closeId"))$("openFlag").value=
"N";else if(wel.hasClass("_maskingId"))$("openFlag").value="Y";we.stop()},
_onClickSettingAllowRss:function(we){var wel=$Element(we.element);if(/^input$/i.test(wel.$value().tagName))wel=
wel.parent();var aelLabel=cssquery("label",this._oElement["settingAllowRss"]);if(aelLabel)for(var i=0,
len=aelLabel.length;i<len;i++)$Element(aelLabel[i]).removeClass("on");wel.addClass("on");if(wel.hasClass("_deny_rss"))$("rssFlag").value=
"N";else if(wel.hasClass("_allow_rss"))$("rssFlag").value="Y";we.stop()},
_onClickSettingAllowAdult:function(we){var wel=$Element(we.element);if(/^input$/i.test(wel.$value().tagName))wel=
wel.parent();var aelLabel=cssquery("label",this._oElement["settingAllowAdult"]);if(aelLabel)for(var i=
0,len=aelLabel.length;i<len;i++)$Element(aelLabel[i]).removeClass("on");wel.addClass("on");if(wel.hasClass("_deny_adult")){$("adultFlag").value=
"Y";this._juniorAnswerNotAllow()}else if(wel.hasClass("_allow_adult")){$("adultFlag").value="N";this._juniorAnswerAllow()}we.stop()},
_onClickSettingAllowJunior:function(we){if(this._bIsModify&&this._oQuestionType.one2one&&this._oQuestionType.one2oneTargetJunior){alert(this.oMessage.IS_UNDER_14_ANSWERER);
we.stop();return}var wel=$Element(we.element);if(/^input$/i.test(wel.$value().tagName))wel=wel.parent();
var aelLabel=cssquery("label",this._oElement["settingAllowJunior"]);if(aelLabel)for(var i=0,len=aelLabel.length;i<
len;i++)$Element(aelLabel[i]).removeClass("on");wel.addClass("on");if(wel.hasClass("_deny_junior"))$("juniorFlag").value=
"N";else if(wel.hasClass("_allow_junior"))$("juniorFlag").value="Y";we.stop()},
_juniorAnswerNotAllow:function(){$Element($("setting_allow_junior")).html(this._oTemplate["whenIsAllowOnlyAdult"].process());
$("juniorFlag").value="N"},
_juniorAnswerAllow:function(){$Element($("setting_allow_junior")).html(this._oTemplate["whenIsAllowAll"].process({juniorFlag:$("juniorFlag").value}))},
_initOptionsForModify:function(){if(this._oQuestionType.noAnswer){var sAdultFlag=$("adultFlag").value;
if(sAdultFlag!=="N")this._juniorAnswerNotAllow()}},
_onClickBetPointSetting:function(we){if(this.nCurrentPoint<17){alert("17\uc810 \uc774\uc0c1\uc758 \ub0b4\uacf5\uc744 \ubcf4\uc720\ud558\uace0 \uacc4\uc154\uc57c \ucd94\uac00\ub0b4\uacf5\uc124\uc815\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n(\ubcf4\uc720\ub0b4\uacf5\uc758 30%\uae4c\uc9c0 \uc124\uc815\uac00\ub2a5)");
we.stop();return}var wel=$Element(we.element);if(/^input$/i.test(wel.$value().tagName))wel=wel.parent();
var aelLabel=cssquery("label",we.currentElement);if(aelLabel)for(var i=0,len=aelLabel.length;i<len;i++)$Element(aelLabel[i]).removeClass("on");
wel.addClass("on");if(wel.hasClass("_no_bet"))this._setZeroBetPoint();else if(wel.hasClass("_bet")){if(this._sDivideYn===
"Y")this._initDivideQuestionSetting();$Element(this._oElement["betPointBtn"]).show();this._firstQuestionBetPoint(true)}we.stop()},
_setZeroBetPoint:function(){this._oElement["betPoint"].value="0";this._initBetPointBtn();$Element(this._oElement["betPointBtn"]).hide();
this._firstQuestionBetPoint(false)},
_initBetPointBtn:function(){var aelLabel=$$("span",this._oElement["betPointBtn"]);if(aelLabel)for(var i=
0,len=aelLabel.length;i<len;i++){var spanBet=aelLabel[i];$Element(spanBet).removeClass("on");var labelBet=
$$.getSingle("label",spanBet);if(labelBet)$Element(labelBet).removeClass("on")}},
_firstQuestionBetPoint:function(bIsShow){if(this._bIsModify)return;var wElList=$ElementList(".layer_q1st");
if(wElList.length()==1)wElList.get(0).hide();if(bIsShow){var wElLabel=$Element(this._oElement["firstQuestionBetPoint"]);
if(wElLabel!==null&&wElLabel.hasClass("on")){this._oElement["useFirstQuestionBetPoint"].value="Y";if(wElList.length()==
1)wElList.get(0).show()}else this._oElement["useFirstQuestionBetPoint"].value="N"}else this._oElement["useFirstQuestionBetPoint"].value=
"N"},
_onClickBetPointBtn:function(we){var wel=$Element(we.element);var elSelectedInput=wel.$value().tagName.toLowerCase()===
"input"?wel.$value():$$.getSingle("input",wel.$value());if(!elSelectedInput){we.stop();return}var nSelectedPoint=
elSelectedInput.value;if(wel.hasClass("_level_span"))wel=wel.child()[0];if(wel.hasClass("_dsb")){alert(this.oMessage.IMPOSSIBLE_TO_ADD_POINT+
"\n(\ud604\uc7ac\ubcf4\uc720\ub0b4\uacf5 : "+this.nCurrentPoint+")");we.stop();return}this._initBetPointBtn();
wel.addClass("on");wel.parent().addClass("on");this._oElement["betPoint"].value=nSelectedPoint;we.stop()},
_onClickDivideQuestionSetting:function(we){if(!this._bWritableDivideQuestion()){alert("\uc9c8\ubb38 \uc4f0\uae30 \uac00\ub2a5\ud55c \uac1c\uc218\uac00 \ucca8\ubd80\ub41c \uc774\ubbf8\uc9c0 \uac1c\uc218\ubcf4\ub2e4 \uc801\uc5b4 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4.");
we.stop();return}var wel=$Element(we.element);if(/^input$/i.test(wel.$value().tagName))wel=wel.parent();
if(wel.hasClass("_use")){var nBetPoint=this._oElement["betPoint"].value;if(nBetPoint>0)if(!confirm("\uc9c8\ubb38\ub098\ub204\uae30\uc2dc\uc5d0\ub294 \ub0b4\uacf5\uc744 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub0b4\uacf5\uc5c6\uc774 \uc9c4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){this._initDivideQuestionSetting();
we.stop();return}var aelLabel=$$("label",this._oElement["settingBetPoint"]);if(aelLabel)for(var i=0,len=
aelLabel.length;i<len;i++){var welBet=$Element(aelLabel[i]);welBet.removeClass("on");if(welBet.hasClass("_no_bet"))welBet.addClass("on")}this._setZeroBetPoint()}this._setDivideQuestionSetting(we.currentElement,
wel);we.stop()},
_bWritableDivideQuestion:function(){return this._nWritableQuestionCount>=this.oAttachInfoManager.getAttachedPhotoCount()},
_setDivideQuestionSetting:function(elBtnArea,welBtn){var aelLabel=$$("label",elBtnArea);if(aelLabel)for(var i=
0,len=aelLabel.length;i<len;i++)$Element(aelLabel[i]).removeClass("on");welBtn.addClass("on");if(welBtn.hasClass("_use"))this._sDivideYn=
"Y";else this._sDivideYn="N"},
_onClickFirstQuestionBetPointBtn:function(we){var wElLabel=$Element(we.currentElement);var aelCheckbox=
cssquery("input",we.currentElement);if(wElLabel.hasClass("on")){wElLabel.removeClass("on");aelCheckbox[0].checked=
false;this._oElement["useFirstQuestionBetPoint"].value="N"}else{wElLabel.addClass("on");aelCheckbox[0].checked=
true;this._oElement["useFirstQuestionBetPoint"].value="Y"}we.stop()},
_onClickCancelBtn:function(we){var wel=$Element(we.element);var isEmptyTitle=this.isEmptyTitle();var isEmptyContents=
this.isEmptyContents();if(isEmptyTitle&&isEmptyContents){this.detachBeforeUnloadEvent();setTimeout(function(){history.back()},
100)}else if(confirm(this.oMessage.CANCEL_REGISTER_QUESTION)){this.detachBeforeUnloadEvent();
setTimeout(function(){history.back()},100)}we.stop();
return false},
isEmptyTitle:function(){if(!this._oElement["titleInput"])return true;return this._oElement["titleInput"].value===
this.DEFAULT_TITLE||this._oElement["titleInput"].value.length===0},
isEmptyContents:function(){return this._oElement["contentsTextarea"].value.length===0},
_isValidDirId:function(nDirId){if(nDirId<1)return false;return nDirId<12||nDirId>20},
_isD1Id:function(nDirId){return nhn.Kin.getDirDepth(nDirId)==1},
_resizeHeight:function(){var nNewHeight=this._oElement["contentsTextarea"].clientHeight;if(nNewHeight<
this._nTextAreaBeforeHeight){nNewHeight=this._oElement["contentsTextarea"].scrollHeight;this._oElement["contentsTextarea"].style.height=
nNewHeight+"px"}this._nTextAreaBeforeHeight=nNewHeight},
_onClickRegisterBtn:function(we){if(nhn.Kin.checkRos()){we.stop();return false}var validateTitleMessage=
this.validateTitle();var validateContentMessage=this.validateContent();if(validateTitleMessage||validateContentMessage){alert(validateTitleMessage||
validateContentMessage);if(validateTitleMessage)this._oElement["titleInput"].focus();else if(validateContentMessage)this._oElement["contentsTextarea"].focus();
we.stop();return false}if(this.oExpertQuestionRegister&&!this.oExpertQuestionRegister.validate())return false;
var dirId=this._getFormDirId();if(this.oExpertQuestionRegister&&dirId<1E3){alert(this.oMessage.NEED_TO_SELECT_3DEPTH_DIRECTORY);
we.stop();return false}if(this._isValidDirId(dirId)===false){if(dirId<1)alert(this.oMessage.NEED_TO_SELECT_DIRECTORY);
else alert(this.oMessage.IS_IMPOSSIBLE_TO_REGIST_QUESTION_DIRECTORY);we.stop();return false}if(this._isD1Id(dirId)){alert(this.oMessage.IS_NOT_ALLOWED_DEPTH_1_DIRID);
we.stop();return false}if(this._sDivideYn==="Y")if(!this._bWritableDivideQuestion()){this._initDivideQuestionSetting();
alert("\uc9c8\ubb38 \uc4f0\uae30 \uac00\ub2a5\ud55c \uac1c\uc218\uac00 \ucca8\ubd80\ub41c \uc774\ubbf8\uc9c0 \uac1c\uc218\ubcf4\ub2e4 \uc801\uc5b4 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4.");
we.stop();return false}var sTag=this.oTagRegister._oElement["tagInput"].value;if(sTag!=="")this.oTagRegister._addTag(sTag);
if(showLoadingIndicator)showLoadingIndicator();var sContents=this._getContents();var sTagListStr=this.oTagRegister?
this.oTagRegister.getTagListStr():null;if(sTagListStr)sContents=sContents+" "+sTagListStr;var sContentsForPwFilter=
this._oElement["titleInput"].value+" "+sContents;this.pwFilter(sContentsForPwFilter,"contents");we.stop()},
_onClickAdditionalSettingButton:function(oEvent){this._toggleAdditionalSettingButton();oEvent.stop()},
_toggleAdditionalSettingButton:function(){if(this._wElement["additionalSettingArea"].visible())this._closeAdditionalSettingButton();
else this._openAdditionalSettingButton()},
_closeAdditionalSettingButton:function(){this._wElement["additionalSettingArea"].hide();this._wElement["additionalSettingInfoTxt"].text("\ud3bc\uce58\uae30");
$Element(this._oElement["additionalSettingButtonArea"]).removeClass("unfd");$Element(this._oElement["additionalSettingButton"]).removeClass("on")},
_openAdditionalSettingButton:function(){this._wElement["additionalSettingArea"].show();this._wElement["additionalSettingInfoTxt"].text("\uc811\uae30");
$Element(this._oElement["additionalSettingButtonArea"]).addClass("unfd");$Element(this._oElement["additionalSettingButton"]).addClass("on")},
pwFilter:function(contents,elementId){this._oPwFilter=new PwFilter({"contents":contents,"elementId":elementId,
"submitFunc":$Fn(this._processCaptcha,this).bind(),"containPwCallbackFunc":$Fn(this._onContainPwCallback,
this).bind(),"errorCallbackFunc":$Fn(this._resetSubmit,this).bind()});this._oPwFilter.process()},
_onContainPwCallback:function(aProhibitedWords){this._resetSubmit();if(!aProhibitedWords||aProhibitedWords.length<
1)return;setTimeout($Fn(function(){this._showPWLayer(aProhibitedWords)},this).bind(),300)},
_showPWLayer:function(aProhibitedWords){if(!aProhibitedWords||aProhibitedWords.length<1||!this._oTemplate["PWLayer"]||
!this._wElement["PWLayerArea"])return;var sProhibitedWords=aProhibitedWords.join(", ");this._wElement["PWLayerArea"].html(this._oTemplate["PWLayer"].process({"prohibitedWords":sProhibitedWords}));
if(!this._wElement["PWLayerArea"].visible())this._wElement["PWLayerArea"].show();this._adjustPositionOfPWLayer()},
_adjustPositionOfPWLayer:function(){var welProhibitedLayer=$Element("prohibited_words_layer");if(welProhibitedLayer){var nLayerTop=
($Document(document).clientSize().height-welProhibitedLayer.height())/2;welProhibitedLayer.css({"top":nLayerTop,
"position":"fixed"})}},
_onClickPWLayer:function(we){var el=we.element;if(!el||!/(?:a|button)/i.test(el.tagName.toLowerCase())||
!$Element(el).hasClass("_close")){we.stop();return}this._hidePWLayer();we.stop()},
_hidePWLayer:function(){if(!this._wElement["PWLayerArea"])return;this._wElement["PWLayerArea"].html("");
if(this._wElement["PWLayerArea"].visible())this._wElement["PWLayerArea"].hide()},
isArray:function(o){return Object.prototype.toString.call(o)=="[object Array]"},
_processCaptcha:function(){if(hideLoadingIndicator)hideLoadingIndicator();if(this.bOnSubmit||this._bIsModify)this._onPassCaptcha();
else if(!this._bCaptchaFlag){if(this.oKinCaptcha)this.oKinCaptcha.makeImageCaptcha()}else if(this.oKinCaptcha)this.oKinCaptcha.checkImageCaptcha()},
_onShowCaptcha:function(){if(hideLoadingIndicator)hideLoadingIndicator();if(this._isFromSearch)this._openAdditionalSettingButton();
this._bCaptchaFlag=true},
_onFailCaptcha:function(errorMsg){if(hideLoadingIndicator)hideLoadingIndicator();if(this._isFromSearch)this._openAdditionalSettingButton();
alert(errorMsg)},
_onPassCaptcha:function(){if(this._sDivideYn==="Y"){var nDirId=this._getFormDirId();if(nhn.Kin.getD1Id(nDirId)===
11)this._wElement["dividedQuestionConfirmLayerDescription"].html("\uacc4\uc18d \uc9c4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");
else this._wElement["dividedQuestionConfirmLayerDescription"].html("\uaf2d \ud544\uc694\ud560 \ub54c\ub9cc \uc9c8\ubb38\ub098\ub204\uae30\ub97c \ud558\uc138\uc694!\x3cbr\x3e\uacc4\uc18d \uc9c4\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?");
this._wElement["dividedQuestionConfirmLayer"].show();var elLayer=$$.getSingle("div._layer",this._wElement["dividedQuestionConfirmLayer"].$value());
if(elLayer)elLayer.style.top=nhn.Kin.getTopOfClientCenter(elLayer.clientHeight)+"px";return}this._submitForm()},
_submitForm:function(){if(showLoadingIndicator)showLoadingIndicator();if(this.bOnSubmit){alert(this.oMessage.IS_PROCESSING_REGIST_QUESTION);
return false}this.bOnSubmit=true;this.detachBeforeUnloadEvent();this._processRegister()},
_checkAdditionalDataForExpertQuestion:function(){if(this.oExpertQuestionRegister&&!this.oExpertQuestionRegister.validate(true))this._resetSubmit();
else this._processRegister()},
_processRegister:function(){if(!this._bIsModify&&!confirm(this.oMessage.QUESTION_REGISTER_WARNING)){this.bOnSubmit=
false;if(hideLoadingIndicator)hideLoadingIndicator();return}var frm=$("form");var contents=this._getContents();
var title="";if(this._oElement["titleInput"].value.length===0){title=this._getAutoTitle(contents);if(!this._bIsModify&&
this._oElement["autoTitleFlag"])this._oElement["autoTitleFlag"].value="Y"}else title=$("title_input").value;
if(this.oAttachInfoManager)this.oAttachInfoManager.processAttachInfos();if(this.oTagRegister)this.oTagRegister.processAttachTag();
this._setDirectorySelectionType(frm);frm.likeFlag.value=this._sRecommendReviewStat;frm.isDirClickedByUser.value=
this.bIsDirClickedByUser;if(this._sDivideYn==="Y")frm.divideYn.value=this._sDivideYn;frm.title.value=
title;frm.contents.value=contents;var sFormValues=nhn.Kin.getFormValues(frm);this._register(sFormValues)},
_setDirectorySelectionType:function(oForm){var sDirId=this._getFormDirId();var aElRecommendDirList=$$("input._recommendedDirectory",
this._oElement["recommendList"]);var bFindSelectedDirectory=false;var sRecommendedDirectoryList="";if(aElRecommendDirList&&
aElRecommendDirList.length>0)for(var i=0,len=aElRecommendDirList.length;i<len;i++){var nRecommendedDirId=
aElRecommendDirList[i].value;if(sDirId===nRecommendedDirId){oForm.directorySelectionType.value=this._DIRECTORY_SELECTION_TYPE.RECOMMEND;
oForm.recommendType.value=this._RECOMMEND_TYPE.RECOMMEND;bFindSelectedDirectory=true}if(i===0)sRecommendedDirectoryList+=
nRecommendedDirId;else sRecommendedDirectoryList+=","+nRecommendedDirId}if(sRecommendedDirectoryList&&
sRecommendedDirectoryList.length>0)oForm.recommendedDirIdList.value=sRecommendedDirectoryList;if(bFindSelectedDirectory)return;
var oSelectedSearchResult=$$.getSingle("input[name\x3d_group]:checked",$Element(this._oElement["quickDirectorySearchResultList"]).$value());
if(oSelectedSearchResult){oForm.directorySelectionType.value=this._DIRECTORY_SELECTION_TYPE.SEARCH;oForm.recommendType.value=
this._RECOMMEND_TYPE.KEYWORD}},
_register:function(sFormValues){var PROCESS_AJAX_URL=$("form").action;var oOption={onload:$Fn(this._registerCallback,
this).bind(),method:"post",timeout:15,postBody:true,ontimeout:$Fn(function(){alert(this.oMessage.TIMEOUT);
this._resetSubmit()},this).bind(),
onerror:$Fn(function(){alert(this.oMessage.ERROR);this._resetSubmit()},this).bind()};
var oAjax=new $Ajax(PROCESS_AJAX_URL,oOption);oAjax.request(sFormValues)},
_registerCallback:function(oResponse){oResponse=oResponse.json();var redirectUrl="";if(oResponse.isSuccess){nhn.Kin.setBingoCompleteLayerToCookie(oResponse);
var nTotalCount=oResponse.totalCount;if(nTotalCount&&oResponse.result)for(var i=0;i<nTotalCount;i++){var oRes=
oResponse.result[i];redirectUrl=oRes&&oRes.redirectUrl?oRes.redirectUrl:null}}else{var errorMsg=oResponse.errorMsg||
this.oMessage.ERROR;alert(errorMsg);if(oResponse.result&&oResponse.result.length>0){var oRes=oResponse.result[0];
redirectUrl=oRes&&oRes.redirectUrl?oRes.redirectUrl:null}else this._resetSubmit()}if(redirectUrl)location.replace(redirectUrl)},
validateTitle:function(isContentFocus){if(this._oElement["titleInput"].value.length===0)return null;if(this._oElement["titleInput"].value==
this.DEFAULT_TITLE){if(isContentFocus)return this.oMessage.IS_EMPTY_TITLE;return this.oMessage.IS_EMPTY_TITLE}if($S(this._oElement["titleInput"].value).trim().toString().length<
5)return this.oMessage.IS_LESS_THAN_MIN_LENGTH_TITLE;if(this._NOT_ALLOWED_WORD_PATTERN.test(this._oElement["titleInput"].value))return this.oMessage.IS_NOT_ALLOWED_TITLE;
return null},
validateContent:function(){if(!this._oElement["contentsTextarea"].value)return this.oMessage.IS_EMPTY_CONTENTS;
if($S(this._oElement["contentsTextarea"].value).trim().toString().length<5)return this.oMessage.IS_LESS_THAN_MIN_LENGTH_CONTENTS;
if(this._NOT_ALLOWED_WORD_PATTERN.test(this._oElement["contentsTextarea"].value))return this.oMessage.IS_NOT_ALLOWED_CONTENTS;
return null},
_onPageShow:function(we){this._resetSubmit();var el=this._oElement["contentsTextarea"];if(!el){we.stop();
return}var wel=$Element(el);if(!wel){we.stop();return}if(el.value||this.oTempSave._bEnableTempSaveContents){if(this._wElement["descriptionArea"]&&
this._wElement["descriptionArea"].visible())this._wElement["descriptionArea"].hide();if(!wel.hasClass("on"))wel.addClass("on")}else if(this._wElement["descriptionArea"]&&
!this._wElement["descriptionArea"].visible())this._wElement["descriptionArea"].show()},
_resetSubmit:function(){this.bOnSubmit=false;if(this.oAttachInfoManager)this.oAttachInfoManager.resetAttachFile();
if(typeof hideLoadingIndicator==="function")hideLoadingIndicator()},
_suicideCounselingToDoctor:function(we){if(nhn.Kin.checkRos())return false;if(!this.oExpertQuestionRegister){var nExpertDirId=
70109;var sExpertType="doctor";var oParam={expertType:sExpertType,dirId:nExpertDirId,callbackFunction:this._setExpertQuestionForSuicideCounseling,
confirmMsg:this.oMessage.CHECK_PARENTAL_CONSENT_IN_WRITING};this._checkEnableQuestionToExpert(oParam)}we.stop()},
_setExpertQuestionForSuicideCounseling:function(){this.bHasRecommendDirList=true;$Element(this._oElement["recommendList"]).html(this._oTemplate["recommendDirListTpl"].process({nClicksAreaName:this._sNclicksAreaName,
recommendDirList:null}));$Element(this._oElement["suicideCounselingToDoctor"]).replace('\x3cspan class\x3d"go_doc exp"\x3e\uc758\uc0ac\uc5d0\uac8c \uc0c1\ub2f4\ud558\uae30\x3c/span\x3e');
$Element(this._oElement["suicidalPreventionBanner"]).removeClass("qst").addClass("exp")},
_getExpertType:function(){var sExpertType="";if(this.oExpertQuestionRegister)sExpertType=this.oExpertQuestionRegister.sExpertType;
return sExpertType},
_getContents:function(){return this._oElement["contentsTextarea"].value||""},
_onKeyupQuestionArea:function(wEl){this._inputQuestionArea(wEl);this._onKeyupQuestionAreaCheckEnter(wEl)},
_onInputQuestionArea:function(wEl){this._inputQuestionArea(wEl)},
_onPasteQuestionArea:function(wEl){if(this._oTimeoutForPaste)clearTimeout(this._oTimeoutForPaste);this._oTimeoutForPaste=
setTimeout($Fn(function(){this._inputQuestionArea(wEl)},this).bind(),300)},
_inputQuestionArea:function(wEl){var sContents=wEl.element.value;if(!this._bTitleFocus&&!this._bIsModify&&
this._oElement["titleInput"])if(sContents){this._oElement["titleInput"].value=this._getAutoTitle(sContents);
if(!this._bIsModify&&this._oElement["autoTitleFlag"])this._oElement["autoTitleFlag"].value="Y"}else if(sContents===
"")this._oElement["titleInput"].value=""},
_onKeyupQuestionAreaCheckEnter:function(wEl){if(this._bIsModify&&this._getExpertType())return;if(wEl.key().keyCode===
13){var sContents=wEl.element.value;var nContentsLen=$S(sContents).trim().toString().length;if(nContentsLen>
5){this._bTitleFocus=true;this._refreshRecommendDirectoryWithoutAlert(sContents);this._wElement["recommendSlogan"].hide()}}},
_getAutoTitle:function(sContents){if(!sContents)return sContents;return $S(sContents).trim().toString().replace(/[\t\r\n]/g,
" ").replace(/[\s]{2,}/g," ").substr(0,60)},
_checkWaitForSelectionLayer:function(){if(!this._wElement["waitForSelectionLayer"]||!this._wElement["waitForSelectionLayerInnerBox"])return;
if(this._sWaitForSelectionType===this._WAIT_FOR_SELECTION_TYPE.NOTCANCELABLE||this._sWaitForSelectionType===
this._WAIT_FOR_SELECTION_TYPE.CANCELABLE)this._wElement["waitForSelectionLayer"].show();else if(this._sWaitForSelectionType===
this._WAIT_FOR_SELECTION_TYPE.CACHEABLE)nhn.Kin.checkLayerClosedTimeAndShow("wait_for_selection_layer",
this._CONSTANTS_FOR_WAITFORSELECTION_LAYER.maxHideTime);else return;this._showWaitForSelectionLayer()},
_showWaitForSelectionLayer:function(we){if(this.bUseAnimation)setTimeout($Fn(this._expandWaitForSelectionLayer,
this).bind(),100);else this._wElement["waitForSelectionLayerInnerBox"].css("height","auto")},
_onClickWaitForSelectionLayer:function(oEvent){var wEl=$Element(oEvent.element);if(/^i$/i.test(wEl.$value().tagName))wEl=
wEl.parent();if(wEl.hasClass("_closeBtn"))this._hideWaitForSelectionLayer(true);else if(wEl.hasClass("_redirectQuestionList")){this._hideWaitForSelectionLayer(false);
var sClickCode="";if(this._isFromSearch)sClickCode="sqw.selectlayerok";else sClickCode="qwr.selectlayerok";
nclkF(sClickCode,"","",function(){location.href="/mobile/mykin/myQnaList.nhn?listType\x3dquestionList\x26subListType\x3ding\x26isForce\x3dY"})}oEvent.stop()},
_hideWaitForSelectionLayer:function(isSaveTime){if(this._sWaitForSelectionType===this._WAIT_FOR_SELECTION_TYPE.CANCELABLE)this._wElement["waitForSelectionLayer"].hide();
else if(this._sWaitForSelectionType===this._WAIT_FOR_SELECTION_TYPE.CACHEABLE&&isSaveTime)nhn.Kin.hideAndSaveLayerClosedTime("wait_for_selection_layer");
if(this._oTransition){this._oTransition.clear();this._oTransition.destroy();this._oTransition=null}},
_expandWaitForSelectionLayer:function(){var wElLayer=this._wElement["waitForSelectionLayerInnerBox"];
if(!wElLayer)return;if(!this._oTransition)this._oTransition=new jindo.m.Transition;else this._oTransition.clear();
wElLayer.height(wElLayer.height());var nExpandDistance=this._getRealHeightOfAnswerArea(wElLayer)||0;if(nExpandDistance<
1)return;this._oTransition.queue(wElLayer,300,{htStyle:{height:nExpandDistance+"px"}});this._oTransition.start()},
_getRealHeightOfAnswerArea:function(wEl){if(!wEl)return;var aChildElement=wEl.child();if(!aChildElement)return wEl.height();
var nRealHeightOfAnswerArea=0;var aChildCount=aChildElement.length;for(var i=0;i<aChildCount;i++)nRealHeightOfAnswerArea+=
aChildElement[i].height();return nRealHeightOfAnswerArea}});
jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var aInstance=this.constructor.getInstance();
aInstance.push(this);this._htEventHandler={};this._htOption={};this._htOption._htSetter={}},
option:function(sName,vValue){switch(typeof sName){case "undefined":return this._htOption;case "string":if(typeof vValue!=
"undefined"){if(sName=="htCustomEventHandler")if(typeof this._htOption[sName]=="undefined")this.attach(vValue);
else return this;this._htOption[sName]=vValue;if(typeof this._htOption._htSetter[sName]=="function")this._htOption._htSetter[sName](vValue)}else return this._htOption[sName];
break;case "object":for(var sKey in sName){if(sKey=="htCustomEventHandler")if(typeof this._htOption[sKey]==
"undefined")this.attach(sName[sKey]);else continue;this._htOption[sKey]=sName[sKey];if(typeof this._htOption._htSetter[sKey]==
"function")this._htOption._htSetter[sKey](sName[sKey])}break}return this},
optionSetter:function(sName,fSetter){switch(typeof sName){case "undefined":return this._htOption._htSetter;
case "string":if(typeof fSetter!="undefined")this._htOption._htSetter[sName]=jindo.$Fn(fSetter,this).bind();
else return this._htOption._htSetter[sName];break;case "object":for(var sKey in sName)this._htOption._htSetter[sKey]=
jindo.$Fn(sName[sKey],this).bind();break}return this},
fireEvent:function(sEvent,oEvent){oEvent=oEvent||{};var fInlineHandler=this["on"+sEvent],aHandlerList=
this._htEventHandler[sEvent]||[],bHasInlineHandler=typeof fInlineHandler=="function",bHasHandlerList=
aHandlerList.length>0;if(!bHasInlineHandler&&!bHasHandlerList)return true;aHandlerList=aHandlerList.concat();
oEvent.sType=sEvent;if(typeof oEvent._aExtend=="undefined"){oEvent._aExtend=[];oEvent.stop=function(){if(oEvent._aExtend.length>
0)oEvent._aExtend[oEvent._aExtend.length-1].bCanceled=true}}oEvent._aExtend.push({sType:sEvent,
bCanceled:false});var aArg=[oEvent],i,nLen;for(i=2,nLen=arguments.length;i<nLen;i++)aArg.push(arguments[i]);
if(bHasInlineHandler)fInlineHandler.apply(this,aArg);if(bHasHandlerList){var fHandler;for(i=0,fHandler;fHandler=
aHandlerList[i];i++)fHandler.apply(this,aArg)}return!oEvent._aExtend.pop().bCanceled},
attach:function(sEvent,fHandlerToAttach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,
sEvent){this.attach(sEvent,fHandler)},this).bind());
return this}var aHandler=this._htEventHandler[sEvent];if(typeof aHandler=="undefined")aHandler=this._htEventHandler[sEvent]=
[];aHandler.push(fHandlerToAttach);return this},
detach:function(sEvent,fHandlerToDetach){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,
sEvent){this.detach(sEvent,fHandler)},this).bind());
return this}var aHandler=this._htEventHandler[sEvent];if(aHandler)for(var i=0,fHandler;fHandler=aHandler[i];i++)if(fHandler===
fHandlerToDetach){aHandler=aHandler.splice(i,1);break}return this},
detachAll:function(sEvent){var aHandler=this._htEventHandler;if(arguments.length){if(typeof aHandler[sEvent]==
"undefined")return this;delete aHandler[sEvent];return this}for(var o in aHandler)delete aHandler[o];
return this}});
jindo.Component.factory=function(aObject,htOption){var aReturn=[],oInstance;if(typeof htOption=="undefined")htOption=
{};for(var i=0,el;el=aObject[i];i++){oInstance=new this(el,htOption);aReturn[aReturn.length]=oInstance}return aReturn};
jindo.Component.getInstance=function(){if(typeof this._aInstance=="undefined")this._aInstance=[];return this._aInstance};
jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},
isActivating:function(){return this._bIsActivating},
activate:function(){if(this.isActivating())return this;this._bIsActivating=true;if(arguments.length>0)this._onActivate.apply(this,
arguments);else this._onActivate();return this},
deactivate:function(){if(!this.isActivating())return this;this._bIsActivating=false;if(arguments.length>
0)this._onDeactivate.apply(this,arguments);else this._onDeactivate();return this}}).extend(jindo.Component);
jindo.FileUploader=jindo.$Class({_bIsActivating:false,_aHiddenInput:[],$init:function(elFileSelect,htOption){var htDefaultOption=
{sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"\uc5c5\ub85c\ub4dc\uac00 \ud5c8\uc6a9\ub418\uc9c0 \uc54a\ub294 \ud30c\uc77c\ud615\uc2dd\uc785\ub2c8\ub2e4",
bAutoUpload:false,bActivateOnload:true};this.option(htDefaultOption);this.option(htOption||{});this._el=
jindo.$(elFileSelect);this._wel=jindo.$Element(this._el);this._elForm=this._el.form;this._aHiddenInput=
[];this.constructor._oCallback={};this._wfChange=jindo.$Fn(this._onFileSelectChange,this);if(this.option("bActivateOnload"))this.activate()},
_appendIframe:function(){var sIframeName="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('\x3ciframe name\x3d"'+
sIframeName+'" src\x3d"'+this.option("sCallback")+'?blank"\x3e')).css({position:"absolute",width:"1px",
height:"1px",left:"-100px",top:"-100px"});document.body.appendChild(this._welIframe.$value())},
_removeIframe:function(){this._welIframe.leave()},
getBaseElement:function(){return this.getFileSelect()},
getFileSelect:function(){return this._el},
getFormElement:function(){return this._elForm},
upload:function(){this._appendIframe();var elForm=this.getFormElement(),welForm=jindo.$Element(elForm),
sIframeName=this._welIframe.attr("name"),sFunctionName=sIframeName+"_func",sAction=this.option("sUrl");
this._sPrevTarget=welForm.attr("target");this._sAction=welForm.attr("action");welForm.attr({target:sIframeName,
action:sAction});this._aHiddenInput.push(this._createElement("input",{"type":"hidden","name":"callback",
"value":this.option("sCallback")}));this._aHiddenInput.push(this._createElement("input",{"type":"hidden",
"name":"callback_func","value":sFunctionName}));for(var k in this.option("htData"))this._aHiddenInput.push(this._createElement("input",
{"type":"hidden","name":k,"value":this.option("htData")[k]}));for(var i=0;i<this._aHiddenInput.length;i++)elForm.appendChild(this._aHiddenInput[i]);
this.constructor._oCallback[sFunctionName+"_success"]=jindo.$Fn(function(oParameter){this.fireEvent("success",
{htResult:oParameter});delete this.constructor._oCallback[oParameter.callback_func+"_success"];delete this.constructor._oCallback[oParameter.callback_func+
"_error"];for(var i=0;i<this._aHiddenInput.length;i++)jindo.$Element(this._aHiddenInput[i]).leave();this._aHiddenInput.length=
0;this._removeIframe()},this).bind();
this.constructor._oCallback[sFunctionName+"_error"]=jindo.$Fn(function(oParameter){this.fireEvent("error",
{htResult:oParameter});delete this.constructor._oCallback[oParameter.callback_func+"_success"];delete this.constructor._oCallback[oParameter.callback_func+
"_error"];for(var i=0;i<this._aHiddenInput.length;i++)jindo.$Element(this._aHiddenInput[i]).leave();this._aHiddenInput.length=
0;this._removeIframe()},this).bind();
elForm.submit();this.reset()},
reset:function(){var elWrapForm=jindo.$("\x3cform\x3e");this._wel.wrap(elWrapForm);elWrapForm.reset();
jindo.$Element(elWrapForm).replace(this._el);return this},
_onActivate:function(){this._el.value="";this._wfChange.attach(this._el,"change")},
_onDeactivate:function(){this._wfChange.detach(this._el,"change")},
_makeUniqueId:function(){return(new Date).getMilliseconds()+Math.floor(Math.random()*1E5)},
_createElement:function(name,attributes){var el=jindo.$("\x3c"+name+"\x3e");var wel=jindo.$Element(el);
for(var k in attributes)wel.attr(k,attributes[k]);return el},
_checkExtension:function(sFile){var aType=this.option("sFiletype").split(";");for(var i=0,sType;i<aType.length;i++){sType=
aType[i]=="*.*"?"*":aType[i];sType=sType.replace(/^\s+|\s+$/,"");sType=sType.replace(/\./g,"\\.");sType=
sType.replace(/\*/g,"[^\\/]+");if((new RegExp(sType+"$","gi")).test(sFile))return true}return false},
_onFileSelectChange:function(we){var sValue=we.element.value,bAllowed=this._checkExtension(sValue),htParam=
{sValue:sValue,bAllowed:bAllowed,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};if(sValue.length&&
this.fireEvent("select",htParam))if(bAllowed){if(this.option("bAutoUpload"))this.upload()}else alert(htParam.sMsgNotAllowedExt)}}).extend(jindo.UIComponent);
var TempSave=$Class({_oElement:null,_wElement:null,_oEvent:null,_listUrl:"/mobile/ajax/tempSave.nhn?m\x3dlist",
_saveUrl:"/mobile/ajax/tempSave.nhn?m\x3dsave",_systemTempSaveUrl:"/mobile/ajax/tempSave.nhn?m\x3dsystemTempSave",
_deleteUrl:"/mobile/ajax/tempSave.nhn?m\x3ddelete",_loadUrl:"/mobile/ajax/tempSave.nhn?m\x3dload",_MSG:{DEFAULT_TITLE:"\uc9c8\ubb38 \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694 (5\uc790 \uc774\uc0c1)",
DEFAULT_CONTENTS:'\ud2b9\uc815 \ud0a4\uc6cc\ub4dc \uc55e\uc5d0 "#"\uc744 \ubd99\uc774\uac70\ub098 \ud0dc\uadf8\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uba74,\n\ub2e4\uc591\ud55c \ub2f5\ubcc0\uc744 \ubc1b\ub294\ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.\n\ub2f5\ubcc0\uc774 \ub4f1\ub85d\ub418\uba74 \uc9c8\ubb38\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.',
APPENDED_ALERT:"\n\ucca8\ubd80\ud55c \uc0ac\uc9c4\uc740 \ubcf8\ubb38 \ud558\ub2e8\uc5d0 \ub4f1\ub85d\ub429\ub2c8\ub2e4."},
_formName:null,_saveType:null,_inputDevice:null,_autoSaveYn:"Y",_autoSaveInterval:1,_tempSavedContents:null,
_bEnableTempSaveContents:false,$init:function(htOption){if(htOption.inputDevice)this._inputDevice=htOption.inputDevice;
if(htOption.saveType)this._saveType=htOption.saveType;if(htOption.autoSaveYn)this._autoSaveYn=htOption.autoSaveYn;
if(htOption.autoSaveInterval)this._autoSaveInterval=htOption.autoSaveInterval;if(htOption.bEnableTempSaveContents)this._bEnableTempSaveContents=
htOption.bEnableTempSaveContents;if(htOption.defaultContents)this._MSG.DEFAULT_CONTENTS=htOption.defaultContents;
else if(this._saveType==="QUESTION")this._MSG.DEFAULT_CONTENTS='\ud2b9\uc815 \ud0a4\uc6cc\ub4dc \uc55e\uc5d0 "#"\uc744 \ubd99\uc774\uac70\ub098 \ud0dc\uadf8\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uba74,\n\ub2e4\uc591\ud55c \ub2f5\ubcc0\uc744 \ubc1b\ub294\ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.\n\ub2f5\ubcc0\uc774 \ub4f1\ub85d\ub418\uba74 \uc9c8\ubb38\uc744 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.';
else this._MSG.DEFAULT_CONTENTS="\ub2f5\ubcc0\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.\n\ud568\uaed8\ud558\ub294 \uc0ac\uc6a9\uc790\ub4e4\uc774 \ubd88\ud3b8\ud558\uc9c0 \uc54a\ub3c4\ub85d\n\uc7a5\ub09c\uc131 \uae00\uc774\ub098 \uc758\ubbf8 \uc5c6\ub294 \ub2f5\ubcc0\uc740 \uc0bc\uac00\uc8fc\uc138\uc694.";
this.initialize();$Fn(this.destroy,this).attach(window,"unload")},
initialize:function(){this._oElement={};this._oEvent={};this.setElement();this.setEvent();this.setAutoSave();
if(this._oElement["tempSaveTime"])this._oElement["tempSaveTime"].style.display="none"},
setElement:function(){this._getTempSaveElement()},
setEvent:function(){this._oEvent["tempSave"]=$Fn(this._clickTempSave,this).attach(this._oElement["tempSaveButton"],
"click")},
setAutoSave:function(){if(this._autoSaveYn=="Y"&&this._autoSaveInterval>0)$Fn(function(){this._tempSave("auto_save")},
this).repeat(this._autoSaveInterval*60)},
_getTempSaveElement:function(){if(this._saveType==="QUESTION"){this._formName="questionForm";this._oElement["temporaryId"]=
$("temporaryId");this._oElement["title"]=$("title_input");this._oElement["contents"]=$("contents_textarea");
this._oElement["dirId"]=$("dirId");this._oElement["docId"]=0;this._oElement["svc"]=$("svc");this._oElement["tempSaveTime"]=
$$.getSingle("span.txt",$("submit_btns"));this._oElement["tempSaveButton"]=$$.getSingle("button._tempSave",
$("submit_btns"))}else if(this._saveType==="ANSWER"){this._formName="answerForm";this._oElement["temporaryId"]=
$("temporaryId");this._oElement["title"]=$("title");this._oElement["contents"]=$("contents_textarea");
this._oElement["dirId"]=$("dirId");this._oElement["docId"]=$("docId");this._oElement["svc"]=$("svc");
this._oElement["tempSaveTime"]=$$.getSingle("span._tempSaveTime",$("submit_btn"));this._oElement["tempSaveButton"]=
$$.getSingle("button._tempSave",$("submit_btn"))}},
destroy:function(){if(this._oEvent&&this._saveType==="ANSWER")this._oEvent["tempSave"].detach(this._oElement["tempSaveButton"],
"click");this._formName=null;this._saveType=null;this._inputDevice=null;this._autoSaveYn=null;this._autoSaveInterval=
0;this._tempSavedContents=null;this._wElement=this._oElement=this._oEvent=null},
_clickTempSave:function(){this._tempSave("temp_save")},
_tempSave:function(sDest){if(kinRos&&kinRos.bIsOnRos){alert("\uc11c\ube44\uc2a4 \uc815\uae30 \uc810\uac80 \uc911\uc73c\ub85c \n\uc784\uc2dc\uc800\uc7a5\uc744 \uc2e4\ud589\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n"+
"\n\uc77c\uc2dc | "+kinRos.sStartTime+" ~ "+kinRos.sEndTime+"\n\uc774\uc720 | "+kinRos.sReason);return false}this._callTempSave(sDest||
"temp_save")},
_doLoadTempSave:function(temporaryId){this._oElement["temporaryId"].value=temporaryId;this._loadTempSave()},
_callTempSave:function(sDest){var oParam={"title":this._oElement["title"]?this._oElement["title"].value==
this._MSG.DEFAULT_TITLE||this._oElement["title"]==this._MSG.DEFAULT_TITLE+this._MSG.APPENDED_ALERT?"":
this._oElement["title"].value:"","contents":this._oElement["contents"]?this._oElement["contents"].value==
this._MSG.DEFAULT_CONTENTS||this._oElement["contents"]==this._MSG.DEFAULT_CONTENTS+this._MSG.APPENDED_ALERT?
"":this._oElement["contents"].value:"","dest":sDest,"formName":this._formName,"saveType":this._saveType,
"svc":this._oElement["svc"]?this._oElement["svc"].value:"KIN","dirId":this._oElement["dirId"]?this._oElement["dirId"].value:
0,"docId":this._oElement["docId"]?this._oElement["docId"].value:0,"temporaryId":this._oElement["temporaryId"]?
this._oElement["temporaryId"].value:0,"inputDevice":this._inputDevice,"ts":(new Date).getTime()};var contents=
oParam.contents;if(!contents||contents==""){if(sDest==="temp_save")alert("\ubcf8\ubb38 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694. \uc784\uc2dc \uc800\uc7a5\uc2dc \ud544\uc218 \ud56d\ubaa9\uc785\ub2c8\ub2e4.");
return}if(sDest==="auto_save"&&contents===this._tempSavedContents)return;this._tempSavedContents=contents;
contents=null;var oOption={method:"post",timeout:5,onload:$Fn(this._onSave,this).bind(),ontimeout:$Fn(function(){alert(nhn.Kin.oMessage.TIMEOUT)},
this).bind(),
onerror:$Fn(function(){alert(nhn.Kin.oMessage.ERROR)},this).bind()};
var oAjax=new $Ajax(this._saveUrl,oOption);oAjax.request(oParam)},
systemTempSave:function(oTempSaveParam,fnCallback){var sPhotoInfoStr=null;if(oTempSaveParam)sPhotoInfoStr=
oTempSaveParam.photoInfoStr;var oParam={"title":this._oElement["title"]?this._oElement["title"].value==
this._MSG.DEFAULT_TITLE||this._oElement["title"]==this._MSG.DEFAULT_TITLE+this._MSG.APPENDED_ALERT?"":
this._oElement["title"].value:"","contents":this._oElement["contents"]?this._oElement["contents"].value==
this._MSG.DEFAULT_CONTENTS||this._oElement["contents"]==this._MSG.DEFAULT_CONTENTS+this._MSG.APPENDED_ALERT?
"":this._oElement["contents"].value:"","saveType":this._saveType,"dirId":this._oElement["dirId"]?this._oElement["dirId"].value:
0,"docId":this._oElement["docId"]?this._oElement["docId"].value:0,"photoInfoStr":sPhotoInfoStr||"","ts":(new Date).getTime()};
if(!oParam.title&&!oParam.contents&&!oParam.photoInfoStr){if(typeof fnCallback==="function")fnCallback(true);
return}var oOption={method:"post",timeout:5,onload:$Fn(function(oResponse){var oJson=oResponse.json();
if(oJson)if(typeof fnCallback==="function")fnCallback(oJson.isSuccess,oJson.errorMsg);else{if(!oJson.isSuccess)alert(oJson.errorMsg||
"\uc791\uc5c5\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}else alert("\uc791\uc5c5\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")},
this).bind(),
ontimeout:$Fn(function(){if(typeof fnCallback==="function")fnCallback(false,nhn.Kin.oMessage.TIMEOUT);
else alert(nhn.Kin.oMessage.TIMEOUT)},this).bind(),
onerror:$Fn(function(){if(typeof fnCallback==="function")fnCallback(false,nhn.Kin.oMessage.ERROR);else alert(nhn.Kin.oMessage.ERROR)},
this).bind()};
var oAjax=new $Ajax(this._systemTempSaveUrl,oOption);oAjax.request(oParam)},
systemTempSaveForRealNameCheck:function(oQuestionRegister){var sPhotoInfoStr=null;if(oQuestionRegister&&
oQuestionRegister.oAttachInfoManager)sPhotoInfoStr=oQuestionRegister.oAttachInfoManager.getAttachedPhotoString();
var sContents=this._oElement["contents"]?this._oElement["contents"].value==this._MSG.DEFAULT_CONTENTS||
this._oElement["contents"]==this._MSG.DEFAULT_CONTENTS+this._MSG.APPENDED_ALERT?"":this._oElement["contents"].value:
"";var oParam={"title":this._oElement["title"]?this._oElement["title"].value==this._MSG.DEFAULT_TITLE||
this._oElement["title"]==this._MSG.DEFAULT_TITLE+this._MSG.APPENDED_ALERT?"":this._oElement["title"].value:
sContents,"contents":sContents,"saveType":this._saveType,"dirId":this._oElement["dirId"]?this._oElement["dirId"].value:
0,"docId":this._oElement["docId"]?this._oElement["docId"].value:0,"photoInfoStr":sPhotoInfoStr||"","ts":(new Date).getTime()};
var oOption={method:"post",timeout:5,onload:$Fn(function(oResponse){var oJson=oResponse.json();if(oJson)if(oJson.isSuccess){if(oQuestionRegister._oEvent["unload"]){oQuestionRegister._oEvent["unload"].detach(window,
"beforeunload");oQuestionRegister._oEvent["unload"]=null}var sReturnUri=mobileKinServiceProtocol+"://"+
top.location.hostname+"/mobile/qna/question.nhn?from\x3drealNameCheck";var sStopUri=mobileKinServiceProtocol+
"://"+top.location.hostname+"/mobile/qna/question.nhn?from\x3drealNameCheck";var sRealNameCheckUri="https://nid.naver.com/mobile/user/help/realNameCheck.nhn?type\x3d12\x26a_version\x3d2\x26viewCd\x3dgreenInternet\x26rurl\x3d"+
encodeURIComponent(sReturnUri)+"\x26surl\x3d"+encodeURIComponent(sStopUri);window.location.href=sRealNameCheckUri}else alert("\uc791\uc5c5\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");
else alert("\uc791\uc5c5\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")},
this).bind(),
ontimeout:$Fn(function(){alert(nhn.Kin.oMessage.TIMEOUT)},this).bind(),
onerror:$Fn(function(){alert(nhn.Kin.oMessage.ERROR)},this).bind()};
var oAjax=new $Ajax(this._systemTempSaveUrl,oOption);oAjax.request(oParam)},
_loadTempSave:function(){var oParam={"temporaryId":this._oElement["temporaryId"]?this._oElement["temporaryId"].value:
0,"ts":(new Date).getTime()};var oOption={method:"post",timeout:5,onload:$Fn(this._onLoad,this).bind(),
ontimeout:$Fn(function(){alert(nhn.Kin.oMessage.TIMEOUT)},this).bind(),
onerror:$Fn(function(){alert(nhn.Kin.oMessage.ERROR)},this).bind()};
var oAjax=new $Ajax(this._loadUrl,oOption);oAjax.request(oParam)},
_deleteTempSave:function(temporaryId){if(nhn.Kin.checkRos())return false;if(this._oElement["temporaryId"].value==
temporaryId)this._oElement["temporaryId"].value=0;var oParam={"temporaryId":temporaryId,"ts":(new Date).getTime()};
var oOption={method:"post",timeout:5,onload:$Fn(this._onDelete,this).bind(),ontimeout:$Fn(function(){alert(nhn.Kin.oMessage.TIMEOUT)},
this).bind(),
onerror:$Fn(function(){alert(nhn.Kin.oMessage.ERROR)},this).bind()};
var oAjax=new $Ajax(this._deleteUrl,oOption);oAjax.request(oParam)},
_onSave:function(oResponse){var oJson=oResponse.json();var result=oJson?oJson.result[0]:null;var bIsSuccess=
oJson&&oJson.isSuccess;if(bIsSuccess){if(result.temporaryId)this._oElement["temporaryId"].value=result.temporaryId;
if(this._oElement["tempSaveTime"]){this._oElement["tempSaveTime"].innerHTML=result.tempSaveTime+" \uc800\uc7a5";
this._oElement["tempSaveTime"].style.display="inline"}}else{if(oJson&&oJson.errorMsg=="QUESTION_DELETED")alert("\ub2f5\ubcc0\ud558\uc2dc\ub358 \uc911\uc5d0 \ud574\ub2f9 \uc9c8\ubb38\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\ub2e4\ub978 \uc9c8\ubb38\uc5d0 \ub2f5\ubcc0\ud574 \uc8fc\uc138\uc694.");
else if(result&&result.dest=="temp_save")if(oJson.errorMsg=="FAIL_SPACE_FULL")alert("\uc784\uc2dc\uc800\uc7a5\uc740 \ucd5c\ub300 30\uac1c\uae4c\uc9c0\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\uc774\uc804\uc5d0 \uc800\uc7a5\ub41c \uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uac70\ub098 PC\uc5d0\uc11c \uc790\ub3d9\uc800\uc7a5 \uc124\uc815\uc744 \uc0ac\uc6a9\uc548\ud568\uc73c\ub85c \ubcc0\uacbd\ud574\uc8fc\uc138\uc694.");
else if(oJson.errorMsg=="ROS_ON")alert("\uc8c4\uc1a1\ud569\ub2c8\ub2e4.\n\uc9c0\uc2ddiN \uc11c\ube44\uc2a4 \uc810\uac80 \uc911\uc785\ub2c8\ub2e4.\n\uc810\uac80 \uc2dc\uac04 \ub3d9\uc548\uc740 \ud574\ub2f9 \uae30\ub2a5 \uc774\uc6a9\uc774 \uc81c\ud55c\ub429\ub2c8\ub2e4.\n\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \uc9c0\uc2ddiN \uc810\uac80 \uc548\ub0b4 \uacf5\uc9c0\ub97c \ucc38\uace0\ud574\uc8fc\uc138\uc694.");
else alert("\uc784\uc2dc\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");this._tempSavedContents=
""}result=null;oJson=null;return bIsSuccess},
_onLoad:function(oResponse){var oJson=oResponse.json();if(oJson&&oJson.isSuccess){var result=oJson.result[0];
this._oElement["title"].value=result.title;this._oElement["contents"].value=this._stripTagsExceptLines(result.contents);
this._oElement["svc"].value=result.svc;this._oElement["dirId"].value=result.dirId;this._oElement["docId"].value=
result.docId;this._oElement["temporaryId"].value=result.temporaryId;this._tempSavedContents=result.contents;
this._oElement["contents"].style.height=this._oElement["contents"].scrollHeight+"px";if(this._oElement["tempSaveTime"]){this._oElement["tempSaveTime"].innerHTML=
result.tempSaveTime+" \uc800\uc7a5";this._oElement["tempSaveTime"].style.display="inline"}if(this._oElement["contents"].value!=
""){var wel=$Element(this._oElement["contents"]);if(!wel.hasClass("on"))wel.addClass("on")}result=null}else alert("\uc784\uc2dc\uc800\uc7a5 \ub85c\ub529\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
oJson=null},
_onDelete:function(oResponse){var oJson=oResponse.json();if(!oJson||!oJson.isSuccess){alert("\uc784\uc2dc\uc800\uc7a5 \uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
return}oJson=null},
_alertErrorMessage:function(){alert("\uc791\uc5c5\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")},
_stripTagsExceptLines:function(contents){if(contents){contents=contents.replace(/\n/g,"");contents=contents.replace(/(<\/[p|div|table]*>|<br\s*\/?>)/g,
"\n");contents=contents.replace(/&nbsp;/g," ");contents=contents.replace(/(?:<[^>]*>|&#[0-9]+;)/g,"")}return contents}});
var ExpertQuestionRegister=$Class({_oElement:null,_oEvent:null,_oTemplate:null,sExpertType:null,_sExpertTypeKorean:null,
_bIsEnableNaverAppPhotoUpload:false,nDirId:0,oQuestionRegister:null,_loadTemplate:function(htOption){var sUrl=
"/mobile/ajax/getExpertTemplate.nhn";var oParam={expertType:htOption.expertType};var oOption={method:"post",
timeout:3,onload:$Fn(this.initiate,this).bind(),ontimeout:$Fn(function(){alert(nhn.Kin.oMessage.TIMEOUT)},
this).bind(),
onerror:$Fn(function(){alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.");
this._resetSubmit()},this).bind()};
var oAjax=new $Ajax(sUrl,oOption);oAjax.request(oParam)},
$init:function(htOption){this.sExpertType=htOption.expertType;this._sExpertTypeKorean=htOption.expertTypeKorean;
this._bIsEnableNaverAppPhotoUpload=htOption.isEnableNaverAppPhotoUpload;this.nDirId=htOption.dirId;this._bIsFromSearch=
htOption.isFromSearch;this.oQuestionRegister=htOption.oQuestionRegister;this._loadTemplate(htOption)},
setTemplate:function(){this._oTemplate["expertTemplateForm"]=$Template("expertTemplateForm")},
initiate:function(res){if(!res)return;var oJson=res.json();if(!oJson||!oJson.isSuccess)return;this._oTemplate=
{};this.setTemplate();if(oJson.expertType!=="dietitian")$Element("expert_template_form").html(this._oTemplate["expertTemplateForm"].process({startComponentId:oJson.startComponentId,
endComponentId:oJson.endComponentId,hasSavedData:oJson.hasSavedData,isSafariBrowser:$Agent().navigator().safari,
fields:oJson.fields}));this._oElement={};this.setElement();this._oEvent={};this.setEvent();var expertLength=
this._oElement["expert"].length;for(var i=0;i<expertLength;i++)for(var j=0;j<this._oElement["expert"][i].length;j++){var wel=
$Element(this._oElement["expert"][i][j]);if(wel.attr("checked")||wel.attr("selected"))this._refreshDependentComponent(wel)}var _welQuestion=
$Element(this._oElement["question"]);if(!_welQuestion.hasClass("expert"))$Element(this._oElement["question"]).addClass("expert");
if(this.sExpertType)$("questionToExpertFlag").value="Y";$("expertiseInfoFlag").value="Y";$Element(this._oElement["title"]).html(this._sExpertTypeKorean+
"\uc5d0\uac8c \uc9c8\ubb38\ud558\uae30");if($Element("expert_info"))$Element("expert_info").show();if(!oJson.hasSavedData)this._openExpertTemplate();
var welContents=$Element("contents_textarea");if(welContents&&welContents.$value().value===this.oQuestionRegister.sDefaultContents){this.oQuestionRegister.sDefaultContents=
"\uc544\ud508 \ubd80\uc704\uc640 \uc99d\uc0c1\uc5d0 \ub300\ud574 \uc124\uba85\ud574\uc8fc\uc138\uc694.\n\uce58\ub8cc\ube44\uc6a9\uacfc \ubcd1\uc6d0\ucd94\ucc9c \uc9c8\ubb38\uc740 \uc758\ub8cc \uc804\ubb38\uac00\ub2f5\ubcc0\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.";
if(this.sExpertType=="lawyer"||this.sExpertType=="laboragent")this.oQuestionRegister.sDefaultContents=
"\uc2e4\uba85\ubcf4\ub2e4\ub294 \uac00\uba85\uc744 \uc0ac\uc6a9\ud558\uace0, \ubc1c\uc0dd\ud55c \uc0ac\uac74\uc744\n\uc2dc\uac04\ub300\ubcc4\ub85c \uc791\uc131 \ud6c4 \uc9c8\ubb38\uc740 \uc694\uc57d\ud574\uc11c \uc791\uc131\ud574\uc8fc\uc138\uc694.";
else if(this.sExpertType=="pharmacist")this.oQuestionRegister.sDefaultContents="\ud2b9\uc815 \uc99d\uc0c1\uc758 \ud30c\uc545\uc774\ub098 \uc9c4\ub8cc\uac00 \ud544\uc694\ud55c \uc758\uc57d\ud488 \ubcf5\uc6a9\uc5d0 \ub300\ud55c \ubb38\uc758\ub294 '\uc758\uc0ac\uc5d0\uac8c \uc9c8\ubb38\ud558\uae30'\ub97c \uc774\uc6a9\ud558\uc138\uc694.";
welContents.$value().value=this.oQuestionRegister.sDefaultContents}if(this._bIsEnableNaverAppPhotoUpload){if(this._oElement["photoBtn"])$Element(this._oElement["photoBtn"]).hide()}else if(this.sExpertType==
"doctor"||this.sExpertType=="oriental"||this.sExpertType=="animalDoctor"||this.sExpertType=="pharmacist")if(this._oElement["photoBtn"]){var sPhotoBtnHtml=
$Element(this._oElement["photoBtn"]).html();if(sPhotoBtnHtml&&!/\uc99d\uc0c1/.test(sPhotoBtnHtml)&&!/\uc758\uc57d\ud488/.test(sPhotoBtnHtml))$Element(this._oElement["photoBtn"]).html(sPhotoBtnHtml.replace("\uc0ac\uc9c4",
this.sExpertType=="pharmacist"?"\uc758\uc57d\ud488\uc0ac\uc9c4":"\uc99d\uc0c1\uc0ac\uc9c4"))}this._hideAttachBtnExcludePhotoBtn();
if(this._oElement["expertPhoto"]&&(this.sExpertType=="doctor"||this.sExpertType=="oriental"||this.sExpertType==
"animalDoctor"||this.sExpertType=="pharmacist")){var oDescriptionElement=$$.getSingle("span._description",
this._oElement["expertPhoto"]);if(oDescriptionElement){var sDescriptionText=$Element(oDescriptionElement).text();
if(sDescriptionText&&!/\uc99d\uc0c1/.test(sDescriptionText)&&!/\uc758\uc57d\ud488/.test(sDescriptionText))$Element(oDescriptionElement).text((this.sExpertType==
"pharmacist"?"\uc758\uc57d\ud488":"\uc99d\uc0c1")+sDescriptionText)}}var elAddedFixedClassRemoveElementList=
$$("._whenFocussedRemoveFixedClass",$("expert_info"));if(elAddedFixedClassRemoveElementList&&elAddedFixedClassRemoveElementList.length>
0){var eAddFixedClassRemoveEvent=document.createEvent("Event");eAddFixedClassRemoveEvent.initEvent("addFixedClassRemoveInputElement",
true,true);eAddFixedClassRemoveEvent["elAddedFixedClassRemoveElementList"]=elAddedFixedClassRemoveElementList;
document.dispatchEvent(eAddFixedClassRemoveEvent)}$Fn(this.destroy,this).attach(window,"unload")},
setElement:function(){this._oElement["question"]=$$.getSingle("div.question",$("ct"));this._oElement["title"]=
$("title");this._oElement["openTemplateBtn"]=$$.getSingle("button._open_template_btn",$("expert_info"));
this._oElement["saveTemplate"]=$$.getSingle("label._save_template",$("expert_info"));this._oElement["useTemplate"]=
$$.getSingle("label._use_template",$("expert_info"));this._oElement["videoUploadBtn"]=$$.getSingle("._video_upload_btn",
this._oElement["question"]);this._oElement["openFileUploadLayer"]=$$.getSingle("button._open_file_upload_layer",
this._oElement["question"]);this._oElement["photoBtn"]=$("photo_btn");this._oElement["recordBtn"]=$("record_btn");
this._oElement["locationBtn"]=$("location_btn");this._oElement["geolocationBtn"]=$("geolocation_btn");
this._oElement["expertPhoto"]=$("expert_photo");if($Element("expert_info")){this._oElement["expertComponentStartId"]=
parseInt($Element("expert_info").attr("data-startid"),10);this._oElement["expertComponentEndId"]=parseInt($Element("expert_info").attr("data-endid"),
10)}this._oElement["expertPhoto"]=$("expert_photo");this._oElement["expert"]=new Array;var nComponentCount=
this._oElement["expertComponentEndId"]-this._oElement["expertComponentStartId"]+1;var nIdx=0;for(var i=
0;i<nComponentCount;i++){var oComponent=$$("[name\x3dEXPERTISE_"+(this._oElement["expertComponentStartId"]+
i)+"]");if(oComponent&&oComponent.length>0)this._oElement["expert"][nIdx++]=oComponent}},
_refreshDependentComponent:function(wel){var nFieldId=wel.attr("name").split("_")[1];var aItems=document.querySelectorAll("[data-reqfield\x3d'"+
nFieldId+"']");if(!aItems||aItems.length<1)return;var nItemsLength=aItems.length;for(var i=0;i<nItemsLength;i++){var welItem=
$Element(aItems[i]);if(wel.attr("value")!=welItem.attr("data-reqvalue")){welItem.addClass("off");welItem.next().addClass("off")}else{welItem.removeClass("off");
welItem.next().removeClass("off")}}},
onChangeRadioBtn:function(we){var welCurrent=$Element(we.currentElement);var welParent=welCurrent.parent();
if(welParent.parent().hasClass("off")){we.stop();return}var aelSibling=$$("label",welParent.$value());
var nSiblingCnt=aelSibling.length;for(var i=0;i<nSiblingCnt;i++)if(aelSibling[i]!=welCurrent.$value()){$Element(aelSibling[i]).removeClass("on");
aelSibling[i].checked=false}this._refreshDependentComponent(welCurrent.first());welCurrent.addClass("on");
var oElCurrentInput=$$.getSingle("input",welCurrent.$value());if(oElCurrentInput)setTimeout($Fn(function(oElInput){oElInput.checked=
true},this).bind(oElCurrentInput),0);
we.stop()},
setEvent:function(){this._oEvent["expert"]=new Array;for(var i=0;i<this._oElement["expert"].length;i++){var aExpertComponents=
this._oElement["expert"][i];var elFirstChild=aExpertComponents[0];if(elFirstChild.type=="number"||elFirstChild.type==
"text"){this._oEvent["expert"][i]=$Fn(this.onClickInputText,this).attach(elFirstChild,"click");if($Element(elFirstChild).attr("pattern"))this._oEvent["expert"][i]=
$Fn(this.validateNumberKey,this).attach(elFirstChild,"keydown")}else if(elFirstChild.type=="radio"){this._oEvent["expert"][i]=
new Array;for(var j=0;j<aExpertComponents.length;j++)this._oEvent["expert"][i][j]=$Fn(this.onChangeRadioBtn,
this).attach($Element(aExpertComponents[j]).parent(),"click")}else if(elFirstChild.type=="select");}this._oEvent["openTemplateBtn"]=
$Fn(this.onClickOpenTemplateBtn,this).attach(this._oElement["openTemplateBtn"],"click");this._oEvent["saveTemplate"]=
$Fn(this.onClickSaveTemplateBtn,this).attach(this._oElement["saveTemplate"],"click");this._oEvent["useTemplate"]=
$Fn(this.onClickUseTemplateBtn,this).attach(this._oElement["useTemplate"],"click")},
destroy:function(){this._wElement=null;this._oElement=null;this._oEvent=null;this._oTemplate=null;this._MSG=
null},
_hideAttachBtnExcludePhotoBtn:function(){if(this._oElement["videoUploadBtn"])$Element(this._oElement["videoUploadBtn"]).hide();
if(this._oElement["openFileUploadLayer"])$Element(this._oElement["openFileUploadLayer"]).hide();if(this._oElement["recordBtn"])$Element(this._oElement["recordBtn"]).hide();
if(this._oElement["locationBtn"])$Element(this._oElement["locationBtn"]).hide();if(this._oElement["geolocationBtn"])$Element(this._oElement["geolocationBtn"]).hide()},
onClickOpenTemplateBtn:function(we){var elTemplate=$$.getSingle("div._expert_template_info",$("expert_info"));
var welTemplate=$Element(elTemplate);var welBtn=$Element(we.currentElement);welTemplate.toggle();if(welTemplate.visible())welBtn.addClass("on");
else welBtn.removeClass("on");we.stop()},
onClickUseTemplateBtn:function(we){var wel=$Element(we.currentElement);var elInput=$$.getSingle("input",
we.currentElement);wel.toggleClass("on");if(wel.hasClass("on")){elInput.checked=true;$("useTemplateFlag").value=
"Y";$("openFlag").value="N";var elSummary=$$.getSingle("dd._closeId",$("setting_summary"));if(elSummary)$Element(elSummary).html('\ube44\uacf5\uac1c\x3cem class\x3d"dv"\x3e|\x3c/em\x3e');
var elMaskingId=$$.getSingle("label._maskingId",$("setting_open_id"));if(elMaskingId)$Element(elMaskingId).hide();
var elCloseId=$$.getSingle("label._closeId",$("setting_open_id"));if(elCloseId)$Element(elCloseId).addClass("on")}else{elInput.checked=
false;$("useTemplateFlag").value="N";var elMaskingId=$$.getSingle("label._maskingId",$("setting_open_id"));
var elCloseId=$$.getSingle("label._closeId",$("setting_open_id"));if(elMaskingId){$Element(elMaskingId).show();
if($Element(elMaskingId).hasClass("on")){$Element(elCloseId).removeClass("on");$("openFlag").value="Y"}}}we.stop()},
onClickSaveTemplateBtn:function(we){var wel=$Element(we.currentElement);var elInput=$$.getSingle("input",
we.currentElement);wel.toggleClass("on");if(wel.hasClass("on")){elInput.checked=true;$("saveTemplateFlag").value=
"Y"}else{elInput.checked=false;$("saveTemplateFlag").value="N"}we.stop()},
onClickInputText:function(we){var el=we.element;scrollTo(0,$Element(el).offset().top-5);we.stop()},
validateNumberKey:function(we){var keyCode=we.key().keyCode;var navigator=$Agent().navigator();if(keyCode!=
8&&keyCode!=46&&(keyCode<48||keyCode>57)&&!(navigator.mobile&&navigator.chrome)){alert("\uc22b\uc790\ub9cc \uc785\ub825\ud574\uc8fc\uc138\uc694.");
we.stop()}},
onClickOpenAdditionalInfoBtn:function(we){we.stop()},
validate:function(bIsIgnoreAlert){var bValidateSwitch=true;var sAlertMsg="";var elFocused=this._oElement["question"];
var welTemplate=$Element(this._oElement["useTemplate"]);if(welTemplate&&!welTemplate.hasClass("on"))if(confirm("\ucd94\uac00\uc815\ubcf4\uc758 \uc804\ubb38\uac00\ub2f5\ubcc0 \ud65c\uc6a9\uc5d0 \ub3d9\uc758\ud558\uc9c0 \uc54a\uc73c\uc168\uc2b5\ub2c8\ub2e4.\n\ucd94\uac00\uc815\ubcf4 \uc5c6\uc774 \uc9c8\ubb38\uc744 \ub4f1\ub85d\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){$("expertiseInfoFlag").value=
"N";return true}else{this.scrollToElement(elFocused);return false}else for(var i=0;i<this._oElement["expert"].length;i++){var wel=
$Element(this._oElement["expert"][i][0]);var sType=wel.attr("type");var welGrandParent=wel.parent(function(v){return v.hasClass("dtl_d")},
3);
if(welGrandParent.length<1){bValidateSwitch=false;sAlertMsg="\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.";
break}var sComponentText=welGrandParent[0].prev().text();if(sType=="number"||sType=="text"){var nMinLimit=
wel.attr("min");var nMaxLimit=wel.attr("max");if(wel.attr("value").length<1){bValidateSwitch=false;sAlertMsg=
sComponentText+" \ud56d\ubaa9\uc758 \ub0b4\uc6a9\uc744 \ub123\uc5b4\uc8fc\uc138\uc694."}if(nMinLimit||
nMaxLimit){var nCurrentValue=Number(wel.attr("value"));if(nMinLimit&&nMaxLimit&&(nCurrentValue<nMinLimit||
nCurrentValue>nMaxLimit)){bValidateSwitch=false;sAlertMsg=sComponentText+" \ud56d\ubaa9\uc740 "+nMinLimit+
" ~ "+nMaxLimit+" \uc0ac\uc774\ub85c \uc785\ub825\ud574\uc8fc\uc138\uc694."}else if(nMinLimit&&nCurrentValue<
nMinLimit){bValidateSwitch=false;sAlertMsg=sComponentText+" \ud56d\ubaa9\uc740 "+nMinLimit+"\ubcf4\ub2e4 \ud06c\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694."}else if(nMaxLimit&&
nCurrentValue>nMaxLimit){bValidateSwitch=false;sAlertMsg=sComponentText+" \ud56d\ubaa9\uc740 "+nMaxLimit+
"\ubcf4\ub2e4 \uc791\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694."}}}else if(sType=="select"){if(wel.$value().value<
0){bValidateSwitch=false;sAlertMsg=sComponentText+" \ud56d\ubaa9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."}}else if(sType==
"radio"){cElCount=this._oElement["expert"][i].length;for(var j=0;j<cElCount;j++)if(this._oElement["expert"][i][j].checked)bValidateSwitch=
true;if(!bValidateSwitch)sAlertMsg=sComponentText+" \ud56d\ubaa9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."}if(!bValidateSwitch)break}if(bValidateSwitch)return true;
else{if(!bIsIgnoreAlert)alert(sAlertMsg);this.scrollToElement(elFocused);return false}},
scrollToElement:function(el){var wel=$Element(el);scrollTo(0,wel.offset().top-5)},
_openExpertTemplate:function(){var wOpenTemplateBtn=$Element(this._oElement["openTemplateBtn"]);if(wOpenTemplateBtn&&
wOpenTemplateBtn.hasClass("on")==false){var elTemplate=$("expert_info");$Element($$.getSingle("div._expert_template_info",
elTemplate)).show();wOpenTemplateBtn.addClass("on")}}});
var Captcha=$Class({_oOption:null,_oElement:null,_wElement:null,_wTemplate:null,_wEvent:null,_sKey:null,
_dKeySize:0,_dRefreshCnt:0,_sResult:"NONE",_bShowCaptcha:false,_dCaptchaType:0,oLoading:null,fOnShowCaptcha:null,
fOnPassCaptcha:null,fOnFailCaptcha:null,IMAGE_CAPTCHA_URL:"http://captcha.naver.com/nhncaptchav3.gif",
IMAGE_CAPTCHA_GET_URL:"/mobile/ajax/getImageCaptcha.nhn",IMAGE_CAPTCHA_CHECK_URL:"/mobile/ajax/checkImageCaptcha.nhn",
DEFAULT_ERROR_MSG:"\ucea1\ucc60\uc815\ubcf4 \ud655\uc778\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.",
$init:function(htOption){if(!htOption)return;this._oOption=htOption;this._oElement={};this._wElement=
{};this._wTemplate={};this._wEvent={};this._setElement();this._setEvent();this._setLoading();this.fOnShowCaptcha=
htOption.fOnShowCaptcha;this.fOnPassCaptcha=htOption.fOnPassCaptcha;this.fOnFailCaptcha=htOption.fOnFailCaptcha},
_setElement:function(){this._oElement["captchaEl"]=$$.getSingle("div.captcha");this._wElement["captchaEl"]=
$Element(this._oElement["captchaEl"]);this._oElement["captchaValue"]=$$.getSingle("input._captchaValue",
this._oElement["captchaEl"]);this._oElement["refreshCaptchaBtn"]=$$.getSingle("button._refreshCaptchaBtn",
this._oElement["captchaEl"]);this._wElement["thumbArea"]=$Element($$.getSingle("div._thumbArea",this._oElement["captchaEl"]))},
_setEvent:function(){if(this._oElement["refreshCaptchaBtn"])this._wEvent["clickRefresh"]=$Fn(this._refreshCaptcha,
this).attach(this._oElement["refreshCaptchaBtn"],"click")},
_setLoading:function(){this.oLoading=new jindo.m.Loading("captcha_area",{nWidth:20,nHeight:20,sDefaultForeground:"#999",
sLoadingText:""})},
_refreshCaptcha:function(oEvent){if(this._sKey&&this._dCaptchaType==0)this.refreshImageCaptcha()},
makeImageCaptcha:function(){this._showLoadingIndicator();var oOption={method:"post",timeout:5,onload:$Fn(this._setImageCaptcha,
this).bind(),ontimeout:$Fn(this._passCaptchaOnError,this).bind(),onerror:$Fn(this._passCaptchaOnError,
this).bind()};var oParam={svc:this._oOption.svc,mode:this._oOption.mode,dirId:this._oOption.dirId,docId:this._oOption.docId,
answerNo:this._oOption.answerNo,userId:this._oOption.userId,check:this._oOption.check,ts:(new Date).getTime()};
var oAjax=new $Ajax(this.IMAGE_CAPTCHA_GET_URL,oOption);oAjax.request(oParam)},
_setImageCaptcha:function(oResponse){this._hideLoadingIndicator();if(oResponse.json().isSuccess){this._sKey=
oResponse.json().sessionKey;this._bShowCaptcha=oResponse.json().showCaptcha;if(this._bShowCaptcha){var sCaptchaUrl=
this.IMAGE_CAPTCHA_URL+"?key\x3d"+this._sKey;this._setCaptchaImage(sCaptchaUrl);this._oOption.check="Y";
this._wElement["captchaEl"].show();if(this.fOnShowCaptcha){this.fOnShowCaptcha();this._scrollToCaptcha()}}else{this._oOption.check=
"N";this._wElement["captchaEl"].hide();if(this.fOnPassCaptcha)this.fOnPassCaptcha()}}else if(oResponse.json().errorMsg)alert(oResponse.json().errorMsg);
else alert(this.DEFAULT_ERROR_MSG)},
_setCaptchaImage:function(sImageUrl){if(!sImageUrl)return;if(!this._oElement["captchaImg"]){var oCaptchaImage=
$('\x3cimg src\x3d"'+sImageUrl+'" alt\x3d"\ucea1\ucc60 \uc774\ubbf8\uc9c0"\x3e');this._wElement["thumbArea"].append(oCaptchaImage);
this._oElement["captchaImg"]=oCaptchaImage}else this._oElement["captchaImg"].src=sImageUrl},
checkImageCaptcha:function(){if(!(this._sKey&&this._dCaptchaType==0)){alert(this.DEFAULT_ERROR_MSG);return}if(!this._oElement["captchaValue"].value){alert("\uc790\ub3d9 \ub4f1\ub85d \ubc29\uc9c0\ub97c \uc704\ud55c \ubb38\uc790\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.");
this._scrollToCaptcha();return}this._showLoadingIndicator();var oOption={method:"post",timeout:5,onload:$Fn(this._onCaptchaResult,
this).bind(),ontimeout:$Fn(this._passCaptchaOnError,this).bind(),onerror:$Fn(this._passCaptchaOnError,
this).bind()};var oParam={svc:this._oOption.svc,mode:this._oOption.mode,dirId:this._oOption.dirId,docId:this._oOption.docId,
answerNo:this._oOption.answerNo,userId:this._oOption.userId,captchaKey:this._sKey,captchaValue:this._oElement["captchaValue"].value,
ts:(new Date).getTime()};var oAjax=new $Ajax(this.IMAGE_CAPTCHA_CHECK_URL,oOption);oAjax.request(oParam)},
_onCaptchaResult:function(oResponse){if(!oResponse)alert("\ucea1\ucc60\uc815\ubcf4 \ud655\uc778\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.");
var oJsonResult=oResponse.json();this._hideLoadingIndicator();if(oJsonResult.isSuccess){this._sResult=
"OK";if(this.fOnPassCaptcha)this.fOnPassCaptcha()}else{this._sResult="FAIL";if(this.fOnFailCaptcha)this.fOnFailCaptcha(oJsonResult.errorMsg);
this._oElement["captchaValue"].value="";this.refreshImageCaptcha()}},
_passCaptchaOnError:function(){if(this.fOnPassCaptcha)this.fOnPassCaptcha()},
refreshImageCaptcha:function(){if(this._sResult=="FAIL"&&this._dCaptchaType==0)this.makeImageCaptcha();
else{this._dRefreshCnt++;var sCaptchaUrl=this.IMAGE_CAPTCHA_URL+"?key\x3d"+this._sKey+"\x26"+this._dRefreshCnt;
this._setCaptchaImage(sCaptchaUrl)}},
_showLoadingIndicator:function(){if(this.oLoading){this.oLoading.show();var el=$$.getSingle("._loading_container_class_",
$("captcha_area"));$Element(el).css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"})}},
_scrollToCaptcha:function(){if(this._oOption.mode==="QUESTION"){var offsetY=this._oElement["captchaEl"].offsetTop;
nhn.Kin.scrollToPosition(0,offsetY)}},
_hideLoadingIndicator:function(){if(this.oLoading)this.oLoading.hide()},
destroy:function(){if(this._oElement["refreshCaptchaBtn"])this._wEvent["clickRefresh"].detach(this._oElement["refreshCaptchaBtn"],
"click");this._oElement["captchaEl"]=this._wElement["captchaEl"]=null;this._oElement["captchaValue"]=
this._oElement["refreshCaptchaBtn"]=this._wElement["thumbArea"]=null}});
var TagRegister=$Class({_oElement:null,_wElement:null,_wTemplate:null,_wEvent:null,_oOption:null,_regexpForTag:null,
_regexpForHashtag:null,_regexpForHashtagExceptSpecialChars:null,_aTagList:null,_aHashtagList:null,_aHashtagBlackList:null,
_bHasHash:false,_bIsSupportOninputEvent:false,_fnOnResizeWindow:null,MAX_TAG_COUNT:10,MAX_TAG_LENGTH:20,
TAG_AUTO_COMPLETE_AJAX_URL:"http://actag.kin.naver.com/ac",TAG_AUTO_COMPLETE_SCRIPT_URL:"/m.KinAutoComplete.js",
MESSAGE:{MAX_TAG_COUNT_ERROR:"\ud0dc\uadf8\ub294 \ucd5c\ub300 10\uac1c\uae4c\uc9c0 \ub4f1\ub85d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",
EMPTY_TAG_ERROR:"\ud0dc\uadf8\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",TAG_CONTAINS_SPECIAL_CHAR_ERROR:"\ud2b9\uc218\ubb38\uc790\ub85c\ub9cc \uc785\ub825\ub41c \ud0dc\uadf8\ub294 \ub4f1\ub85d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},
REGEXP:{LETTER:"\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC",
MARKER:"\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u08FE\\u0900-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C01-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C82\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D02\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1DC0-\\u1DE6\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26",
NUMBER:"\\u0030-\\u0039\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19",
SPECIAL:"_\\u200c\\ua67e\\u05be\\u05f3\\u05f4\\u309b\\u309c\\u30a0\\u30fb\\u3003\\u0f0b\\u0f0c\\u0f0d"},
$init:function(htOption){this._oElement={};this._wElement={};this._wTemplate={};this._wEvent={};this._aTagList=
[];this._aHashtagList=[];this._aHashtagBlackList=[];this._bIsSupportOninputEvent="oninput"in window;this._oOption=
htOption;this._setRegexp();this._setElement();this._setEvent();this._initTagList();this._initAutoComplete();
this._refreshTagArea();if(this._oElement["contents"])$Fn(this._destroy,this).attach(window,"unload");
else this._destroy()},
_setRegexp:function(){var sAllowPattern="["+this.REGEXP.LETTER+this.REGEXP.MARKER+this.REGEXP.NUMBER+
this.REGEXP.SPECIAL+"]";var sAllowPatternExceptSpecialChars="["+this.REGEXP.LETTER+this.REGEXP.MARKER+
this.REGEXP.NUMBER+"]";this._regexpForHashtag=new RegExp("(#"+sAllowPattern+"{1,20})","gi");this._regexpForHashtagExceptSpecialChars=
new RegExp("("+sAllowPatternExceptSpecialChars+"+)","i");this._regexpForTag=new RegExp("("+sAllowPattern+
"*"+sAllowPatternExceptSpecialChars+sAllowPattern+"*)","gi")},
_setElement:function(){this._oElement["contents"]=$("contents_textarea");if(!this._oElement["contents"])return;
this._oElement["contentArea"]=$("ct");this._wElement["form"]=$Element("form");this._wElement["contents"]=
$Element(this._oElement["contents"]);this._oElement["hashtagBlockArea"]=$$.getSingle("div._hashtagBlockArea",
this._oElement["contentArea"]);this._wElement["hashtagBlockArea"]=$Element(this._oElement["hashtagBlockArea"]);
this._wElement["tagInputWrapper"]=$Element($$.getSingle("div._tagInputWrapper",this._oElement["contentArea"]));
this._oElement["tagInput"]=$$.getSingle("input._tagInput",this._wElement["tagInputWrapper"].$value());
this._wElement["tagInput"]=$Element(this._oElement["tagInput"]);this._wElement["tagBtnWrapper"]=$Element($$.getSingle("div._tagBtnWrapper",
this._oElement["contentArea"]));this._wElement["tagAutoCompleteArea"]=$Element($$.getSingle("div._tagAutoCompleteArea",
this._oElement["contentArea"]));this._wElement["tagListArea"]=$Element($$.getSingle("div._tagListArea",
this._oElement["contentArea"]));this._wElement["tagHelpLayerArea"]=$Element("tag_help_layer_area");this._wTemplate["tagListItem"]=
$Template("tag_list_item_tpl");this._wTemplate["tagAutoCompleteListItem"]=$Template("tag_auto_complete_list_item_tpl")},
_setEvent:function(){if(this._oElement["contents"]){if(this._bIsSupportOninputEvent)this._wEvent["inputContents"]=
$Fn(this._onInputContents,this).attach(this._oElement["contents"],"input");else{this._wEvent["keyupContents"]=
$Fn(this._onKeyupContents,this).attach(this._oElement["contents"],"keyup");this._wEvent["pasteContents"]=
$Fn(this._onPasteContents,this).attach(this._oElement["contents"],"paste")}this._wEvent["scrollContents"]=
$Fn(this._onScrollContents,this).attach(this._oElement["contents"],"scroll")}if(this._oElement["tagInput"]){this._wEvent["focusTagInput"]=
$Fn(this._onFocusTagInput,this).attach(this._oElement["tagInput"],"focus");this._wEvent["blurTagInput"]=
$Fn(this._onBlurTagInput,this).attach(this._oElement["tagInput"],"blur");if(this._bIsSupportOninputEvent)this._wEvent["inputTagInput"]=
$Fn(this._onInputTagInput,this).attach(this._oElement["tagInput"],"input");this._wEvent["keyupTagInput"]=
$Fn(this._onKeyupTagInput,this).attach(this._oElement["tagInput"],"keyup")}if(this._wElement["tagBtnWrapper"])this._wEvent["clickTagBtnWrapper"]=
$Fn(this._onClickTagBtn,this).attach(this._wElement["tagBtnWrapper"].$value(),"click");if(this._wElement["tagAutoCompleteArea"])this._wEvent["clickTagAutoCompleteArea"]=
$Fn(this._onClickTagAutoCompleteList,this).attach(this._wElement["tagAutoCompleteArea"].$value(),"click");
if(this._wElement["tagListArea"])this._wEvent["clickTagListArea"]=$Fn(this._onClickTagList,this).attach(this._wElement["tagListArea"].$value(),
"click");if(this._wElement["tagHelpLayerArea"])this._wEvent["clickTagHelpLayerArea"]=$Fn(this._onClickTagHelpLayer,
this).attach(this._wElement["tagHelpLayerArea"].$value(),"click");if(nhn.Kin.OS.ios||nhn.Kin.OS.android){this._fnOnResizeWindow=
$Fn(this._onResizeWindow,this).bind();jindo.m.bindRotate(this._fnOnResizeWindow)}else this._wEvent["resize"]=
$Fn(this._onResizeWindow,this).attach(window,"resize");this._wEvent["pageshow"]=$Fn(this._onResizeWindow,
this).attach(window,"pageshow")},
_initTagList:function(){var sTagListStr=this._oOption?this._oOption.tagListStr:null;if(!sTagListStr)return;
this._validateTagInputValue(sTagListStr,false);this._findHashtag();var nLengthOfHashtagList=this._aHashtagList.length;
for(var i=0;i<nLengthOfHashtagList;i++){var sHashtag=this._aHashtagList[i];if(!sHashtag||this._isIncludedHashtagBlackList(sHashtag))continue;
this._aHashtagBlackList.push(sHashtag)}},
_initAutoComplete:function(){if(typeof KinAutoComplete!=="undefined")this._setAutoComplete();else{var sAutoCompleteScriptUrl=
this._oOption&&this._oOption.jsDir?this._oOption.jsDir+this.TAG_AUTO_COMPLETE_SCRIPT_URL:this.TAG_AUTO_COMPLETE_SCRIPT_URL;
jindo.LazyLoading.load(sAutoCompleteScriptUrl,$Fn(this._setAutoComplete,this).bind())}},
_setAutoComplete:function(){if(!this._oElement["tagInput"]||typeof KinAutoComplete==="undefined"||this._oKinAutoComplete)return;
this._oKinAutoComplete=new KinAutoComplete({inputElement:this._oElement["tagInput"],autoCompleteUrl:this.TAG_AUTO_COMPLETE_AJAX_URL,
autoCompleteParam:{frm:"kin_mobileweb",r_format:"json",q_enc:"UTF-8",r_enc:"UTF-8",st:1,r_lt:1,t_koreng:1,
r_unicode:0,r_escape:1},queryParamName:"q",fnAutoCompleteCallback:$Fn(this._onResponseAutoComplete,this).bind()})},
_onResponseAutoComplete:function(oResponse){if(!oResponse){this._hideAutoCompleteArea();return}var aAutoCompleteResult=
this._getAutoCompleteResult(oResponse.items);this._refreshAutoCompleteArea(aAutoCompleteResult)},
_getAutoCompleteResult:function(aResult){if(!aResult||aResult.length<2)return null;var aAutoCompleteResult=
[];var aOriginalQueryResult=aResult[0];var nOriginalResultCount=aOriginalQueryResult.length;for(var i=
0;i<nOriginalResultCount;i++){var aResultItem=aOriginalQueryResult[i];if(!aResultItem||aResultItem.length<
1)continue;aAutoCompleteResult.push(aResultItem[0])}if(aAutoCompleteResult.length>0)return aAutoCompleteResult;
var aRevisedQueryResult=aResult[1];var nRevisedResultCount=aRevisedQueryResult.length;for(var j=0;j<nRevisedResultCount;j++){var aResultItem=
aRevisedQueryResult[j];if(!aResultItem||aResultItem.length<1)continue;aAutoCompleteResult.push(aResultItem[0])}return aAutoCompleteResult.length<
1?null:aAutoCompleteResult},
_refreshAutoCompleteArea:function(aResult){if(!aResult||!this._wElement["tagAutoCompleteArea"]){this._hideAutoCompleteArea();
return}this._wElement["tagAutoCompleteArea"].html(this._wTemplate["tagAutoCompleteListItem"].process({result:aResult}));
this._wElement["tagAutoCompleteArea"].show()},
_hideAutoCompleteArea:function(){if(!this._wElement["tagAutoCompleteArea"])return;this._wElement["tagAutoCompleteArea"].html("");
if(this._wElement["tagAutoCompleteArea"].visible())this._wElement["tagAutoCompleteArea"].hide()},
_onInputContents:function(we){this._refreshTagArea()},
_onKeyupContents:function(we){this._refreshTagArea()},
_onPasteContents:function(we){if(this._oTimeoutForPaste)clearTimeout(this._oTimeoutForPaste);this._oTimeoutForPaste=
setTimeout($Fn(function(){this._refreshTagArea()},this).bind(),300)},
_refreshTagArea:function(){var aTagList=this._getTagList();if(this._bHasHash)this._refreshHashtagBlockArea(aTagList);
this._refreshTagList(aTagList)},
_onScrollContents:function(we){this._adjustSizeAndPositionOfHashtagBlockArea()},
_onResizeWindow:function(we){this._adjustSizeAndPositionOfHashtagBlockArea()},
_refreshHashtagBlockArea:function(aTagList){if(!this._wElement["hashtagBlockArea"])return;if(!this._wElement["hashtagBlockArea"].visible())this._wElement["hashtagBlockArea"].show();
var sContents=this._oElement["contents"].value;sContents=$S(sContents).escapeHTML().toString();sContents=
sContents.replace(/\n/g,"\x3cbr\x3e");sContents=sContents+"\x3cbr\x3e";this._wElement["hashtagBlockArea"].html(sContents);
if(aTagList&&aTagList.length>0){var aSortedTagListByLength=this._getSortedTagListByLengthDesc(aTagList);
if(aSortedTagListByLength&&aSortedTagListByLength.length>0){var nLengthOfSortedTagListByLength=aSortedTagListByLength.length;
for(var i=0;i<nLengthOfSortedTagListByLength;i++){var sTag=aSortedTagListByLength[i];if(!sTag)continue;
this._makeHashtagBlock(this._oElement["hashtagBlockArea"],"#"+sTag)}}}this._adjustSizeAndPositionOfHashtagBlockArea()},
_makeHashtagBlock:function(elContents,sTag){if(!elContents||!sTag)return;for(var oNode=elContents.firstChild;oNode!=
null;oNode=oNode.nextSibling)if(oNode.nodeType==3){var nIndexOfHashtag=oNode.data.toLowerCase().indexOf(sTag.toLowerCase());
if(nIndexOfHashtag>-1){var oReplacementNode=oNode.splitText(nIndexOfHashtag);if(oReplacementNode.length>
sTag.length)oReplacementNode.splitText(sTag.length);var oCreatedHashtagNode=this._createHashtagBlockNode(oReplacementNode.cloneNode(true));
if(oCreatedHashtagNode)oReplacementNode.parentNode.replaceChild(oCreatedHashtagNode,oReplacementNode)}}else if(oNode.nodeType==
1&&oNode.tagName.toLowerCase()!=="span"&&oNode.childNodes&&oNode.childNodes.length>0)this._makeHashtagBlock(oNode,
sTag)},
_createHashtagBlockNode:function(oNode){if(!oNode)return oNode;var oHashtagBlockNode=document.createElement("span");
oHashtagBlockNode.appendChild(oNode);return oHashtagBlockNode},
_getSortedTagListByLengthDesc:function(aTagList){if(!aTagList||aTagList.length<1)return aTagList;var oTagLengthMap=
{};var aTagLengthList=[];var nLengthOfTagList=aTagList.length;for(var i=0;i<nLengthOfTagList;i++){var sTag=
aTagList[i];if(!sTag)continue;var nLengthOfTag=sTag.length;if(!oTagLengthMap[nLengthOfTag]){oTagLengthMap[nLengthOfTag]=
new $A;oTagLengthMap[nLengthOfTag].push(sTag);aTagLengthList.push(nLengthOfTag)}else if(!oTagLengthMap[nLengthOfTag].has(sTag))oTagLengthMap[nLengthOfTag].push(sTag)}var nLengthOfTagLengthList=
aTagLengthList.length;if(nLengthOfTagLengthList<1)return aTagList;aTagLengthList.sort(function(a,b){return a-
b});
var aSortedTagListByLength=[];for(var i=nLengthOfTagLengthList-1;i>=0;i--){var nTagLength=aTagLengthList[i];
var oSameLengthTagList=oTagLengthMap[nTagLength];var nLengthOfSameLengthTagList=oSameLengthTagList.length();
for(var j=0;j<nLengthOfSameLengthTagList;j++)aSortedTagListByLength.push(oSameLengthTagList.get(j))}return aSortedTagListByLength},
_adjustSizeAndPositionOfHashtagBlockArea:function(){if(!this._wElement["hashtagBlockArea"])return;this._wElement["hashtagBlockArea"].width(this._wElement["contents"].width());
this._wElement["hashtagBlockArea"].height(this._wElement["contents"].height());this._wElement["hashtagBlockArea"].$value().scrollTop=
this._oElement["contents"].scrollTop},
_onFocusTagInput:function(we){if(this._isOverlengthMaxTagCount()){alert(this.MESSAGE.MAX_TAG_COUNT_ERROR);
this._oElement["tagInput"].blur();return}if(this._wElement["tagInputWrapper"])this._wElement["tagInputWrapper"].addClass("focus");
nhn.Kin.scrollToPosition(0,this._wElement["tagInput"].offset().top-10)},
_onBlurTagInput:function(we){if(this._wElement["tagInputWrapper"])this._wElement["tagInputWrapper"].removeClass("focus")},
_onInputTagInput:function(we){this._setTagButton(this._oElement["tagInput"].value)},
_onKeyupTagInput:function(we){var sTagInputValue=this._oElement["tagInput"].value;if(!this._bIsSupportOninputEvent)this._setTagButton(sTagInputValue);
var nKeyCode=we.key().keyCode;if(nKeyCode==13)this._addTag(sTagInputValue,true)},
_setTagButton:function(sTagInputValue){if(sTagInputValue)this._showTagAddBtn();else this._showTagHelpBtn()},
_onClickTagList:function(we){var el=we.element;if(!el){we.stop();return}var sTagName=el.tagName.toLowerCase();
if(!/(?:button|i)/i.test(sTagName)){we.stop();return}if(sTagName==="li"){we.stop();return}if(sTagName===
"i")el=el.parentNode;if(el.tagName.toLowerCase()==="button"&&$Element(el).hasClass("_tagDelete")){var sDeleteTag=
nhn.Kin.extractParam(el);if(!sDeleteTag){we.stop();return}this._deleteTag(sDeleteTag);if(!this._isIncludedHashtagBlackList(sDeleteTag))this._aHashtagBlackList.push(sDeleteTag);
this._refreshTagArea()}we.stop()},
_onClickTagAutoCompleteList:function(we){if(!this._oElement["tagInput"]){we.stop();return}var el=we.element;
if(!el){we.stop();return}var sTagName=el.tagName.toLowerCase();if(!/(?:li|button)/i.test(sTagName)){we.stop();
return}if(sTagName==="li")el=$$.getSingle("button._autoCompletedTag",el);var sAutoCompletedTag=el.innerHTML;
if(!sAutoCompletedTag){we.stop();return}sAutoCompletedTag=this._removeHash(sAutoCompletedTag);this._oElement["tagInput"].value=
sAutoCompletedTag;this._addTag(this._oElement["tagInput"].value,false)},
_onClickTagBtn:function(we){var el=we.element;if(!el){we.stop();return}var sTagName=el.tagName.toLowerCase();
if(!/(?:a|button|i)/i.test(sTagName)){we.stop();return}if(sTagName==="i")el=el.parentNode;var wel=$Element(el);
if(el.tagName.toLowerCase()==="a"&&wel.hasClass("_tagHelpBtn")){if(this._oTimeoutForShowLayer)clearTimeout(this._oTimeoutForShowLayer);
this._oTimeoutForShowLayer=setTimeout($Fn(function(){this._showTagHelpLayer()},this).bind(),300)}else if(el.tagName.toLowerCase()===
"button"&&wel.hasClass("_tagAddBtn"))if(this._oElement["tagInput"])this._addTag(this._oElement["tagInput"].value);
we.stop()},
_onClickTagHelpLayer:function(we){var el=we.element;if(!el||!/(?:a|button)/i.test(el.tagName.toLowerCase())||
!$Element(el).hasClass("_close")){we.stop();return}this._hideTagHelpLayer();we.stop()},
_showTagHelpLayer:function(){if(!this._wElement["tagHelpLayerArea"])return;if(!this._wElement["tagHelpLayerArea"].visible())this._wElement["tagHelpLayerArea"].show();
this._adjustPositionOfTagHelpLayer()},
_adjustPositionOfTagHelpLayer:function(){var welTagHelpLayer=$Element("tag_help_layer");if(welTagHelpLayer){var nLayerTop=
($Document(document).clientSize().height-welTagHelpLayer.height())/2;welTagHelpLayer.css({"top":nLayerTop,
"position":"fixed"})}},
_hideTagHelpLayer:function(){if(!this._wElement["tagHelpLayerArea"])return;if(this._wElement["tagHelpLayerArea"].visible())this._wElement["tagHelpLayerArea"].hide()},
_addTag:function(sInputTagValue,bKeepFocus){if(!this._oElement["tagInput"])return;this._hideAutoCompleteArea();
this._validateTagInputValue(sInputTagValue,true);if(!bKeepFocus||bKeepFocus&&this._isOverlengthMaxTagCount()){this._showTagHelpBtn();
this._oElement["tagInput"].blur()}},
_validateTagInputValue:function(sInputTagValue,bShowErrorMessage){if(!this._oElement["tagInput"])return;
if(this._isOverlengthMaxTagCount()){if(bShowErrorMessage)alert(this.MESSAGE.MAX_TAG_COUNT_ERROR);return}if(!sInputTagValue||
!$S(sInputTagValue).trim().toString()){if(bShowErrorMessage)alert(this.MESSAGE.EMPTY_TAG_ERROR);return}var aInputTagList=
sInputTagValue.match(this._regexpForTag);if(!aInputTagList||aInputTagList.length<1){if(bShowErrorMessage)alert(this.MESSAGE.TAG_CONTAINS_SPECIAL_CHAR_ERROR);
return}var nLengthOfInputTagList=aInputTagList.length;for(var i=0;i<nLengthOfInputTagList;i++){if(this._isOverlengthMaxTagCount()){if(bShowErrorMessage)alert(this.MESSAGE.MAX_TAG_COUNT_ERROR);
break}var sInputTag=aInputTagList[i];if(!sInputTag)continue;if(sInputTag.length>this.MAX_TAG_LENGTH)sInputTag=
this._substrTagByMaxTagLength(sInputTag);if(!this._isAlreadyIncludedTag(sInputTag))this._aTagList.push(sInputTag)}this._oElement["tagInput"].value=
"";this._refreshTagArea()},
_showTagAddBtn:function(){if(this._wElement["tagBtnWrapper"]&&!this._wElement["tagBtnWrapper"].hasClass("act"))this._wElement["tagBtnWrapper"].addClass("act")},
_showTagHelpBtn:function(){if(this._wElement["tagBtnWrapper"]&&this._wElement["tagBtnWrapper"].hasClass("act"))this._wElement["tagBtnWrapper"].removeClass("act")},
_refreshTagList:function(aTagList){if(!this._wElement["tagListArea"]||!this._wTemplate["tagListItem"])return;
this._wElement["tagListArea"].html("");if(!aTagList||aTagList.length<1){if(this._wElement["tagListArea"].visible())this._wElement["tagListArea"].hide();
return}this._wElement["tagListArea"].html(this._wTemplate["tagListItem"].process({result:aTagList}));
if(!this._wElement["tagListArea"].visible())this._wElement["tagListArea"].show()},
_getTagList:function(){if(this._aTagList.length==this.MAX_TAG_COUNT)return this._aTagList;else if(this._aTagList.length>
this.MAX_TAG_COUNT)return this._aTagList.slice(0,this.MAX_TAG_COUNT);else{this._findHashtag();var aTempHashtagList=
[];var nRemaningCount=this.MAX_TAG_COUNT-this._aTagList.length;var nLengthOfHashtagList=this._aHashtagList.length;
for(var i=0;i<nLengthOfHashtagList;i++){var sHashtag=this._aHashtagList[i];if(!sHashtag)continue;aTempHashtagList.push(sHashtag);
if(nRemaningCount==aTempHashtagList.length)break}return this._aTagList.concat(aTempHashtagList)}},
getTagListStr:function(){return this._getTagList().toString()},
_findHashtag:function(){this._aHashtagList=[];if(!this._oElement["contents"])return;var sContents=this._oElement["contents"].value;
if(!sContents)return;this._bHasHash=this._bHasHash||sContents.indexOf("#")>-1;if(!this._bHasHash)return;
var aTempHashtagList=sContents.match(this._regexpForHashtag);if(!aTempHashtagList)return;var nLengthOfTempHashtagList=
aTempHashtagList.length;for(var i=0;i<nLengthOfTempHashtagList;i++){var sHashtag=aTempHashtagList[i];
if(!sHashtag)continue;sHashtag=this._removeHash(sHashtag);var aTagListExceptSpecialChars=sHashtag.match(this._regexpForHashtagExceptSpecialChars);
var bHasOnlySpecialChars=!aTagListExceptSpecialChars||aTagListExceptSpecialChars.length<1;if(bHasOnlySpecialChars)continue;
if(this._isIncludedHashtagBlackList(sHashtag)||this._isAlreadyIncludedTag(sHashtag))continue;this._aHashtagList.push(sHashtag)}},
processAttachTag:function(){var aTagList=this._getTagList();var nLengthOfTagList=aTagList.length;for(var i=
0;i<nLengthOfTagList;i++){var sTag=aTagList[i];if(!sTag)continue;this._setAttachTag(sTag)}},
_setAttachTag:function(sTag){var welInput=$Element("\x3cinput\x3e");welInput.attr("type","hidden");welInput.attr("name",
"tag");welInput.attr("value",sTag);this._wElement["form"].append(welInput)},
_deleteTag:function(sTag){var nIndexOfTagList=this._indexOfIgnoreCase(sTag,this._aTagList);if(nIndexOfTagList>
-1)this._aTagList.splice(nIndexOfTagList,1)},
_removeHash:function(sTag){return sTag.substr(1)},
_substrTagByMaxTagLength:function(sTag){return sTag.length>this.MAX_TAG_LENGTH?sTag.substr(0,this.MAX_TAG_LENGTH):
sTag},
_isAlreadyIncludedTag:function(sTag){return this._indexOfIgnoreCase(sTag,this._aTagList)>-1||this._indexOfIgnoreCase(sTag,
this._aHashtagList)>-1},
_isOverlengthMaxTagCount:function(){return this._aTagList.length+this._aHashtagList.length>=this.MAX_TAG_COUNT},
_isIncludedHashtagBlackList:function(sTag){return this._indexOfIgnoreCase(sTag,this._aHashtagBlackList)>
-1},
_indexOfIgnoreCase:function(sValue,aList){if(!sValue||!aList||aList.length<1)return-1;sValue=sValue.toLowerCase();
var nLengthOfList=aList.length;for(var i=0;i<nLengthOfList;i++){var sCompareValue=aList[i];if(!sCompareValue)continue;
if(sCompareValue.toLowerCase()===sValue)return i}return-1},
_destroy:function(){if(nhn.Kin.OS.ios||nhn.Kin.OS.android)jindo.m.unbindRotate(this._fnOnResizeWindow);
if(this._wEvent){if(this._wEvent["inputContents"])this._wEvent["inputContents"].detach(this._oElement["contents"],
"input");if(this._wEvent["keyupContents"])this._wEvent["keyupContents"].detach(this._oElement["contents"],
"keyup");if(this._wEvent["pasteContents"])this._wEvent["pasteContents"].detach(this._oElement["contents"],
"paste");if(this._wEvent["scrollContents"])this._wEvent["scrollContents"].detach(this._oElement["contents"],
"scroll");if(this._wEvent["focusTagInput"])this._wEvent["focusTagInput"].detach(this._oElement["tagInput"],
"focus");if(this._wEvent["blurTagInput"])this._wEvent["blurTagInput"].detach(this._oElement["tagInput"],
"blur");if(this._wEvent["inputTagInput"])this._wEvent["inputTagInput"].detach(this._oElement["tagInput"],
"input");if(this._wEvent["keyupTagInput"])this._wEvent["keyupTagInput"].detach(this._oElement["tagInput"],
"keyup");if(this._wEvent["clickTagListArea"])this._wEvent["clickTagListArea"].detach(this._wElement["tagListArea"].$value(),
"click");if(this._wEvent["clickTagBtnWrapper"])this._wEvent["clickTagBtnWrapper"].detach(this._wElement["tagBtnWrapper"].$value(),
"click");if(this._wEvent["clickTagAutoCompleteArea"])this._wEvent["clickTagAutoCompleteArea"].detach(this._wElement["tagAutoCompleteArea"].$value(),
"click");if(this._wEvent["clickTagHelpLayerArea"])this._wEvent["clickTagHelpLayerArea"].detach(this._wElement["tagHelpLayerArea"].$value(),
"click");if(this._wEvent["resize"])this._wEvent["resize"].detach(window,"resize");if(this._wEvent["pageshow"])this._wEvent["pageshow"].detach(window,
"pageshow")}this._wElement=this._wTemplate=this._wEvent=this._oOption=this._fnOnResizeWindow=this._bHasHash=
null;this._regexpForTag=this._regexpForHashtag=this._regexpForHashtagExceptSpecialChars=null;this._aTagList=
this._aHashtagList=this._aHashtagBlackList=null}});
