"undefined"==typeof MainHistory&&(MainHistory={}),MainHistory.Common=function(e){var t=MainHistory.env.url,a=(MainHistory.env.panel,null);return{init:function(){a=setInterval(function(){isOnload&&(clearInterval(a),setTimeout(function(){try{e.existFile&&(MainHistory.Nav.init(),MainHistory.Contents.init())}catch(e){}},50))},100)},makeUrl:function(e,a){return t+"?menu="+e+(a?"&date="+a:"")}}}(MainHistory.env),"undefined"==typeof MainHistory&&(MainHistory={}),MainHistory.Nav=function(e){var t=null,a=$A(e.revisions),n=a.indexOf(e.timestamp),i=null,r=null,l=null,s=function(){t=$Element($$.getSingle("._HH_NAV")),today=new $Date,i=c(e.timestamp),0==e.revisions.length&&"LAST"==e.timestampMode&&today.format("Ymd")>e.timestamp&&(i=c(today)),r=c(n>0?a.get(n-1):new $Date(i.time()-864e5)),l=c(n<a.length()-1?a.get(n+1):new $Date(i.time()+864e5)),o(),m(),_()},o=function(){if(t.query("._HH_REVISION_DATE").text(i.format("Y.m.d D")),0==e.revisions.length&&"LAST"==e.timestampMode&&today.format("Ymd")>e.timestamp)return void t.query("._HH_REVISION_TIME").text("00:00 ~ "+i.format("H:i"));n<a.length()-1?t.query("._HH_REVISION_TIME").text(i.format("H:i")+" ~ "+l.format("H:i")):i.format("Ymd")<(new $Date).format("Ymd")?t.query("._HH_REVISION_TIME").text(i.format("H:i")+" ~ 00:00"):t.query("._HH_REVISION_TIME").text(i.format("H:i")+" ~ "+(new $Date).format("H:i"))},m=function(){i.format("Ymd")>e.initCrawlingDate&&t.query("._HH_REVISION_PREV").addClass("prev_move").data("revision",new $Date(i.time()-864e5).format("Ymd")),new $Date(i.time()+864e5).format("Ymd")<(new $Date).format("YmdHs")&&t.query("._HH_REVISION_NEXT").addClass("next_move").data("revision",new $Date(i.time()+864e5).format("Ymd"))},_=function(){t.delegate("click","[data-revision]",function(t){date=$Element(t.delegatedElement).data("revision"),location.href=date!=(new $Date).format("Ymd")?MainHistory.Common.makeUrl(e.panel,date):MainHistory.Common.makeUrl(e.panel)}),t.delegate("click","._HH_REVISION_TOGGLE_CALENDAR",function(e){$Element($$.getSingle("._HH_CALENDAR")).show(),t.hide(),MainHistory.Calendar.init(),e.stop()});var a=$Element($$.getSingle("._HH_HEADER")),n=a.offset().top;$Element(window).attach("scroll",function(){n<document.body.scrollTop?a.addClass("hw_fixed"):a.removeClass("hw_fixed")})},c=function(e){var t=new $Date;return e instanceof $Date?t=e:"string"==typeof e&&(t=new $Date(e.substr(0,4),e.substr(4,2)-1,e.substr(6,2),e.substr(8,2),e.substr(10,2))),t.name("s_day",["일","월","화","수","목","금","토"]),t};return{init:s}}(MainHistory.env),"undefined"==typeof MainHistory&&(MainHistory={}),MainHistory.Calendar=function(e){var t=null,a=!1,n=null,i=null,r=null,l=null,s=null,o=null,m=null,_=null,c=function(e){d(e),u(),p(),$Element($$.getSingle("._HH_DIMMED")).show()},d=function(a){t=$Element($$.getSingle("._HH_CONTENT ._HH_CALENDAR")),n=new $Template("_HH_CALENDAR_TEMPLATE"),i=$Template("_HH_REVISION_LIST_TEMPLATE"),r=a||e.timestamp,r<e.initCrawlingDate&&(r=e.initCrawlingDate),l=r.substr(0,4),s=r.substr(4,2),o=r.substr(6,2),_=new $Date,m=new $Date(l,Number.parseInt(s)-1,o),!a&&(_.compare(m,"d")>0||0==e.revisions.length&&"LAST"==e.timestampMode&&_.format("Ymd")>e.timestamp)&&(m=_,r=m.format("Ymd"),l=_.year().toString(),s=_.month()+1,o=_.date().toString())},u=function(){var a=e.initCrawlingDate,i=a.substr(0,4)+"."+a.substr(4,2)+"."+a.substr(6,2);t.html(n.process({year:m.format("Y"),month:m.format("m"),todayDate:_.format("Ymd"),calendar:C(),initHistoryDate:i,prevMonthClass:m.format("Ym")>e.initCrawlingDate>0?"prev_move":"",nextMonthClass:m.compare(_,"m")>0?"next_move":"",prevMonthDate:new $Date(l,Number.parseInt(s)-2,o).format("Ymd"),nextMonthDate:new $Date(l,Number.parseInt(s),o).format("Ymd")})),H(m.format("Ymd"))},H=function(t){if(t=t.substr(0,8),currTimestamp=0==e.revisions.length&&"LAST"==e.timestampMode&&_.format("Ymd")>e.timestamp?(new $Date).format("Ymd"):e.timestamp.substr(0,8),currTimestamp==t)f(MainHistory.env.revisions);else{var a=e.url+"contents/"+e.panel+"/"+t.substr(0,4)+"/"+t.substr(4,4)+"/update.dat";new $Ajax(a,{timeout:1,onload:function(e){f($A(e.text().split(",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0}).$value())}}).request()}},f=function(a){if(0==a.length)return void t.query("._HH_REVISION_LIST").html("");var n=$A(a).map(function(t){return{revision:t,time:t.substr(8,2)+":"+t.substr(10,2),time_class:t==MainHistory.env.timestamp?"selected":"",url:MainHistory.Common.makeUrl(e.panel,t)}}).$value();0==$A(n).filter(function(e){return"selected"==e.time_class}).length()>0&&(n[n.length-1].time_class="selected"),t.query("._HH_REVISION_LIST").html(i.process({historyList:n})),t.query(".scroll-container").width(79*n.length+30),E()},E=function(){var e=t.query(".scroll-area"),a=new jindo.m.Scroll(e,{nHeight:36,bActivateOnload:!0,bUseHScroll:!0,bUseVScroll:!1,bUseScrollbar:!1,bUseMomentum:!0,bUseBounce:!0,nFlickThreshold:30,bUseHighlight:!1,nDuration:250,bUseCss3d:!1,bUseTimingFunction:!0,nZIndex:0}),n=t.query(".selected")||t.query(".scroll-panel:last-child ._HH_CALENDAR_REVISION");n&&n.offset().left>50&&a.scrollTo(n.offset().left-50,0)},p=function(){1!=a&&(t.delegate("click","._HH_CALENDAR_TODAY, ._HH_CALENDAR_PREV.prev_move, ._HH_CALENDAR_NEXT.next_move",function(e){e.stop(),c($Element(e.delegatedElement).data("date"))}),t.delegate("click","._HH_CALENDAR_DAY",function(e){e.stop();var a=$Element(e.delegatedElement);if(!a.test("[data-disabled=disabled]")){t.query(".day_item.select").removeClass("select"),a.parent().addClass("select"),H(a.data("date"))}}),t.delegate("click","._HH_CALENDAR_REVISION",function(e){e.stop();var a=$Element(e.delegatedElement);t.query("._HH_CALENDAR_REVISION.selected").removeClass("selected"),a.addClass("selected")}),t.delegate("click","._HH_OK, ._HH_CANCLE",function(e){$Element(e.delegatedElement).test("._HH_OK")&&(null!=$$.getSingle("._HH_CALENDAR_REVISION.selected")?location.href=$Element($$.getSingle("._HH_CALENDAR_REVISION.selected")).attr("href"):location.href=$Element($$.getSingle("._HH_CALENDAR .day_item.select ._HH_CALENDAR_DAY")).attr("href")),t.hide(),$Element($$.getSingle("._HH_DIMMED")).hide(),$Element($$.getSingle("._HH_NAV")).show()}),$Element($$.getSingle("._HH_DIMMED")).attach("click",function(){t.query("._HH_CANCLE").fireEvent("click")}),a=!0)},C=function(){for(var t=$A([]),a=$Date(l,Number.parseInt(s),0).date()+1,n=$Date(l,Number.parseInt(s)-1,1).day()-1,i=(7-(n+a)%7)%7,r=0;r<n+a+i;r++)if(r-1<n||r>=n+a)t.push({});else{var o=new $Date(l,Number.parseInt(s)-1,r-n),c={url:o.format("Ymd")==(new $Date).format("Ymd")?MainHistory.Common.makeUrl(e.panel):MainHistory.Common.makeUrl(e.panel,o.format("Ymd")),date:o.format("Ymd"),day:o.date(),day_class:"",disabled:""};m.format("Ymd")==o.format("Ymd")&&(c.day_class="select"),(o.format("Ymd")>_.format("Ymd")||o.format("Ymd")<e.initCrawlingDate)&&(c.day_class="dimmed",c.disabled="disabled",c.url="#"),t.push(c)}return t.$value()};return{init:c}}(MainHistory.env),"undefined"==typeof MainHistory&&(MainHistory={}),MainHistory.Contents=function(e){var t=(e.url,e.panel),a=$A([".id_uio_cd_fbanner",".id_cui_webtoonbboom","._MM_CARGAME_CHOICE_BANNER",".id_cui_cartech[index=0]",".id_uio_cd_gender","._MM_AIRS_CONTAINER","[data-tags=구독추천채널]",".id_cui_dictionary","._MM_MYPLACE_LOCATION_BTN",".id_uio_cd_stock",".id_cui_placetab",".id_cui_placeweather","._MM_CONTENT_HISTORY_BANNER"]),n=$Template('<div class="grid1 id_cui_placetab MM_HISTORY_FORCE_SHOW"><div class="cui_placetab cp_locale"><div class="cp_title_wrap"><h3 class="cp_title">플레이스<span class="cp_ico_beta"><span class="blind">Beta</span></span></h3><p class="cp_t" id="place_location_desc">지역은 계속 확대됩니다.</p></div><div class="cp_tablist"><ul class="cp_l">{for place in placeList}<li class="cp_item"><a href="{=place.href}" class="cp_a {=place.class}">{=place.label}</a></li>{/for}</ul></div></div></div>'),i={placeList:[{label:"서울",href:MainHistory.Common.makeUrl("PLACE_09"),"class":"PLACE_09"==t?"cp_aon":""},{label:"경기",href:MainHistory.Common.makeUrl("PLACE_02"),"class":"PLACE_02"==t?"cp_aon":""},{label:"강원",href:MainHistory.Common.makeUrl("PLACE_01"),"class":"PLACE_01"==t?"cp_aon":""},{label:"제주",href:MainHistory.Common.makeUrl("PLACE_14"),"class":"PLACE_14"==t?"cp_aon":""},{label:"인천",href:MainHistory.Common.makeUrl("PLACE_11"),"class":"PLACE_11"==t?"cp_aon":""},{label:"부산",href:MainHistory.Common.makeUrl("PLACE_08"),"class":"PLACE_08"==t?"cp_aon":""},{label:"대전·세종·충남",href:MainHistory.Common.makeUrl("PLACE_07"),"class":"PLACE_07"==t?"cp_aon":""},{label:"충북",href:MainHistory.Common.makeUrl("PLACE_16"),"class":"PLACE_16"==t?"cp_aon":""}]},r=function(){var e=$Element("ct");a.forEach(function(t){$ElementList(e.queryAll(t)).hide()})},l=function(){0!=t.startsWith("PLACE_")&&$Element("ct").query(".grid1_wrap.brick-house .brick-vowel").prependHTML(n.process(i))};return{init:function(){r(),l()}}}(MainHistory.env);