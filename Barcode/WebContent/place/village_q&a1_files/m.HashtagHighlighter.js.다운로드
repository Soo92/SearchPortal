var HashtagHighlighter=$Class({HASHTAG_HIGHLIGHTING_CONTENTS_CLASS:"_hashtagHighlightingContents",HASHTAG_HIGHLIGHTING_CLASS:"hashtag",
CODE_HIGHLIGHTING_CLASS:"src_hglt",$init:function(){this._setEventListener();if(document.readyState===
undefined||document.readyState==="complete")this.initialize();else $Fn(this.initialize,this).attach(window,
"load")},
_setEventListener:function(){document.addEventListener("addHashtagHighlightingContents",$Fn(this._addHashtagHighlightingContentsCallback,
this).bind(),false)},
_addHashtagHighlightingContentsCallback:function(oCustomEvent){this.doHighlighting(oCustomEvent.addedHashtagHighlightingContentsList)},
initialize:function(){this.doHighlighting($$("div."+this.HASHTAG_HIGHLIGHTING_CONTENTS_CLASS,$("endArea")))},
doHighlighting:function(aElContentsList){if(!aElContentsList||aElContentsList.length<1)return;var nLengthOfContentsList=
aElContentsList.length;for(var i=0;i<nLengthOfContentsList;i++){var elContents=aElContentsList[i];if(!elContents)continue;
var sEncodedTagListStr=nhn.Kin.extractParam(elContents);if(!sEncodedTagListStr)continue;var aTagList=
sEncodedTagListStr.split(",");if(!aTagList||aTagList.length<1)continue;var nLengthOfTagList=aTagList.length;
for(var j=0;j<nLengthOfTagList;j++){var sTag=aTagList[j];if(!sTag)continue;aTagList[j]=decodeURIComponent(sTag)}var aSortedTagList=
this._getSortedTagListByLengthDesc(aTagList);var nLengthOfSortedTagList=aSortedTagList.length;for(var j=
0;j<nLengthOfSortedTagList;j++){var sTag="#"+aSortedTagList[j];if(!sTag)continue;this._makeHashtagLink(elContents,
sTag)}}},
_getSortedTagListByLengthDesc:function(aTagList){if(!aTagList||aTagList.length<1)return aTagList;var oTagLengthMap=
{};var aTagLengthList=[];var nLengthOfTagList=aTagList.length;for(var i=0;i<nLengthOfTagList;i++){var sTag=
aTagList[i];if(!sTag)continue;var nLengthOfTag=sTag.length;if(!oTagLengthMap[nLengthOfTag]){oTagLengthMap[nLengthOfTag]=
new $A;oTagLengthMap[nLengthOfTag].push(sTag);aTagLengthList.push(nLengthOfTag)}else if(!oTagLengthMap[nLengthOfTag].has(sTag))oTagLengthMap[nLengthOfTag].push(sTag)}var nLengthOfTagLengthList=
aTagLengthList.length;if(nLengthOfTagLengthList<1)return aTagList;aTagLengthList.sort(function(a,b){return a-
b});
var aSortedTagListByLength=[];for(var i=nLengthOfTagLengthList-1;i>=0;i--){var nTagLength=aTagLengthList[i];
var oSameLengthTagList=oTagLengthMap[nTagLength];var nLengthOfSameLengthTagList=oSameLengthTagList.length();
for(var j=0;j<nLengthOfSameLengthTagList;j++)aSortedTagListByLength.push(oSameLengthTagList.get(j))}return aSortedTagListByLength},
_makeHashtagLink:function(el,sTag){if(!el||!sTag)return;for(var oNode=el.firstChild;oNode!=null;oNode=
oNode.nextSibling)if(oNode.nodeType==3){var nIndexOfTag=oNode.data.toLowerCase().indexOf(sTag.toLowerCase());
if(nIndexOfTag>-1){var oReplacementNode=oNode.splitText(nIndexOfTag);if(oReplacementNode.length>sTag.length)oReplacementNode.splitText(sTag.length);
var oCreatedHashtagNode=this._createHashtagLinkNode(oReplacementNode.cloneNode(true));if(oCreatedHashtagNode)oReplacementNode.parentNode.replaceChild(oCreatedHashtagNode,
oReplacementNode)}}else if(oNode.nodeType==1&&oNode.tagName.toLowerCase()=="div"&&oNode.className==this.CODE_HIGHLIGHTING_CLASS)continue;
else if(oNode.nodeType==1&&!/(script|style)/i.test(oNode.tagName.toLowerCase())&&oNode.className!=this.HASHTAG_HIGHLIGHTING_CLASS&&
oNode.childNodes&&oNode.childNodes.length>0)this._makeHashtagLink(oNode,sTag)},
_createHashtagLinkNode:function(oNode){if(!oNode||!oNode.data||oNode.data.length<2)return oNode;var oHashtagNode=
document.createElement("a");oHashtagNode.className=this.HASHTAG_HIGHLIGHTING_CLASS;oHashtagNode.setAttribute("href",
"/mobile/tag/tagDetail.nhn?tag\x3d"+encodeURIComponent(oNode.data.substr(1)));oHashtagNode.setAttribute("onClick",
"nclk(this,'edq.tag','','');");oHashtagNode.appendChild(oNode);return oHashtagNode}});