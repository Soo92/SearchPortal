(function(c){var b="_nmplaceholder",f;
function a(g,j,h){g.val(j).addClass(b);
if(h){return
}try{g[0].selectionStart=0;
g[0].selectionEnd=0
}catch(i){}}function e(g){g.removeClass(b)
}function d(g){return g.hasClass(b)
}c.fn.M_placeHolder=function(h){if(!f){f=c("<input />")[0]
}var g=typeof h!=="string"?h:{};
this.each(function(){var m=c(this),l,i,k,n,j=null;
if(!g||!g.refresh){j=h||m.attr("placeholder")||"";
if(m.data("m-place-holded")!=="YES"||m.data("m-place-holder-text")!==j){m.data("m-place-holder-text",j);
if("placeholder" in f&&!c.browser.msie){m.attr("placeholder",j)
}else{l=function(){var o=c(this),p=c.trim(o.val());
if(p===""){a(o,j,true)
}else{if(p!==j){e(o)
}}};
i=function(){var o=c(this),q=c.trim(o.val());
if(q===""){a(o,j)
}else{if(q!==j){e(o)
}else{if(d(o)||q===j){try{this.selectionStart=0;
this.selectionEnd=0
}catch(p){}}}}};
k=function(){var o=c(this),p=c.trim(o.val());
if(d(o)){e(o);
o.val("").select()
}};
n=function(p){var o=c(this),p=p||window.event;
if(d(o)||o.val()===j){p.returnValue=false;
p.preventDefault&&p.preventDefault();
o.focus();
this.selectionStart=0;
this.selectionEnd=0
}};
this.onfocus=i;
this.onblur=l;
this.onkeydown=k;
this.onmousedown=n;
if(d(m)){a(m,j)
}if(this.value===""){a(m,j);
this.focus()
}else{if(this.value!==j){e(m)
}}}m.data("m-place-holded","YES")
}else{e(m);
if(m.is(":focus")){m.blur().focus()
}else{m.blur()
}}}});
return this
};
c.fn.M_removePlaceHolder=function(){if(!f){f=c("<input />")[0]
}this.each(function(){var g=c(this);
g.removeAttr("placeholder");
if(!("placeholder" in f)||c.browser.msie){this.onfocus=null;
this.onblur=null;
this.onkeydown=null;
this.onmousedown=null;
e(g)
}});
return this
}}(jQuery));
(function(d){var g=document.documentElement.clientTop;
var l=!!document.createRange;
var s=l?function(){return document.createRange()
}:function(){return document.body.createTextRange?document.body.createTextRange():null
};
var k=function(){var t=s(),u=!!t;
t=null;
k=function(){return u
};
return u
};
d.fn.M_ellipsis=function(t){if(!k()){return this
}t=j({bottom:0,right:0,batch:true},t);
if(!t.batch){t=j(t,{batch:false});
this.each(function(v,w){a([w],t)
})
}else{var u=Array.prototype.slice.call(this);
a(u,t)
}return this
};
function a(t,C){var y=[],v;
for(var x=0,B=t.length;
x<B;
x++){v=t[x];
var A=e(v.parentNode),A=j(A);
A.height+=C.bottom;
A.bottom+=C.bottom;
A.right+=C.right;
A.width+=C.right;
if(!r(e(v),A)){continue
}var z=d("<span></span>").text("...");
d(v).append("<br />").append(z);
var u=h(v,A,z[0]);
if(u){y.push(u)
}else{z.detach()
}}for(var x=0,B=y.length;
x<B;
x++){var w=y[x];
b(w.node,w.offset,w.tail)
}}var j=function(v,u){var w={};
u=u||{};
for(var t in v){w[t]=(t in u)?u[t]:v[t]
}return w
};
var c=function(x,t,z,y){var w,B=q(t);
x.setStart(B[0],0);
for(var v=0,A=B.length;
v<A;
v++){var u=B[v];
x.setEnd(u,u.textContent.length);
if(o(m(x),z,y)){w=u;
break
}}return w
};
var p=l?function(t,w,x,y){var v=w.textContent.length-1;
var u=n(0,v,function(z){t.setEnd(w,z);
return !o(m(t),x,y)
});
return u
}:function(t,w,x,y){var v=w.innerText.length-1;
t.moveToElementText(w);
var u=n(0,v,function(z){t.collapse();
t.moveEnd("character",z);
return !o(m(t),x,y)
});
return u
};
var h=l?function(x,y,v){var t=s();
var z=f(y,e(v));
var w=c(t,x,y,z);
if(!w){return null
}var u=p(t,w,y,z);
return{node:w,offset:u,tail:v}
}:function(w,x,v){var t=s(),y=f(x,e(v));
var u=p(t,w,x,y);
return{node:w,offset:u,tail:v}
};
var b=l?function(w,v,u){var t=s();
t.setStart(w,v);
t.setEnd(u,0);
t.deleteContents()
}:function(x,v,u){var t=s();
t.moveToElementText(x);
t.collapse();
t.moveStart("character",v);
t.collapse(false);
var w=s();
w.moveToElementText(u);
t.setEndPoint("EndToStart",w);
t.execCommand("Delete")
};
function f(v,u){var t=u.right-v.right,w=u.bottom-v.bottom;
return{left:u.left-(t+4),right:u.right-t,top:u.top-w,bottom:u.bottom-w,width:u.width,height:u.height}
}function o(w,v,x){var t=Number.MAX_VALUE;
w=("length" in w)?w:[w];
x=x?x:{left:t,bottom:t,top:t};
var u=w[w.length-1];
if(u.bottom>v.bottom){return true
}else{if(u.bottom>x.top&&u.right>x.left){return true
}}return false
}function r(t,u){return(t.bottom>u.bottom||t.right>u.right)
}function q(w,y){var x,y=y||[],v=w.childNodes;
for(var u=0,t=v.length;
u<t;
u++){x=v[u];
if(x.nodeType==3){y.push(x)
}else{q(x,y)
}}return y
}function n(v,t,x){var u=((t-v)<=1);
if(u){return((v==t)||x(t))?t:v
}else{var w=Math.floor((v+t)/2);
if(x(w)){return n(w,t,x)
}else{return n(v,w-1,x)
}}}function e(t){var u=t.getBoundingClientRect();
return i(u)
}function m(x){var u=x.getClientRects(),v=[];
for(var w=0,t=u.length;
w<t;
w++){v.push(i(u[w]))
}return v
}function i(t){return{left:t.left-g,top:t.top-g,right:t.right-g,bottom:t.bottom-g,width:t.right-t.left,height:t.bottom-t.top}
}}(jQuery));
/*!
 * jQuery Cookie Plugin v1.2
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(f,b,g){var a=/\+/g;
function e(h){return h
}function c(h){return decodeURIComponent(h.replace(a," "))
}var d=f.cookie=function(n,m,r){if(m!==g){r=f.extend({},d.defaults,r);
if(m===null){r.expires=-1
}if(typeof r.expires==="number"){var o=r.expires,q=r.expires=new Date();
q.setDate(q.getDate()+o)
}m=d.json?JSON.stringify(m):String(m);
return(b.cookie=[encodeURIComponent(n),"=",d.raw?m:encodeURIComponent(m),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join(""))
}var h=d.raw?e:c;
var p=b.cookie.split("; ");
for(var l=0,k;
(k=p[l]&&p[l].split("="));
l++){if(h(k.shift())===n){var j=h(k.join("="));
return d.json?JSON.parse(j):j
}}return null
};
d.defaults={};
f.removeCookie=function(i,h){if(f.cookie(i)!==null){f.cookie(i,null,h);
return true
}return false
}})(jQuery,document);
(function(e){var h=[],f=e(document),c=navigator.userAgent.toLowerCase(),g=e(window),a=[];
var b={ieQuirks:null,msie:/msie/.test(c)&&!/opera/.test(c),opera:/opera/.test(c)};
b.ie6=b.msie&&/msie 6./.test(c)&&typeof window.XMLHttpRequest!=="object";
b.ie7=b.msie&&/msie 7.0/.test(c);
e.modal=function(i,d){return e.modal.impl.init(i,d)
};
e.modal.close=function(){e.modal.impl.close()
};
e.modal.focus=function(d){e.modal.impl.focus(d)
};
e.modal.setContainerDimensions=function(){e.modal.impl.setContainerDimensions()
};
e.modal.setPosition=function(){e.modal.impl.setPosition()
};
e.modal.update=function(d,i){e.modal.impl.update(d,i)
};
e.fn.modal=function(d){return e.modal.impl.init(this,d)
};
e.modal.defaults={appendTo:"body",focus:true,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:false,autoPosition:true,zIndex:1000,close:true,closeHTML:'<a href="#" class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:true,overlayClose:false,fixed:true,position:null,persist:false,modal:true,onOpen:null,onShow:null,onClose:null};
e.modal.impl={d:{},init:function(k,d){var j=this;
var i=null;
if(j.d.data){return false
}b.ieQuirks=b.msie&&!e.support.boxModel;
j.o=e.extend({},e.modal.defaults,d);
j.zIndex=j.o.zIndex;
j.occb=false;
if(typeof k==="object"){k=k instanceof e?k:e(k);
j.d.placeholder=false;
if(k.parent().parent().size()>0){k.before(e("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"}));
j.d.placeholder=true;
j.display=k.css("display");
if(!j.o.persist){j.d.orig=k.clone(true)
}}}else{if(typeof k==="string"&&(i=e(k)).length>0){k=i
}else{if(typeof k==="string"||typeof k==="number"){k=e("<div></div>").html(k)
}else{alert("SimpleModal Error: Unsupported data type: "+typeof k);
return j
}}}e.when(j.create(k)).done(e.proxy(j.open,this));
k=null;
if(e.isFunction(j.o.onShow)){j.o.onShow.apply(j,[j.d])
}return j
},create:function(i){var d=this;
d.getDimensions();
if(d.o.modal&&b.ie6){d.d.iframe=e('<iframe src="javascript:false;"></iframe>').css(e.extend(d.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:a[0],width:a[1],zIndex:d.o.zIndex,top:0,left:0})).appendTo(d.o.appendTo)
}d.d.overlay=e("<div></div>").attr("id",d.o.overlayId).addClass("simplemodal-overlay").css(e.extend(d.o.overlayCss,{display:"none",opacity:d.o.opacity/100,height:d.o.modal?h[0]:0,width:d.o.modal?h[1]:0,position:"fixed",left:0,top:0,zIndex:d.o.zIndex+1})).appendTo(d.o.appendTo);
d.d.container=e("<div></div>").attr("id",d.o.containerId).addClass("simplemodal-container").css(e.extend({position:d.o.fixed?"fixed":"absolute"},d.o.containerCss,{display:"none",zIndex:d.o.zIndex+2})).append(d.o.close&&d.o.closeHTML?e(d.o.closeHTML).addClass(d.o.closeClass):"").appendTo(d.o.appendTo);
d.d.wrap=e("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(d.d.container);
d.d.data=i.attr("id",i.attr("id")||d.o.dataId).addClass("simplemodal-data").css(e.extend(d.o.dataCss,{display:"none"})).appendTo("body");
i=null;
d.setContainerDimensions();
d.d.data.appendTo(d.d.wrap);
if(b.ie6||b.ieQuirks){d.fixIE()
}return d.d.wrap.delay(10)
},bindEvents:function(){var d=this;
e("."+d.o.closeClass).bind("click.simplemodal",function(i){i.preventDefault();
d.close()
});
if(d.o.modal&&d.o.close&&d.o.overlayClose){d.d.overlay.bind("click.simplemodal",function(i){i.preventDefault();
d.close()
})
}f.bind("keydown.simplemodal",function(i){if(d.o.modal&&i.keyCode===9){d.watchTab(i)
}else{if((d.o.close&&d.o.escClose)&&i.keyCode===27){i.preventDefault();
d.close()
}}});
g.bind("resize.simplemodal orientationchange.simplemodal",function(){d.getDimensions();
d.o.autoResize?d.setContainerDimensions():d.o.autoPosition&&d.setPosition();
if(b.ie6||b.ieQuirks){d.fixIE()
}else{if(d.o.modal){d.d.iframe&&d.d.iframe.css({height:a[0],width:a[1]});
d.d.overlay.css({height:h[0],width:h[1]})
}}})
},unbindEvents:function(){e("."+this.o.closeClass).unbind("click.simplemodal");
f.unbind("keydown.simplemodal");
g.unbind(".simplemodal");
this.d.overlay.unbind("click.simplemodal")
},fixIE:function(){var d=this,i=d.o.position;
e.each([d.d.iframe||null,!d.o.modal?null:d.d.overlay,d.d.container.css("position")==="fixed"?d.d.container:null],function(u,m){if(m){var r="document.body.clientHeight",w="document.body.clientWidth",y="document.body.scrollHeight",v="document.body.scrollLeft",p="document.body.scrollTop",l="document.body.scrollWidth",k="document.documentElement.clientHeight",t="document.documentElement.clientWidth",q="document.documentElement.scrollLeft",z="document.documentElement.scrollTop",A=m[0].style;
A.position="absolute";
if(u<2){A.removeExpression("height");
A.removeExpression("width");
A.setExpression("height",""+y+" > "+r+" ? "+y+" : "+r+' + "px"');
A.setExpression("width",""+l+" > "+w+" ? "+l+" : "+w+' + "px"')
}else{var o,j;
if(i&&i.constructor===Array){var x=i[0]?typeof i[0]==="number"?i[0].toString():i[0].replace(/px/,""):m.css("top").replace(/px/,"");
o=x.indexOf("%")===-1?x+" + (t = "+z+" ? "+z+" : "+p+') + "px"':parseInt(x.replace(/%/,""))+" * (("+k+" || "+r+") / 100) + (t = "+z+" ? "+z+" : "+p+') + "px"';
if(i[1]){var n=typeof i[1]==="number"?i[1].toString():i[1].replace(/px/,"");
j=n.indexOf("%")===-1?n+" + (t = "+q+" ? "+q+" : "+v+') + "px"':parseInt(n.replace(/%/,""))+" * (("+t+" || "+w+") / 100) + (t = "+q+" ? "+q+" : "+v+') + "px"'
}}else{o="("+k+" || "+r+") / 2 - (this.offsetHeight / 2) + (t = "+z+" ? "+z+" : "+p+') + "px"';
j="("+t+" || "+w+") / 2 - (this.offsetWidth / 2) + (t = "+q+" ? "+q+" : "+v+') + "px"'
}A.removeExpression("top");
A.removeExpression("left");
A.setExpression("top",o);
A.setExpression("left",j)
}}})
},focus:function(k){var i=this,j=k&&e.inArray(k,["first","last"])!==-1?k:"first";
var d=e(":input:enabled:visible:"+j,i.d.wrap);
setTimeout(function(){if(d.length>0){d.focus()
}else{if(i.d.wrap){i.d.wrap.focus()
}}},10)
},getDimensions:function(){var i=this,d=typeof window.innerHeight==="undefined"?g.height():window.innerHeight;
h=[f.height(),f.width()];
a=[d,g.width()]
},getVal:function(i,j){return i?(typeof i==="number"?i:i==="auto"?0:i.indexOf("%")>0?((parseInt(i.replace(/%/,""))/100)*(j==="h"?a[0]:a[1])):parseInt(i.replace(/px/,""))):null
},update:function(d,j){var i=this;
if(!i.d.data){return false
}i.d.origHeight=i.getVal(d,"h");
i.d.origWidth=i.getVal(j,"w");
i.d.data.hide();
d&&i.d.container.css("height",d);
j&&i.d.container.css("width",j);
i.setContainerDimensions();
i.d.data.show();
i.o.focus&&i.focus();
i.unbindEvents();
i.bindEvents()
},setContainerDimensions:function(){var t=this,k=b.ie6||b.ie7;
var d=t.d.origHeight?t.d.origHeight:b.opera?t.d.container.height():t.getVal(k?t.d.container[0].currentStyle.height:t.d.container.css("height"),"h"),j=t.d.origWidth?t.d.origWidth:b.opera?t.d.container.width():t.getVal(k?t.d.container[0].currentStyle.width:t.d.container.css("width"),"w"),o=t.d.data.outerHeight(true),i=t.d.data.outerWidth(true);
t.d.origHeight=t.d.origHeight||d;
t.d.origWidth=t.d.origWidth||j;
var l=t.o.maxHeight?t.getVal(t.o.maxHeight,"h"):null,p=t.o.maxWidth?t.getVal(t.o.maxWidth,"w"):null,n=l&&l<a[0]?l:a[0],r=p&&p<a[1]?p:a[1];
var m=t.o.minHeight?t.getVal(t.o.minHeight,"h"):"auto";
if(!d){if(!o){d=m
}else{if(o>n){d=n
}else{if(t.o.minHeight&&m!=="auto"&&o<m){d=m
}else{d=o
}}}}else{d=t.o.autoResize&&d>n?n:d<m?m:d
}var q=t.o.minWidth?t.getVal(t.o.minWidth,"w"):"auto";
if(!j){if(!i){j=q
}else{if(i>r){j=r
}else{if(t.o.minWidth&&q!=="auto"&&i<q){j=q
}else{j=i
}}}}else{j=t.o.autoResize&&j>r?r:j<q?q:j
}t.d.container.css({height:d,width:j});
t.d.wrap.css({overflow:(o>d||i>j)?"auto":"visible"});
t.o.autoPosition&&t.setPosition()
},setPosition:function(){var j=this,l,k,m=(a[0]/2)-(j.d.container.outerHeight(true)/2),i=(a[1]/2)-(j.d.container.outerWidth(true)/2),d=j.d.container.css("position")!=="fixed"?g.scrollTop():0;
if(j.o.position&&Object.prototype.toString.call(j.o.position)==="[object Array]"){l=d+(j.o.position[0]||m);
k=j.o.position[1]||i
}else{l=d+m;
k=i
}j.d.container.css({left:k,top:l})
},watchTab:function(i){var d=this;
if(e(i.target).parents(".simplemodal-container").length>0){d.inputs=e(":input:enabled:visible:first, :input:enabled:visible:last",d.d.data[0]);
if((!i.shiftKey&&i.target===d.inputs[d.inputs.length-1])||(i.shiftKey&&i.target===d.inputs[0])||d.inputs.length===0){i.preventDefault();
var j=i.shiftKey?"last":"first";
d.focus(j)
}}else{i.preventDefault();
d.focus()
}},open:function(){var l=this;
l.d.iframe&&l.d.iframe.show();
if(e.isFunction(l.o.onOpen)){l.o.onOpen.apply(l,[l.d])
}else{var k=l.d.overlay.show().promise();
var j=l.d.container.show().promise();
var i=l.d.data.show().promise();
var d=l.d.wrap.promise()
}if(k&&j&&i&&d){e.when(k,j,i,d).done(e.proxy(function(){l.o.focus&&l.focus()
},this))
}else{l.o.focus&&l.focus()
}l.bindEvents()
},close:function(){var d=this;
if(!d.d.data){return false
}d.unbindEvents();
if(e.isFunction(d.o.onClose)&&!d.occb){d.occb=true;
d.o.onClose.apply(d,[d.d])
}else{if(d.d.placeholder){var i=e("#simplemodal-placeholder");
if(d.o.persist){i.replaceWith(d.d.data.removeClass("simplemodal-data").css("display",d.display))
}else{d.d.data.hide().remove();
i.replaceWith(d.d.orig)
}}else{d.d.data.hide().remove()
}d.d.container.hide().remove();
d.d.overlay.hide();
d.d.iframe&&d.d.iframe.hide().remove();
d.d.overlay.remove();
d.d={}
}}}
})(jQuery);
(function(d){var e="easie",b="Ease",c=e+b+"In",g=e+b+"Out",j=e+b+"InOut",f=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ"];
d.easie=function(l,k,p,o,n,m){n=n||[e,l,k,p,o].join("-");
if(!d.easing[n]||m){var q=h(function(r){return a(r,l,k,p,o,5)
});
d.easing[n]=function(t,u,r,s){return q.call(null,t)
};
d.easing[n].params=[l,k,p,o]
}return n
};
var i=d.easie;
i(0,0,1,1,e+"Linear");
i(0.25,0.1,0.25,1,e+b);
i(0.42,0,1,1,c);
i(0,0,0.58,1,g);
i(0.42,0,0.58,1,j);
function h(n,k){var l;
k=k||101;
var m=[];
for(l=0;
l<(k+1);
l++){m[l]=n.call(null,l/k)
}return function(s){if(s===1){return m[k]
}var r=k*s;
var t=Math.floor(r);
var q=m[t];
var o=m[t+1];
return q+(o-q)*(r-t)
}}function a(z,m,l,v,u,k){var y=0,C=0,o=0,w=0,A=0,n=0;
function s(D){return((y*D+C)*D+o)*D
}function r(D){return((w*D+A)*D+n)*D
}function B(D){return(3*y*D+2*C)*D+o
}function x(t){return 1/(200*t)
}function q(t,D){return r(p(t,D))
}function p(J,K){var I,H,G,D,t,F;
function E(L){if(L>=0){return L
}else{return 0-L
}}for(G=J,F=0;
F<8;
F++){D=s(G)-J;
if(E(D)<K){return G
}t=B(G);
if(E(t)<0.000001){break
}G=G-D/t
}I=0;
H=1;
G=J;
if(G<I){return I
}if(G>H){return H
}while(I<H){D=s(G);
if(E(D-J)<K){return G
}if(J>D){I=G
}else{H=G
}G=(H-I)*0.5+I
}return G
}o=3*m;
C=3*(v-m)-o;
y=1-o-C;
n=3*l;
A=3*(u-l)-n;
w=1-n-A;
return q(z,x(k))
}})(jQuery);iron.ns("nhn.map").Const={STATE_NONE:0,STATE_MARKER:1,STATE_POLYLINE:2,STATE_POLYGON:3,STATE_DISTANCE:4,STATE_AREA:5,STATE_MAPPOI_HOVERD:6,STATE_THEME_EDIT:7,STATE_STREET_VIEW:8,STATE_UNACTIVATED_INDOOR_HOVERD:9};
iron.ns("nhn.map.toolbox").Const={POOL_DEFAULT:"DEFAULT",POOL_INDOOR:"INDOOR",STATE_DISTANCE:nhn.map.Const.STATE_DISTANCE,STATE_AREA:nhn.map.Const.STATE_AREA};
(function(){var a=nhn.map.Env,b=a.getVar("panorama")||{},c=a.getVar("version")||{};
var d=(window.location.host+"").split(":")[0],e=window.location.protocol+"";
iron.ns("nhn.map.panorama").Const={SWF_URL:"/flash2/panorama/NPanoramaApplication.swf?ver="+(c.flash||(+new Date())),PLAYER_LISTENER:"nhn.map.panorama.PlayerListener",BASE_URL:d,SSL:e.indexOf("https")===0,META_PATH:b.metaDomain||"pvxml.map.naver.com",API_VERSION:b.version,TYPE_FLIGHT:1,TYPE_STREET:3,TYPE_MUSEUM:5,TYPE_INTERIOR:7,TYPE_INTERIOR_FRONT:8,TYPE_INDOOR:10,TYPE_MARINE:12,MINIMAP_CLOSED:0,MINIMAP_EXPANDED:1,MINIMAP_NORMAL:2,MINIMAP_HIDDEN:3,MINIMAP_MIN_SIZE:{width:189,height:280},MINIMAP_MAX_SIZE:{width:534,height:364},MINIAMP_MAX_WIDTH:534,MINIMAP_MIN_EXPANDED_HEIGHT:364}
}());
(function(){var a=iron.ns("nhn.map.bus");
a.Constant={MENU_BUS_ROUTE:"BUS_ROUTE",MENU_BUS_STATION:"BUS_STATION",NO_RESULT:"NO_RESULT",NO_RESULT_WITH_OPTIONS:"NO_RESULT_WITH_OPTIONS",DEFAULT_TEXT:{BUS_ROUTE:"버스 번호를 입력하세요.",BUS_STATION:"버스 정류장 이름을 입력하세요."},BUS_STATION_TYPE:{0:"BUS_ROUTE",1:"PERIMETER_BUS",2:"BUS_RESULT",3:"LAYER_BUS"},STATION_API:{BUS_STOP:"/pubtrans/getBusStopInfo.nhn",BUS_STOP_FROM_MINI:"/pubtrans/searchBusRouteFromStopToRadius.nhn"},REALTIME_BUS_API:{BUS_LOCATION:"/api.pubtrans/2.2/live/getBusLocation.jsonp",BUS_ARRIVAL:"/api.pubtrans/2.2/live/getBusArrival.jsonp",BUS_ARRIVAL_ITEM:"/api.pubtrans/2.2/live/getBusArrivalItem.jsonp"},REALTIME_BUS_TIMEOUT:5000,REALTIME_BUS_CALLER:"pc_map",ROUTE_API:{BUS_ROUTE:"/pubtrans/getBusRouteInfo.nhn"},ROUTE_LINE_STROKE:{stroke:"#a04dd2","stroke-width":5,"stroke-opacity":0.8},BUS_API:"/search2/local.nhn",ERROR_TITLE:"일시적인 오류로<br/>서비스를 이용할 수 없습니다.",ERROR_DESC:"잠시 후 다시 시도해 주세요.",ITEM_COUNT_PER_PAGE:10,PAGE_UNIT:5,BUS_STATE:["approach","arrival","leave"],TOP_VALUE:["11px","30px","49px"],STATE_TEXT:["도착전","도착","출발"],SOURCE:{MARKER:"bus_marker",STATION_RESULT:"bus_station_result",ROUTE_RESULT:"bus_route_result",BUS_ROUTE_LAYER:"bus_route_layer",BUS_STATION_WINDOW:"bus_station_window"},OUT_OF_DATA_TIME:300000,UPDATE_TIME:'업데이트 <span class="bar">|</span> ',UPDATE_OVER_TIME:"업데이트 후 <strong>5</strong>분 이상 경과",LINE_STROKE:{stroke:"#a04dd2","stroke-width":5,"stroke-opacity":0.8},LINE_STROKE_UPWAY:{stroke:"#e04900","stroke-width":4,"stroke-opacity":0.8},LINE_STROKE_DOWNWAY:{stroke:"#a04fd1","stroke-width":4,"stroke-opacity":0.8}}
}());
(function(){var d=iron.ns("nhn.map.subway"),a=nhn.map.Env,c=a.getVar("version")||{},b=a.getVar("client").subwayRegion||"1000";
d.Const={SUBWAY_REGION:{SEOUL:"1000",BUSAN:"7000",DAEGU:"4000",GWANGJU:"5000",DAEJEON:"3000"},SUBWAY_MAP_TYPE:{NORMAL:"normal",COLOR_BLINDNESS:"colorblindness"},SUBWAY_REGION_WITH_IP:b,SUBWAY_SCALES:[0.35,0.39,0.45,0.52,0.59],SMART_ZOOM_OUT_MARGIN:50,LINE_HEADER_VIEW_HEIGHT:31,LAYER_TYPE:{NONE_LAYER:"none",LINE_LAYER:"lineLayer",ROUTE_LAYER:"routeLayer",DIMMED_LAYER:"dimmedLayer"},ROUTE_PIN_TYPE:{START:0,END:1},OVERLAY_TYPE:{PIN:"pin",LABEL:"label",ROUTE_LABEL:"route_label",INFO_WINDOW:"info_window"},LABEL_DIRECTION:{E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7},DEFAULT_LINE_SCALE:0.35,DEFAULT_LINE_ZOOM:0,ROUTE_PIN_OFFSET_X:16,ROUTE_PIN_OFFSET_Y:46,LABEL_HEIGHT:24,LABEL_GAP_Y:18,EDGE_LABEL_GAP:15,TRANSTER_LABEL_GAP:11,RESULT_INFO_WINDOW_Y_GAP:17,RESULT_INFO_WINDOW_WIDTH:357,RESULT_INFO_WINDOW_HEIGHT:158,HOVER_TIMER_DURATION:45,INFO_WINDOW_WIDTH:377,INFO_WINDOW_HEIGHT:505,INFO_WINDOW_RIGHT_MARGIN:70,SUBWAY_NSC:"map.subway",SUBWAY_VERSION_API:"/external/vis",SUBWAY_METADATA_API:"/external/SubwayProvide.xml",SUBWAY_SEARCH_API:"/pubtrans/searchSubwayPath.nhn",CURRENT_TIME_API:"/pubtrans/getSubwayTimestamp.nhn",SUBWAY_SEARCH_TYPE:{BEST_ROUTE:1,FEWER_TRANSFERS:2},SWF_URL:"/flash2/subway/SubwayLineCore.swf?ver="+(c.flash||(+new Date())),SWF_NAME:"SubwayLineCore",SWF_BASE_URL:location.host,PERIMETER_SUBWAY_STATION_API:"/search2/getSiteInfo.nhn",THEME:"subway",STATION_CLASS:2,SUBWAY_STATION_MARKER_TYPE:{0:"PERIMETER_SUBWAY",1:"PERIMETER_TRAFFIC",2:"SUBWAY_LAYER",3:"SUBWAY_URL_RESTORATION"},ICON_TYPE:"TRAFFIC_SUBWAY",PERIMETER_MIN_LEVEL:11,PERIMETER_MAX_LEVEL:16,INFO_WINDOW_TEMPLATE:"subway_contents",DEFAULT_HEIGHT_SIZE:35,MARKER_TYPE:"SITE",ERROR_MSG_HEDADER:"서버와의 통신이 원활하지 않습니다.",ERROR_MSG_BODY:"잠시 후에 다시 시도해 주세요.",DROP_DOWN_LIST_TYPE:{PRESET:"Preset",DAY:"Day",HOUR:"Hour",MINUTE:"Minute"},SUBWAY_TYPE:{FIRST_SUBWAY:1,LAST_SUBWAY:2},DAY_TYPE:{WEEKDAY:1,WEEKEND:2,HOLIDAY:3},MAX_AUTO_COMPLETE_ITEM:10,INPUT_DEFAULT_MSG:{DEPARTURE:"출발지를 입력하세요.",ARRIVAL:"도착지를 입력하세요."},INPUT_PREFIX_MSG:{DEPARTURE:"출발역",ARRIVAL:"도착역"},INPUT_ERROR_MSG:{INCORRECT:"검색 결과가 없습니다.",SAME:"출발역과 도착역이 동일합니다.",BODY:"을 다시 입력해 주세요."},TARGET_TYPE:{DEPARTURE:"DEPARTURE",ARRIVAL:"ARRIVAL"},CHANGED_EVENT_TYPE:{DRAG_START:1,DRAG_END:2,ADD_DEPARTURE:3,ADD_ARRIVAL:4,REMOVE_DEPARTURE:5,REMOVE_ARRIVAL:6,SWITCH:7},NDS_CODE_OF_REGION:{"1000":"_capitalarea","7000":"_busan","4000":"_daegu","5000":"_gwangju","3000":"_daejeon"},FACILITY_URL:"/local/subwayFacilityInfo.nhn#city="}
}());
iron.ns("nhn.map.bookmark").Const={BOOKMARK_GROUP:{PLACE:"place",BUS:"bus",ROUTE:"route",SUBWAY:"subway"},BOOKMARK_TYPE:{PLACE:"place",ADDRESS:"address",ROUTE:"route",BUS:"bus",BUS_STOP:"busStop",BUS_STOP_LANE:"busStopLane",STATION:"station",SUBWAY:"subway",SUBWAY_PATH:"subwayPath"},BOOKMARK_SORT_ORDER:{BY_CREATE_TIME:"createTime",BY_LAST_USE_TIME:"lastUseTime",BY_NAME:"name"},DIALOG_TYPE:{HOME:"home",COMPANY:"company",HOUSE:"house",MORE_FOR_DEPARTURE:"more_for_departure",MORE_FOR_ARRIVAL:"more_for_arrival",MORE_FOR_WAYPOINT:"more_for_waypoint",EDIT:"edit"},DIALOG_TITLE:{HOME:"홈 설정하기",COMPANY:"학교/회사 설정",HOUSE:"집 설정",MORE_FOR_DEPARTURE:"출발지",MORE_FOR_ARRIVAL:"도착지",MORE_FOR_WAYPOINT:"경유지"},ITEM_COUNT_PER_PAGE:10,PAGE_UNIT:5};
iron.ns("nhn.map.recent").Const={TYPE_ALL:"ALL",TYPE_SEARCH:"SEARCH",TYPE_DIRECTIONS:"DIRECTIONS",TYPE_BUS:"BUS",TYPE_SUBWAY_ROUTE:"SUBWAY_ROUTE"};
iron.ns("nhn.map.weather").Const={WEATHER_TYPE:{WEATHER:"wth",WIND:"wnd",RADIATION:"rdt"}};nhn.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false
},isActivating:function(){return this._bIsActivating
},activate:function(){if(this.isActivating()){return this
}this._bIsActivating=true;
if(arguments.length>0){this._onActivate.apply(this,arguments)
}else{this._onActivate()
}return this
},deactivate:function(){if(!this.isActivating()){return this
}this._bIsActivating=false;
if(arguments.length>0){this._onDeactivate.apply(this,arguments)
}else{this._onDeactivate()
}return this
}}).extend(nhn.Component);
nhn.Foggy=jindo.$Class({_elFog:null,_bFogAppended:false,_oExcept:null,_bFogVisible:false,_oTransition:null,$init:function(a){this.option({showDuration:200,showOpacity:nhn.Effect.linear(0.5),hideDuration:200,hideOpacity:nhn.Effect.linear(0),zIndex:32000,fps:15});
this.option(a||{});
this._elFog=jindo.$("<div>");
this._bFogAppended=false;
this._oExcept={};
this._oTransition=new nhn.Transition().fps(this.option("fps"));
this._fOnResize=jindo.$Fn(this._fitFogToDocument,this);
this._fOnScroll=jindo.$Fn(this._fitFogToDocumentScrollSize,this)
},_appendFog:function(){if(this._bFogAppended){return
}document.body.insertBefore(this._elFog,document.body.firstChild);
jindo.$Element(this._elFog).opacity(0);
this._bFogAppended=true
},_getScroll:function(a){var b={top:0,left:0};
b.top=window.pageYOffset||document[a._docKey].scrollTop;
b.left=window.pageXOffset||document[a._docKey].scrollLeft;
return b
},_fitFogToDocument:function(){var b=jindo.$Document();
this._elFog.style.left=this._getScroll(b).left+"px";
this._elFog.style.width="100%";
var a=this;
clearTimeout(this._nTimer);
this._nTimer=null;
this._nTimer=setTimeout(function(){var e=b.clientSize();
a._elFog.style.top=a._getScroll(b).top+"px";
a._elFog.style.height=e.height+"px";
a._elFog.style.left=a._getScroll(b).left+"px"
},100)
},_fitFogToDocumentScrollSize:function(){var a=jindo.$Document().scrollSize();
this._elFog.style.left="0";
this._elFog.style.top="0";
this._elFog.style.width=a.width+"px";
this._elFog.style.height=a.height+"px"
},getFog:function(){return this._elFog
},show:function(b){var a=this;
if(this._bFogVisible){return
}if(b){this._oExcept.element=b;
var e=jindo.$Element(b).css("position");
if(e=="static"){this._oExcept.position=b.style.position;
b.style.position="relative"
}this._oExcept.zIndex=b.style.zIndex;
b.style.zIndex=this.option("zIndex")+1
}this._elFog.style.zIndex=this.option("zIndex");
this._elFog.style.display="none";
this._appendFog();
this._fitFogToDocument();
this._fOnResize.attach(window,"resize");
this._fOnScroll.attach(window,"scroll");
this._elFog.style.display="block";
this._bFogVisible=true;
this._oTransition.start(this.option("showDuration"),this._elFog,{"@opacity":this.option("showOpacity")}).precede(function(){a.fireEvent("show")
})
},hide:function(){var a=this;
if(!this._bFogVisible){return
}this._bFogVisible=false;
this._oTransition.start(this.option("hideDuration"),this._elFog,{"@opacity":this.option("hideOpacity")}).precede(function(){a._elFog.style.display="none";
var b=a._oExcept.element;
if(b){if(a._oExcept.position){b.style.position=a._oExcept.position
}b.style.zIndex=a._oExcept.zIndex
}this._oExcept={};
a._fOnResize.detach(window,"resize");
a._fOnScroll.detach(window,"scroll");
a.fireEvent("hide")
})
}}).extend(nhn.Component);
nhn.SimpleFoggy=jindo.$Class({$init:function(b){this._elFog=jindo.$('<div width="100%" height="100%">');
this.option({showOpacity:0.5,hideOpacity:0,zIndex:32000});
this.option(b||{});
var a={start:function(g,f,e){if(typeof g=="function"){g.call(this);
return this
}jindo.$H(e).forEach(function(h,j){if(/^@(.*)$/.test(j)){var i=RegExp.$1;
jindo.$Element(f).css(i,h)
}else{f[j]=h
}});
return this
}};
a.precede=a.start;
this._oTransition=a
},_appendFog:function(b){var a=null;
if(!b||b=="document"){a=document.body
}else{a=jindo.$(b)
}a.appendChild(this._elFog);
jindo.$Element(this._elFog).opacity(0);
a=null
},show:function(b,e){var a=this;
if(this._bFogVisible){return
}if(b){this._oExcept.element=b;
var f=jindo.$Element(b).css("position");
if(f=="static"){this._oExcept.position=b.style.position;
b.style.position="relative"
}this._oExcept.zIndex=b.style.zIndex;
b.style.zIndex=this.option("zIndex")+1
}this._elFog.style.zIndex=this.option("zIndex");
this._elFog.style.display="none";
this._appendFog(e);
this._fitFogToDocument();
this._fOnResize.attach(window,"resize");
this._fOnScroll.attach(window,"scroll");
this._elFog.style.display="block";
this._bFogVisible=true;
this._oTransition.start(this.option("showDuration"),this._elFog,{"@opacity":this.option("showOpacity")}).precede(function(){a.fireEvent("show")
})
}}).extend(nhn.Foggy);
nhn.Slider=jindo.$Class({_elTrack:null,_oDragArea:null,_aThumbs:null,_aPoses:null,_oSwap:null,_bIsEventAttached:false,$init:function(f,b){this.option({vertical:false,jump:true,classPrefix:"slider-",adjustValue:null,minValue:0,maxValue:1});
this.option(b||{});
if(!this.option("vertical")){this._oSwap={y:"y",x:"x",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left"}
}else{this._oSwap={y:"x",x:"y",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top"}
}this._sRand="S"+parseInt(Math.random()*100000000);
this._elTrack=jindo.$(f);
this._aThumbs=jindo.$$("."+this.option("classPrefix")+"thumb",this._elTrack);
var a=jindo.$ElementList(this._aThumbs);
a.addClass(this._sRand);
this._elTrackOffsetWidth=this._elTrack[this._oSwap.offsetWidth];
this._aThumbsOffsetWidth=[];
for(var e=0;
e<this._aThumbs.length;
e++){this._aThumbsOffsetWidth.push(this._aThumbs[e][this._oSwap.offsetWidth])
}this._aPoses=[];
this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this);
this._initDragArea();
this.activate();
this._detectChange();
f=null
},getTrack:function(){return this._elTrack
},getThumb:function(a){return this._aThumbs[a]
},_initDragArea:function(){var b=this;
var a=this._oSwap;
this._oDragArea=new nhn.DragArea(this._elTrack,{className:this._sRand,flowOut:false}).attach({beforedrag:function(i){var f=b._getThumbIndex(i.handle);
var h={index:f,pos:i[a.x],jump:false};
if(!b.fireEvent("beforechange",h)){return false
}var g=b._getAdjustedPos(f,h.pos);
if(g===false){return i.stop()
}i[a.x]=g;
i[a.y]=null
},drag:function(g){var f=b._getThumbIndex(g.handle);
b._fireChangeEvent(f)
}})
},getDragArea:function(){return this._oDragArea
},_fireBeforeChangeEvent:function(a,e,b){},_fireChangeEvent:function(b){var a=this.option("adjustBy");
if(!this._detectChange()){return
}var f=this._aPoses[b];
var e={index:b,pos:f,value:this._getValue(b,f)};
this.fireEvent("change",e)
},_attachEvent:function(){if(this._bIsEventAttached){return
}this._onTrackMouseDownFn.attach(this._elTrack,"mousedown");
this._bIsEventAttached=true
},_detachEvent:function(){if(!this._bIsEventAttached){return
}this._onTrackMouseDownFn.detach(this._elTrack,"mousedown");
this._bIsEventAttached=false
},activate:function(){this.getDragArea().activate();
this._attachEvent()
},deactivate:function(){this.getDragArea().deactivate();
this._detachEvent()
},_onTrackMouseDown:function(k){var p=this;
if(!this.option("jump")){return
}var b=0;
var q=this._oSwap;
var f=k.element;
var h="."+this.option("classPrefix")+"thumb";
var o=jindo.$$.test(f,h)||jindo.$$.getSingle("! "+h,f);
if(o){return
}var a=k.pos()[q.pageX];
a-=jindo.$Element(this._elTrack).offset()[q.left];
var m=9999999;
for(var j=0,n;
n=this._aThumbs[j];
j++){var l=parseInt(jindo.$Element(n).css(q.left))||0;
l+=parseInt(n[q.offsetWidth]/2);
var g=Math.abs(a-l);
if(g<m){m=g;
b=j
}}var n=this._aThumbs[b];
a-=parseInt(n[q.offsetWidth]/2);
k.stop(jindo.$Event.CANCEL_DEFAULT);
this.positions(b,a)
},_getTrackInfo:function(e){var g=this._aThumbsOffsetWidth[e];
var i=this._elTrackOffsetWidth;
if(!i||i<=0||!g||g<=0){var b=this._oSwap;
var j=this._aThumbs[e];
g=j[b.offsetWidth];
i=this._elTrack[b.offsetWidth];
this._aThumbsOffsetWidth[e]=g;
this._elTrackOffsetWidth=i
}var f=i-g;
var h=this.option("maxValue");
var a=this.option("minValue");
return{maxPos:f,max:h,min:a}
},_getValue:function(b,f){if(typeof f=="undefined"){f=this._aPoses[b]
}var a=this._getTrackInfo(b);
var e=Math.min(Math.max(f*(a.max-a.min)/a.maxPos+a.min,a.min),a.max);
var g;
if(g=this.option("adjustValue")){e=g.call(this,e)
}return e
},_getAdjustedPos:function(b,g){var e=g;
var a=this._getTrackInfo(b);
var i;
if(i=this.option("adjustValue")){var f=Math.min(Math.max(e*(a.max-a.min)/a.maxPos+a.min,a.min),a.max);
var h=i.call(this,f);
if(f!=h){e=a.maxPos*(h-a.min)/(a.max-a.min)
}}e=Math.max(e,0);
e=Math.min(e,a.maxPos);
return e
},_detectChange:function(){var e=this.positions();
var f=false;
for(var b=0,a=e.length;
b<a;
b++){if(e[b]!==this._aPoses[b]){f=true
}}this._aPoses=e;
return f
},_getThumbIndex:function(e){for(var b=0,a=this._aThumbs.length;
b<a;
b++){if(this._aThumbs[b]==e){return b
}}return -1
},positions:function(e,a,f){if(typeof f=="undefined"){f=true
}var k=this._oSwap;
switch(arguments.length){case 0:var j=[];
for(var g=0,h=this._aThumbs.length;
g<h;
g++){j[g]=this.positions(g)
}return j;
case 1:return parseInt(jindo.$Element(this._aThumbs[e]).css(k.left));
default:if(f){var b={index:e,pos:a,jump:true};
if(!this.fireEvent("beforechange",b)){return false
}var l=this._getAdjustedPos(e,b.pos);
if(l===false){return this
}jindo.$Element(this._aThumbs[e]).css(k.left,l+"px");
this._fireChangeEvent(e);
return this
}var l=this._getAdjustedPos(e,a);
jindo.$Element(this._aThumbs[e]).css(k.left,l+"px");
this._detectChange();
return this
}},values:function(f,h,j){if(typeof j=="undefined"){j=true
}switch(arguments.length){case 0:var e=[];
for(var g=0,b=this._aThumbs.length;
g<b;
g++){e[g]=this._getValue(g)
}return e;
case 1:return this._getValue(f,this.positions(f));
default:var a=this._getTrackInfo(f);
this.positions(f,(h-a.min)*a.maxPos/(a.max-a.min),j);
return this
}}}).extend(nhn.Component);
nhn.CustomSlider=jindo.$Class({_initDragArea:function(){var b=this;
var a=this._oSwap;
this._oDragArea=new nhn.DragArea(this._elTrack,{className:this._sRand,flowOut:true}).attach({beforedrag:function(i){var f=b._getThumbIndex(i.handle);
var h={index:f,pos:i[a.x],jump:false};
if(!b.fireEvent("beforechange",h)){return false
}var g=b._getAdjustedPos(f,h.pos);
if(g===false){return i.stop()
}i[a.x]=g;
i[a.y]=null
},drag:function(g){var f=b._getThumbIndex(g.handle);
b._fireChangeEvent(f)
}})
},_getTrackInfo:function(e){var b=this._oSwap;
var h=this._elTrack[b.offsetWidth];
var f=h;
var g=this.option("maxValue");
var a=this.option("minValue");
return{maxPos:f,max:g,min:a}
},_onTrackMouseDown:function(k){var p=this;
if(!this.option("jump")){return
}var b=0;
var q=this._oSwap;
var f=k.element;
var h="."+this.option("classPrefix")+"thumb";
var o=jindo.$$.test(f,h)||jindo.$$.getSingle("! "+h,f);
if(o){return
}var a=k.pos()[q.pageX];
a-=jindo.$Element(this._elTrack).offset()[q.left];
var m=9999999;
for(var j=0,n;
n=this._aThumbs[j];
j++){var l=parseInt(jindo.$Element(n).css(q.left),10)||0;
l+=parseInt(n[q.offsetWidth]/2,10);
var g=Math.abs(a-l);
if(g<m){m=g;
b=j
}}k.stop(jindo.$Event.CANCEL_DEFAULT);
this.positions(b,a)
}}).extend(nhn.Slider);
nhn.DragArea=jindo.$Class({_bIsActivating:false,$init:function(b,a){this.option({className:"dragable",flowOut:true,threshold:0});
this.option(a||{});
this._el=b;
this.bIsIE=jindo.$Agent().navigator().ie;
this._oDragInfo={prepare:false};
this._bIsDragging=false;
this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this);
this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this);
this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);
this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);
this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this);
this.activate()
},_findDraggableElement:function(b){if(jindo.$$.test(b,"input[type=text]")||b.tagName=="TEXTAREA"){return null
}var a=this;
var f="."+this.option("className");
var e=function(g){if(g==null){return false
}if(!a._el.tagName||a._el===g){return true
}return jindo.$Element(a._el).isParentOf(g)
};
var b=jindo.$$.test(b,f)?b:jindo.$$.getSingle("! "+f,b);
if(!e(b)){b=null
}return b
},isDragging:function(){return this._bIsDragging&&!this._oDragInfo.prepare
},_attachEvent:function(){if(this.isActivating()){return
}this._wfOnMouseDown.attach(this._el,"mousedown");
if(this.bIsIE){this._wfOnDragStart.attach(this._el,"dragstart");
this._wfOnSelectStart.attach(this._el,"selectstart")
}this._bIsActivating=true
},_detachEvent:function(){if(!this.isActivating()){return
}this._wfOnMouseDown.detach(this._el,"mousedown");
if(this.bIsIE){this._wfOnDragStart.detach(this._el,"dragstart");
this._wfOnSelectStart.detach(this._el,"selectstart")
}this._bIsActivating=false
},attachEvent:function(){this.activate()
},detachEvent:function(){this.deactivate()
},activate:function(){this._attachEvent()
},deactivate:function(){this._detachEvent()
},isEventAttached:function(){return this.isActivating()
},isActivating:function(){return this._bIsActivating
},_onMouseDown:function(g){if(this._bIsDragging||this._oDragInfo.prepare){return
}if(g.mouse().right){return
}var f=this._findDraggableElement(g.element);
if(!f){return
}if(this.bIsIE){var b=jindo.$Document();
this._elSetCapture=(this._el==document)?document.body:f;
this._elSetCapture.setCapture(true)
}var a=g.pos();
this._oDragInfo={prepare:true,button:g._event.button,handle:f,element:f,pageX:a.pageX,pageY:a.pageY};
this.fireEvent("handledown",{handle:f,element:f,event:g});
this._wfOnMouseMove.attach(document,"mousemove");
this._wfOnMouseUp.attach(document,"mouseup");
this._wfOnMouseUp.attach(document,"contextmenu");
g.stop(jindo.$Event.CANCEL_DEFAULT)
},_onMouseMove:function(m){this._bIsDragging=true;
var r=this._oDragInfo;
var n=m.pos();
if(r.prepare){var p=this.option("threshold");
if(p){var l={pageX:n.pageX-r.pageX,pageY:n.pageY-r.pageY};
var j=Math.sqrt(l.pageX*l.pageX+l.pageY*l.pageY);
if(p>j){return
}}var i=this._findDraggableElement(m.element);
var f={area:this._el,handle:r.handle,element:r.element,event:m};
if(!this.fireEvent("dragstart",f)){this._bIsDragging=false;
return
}var a=jindo.$Element(f.element);
r.prepare=false;
r.handle=f.handle;
r.element=f.element;
r.objectX=parseInt(a.css("left"))||0;
r.objectY=parseInt(a.css("top"))||0
}var o={x:n.pageX-r.pageX,y:n.pageY-r.pageY};
var f={area:this._el,handle:r.handle,element:r.element,event:m,x:r.objectX+o.x,y:r.objectY+o.y,gapX:o.x,gapY:o.y};
if(!this.fireEvent("beforedrag",f)){return
}if(this.option("flowOut")==false){var h=f.element;
var b=jindo.$$.getSingle("! [@position!=static]",f.element);
var q=[h.offsetWidth,h.offsetHeight];
var k=b?{width:b.clientWidth,height:b.clientHeight}:jindo.$Document().clientSize();
if(f.x!==null){if(f.x<0){f.x=0
}else{if(f.x+q[0]>k.width){f.x=k.width-q[0]
}}}if(f.y!==null){if(f.y<0){f.y=0
}else{if(f.y+q[1]>k.height){f.y=k.height-q[1]
}}}}var g=r.element;
if(f.x!==null){g.style.left=f.x+"px"
}if(f.y!==null){g.style.top=f.y+"px"
}if(!this.fireEvent("drag",f)){return
}},_onMouseUp:function(g){if(g.type=="mouseup"&&g.mouse().right){return
}if(g.type=="contextmenu"){this._oDragInfo.prepare=false;
g.stop()
}this._wfOnMouseMove.detach(document,"mousemove");
this._wfOnMouseUp.detach(document,"mouseup");
this._wfOnMouseUp.detach(document,"contextmenu");
var a=this._oDragInfo;
if(!a.prepare&&this._bIsDragging){var f=a.element;
var b=jindo.$Element(f);
if(!this.fireEvent("dragend",{area:this._el,handle:a.handle,element:a.element,event:g,x:parseInt(b.css("left"))||0,y:parseInt(b.css("top"))||0})){return
}}if(this.bIsIE&&this._elSetCapture){this._elSetCapture.releaseCapture();
this._elSetCapture=null
}this._bIsDragging=false;
this._oDragInfo.prepare=false;
this.fireEvent("handleup",{handle:a.handle,element:a.element,event:g})
},_onDragStart:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT)
},_onSelectStart:function(a){if(this._findDraggableElement(a.element)){a.stop(jindo.$Event.CANCEL_DEFAULT)
}}}).extend(nhn.Component);
if(nhn.DragArea){nhn.DragArea.prototype.stopDragging=function(){if(!this.isDragging()){return
}this._wfOnMouseMove.detach(document,"mousemove");
this._wfOnMouseUp.detach(document,"mouseup");
this._wfOnMouseUp.detach(document,"contextmenu");
if(this.bIsIE&&this._elSetCapture){this._elSetCapture.releaseCapture();
this._elSetCapture=null
}this._bIsDragging=false;
this._oDragInfo.prepare=false
}}nhn.DropArea=jindo.$Class({_aOveredTarget:null,$init:function(e,b){var a=this;
this._el=jindo.$(e);
this.option({className:"dropable",dragInstance:null});
this.option(b||{});
this._aOveredTarget=jindo.$A([]);
var f=this.option("dragInstance");
if(f){f.attach({dragstart:function(g){a.fireEvent(g.type,g)
},dragend:function(g){a.fireEvent(g.type,g);
a._clearOveredTarget()
}})
}},_addOveredTarget:function(a){if(this._aOveredTarget.indexOf(a)==-1){this._aOveredTarget.push(a);
this.fireEvent("over",{element:a})
}},_fireMoveEvent:function(e,g,f){var b=(f.pageX-g.left)/(g.right-g.left);
var a=(f.pageY-g.top)/(g.bottom-g.top);
this.fireEvent("move",{element:e,ratioX:b,ratioY:a})
},_removeOveredTarget:function(b){var a=this._aOveredTarget.indexOf(b);
if(a!=-1){this._aOveredTarget.splice(a,1);
this.fireEvent("out",{element:b})
}},_clearOveredTarget:function(){for(var a;
a=this._aOveredTarget.$value()[0];
){this._aOveredTarget.splice(0,1);
this.fireEvent("out",{element:a})
}},reCalculate:function(){},getOveredLists:function(){return this._aOveredTarget?this._aOveredTarget.$value():[]
}}).extend(nhn.Component);
nhn.MagneticDropArea=jindo.$Class({$init:function(e,b){var a=this;
this._mouseMove=jindo.$Fn(this._mouseMove,this);
var f=this.option("dragInstance");
if(f){f.attach({dragstart:function(){a._mouseMove.attach(document,"mousemove")
},dragend:function(){a._mouseMove.detach(document,"mousemove")
}})
}else{this._mouseMove.attach(document,"mousemove")
}this.reCalculate()
},_getDistance:function(i,h,g){var f=g.left-i;
var e=g.top-h;
var a=g.right-i;
var b=g.bottom-h;
return Math.min(f*f+e*e,a*a+e*e,f*f+b*b,a*a+b*b)
},_mouseMove:function(m){var f=this.option("dragInstance");
if(f&&!f.isDragging()){return
}var p=m.pos();
var n=this._itemrects;
var g=this._items;
var k=this._arearect;
if(k&&!(k.left<=p.pageX&&p.pageX<=k.right&&k.top<=p.pageY&&p.pageY<=k.bottom)){this._clearOveredTarget();
return
}var r=this.option("checkOutside");
var o=9999999;
var b=-1;
var q=this.option("getDistanceCallback");
for(var j=0,k;
k=n[j];
j++){var l=g[j];
if(q&&!q.call(this,l)){continue
}if(r){var h=this._getDistance(p.pageX,p.pageY,k);
if(o>h){o=h;
b=j
}}if(k.left<=p.pageX&&p.pageX<=k.right&&k.top<=(p.pageY)&&p.pageY<=(k.bottom)){this._addOveredTarget(l);
if(!r){this._fireMoveEvent(l,k,p,m)
}}else{this._removeOveredTarget(l)
}}var a=b;
if(a!=-1){this._fireMoveEvent(g[a],n[a],p,m)
}},_toRect:function(b){var a=jindo.$Element(b).offset();
return{left:a.left,top:a.top,right:a.left+b.offsetWidth,bottom:a.top+b.offsetHeight}
},reCalculate:function(){var a=jindo.$$("."+this.option("className"),this._el);
if(this._el.tagName&&jindo.$$.test(this._el,"."+this.option("className"))){a.push(this._el)
}this._items=a;
this._arearect=this._el.tagName?this._toRect(this._el):null;
this._itemrects=[];
for(var b=0,e;
e=a[b];
b++){this._itemrects.push(this._toRect(e))
}}}).extend(nhn.DropArea);
if(typeof nhn=="undefined"){nhn={}
}nhn.Flash=(function(){var e={};
var l=/MSIE/i.test(navigator.userAgent);
var k=/FireFox/i.test(navigator.userAgent);
var j=/Chrome/i.test(navigator.userAgent);
var a="NHN_FLASH_OBJECT";
var i=function(o,p,n){if(typeof o.attachEvent!="undefined"){o.attachEvent("on"+p,n)
}else{o.addEventListener(p,n,true)
}};
var m=function(){obj=document.getElementsByTagName("OBJECT");
for(var o=0,n;
n=obj[o];
o++){n.style.display="none";
for(var q in n){if(typeof(n[q])=="function"){try{n[q]=null
}catch(p){}}}}};
var f=function(n){n=n||window.event;
var q=n.wheelDelta/(j?360:120);
if(!q){q=-n.detail/3
}var p=n.target||n.srcElement;
if(!(new RegExp("(^|\b)"+a+"_([a-z0-9_$]+)(\b|$)","i").test(p.className))){return
}var o=RegExp.$2;
var t="layerX" in n?n.layerX:n.offsetX;
var s="layerY" in n?n.layerY:n.offsetY;
try{if(!p[o](q,t,s)){if(n.preventDefault){n.preventDefault()
}else{n.returnValue=false
}}}catch(r){}};
var b=function(t,u,v,x,q,z,A){var w={id:"",width:"100%",height:"100%",wmode:"transparent",flashVars:"",bgColor:"#FFFFFF",wheelHandler:"flashWheelListener"};
if(typeof u=="object"){for(var r in u){w[r]=u[r]
}}else{w.id=u;
w.width=v;
w.height=x;
w.wmode=q;
w.flashVars=z;
w.bgColor=A
}var y="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";
var p="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0";
var s="";
var n="position:relative !important;";
var o=a+"_"+w.wheelHandler;
if(l){s='<object classid="'+y+'" codebase="'+p+'" class="'+o+'" style="'+n+'"  width="'+w.width+'" height="'+w.height+'" id="'+w.id+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="quality" value="high" /><param name="movie" value="'+t+'" /><param name="wmode" value="'+w.wmode+'" /><param name="bgcolor" value="'+w.bgColor+'" /><param name="FlashVars" value="'+w.flashVars+'"></object>'
}else{s='<embed src="'+t+'" quality="high" class="'+o+'" style="'+n+'" wmode="'+w.wmode+'" FlashVars="'+w.flashVars+'" bgcolor="'+w.bgColor+'" width="'+w.width+'" height="'+w.height+'" name="'+w.id+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'
}if(i){i(window,"unload",m);
i(document,!k?"mousewheel":"DOMMouseScroll",f);
i=null
}return s
};
var h=function(o,n){n=n||document;
return n[o]||n.all[o]
};
var g=function(){if(typeof arguments.callee._cache!="undefined"){return arguments.callee._cache
}var u=navigator.plugins;
var n=navigator.mimeTypes;
var o=-1;
var r,s;
if(r=u["Shockwave Flash"]){var p=r.description;
if(typeof p=="string"&&/\b([0-9]+(\.[0-9]+)*)/.test(p)){o=parseFloat(RegExp.$1)
}}else{if(r=u["Shockwave Flash 2.0"]){o=2
}else{if(s=n["application/x-shockwave-flash"]){o=0;
try{var p=s.enabledPlugin.description;
if(typeof p=="string"&&/\b([0-9]+(\.[0-9]+)*)/.test(p)){o=parseFloat(RegExp.$1)
}}catch(t){}}else{for(var q=15;
q>1;
q--){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+q);
o=q;
break
}catch(t){}}}}}arguments.callee._cache=o;
return arguments.callee._cache
};
e.getCode=b;
e.find=h;
e.version=g;
return e
})();
nhn.LayerManager=jindo.$Class({_bIsActivating:false,_bIsLayerVisible:false,_bIsHiding:false,_bIsShowing:false,_aLinks:null,_oTimer:null,$init:function(b,a){this.option({checkEvent:"mousedown",showDelay:0,hideDelay:100,visibleCallback:function(){return jindo.$Element(this.getLayer()).visible()
}});
this.option(a||{});
this._el=jindo.$(b);
this._aLinks=[];
this._oTimer=new nhn.Timer();
this._wfOnEvent=jindo.$Fn(this._onEvent,this);
this.getVisible();
this.activate()
},isActivating:function(){return this._bIsActivating
},activate:function(){if(this.isActivating()){return
}this._wfOnEvent.attach(document,this.option("checkEvent"));
this._bIsActivating=true
},deactivate:function(){if(!this.isActivating()){return
}this._wfOnEvent.detach(document,this.option("checkEvent"));
this._bIsActivating=false
},getVisible:function(){return this._bIsLayerVisible=this.option("visibleCallback").call(this)?true:false
},_check:function(a){var f=jindo.$Element(a);
for(var b=0,e;
e=this._aLinks[b];
b++){e=jindo.$Element(e).$value();
if(e&&(a==e||f.isChildOf(e))){return true
}}return false
},_find:function(a){for(var b=0,e;
e=this._aLinks[b];
b++){if(e==a){return b
}}return -1
},getLayer:function(){return this._el
},setLayer:function(a){this._el=a
},getLinks:function(){return this._aLinks
},setLinks:function(b){this._aLinks=jindo.$A(b).unique().$value();
return this
},link:function(b){if(arguments.length>1){for(var e=0,a=arguments.length;
e<a;
e++){this.link(arguments[e])
}return this
}if(this._find(b)!=-1){return this
}this._aLinks.push(b);
return this
},unlink:function(e){if(arguments.length>1){for(var f=0,b=arguments.length;
f<b;
f++){this.unlink(arguments[f])
}return this
}var a=this._find(e);
if(a==-1){return this
}this._aLinks.splice(a,1);
return this
},show:function(a){if(this.getVisible()){return this
}var b=this;
if(typeof a=="undefined"){a=this.option("showDelay")
}var e=function(){var h=b.getLayer();
if(b.fireEvent("beforeshow",{element:h,linkedList:b._aLinks})){jindo.$Element(h).show();
b.fireEvent("show",{element:h,linkedList:b._aLinks});
b._bIsShowing=false
}else{return
}var g=b.option("group");
if(!g){return
}var l=b.constructor._instances;
for(var j=0,f=l.length;
j<f;
j++){var k=l[j];
if(k!==b&&k.option("group")==g){k.hide()
}}};
this._bIsShowing=true;
this._bIsHiding=false;
if(a){this._oTimer.start(e,a)
}else{this._oTimer.abort();
e()
}return this
},hide:function(a){if(!this.getVisible()){return this
}var b=this;
if(typeof a=="undefined"){a=this.option("hideDelay")
}var e=function(){var f=b.getLayer();
if(b.fireEvent("beforehide",{element:f,linkedList:b._aLinks})){jindo.$Element(f).hide();
b.fireEvent("hide",{element:f,linkedList:b._aLinks});
b._bIsHiding=false
}};
this._bIsShowing=false;
this._bIsHiding=true;
if(a){this._oTimer.start(e,a)
}else{this._oTimer.abort();
e()
}return this
},toggle:function(a){return this[this.getVisible()?"hide":"show"](a)
},_onEvent:function(b){var a=this;
setTimeout(function(){if(!a.getVisible()){return
}var e=b.element;
if(a._check(e)){if(!a._bIsHiding||!a._bIsShowing){a._oTimer.abort();
return
}}a.hide()
},this.option("hideDelay"))
}}).extend(nhn.Component);
nhn.RolloverArea=jindo.$Class({_elArea:null,_aOveredElement:null,$init:function(b,a){this.option({className:"rollover",classPrefix:"rollover-",status:{over:"over",down:"down"}});
this.option(a||{});
this._elArea=jindo.$(b);
this._aOveredElement=[];
this._oDowned={object:[],element:[]};
this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);
this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);
this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);
this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);
this.activate()
},_indexOf:function(h,b){try{return h.indexOf(b)
}catch(g){for(var a=0,f=h.length;
a<f;
a++){if(h[a]===b){return a
}}}return -1
},_addOvered:function(a){if(this._indexOf(this._aOveredElement,a)==-1){this._aOveredElement.push(a);
return true
}return false
},_removeOvered:function(b){var a=this._indexOf(this._aOveredElement,b);
if(a==-1){return false
}this._aOveredElement.splice(a,1);
return true
},_flushOvered:function(){if(this._aOveredElement.length==0){return
}for(var a=0,e;
e=this._aOveredElement[a];
a++){var b={element:e,status:{over:"over",down:"down"}};
if(this.fireEvent("over",b)){this._addStatus(b.element,b.status.over)
}else{return
}}this._aOveredElement=[]
},_addStatus:function(f,e){var a=this.option("classPrefix");
var b=jindo.$Element(f);
if(b.hasClass(a+e)){return false
}b.addClass(a+e);
return true
},_removeStatus:function(f,e){var a=this.option("classPrefix");
var b=jindo.$Element(f);
if(!b.hasClass(a+e)){return false
}b.removeClass(a+e);
return true
},_innerElement:function(f,a){while(a){if(f===a){return true
}try{a=a.parentNode
}catch(b){break
}}return false
},activate:function(){if(this.isActivating()){return
}this._attachEvent();
this._bIsActivating=true
},deactivate:function(){if(!this.isActivating()){return
}this._detachEvent();
this._bIsActivating=false
},isActivating:function(){return this._bIsActivating
},_attachEvent:function(){this._wfMouseOver.attach(this._elArea,"mouseover");
this._wfMouseOut.attach(this._elArea,"mouseout");
this._wfMouseDown.attach(this._elArea,"mousedown");
this._wfMouseUp.attach(document,"mouseup")
},_detachEvent:function(){this._wfMouseOver.detach(this._elArea,"mouseover");
this._wfMouseOut.detach(this._elArea,"mouseout");
this._wfMouseDown.detach(this._elArea,"mousedown");
this._wfMouseUp.detach(document,"mouseup")
},_findRollover:function(b){var a=this.option("className");
return jindo.$$.test(b,"."+a)?b:jindo.$$.getSingle("! ."+a,b)
},_onMouseOver:function(g){var b=g.element;
var f=this._oDowned;
for(;
b=this._findRollover(b);
b=b.parentNode){if(this._innerElement(b,g.relatedElement)){continue
}this._addOvered(b);
if(f.element.length&&this._indexOf(f.element,b)==-1){continue
}var a={element:b,status:this.option("status")};
if(this.fireEvent("over",a)){this._addStatus(a.element,a.status.over)
}else{return
}}},_onMouseOut:function(g){var b=g.element;
var f=this._oDowned;
for(;
b=this._findRollover(b);
b=b.parentNode){if(this._innerElement(b,g.relatedElement)){continue
}this._removeOvered(b);
if(f.element.length&&this._indexOf(f.element,b)==-1){continue
}var a={element:b,status:this.option("status")};
if(this.fireEvent("out",a)){this._removeStatus(a.element,a.status.over)
}else{return
}}},_onMouseDown:function(f){var b=f.element;
while(b=this._findRollover(b)){var a={element:b,status:this.option("status")};
this._oDowned.object.push(this);
this._oDowned.element.push(b);
if(this.fireEvent("down",a)){this._addStatus(a.element,a.status.down)
}b=b.parentNode
}},_onMouseUp:function(j){var h=this._oDowned;
for(var b=0,g;
g=h.element[b];
b++){var a=h.object[b];
var f={element:g,status:this.option("status")};
a._flushOvered();
if(a.fireEvent("up",f)){a._removeStatus(f.element,f.status.down)
}}this._oDowned={object:[],element:[]}
}}).extend(nhn.Component);
nhn.Rolling=jindo.$Class({_oTransition:null,$init:function(e,b){this._el=jindo.$(e);
this._elList=jindo.$$.test(this._el,"ul, ol")?this._el:jindo.$$.getSingle("> ul, > ol",e);
this.option({fps:50,duration:800,direction:"horizontal",effect:nhn.Effect.linear});
this.option(b||{});
this._oKeys=this.option("direction")=="horizontal"?{offsetWidth:"offsetWidth",marginLeft:"marginLeft",marginRight:"marginRight",clientWidth:"clientWidth",scrollLeft:"scrollLeft"}:{offsetWidth:"offsetHeight",marginLeft:"marginTop",marginRight:"marginBottom",clientWidth:"clientHeight",scrollLeft:"scrollTop"};
this._initTransition();
var a=this;
setTimeout(function(){a.moveTo(0)
},0)
},_initTransition:function(){this._onTransitionEnd=jindo.$Fn(function(a){this.fireEvent("aftermove",{index:this.getIndex()})
},this).bind();
this._oTransition=new nhn.Transition().fps(this.option("fps")).attach("end",this._onTransitionEnd)
},getTransition:function(){return this._oTransition
},getItems:function(){return jindo.$$("> li",this._elList)
},_offsetSize:function(b){var g=jindo.$Element(b);
var f=this._oKeys;
var e=parseInt(g.css(f.marginLeft))||0;
var a=parseInt(g.css(f.marginRight))||0;
return b[f.offsetWidth]+e+a
},getIndex:function(){var a=this._el;
var j=this._oKeys;
var h=a[j.scrollLeft];
var e=this.getItems();
var l=0;
var b=0;
var k=99999999;
for(var g=0;
g<e.length;
g++){var f=Math.abs(h-l);
if(f<k){k=f;
b=g
}l+=this._offsetSize(e[g])
}return b
},_move:function(f){var e=this._el;
var k=this._oKeys;
var g=this.getItems();
var b=0,l=0;
var m=this;
if(f>0){for(var h=0;
h<f;
h++){b+=this._offsetSize(g[h])
}}else{for(var h=g.length+f;
h<g.length;
h++){b-=this._offsetSize(g[h])
}}for(var h=0;
h<g.length;
h++){l+=this._offsetSize(g[h])
}if(b+e[k.clientWidth]>l){b=l-e[k.clientWidth]
}this._size=l;
var a={element:e,index:f,scroll:b};
if(!this.fireEvent("beforemove",a)){return
}if(e[k.scrollLeft]==a.scroll){return false
}var j={};
j[k.scrollLeft]=this.option("effect")(a.scroll);
this.getTransition().start(this.option("duration"),a.element,j);
return true
},moveTo:function(b){var a=this.getItems();
if(b<0){b=0
}else{if(b>=a.length){b=a.length-1
}}if(!this._move(b)){return false
}return true
},moveLastTo:function(b){var a=this.getItems();
return this.moveTo(a.length-1-b)
},moveBy:function(b){var a=this.getIndex();
return this.moveTo(a+b)
},isOverflowed:function(){var f=this._el;
var g=this._oKeys;
var b=0;
var a=this.getItems();
for(var e=0;
e<a.length;
e++){b+=this._offsetSize(a[e])
}return b>f[g.clientWidth]
}}).extend(nhn.Component);
nhn.Pagination=new jindo.$Class({$init:function(a,b){this._elPageList=jindo.$(a);
this._welPageList=jindo.$Element(this._elPageList);
this._waPage=jindo.$A([]);
this._fClickPage=jindo.$Fn(this._onClickPageList,this);
this.option({bActivateOnload:true,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:false,sInsertTextNode:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a.pre_end",this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a.pre",this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a.next",this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a.next_end",this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span.pre_end",this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span.pre",this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span.next",this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span.next_end",this._elPageList)});
this.option(b||{});
if(this.option("bActivateOnload")){this.activate()
}},getBaseElement:function(){return this._elPageList
},getItemCount:function(){return this.option("nItem")
},setItemCount:function(b){var a=this.getCurrentPage();
this.option({nItem:b});
this.movePageTo(a,false,null)
},getItemPerPage:function(){return this.option("nItemPerPage")
},setItemPerPage:function(a){this.option("nItemPerPage",a)
},getCurrentPage:function(){return this._nCurrentPage
},getFirstItemOfPage:function(a){return this.getItemPerPage()*(a-1)+1
},getPageOfItem:function(a){return Math.ceil(a/this.getItemPerPage())
},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())
},_getRelativePage:function(g){var e=null;
if(this.option("sMoveUnit")=="page"){switch(g){case"pre":e=this.getCurrentPage()-1;
break;
case"next":e=this.getCurrentPage()+1;
break
}}else{var b=this._getPageList(this.getCurrentPage());
switch(g){case"pre_end":e=1;
break;
case"pre":var a=(b-1)*this.option("nPagePerPageList");
e=a;
break;
case"next":var f=(b)*this.option("nPagePerPageList")+1;
e=f;
break;
case"next_end":e=this._getLastPage();
break
}}return e
},_getPageList:function(e){if(this.option("bAlignCenter")){var a=Math.floor(this.option("nPagePerPageList")/2);
var b=e-a;
b=Math.max(b,1);
b=Math.min(b,this._getLastPage());
return b
}return Math.ceil(e/this.option("nPagePerPageList"))
},_isIn:function(a,b){if(!b){return false
}return(a===b)?true:jindo.$Element(a).isChildOf(b)
},_getPageElement:function(e){for(var b=0,f=this._waPage.$value().length;
b<f;
b++){var a=this._waPage.get(b);
if(this._isIn(e,a)){return a
}}return null
},_onClickPageList:function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);
var b=null,g=this.option(),f=e.element;
if(this._isIn(f,g.elFirstPageLinkOn)){b=this._getRelativePage("pre_end")
}else{if(this._isIn(f,g.elPrevPageLinkOn)){b=this._getRelativePage("pre")
}else{if(this._isIn(f,g.elNextPageLinkOn)){b=this._getRelativePage("next")
}else{if(this._isIn(f,g.elLastPageLinkOn)){b=this._getRelativePage("next_end")
}else{var a=this._getPageElement(f);
if(a){b=parseInt(jindo.$Element(a).text(),10)
}else{return
}}}}}this.movePageTo(b,true,e)
},_convertToAvailPage:function(a){var b=this._getLastPage();
a=Math.max(a,1);
a=Math.min(a,b);
if(a<1){a=1
}return a
},movePageTo:function(a,e,b){a=this._convertToAvailPage(a);
this._nCurrentPage=a;
if(e){if(!this.fireEvent("beforeMove",{nPage:a,weEvent:b})){return
}}this._paginate(a);
if(e){this.fireEvent("move",{nPage:a,weEvent:b})
}},reset:function(a){if(typeof a=="undefined"){a=this.option("nItem")
}this.setItemCount(a);
this.movePageTo(1,false)
},_onActivate:function(){this._fClickPage.attach(this._elPageList,"click");
this.setItemCount(this.option("nItem"));
this.movePageTo(this.option("nPage"),false);
this._welPageList.addClass("loaded")
},_onDeactivate:function(){this._fClickPage.detach(this._elPageList,"click");
this._welPageList.removeClass("loaded")
},_addTextNode:function(){var a=this.option("sInsertTextNode");
this._elPageList.appendChild(document.createTextNode(a))
},_paginate:function(l){this._empty();
this._addTextNode();
var r=this.option(),b=r.elFirstPageLinkOn,k=r.elPrevPageLinkOn,j=r.elNextPageLinkOn,p=r.elLastPageLinkOn,s=r.elFirstPageLinkOff,f=r.elPrevPageLinkOff,u=r.elNextPageLinkOff,m=r.elLastPageLinkOff,g=this._getLastPage(),t=this._getPageList(l),n=this._getPageList(g);
if(g===0){this._welPageList.addClass("no-result")
}else{if(g==1){this._welPageList.addClass("only-one")
}else{this._welPageList.removeClass("only-one").removeClass("no-result")
}}var v,a;
if(r.bAlignCenter){var h=Math.floor(r.nPagePerPageList/2);
v=l-h;
v=Math.max(v,1);
a=v+r.nPagePerPageList-1;
if(a>g){v=g-r.nPagePerPageList+1;
v=Math.max(v,1);
a=g
}}else{v=(t-1)*r.nPagePerPageList+1;
a=(t)*r.nPagePerPageList;
a=Math.min(a,g)
}if(r.sMoveUnit=="page"){t=l;
n=g
}if(v<1){v=1
}if(a<1){a=1
}if(l>1){if(b){this._welPageList.append(b);
this._addTextNode()
}}else{if(s){this._welPageList.append(s);
this._addTextNode()
}}if(t>1){if(k){this._welPageList.append(k);
this._addTextNode()
}}else{if(f){this._welPageList.append(f);
this._addTextNode()
}}var e,q;
for(var o=v;
o<=a;
o++){if(o==l){e=jindo.$(jindo.$Template(r.sCurrentPageTemplate).process({page:o.toString()}))
}else{e=jindo.$(jindo.$Template(r.sPageTemplate).process({page:o.toString()}));
this._waPage.push(e)
}q=jindo.$Element(e);
if(o==v){q.addClass(this.option("sClassFirst"))
}if(o==a){q.addClass(this.option("sClassLast"))
}this._welPageList.append(e);
this._addTextNode()
}if(t<n){if(j){this._welPageList.append(j);
this._addTextNode()
}}else{if(u){this._welPageList.append(u);
this._addTextNode()
}}if(l<g){if(p){this._welPageList.append(p);
this._addTextNode()
}}else{if(m){this._welPageList.append(m);
this._addTextNode()
}}},_empty:function(){var g=this.option(),h=g.elFirstPageLinkOn,f=g.elPrevPageLinkOn,j=g.elNextPageLinkOn,a=g.elLastPageLinkOn,b=g.elFirstPageLinkOff,k=g.elPrevPageLinkOff,e=g.elNextPageLinkOff,i=g.elLastPageLinkOff;
h=this._clone(h);
f=this._clone(f);
a=this._clone(a);
j=this._clone(j);
b=this._clone(b);
k=this._clone(k);
i=this._clone(i);
e=this._clone(e);
this._waPage.empty();
this._welPageList.empty()
},_clone:function(a){if(a&&typeof a.cloneNode=="function"){return a.cloneNode(true)
}return a
}}).extend(nhn.UIComponent);
if(!window.Silverlight){window.Silverlight={}
}Silverlight._silverlightCount=0;
Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=";
Silverlight.onGetSilverlight=null;
Silverlight.onSilverlightInstalled=function(){window.location.reload(false)
};
Silverlight.isInstalled=function(m){var o=false;
var a=null;
try{var i=null;
try{i=new ActiveXObject("AgControl.AgControl");
if(m==null){o=true
}else{if(i.IsVersionSupported(m)){o=true
}}i=null
}catch(l){var j=navigator.plugins["Silverlight Plug-In"];
if(j){if(m===null){o=true
}else{var b=j.description;
if(b==="1.0.30226.2"){b="2.0.30226.2"
}var f=b.split(".");
while(f.length>3){f.pop()
}while(f.length<4){f.push(0)
}var g=m.split(".");
while(g.length>4){g.pop()
}var n;
var h;
var k=0;
do{n=parseInt(g[k]);
h=parseInt(f[k]);
k++
}while(k<g.length&&n===h);
if(n<=h&&!isNaN(n)){o=true
}}}}}catch(l){o=false
}if(a){document.body.removeChild(a)
}return o
};
Silverlight.WaitForInstallCompletion=function(){if(!Silverlight.isBrowserRestartRequired&&Silverlight.onSilverlightInstalled){try{navigator.plugins.refresh()
}catch(a){}if(Silverlight.isInstalled(null)){Silverlight.onSilverlightInstalled()
}else{setTimeout(Silverlight.WaitForInstallCompletion,3000)
}}};
Silverlight.__startup=function(){Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null);
if(!Silverlight.isBrowserRestartRequired){Silverlight.WaitForInstallCompletion()
}if(window.removeEventListener){window.removeEventListener("load",Silverlight.__startup,false)
}else{window.detachEvent("onload",Silverlight.__startup)
}};
Silverlight.createObject=function(a,l,e,j,n,h,i){var o=new Object();
var f=j;
var m=n;
o.version=f.version;
f.source=a;
o.alt=f.alt;
if(h){f.initParams=h
}if(f.isWindowless&&!f.windowless){f.windowless=f.isWindowless
}if(f.framerate&&!f.maxFramerate){f.maxFramerate=f.framerate
}if(e&&!f.id){f.id=e
}delete f.ignoreBrowserVer;
delete f.inplaceInstallPrompt;
delete f.version;
delete f.isWindowless;
delete f.framerate;
delete f.data;
delete f.src;
delete f.alt;
if(Silverlight.isInstalled(o.version)){for(var b in m){if(m[b]){if(b=="onLoad"&&typeof m[b]=="function"&&m[b].length!=1){var k=m[b];
m[b]=function(p){return k(document.getElementById(e),i,p)
}}var g=Silverlight.__getHandlerName(m[b]);
if(g!=null){f[b]=g;
m[b]=null
}else{throw"typeof events."+b+" must be 'function' or 'string'"
}}}slPluginHTML=Silverlight.buildHTML(f)
}else{slPluginHTML=Silverlight.buildPromptHTML(o)
}if(l){l.innerHTML=slPluginHTML
}else{return slPluginHTML
}};
Silverlight.buildHTML=function(e){var b=[];
b.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"');
if(e.id!=null){b.push(' id="'+e.id+'"')
}if(e.width!=null){b.push(' width="'+e.width+'"')
}if(e.height!=null){b.push(' height="'+e.height+'"')
}b.push(" >");
delete e.id;
delete e.width;
delete e.height;
for(var a in e){if(e[a]){b.push('<param name="'+Silverlight.HtmlAttributeEncode(a)+'" value="'+Silverlight.HtmlAttributeEncode(e[a])+'" />')
}}b.push("</object>");
return b.join("")
};
Silverlight.createObjectEx=function(e){var b=e;
var a=Silverlight.createObject(b.source,b.parentElement,b.id,b.properties,b.events,b.initParams,b.context);
if(b.parentElement==null){return a
}};
Silverlight.buildPromptHTML=function(b){var f="";
var e=Silverlight.fwlinkRoot;
var a=b.version;
if(b.alt){f=b.alt
}else{if(!a){a=""
}f="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>";
f=f.replace("{1}",a);
f=f.replace("{2}",e+"108181")
}return f
};
Silverlight.getSilverlight=function(e){if(Silverlight.onGetSilverlight){Silverlight.onGetSilverlight()
}var a="";
var g=String(e).split(".");
if(g.length>1){var f=parseInt(g[0]);
if(isNaN(f)||f<2){a="1.0"
}else{a=g[0]+"."+g[1]
}}var b="";
if(a.match(/^\d+\056\d+$/)){b="&v="+a
}Silverlight.followFWLink("114576"+b)
};
Silverlight.followFWLink=function(a){top.location=Silverlight.fwlinkRoot+String(a)
};
Silverlight.HtmlAttributeEncode=function(b){var f;
var e="";
if(b==null){return null
}for(var a=0;
a<b.length;
a++){f=b.charCodeAt(a);
if(((f>96)&&(f<123))||((f>64)&&(f<91))||((f>43)&&(f<58)&&(f!=47))||(f==95)){e=e+String.fromCharCode(f)
}else{e=e+"&#"+f+";"
}}return e
};
Silverlight.default_error_handler=function(b,a){var e;
var g=a.ErrorType;
e=a.ErrorCode;
var f="\nSilverlight error message     \n";
f+="ErrorCode: "+e+"\n";
f+="ErrorType: "+g+"       \n";
f+="Message: "+a.ErrorMessage+"     \n";
if(g=="ParserError"){f+="XamlFile: "+a.xamlFile+"     \n";
f+="Line: "+a.lineNumber+"     \n";
f+="Position: "+a.charPosition+"     \n"
}else{if(g=="RuntimeError"){if(a.lineNumber!=0){f+="Line: "+a.lineNumber+"     \n";
f+="Position: "+a.charPosition+"     \n"
}f+="MethodName: "+a.methodName+"     \n"
}}alert(f)
};
Silverlight.__cleanup=function(){for(var a=Silverlight._silverlightCount-1;
a>=0;
a--){window["__slEvent"+a]=null
}Silverlight._silverlightCount=0;
if(window.removeEventListener){window.removeEventListener("unload",Silverlight.__cleanup,false)
}else{window.detachEvent("onunload",Silverlight.__cleanup)
}};
Silverlight.__getHandlerName=function(b){var a="";
if(typeof b=="string"){a=b
}else{if(typeof b=="function"){if(Silverlight._silverlightCount==0){if(window.addEventListener){window.addEventListener("onunload",Silverlight.__cleanup,false)
}else{window.attachEvent("onunload",Silverlight.__cleanup)
}}var e=Silverlight._silverlightCount++;
a="__slEvent"+e;
window[a]=b
}else{a=null
}}return a
};
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var a="";
var m,k,h,l,j,g,f;
var b=0;
e=Base64._utf8_encode(e);
while(b<e.length){m=e.charCodeAt(b++);
k=e.charCodeAt(b++);
h=e.charCodeAt(b++);
l=m>>2;
j=((m&3)<<4)|(k>>4);
g=((k&15)<<2)|(h>>6);
f=h&63;
if(isNaN(k)){g=f=64
}else{if(isNaN(h)){f=64
}}a=a+this._keyStr.charAt(l)+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(f)
}return a
},decode:function(e){var a="";
var m,k,h;
var l,j,g,f;
var b=0;
e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");
while(b<e.length){l=this._keyStr.indexOf(e.charAt(b++));
j=this._keyStr.indexOf(e.charAt(b++));
g=this._keyStr.indexOf(e.charAt(b++));
f=this._keyStr.indexOf(e.charAt(b++));
m=(l<<2)|(j>>4);
k=((j&15)<<4)|(g>>2);
h=((g&3)<<6)|f;
a=a+String.fromCharCode(m);
if(g!=64){a=a+String.fromCharCode(k)
}if(f!=64){a=a+String.fromCharCode(h)
}}a=Base64._utf8_decode(a);
return a
},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");
var a="";
for(var f=0;
f<b.length;
f++){var e=b.charCodeAt(f);
if(e<128){a+=String.fromCharCode(e)
}else{if((e>127)&&(e<2048)){a+=String.fromCharCode((e>>6)|192);
a+=String.fromCharCode((e&63)|128)
}else{a+=String.fromCharCode((e>>12)|224);
a+=String.fromCharCode(((e>>6)&63)|128);
a+=String.fromCharCode((e&63)|128)
}}}return a
},_utf8_decode:function(a){var b="";
var e=0;
var f=c1=c2=0;
while(e<a.length){f=a.charCodeAt(e);
if(f<128){b+=String.fromCharCode(f);
e++
}else{if((f>191)&&(f<224)){c2=a.charCodeAt(e+1);
b+=String.fromCharCode(((f&31)<<6)|(c2&63));
e+=2
}else{c2=a.charCodeAt(e+1);
c3=a.charCodeAt(e+2);
b+=String.fromCharCode(((f&15)<<12)|((c2&63)<<6)|(c3&63));
e+=3
}}}return b
}};
nhn.Clipboard=jindo.$Class({_aElement:null,_aData:null,_elOvered:null,_bFailed:true,_bFirst:true,$init:function(f,b){this._sFlashVersion=b;
this._sFlashURL=f;
var e=nhn.Clipboard;
var g=this._sUnique="S"+new Date().getTime()+parseInt(Math.random()*1000000000);
if(typeof e._callbacks=="undefined"){e._callbacks={}
}var a=this;
e._callbacks[this._sUnique]={click:jindo.$Fn(a._onFlashClick,this).bind(),mouseover:jindo.$Fn(a._onFlashMouseOver,this).bind(),mouseout:jindo.$Fn(a._onFlashMouseOut,this).bind(),mousedown:jindo.$Fn(a._onFlashMouseDown,this).bind(),mouseup:jindo.$Fn(a._onFlashMouseUp,this).bind(),load:jindo.$Fn(a._onFlashLoad,this).bind()};
this._aElement=[];
this._aData=[];
this._wfHandler=jindo.$Fn(function(h){this._initFlash();
var i=h.element;
var j=$(i).offset();
this._setFlashPosSize(j.left,j.top,i.offsetWidth,i.offsetHeight);
this._setClipboard(i,this._getData(i));
this._elOvered=i
},this)
},_initFlash:function(){if(this._elDummy){return
}var a=this._elDummy=jindo.$("<div>");
var e=this._sUnique;
a.style.cssText="position:absolute !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important; z-index:32000 !important;";
document.body.insertBefore(a,document.body.firstChild);
var b=nhn.FlashObject.generateTag(this._sFlashURL+"?"+this._sFlashVersion,"CLIPBOARD"+e,1,1,{flashVars:{sUniq:e,sNamespace:"nhn"},wmode:"transparent"});
b=b.replace(/style="position:relative !important;"/gi,'style="position:absolute !important; left:0 !important; top:0 !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important;"');
a.innerHTML=b;
jindo.$Fn(this._checkFailed,this).attach(a,"click")
},_getFlash:function(){return nhn.FlashObject.find("CLIPBOARD"+this._sUnique)
},_setFlashPosSize:function(f,e,b,a){var g=this._elDummy;
g.style.left=f+"px";
g.style.top=e+"px";
var h=this._getFlash();
h.width=b;
h.height=a;
h.style.width=b+"px";
h.style.height=a+"px"
},setData:function(f,b){if(this._bFirst==true){this._initFlash();
this._bFirst=false
}var f=jindo.$(f);
var a=jindo.$A(this._aElement).indexOf(f);
var e=a!=-1;
if(e&&(!b||typeof b=="undefined")){this._wfHandler.detach(f,"mousemove");
this._aElement.splice(a,1);
this._aData.splice(a,1);
this._setFlashPosSize(0,0,1,1);
return
}if(!e){this._wfHandler.attach(f,"mousemove");
this._aElement.push(f);
this._aData.push(b)
}else{this._aData[a]=b
}this._setClipboard(f,b)
},_getData:function(b){var a=jindo.$A(this._aElement).indexOf(b);
return this._aData[a]
},_setClipboard:function(f,a){var i=this._getFlash();
var b=(jindo.$Element(f).css("cursor")||"").toUpperCase();
var g=b=="POINTER"||b=="HAND";
try{i.setClipboardData(a);
i.setClipboardOptions({cursor:g?"pointer":"default"});
this._sAppliedData=a;
this._bFailed=false
}catch(h){this._bFailed=true
}},_checkFailed:function(){if(this._bFailed){this.fireEvent("failure",{element:this._elOvered,data:this._lastestData})
}},_onFlashClick:function(a){this.fireEvent("copy",{element:this._elOvered,data:a})
},_onFlashMouseOver:function(){this.fireEvent("over",{element:this._elOvered})
},_onFlashMouseOut:function(){this.fireEvent("out",{element:this._elOvered})
},_onFlashMouseDown:function(){this.fireEvent("down",{element:this._elOvered})
},_onFlashMouseUp:function(){this.fireEvent("up",{element:this._elOvered})
},_onFlashLoad:function(){this.fireEvent("load")
}}).extend(nhn.Component);
if(typeof nhn=="undefined"){nhn={}
}nhn.FlashObject=(function(){var i={};
var n="F"+new Date().getTime()+parseInt(Math.random()*1000000);
var q=/MSIE/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent);
var p=/FireFox/i.test(navigator.userAgent);
var f=/Chrome/i.test(navigator.userAgent);
var r=" className style __flashID codebase classid class width height name src align id type object embed movie forwardInstall requireVersion ";
var b=(navigator.platform.toLowerCase().indexOf("win")!=-1)?true:false;
var s=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;
var g=function(z){var v,x,y;
if(z==null){z=25
}try{x=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
v=x.GetVariable("$version");
if(v){return h(v)
}}catch(y){}for(var w=z;
w>0;
w--){try{x=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+w);
v=x.GetVariable("$version")
}catch(y){continue
}if(v){return h(v)
}}return -1
};
var h=function(w){var v=w.split(" ")[1].split(",");
return{major:v[0],minor:v[1],revision:v[2]}
};
var e=function(w){var y=-1;
if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var B=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";
var C=navigator.plugins["Shockwave Flash"+B].description;
var x=C.split(" ");
var z=x[2].split(".");
var v=z[0];
var D=z[1];
var A=x[3];
if(A==""){A=x[4]
}if(A[0]=="d"){A=A.substring(1)
}else{if(A[0]=="r"){A=A.substring(1);
if(A.indexOf("d")>0){A=A.substring(0,A.indexOf("d"))
}}}y={major:v,minor:D,revision:A}
}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){y=4
}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){y=3
}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){y=2
}else{if(q&&b&&!s){y=g(w)
}}}}}return y
};
i.detectFlashVer=function(x,w,v){version=e(x);
if(version==-1){return false
}else{if(version!=0){if(version.major>parseFloat(x)){return true
}else{if(version.major==parseFloat(x)){if(version.minor>parseFloat(w)){return true
}else{if(version.minor==parseFloat(w)){if(version.revision>=parseFloat(v)){return true
}}}}}return false
}}};
var a=function(){alert("default install run")
};
var u=function(v,x,w){if(typeof v.attachEvent!="undefined"){v.attachEvent("on"+x,w)
}else{v.addEventListener(x,w,true)
}};
var j=function(v,x){var y="";
var B=true;
var w="";
var z;
for(var A in v){if(B){B=false
}else{y+=x
}z=v[A];
switch(typeof(z)){case"string":y+=A+"="+encodeURIComponent(z);
break;
case"number":y+=A+"="+encodeURIComponent(z.toString());
break;
case"boolean":y+=A+"="+(z?"true":"false");
break;
default:}}return y
};
var o=function(){obj=document.getElementsByTagName("OBJECT");
for(var w=0,v;
v=obj[w];
w++){v.style.display="none";
for(var y in v){if(typeof(v[y])=="function"){try{if(v.hasOwnProperty(y)){v[y]=null
}}catch(x){}}}}};
var k=function(z){z=z||window.event;
var y=z.wheelDelta/(f?360:120);
if(!y){y=-z.detail/3
}var w=z.target||z.srcElement;
if(!(new RegExp("(^|\b)"+n+"_([a-z0-9_$]+)(\b|$)","i").test(w.className))){return
}var v=RegExp.$2;
var B="layerX" in z?z.layerX:z.offsetX;
var A="layerY" in z?z.layerY:z.offsetY;
try{if(!w[v](y,B,A)){if(z.preventDefault){z.preventDefault()
}else{z.returnValue=false
}}}catch(x){}};
var m=function(w){var x=null;
var z=/Safari/.test(navigator.userAgent);
var v=/MSIE/.test(navigator.userAgent);
var A=function(C){var B={left:0,top:0};
if(C.parentNode.tagName.toLowerCase()=="object"){C=C.parentNode
}for(var E=C,D=E.offsetParent;
E=E.parentNode;
){if(E.offsetParent){B.left-=E.scrollLeft;
B.top-=E.scrollTop
}if(E==D){B.left+=C.offsetLeft+E.clientLeft;
B.top+=C.offsetTop+E.clientTop;
if(!E.offsetParent){B.left+=E.offsetLeft;
B.top+=E.offsetTop
}D=E.offsetParent;
C=E
}}return B
};
var y=function(C){var B={left:0,top:0};
for(var D=C;
D;
D=D.offsetParent){B.left+=D.offsetLeft;
B.top+=D.offsetTop
}for(var D=C.parentNode;
D;
D=D.parentNode){if(D.tagName=="BODY"){break
}if(D.tagName=="TR"){B.top+=2
}B.left-=D.scrollLeft;
B.top-=D.scrollTop
}return B
};
return(z?A:y)(w)
};
var t=function(){var v=/MSIE/.test(navigator.userAgent);
if(v){var x=document.documentElement.scrollLeft||document.body.scrollLeft;
var w=document.documentElement.scrollTop||document.body.scrollTop;
return{scrollX:x,scrollY:w}
}else{return{scrollX:window.pageXOffset,scrollY:window.pageYOffset}
}};
var l=function(){var v=/MSIE/.test(navigator.userAgent);
var w={};
if(v){w.nInnerWidth=document.documentElement.clientWidth||document.body.clientWidth;
w.nInnerHeight=document.documentElement.clientHeight||document.body.clientHeight
}else{w.nInnerWidth=window.innerWidth;
w.nInnerHeight=window.innerHeight
}return w
};
i.showAt=function(v,w){document.getElementById(v).innerHTML=w
},i.show=function(y,z,A,C,v,B,x){if(v&&v.requireVersion){var w=v.requireVersion.split(".");
var D=i.detectFlashVer(w[0],w[1],w[2]);
if(!D){if(v.forwardInstall){v.forwardInstall()
}else{a()
}return null
}}document.write(i.generateTag(y,z,A,C,v,B,x))
};
i.generateTag=function(D,E,F,I,w,G,A){F=F||"100%";
I=I||"100%";
A=A||"9,0,0,0";
G=G||"middle";
var H=i.getDefaultOption();
if(w){if(w.flashVars){if(typeof(w.flashVars)=="object"){w.flashVars=j(w.flashVars,"&")
}w.flashVars+="&"
}else{w.flashVars=""
}w.flashVars+="__flashID="+E;
for(var J in w){if((new RegExp("\\b"+J+"\\b","i").test(r))){continue
}H[J]=w[J]
}}var K="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";
var z="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+A;
var x="position:relative !important;";
var y=n+"_"+H.wheelHandler;
var B=[];
var v=[];
B.push('<object class="'+y+'" codebase="'+z+'" style="'+x+'" width="'+F+'" height="'+I+'" id="'+E+'" align="'+G+'" type="application/x-shockwave-flash">');
B.push('<param name="movie" value="'+D+'" />');
v.push('<embed width="'+F+'" height="'+I+'" name="'+E+'" class="'+y+'" style="'+x+'" src="'+D+'" align="'+G+'" ');
for(var C in H){B.push('<param name="'+C+'" value="'+H[C]+'" />');
v.push(C+'="'+H[C]+'" ')
}v.push('type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />');
B.push("</object>");
if(u){u(window,"unload",o);
u(document,!p?"mousewheel":"DOMMouseScroll",k);
u=null
}return(q)?B.join(""):v.join("")
};
i.getDefaultOption=function(){return{quality:"high",bgColor:"#FFFFFF",allowScriptAccess:"always",wmode:"window",allowFullScreen:"true"}
};
i.find=function(w,v){v=v||document;
return v[w]||v.all[w]
};
i.getPlayerVersion=function(){return e()
};
i.setWidth=function(v,w){i.find(v).width=w
};
i.setHeight=function(v,w){i.find(v).height=w
};
i.setSize=function(x,w,v){i.find(x).height=v;
i.find(x).width=w
};
i.getPositionObj=function(w){var x=i.find(w);
if(x==null){return null
}var v=m(x);
var y=t();
var z={};
z.absoluteX=v.left;
z.absoluteY=v.top;
z.scrolledX=z.absoluteX-y.scrollX;
z.scrolledY=z.absoluteY-y.scrollY;
z.browserWidth=l().nInnerWidth;
return z
};
i.getSSCLogParam=function(){var v=[];
if(window.g_ssc){v.push("ssc="+g_ssc)
}else{v.push("ssc=decide.me")
}if(window.g_pid){v.push("&p="+g_pid)
}if(window.g_query){v.push("&q="+encodeURIComponent(g_query))
}if(window.g_sid){v.push("&s="+g_sid)
}return v.join("")
};
return i
})();
nhn.BrowseButton=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"browse-"});
this.option(b||{});
this._el=jindo.$(a);
this._assignHTMLElement();
this._attachEvents()
},_assignHTMLElement:function(){var b=this.option("sClassPrefix");
this._elBox=jindo.$$.getSingle("."+b+"box",this._el);
this._elFileSelect=jindo.$$.getSingle("."+b+"file-input",this._el);
this._elBrowseButton=jindo.$$.getSingle("."+b+"button",this._el);
var a=this.getFileSelect();
var e=this.getBrowseButton();
this._oOrgPos={form:jindo.$$.getSingle("! form",a),parent:a.parentNode,sibling:a.nextSibling,cssText:a.style.cssText};
a.style.cssText="top:-.5em !important; height:500px !important;";
jindo.$Element(e).addClass(b+"applied")
},_adjustFileSelectPos:function(e){var b=this.getBox();
var a=(jindo.$Element(b).offset().left+document.documentElement.scrollLeft)-e;
this.getFileSelect().style.right=a+"px"
},_attachEvents:function(){var i=this.getBrowseButton();
var b=jindo.$Element(i);
var h=this.getBox();
var f=this.getFileSelect();
var a=jindo.$Fn(function(j){b.addClass(this.option("sClassPrefix")+"over");
this.fireEvent("over");
this._adjustFileSelectPos(j.pos().pageX)
},this);
var e=jindo.$Fn(function(j){b.removeClass(this.option("sClassPrefix")+"over");
f.style.right="0px";
this.fireEvent("out")
},this);
var g=jindo.$Fn(function(j){this._adjustFileSelectPos(j.pos().pageX)
},this);
jindo.$Fn(function(j){this.fireEvent("sourceChange")
},this).attach(this.getFileSelect(),"change");
a.attach(h,"mouseover");
g.attach(h,"mousemove");
e.attach(h,"mouseout")
},getBox:function(){return this._elBox
},getFileSelect:function(){return this._elFileSelect
},getBrowseButton:function(){return this._elBrowseButton
}}).extend(nhn.Component);
nhn.FileUploader=jindo.$Class({_bIsActivating:false,_aHiddenInput:[],$init:function(a,b){var e={sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"업로드가 허용되지 않는 파일형식입니다",bAutoUpload:false,bActivateOnload:true};
this.option(e);
this.option(b||{});
this._el=jindo.$(a);
this._wel=jindo.$Element(this._el);
this._elForm=this._el.form;
this._aHiddenInput=[];
this.constructor._oCallback={};
this._wfChange=jindo.$Fn(this._onFileSelectChange,this);
if(this.option("bActivateOnload")){this.activate()
}},_appendIframe:function(){var a="tmpFrame_"+this._makeUniqueId();
this._welIframe=jindo.$Element(jindo.$('<iframe name="'+a+'" src="'+this.option("sCallback")+'?blank">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"});
document.body.appendChild(this._welIframe.$value())
},_removeIframe:function(){this._welIframe.leave()
},getBaseElement:function(){return this.getFileSelect()
},getFileSelect:function(){return this._el
},getFormElement:function(){return this._elForm
},upload:function(){this._appendIframe();
var f=this.getFormElement();
var j=jindo.$Element(f);
var g=this._welIframe.attr("name");
var b=g+"_func";
var a=this.option("sUrl");
j.attr({target:g,action:a});
this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")}));
this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:b}));
for(var e in this.option("htData")){this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:e,value:this.option("htData")[e]}))
}for(var h=0;
h<this._aHiddenInput.length;
h++){f.appendChild(this._aHiddenInput[h])
}this.constructor._oCallback[b+"_success"]=jindo.$Fn(function(k){this.fireEvent("success",{htResult:k});
delete this.constructor._oCallback[k.callback_func+"_success"];
delete this.constructor._oCallback[k.callback_func+"_error"];
for(var l=0;
l<this._aHiddenInput.length;
l++){jindo.$Element(this._aHiddenInput[l]).leave()
}this._aHiddenInput.length=0;
this._removeIframe()
},this).bind();
this.constructor._oCallback[b+"_error"]=jindo.$Fn(function(k){this.fireEvent("error",{htResult:k});
delete this.constructor._oCallback[k.callback_func+"_success"];
delete this.constructor._oCallback[k.callback_func+"_error"];
for(var l=0;
l<this._aHiddenInput.length;
l++){jindo.$Element(this._aHiddenInput[l]).leave()
}this._aHiddenInput.length=0;
this._removeIframe()
},this).bind();
f.submit()
},_onActivate:function(){this._el.value="";
this._wfChange.attach(this._el,"change")
},_onDeactivate:function(){this._wfChange.detach(this._el,"change")
},_makeUniqueId:function(){return new Date().getMilliseconds()+Math.floor(Math.random()*100000)
},_createElement:function(f,e){var g=jindo.$("<"+f+">");
var b=jindo.$Element(g);
for(var a in e){b.attr(a,e[a])
}return g
},_checkExtension:function(e){var a=this.option("sFiletype").split(";");
for(var b=0;
b<a.length;
b++){sType=(a[b]=="*.*")?"*":a[b];
sType=sType.replace(/^\s+|\s+$/,"");
sType=sType.replace(/\./g,"\\.");
sType=sType.replace(/\*/g,"[^\\/]+");
if((new RegExp(sType+"$","gi")).test(e)){return true
}}return false
},_onFileSelectChange:function(b){var f=b.element.value,a=this._checkExtension(f),e={sValue:f,bAllowed:a,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};
if(this.fireEvent("select",e)){if(a){if(this.option("bAutoUpload")){this.upload()
}}else{alert(e.sMsgNotAllowedExt)
}}}}).extend(nhn.UIComponent);
var lcs_isie=(navigator.appName=="Microsoft Internet Explorer");
var lcs_isns=(navigator.appName=="Netscape");
var lcs_isopera=(navigator.appVersion.indexOf("Opera")>=0);
var lcs_ismac=(navigator.userAgent.indexOf("MAC")>=0);
var lcs_add={};
var lcs_bc={};
var lcs_ver="v0.4.16";
var lcs_cnt=0;
function lcs_do(f){if(!window.lcs_SerName){window.lcs_SerName="lcs.naver.com"
}var g="";
var j;
var l=document;
var b=window.location;
try{var i=(b.protocol?b.protocol:"http:")+"//"+window.lcs_SerName+"/m?"
}catch(k){return
}try{g=i+"u="+encodeURIComponent(b.href)+"&e="+(l.referrer?encodeURIComponent(l.referrer):"")
}catch(k){}try{if(typeof lcs_add.i=="undefined"){lcs_add.i=""
}for(var j in lcs_add){if(typeof lcs_add[j]!="function"){g+="&"+j+"="+encodeURIComponent(lcs_add[j])
}}for(var j in f){if((j.length>=3&&(typeof f[j]!="function"))||j=="qy"){g+="&"+j+"="+encodeURIComponent(f[j])
}}if(lcs_cnt<1){lcs_getBrowserCapa()
}for(var j in lcs_bc){if(typeof lcs_bc[j]!="function"){g+="&"+j+"="+encodeURIComponent(lcs_bc[j])
}}if(lcs_cnt>0){var a=(new Date).getTime();
g+="&ts="+a
}g+="&EOU";
var h=document.createElement("img");
h.src=g;
h.onload=function(){h.onload=null;
return
};
lcs_cnt++
}catch(k){return
}}function lcs_do_gdid(b,a){try{if(b){lcs_add.i=b;
if(a){lcs_do(a)
}else{lcs_do()
}}}catch(f){}}function lcs_getBrowserCapa(){lcs_getOS();
lcs_getlanguage();
lcs_getScreen();
lcs_getWindowSize();
lcs_getColorDepth();
lcs_getJavaEnabled();
lcs_getJavascriptVer();
lcs_getCookieEnabled();
lcs_getSwfVer();
lcs_getSLVersion();
lcs_getConnectType();
lcs_getPlugIn()
}function lcs_getOS(){var a="";
try{(navigator.platform?a=navigator.platform:"")
}catch(b){}lcs_bc.os=a
}function lcs_getlanguage(){var a="";
try{(navigator.userLanguage?a=navigator.userLanguage:(navigator.language)?a=navigator.language:"")
}catch(b){}lcs_bc.ln=a
}function lcs_getScreen(){var f="";
try{if(window.screen&&screen.width&&screen.height){f=screen.width+"x"+screen.height
}else{if(window.java||self.java){var a=java.awt.Toolkit.getDefaultToolkit().getScreenSize();
f=a.width+"x"+a.height
}}}catch(b){f=""
}lcs_bc.sr=f
}function lcs_getWindowSize(){var b=document;
lcs_bc.bw="";
lcs_bc.bh="";
try{lcs_bc.bw=b.documentElement.clientWidth?b.documentElement.clientWidth:b.body.clientWidth;
lcs_bc.bh=b.documentElement.clientHeight?b.documentElement.clientHeight:b.body.clientHeight
}catch(a){}}function lcs_getColorDepth(){lcs_bc.c="";
try{if(window.screen){lcs_bc.c=screen.colorDepth?screen.colorDepth:screen.pixelDepth
}else{if(window.java||self.java){var b=java.awt.Toolkit.getDefaultToolkit().getColorModel().getPixelSize();
lcs_bc.c=b
}}}catch(a){lcs_bc.c=""
}}function lcs_getJavaEnabled(){lcs_bc.j="";
try{lcs_bc.j=navigator.javaEnabled()?"Y":"N"
}catch(a){}}function lcs_getCookieEnabled(){lcs_bc.k="";
try{lcs_bc.k=navigator.cookieEnabled?"Y":"N"
}catch(a){}}function lcs_getConnectType(){var a=document.body;
var g="";
try{if(lcs_isie&&!lcs_ismac&&a){var f=a.addBehavior("#default#clientCaps");
g=a.connectionType;
a.removeBehavior(f)
}}catch(b){}lcs_bc.ct=g
}function lcs_getJavascriptVer(){var g="1.0";
try{if(String&&String.prototype){g="1.1";
if(g.search){g="1.2";
var f=new Date,p=0;
if(f.getUTCDate){g="1.3";
var l=navigator.appVersion;
var k,b=l.indexOf("MSIE");
if(b>0){var q=parseInt(k=l.substring(b+5));
if(q>3){q=parseFloat(k)
}}if(lcs_isie&&lcs_ismac&&q>=5){g="1.4"
}if(p.toFixed){g="1.5";
var o=new Array;
if(o.every){g="1.6";
k=0;
var h=new Object;
var n=function(r){var a=0;
try{a=new Iterator(r)
}catch(j){}return a
};
k=n(h);
if(k&&k.next){g="1.7"
}if(o.reduce){g="1.8"
}}}}}}}catch(m){}lcs_bc.jv=g
}function lcs_getSwfVer(){var f="";
var h=false;
var j=navigator;
try{var k=j.plugins;
h=(j.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;
if(k!=null&&k.length>0){if(k["Shockwave Flash 2.0"]||k["Shockwave Flash"]){var n=k["Shockwave Flash 2.0"]?" 2.0":"";
var o=k["Shockwave Flash"+n].description;
var b=o.split(" ");
var g=b[2].split(".");
var a=g[0];
var p=g[1];
f=parseInt(a,10)+"."+parseInt(p,10)
}}else{if(j.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){f="4.0"
}else{if(j.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){f="3.0"
}else{if(j.userAgent.toLowerCase().indexOf("webtv")!=-1){f="2.0"
}else{if(lcs_isie&&h&&!lcs_isopera){var m="";
var i;
try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");
m=i.GetVariable("$version")
}catch(l){}if(!m){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");
m="WIN 6,0,21,0";
i.AllowScriptAccess="always";
m=i.GetVariable("$version")
}catch(l){}}if(!m){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");
m="WIN 3,0,18,0";
m=i.GetVariable("$version")
}catch(l){}}if(!m){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
m="WIN 2,0,0,11"
}catch(l){}}if(m.indexOf(",")>0){m=m.replace(/%20/,"");
m=m.replace(/[a-zA-Z]*[^0-9]/,"");
m=m.replace(/,/g,".")
}f=m
}}}}}}catch(l){}lcs_bc.fv=f
}function lcs_getSLVersion(){var i="";
var n=document;
var k=n.body;
try{var j=navigator.plugins;
if(j&&j.length>0){i=j["Silverlight Plug-In"].description||j["WPFe Plug-In"].description;
if(i=="1.0.30226.2"){i="2.0.30226.2"
}}else{var f,g;
if(typeof ActiveXObject!="undefined"){try{g=new ActiveXObject("AgControl.AgControl")
}catch(l){}}else{f=n.createElement("div");
f.innerHTML='<object type="application/x-silverlight" style="position:absolute;" />';
k.insertBefore(f,k.firstChild);
g=f.firstChild
}if(/\bopera\b/i.test(navigator.userAgent)){for(var b=new Date().getTime();
typeof g.isVersionSupported=="undefined"&&(new Date().getTime()-b<1000);
){}}if(typeof g.isVersionSupported!="undefined"){for(var m=0;
m<9;
m++){for(var h=0;
h<=9;
h++){var o=m+"."+h;
if(g.isVersionSupported(o)){i=o
}else{break
}}}}if(g){g=null
}if(f){k.removeChild(f)
}}if(i.indexOf(".")>0){var a=i.split(".");
i=a[0]+"."+a[1]
}}catch(l){}lcs_bc.sl=i
}function lcs_getPlugIn(){var h={};
var f="";
var b=navigator;
var l=b.plugins;
if(l&&l.length>0){try{var a=l;
for(var j=0;
j<a.length;
j++){h[a[j].name]=""
}}catch(k){}}else{if(lcs_bc.fv!=""){h["Shockwave Flash"]=""
}if(lcs_bc.sl!=""){h.Silverlight=""
}}for(var g in h){if(typeof h[g]!="function"){f+=g+";"
}}lcs_bc.p=f.length?f.substr(0,f.length-1):f
}if(typeof nclk=="undefined"){nclk={}
}if(typeof nclkMaxDepth=="undefined"){var nclkMaxDepth=8
}if(typeof ccsrv=="undefined"){var ccsrv="cc.naver.com"
}if(typeof nclkModule=="undefined"){var nclkModule="cc"
}if(typeof nsc=="undefined"){var nsc="decide.me"
}if(typeof g_pid=="undefined"){var g_pid=""
}if(typeof g_sid=="undefined"){var g_sid=""
}var nclkImg=[];
nclk.version="1.2.12";
nclk.getScrollBarWidth=function(){var j=document.createElement("p");
j.style.width="200px";
j.style.height="200px";
var i=document.createElement("div");
i.style.position="absolute";
i.style.top="0px";
i.style.left="0px";
i.style.visibility="hidden";
i.style.width="200px";
i.style.height="150px";
i.style.overflow="hidden";
i.appendChild(j);
document.body.appendChild(i);
var g=j.offsetWidth;
i.style.overflow="scroll";
var h=j.offsetWidth;
if(g==h){h=i.clientWidth
}document.body.removeChild(i);
return(g-h)
};
nclk.findPos=function(e){var h=curtop=0;
try{if(e.offsetParent){do{h+=e.offsetLeft;
curtop+=e.offsetTop
}while(e=e.offsetParent)
}else{if(e.x||e.y){if(e.x){h+=e.x
}if(e.y){curtop+=e.y
}}}}catch(g){}return[h,curtop]
};
nclk.windowSize=function(h){if(!h){h=window
}var g=0;
if(h.innerWidth){g=h.innerWidth;
if(typeof(h.innerWidth)=="number"){var f=nclk.getScrollBarWidth();
g=h.innerWidth-f
}}else{if(document.documentElement&&document.documentElement.clientWidth){g=document.documentElement.clientWidth
}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){g=document.body.clientWidth
}}}return g
};
nclk.checkIframe=function(k){var n=document.URL;
var l=k.parentNode;
var j;
var e;
if(l==null||l==undefined){return false
}while(1){if(l.nodeName.toLowerCase()=="#document"){if(l.parentWindow){j=l.parentWindow
}else{j=l.defaultView
}try{if(j.frameElement!=null&&j.frameElement!=undefined){if(j.frameElement.nodeName.toLowerCase()=="iframe"){e=j.frameElement.id;
if(!e){return false
}return e
}else{return false
}}else{return false
}}catch(m){return false
}}else{l=l.parentNode;
if(l==null||l==undefined){return false
}}}};
nclk.absPath=function(h){var j=window.location;
var i=j.href;
var g=j.protocol+"//"+j.host;
if(h.charAt(0)=="/"){if(h.charAt(1)=="/"){return j.protocol+h
}else{return g+h
}}if(/^\.\//.test(h)){h=h.substring(2)
}while(/^\.\./.test(h)){if(g!=i){i=i.substring(0,i.lastIndexOf("/"))
}h=h.substring(3)
}if(g!=i){if(h.charAt(0)!="?"&&h.charAt(0)!="#"){i=i.substring(0,i.lastIndexOf("/"))
}}if(h.charAt(0)=="/"){return i+h
}else{if(h.charAt(0)=="?"){i=i.split("?")[0];
return i+h
}else{if(h.charAt(0)=="#"){i=i.split("#")[0];
return i+h
}else{return i+"/"+h
}}}};
function clickcr(aw,Y,aj,ac,ab,af,o){if(arguments.length==1){if(typeof nclk.generateCC!="undefined"){nclk.generateCC(arguments[0])
}return
}var aa=navigator.userAgent.toLowerCase();
var at=(aa.indexOf("safari")!=-1?true:false);
var ad=/msie/.test(aa)&&!/opera/.test(aa);
var ar=(window.location.protocol=="https:")?"https:":"http:";
var ay=ccsrv.substring(ccsrv.indexOf(".")+1);
var ak=window.event?window.event:ab;
var al=-1;
var an=-1;
var ao=-1;
var ap=-1;
var b,ax,av;
var am,au,aq;
var T,W,X,U,ag,ae,ah;
var x;
var Z=0;
if(!af){af="0"
}else{af=String(af)
}if(!o){o=""
}if(af.indexOf("n")==0){Z=0
}else{if(window.g_ssc!=undefined&&window.g_query!=undefined){Z=1
}else{Z=0
}}try{U=nclk.windowSize(window);
av=nclk.checkIframe(aw);
if(av){var ai=nclk.findPos(document.getElementById(av));
if(ak.clientX&&ak.clientX!=undefined){b=document.body;
if(b.clientLeft&&b.clientTop){ifrSx=ak.clientX-b.clientLeft;
ifrSy=ak.clientY-b.clientTop
}else{ifrSx=ak.clientX;
ifrSy=ak.clientY
}}ao=ai[0]+ifrSx;
ap=ai[1]+ifrSy;
if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){b=document.body;
al=ao-b.scrollLeft;
an=ap-b.scrollTop
}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){ax=document.documentElement;
al=ao-ax.scrollLeft;
an=ap-ax.scrollTop
}else{al=ao;
an=ap
}}}else{if(ak.clientX&&ak.clientX!=undefined){b=document.body;
if(b.clientLeft&&b.clientTop){al=ak.clientX-b.clientLeft;
an=ak.clientY-b.clientTop
}else{al=ak.clientX;
an=ak.clientY
}}if(document.body&&(document.body.scrollTop||document.body.scrollLeft)){ao=document.body.scrollLeft+(al<0?0:al);
ap=document.body.scrollTop+(an<0?0:an)
}else{if(document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)){ax=document.documentElement;
if(ax.scrollLeft!=undefined){ao=ax.scrollLeft+(al<0?0:al)
}if(ax.scrollTop!=undefined){ap=ax.scrollTop+(an<0?0:an)
}}else{ao=(al<0?0:al);
ap=(an<0?0:an)
}}if(ak.pageX){ao=ak.pageX
}if(ak.pageY){ap=ak.pageY
}}}catch(h){}if(Y==""||typeof Y=="undefined"){return
}if(af.indexOf("1")!=-1){am=0
}else{if(aw.href){ag=aw.nodeName.toLowerCase();
ae=aw.href.toLowerCase();
if((aw.target&&aw.target!="_self"&&aw.target!="_top"&&aw.target!="_parent")||(ae.indexOf("javascript:")!=-1)||(aw.getAttribute("href",2)&&aw.getAttribute("href",2).charAt(0)=="#")||(ae.indexOf("#")!=-1&&(ae.substr(0,ae.indexOf("#"))==document.URL))||ag.toLowerCase()=="img"||ad&&window.location.host.indexOf(ay)==-1){am=0
}else{am=1
}}else{am=0
}}if(aw.href&&aw.href.indexOf(ar+"//"+ccsrv)==0){au=aw.href
}else{au=ar+"//"+ccsrv+"/"+nclkModule+"?a="+Y+"&r="+ac+"&i="+aj;
au+="&bw="+U+"&px="+ao+"&py="+ap+"&sx="+al+"&sy="+an+"&m="+am;
if(Z==0){au+="&nsc="+nsc
}else{if(Z==1){au+="&ssc="+g_ssc+"&q="+encodeURIComponent(g_query)+"&s="+g_sid+"&p="+g_pid
}}if(o){au+="&g="+encodeURIComponent(o)
}if(ae&&ae.indexOf(ar+"//"+ccsrv)!=0&&ag.toLowerCase()!="img"){var y=aw.href;
if(aw.outerHTML&&!window.XMLHttpRequest){y=(/\shref=\"([^\"]+)\"/i.test(aw.outerHTML)&&RegExp.$1).replace(/\\/g,"\\\\").replace(/%([A-Z0-9]{2})/ig,"\\$1");
(d=document.createElement("div")).innerHTML=y;
y=d.innerText.replace(/\\([A-Z0-9]{2})/gi,"%$1").replace(/\\\\/g,"\\")
}ae=y.toLowerCase();
if(ae.indexOf("http:")==0||ae.indexOf("https:")==0||ae.indexOf("javascript:")==0){au+="&u="+encodeURIComponent(y)
}else{ah=nclk.absPath(y);
au+="&u="+encodeURIComponent(ah)
}}else{if(aw.href){if(aw.href.length>0){au+="&u="+encodeURIComponent(aw.href)
}else{au+="&u=about%3Ablank"
}}else{au+="&u=about%3Ablank"
}}}if(am==1){x=aw.innerHTML;
aw.href=au;
if(aw.innerHTML!=x){aw.innerHTML=x
}}else{if(document.images){var V=new Date().getTime();
au+="&time="+V;
if(at&&!aw.href){var e=c=new Date();
while((e.getTime()-c.getTime())<100){e=new Date()
}var T=new Image();
nclkImg.push(T);
T.src=au
}else{var T=new Image();
nclkImg.push(T);
T.src=au
}}}return true
};nhn.mapservice.TemplateRepos=(function(){var a={};
a._template={};
a.get=function(f){if(typeof f=="string"){if(!this._template[f]){throw new Error("Requested template id("+f+") is not found.")
}return nhn.mapcore.Template.get(this._template[f])
}if(typeof f=="object"){if(!this._template[f.id]){throw new Error("Requested template id("+f.id+") is not found.")
}var d=this._template[f.id];
var b={};
for(var c in f.subTemplates){var e=f.subTemplates[c].id;
if(!this._template[f.id]){throw new Error("Requested template id("+e+" in "+f.id+") is not found.")
}b[c]=this._template[e]
}return nhn.mapcore.Template.get(function(j){var g={};
for(var h in b){var i=b[h];
g[h]=i(j)
}return d(g)
})
}};
a.add=function(c){var b=arguments;
if(b.length==2&&typeof b[0]=="string"){c={};
c[b[0]]=b[1]
}for(var d in c){this._template[d]=c[d]
}};
return a
}());
(function(b){var c=nhn.mapcore,a=function(f,d){if(!d[0]){d=[d]
}for(var e=0,g=d.length,h;
e<g;
e++){h=d[e];
if(typeof h==="function"){h=new h()
}f.registerPlugin(h)
}};
b.createMapApp=function(d,j,i,k){var i=i||10,k=k||{},h=new nhn.husky.HuskyCore(),g=k.sMapMode||"vector",l=window.oParamData||(nhn.map&&nhn.map.Env?nhn.map.Env.getUrlParam():null),e,f;
if(l){switch(+l.mapMode){case 1:g="hybrid";
break;
case 2:g="satellite";
break;
case 3:g="terrain";
break
}}f=new c.MapConfig({point:j,zoomLevel:i});
if(k.boundOffset){f.boundOffset=k.boundOffset
}e=[nhn.husky.CorePlugin,new c.NMap(d,k),c.Container,f,c.MapCoordConfig,c.MousePointer,c.TileManager,c.MapDragger];
if(b.USE_OLD_CORE){e.push(new c.DefaultTilePane(g),new c.HybridTilePane(g),c.TrafficTilePane)
}else{e.push(c.BaseRealTilePane,c.HybridRealTilePane,c.TrafficAndBicycleRealTilePane,c.CadastralRealTilePane,new c.BaseVirtualTilePane(g),c.BaseLabelVirtualTilePane,c.TerrainLabelVirtualTilePane,new c.StandaloneHybridVirtualTilePane(g),c.OverlayLabelVirtualTilePane,c.CadastralVirtualTilePane,c.TrafficVirtualTilePane)
}e.push(c.GhostPane,c.PaneManager,c.PanEffect,c.MapDoubleClickManager,c.MapZoomControl);
a(h,e);
h.exec("ADD_PANE",[new c.DrawingPane()]);
h.exec("ADD_PANE",[new c.OverlayPane()]);
h.exec("ADD_PANE",[new c.InfoPane()]);
return h
};
b.createMiniMapApp=function(j,g,k,h){var k=k||11,h=h||{},f=new nhn.husky.HuskyCore(),i=h.sMapMode||"vector",e=window.oParamData||(nhn.map&&nhn.map.Env?nhn.map.Env.getUrlParam():null),d;
g=g.toInner();
d=[nhn.husky.CorePlugin,new c.NMap(j,h),c.Container,new c.MapConfig({point:g,zoomLevel:k}),c.MapCoordConfig,c.MousePointer,c.TileManager];
if(b.USE_OLD_CORE){d.push(new c.DefaultTilePane(i),c.HybridTilePane,c.TrafficTilePane,c.BicycleTilePane)
}else{d.push(c.BaseRealTilePane,c.HybridRealTilePane,c.TrafficAndBicycleRealTilePane,new c.BaseVirtualTilePane(i),c.BaseLabelVirtualTilePane,c.TerrainLabelVirtualTilePane,new c.StandaloneHybridVirtualTilePane(i),c.OverlayLabelVirtualTilePane,c.TrafficVirtualTilePane)
}d.push(c.PaneManager,nhn.mapservice.MarkerManager);
a(f,d);
f.exec("ADD_PANE",[new c.DrawingPane()]);
f.exec("ADD_PANE",[new c.OverlayPane()]);
f.exec("ADD_PANE",[new c.InfoPane()]);
return f
}}(window));
nhn.mapservice.MapFoggy=jindo.$Class({name:"MapFoggy",GRAY_FOGGY_CLASS:"dimmed",WHITE_FOGGY_CLASS:"blanked",$init:function(){var a=this;
this.foggy=new nhn.SimpleFoggy({showOpacity:jindo.$Fn(this._showOpacity,this).bind()(),hideOpacity:0,zIndex:32000}).attach({show:function(){a._afterShowFoggy()
},hide:function(){a._afterHideFoggy()
}});
this.clickHandler=jindo.$Fn(this._clickFoggy,this).attach(this.foggy.getFog(),"click")
},toggleSelectBox:function(b){if(jindo.$Agent().navigator().ie&&jindo.$Agent().navigator().version<=6){var a=document.body.className;
if(b=="HIDE"&&!(a.indexOf("dimmed_fix")>-1)){a=a+" dimmed_fix"
}else{if(b=="SHOW"&&(a.indexOf("dimmed_fix")>-1)){a=a.replace(/dimmed_fix/,"").replace(/\s+/g," ").replace(/\s+$/,"").replace(/^\s+/,"")
}}document.body.className=a
}},$ON_SHOW_FOGGY:function(b,a,e,c,d){this.toggleSelectBox("HIDE");
this.colorType=b?b.toUpperCase():"GRAY";
this.foggy.getFog().className=this[this.colorType+"_FOGGY_CLASS"];
this.showCallback=e;
this.foggy.show(a,d);
if(typeof(c)=="function"){this.hideBGCallback=c
}},$ON_HIDE_FOGGY:function(a){this.toggleSelectBox("SHOW");
this.hideCallback=a;
this.foggy.hide()
},_afterShowFoggy:function(){if(this.showCallback&&typeof(this.showCallback)=="function"){this.showCallback()
}this.showCallback=null
},_afterHideFoggy:function(){if(this.hideCallback&&typeof(this.hideCallback)=="function"){this.hideCallback()
}this.hideCallback=null
},_clickFoggy:function(){if(this.hideBGCallback){this.oApp.exec("HIDE_FOGGY",[this.hideBGCallback])
}},_showOpacity:function(a){if(this.colorType=="WHITE"){return 0
}else{return 0.2
}},clear:function(){this.clickHandler.detach(this.foggy.getFog(),"click")
}});
nhn.mapservice.ICommonIcon={$value:function(){return this._eIcon
},show:function(){this._eIcon.style.display=""
},hide:function(){this._eIcon.style.display="none"
},visible:function(){return(this._eIcon.style.display!="none")
},hasClass:function(a){return(" "+this._eIcon.className+" ").indexOf(" "+a+" ")>-1
},addClass:function(a){if(!this.hasClass(a)){this._eIcon.className=(this._eIcon.className+" "+a).replace(/^\s+/,"")
}},removeClass:function(a){this._eIcon.className=(" "+this._eIcon.className+" ").replace(" "+a+" "," ").replace(/\s+$/,"").replace(/^\s+/,"")
},clearClass:function(){this._eIcon.className=""
},getAttr:function(a,b){if(a=="class"||a=="className"){return this._eIcon.className
}else{return this._eIcon.getAttribute(a)
}},setAttr:function(c,f){var b=this._eIcon,d=typeof c;
if(d=="string"){b[c]=f
}else{if(d=="object"){for(var a in c){if(/^on[a-zA-Z]+$/.test(a)){b[a]=c[a];
continue
}if(typeof(f)!="undefined"&&f===null){b.removeAttribute(a)
}else{b.setAttribute(a,c[a])
}}}}},getCSS:function(b){var a=this._eIcon;
if(a.currentStyle){if(b=="cssFloat"){b="styleFloat"
}return a.currentStyle[b]||a.style[b]
}else{if(window.getComputedStyle){if(b=="cssFloat"){b="float"
}var c=a.ownerDocument||a.document||document;
return c.defaultView.getComputedStyle(a,null).getPropertyValue(b.replace(/([A-Z])/g,"-$1").toLowerCase())||a.style[b]
}else{if(b=="cssFloat"&&/MSIE/.test(window.navigator.userAgent)){b="styleFloat"
}return a.style[b]
}}return null
},setCSS:function(b,d){var c=(typeof b);
if(c=="string"){this._eIcon.style[b]=d
}else{if(c=="object"){for(var a in b){this._eIcon.style[a]=b[a]
}}}},draw:function(a,b){this._eIcon.style.left=a+"px";
this._eIcon.style.top=b+"px"
},getBound:function(c){var c=c?c:this._eIcon;
var b=parseInt(c.style.left,10)||-10000;
var a=parseInt(c.style.top,10)||-10000;
return{left:b,top:a,right:b+c.clientWidth,bottom:a+c.clientHeight}
},isCovering:function(b){var c=this.getBound();
var d=this.getBound(b);
var a=1;
return(c.top<=d.top+a&&d.bottom<=c.bottom+a&&c.left<=d.left+a&&d.right<=c.right+a)
},getURL:function(){return this.url
},getWidth:function(){return this.width
},getHeight:function(){return this.height
},getClassName:function(){return this.className
}};
nhn.mapservice.Icon=jindo.$Class({type:"Normal",$init:function(a,b){this._eIcon=this._createElement(a,b);
this.url=a;
this.width=b.width;
this.height=b.height
},_createElement:function(a,b){var c=nhn.mapcore.Image.createImage(a,b);
c.style.width=b.width+"px";
c.style.height=b.height+"px";
c.style.cursor="pointer";
c.alt="";
return c
},updateURL:nhn.mapcore.isSupportOpacity?function(b){var a=/.png$/i.test(b)||/.png\?/i.test(b);
nhn.mapcore.Image.changeSrc(this._eIcon,b,a);
this.url=b
}:function(a){nhn.mapcore.Image.changeSrc(this._eIcon,a);
this.url=a
},update:function(a,b){this.updateURL(a);
this._eIcon.style.width=b.width+"px";
this._eIcon.style.height=b.height+"px";
this.url=a;
this.width=b.width;
this.height=b.height
},clear:function(){this._eIcon=null
},getClassName:function(){return null
}});
nhn.mapcore.Util.extend(nhn.mapservice.Icon.prototype,nhn.mapservice.ICommonIcon);
nhn.mapservice.SpriteIcon=jindo.$Class({type:"Sprite",divHolder:null,$init:function(a,b,d,c,e){this._eIcon=this._createElement(a,b,d,c,e);
this.url=a;
this.width=b.width;
this.height=b.height;
this.spriteWidth=d.width;
this.spriteHeight=d.height;
this.marginX=d.marginX||this.width;
this.marginY=d.marginY||this.height;
this.className=c;
this.imgOrder=e
},_createElement:nhn.mapcore.isSupportOpacity?function(b,c,e,d,g){var f=document.createElement("div");
var a=e.marginX||c.width;
if(d){f.className=d
}f.style.position="absolute";
f.style.overflow="hidden";
f.style.width=c.width+"px";
f.style.height=c.height+"px";
f.style.cursor="pointer";
f.unselectable="on";
f.innerHTML='<img  src="https://ssl.pstatic.net/static/maps/dot.gif" width="'+e.width+'" height="'+e.height+'" style="position: absolute; left: '+(-1*a*g)+"px; top: 0px;width:"+e.width+"px;height:"+e.height+"px;visibility:visible; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"',sizingMethod='scale');\"/>";
this._insideImg=f.childNodes[0];
this._insideImg.unselectable="on";
return f
}:function(c,d,f,e,g){var b=f.marginX||d.width;
this.divHolder.innerHTML="<div "+(e?'class="'+e+'" ':"")+'style="position:absolute;overflow:hidden;width:'+d.width+"px;height:"+d.height+'px;cursor:pointer;"><img src="'+c+'" style="position: absolute; left: '+(-1*b*g)+'px; top: 0px;"/></div>';
var a=this.divHolder.removeChild(this.divHolder.firstChild);
nhn.mapcore.Util.disableSelection(a);
this._insideImg=a.childNodes[0];
nhn.mapcore.Util.disableSelection(this._insideImg);
this.divHolder.innerHTML="";
return a
},getImageOrder:function(){return this.imgOrder
},select:function(){if(this.hasOutlineStyle()){this.moveVertical(-1)
}},unselect:function(){if(this.hasOutlineStyle()){this.moveVertical(0)
}},getSpriteSize:function(){return{width:this.spriteWidth,height:this.spriteHeight,marginX:this.marginX||this.width,marginY:this.marginY||this.height}
},moveHorizontal:function(a){this._insideImg.style.left=-1*this.marginX*a+"px"
},moveVertical:function(a){this._insideImg.style.top=this.marginY*a+"px"
},updateURL:nhn.mapcore.isSupportOpacity?function(b){var a=/.png$/i.test(b)||/.png\?/i.test(b);
nhn.mapcore.Image.changeSrc(this._insideImg,b,a)
}:function(a){nhn.mapcore.Image.changeSrc(this._insideImg,a)
},update:function(a,b,d,c,e){this.updateURL(a);
this._eIcon.style.width=b.width+"px";
this._eIcon.style.height=b.height+"px";
this._eIcon.className=c;
this._insideImg.style.width=d.width+"px";
this._insideImg.style.height=d.height+"px";
this.url=a;
this.width=b.width;
this.height=b.height;
this.spriteWidth=d.width;
this.spriteHeight=d.height;
this.marginX=d.marginX||this.width;
this.marginY=d.marginY||this.height;
this.className=c;
this.imgOrder=e;
this.moveHorizontal(e)
},clear:function(){this._eIcon=null;
this._insideImg=null
},hasOutlineStyle:function(){return(this.spriteHeight>=this.height*2)
}});
nhn.mapcore.Util.extend(nhn.mapservice.SpriteIcon.prototype,nhn.mapservice.ICommonIcon);
nhn.mapservice.TextIcon=jindo.$Class({type:"Text",divHolder:null,$init:function(c,a,b){this._eIcon=this._createElement(c,a,b);
this.width=a.width;
this.height=a.height;
this.className=b
},_createElement:function(d,b,c){this.divHolder.innerHTML='<div class="'+c+'" style="width:'+b.width+"px;height:"+b.height+'px;cursor:pointer;"><span>'+d+"</span></div>";
var a=this.divHolder.removeChild(this.divHolder.firstChild);
nhn.mapcore.Util.disableSelection(a);
this._elTitle=a.getElementsByTagName("span")[0];
nhn.mapcore.Util.disableSelection(this._elTitle);
return a
},updateText:function(a){this._elTitle.innerHTML=a
},getURL:function(){return null
},getText:function(){return this._elTitle.innerHTML
},select:function(){this._elTitle.className="on"
},unselect:function(){this._elTitle.className=""
},update:function(c,a,b){this._eIcon.className=b;
this._eIcon.style.width=a.width+"px";
this._eIcon.style.height=a.height+"px";
this.updateText(c);
this.width=a.width;
this.height=a.height;
this.className=b
},clear:function(){this._eIcon=null
}});
nhn.mapcore.Util.extend(nhn.mapservice.TextIcon.prototype,nhn.mapservice.ICommonIcon);
nhn.mapservice.ICommonMarker={HIGHLIGHT_ZINDEX:5000,PREFIX_ID:"MARKER_",title:"무제",zIndex:1,group:"",noLabel:false,$init:function(a,b){this.point=a;
this._fillAttribute(b);
this.icon=this._createIcon(b);
this.offset=this._fillOffset(b);
this._setProperties(b)
},_fillAttribute:function(d){var f;
for(var c in d){if(c!="icon"&&typeof(this[c])!="undefined"){this[c]=d[c]
}}this["id"]=(d&&typeof(d.id)!="undefined"?d.id:this.PREFIX_ID+nhn.mapservice.Util.generateUniqueKey());
var b,a=["Load","Click","Select","MouseOver","MouseOut","Draw"];
for(var e=0;
e<a.length;
e++){b="on"+a[e];
if(d&&d[b]){this[b]=d[b]||nhn.mapcore.Util.emptyFunction
}else{this[b]=(b=="onDraw"?this._draw:nhn.mapcore.Util.emptyFunction)
}}},_fillOffset:function(a){return(a&&a.icon?(a.icon.offset?a.icon.offset:{width:Math.round(this.icon.getWidth()/2),height:this.icon.getHeight()}):this.defaultIcon.offset)
},_setProperties:function(a){this.icon.setAttr("id",this.id);
this.icon.addClass("_nmap_marker");
this.onLoad(this);
this.setZIndex(this.zIndex);
this.options=this._copyOptions(a)
},update:function(a,b){this.show();
this.point=a;
b=b||this.defaultIcon;
this._fillAttribute(b);
this.offset=this._fillOffset(b);
this.updateIcon(b.icon||this.defaultIcon);
this._setProperties(b);
return this
},updateIcon:function(){},toInitState:function(){this.isForcedSelection=false;
if(this.icon.updateURL){this.icon.updateURL(nhn.mapcore.mapSpec.dotTileUrl)
}this.unselect();
var d=["point","offset","options","title","zIndex","groupIndex","group","id","onLoad","onClick","onSelect","onMouseOver","onMouseOut","onDraw"];
var a,c;
for(var b=0;
b<d.length;
b++){a=d[b];
switch(a){case"group":this[a]="";
break;
case"zIndex":this[a]=1;
break;
case"groupIndex":this[a]=0;
break;
case"title":this[a]="무제";
break;
default:this[a]=null;
break
}}this.icon.clearClass();
this.icon.addClass("_nmap_marker");
this.icon.setAttr("id",null);
this.setZIndex(this.zIndex);
this.hide()
},clear:function(){this.icon.clear();
this.icon=this.point=this.options=null
},_copyOptions:function(d){if(!d){return null
}var f={},e;
for(var c in d){e=d[c];
if(c=="icon"||c=="smallIcon"){var b={};
for(var a in e){b[a]=e[a]
}f[c]=b
}else{f[c]=d[c]
}}return f
},_draw:function(a,c,b){this.icon.draw(c.left,c.top)
},select:function(){if(!this.isForcedSelection){this.icon.setCSS("zIndex",this.HIGHLIGHT_ZINDEX)
}},unselect:function(){if(!this.isForcedSelection){this.setZIndex(this.zIndex)
}},selectWithForce:function(){this.select();
this.isForcedSelection=true
},unselectWithForce:function(){this.isForcedSelection=false;
this.unselect()
},focus:function(){var a=this.HIGHLIGHT_ZINDEX;
if(this.icon.getCSS("zIndex")>=a){return
}this.icon.setCSS("zIndex",(this.zIndex*1)+a)
},blur:function(){this.setZIndex(this.zIndex)
},show:function(){this.icon.show()
},hide:function(){this.icon.hide()
},visible:function(){return this.icon.visible()
},draw:function(a,b){this.icon.draw(a,b)
},isCovering:function(a){return this.icon.isCovering(a)
},getElement:function(){return this.icon.$value()
},getBound:function(){return this.icon.getBound()
},getURL:function(){return this.icon.getURL()
},getOffset:function(){return this.offset
},getWidth:function(){return this.icon.getWidth()
},getHeight:function(){return this.icon.getHeight()
},getSize:function(){return{width:this.icon.getWidth(),height:this.icon.getHeight()}
},getType:function(){return this.icon.type
},getIcon:function(){return this.icon||this.options.icon
},getId:function(){return this.id||this.options.id
},getTitle:function(){return this.title||this.options.title
},getPoint:function(){return this.point||this.options.point
},setZIndex:function(b){var a=this.getGroupIndex();
this.zIndex=b;
this.icon.setCSS("zIndex",a+this.zIndex)
},getZIndex:function(){return this.icon.getCSS("zIndex")
},setGroupIndex:function(a){this.groupIndex=a||0
},getGroupIndex:function(){return this.groupIndex||0
},redraw:function(){},destroy:function(){}};
nhn.mapservice.Marker=jindo.$Class({defaultIcon:{url:"https://ssl.pstatic.net/static/maps/mymap/ic_gr.png",size:{width:31,height:31},offset:{width:10,height:31}},_createIcon:function(a){var b;
if(a&&a.icon){if(a.icon instanceof nhn.mapservice.Icon){return a.icon
}else{b=a.icon
}}else{b=this.defaultIcon
}return new nhn.mapservice.Icon(b.url,b.size)
},updateIcon:function(b){var a={};
if(b instanceof nhn.mapservice.Icon){a={width:b.width,height:b.height}
}else{a=b.size
}this.icon.update(b.url,a)
},toDupLayerInfo:function(){var a=this.options.smallIcon;
return{type:this.getType(),title:this.title,id:this.id,url:a.url,className:a.className,iconWidth:a.iconWidth,iconHeight:a.iconHeight}
}});
nhn.mapcore.Util.extend(nhn.mapservice.Marker.prototype,nhn.mapservice.ICommonMarker);
nhn.mapservice.SpriteMarker=jindo.$Class({defaultIcon:{url:"https://ssl.pstatic.net/static/maps2/icons/path_m.png",size:{width:35,height:49},spriteSize:{width:735,height:98},spriteClass:"sp_path_m",imgOrder:0,offset:{width:18,height:49}},_createIcon:function(a){var b;
if(a&&a.icon){if(a.icon instanceof nhn.mapservice.SpriteIcon){return a.icon
}else{b=a.icon
}}else{b=this.defaultIcon
}return new nhn.mapservice.SpriteIcon(b.url,b.size,b.spriteSize,b.spriteClass,b.imgOrder)
},select:function(){if(!this.isForcedSelection){this.icon.setCSS("zIndex",this.HIGHLIGHT_ZINDEX);
this.icon.select()
}},unselect:function(){if(!this.isForcedSelection){this.setZIndex(this.zIndex);
this.icon.unselect()
}},focus:function(){var a=this.HIGHLIGHT_ZINDEX;
this.icon.select();
if(this.icon.getCSS("zIndex")>=a){return
}this.icon.setCSS("zIndex",(this.zIndex*1)+a)
},blur:function(){this.icon.unselect();
this.setZIndex(this.zIndex)
},updateIcon:function(a){this.icon.update(a.url,a.size,a.spriteSize,a.spriteClass,a.imgOrder)
},toDupLayerInfo:function(){var a=this.options.smallIcon;
return{type:this.getType(),title:this.title,id:this.id,url:a.url,className:a.className,iconWidth:a.iconWidth,iconHeight:a.iconHeight,spriteWidth:a.spriteWidth,spriteHeight:a.spriteHeight,xOffset:a.xOffset,yOffset:a.yOffset}
}});
nhn.mapcore.Util.extend(nhn.mapservice.SpriteMarker.prototype,nhn.mapservice.ICommonMarker);
nhn.mapservice.TextMarker=jindo.$Class({defaultIcon:{text:1,size:{width:21,height:21},className:"sym_map"},_createIcon:function(a){var b;
if(a&&a.icon){if(a.icon instanceof nhn.mapservice.TextIcon){return a.icon
}else{b=a.icon
}}else{b=this.defaultIcon
}return new nhn.mapservice.TextIcon(b.text,b.size,b.className)
},select:function(){if(!this.isForcedSelection){this.icon.setCSS("zIndex",this.HIGHLIGHT_ZINDEX);
this.icon.select()
}},unselect:function(){if(!this.isForcedSelection){this.setZIndex(this.zIndex);
this.icon.unselect()
}},focus:function(){var a=this.HIGHLIGHT_ZINDEX;
this.icon.select();
if(this.icon.getCSS("zIndex")>=a){return
}this.icon.setCSS("zIndex",(this.zIndex*1)+a)
},blur:function(){this.icon.unselect();
this.setZIndex(this.zIndex)
},updateIcon:function(a){this.icon.update(a.text,a.size,a.className)
},toDupLayerInfo:function(){var a=this.options.smallIcon;
return{type:this.getType(),title:this.title,id:this.id,url:a.url,className:a.className,spriteWidth:a.spriteWidth,spriteHeight:a.spriteHeight,text:this.icon.getText()}
}});
nhn.mapcore.Util.extend(nhn.mapservice.TextMarker.prototype,nhn.mapservice.ICommonMarker);
nhn.mapservice.Util={MouseReleseWithDragging:jindo.$Class({$init:function(a){this._bMouseDraging=false;
this._bMouseRelesed=false;
this.fnCallback=a.fnCallBack;
this.elTarget=a.elTarget;
jindo.$Fn(this._onMouseOut,this).attach(this.elTarget,"mouseout");
jindo.$Fn(this._onMouseOver,this).attach(this.elTarget,"mouseover");
jindo.$Fn(this._onMouseDown,this).attach(this.elTarget,"mousedown");
jindo.$Fn(this._onMouseUp,this).attach(this.elTarget,"mouseup");
jindo.$Fn(this._onMouseUp,this).attach(a.elWrapper,"mouseup")
},_onMouseOut:function(){if(this._bMouseDraging&&!this._bMouseRelesed){this._bMouseRelesed=true
}},_onMouseOver:function(){if(this._bMouseDraging&&this._bMouseRelesed){this._bMouseRelesed=false
}},_onMouseDown:function(){this._bMouseDraging=true
},_onMouseUp:function(a){var b=a.currentElement;
if(b!==this.elTarget){if(this._bMouseDraging){this.fnCallback()
}}this._bMouseDraging=false
}}),getMarkerInfoExtractFromId:function(b){if(!b){return null
}var a=null;
b.replace(/^(\w+)_(\w+)_(\d+)$/,function(d,c,f,e){a={type:c,id:f,index:e}
});
return a
},createDefaultLayer:function(b){var a=jindo.$("<div style='position:absolute; top:0px; left:0px; z-index:0; margin:0; padding:0; border:0; overflow:visible;'>");
if(b){a=this.setLayerAttrs(a,b)
}if(nhn.mapcore.browser.ie){a.unselectable="on"
}else{a.style.MozUserSelect="-moz-none"
}return a
},setLayerAttrs:function(a,b){for(var c in b){if(typeof b[c]!="object"){a[c]=b[c]
}else{arguments.callee.call(this,a[c],b[c])
}}return a
},generateUniqueKey:function(){var b=(new Date()).getTime().toString(16);
var d=Math.random()+"";
var a=(d.substring(2,d.length)-0).toString(16);
var c=this.pad(b,12,"0")+this.pad(a,16,"0").substring(0,12);
return c
},pad:function(b,d,c){if(!c){c=" "
}b=b+"";
if(b.length<d){var a=Array((d-b.length)+1);
a[a.length-1]=b;
b=a.join(c)
}return b
},arrangeCenter:function(a,c){if(typeof c=="undefined"){c=a.parentNode
}var b=[c.offsetWidth,c.offsetHeight];
var d=[a.offsetWidth,a.offsetHeight];
a.style.left=(b[0]-d[0])/2+"px";
a.style.top=(b[1]-d[1])/2+"px"
},setImageOn:function(c,b){var a=c.src;
a=a.replace(/(\w+)(\.\w+)(\?.*)?$/,function(d,g,e,f){g=g.replace(/_on$/,"");
if(b){g=g+"_on"
}return g+e+(f||"")
});
c.src=a
},getImageOn:function(a){return/(\w+)_on(\.\w+)(\?.*)?$/.test(a.src)
},getByteLength:function(a){var d=0;
for(var b=0,c=a.length;
b<c;
b++){d+=(a.charCodeAt(b)>127?2:1)
}return d
},getCharByte:function(a){if(a===null||a.length<1){return 0
}var b=0;
var c=escape(a);
if(c.length==1){b++
}else{if(c.indexOf("%u")!=-1){b+=2
}else{if(c.indexOf("%")!=-1){b+=c.length/3
}}}return b
},cutStringToByte:function(d,f,e){if(d===null||d.length===0){return d
}d=d.replace(/  +/g," ");
if(!e&&e!=""){e="..."
}var c=f;
var g=0;
var b=d.length;
for(var a=0;
a<b;
a++){g+=this.getCharByte(d.charAt(a));
if(g==c){if(a==b-1){return d
}else{return d.substring(0,a)+e
}}else{if(g>c){return d.substring(0,a)+e
}}}return d
},ellipsis:function(e){var d=jindo.$$("._nmap_ellipsis_text",e);
for(var b=0,c;
c=d[b];
b++){var a=nhn.mapcore.Util.mapGetParentByClass(c,"_nmap_ellipsis_wrap");
a&&nhn.mapservice.Util.ellipsisString(a,c)
}},ellipsisWithWidth:function(e){var d=jindo.$$("._nmap_ellipsis_with_width_text",e);
for(var b=0,c;
c=d[b];
b++){var a=nhn.mapcore.Util.mapGetParentByClass(c,"_nmap_ellipsis_with_width_wrap");
nhn.mapservice.Util.ellipsisStringWithWidth(a,c)
}},ellipsisStringWithWidth:function(a,c){var e=c.innerHTML;
var d=e.length;
var b=a.offsetWidth;
if(navigator.appName=="Microsoft Internet Explorer"){var b=a.offsetWidth-35
}if(c.offsetLeft+c.offsetWidth>b){do{c.innerHTML=e.substring(0,d)+"...";
d--
}while((c.offsetLeft+c.offsetWidth)>b)
}},ellipsisString:function(c,o,q,b){var f=nhn.mapcore.Util.mapGetClass(o,"_nmap_ellipsised");
if(!f){o.className+=" _nmap_ellipsised"
}if(f&&!q){return
}var h=jindo.$Element(o);
var k=o.innerHTML;
var a,g;
var d,m;
o.title=nhn.mapcore.Util.htmlSpecialCharsDecode(k.replace(/<[^>]*>/g,""));
var l=jindo.$Element(c);
var n=Math.max(l.height(),c.scrollHeight,c.clientHeight,h.height());
var e=true;
for(var j=(b)?b:0,p=k.length;
j<=p;
j++){g=k.substr(0,j).replace(/(<[^>]*|&[a-z]*|&#[0-9]*)$/gi,"")+"...";
if(g==a){continue
}h.html(g);
m=Math.max(l.height(),c.scrollHeight,c.clientHeight,h.height());
if(e&&Math.abs(m-n)<=2){h.html(k);
break
}if(d&&Math.abs(m-d)>2){h.html(a||"");
break
}if(l.width()<h.width()){h.html(a);
break
}d=m;
a=g;
e=false
}},openNewWindow:function(d,f,c,b,g){var e=[];
e.push("height="+b);
e.push("width="+c);
if(g==null){e.push("menubar=no");
e.push("toolbar=no");
e.push("status=yes");
e.push("location=yes")
}else{g=(g)?","+g:""
}var a=window.open(d,f||"S"+new Date().getTime(),e.join(",")+g,false);
a.focus()
},convertStringPointToObject:function(d){var c=/([0-9.]+),([0-9.]+),([\w\W]+)/;
var a=c.exec(d);
if(a===null){var b=d.split(",");
if(b.length==2){return{x:b[0],y:b[1],title:""}
}else{return{x:"",y:"",title:""}
}}return{x:a[1],y:a[2],title:a[3]}
},toFixed:function(c,b){var a=Math.pow(10,b||0);
c=Math.round((c||0)*a)/a;
return c.toFixed(b)
},windowResizeTo:function(a,b){var d=0;
var c=function(g,i){if(++d>70){return
}try{window.resizeTo(g,i)
}catch(j){var f=arguments.callee;
setTimeout(function(){f(g,i)
},100)
}};
c(a,b)
},makeMeterLabel:function(e,d,f){var g,b,a=[];
if(1000>e){g=e;
b="m"
}else{g=parseFloat(nhn.mapservice.Util.toFixed(e/1000,2),10);
b="km"
}if(d){a.push("<"+d+">")
}a.push(g);
if(d){a.push("</"+d+">")
}if(f){a.push("<"+f+">")
}a.push(b);
if(f){a.push("</"+f+">")
}return a.join("")
},makeTimeLabel:function(b,d){var e,c;
var a=[];
if(b<=0){if(d){a.push("<"+d+">")
}a.push(b);
if(d){a.push("</"+d+">")
}a.push("분");
return a.join("")
}c=Math.floor(b/60);
e=Math.floor(b%60);
if(0<e){if(d){a.push("<"+d+">")
}a.push(e);
if(d){a.push("</"+d+">")
}a.push("분")
}if(0<c){a.unshift("시간 ");
if(d){a.unshift("</"+d+">")
}a.unshift(c);
if(d){a.unshift("<"+d+">")
}}return a.join("")
},makeCommaNumber:function(b){if(!b){return"0"
}if(typeof b!="string"){b=String(b)
}var a=/([0-9])([0-9]{3})($|,)/;
while(a.test(b)){b=b.replace(a,"$1,$2$3")
}return b
},wrapSpanTagByWord:function(d){var b=d.split(" ");
var c=[];
for(var a=0;
a<b.length;
a++){c.push("<span>");
c.push(b[a]);
c.push("</span> ")
}return c.join("")
},wrapSpanTagByWordWithParen:function(b){var a=b.replace(/\(/g," (").replace(/\)/g,") ");
return this.wrapSpanTagByWord(a)
},getClassNameQuery:function(a){var d=a.split(" ");
var b=[];
for(var c=0;
c<d.length;
c++){b.push(".");
b.push(d[c])
}return b.join("")
},BoundBox:jindo.$Class({$init:function(){this._xn=Number.MAX_VALUE;
this._yn=Number.MAX_VALUE;
this._xm=0;
this._ym=0
},set:function(a,b){if(this._xn>a){this._xn=a
}if(this._yn>b){this._yn=b
}if(this._xm<a){this._xm=a
}if(this._ym<b){this._ym=b
}},get:function(){return[this._xn,this._yn,this._xm,this._ym]
},clear:function(){this.$init()
}}),isObjectContains:function(c,e,b){if(typeof e!="object"){return c==e
}var a=true;
for(var d in e){if(!(d in c)){a=false;
break
}if(typeof c[d]=="object"&&!b){a=arguments.callee(c[d],e[d],b);
if(!a){break
}}else{if(!(d in c&&c[d]==e[d])){a=false;
break
}}}return a
},cloneObject:function(a,b){if((typeof a) in ["string","number","boolean","function","undefined"]){return a
}if(a===null){return null
}var c=(a instanceof Array)?[]:{};
for(var d in a){if(typeof a[d]!="object"){c[d]=a[d]
}else{if(!b){c[d]=this.cloneObject(a[d],b)
}else{c[d]=a[d]
}}}return c
},getKeysFromObjectByValue:function(b,c){var a=jindo.$H(b).filter(function(e,d){return this.isObjectMatch(d,c)
});
return a.keys()
},intersectArray:function(c,b){var a=jindo.$A(c).filter(function(d){return jindo.$A(b).has(d)
});
return a.$value()
},copyObjectProperties:function(a,c,e){if(!e){e=jindo.$H(a).keys()
}for(var d=0,b=e.length;
d<b;
d++){c[e[d]]=a[e[d]]
}return c
},copyObjectMappedProperties:function(a,b,c){for(var d in c){if(typeof a[d]!="undefined"){b[c[d]]=a[d]
}}return b
},overwrite:function(a,d){var e=jindo.$Json(d).toString();
var b=jindo.$Json(d).$value();
for(var c in b){a[c]=b[c]
}e=b=null;
return a
},isValidQuery:function(c,a,b){if(/^\s*$/.test(c)||jindo.$Element(a).hasClass(b)){alert("검색어를 입력해 주세요.");
a.value="";
a.select();
a.focus();
return false
}return true
},stripTags:function(a){return a.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,"")
},getPolyLineInfoForPrintMap:function(b){var a=[];
for(var d=0;
d<b.length;
d++){var c={name:"polyline",points:b[d].innerPoints,strokeWeight:b[d].getStyle("strokeWidth"),strokeColor:b[d].getStyle("strokeColor"),strokeOpacity:b[d].getStyle("strokeOpacity")};
a.push(c)
}return{name:"drawing",data:a}
},_stringifyRoute:function(a){var c=[];
for(var b=0,d;
d=a[b];
b++){c.push([d.x,",",d.y].join(""))
}return c.join(" ")
}};
(function(){nhn.mapservice.Util.XHR=jindo.$Class({$init:function(b){var a=this;
this._progressing=false;
this._timer=null;
b=b||{timeout:30};
if(!b.type||b.type.toUpperCase()!="JSONP"){b.type="XHR"
}b.onload=function(c){a._onComplete("load",c)
};
b.onerror=function(c){a._onComplete("error",c)
};
b.ontimeout=function(c){a._onComplete("timeout",null)
};
this._timeout=b.timeout||0;
delete b.timeout;
this._ajax=jindo.$Ajax("DUMMY",b)
},_onComplete:function(b,a){if(b=="error"&&a.status()<=0){return
}this._progressing=false;
if(this._timer){clearTimeout(this._timer)
}this._timer=null;
this.fireEvent(b,{ajax:this._ajax,response:a});
this.fireEvent("complete",{ajax:this._ajax,response:a})
},request:function(b,d,c){var a=this;
this.abort();
c=c||{};
this._ajax._url=d;
this._ajax.option({method:b});
if(!this.fireEvent("request",{ajax:this._ajax,data:c})){return false
}this._progressing=true;
this._ajax.request(c);
if(this._progressing&&this._timeout){this._timer=setTimeout(function(){a.abort();
a.fireEvent("timeout")
},this._timeout*1000)
}return true
},abort:function(){if(this._progressing){this._onComplete("abort",{ajax:this._ajax})
}this._ajax.abort()
},isProgressing:function(){return this._progressing
}}).extend(nhn.Component)
})();
nhn.mapservice.TemplateRepos.add({indicate:function(_d_){var p=[];
with(_d_){p.push('<div class="nmap_indicate">  <p style="display:none" class="nmap_int_scroll nmap_int_scroll_top"><a href="#">위로</a></p>  <p style="display:none" class="nmap_int_scroll nmap_int_scroll_right"><a href="#">우측으로</a></p>  <p style="display:none" class="nmap_int_scroll nmap_int_scroll_bottom"><a href="#">아래로</a></p>  <p style="display:none;left:3px" class="nmap_int_scroll nmap_int_scroll_left"><a href="#">좌측으로</a></p> </div>')
}return p.join("")
},zoom_slider:function(_d_){var p=[];
with(_d_){p.push('<div class="mapctrl_zoom">  <div class="ctrl_zoomout">   <a href="#" title="확대">확대</a>  </div>  <div class="ctrl_zoomlevel">   <div class="ctrl_scale_on"></div>   <div class="ctrl_scale_off" style="height:56px"></div>   <div class="ctrl_slider" style="top:56px"><a href="#">확대,축소 슬라이더</a></div>  </div>  <div class="ctrl_zoomin">   <a href="#" title="축소">축소</a>  </div> </div>')
}return p.join("")
},print_zoom_slider:function(_d_){var p=[];
with(_d_){p.push('<div class="ctr_zoom noprint _none_pointer">  <div class="ctr_plus nclicks(pri.zoomin)"><img width="26" height="22" class="" src="https://ssl.pstatic.net/static/maps2/blank.gif" alt="확대"></div>  <div class="ctr_minus nclicks(pri.zoomout)"><img width="26" height="23" class="" src="https://ssl.pstatic.net/static/maps2/blank.gif" alt="축소"></div>  <div class="ctr_refresh nclicks(pri.back) _btn_back"><img width="26" height="20" class="" src="https://ssl.pstatic.net/static/maps2/blank.gif" alt="새로고침"></div> </div>')
}return p.join("")
},zoom_slider_helper:function(_d_){var p=[];
with(_d_){p.push('<div class="ctr_legend noprint" style="display:none;">  <div class="ctr_legend1"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="36" height="15" alt="부동산"/></div>  <div class="ctr_legend2"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="36" height="15" alt="거리"/></div>  <div class="ctr_legend3"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="36" height="15" alt="읍.면.동"/></div>  <div class="ctr_legend4"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="36" height="15" alt="시.군.구"/></div>  <div class="ctr_legend5"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="36" height="15" alt="시.도"/></div>  <div class="ctr_legend6"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="36" height="15" alt="국가"/></div> </div>')
}return p.join("")
},rangebox:function(_d_){var p=[];
with(_d_){p.push('<div class="rangebox" style="display:none;">  <div class="outer"><div class="inner"></div></div> </div>')
}return p.join("")
},insertMapController:function(_d_){var p=[];
with(_d_){p.push('<div id="_msvc_controller" class="map_controller">  <div class="mapctrl_zoom">   <!-- [D] : 딤드시 ctrl_zoomout_dimmed 추가 -->   <div class="ctrl_zoomin">    <a href="#" title="확대">확대</a>   </div>   <div class="ctrl_zoomlevel">    <div class="ctrl_scale_on"></div>    <!-- [D] : 슬라이더를 내리면 7px씩 증기함 (아래 top값과 같음) -->    <div class="ctrl_scale_off" style="height:56px"></div>    <!-- [D] : 딤드시 ctrl_slider_dimmed 추가, 7px 씩 증가함 (0,7,14,21,28,35,42,49,56,63,70,77,84,91) -->    <div class="ctrl_slider" style="top:56px"><a href="#">확대,축소 슬라이더</a></div>   </div>   <!-- [D] : 딤드시 ctrl_zoomin_dimmed 추가 -->   <div class="ctrl_zoomout">    <a href="#" title="축소">축소</a>   </div>  </div>  <!-- Map Controller Legend -->  <div class="mapctrl_legend" style="display:none">   <div class="lg"><span>부동산</span></div>   <div class="lg2"><span>거리</span></div>   <div class="lg3"><span>읍,면,동</span></div>   <div class="lg4"><span>시,군,구</span></div>   <div class="lg5"><span>시,도</span></div>   <div class="lg6"><span>국가</span></div>  </div>  <!-- //Map Controller Legend -->  <!-- [D] : 메시지 노출은 display:none, display:block 으로 제어 -->  <div class="mes mes_air" style="display:none">   <div class="inner"><p>현재 위치의 <strong>항공뷰</strong>가<br>준비되어 있지 않습니다.</p></div>  </div>  <div class="mes mes_road" style="display:none">   <div class="inner"><p><strong>아이콘을 클릭</strong>하면 <em>거리뷰</em>를<br>사용하실 수 있습니다.</p></div>  </div>  <div class="mes mes_sate" style="display:none">   <div class="inner"><p>이 배율로는 <strong>위성 지도</strong>에서<br>볼 수 있습니다.</p></div>  </div>  <div class="mes mes_traffic" style="display:none">   <div class="inner"><p>이 배율에서는 <strong>주변 대중교통</strong><br>정보를 볼 수 없습니다.</p></div>  </div>  <div class="mes mes_round" style="display:none">   <div class="inner"><p>이 배율에서는 <strong>주변 검색</strong><br>결과를 볼 수 없습니다.</p></div>  </div>  <div class="mes mes_road_not" style="display:none">   <div class="inner"><p><strong>거리뷰</strong> 상태에서는 해당 기능을<br>사용할 수 없습니다.</p></div>  </div>  <div class="mes mes_expand" style="display:none">   <div class="inner"><p><strong>범위 확대</strong> <span>|</span> 지도 위에서 <em>지정한<br>범위</em>를 확대하여 보기</p></div>  </div>  <div class="mes mes_measure" style="display:none">   <div class="inner"><p><strong>거리재기</strong> <span>|</span> 지도 위 한 지점에서<br>다른 지점까지의 거리를 측정</p></div>  </div> </div>')
}return p.join("")
},controller:function(_d_){var p=[];
with(_d_){p.push('<div class="map_controller" style="z-index:32002;">  <div class="mapctrl_view" data-m-preload="panorama">   <!-- [D] : 활성화시 ctrl_air_on 추가, 딤드시 ctrl_air_dimmed 추가 -->   <div class="ctrl_air _none_pointer">    <a href="#" title="항공뷰 아이콘 보기">항공뷰</a>   </div>   <!-- [D] : 활성화시 ctrl_road_on 추가, 딤드시 ctrl_road_dimmed 추가 -->   <div class="ctrl_road _none_pointer">    <a href="#">거리뷰</a>   </div>  </div>  <div class="mapctrl_zoom _none_pointer">   <!-- [D] : 딤드시 ctrl_zoomout_dimmed 추가 -->   <div class="ctrl_zoomin">    <a href="#" title="확대" class="_none_pointer nclicks(mrt.lvup)">확대</a>   </div>   <div class="ctrl_zoomlevel _none_pointer">    <div class="ctrl_scale_on _none_pointer"></div>    <!-- [D] : 슬라이더를 내리면 7px씩 증기함 (아래 top값과 같음) -->    <div class="ctrl_scale_off _none_pointer" style="height:105px"></div>    <!-- [D] : 딤드시 ctrl_slider_dimmed 추가, 7px 씩 증가함 (0,7,14,21,28,35,42,49,56,63,70,77,84,91) -->    <div class="ctrl_slider slider-thumb" style="top:105px"><a href="#">확대,축소 슬라이더</a></div>   </div>   <!-- [D] : 딤드시 ctrl_zoomin_dimmed 추가 -->   <div class="ctrl_zoomout">    <a href="#" title="축소" class="_none_pointer nclicks(mrt.lvdown)">축소</a>   </div>  </div>  <div class="minimap_controller" style="display:none;position:relative;top:auto;right:auto;margin-bottom:2px;">   <div class="mm_zoom _none_pointer">    <div class="minictrl_plus"><a href="#" data-m-zoom-command="zoomin" class="nclicks(pno*m.zoomin)" title="확대">확대</a></div>    <div class="minictrl_minus"><a href="#" data-m-zoom-command="zoomout" class="nclicks(pno*m.zoomout)" title="축소">축소</a></div>    <div class="minictrl_refresh"><a href="#" data-m-zoom-command="refresh" class="nclicks(pno*m.back)" title="초기화">초기화</a></div>   </div>  </div>  <!-- Map Controller Legend -->  <div class="mapctrl_legend" style="display:none">   <div class="lg"><span>부동산</span></div>   <div class="lg2"><span>거리</span></div>   <div class="lg3"><span>읍,면,동</span></div>   <div class="lg4"><span>시,군,구</span></div>   <div class="lg5"><span>시,도</span></div>   <div class="lg6"><span>국가</span></div>  </div>  <!-- //Map Controller Legend -->  <!-- Map Controller Tool -->  <div class="mapctrl_tool _none_pointer">   <!-- [D] : 활성화시 ctrl_expand_on 추가, 딤드시 ctrl_expand_dimmed 추가 -->   <div class="ctrl_expand">    <a href="#" title="범위 확대" class="nclicks(mrt.selectzoom)">범위 확대</a>   </div>   <!-- [D] : 활성화시 ctrl_measure_on 추가, 딤드시 ctrl_measure_dimmed 추가 -->   <div class="ctrl_measure">    <a href="#" title="거리재기">거리재기</a>   </div>  </div>  <!-- Map Refresh -->  <!-- [D] : 20111201 추가 -->  <div class="mapctrl_refresh" style="display:none">   <div class="ctrl_refresh">    <a href="#" title="모두 지우기" class="nclicks(mrt.delall)">모두 지우기</a>   </div>  </div>  <!-- //Map Refresh -->  <!-- //Map Controller Tool -->  <!-- [D] : 메시지 노출은 display:none, display:block 으로 제어 -->  <div class="mes mes_air" style="display:none">   <div class="inner"><p>현재 위치의 <strong>항공뷰</strong>가<br>준비되어 있지 않습니다.</p></div>  </div>  <div class="mes mes_road" style="display:none">   <div class="inner"><p><strong>아이콘을 클릭</strong>하면 <em>거리뷰</em>를<br>사용하실 수 있습니다.</p></div>  </div>  <div class="mes mes_sate" style="display:none">   <div class="inner"><p>이 배율로는 <strong>위성 지도</strong>에서<br>볼 수 있습니다.</p></div>  </div>  <div class="mes mes_traffic" style="display:none">   <div class="inner"><p>이 배율에서는 <strong>주변 대중교통</strong><br>정보를 볼 수 없습니다.</p></div>  </div>  <div class="mes mes_round" style="display:none">   <div class="inner"><p>이 배율에서는 <strong>주변 검색</strong><br>결과를 볼 수 없습니다.</p></div>  </div>  <div class="mes mes_road_not" style="display:none">   <div class="inner"><p><strong>거리뷰</strong> 상태에서는 해당 기능을<br>사용할 수 없습니다.</p></div>  </div> </div>')
}return p.join("")
},toolbar:function(_d_){var p=[];
with(_d_){p.push('<div class="tools dialog _dialog _none_pointer">    <div class="tool1" style="display:block;">     <div class="tool1_bg"></div>     <div class="tool1_1 nclicks(',AREA,'.selectzoomin)"><img src="https://ssl.pstatic.net/static/maps/blank.gif" width="16" height="16" alt="범위 확대" title="범위 확대"/></div>     <div class="lay_tool too1_1_info">      <strong>범위 확대</strong> 지도 위에서 지정한 범위를 확대하여 보기     </div>     <div class="tool1_2 nclicks(',AREA,'.distance)"><img src="https://ssl.pstatic.net/static/maps/blank.gif" width="16" height="16" alt="거리재기" title="거리재기"/></div>     <div class="lay_tool too1_2_info">      <strong>거리재기</strong> 지도 위 한 지점에서 다른 지점까지의 거리를 측정     </div>     <div class="tool1_3 nclicks(',AREA,'.delete)"><img src="https://ssl.pstatic.net/static/maps/blank.gif" width="16" height="16" alt="모두 지우기" title="모두 지우기"/></div>    </div>   </div>')
}return p.join("")
},progressbar:function(_d_){var p=[];
with(_d_){p.push('<div class="ly_loading ly_loading2">  <span class="load"></span><span class="tit">요청한 작업을 처리하고 있습니다.</span> </div>')
}return p.join("")
},connection_err:function(_d_){var p=[];
with(_d_){p.push('<div class="connection_err lay_alert" style="z-index:32001; top:260px; left:340px; display:none">  <div class="lay_content">  <p class="lay_head3"><strong>일시적인 오류로<br/>서비스를 이용할 수 없습니다.</strong></p>  <p class="lay_info1">잠시 후 다시 시도해 주세요.</p>  </div>  <p class="lay_act"><a href="#" class="_close _default_button"><img src="https://ssl.pstatic.net/static/maps2/btn_confirm.gif" width="53" height="25" alt="확인"></a></p> </div>')
}return p.join("")
},traffic_status:function(_d_){var p=[];
with(_d_){p.push('<div class="traffic_wrap _traffic_status _none_pointer">  <div class="traffic_status_panel">   <div class="traffic_status_top"></div>   <div class="traffic_status_header traffic_status_no_icon">    <span class="ico_road"><em></em></span>    <strong class="road_title">경부고속도로</strong>     <dl>    <dt>총 소요시간</dt>    <dd class="_travel_time">약<span>4</span>시간 <span>1</span>분</dd>    <dt>평균속도</dt>    <dd class="_speed">약<span>88km/h</span></dd>     <dt>속도구간 거리</dt>    <dd class="_distance"><span>415.2km</span></dd>    </dl>    <div class="action">     <a href="#" class="up nclicks(map*u.updown)"><img class="on" src="https://ssl.pstatic.net/static/maps2/blank.gif" width="32" height="24" alt="상행선"></a>     <a href="#" class="down nclicks(map*u.updown)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="33" height="24" alt="하행선"></a>     <a href="#" class="refresh nclicks(map*u.renew)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="19" height="17" alt="새로고침"></a>     <a href="#" class="close nclicks(map*u.close)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="19" height="17" alt="레이어 닫기"></a>     </div>   </div>   <div class="traffic_status_bar">    <div class="traffic_status_bar_l">     <a href="#" class="first _dont_auto_select_route nclicks(map*u.startend)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="20" height="20" alt="시작"></a>     <a href="#" class="prev _dont_auto_select_route nclicks(map*u.backnext)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="20" height="20" alt="이전"></a>     <span class="mask mask_l"></span>    </div>    <!-- 구간 스크롤은 traffic_status_list div에서 left:-100px 형식으로 컨트롤합니다. -->     <div class="traffic_status_list nclicks(map*u.tgname)" style="left:0;">     <ul><li></li></ul>    </div>     <div class="traffic_status_bar_r">     <span class="mask mask_r"></span>     <a href="#" class="next _dont_auto_select_route nclicks(map*u.backnext)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="20" height="20" alt="다음"></a>     <a href="#" class="last _dont_auto_select_route nclicks(map*u.startend)"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="20" height="20" alt="끝"></a>    </div>    <div class="traffic_status_arrow" style="margin-left:157px;"></div>    <div class="mask mask_t"></div>   </div>  </div> </div>')
}return p.join("")
},road_traffic_window:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly spotly_traffic _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="spotly_header">   <div class="sh_stat">    <span class="spm spm_spot_tfstat',section.state+1,'">',section.stateStr,'</span>   </div>   <div class="sh_flexible">    <h3 class="sh_h">');
if(raw.speed>0){p.push("약 ",section.speed,"")
}else{p.push("&nbsp;")
}p.push('</h3>   </div>  </div>  <div class="spotly_container">   <!-- Spot Layer Detail -->   <div class="spotly_detail"> ');
if(isClearData){p.push('    <h4 class="rd_tit">     <strong>',section.startName,'</strong>     <span class="path_arr">→</span>     <strong>',section.endName,"</strong>    </h4> ")
}p.push('    <p class="rd_d">');
if(raw.lane>0){p.push("차선 <em><strong>",section.laneNum,"</strong>차선</em>")
}if(raw.min>0){p.push(' <span class="bar">|</span> 소요시간 <em>약 ',section.time,"</em>")
}if(raw.distance>0){p.push(' <span class="bar">|</span> 거리 <em>',section.distance,"</em>")
}p.push('</p>    <div class="rd_act">     <a href="#" title="이전상황" class="spm spm_lyf_prev _prev_traffic ',section.prevId?"":"spm_lyf_prev_dimmed",' nclicks(map*j.prev)" data-id="',section.prevId,'">이전상황</a><a href="#" title="다음상황" class="spm spm_lyf_next _next_traffic nclicks(map*j.next) ',section.nextId?"":"spm_lyf_next_dimmed",'"" data-id="',section.nextId,'">다음상황</a>    </div> ');
if(isClearData&&section.state!==0){p.push('    <div class="all_road">     <p class="ard_tit"><span class="spm spm_spot_allroad">전체도로</span> ',road.name,'</p>     <p class="ard_d"><strong>시속</strong> ',road.speed,' <span class="bar">|</span> <strong>소요시간</strong> ',road.time,' <span class="bar">|</span> <strong>총거리</strong> ',road.distance," </p>    </div> ")
}p.push('   </div>   <!-- //Spot Layer Detail -->  </div>  <div class="spotly_act">   <a href="#" class="spm spm_spot_close _close_realtime_traffic nclicks(map*j.close)" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},traffic_guide:function(_d_){var p=[];
with(_d_){p.push('<div class="traffic_wrap _traffic_guide _none_pointer" style="left:0;">  <div class="traffic_legend">   <div class="traffic_legend_t"></div>   <div class="traffic_legend_c">    <strong class="good">원활</strong>    <ul class="traffic_status">    <li>     <img src="https://ssl.pstatic.net/static/maps2/bg_traffic_status1.gif" width="42" height="6" alt="원활">     <ul class="traffic_status_detail1">     <li><strong>일반도로</strong> <span class="num">30km/h</span>이상</li>     <li><strong>국도</strong> <span class="num">50km/h</span>이상</li>     <li><strong>도시고속</strong> <span class="num">60km/h</span>이상</li>     <li><strong>고속도로</strong> <span class="num">70km/h</span>이상</li>     </ul>    </li>    <li>     <img src="https://ssl.pstatic.net/static/maps2/bg_traffic_status2.gif" width="42" height="6" alt="서행">     <ul class="traffic_status_detail2">     <li><strong>일반도로</strong> <span class="num">20~30km/h</span></li>     <li><strong>국도</strong> <span class="num">30~50km/h</span></li>     <li><strong>도시고속</strong> <span class="num">40~60km/h</span></li>     <li><strong>고속도로</strong> <span class="num">50~70km/h</span></li>     </ul>    </li>    <li>     <img src="https://ssl.pstatic.net/static/maps2/bg_traffic_status3.gif" width="42" height="6" alt="지체">     <ul class="traffic_status_detail3">     <li><strong>일반도로</strong> <span class="num">10~20km/h</span></li>     <li><strong>국도</strong> <span class="num">20~30km/h</span></li>     <li><strong>도시고속</strong> <span class="num">30~40km/h</span></li>     <li><strong>고속도로</strong> <span class="num">30~50km/h</span></li>     </ul>    </li>    <li>     <img src="https://ssl.pstatic.net/static/maps2/bg_traffic_status4.gif" width="42" height="6" alt="정체">     <ul class="traffic_status_detail4">     <li><strong>일반도로</strong> <span class="num">10km/h</span>미만</li>     <li><strong>국도</strong> <span class="num">20km/h</span>미만</li>     <li><strong>도시고속</strong> <span class="num">30km/h</span>미만</li>     <li><strong>고속도로</strong> <span class="num">30km/h</span>미만</li>     </ul>    </li>    </ul>    <strong class="bad">정체</strong>    <p class="desc">도로를 클릭하면 상세 정보를 볼 수 있습니다.</p>    <div class="action">     <span class="time"></span>     <a href="#" class="refresh"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="19" height="17" alt="새로 고침"></a>     <a href="#" class="close"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="19" height="17" alt="레이어 닫기"></a>    </div>   </div>  </div> </div>')
}return p.join("")
},openmap_drawing_toolbar:function(_d_){var p=[];
with(_d_){p.push('<div class="draw_tools_wrap _openmap_drawing_toolbar">  <h5 class="blind">테마지도 그리기 선택</h5>  <ul class="draw_tools">   <li class="dt_pin">    <a href="#" class="dt_pin_a _drawingtoolbar_marker nclicks(mpn.pin)" title="핀그리기">     <span class="spmtm spmtm_draw_pin">핀그리기</span>     <span class="draw_toolbar dtool_pin">지도위에 <strong>핀위치</strong>를 선택해 주세요.<span class="spmtm spmtm_dt_arr"></span><span class="dt_opac"></span></span>     <span class="draw_toolbar dtool_finish"><strong>마우스 오른쪽</strong> 또는 <strong>ESC</strong>를 누르면 마침<span class="spmtm spmtm_dt_arr"></span><span class="dt_opac"></span></span>    </a>   </li>   <li class="dt_line">    <a href="#" class="dt_line_a _drawingtoolbar_polyline nclicks(mpn.line)" title="선그리기">     <span class="spmtm spmtm_draw_line">선그리기</span>     <span class="draw_toolbar dtool_line">지도위에 <strong>선</strong>을 선택해 주세요.<span class="spmtm spmtm_dt_arr"></span><span class="dt_opac"></span></span>     <span class="draw_toolbar dtool_finish" style="display:block"><strong>마우스 오른쪽</strong> 또는 <strong>ESC</strong>를 누르면 마침<span class="spmtm spmtm_dt_arr"></span><span class="dt_opac"></span></span>    </a>   </li>   <li class="dt_refresh">    <a href="#" class="dt_refresh_a _drawingtoolbar_refresh nclicks(mpn.clear)" title="초기화">     <span class="spmtm spmtm_draw_refresh">초기화</span>    </a>   </li>  </ul> </div>')
}return p.join("")
},openmap_default_marker:function(_d_){var p=[];
with(_d_){p.push('<div style="overflow: hidden; cursor: pointer; -moz-user-select: -moz-none; z-index: 900;   width:',oMarker.htSize.width,"px; height:",oMarker.htSize.height,'px;">  <img style="position: absolute; left: 0px; top: 0px; -moz-user-select: -moz-none;" src="',oMarker.sPinImage,'"> </div>')
}return p.join("")
},openmap_editing_window:function(_d_){var p=[];
with(_d_){p.push('<div class="lay_opening"> <div class="spotly_header">  <div class="sh_flexible">   <h3 class="sh_h">지도그리기(핀)</h3>  </div> </div>   <div class="spotly_container">  <!-- Lay Opening Content 기존과동일 -->   <div class="lay_opening_content">    <div class="lay_opening_tit_input">     <input type="text" value="새로 작성하는 지점을 나타내는 제목을 입력해 주세요." title="이름 또는 지명 입력" class="_input_title input_text"><!-- 포커스시 input_act 추가 -->    </div>    <!-- EDITOR_BOX -->    <!--     기본 : editor_box     핀선택 : selected_pin     선선택 : selected_line     이미지업로드선택 : selected_image     링크선택 : selected_link    -->    <div class="_container_editor editor_box">     <!--      기본 : editor_area      확장 : editor_area / editor_area_expand 추가     -->     <!-- EDITOR_AREA_WRAP -->     <div class="_container_se2 editor_area_wrap">     </div>     <!-- //EDITOR_AREA_WRAP -->      <!-- EDITOR_BTN -->     <div class="editor_btn">      <a href="#" class="_btn_ok editor_btn_check">확인</a>      <a href="#" class="_btn_delete editor_btn_del">삭제</a>     </div>     <!-- //EDITOR_BTN -->      <!-- LAY_EDITOR_SELECTED_PIN -->     <div class="_layer _marker_select_layer lay_editor_selected_pin">      <div class="inner">       <ul class="_user_marker_list">        <li class="first"><a href="#">내 아이콘 등록</a></li>        <li class="no_icon"><strong>제작하신 아이콘</strong>을 등록 할 수 있습니다.</li>       </ul>       <ul class="_default_marker_list normal">       ');
var pad=function(src){return nhn.mapservice.Util.pad(src,5,"0")
},pinSrcPrefix="https://ssl.pstatic.net/static/maps/ux2013/icons/opin_m_";
for(var i=1,ii=62,pinType,pinSrc,pinIdx;
i<ii;
i++){pinIdx=i-1;
if(i>=1&&i<32){pinType="n"
}if(i>=32&&i<38){pinType="trans";
pinIdx-=30
}if(i>=38&&i<41){pinType="living";
pinIdx-=36
}if(i>=41&&i<51){pinType="place";
pinIdx-=39
}if(i>=51&&i<59){pinType="sports";
pinIdx-=49
}if(i>=59&&i<=61){pinType="other";
pinIdx-=57
}if(i===1){pinSrc=pinSrcPrefix+"main.png"
}else{pinSrc=pinSrcPrefix+pinType+"_"+pinIdx+".png"
}p.push('         <li class="_default_marker(',pad(i),')"><a href="#"><img src="',pinSrc,'" width="20" height="26" alt=""></a></li>       ')
}p.push('       </ul>      </div>     </div>     <!-- //LAY_EDITOR_SELECTED_PIN -->      <!-- LAY_EDITOR_SELECTED_LINE -->     <div class="_layer _line_style_layer lay_editor_selected_line">      <dl>      <dt>색상변경</dt>      <dd class="color_control">       <ul>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,1)" style="background-color:#ff0000;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,2)" style="background-color:#ff6c00;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,3)" style="background-color:#ffaa00;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,4)" style="background-color:#ffef00;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,5)" style="background-color:#a6cf00;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,6)" style="background-color:#009e25;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,7)" style="background-color:#00b0a2;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,8)" style="background-color:#0075c8;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,9)" style="background-color:#3a32c3;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,10)" style="background-color:#7820b9;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,11)" style="background-color:#ef007c;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,12)" style="background-color:#473529;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,13)" style="background-color:#636363;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,14)" style="background-color:#767b86;"><span></span></a></li>       <li><a href="#" class="_color_selector nclicks(mpn*l.linecolor,,15)" style="background-color:#000000;"><span></span></a></li>       </ul>      </dd>      <dt>두께변경</dt>      <dd class="_thick_wrap thick_control pixel4"><!-- pixel4, pixel5, pixel6, pixel7, pixel8 -->       <span class="_btn_open_thick_selector status"></span><a href="#" class="_btn_open_thick_selector open">열기</a>       <div class="_thick_select_layer thick_selector" style="display:none;">        <ul class="_thick_selector">        <li class="px4"><a href="#" class="nclicks(mpn*l.linethick,,1)">4픽셀</a></li>        <li class="px5"><a href="#" class="nclicks(mpn*l.linethick,,2)">5픽셀</a></li>        <li class="px6"><a href="#" class="nclicks(mpn*l.linethick,,3)">6픽셀</a></li>        <li class="px7"><a href="#" class="nclicks(mpn*l.linethick,,4)">7픽셀</a></li>        <li class="px8"><a href="#" class="nclicks(mpn*l.linethick,,5)">8픽셀</a></li>        </ul>        <a href="#" class="_btn_close_thick_selector close">닫기</a>       </div>      </dd>      </dl>      <div class="act">       <a href="#" class="_btn_apply_line_style check">확인</a>       <a href="#" class="_btn_cancel_line_style cancel">취소</a>      </div>     </div>     <!-- //LAY_EDITOR_SELECTED_LINE -->      <!-- LAY_EDITOR_MY_ICO -->     <div class="_layer _marker_upload_layer lay_editor_my_ico" style="display:none;"><!-- 그림 등록되면 ico_registered 추가 -->      <h3>내 아이콘 등록</h3>      <dl>       <dt><div class="thumb"><img src="" width="32" height="40" alt=""></div></dt>       <dd>        내 아이콘의 크기는 <strong>28px x 28px</strong>이며,<br>큰 이미지는 <strong>자동으로 축소</strong>됩니다.<br>500KB 미만의 <strong>JPG, PNG, GIF</strong>형식의<br>이미지만 등록할 수 있습니다.       </dd>      </dl>      <div class="_btn_group ico_act">       <div class="btn_register">        <label for="input_file_marker" class="find _find_icon">찾아보기</label>        <input type="file" id="input_file_marker" name="Filedata" accept="image/*">       </div>       <a href="#" class="_btn_register_marker register">등록</a>       <a href="#" class="_btn_cancel_registration cancel">취소</a>      </div>     </div>     <!-- //LAY_EDITOR_MY_ICO -->    </div>    <!-- //EDITOR_BOX -->   </div>  <!-- //Lay Opening Content 기존과동일 --> </div> </div>')
}return p.join("")
},openmap_se2:function(_d_){var p=[];
with(_d_){p.push('<div class="_se2_layer editor_area">   <textarea class="se2_ir" name="ir1" id="ir1" rows="10" cols="100" style="display:none;"></textarea>   <!-- EDITOR_CONTROLLER -->  <div class="se2_tool editor_controller">   <ul class="ec1">    <li class="_btn_marker_select ec_pin"><a href="#" title="핀 변경하기" class="_openmap_nclicks(pin)">핀 변경하기</a></li>    <li class="_btn_line_style ec_line"><a href="#" title="선 변경하기" class="_openmap_nclicks(line)">선 변경하기</a></li>    <li class="husky_seditor_ui_hyperlink">     <button title="링크걸기" class="_btn_link ec_link _openmap_nclicks(link)">링크걸기</button>     <!-- LAY_EDITOR_SELECTED_LINK -->     <div class="_layer_hyperlink se2_layer lay_editor_selected_link">      <div class="inner">       <input type="text" value="http://www" title="링크입력" class="input_link">       <div class="link_act">        <a href="#" class="se2_apply check">확인</a>        <span class="bar">|</span>        <a href="#" class="se2_cancel">취소</a>       </div>      </div>     </div>     <!-- //LAY_EDITOR_SELECTED_LINK -->    </li>    <li class="_btn_image ec_image"><label for="input_file_image" class="_openmap_nclicks(img)">이미지업로드</label><input type="file" id="input_file_image" name="Filedata" accept="image/*"></li>   </ul>   <ul class="ec2">    <li class="husky_seditor_ui_bold"><button title="굵게" class="ec_bold">굵게</button></li>    <li class="husky_seditor_ui_underline"><button title="밑줄" class="ec_underline">밑줄</button></li>    <li class="husky_seditor_ui_italic"><button title="기울임" class="ec_oblique">기울임</button></li>   </ul>   <ul class="ec3">    <li class="husky_seditor_ui_justifyleft"><button title="좌측정렬" class="ec_left">좌측정렬</button></li>    <li class="husky_seditor_ui_justifycenter"><button title="중앙정렬" class="ec_center">중앙정렬</button></li>    <li class="husky_seditor_ui_justifyright"><button title="우측정렬" class="ec_right">우측정렬</button></li>    <li class="husky_seditor_ui_justifyfull"><button title="양쪽정렬" class="ec_justify">양쪽정렬</button></li>   </ul>   <ul class="ec4">    <li class="husky_seditor_ui_orderedlist"><button title="순서항목" class="ec_ol">순서항목</button></li>    <li class="husky_seditor_ui_unorderedlist"><button title="일반항목" class="ec_ul">일반항목</button></li>    <li class="husky_seditor_ui_outdent"><button title="좌측컬럼" class="ec_float_left">좌측컬럼</button></li>    <li class="husky_seditor_ui_indent"><button title="우측컬럼" class="ec_float_right">우측컬럼</button></li>   </ul>  </div>  <!-- //EDITOR_CONTROLLER -->   <!-- EDITOR_INPUT_BOX -->  <div class="editor_input_box editor_mode">   <div class="husky_seditor_editing_area_container editor_input_box_area">    <div class="text_editor" style="display:block;">     <iframe class="se2_input_wysiwyg" src="" width="334" height="100%" frameborder="no" marginwidth="0" marginheight="0" scrolling="auto"></iframe>    </div>    <div class="html_editor" style="display:block;">     <textarea class="se2_input_syntax" style="width:334px;padding:0;"></textarea>    </div>   </div>   <ul class="editor_mode_changer">    <li class="change_html"><button class="se2_to_html _openmap_nclicks(html)">HTML</button></li><!-- active 추가 -->    <li class="change_editor active"><button class="se2_to_editor _openmap_nclicks(edit)">Editor</button></li><!-- active 추가 -->    <li class="change_text active" style="display:none;"><button class="se2_to_text">Text</button></li><!-- active 추가 -->   </ul>   <div class="editor_input_expander"><a class="_btn_expander" href="#">입력창 확대/축소</a></div>  </div>  <!-- //EDITOR_INPUT_BOX --> </div>')
}return p.join("")
},openmap_sidebar_top:function(_d_){var p=[];
with(_d_){p.push('<div class="panel_top_theme">  <a href="#" class="spmtm spmtm_theme_prev edit_close nclicks(new.close)">이전</a>  <h3 class="ptt_tit"><span class="spmtm spmtm_mymap_make">내 지도 만들기</span></h3> </div>')
}return p.join("")
},openmap_sidebar:function(_d_){var p=[];
with(_d_){p.push('<div class="search_result_sub">  <div class="ly_loading ly_loading16 _status_bar0" style="display:none">   <p>데이터를 저장 중입니다.</p>  </div>  <div class="opening_result_zone">   <div class="new_draw_content">    <ul class="step_list">     <li>      <div class="step1">       <h4>STEP1.기본정보 등록</h4>       <dl class="step_form">        <dt class="name"><label for="stepFormL1">제목</label><span class="need">*</span></dt>        <dd class="name_dd">         <input type="text" id="stepFormL1" value="제목을 입력하세요." class="input_txt1 _title">        </dd>        <dt class="intro"><label for="stepFormL2">소개</label><span class="need">*</span></dt>        <dd class="intro_dd">         <textarea cols="30" rows="5" id="stepFormL2" class="text_area1 input_act _description">지도를 소개하는 글을 적어주세요.</textarea>        </dd>        <dt class="tag"><label for="stepFormL3">태그</label></dt>        <dd class="tag_dd">         <input type="text" id="stepFormL3" value="최대 10개까지 입력가능,태그는 쉼표로 구분합니다." class="input_txt2 _tags">        </dd>        <dt class="image">이미지</dt>        <dd class="image_dd _rep_img_selector">         <div class="thumb"><img src="" width="63" height="63" alt=""><span class="line"></span></div>         <div class="thumb_con">          <p>크기는<strong>63px X 63px</strong> 입니다.<br> 큰 이미지는 <strong>자동으로 축소</strong>됩니다.</p>          <div class="thumb_act">           <label for="input_file_thumb" class="find_thumb">찾아보기</label>           <input type="file" id="input_file_thumb" class="input_file" name="Filedata" accept="image/*">           <label for="input_file_thumb" class="modify">수정</label>           <a href="#" class="del">삭제</a>          </div>         </div>        </dd>        <dt class="setting">설정</dt>        <dd class="setting_dd">         <input type="radio" name="_access_authority" id="stepFormL4" class="_access_authority(OPEN)"><label for="stepFormL4">공개</label>         <input type="radio" name="_access_authority" id="stepFormL5" class="_access_authority(CLOSE)"><label for="stepFormL5">비공개</label>        </dd>       </dl>      </div>     </li>     <li>      <div class="step2">       <h4>STEP 2.지도그리기 | 지도에 핀 또는 선으로 지도를 그리세요.</h4>       <ul class="opening_region_list _itemlistViewer"></ul>       <div class="step2_act">        <a href="#" class="draw_pin _draw_pin nclicks(new.pin)">핀으로 지도 그리기</a>        <a href="#" class="draw_line _draw_line nclicks(new.line)">선으로 지도 그리기</a>       </div>      </div>     </li>    </ul>   </div>  </div>  <div class="new_draw_act">   <a href="#" class="check _save_btn nclicks(new.ok)">확인</a>   <a href="#" class="cancel _cancel_btn nclicks(new.cancel)">취소</a>  </div> </div>')
}return p.join("")
},openmap_loading:function(_d_){var p=[];
with(_d_){p.push('<div class="opening_loading _loading">  <p>데이터를 불러오는 중 입니다.</p>  <div class="loading">   <div class="loading_bar">    <span style="width: 0%;" class="_percent _bar"></span>   </div>   <div class="loading_status _percent"></div>  </div> </div>')
}return p.join("")
},openmap_sidebar_view:function(_d_){var p=[];
with(_d_){p.push("");
var imageSize=(modelType=="theme")?85:63;
p.push(' <div class="opening_zone_title">  <h4>테마지도</h4>  <a class="list_view _close nclicks(rst.theme)" href="#">목록보기</a>  ');
if(modelType!="theme"&&themeTitle){p.push('<a href="#" class="return_theme _link_theme nclicks(rst.back)">그룹 돌아가기</a>')
}p.push(' </div> <div class="opening_result_zone');
if(modelType=="theme"){p.push(" opening_result_zone_theme")
}p.push('">  <div class="opening_zone _opening_zone">   <dl>    <dd class="om_round om_round_t"><span class="round_l"></span><span class="round_r"></span></dd>    <dt><div class="thumb"><a class="nclicks(rst.img,',mapSeq,')" href="#"><img src="',bannerImageURL,'" width="',imageSize,'" height="',imageSize,'" alt="" class="_detail_image"><span class="line _detail_title_handler"></span></a></div></dt>    <dd>     <h5');
if(modelType=="theme"){p.push(' class="theme"')
}p.push('><a href="#" title="',title,'" class="_detail_title nclicks(rst.tit,',mapSeq,')">',title,'</a> <span class="n">');
if(modelType=="theme"){p.push("테마")
}p.push('<em class="_detail_count">',objectsCount,"</em>개</span> ");
if(openType!="OPEN"){p.push('<span class="lock">잠김</span>')
}p.push('</h5>     <div class="status">      ');
if(nicknameURL){p.push('<a href="',nicknameURL,'" class="_detail_author nclicks(rst.src)" target="_blank">',author,"</a>")
}else{p.push("<span>",author,"</span>")
}p.push('      <span class="bar">|</span>      <span>등록일 <em class="_detail_date">',addDate,"</em></span>      ");
if(isMine){p.push('      <span class="bar">|</span>      <a href="#" class="modify _btn_modify">수정</a>      <span class="bar">|</span>      <a href="#" class="del _btn_del">삭제</a>      ')
}p.push('     </div>     <div class="exp _nmap_ellipsis_wrap" style="overflow:hidden;"><p class="_nmap_ellipsis_text     _detail_description">',description,'</p></div>     <div class="last_update _last_update" style="display:none">      마지막 업데이트: <em>',updateDate,'</em>     </div>    </dd>    <dd class="text_spread_open _detail_more"><a href="#" class="nclicks(rst.unfold)">열기</a></dd>    <dd class="om_round om_round_b"><span class="round_l"></span><span class="round_r"></span></dd>   </dl>  </div>  <div class="opening_region _opening_region" style="height:auto;">   ');
if(modelType=="theme"){p.push('   <ul class="opening_theme_lst _theme_list"></ul>   ')
}else{p.push('   <ul class="opening_region_list _map_list"></ul>   ')
}p.push("  </div> </div>")
}return p.join("")
},openmap_item_theme:function(_d_){var p=[];
with(_d_){p.push('<li class="_id(',mapSeq,") _link_map(",mapSeq,") _listover");
if(isLast){p.push(" last")
}p.push(" nclicks(rst.pin,",mapSeq,",",index,')">  <div class="thumb"><a href="#"><img height="48" width="48" alt="" src="',nhn.map.theme.RepImgConverter.toSmall(banner),'" class="_link_map(',mapSeq,')"><span class="line _link_map(',mapSeq,')"></span></a></div>  <dl>   <dt style="overflow:hidden;">    <a href="#" class="_link_map(',mapSeq,') _title">',title,'</a>    <span class="n"><em>',countItem,'</em>개</span>   </dt>   <dd style="overflow:hidden;"><p class="_description">',description,"</p></dd>  </dl> </li>")
}return p.join("")
},openmap_listitem:function(_d_){var p=[];
with(_d_){p.push("");
var sID=item.getData("id");
var hasThumb=(!!item.getData("sThumb"));
p.push(' <li class="_id(',sID,')">  <div class="pin _item_icon _link_item(',sID,")");
if(isLine){p.push(" line _line_preview")
}p.push('">   ');
if(isLine){p.push('   <span><img height="18" width="18" alt="" src="https://ssl.pstatic.net/static/maps2/bg_opening_list_line3.png"></span>   ')
}else{p.push('   <img class="_marker_preview" height="23" width="18" style="" alt="" src="',urlConverter.convert(item.getData("sPinImage"),nhn.openmap.MarkerSizeType.MEDIUM),'">   ')
}p.push('  </div>  <div class="thumb _link_item(',sID,')" style="',(hasThumb?"":"display:none;"),'">   <img height="37" width="37" alt="" src="',item.getData("sThumb"),'"><span class="line"></span>  </div>  <dl>   <dt>    <strong><a href="#" class="_title_preview _link_item(',sID,')">',item.getData("sTitle"),'</a></strong>&nbsp;<a class="btn _link_delete(',sID,')" href="#"><img height="11" width="11" class="del" alt="삭제" src="https://ssl.pstatic.net/static/maps2/btn_del.gif"></a>   </dt>   <dd style="overflow:hidden;"><p class="_description_preview"></p></dd>  </dl> </li>')
}return p.join("")
},openmap_home:function(_d_){var p=[];
with(_d_){p.push('<div class="ly_theme ly_theme_mymap">  <div class="ly_header">   <h3>    <strong class="tit_mymap">내지도</strong>    <strong class="tit_group" style="display: none;">그룹만들기</strong>    <span class="spmtm spmtm_tmtit _theme_group_subtitle" style="display: none;">여러지도를 모아 그룹을 만들 수 있습니다.</span>   </h3>   <a href="#" class="spm spm_lpb_close _link_close">닫기</a>  </div> </div>')
}return p.join("")
},openmap_theme_maker:function(_d_){var p=[];
with(_d_){p.push('<div class="ly_container">   <div class="theme_set">    <dl class="ts1 _theme_title_container">    <dt>그룹 이름</dt>    <dd>     <input type="text" value="그룹의 이름을 적어주세요.">     <span class="desc">00/18자</span>    </dd>    </dl>    <dl class="ts2 _theme_description_container">    <dt>그룹 소개</dt>    <dd>     <textarea cols="30" rows="5" class="">그룹을 소개하는 글을 적어주세요.</textarea>     <p class="desc">00/500자이내</p>    </dd>    </dl>    <dl class="ts3 _theme_image_container">    <dt>대표 이미지</dt>    <dd class="">     <!-- theme_image_selected -->     <div class="thumb"><img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="85" height="85" alt=""><span class="line"></span></div>     <div class="thumb_con">      <p>대표 이미지의 크기는 <strong>85px X 85px</strong>입니다.<br> 큰이미지는 <strong>자동으로 축소</strong> 됩니다.      </p>      <div class="thumb_act">       <label for="input_file_thumb" class="find_thumb">찾아보기</label>       <input type="file" id="input_file_thumb" class="input_file" name="Filedata" accept="image/*">       <label for="input_file_thumb" class="modify">수정</label>       <a href="#" class="del">삭제</a>      </div>     </div>    </dd>    </dl>    <dl class="ts4 _theme_select_container">    <dt>내 지도 선택</dt>    <dd>     <a href="#" class="mymap_sel nclicks(thm.sel)">내 지도 선택하기</a>     <span class="desc">그룹으로 제공할 내 지도를 선택하세요.</span><span class="desc2" style="display:none;"><em>5개</em>의 내지도가 선택되었습니다.</span>     <!-- LY_THEME_MAP_MOD -->         <div class="_theme_map_selected_list ly_theme_map_mod" style="display:none;">      <ul></ul>     </div>     <p class="desc3" style="display:none;">드래그앤드랍으로 순서를 변경할 수 있습니다.</p>     <!-- //LY_THEME_MAP_MOD -->     <!-- LY_THEME_MAP_SEL -->     <div class="_theme_map_selector ly_theme_map_sel" style="display:none">      <a href="#" class="close _btn_close close">닫기</a>      <div class="top">       <strong>여러 개의 지도</strong>를 선택하실 수 있습니다.      </div>      <div class="list">       <ul></ul>      </div>      <div class="bottom">       <a href="#" class="check _btn_ok check nclicks(thm.ok)">확인</a>       <a href="#" class="cancel _btn_cancel cancel nclicks(thm.cancel)">취소</a>      </div>     </div>     <!-- //LY_THEME_MAP_SEL -->    </dd>    </dl>    <dl class="ts5 _theme_access_container">    <dt>그룹 공개 설정</dt>    <dd>     <input type="radio" id="themeSel1" name="_access_authority">     <label for="themeSel1">공개</label>     <input type="radio" id="themeSel2" name="_access_authority">     <label for="themeSel2">비공개</label>    </dd>    </dl>   </div>   <div class="act">    <a href="#" class="check _btn_theme_save check nclicks(thm.ok)">확인</a>    <a href="#" class="cancel _btn_theme_close cancel nclicks(thm.cancel)">취소</a>   </div>   </div>')
}return p.join("")
},openmap_item_summary_window:function(_d_){var p=[];
with(_d_){p.push('<div class="_infolay_frame _item_summary_window lay_map lay_spot lay_opening_box"><!-- lay_opening_spread 추가 삭제 -->  <div class="lay_c">   <div class="lay_head">    <div class="lay_opening_tit">     <div class="logo">      <img class="_marker_img" src="https://ssl.pstatic.net/static/maps/dot.gif" width="16" height="16" alt="">      <span class="_line_sprite"><img height="21" width="17" alt="" src="https://ssl.pstatic.net/static/maps2/blank.gif"></span>     </div>     <h3 class="tit"><p class="_title" title="">SK에너지 분당공원주유소</p></h3>    </div>    <div class="_btn_group pin_act">     <a href="#" class="_btn_fold lay_opening_zoomin"><img src="https://ssl.pstatic.net/static/maps2/btn_lay_opening_zoom1.gif" width="17" height="16" alt="접기"></a>     <a href="#" class="_btn_unfold lay_opening_zoomout"><img src="https://ssl.pstatic.net/static/maps2/btn_lay_opening_zoom2.gif" width="17" height="16" alt="펼치기"></a>     <a href="#" class="_btn_close lay_opening_close"><img src="https://ssl.pstatic.net/static/maps2/btn_lay_opening_close.gif" width="17" height="16" alt="닫기"></a>    </div>   </div>   <div class="_wrap_description lay_opening_custom_wrap">    <div class="_description lay_opening_custom">     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>     제작된 내용 노출부분<br>    </div>   </div>   <div class="lay_content _extend_area">    <div class="lay_act">     <ul class="spot_act _extend_footer_btn_wrap">          <li class="_extend_footer_btn(peri)"><a href="#">주변 검색</a></li>                <li class="_extend_footer_btn(start)"><a href="#">출발지로 설정</a></li>                <li class="_extend_footer_btn(end)"><a href="#">도착지로 설정</a></li>     </ul>     <span class="spot_btn">      <a href="#" class="_spotlayer_move(prev)"><img height="18" width="18" alt="이전" src="https://ssl.pstatic.net/static/maps2/btn_prev.gif"/></a><a href="#" class="_spotlayer_move(next)"><img height="18" width="17" alt="다음" src="https://ssl.pstatic.net/static/maps2/btn_next.gif"/></a>     </span>    </div>    <div class="spot_find _extend_footer_route_point_content" style="display:none;"></div>    <div class="spot_find _extend_footer_peri_search_content" style="display:none;">     <!-- extend_footer_peri_search 템플릿 사용 -->    </div>   </div>   </div>  <div class="lay_b"></div> </div>')
}return p.join("")
},openmap_floating_banner_zone_layer:function(_d_){var p=[];
with(_d_){p.push('<h4>테마지도 검색결과</h4> <a href="#" class="list_view _open_openmaphome_by_banner nclicks(tmm.home)">닫기</a> <a href="#" class="close _close_openmap_by_banner nclicks(tmm.close)">닫기</a> <dl class="_floating_banner_layer"> </dl>')
}return p.join("")
},openmap_floating_banner_zone_mapitem:function(_d_){var p=[];
with(_d_){p.push('<dt><div class="thumb"><img src="',nhn.map.theme.RepImgConverter.toSmall(oMap.bannerImageURL),'" width="48" height="48" alt=""><span class="line"></span></div></dt> <dd class="_definition" style="height:39px; overflow:hidden;">  ');
var nCount=0;
if(oMap.isThememap&&oMap.childrenList){nCount=oMap.childrenList.length
}else{nCount=(oMap.objectsCount==null?0:oMap.objectsCount)
}var sType=(oMap.isThememap?"GROUP_THEME_VIEW":"THEME_MAP_VIEW");
p.push('  <h5>   <a href="#" class="_load_openmap_by_banner(',sType,",",oMap.mapSeq,')">',oMap.title,'</a> <span class="n">');
if(oMap.isThememap){p.push("테마")
}p.push("<em>",nCount,'</em>개</span>  </h5>  <div class="exp">   <p class="_description" title="',oMap.description,'">',oMap.description,"</p>  </div> </dd>")
}return p.join("")
},openmap_listlayer_mymap_list:function(_d_){var p=[];
with(_d_){p.push('<div class="ly_container">   <div class="mymap_list_wrap ">    <div class="mymap_list_top">     <ul class="sort">     <li class="_changeMyMapList(all) nclicks(lmt.all)"><a href="#" class="all">전체지도 보기</a></li>     <li class="_changeMyMapList(temp) nclicks(lmt.temp)"><a href="#" class="save">임시저장 글보기</a></li>     </ul>     <p class="pr">      <a href="#" class="map _fire_map_event(edit_openmap,null) nclicks(lmt.new)">내 지도 만들기</a>      <a href="#" class="theme _fire_map_event(edit_thememap,null) nclicks(lmt.theme)">그룹 만들기</a>     </p>    </div>    <div class="mymap_list_t">     <div class="pl">      <span class="all_num">전체 <em>84</em>개</span>      <span class="bar">|</span>      <span class="theme_num">그룹 <em>6</em>개</span>      <span class="save_num">임시저장 <em>84</em>개</span>     </div>     <div class="pr">      <div class="sort_ly sort_ly2 _layer_type_in_mymaplist(view_type)">       <h5><a href="#" class="_show_layer(view_type)">전체보기</a></h5>       <ul style="display:none" class="_layer_in_mymap_list _layer_type(view_type)">       <li><a href="#" class="_sort_by(VIEW,ALL) nclicks(lmy.viewall)">전체보기</a></li>       <li><a href="#" class="_sort_by(VIEW,THEME_ONLY) nclicks(lmy.viewtheme)">그룹보기</a></li>       <li><a href="#" class="_sort_by(VIEW,ORPHAN_ONLY) nclicks(lmy.viewmap)">테마지도 보기</a></li>       </ul>      </div>      <div class="sort_ly _layer_type_in_mymaplist(sort_type)">       <h5><a href="#" class="_show_layer(sort_type)">등록일순</a></h5>       <ul style="display:none" class="_layer_in_mymap_list _layer_type(sort_type)">       <li><a href="#" class="_sort_by(ORDER,ADD_DATE) nclicks(lmy.bydate)">등록일순</a></li>       <li><a href="#" class="_sort_by(ORDER,TITLE) nclicks(lmy.byname)">이름순</a></li>       </ul>      </div>      <div class="sort_ly sort_ly2 _layer_type_in_mymaplist(fold_theme)">       <h5><a href="#" class="_show_layer(fold_theme)">그룹 모두 열기</a></h5>       <ul style="display:none" class="_layer_in_mymap_list _layer_type(fold_theme)">       <li><a href="#" class="_fold_theme(open) nclicks(lmy.opentheme)">그룹 모두 열기</a></li>       <li><a href="#" class="_fold_theme(close) nclicks(lmy.closetheme)">그룹 모두 닫기</a></li>       </ul>      </div>     </div>    </div>    <div class="mymap_list">    </div>    <div class="mymap_list_bottom _layer_type_in_mymaplist(add_theme)">     <input type="checkbox" class="_select_all_map">     <a href="#" class="del _delete_map_by_select nclicks(tms.delsel)">삭제</a>     <a href="#" class="move _show_layer(add_theme) nclicks(lmy.move)">지도이동</a>     <div class="ly_move_map _layer_in_mymap_list _layer_type(add_theme)" style="display:none">      <ul>      </ul>     </div>    </div>   </div>  </div>')
}return p.join("")
},openmap_listlayer_mymap_listitem:function(_d_){var p=[];
with(_d_){p.push("");
var writeMap=function(oMap,sMapType,hasChildren,nIndex){p.push(' <dl class="',((sMapType=="theme"&&!hasChildren)?"no_theme_list":""),'">  <dt class="_mymap_resize_title"><p> ');
if(sMapType=="theme"){p.push('   <img src="https://ssl.pstatic.net/static/maps2/om_ico_theme2.gif" width="27" height="16" alt="그룹"> ')
}p.push('   <a href="#" class="_fire_map_event(',(sMapType=="theme"?"view_groupmap":"view_thememap"),",",oMap.mapSeq,",",oMap.themeSeq,") nclicks(lmy.list,",oMap.mapSeq,",",nIndex,')">    <strong>',oMap.title,'</strong>    <span class="bar">|</span>    <span>');
if(sMapType=="theme"){p.push("테마<em>",oMap.childrenList.length,"</em>개")
}else{p.push("<em>",(oMap.objectsCount==null?0:oMap.objectsCount),"</em>개")
}p.push("</span>   </a>  </p></dt> ");
if(sMapType=="map_in_theme"||sMapType=="map"){p.push('  <dd class="check"><input type="checkbox" class="_select_map_item(',oMap.mapSeq,')"></dd> ')
}else{p.push('  <dd class="check"><a href="#" class="cbtn _open_close_theme">열기/닫기</a></dd> ')
}p.push('  <dd class="status _layer_type_in_mymaplist(access_author)">   ');
var oJindoDate=jindo.$Date(nhn.openmap.Util.parseISODate(oMap.addDateTime));
var sDate=oJindoDate.format("Y.m.d H:i");
p.push('   <div class="date">',sDate,"</div>   ");
var sOpenType;
switch(oMap.openType){case"OPEN":sOpenType="공개";
break;
case"CLOSE":sOpenType="비공개";
break
}p.push('    <div class="option _update_access_authority(',oMap.mapSeq,')">   ');
if(sMapType=="map_in_theme"||(sMapType=="theme"&&oMap.childrenList.length==0)){p.push("     <span>",sOpenType,"</span>   ")
}else{p.push('     <a href="#" class="_show_layer(access_author) nclicks(lmy.public)">',sOpenType,"</a>   ")
}p.push('   </div>   <div class="act">    <a href="#" class="modify _fire_map_event(',(sMapType=="theme"?"edit_thememap":"edit_openmap"),",",oMap.mapSeq,') nclicks(lmy.edit)">수정</a>    <a href="#" class="del _delete_map_in_list(',(sMapType=="theme"?"theme":"map"),",",oMap.mapSeq,",",(oMap.childrenList?oMap.childrenList.length:0),') nclicks(lmy.del)">삭제</a>   </div>  </dd> </dl> ')
};
if(listOfMapAndTheme.length==0){p.push('  <p class="no_mymap_list" style="display:block;">내 지도가 없습니다.</p> ')
}else{p.push("  <ul> ");
for(var i=0;
i<listOfMapAndTheme.length;
i++){var map=listOfMapAndTheme[i];
if(map.isThememap&&map.childrenList.length>0){var sOpenThemeClass="mymap_list_detail_open ";
if(closedThemes.indexOf(""+map.mapSeq)!=-1){sOpenThemeClass=""
}p.push('   <li class="',sOpenThemeClass,"_mytheme_list_item _over_dst _map_",map.mapSeq,'"> ');
writeMap(map,"theme",true,i+1);
p.push('    <div class="mymap_list_detail"><ul>     ');
for(var j=0;
j<map.childrenList.length;
j++){p.push('     <li class=" _map_',map.childrenList[j].mapSeq,'">      ');
writeMap(map.childrenList[j],"map_in_theme",false,i+1);
p.push("     </li>     ")
}p.push("    </ul></div> ")
}else{if(map.isThememap&&map.childrenList.length==0){p.push('   <li class="_mytheme_list_item _map_',map.mapSeq,'"> ');
writeMap(map,"theme",false,i+1);
p.push("   </li> ")
}else{p.push('   <li class="_over_dst _map_',map.mapSeq,'"> ');
writeMap(map,"map",false,i+1);
p.push("   </li> ")
}}}p.push("  </ul> ")
}p.push("")
}return p.join("")
},openmap_listlayer_tempmap_listitem:function(_d_){var p=[];
with(_d_){p.push("");
if(listOfTempMap.length==0){p.push('  <p class="no_mymap_list_save" style="display:block;">임시저장글이 없습니다.</p> ')
}else{p.push(" <ul> ");
var oMap;
for(var i=0;
i<listOfTempMap.length;
i++){oMap=listOfTempMap[i];
p.push('  <li class="_map_',oMap.mapSeq,'">   <dl>   <dt class="_mymap_resize_title"><p>    <a href="#" class="_fire_map_event(edit_openmap_temp,',oMap.mapSeq,") nclicks(tms.list,",oMap.mapSeq,",",i+1,')"><strong>',oMap.title,'</strong> <span class="bar">|</span> <span><em>',(oMap.objectsCount==null?0:oMap.objectsCount),'</em>개</span></a>   </p></dt>   <dd class="check"><input type="checkbox" class="_map_checkbox _select_map_item(',oMap.mapSeq,')"></dd>   <dd class="status">   ');
var oJindoDate=jindo.$Date(nhn.openmap.Util.parseISODate(oMap.addDateTime));
var sDate=oJindoDate.format("Y.m.d H:i");
p.push('    <div class="date">',sDate,'</div>    <div class="act">     <a href="#" class="del _delete_map_in_list(map,',oMap.mapSeq,') nclicks(tms.del)">삭제</a>    </div>   </dd>   </dl>  </li> ')
}p.push(" </ul> ")
}p.push("")
}return p.join("")
},openmap_line_controlbox:function(_d_){var p=[];
with(_d_){p.push("");
var borderSize=(isMiddleBox)?1:2;
p.push(' <div class="_pointBox _line(',id,") _idx(",pointIdx,")");
if(isMiddleBox){p.push(" _middleBox")
}p.push('" style="');
if(isMiddleBox){p.push("display:none; ")
}p.push("position:absolute; top:0; left:0; width:8px; height:8px; font-size:0; background-color:#fff; border:",borderSize,'px solid #000; cursor:pointer;"></div>')
}return p.join("")
}});if(!window.nhn){window.nhn={}
}if(!nhn.map){nhn.map={}
}if(!nhn.map.AutoComplete){nhn.map.AutoComplete={}
}(function(){nhn.map.AutoComplete.Configurations=(function(){var a={};
var c=function(d){a=d
};
var b=function(){return a
};
return{get:b,set:c}
}())
}());
(function(){nhn.map.AutoComplete.InputField=iron.Class(nhn.map.Dispatcher,{_options:{},_activated:false,_inputValue:"",_inputIndex:0,_prevInputValue:"",_interval:[],_service:null,_listView:null,_callAjax:false,_currentInput:null,_prevInput:null,_realFocus:false,_listener:{},_addedInput:[],_addedToggleBtn:null,_addedClearBtn:[],initialize:function(b,c){this._options=c;
this._input=b;
this._form=c.form;
this._toggleBtn=c.toggleBtn;
this._currentInput=b[0];
this._layerClassName=c.layerClassName;
this._clearBtn=c.clearBtn
},isActivated:function(){return this._activated
},activate:function(){this._activated=true;
this._addEventListeners()
},deactivate:function(){this._activated=false;
this._removeEventListeners()
},getCurrentInput:function(){return this._currentInput
},setValue:function(b){this._inputValue=b;
this._currentInput.value=b
},getValue:function(){return this._inputValue
},getService:function(){return this._service
},setService:function(b){this._service=b
},setAjaxFlag:function(b){this._callAjax=b
},getAjaxFlag:function(){return this._callAjax
},addInput:function(c,d,b){$(c).on("click",this._listener.clickInput);
$(c).on("keydown",this._listener.keydownInput);
$(c).on("focus",this._listener.focusInput);
$(c).on("blur",this._listener.blurInput);
$(c).on("paste",this._listener.pasteInput);
this._addedInput.push(c);
if(d){$(d).on("click",this._listener.clickToggleBtn);
this._addedToggleBtn=d
}if(b){$(b).on("mousedown",this._listener.mousedownClearInput);
this._addedClearBtn.push(b)
}},removeInput:function(){if(arguments[0]&&arguments.length){$(arguments[0]).off("click",null,this._listener.clickInput);
$(arguments[0]).off("mousedown",null,this._listener.mousedownClearInput);
$(arguments[0]).off("keydown",null,this._listener.keydownInput);
$(arguments[0]).off("focus",null,this._listener.focusInput);
$(arguments[0]).off("blur",null,this._listener.blurInput);
$(arguments[0]).off("paste",null,this._listener.pasteInput);
if(arguments[1]){$(arguments[1]).off("click",null,this._listener.clickToggleBtn)
}}else{for(var b=1,c=this._addedInput.length;
b<c;
b++){$(this._addedInput[b]).off("click",null,this._listener.clickInput);
$(this._addedInput[b]).off("keydown",null,this._listener.keydownInput);
$(this._addedInput[b]).off("focus",null,this._listener.focusInput);
$(this._addedInput[b]).off("blur",null,this._listener.blurInput);
$(this._addedInput[b]).off("paste",null,this._listener.pasteInput)
}if(this._addedToggleBtn){$(this._addedToggleBtn).off("click",null,this._listener.clickToggleBtn)
}for(var b=0,c=this._addedClearBtn.length;
b<c;
b++){$(this._addedClearBtn[b]).off("mousedown",null,this._listener.mousedownClearInput)
}}},isAutoCompleteUse:function(){return(!this._getCookie(this._options.cookieName)||this._getCookie(this._options.cookieName)=="use")?true:false
},submit:function(){this.dispatch("submit",{value:this.getValue(),input:this._currentInput})
},enable:function(){if(!(this._toggleBtn instanceof Array)&&this._toggleBtn){$(this._toggleBtn).removeClass("off");
$(this._toggleBtn).addClass("up")
}this._setCookie(this._options.cookieName,"use",10000,"map.naver.com")
},disable:function(){if(!(this._toggleBtn instanceof Array)&&this._toggleBtn){$(this._toggleBtn).removeClass("up");
$(this._toggleBtn).addClass("off")
}this._setCookie(this._options.cookieName,"unuse",10000,"map.naver.com")
},toggleBtn:function(){if((this._toggleBtn instanceof Array)&&!this._toggleBtn){return false
}var b=this.isAutoCompleteUse();
var c={};
if(b){c.isEnable=true;
$(this._toggleBtn).removeClass("off");
if(!$(this._toggleBtn).hasClass("up")){$(this._toggleBtn).addClass("up");
c.direction="up"
}else{$(this._toggleBtn).removeClass("up");
c.direction="down"
}}else{c.isEnable=false;
this.enable()
}this.dispatch("clickToggleBtn",c)
},clear:function(d){var b=0;
if(this._clearBtn&&this._clearBtn.length){for(var c=0,e=this._clearBtn.length;
c<e;
c++){if(this._clearBtn[c]===d){b=c;
break
}}this._input[b].value="";
d.style.display="none";
this.dispatch("clear")
}},compare:function(c){var b=this._currentInput.value;
if(b==""||this._prevInputValue!=b||c){if(this._realFocus){this.getService().search(b)
}this.dispatch("change",{value:b})
}if(this._clearBtn&&this._clearBtn.length){if(b==""){this._clearBtn[this._inputIndex].style.display="none"
}else{this._clearBtn[this._inputIndex].style.display="block"
}}this._prevInputValue=b
},startTimer:function(){var c=this;
var b=setInterval(function(){c.compare()
},300);
this._interval.push(b)
},stopTimer:function(){for(var b=0,c=this._interval.length;
b<c;
b++){clearInterval(this._interval[b])
}this._interval=[];
this.setAjaxFlag(false)
},getPos:function(c){var d=c;
var g=c;
var b=0,f=0,e=0,h=0;
while(d&&d!=document.body){b+=d.offsetTop;
f+=d.offsetLeft;
d=d.offsetParent
}e=b+g.offsetHeight;
h=g.offsetWidth;
return{top:b,left:f,bottom:e,width:h}
},_onClickDoc:function(b){var c=b.target||b.srcElement,d=c;
if(b.activeElement){d=b.activeElement
}if($(d).is($(this._currentInput))){return
}if(!!d.tagName&&d&&(this._prevInput&&d==this._prevInput||d.tagName.toLowerCase()=="html")){return
}while(d&&(!$(d).hasClass(this._layerClassName)&&d!=document.body)){d=d.parentNode;
if(!d){break
}}if(!this._realFocus&&!(d&&$(d).hasClass(this._layerClassName))||d==document.body){this.stopTimer();
this._prevInputValue="";
this.dispatch("blur",{event:b,clickEl:c})
}},_onClickToggleBtn:function(b){$.Event(b).preventDefault();
this.toggleBtn()
},_onClickInput:function(b){this.dispatch("clickInput",{event:b,value:this._currentInput.value,prev:this._prevInput,current:this._currentInput});
this._prevInput=this._currentInput
},_onKeyDown:function(b){if(b.keyCode===a.UP||b.keyCode===a.DOWN||(this.getService().isSuggestViewOpen()&&b.keyCode===a.TAB)){$.Event(b).preventDefault()
}this.dispatch("keydown",{keyCode:b.keyCode,value:this._currentInput.value,shiftKey:b.shiftKey})
},_onKeyDownTrigger:function(){this.startTimer();
$(this._currentInput).off("keydown",null,this._listener.keydownTrigger)
},_onFocus:function(b){if(this._realFocus){return
}this._currentInput=b.target||b.srcElement;
this._setCurrentIdx(this._currentInput);
$(this._currentInput).on("keydown",this._listener.keydownTrigger);
this.dispatch("focus",{event:b,value:this._currentInput.value,inputPos:this.getPos(this._currentInput),prev:this._prevInput,current:this._currentInput});
this._realFocus=true
},_onBlur:function(b){$(this._currentInput).off("keydown",null,this._listener.keydownTrigger);
this._prevInput=this._currentInput;
this._realFocus=false
},_onPaste:function(){$(this._currentInput).off("keydown",this._listener.keydownTrigger);
var b=this;
setTimeout(function(){b.compare(true)
},0)
},_onMouseDownClearBtn:function(b){$.Event(b).preventDefault();
this.clear(b.target||b.srcElement)
},_setCurrentIdx:function(b){for(var c=0,d=this._input.length;
c<d;
c++){if(this._input[c]==b){this._inputIndex=c;
break
}}},_getCookie:function(c){var b=document.cookie.split(/\s*;\s*/);
var f=new RegExp("^(\\s*"+c+"\\s*=)");
for(var e=0,d=b.length;
e<d;
e++){if(f.test(b[e])){return b[e].substr(RegExp.$1.length)
}}return null
},_setCookie:function(b,d,e,c){if(e==0){document.cookie=b+"="+escape(d)+"; path=/; domain="+c+";"
}else{document.cookie=b+"="+escape(d)+"; path=/; expires="+(new Date((new Date()).getTime()+e*1000*60*60*24)).toGMTString()+"; domain="+c+";"
}},_addEventListeners:function(){this._listener={clickDocument:$.proxy(this._onClickDoc,this),clickInput:$.proxy(this._onClickInput,this),mousedownClearInput:$.proxy(this._onMouseDownClearBtn,this),clickToggleBtn:$.proxy(this._onClickToggleBtn,this),keydownInput:$.proxy(this._onKeyDown,this),keydownTrigger:$.proxy(this._onKeyDownTrigger,this),focusInput:$.proxy(this._onFocus,this),blurInput:$.proxy(this._onBlur,this),pasteInput:$.proxy(this._onPaste,this)};
$(document).on("mousedown",this._listener.clickDocument);
for(var b=0,c=this._input.length;
b<c;
b++){$(this._input[b]).on("click",this._listener.clickInput);
if(this._clearBtn&&this._clearBtn.length){$(this._clearBtn[b]).on("mousedown",this._listener.mousedownClearInput)
}$(this._input[b]).on("keydown",this._listener.keydownInput);
$(this._input[b]).on("focus",this._listener.focusInput);
$(this._input[b]).on("blur",this._listener.blurInput);
$(this._input[b]).on("paste",this._listener.pasteInput)
}if(!(this._toggleBtn instanceof Array)&&this._toggleBtn){$(this._toggleBtn).on("click",this._listener.clickToggleBtn)
}},_removeEventListeners:function(){$(document).off("mousedown",null,this._listener.clickDocument);
for(var b=0,c=this._input.length;
b<c;
b++){$(this._input[b]).off("click",null,this._listener.clickInput);
if(this._clearBtn&&this._clearBtn.length){$(this._clearBtn[b]).off("mousedown",null,this._listener.mousedownClearInput)
}$(this._input[b]).off("keydown",null,this._listener.keydownInput);
$(this._input[b]).off("keydown",null,this._listener.keydownTrigger);
$(this._input[b]).off("focus",null,this._listener.focusInput);
$(this._input[b]).off("blur",null,this._listener.blurInput);
$(this._input[b]).off("paste",null,this._listener.pasteInput)
}if(!(this._toggleBtn instanceof Array)&&this._toggleBtn){$(this._toggleBtn).off("click",null,this._listener.clickToggleBtn)
}}});
var a={UP:38,DOWN:40,TAB:9}
}());
(function(){nhn.map.AutoComplete.SuggestView=iron.Class(nhn.map.Dispatcher,{KEYCODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,ENTER:13,TAB:9,SHIFT:16,SPACE:32,BACKSPACE:8,ESC:27,DEL:46},initialize:function(a){this._maxCount=a.maxCount;
this._searchContainer=a.layer;
this._inputField=null;
this._service=null;
this._selectedItem=null;
this._template=a.template;
this._highlightTag=a.highlightTag||"strong";
this._initHNDLs();
this._userQuery=null
},_initHNDLs:function(){this._blurHNDL=$.proxy(this._blur,this);
this._changeHNDL=$.proxy(this._change,this);
this._hideLayerHNDL=$.proxy(this._hideLayer,this);
this._focusHNDL=$.proxy(this._focus,this);
this._clickInputHNDL=$.proxy(this._clickInput,this);
this._keydownHNDL=$.proxy(this._keydown,this);
this._onMouseOverHNDL=$.proxy(this._onMouseOver,this);
this._onClickItemHNDL=$.proxy(this._onClickItem,this)
},setInputField:function(a){this._inputField=a
},activate:function(){this._attachToInputField();
this._listTemplate=this._template;
this._listArr=[];
this._isLayerOpened=false;
this._ignoreAfterEvent=false
},deactivate:function(){this.hide();
this._detachFromInputField()
},show:function(){if(this._searchContainer&&this._searchContainer.length>0){var a=this._searchContainer.parent(),b;
if(typeof this._parentZ==="undefined"){b=parseInt(a.css("z-index"),10);
this._parentZ=isNaN(b)?"auto":b
}b=isNaN(b)?100:b+100;
a.css("z-index",b);
this._searchContainer.show();
this._isLayerOpened=true;
this._firstItem=$("li:first",this._searchContainer);
this._lastItem=$("li:last-child",this._searchContainer);
this.dispatch("show",{items:this._listArr})
}},hide:function(){if(this._searchContainer&&this._searchContainer.length>0){if(typeof this._parentZ!=="undefined"){this._searchContainer.parent().css("z-index","")
}this._searchContainer.hide();
this._isLayerOpened=false;
this.dispatch("hide",{items:this._listArr})
}},_attachToInputField:function(){this._inputField.attach("blur",this._blurHNDL);
this._inputField.attach("change",this._changeHNDL);
this._inputField.attach("clear",this._hideLayerHNDL);
this._inputField.attach("focus",this._focusHNDL);
this._inputField.attach("clickInput",this._clickInputHNDL);
this._inputField.attach("keydown",this._keydownHNDL)
},_detachFromInputField:function(){this._inputField.detach("blur",this._blurHNDL);
this._inputField.detach("change",this._changeHNDL);
this._inputField.detach("clear",this._hideLayerHNDL);
this._inputField.detach("focus",this._focusHNDL);
this._inputField.detach("clickInput",this._clickInputHNDL);
this._inputField.detach("keydown",this._keydownHNDL)
},_attachEvent:function(){this._searchContainer.on("blur",this._blurHNDL);
this._searchContainer.on("keydown",this._keydownHNDL);
this._resultBox.on("mouseover",this._onMouseOverHNDL);
this._resultBox.on("click",this._onClickItemHNDL)
},_detachEvent:function(){this._searchContainer.off("blur",null,this._blurHNDL);
this._searchContainer.off("keydown",null,this._keydownHNDL);
this._resultBox.off("mouseover",null,this._onMouseOverHNDL);
this._resultBox.off("click",null,this._onClickItemHNDL)
},_focus:function(c){var b=$(c.current);
this.hide();
if(this._firstItemByKeyUp){var a=this._inputField.getService().getSearchQuery();
this._inputField.setValue(a)
}if(!this._searchContainer||this._searchContainer.length===0){this.add(b)
}if(c.prev==c.current){if($.trim(c.value).length==0||this._listArr.length==0){this.hide()
}}else{if($.trim(c.value).length!=0){this._ignoreEvent(true)
}}},_blur:function(a){this.hide();
this._setSelect(null)
},_endSuggest:function(){this.hide();
this._setSelect(null);
this._inputField.setValue(this._userQuery);
$(this._inputField._currentInput).focus();
this._inputField.stopTimer()
},add:function(b){if(this._searchContainer&&this._searchContainer.length>0){return
}b=$(b);
var a=this._getTemplate();
if(b.next().length>0){b.before(a)
}else{b.after(a)
}this._searchContainer=a;
this._resultBox=$("ul",this._searchContainer);
this._attachEvent();
this.dispatch("add",{resultBox:this._resultBox[0]})
},remove:function(){if(this._searchContainer>0){this._detachEvent();
this._searchContainer.remove();
this._searchContainer=null;
this._setSelect(null);
this.dispatch("remove")
}},clear:function(){if(this._searchContainer&&this._searchContainer.length>0){this._resultBox.empty()
}},_getTemplate:function(){return $('<div class="ly_ac _ac_layer" style="display:none;"><div class="lyac_in"><ul class="_listviewly"></ul><p><a class="_suggestHelpLink '+this._helpLinkClass+'" target="_blank" href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2033">도움말</a></p></div></div>')
},_change:function(a){if($.trim(a.value).length<=0){this.hide();
this.clear();
this._setSelect(null)
}},_hideLayer:function(){this.hide()
},_clickInput:function(a){if(a.prev==a.current){if(this._isLayerOpened||!this._listArr.length){this.hide()
}}},_ignoreEvent:function(a){this._ignoreAfterEvent=a
},_getIgnoreEvent:function(){return this._ignoreAfterEvent
},isLayerOpened:function(){return this._isLayerOpened
},setPos:function(a){this._searchContainer.width(a.inputPos.width)
},_keydown:function(c){$.Event(c).preventDefault();
if(c.keyCode==this.KEYCODES.SHIFT){return
}this._firstItemByKeyUp=false;
var b=c.originalTarget||c.srcElement||this._getSelectedItem();
if(c.keyCode==this.KEYCODES.DOWN){if(!this._isLayerOpened){if($.trim(c.value).length){this._inputField.setAjaxFlag(true);
this._inputField.startTimer();
this._inputField.compare(true)
}}else{this._selectNewItem(this._getNextDownItem(),true);
this._inputField.setAjaxFlag(false);
this._inputField.stopTimer()
}}else{if(c.keyCode==this.KEYCODES.UP&&this._isLayerOpened){this._selectNewItem(this._getNextUpItem(),true)
}else{if(c.keyCode==this.KEYCODES.ENTER){this.hide();
this._inputField.setAjaxFlag(false);
this._inputField.stopTimer()
}else{if(c.keyCode==this.KEYCODES.TAB){var a=null;
if(!this._isLayerOpened){return
}if(!c.shiftKey){if($(this._selectedItem).is(this._lastItem)){this._endSuggest();
return
}else{if(!b){a=this._listArr[0]
}else{a=this._getNextDownItem()
}}this._selectNewItem(a,true)
}else{if($(this._selectedItem).is(this._firstItem)){this._endSuggest();
return
}else{a=this._getNextUpItem();
if(a.id=="list0"){this._firstItemByKeyUp=true
}}this._selectNewItem(a,true)
}this._inputField.setAjaxFlag(false);
this._inputField.stopTimer()
}else{if(c.keyCode==this.KEYCODES.ESC){this.hide();
this._inputField.getCurrentInput().focus()
}else{this._inputField.setAjaxFlag(true);
this._inputField.startTimer()
}}}}}},_onClickItem:function(f){var d=f.target||f.srcElement;
var g=this._selectNewItem(d.parentNode,true);
if(g){var c=this._getElement(d,"li");
if(!c){return
}var a=c.lastChild;
var b=this._tagDecode((a.tagName.toLowerCase()=="input")?a.value:c.lastChild.innerHTML);
if(b.length>0){this._inputField.setValue(b);
this._inputField.submit()
}}this._setSelect(null);
this.hide()
},_onMouseOver:function(c){var b=c.target||c.srcElement;
var a=this._getElement(b,"li");
this._selectNewItem(a);
this._firstItemByKeyUp=false
},_selectNewItem:function(c,a){if(!c){return false
}var b=this._getElement(c,"li");
if(c.tagName.toLowerCase()=="p"){return
}if(a==true){this._updateInputValue(c)
}this._highlightOnSelection(b);
return true
},_getElement:function(c,a){var b=c;
while(b.tagName.toLowerCase()!=a){b=b.parentNode;
if(b==document.body){return null
}}return b
},_highlightOnSelection:function(a){if(this._selectedItem!=null){$(this._getSelectedItem()).removeClass("atcmp_on")
}this._setSelect(a);
$(a).addClass("atcmp_on")
},_updateInputValue:function(b){this._inputField.setAjaxFlag(false);
var c=this._getElement(b,"li");
if(!c){return
}var a=this._tagDecode(c.lastChild.innerHTML);
if(a.length>0){this._inputField.setValue(a)
}},_tagDecode:function(a){if(a==""){return""
}a=a.replace(/&#0?39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");
return a
},_setSelect:function(a){this._selectedItem=a
},_getSelectedItem:function(){return this._selectedItem
},_getSelectedIndex:function(){return(this._getSelectedItem())?this._getSelectedItem().id.split("list")[1]*1:null
},_getNextDownItem:function(){if(this._selectedItem&&this._selectedItem.parentNode){var a=this._getSelectedIndex();
if(a<this._listArr.length){return this._listArr[a+1]
}else{return null
}}else{this._setSelect(this._listArr[0]);
return this._listArr[0]
}},_getNextUpItem:function(){if(this._selectedItem==null){return
}var a=this._selectedItem.id.split("list")[1]*1;
if(a-1>-1){return this._listArr[a-1]
}else{return this._listArr[0]
}},drawList:function(h){var a="",e=0,g="",b=[],d,f,c;
if(h){f=h.items.length;
g=h.query[1]||h.query[0];
for(c=0;
c<f;
c++){if(h.items[c].length>0){b=h.items[c]
}}if(b.length>0){for(c=0;
c<b.length&&e<this._maxCount;
c++){if(b[c]!=undefined){g=h.query[1]?h.query[1]:h.query[0];
d=this.makeHighPre(b[c],g);
a+=this._listTemplate.replace("@in_txt@",b[c]).replace("@id@","list"+e).replace("@txt@",d);
e++
}}}this._userQuery=h.query[0]
}if(this._resultBox&&this._resultBox.length>0){this._resultBox.html(a);
this._showList()
}},_showList:function(){this._listArr=this._resultBox[0].getElementsByTagName("li");
if(this._listArr.length!=0){this.show()
}else{this.hide()
}},getLayer:function(){return this._searchContainer
},makeHighPre:function(h,g){var f=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");
var j=g.replace(/()/g," ").replace(/^\s+|\s+$/g,"");
var a=j.match(/\S/g);
var b=[];
for(var e=0,c=a.length;
e<c;
e++){b.push(a[e].replace(/[\S]+/g,"["+a[e].toLowerCase().replace(f,"\\$&")+"|"+a[e].toUpperCase().replace(f,"\\$&")+"] ").replace(/[\s]+/g,"[\\s]*"))
}j="("+b.join("")+")";
var k=h;
var d=new RegExp(j);
if(d.test(h)){k=h.join("").replace(d,"<"+this._highlightTag+">"+RegExp.$1+"</"+this._highlightTag+">")
}return k
},setServiceTarget:function(a){this._currentMenu=a
},addHelpLinkClass:function(a){this._helpLinkClass=a
}})
}());
nhn.map.AutoComplete.Service=function(a){this.apiURL=a.apiURL;
this.target=a.target;
this._resultData={}
};
nhn.map.AutoComplete.Service.prototype={search:function(b){this._searchQuery=b;
if($.trim(b).length==0){return
}var a=this;
$.ajax({url:a.apiURL,dataType:"jsonp",data:{q:b,st:a._getServiceTarget(),r_lt:a._getServiceTarget(),r_format:"json",t_koreng:1,q_enc:"UTF-8",r_enc:"UTF-8",r_unicode:0,r_escape:1,frm:"pcweb",r_cr:11},jsonp:"_callback",success:function(c){a._onResponse(c)
},error:function(c){a._onResponse()
}})
},_onResponse:function(a){if(a==undefined||a==null){return
}this._suggestView.drawList(a)
},setTarget:function(a){this.target=a
},_getServiceTarget:function(){if(this.target=="ROUTE"){return"01"
}else{if(this.target=="LOCATION"){return"10"
}else{if(this.target=="BUS"){return"1"
}else{return"11"
}}}},getSearchQuery:function(){return this._searchQuery
},getTarget:function(){return this.target
},setSuggestView:function(a){this._suggestView=a
},getSuggestView:function(){return this._suggestView
},isSuggestViewOpen:function(){return this._suggestView._isLayerOpened
}};
(function(){nhn.map.Suggest=iron.Class(nhn.map.Dispatcher,{_service:null,_suggestView:null,_inputField:null,_prevInput:null,_currentInput:null,_activated:false,initialize:function(a){this.options=$.extend({maxCount:10,dataType:"jsonp",cookieName:"NaverSuggest",useable:true},a);
this._configSetUp();
this._initCore()
},_configSetUp:function(){nhn.map.AutoComplete.Configurations.set(this.options)
},_initCore:function(){var a=this;
this._service=new nhn.map.AutoComplete.Service({apiURL:this.options.apiURL,target:this.options.serviceTarget});
this._suggestView=new nhn.map.AutoComplete.SuggestView({maxCount:this.options.maxCount,layer:this.options.layer,useable:this.options.useable,template:this.options.template,highlightTag:this.options.highlightTag});
this._inputField=new nhn.map.AutoComplete.InputField(this.options.inputField,{form:this.options.form,clearBtn:this.options.clearBtn,toggleBtn:this.options.toggleBtn,layerClassName:this.options.layerClassName,cookieName:this.options.cookieName});
this._inputField.attach({focus:function(b){a._setCurrentInput(b)
}});
this._service.setSuggestView(this._suggestView);
this._suggestView.setInputField(this._inputField);
this._inputField.setService(this._service)
},setServiceTarget:function(a){this._service.setTarget(a)
},getInputField:function(){return this._inputField
},getSuggestView:function(){return this._suggestView
},addInput:function(a,b){this.getInputField().addInput(a,b)
},removeInput:function(a,b){this.getInputField().removeInput(a,b)
},show:function(){this.getSuggestView().show()
},hide:function(){this.getSuggestView().hide()
},isActivated:function(){return this._activated
},activate:function(){this._activated=true;
this._onActivate()
},deactivate:function(){this._activated=false;
this._onDeactivate()
},_setCurrentInput:function(a){this._currentInput=a.current
},_hasClassName:function(c,b){var a=c;
while(!$(a).hasClass(b)){a=a.parentNode;
if(a==document.body){return false
}}return true
},_onActivate:function(){this._inputField.activate();
this._suggestView.activate()
},_onDeactivate:function(){this._inputField.deactivate();
this._suggestView.deactivate()
},addHelpLinkClass:function(a){this._suggestView.addHelpLinkClass(a)
}})
}());
nhn.map.service.AbstractAutoComplete=iron.Class({initialize:function(){this._initializeVariables();
this.setSuggest()
},_initializeVariables:function(){this._apiURL={real:"/ac.map/ac",dev:"https://test.map.naver.com/ac.map/ac",test:"/ac.map/ac"}
},getHostPhase:function(){var a=location.hostname.split(".")[0];
if(["test"].indexOf(a)>=0){return this._apiURL.test
}else{if(["local"].indexOf(a)>=0||["dev"].indexOf(a)>=0){return this._apiURL.dev
}else{return this._apiURL.real
}}},setSuggest:$.noop,onFocus:$.noop,onBlur:$.noop,onChange:$.noop,onSubmit:$.noop,showLayer:$.noop,hideLayer:$.noop,addLayer:$.noop});iron.ns("nhn.map").AbstractDAO=iron.Class({inherit:nhn.map.Dispatcher},{_SERVER_TOKEN:"/common2/getToken.nhn",_HMAC_CALL_COUNT:0,initialize:function(){},enableCache:function(){this._cacheDisabled=false
},disableCache:function(){this._cacheDisabled=true
},addCache:function(b,c){if(this._cacheDisabled){return
}if(!this._cache){this._cache={}
}this._cache[b]=c
},getCache:function(b){if(!this._cache||!this._cache[b]||this._cacheDisabled){return null
}return this._cache[b]
},removeCache:function(b){if(this._cache){delete this._cache[b]
}},clearCache:function(){delete this._cache;
this._cache={}
},_request:function(f){var m=this,j=f.url+"|"+(f.type?f.type.toUpperCase():"GET")+"|"+$.param(f.data||{}),b=this.getCache(j),l=(f.dataType||"json").toLowerCase(),e=f.successRule,d=f.success,h=f.error,g=f.abort,i=null,c=f.isHmac;
if(c&&(document.cookie.indexOf("_naver_usersession_")===-1)){f.data._=""
}if(b&&!this._cacheDisabled&&!f.disableCache){d&&d(b)
}else{f.success=function(o,q,p){if(typeof o=="string"){o=JSON.parse(o)
}if(o){var n=o.error;
if(n&&c){if(n.code==="HMAC_EXPIRED"||n.code==="HMAC_AUTH_FAILED"){m._HMAC_CALL_COUNT++;
if(m._HMAC_CALL_COUNT===3){m._HMAC_CALL_COUNT=0;
m.abortLast();
return
}m._request({url:m._SERVER_TOKEN,type:"GET",dataType:"json",disableCache:true,success:function(){m._request(f)
}});
return
}}if(m._successRuleCheck(o,e)){d&&d(o,q,p);
m.addCache(j,o)
}else{f.error&&f.error(o)
}}else{f.error&&f.error()
}};
f.error=function(o,p,n){if(p&&p.toLowerCase()=="abort"){g&&g(o,p,n);
return
}else{h&&h(o,p,n)
}};
delete f.abort;
delete f.successRule;
f.dataType=l;
if(f.dataType==="jsonp"){f.timeout=60000
}i=$.ajax(f);
if(i&&l=="jsonp"){i=null
}else{this._lastXHR=i
}}return i||null
},_successRuleCheck:function(c,e){var b=false;
if(!e){b=true
}else{if(c){for(var d in e){if(e.hasOwnProperty(d)){if(e[d]!==undefined&&(c[d]!==undefined&&c[d]!==null)){if(e[d]===true){b=true
}else{if(e[d]===false&&(c[d]===false||c[d])){return false
}else{if(e[d]==c[d]){b=true
}else{if(typeof e[d]=="object"){b=arguments.callee(c[d],e[d]);
if(!b){return false
}}else{return false
}}}}}else{if(e[d]===undefined&&(c[d]!==undefined&&c[d]!==null)){return false
}else{if(e[d]!==undefined&&(c[d]===undefined||c[d]===null)){if(e[d]===false){b=true
}else{return false
}}}}}}}}return b
},getLastXHR:function(){return this._lastXHR||null
},abortLast:function(){this._lastXHR&&this._lastXHR.abort()
}});
iron.ns("nhn.map.service").MapConnector=iron.Class({inherit:nhn.map.Dispatcher},{name:"nhn.map.service.MapConnector",initialize:function(){this._mapMode="MAIN";
this.UID=iron.guid()
},isReady:function(){return !!this._ready
},setBoundOffset:function(d,e,f,c){this.oApp.exec("SET_BOUND_OFFSET",[d,e,f,c])
},getBoundOffset:function(){return this.oApp.getBoundOffset()
},getMapElement:function(){return this.oApp.getMap()
},getOffset:function(b){return this.oApp.getOffset(b)
},getPane:function(b){return this.oApp.getPane(b)
},getInfoPane:function(){return this.oApp.getInfoPane()
},getMapOffset:function(b){return this.oApp.getMapOffset(b)
},getPointToPixel:function(b){return this.oApp.getPointToPixel(b)
},getOffsetToPoint:function(b){return this.oApp.getOffsetToPoint(b)
},getOffsetToLatlng:function(b){return this.getOffsetToPoint(b).toLatLng()
},getPointToOffset:function(b){return this.oApp.getPointToOffset(b)
},getLatlngByOffset:function(b){return this.oApp.getOffsetToPoint(b).toLatLng()
},getPixelToLatLng:function(b){var c=this.oApp.getOffset(b);
return this.oApp.getOffsetToPoint(c).toLatLng()
},getMeterToPixel:function(b,c){var c=c||this.getLevel();
return b*(1/Math.pow(2,12-c))
},getMeterToInner:function(b){return this.getMeterToPixel(b)/this.getScale()
},setCursor:function(c,b,d){this.oApp.exec("SET_CURSOR",[c||"default",b,d])
},clearCursor:function(){this.oApp.exec("RESET_CURSOR")
},setCenter:function(b,c){this.oApp.exec("SET_CENTER",[b,c,false])
},getCenter:function(){return this.oApp.getCenterPoint()
},getCenterPixel:function(){return this.oApp.getCenterPixel()
},panMapByPoint:function(c,i,e){var g=this.getScale(),f=c.toInner(),d=e&&e.toInner(),b=d||this.getCenter(),h={x:b.x-f.x,y:f.y-b.y};
h.x*=g;
h.y*=g;
this.panMapAnd(h,i)
},panMap:function(c,b){this.oApp.exec("PAN_MAP",[c,b])
},panMapAnd:function(e,d){var c=iron.guid(),b=this;
this.addIgnoreClass("naver_map");
this.attach("PAN_MAP_END_DONE."+c,function(){d&&d();
b.removeIgnoreClass("naver_map");
b.detach("."+c)
});
this.panMap(e.x,e.y)
},$ON_SET_CENTER:function(){this._fire("SET_CENTER")
},$ON_PAN_MAP:function(){this._fire("PAN_MAP")
},setLevel:function(b){this.oApp.exec("ZOOM",[b,null,{useEffect:false}])
},getLevel:function(){return this.oApp.getZoomLevel()
},getScale:function(b){var b=b!==undefined?b:this.getLevel();
return nhn.mapcore.mapSpec.getScale(b)
},setMapType:function(b){if(b=="vector"){this.unloadSatellitePane();
this.unloadHybridPane();
this.unloadTerrainPane();
this.loadVectorPane()
}if(b=="hybrid"){this.unloadVectorPane();
this.unloadTerrainPane();
this.loadSatellitePane();
this.loadHybridPane()
}if(b=="satellite"){this.unloadVectorPane();
this.unloadHybridPane();
this.unloadTerrainPane();
this.loadSatellitePane()
}if(b=="terrain"){this.unloadSatellitePane();
this.unloadHybridPane();
this.unloadVectorPane();
this.loadTerrainPane()
}},getMapType:function(){var c=this.getActiveMapType(),b="";
if(c.indexOf("satellite")>-1){b=c.indexOf("hybrid")>-1?"hybrid":"satellite"
}else{if(c.indexOf("terrain")>-1){b="terrain"
}else{b="vector"
}}return b
},isMarker:function(b){return this.oApp.isMarker(b)
},getMarkerById:function(b){return this.oApp.getMarkerById(b)
},getActiveMapType:function(){return this.oApp.getActiveMapType()
},loadVectorPane:function(){this.oApp.exec("LOAD_VECTOR_PANE");
this.oApp.exec("LCS_LOAD_VECTOR_PANE")
},unloadVectorPane:function(){this.oApp.exec("UNLOAD_VECTOR_PANE")
},loadSatellitePane:function(){this.oApp.exec("LOAD_SATELLITE_PANE");
this.oApp.exec("LCS_LOAD_SATELLITE_PANE")
},unloadSatellitePane:function(){this.oApp.exec("UNLOAD_SATELLITE_PANE")
},loadHybridPane:function(){this.oApp.exec("LOAD_HYBRID_PANE");
this.oApp.exec("LCS_LOAD_HYBRID_PANE")
},unloadHybridPane:function(){this.oApp.exec("UNLOAD_HYBRID_PANE");
this.oApp.exec("LCS_UNLOAD_HYBRID_PANE")
},loadStreetPane:function(){this.oApp.exec("LOAD_STREET_PANE")
},unloadStreetPane:function(){this.oApp.exec("UNLOAD_STREET_PANE")
},loadBicyclePane:function(){this.oApp.exec("LOAD_BICYCLE_PANE");
this.oApp.exec("LCS_LOAD_BICYCLE_PANE")
},unloadBicyclePane:function(){this.oApp.exec("UNLOAD_BICYCLE_PANE")
},loadTrafficPane:function(){this.oApp.exec("LOAD_TRAFFIC_PANE");
this.oApp.exec("LCS_LOAD_TRAFFIC_PANE")
},unloadTrafficPane:function(){this.oApp.exec("UNLOAD_TRAFFIC_PANE")
},loadTerrainPane:function(){this.oApp.exec("LOAD_TERRAIN_PANE")
},unloadTerrainPane:function(){this.oApp.exec("UNLOAD_TERRAIN_PANE")
},loadCadastralPane:function(){this.oApp.exec("LOAD_CADASTRAL_PANE")
},unloadCadastralPane:function(){this.oApp.exec("UNLOAD_CADASTRAL_PANE")
},zoom:function(d,b,c){this.oApp.exec("ZOOM",[d,b,$.extend({useEffect:true},c)])
},delayZoom:function(d,c,b){this.oApp.exec("DELAY_ZOOM",[d,c,b])
},moveMap:function(b){this.oApp.exec("MOVE_MAP",[b])
},setBound:function(d,c){var b=this;
b.oApp.exec("BOUND_TO_CENTER",[d,c]);
b.__calledBounds=[d,c];
window.clearTimeout(b._rcbTimer);
b._rcbTimer=window.setTimeout(function(){b.__calledBounds=null
},150)
},getBound:function(){return this.oApp.getBoundPoint()
},setBoundLazy:function(){var b=this.__calledBounds;
if(b){this.setBound(b[0],b[1])
}this.__calledBounds=null
},getBoundAsLatLng:function(){return nhn.mapcore.CoordConverter.toLatLng(this.getBound())
},getEntireBound:function(){return this.oApp.getEntireBound()
},getEntireBoundAsLatLng:function(){return nhn.mapcore.CoordConverter.toLatLng(this.getEntireBound())
},isInBound:function(f){if(!(f instanceof Array)){f=[f]
}var b=true,e=this.getBound(),g=null;
for(var c=0,d=f.length;
c<d;
c++){g=f[c].toInner();
if(e[0]>g.x||e[1]<g.y||e[2]<g.x||e[3]>g.y){b=false;
break
}}return b
},setMapSize:function(b,c){this.oApp.exec("SET_MAP_SIZE",[b,c])
},getMapSize:function(){return this.oApp.getMapSize()
},addMarker:function(b){this.oApp.exec("ADD_CREATED_MARKER",[b]);
if(b.options.poiInfo&&b.options.poiInfo.hasRoad){this.oApp.exec("DRAW_POLY_MARKER_LINE",[b])
}},removeMarker:function(b){this.oApp.exec("REMOVE_CREATED_MARKER",[b])
},focusMarker:function(b){this.oApp.exec("FOCUS_MARKER",[b])
},blurMarker:function(b){this.oApp.exec("BLUR_MARKER",[b])
},clickMarker:function(b){this.oApp.exec("CLICK_MARKER",[b])
},selectMarker:function(b){this.oApp.exec("SELECT_MARKER",[b])
},unselectMarker:function(b){this.oApp.exec("UNSELECT_MARKER",[b])
},getStaticContainer:function(){return this.oApp.getStaticContainer()
},addToStaticContainer:function(b){this.oApp.exec("ADD_TO_STATIC_CONTAINER",[jindo.$(b)])
},getMovableContainer:function(){return this.oApp.getMovableContainer()
},disableResize:function(){this._resizeDisabled=true
},enableResize:function(){this._resizeDisabled=false
},disableChangeMapEvent:function(){this._changeMapEventDisabled=true
},enableChangeMapEvent:function(){delete this._changeMapEventDisabled
},setMapMode:function(b){var c=this._mapMode;
this._mapMode=b||"MAIN";
this._fire("MAP_MODE_CHANGED",{prevMode:c,mapMode:b})
},getMapMode:function(){return this._mapMode
},resize:function(){this.oApp.exec("RESIZE_MAP_DONE")
},setResizing:function(b){this.__resizing=!!b
},isResizing:function(){return !!this.__resizing
},addDrawing:function(b){this.oApp.exec("ADD_DRAWING",[b])
},removeDrawing:function(b){this.oApp.exec("REMOVE_DRAWING",[b])
},addIgnoreClass:function(b,c){this.oApp.exec("ADD_IGNORE_CLASS",[b,c])
},removeIgnoreClass:function(b,c){this.oApp.exec("REMOVE_IGNORE_CLASS",[b,c])
},getLatLngByScreenPoint:function(b){var c=this.getOffset(b),d=this.getOffsetToLatlng(c);
return d
},addDirectionsCctvs:function(e){var c,b=e.length;
for(var d=0;
d<b;
d++){c=e[d];
c.preCctv=(d===0)?null:{cctv_no:e[d-1].id};
c.nextCctv=(d===b-1)?null:{cctv_no:e[d+1].id};
if(c.preCctv){c.preCctv.uid=c.preCctv.cctv_no
}if(c.nextCctv){c.nextCctv.uid=c.nextCctv.cctv_no
}this.oApp.exec("ADD_CCTV_MARKER",["cctvRoute",c,{},{group:"cctvRoute",spriteClass:"sym_cctv"}])
}this.oApp.exec("HIDE_OVERLAP_CCTV")
},clearDirectionsCctvs:function(){this.oApp.exec("HIDE_CCTV_LAYER",[true]);
this.oApp.exec("CLEAR_AREA_MARKER",["cctvRoute"])
},showDirectionsCctv:function(b){this.oApp.exec("HIDE_CCTV_LAYER",[true]);
this.oApp.exec("SHOW_CCTV_LAYER",["cctvRoute",b,{zoomLevel:10,setCenter:true}])
},openMarkerLabelLayer:function(b){this.oApp.exec("OPEN_MARKER_LABEL_LAYER",[b,{}])
},closeMarkerLabelLayer:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},trimPath:function(d,b,e,c){return this.oApp.trimPath(d,b,e,c)
},isActiveMapType:function(b){return !!this.oApp.isActiveMapType(b)
},refreshTrafficPane:function(){this.oApp.exec("REFRESH_TRAFFIC_PANE")
},disablePanMap:function(){this.$BEFORE_PAN_MAP=function(){return false
}},enablePanMap:function(){this.$BEFORE_PAN_MAP=function(){}
},setEnableDblClickZoom:function(b){this.oApp.exec("SET_ENABLE_DBLCLICK_ZOOM",[b])
},$BEFORE_PAN_MAP:function(){},_fire:function(c,b){this.dispatch($.Event(c,b||{}))
},$BEFORE_MSG_APP_READY:function(){this._fire("BEFORE_MSG_APP_READY")
},$ON_MSG_APP_READY:function(){this._fire("MSG_APP_READY")
},$AFTER_MSG_APP_READY:function(){this._fire("AFTER_MSG_APP_READY");
this._ready=true
},$BEFORE_CHANGE_MAP_DONE:function(){return !this._changeMapEventDisabled
},$ON_CHANGE_MAP_DONE:function(){var b=arguments;
this._fire("CHANGE_MAP_DONE",{zoomed:b[0],moved:b[1],bound:b[2]})
},$ON_REDRAW_DONE:function(){this._fire("REDRAW_DONE")
},$ON_MOUSEDOWN_WINDOW_DONE:function(b){this._fire("MOUSEDOWN_WINDOW_DONE",{domEvent:$.event.fix(b.$value())})
},$ON_BEGIN_DRAG:function(b){this._fire("BEGIN_DRAG",{domEvent:$.event.fix(b.$value())})
},$ON_BEGIN_DRAG_DONE:function(b){this._fire("BEGIN_DRAG_DONE",{domEvent:$.event.fix(b.$value())})
},$ON_DRAG:function(b){this._fire("DRAG",{domEvent:$.event.fix(b.$value())})
},$ON_END_DRAG:function(b){this._fire("END_DRAG",{domEvent:$.event.fix(b.$value())})
},$ON_END_DRAG_DONE:function(b,c){this._fire("END_DRAG_DONE",{domEvent:$.event.fix(b.$value()),dragGap:c})
},$ON_MOUSEWHEEL_MAP_DONE:function(b){this._fire("MOUSEWHEEL_MAP_DONE",{domEvent:$.event.fix(b.$value())})
},$ON_ZOOM_MAP_START_DONE:function(){this._fire("ZOOM_MAP_START_DONE")
},$ON_ZOOM_MAP_END_DONE:function(){this._fire("ZOOM_MAP_END_DONE")
},$ON_ZOOM:function(){this._fire("ZOOM")
},$ON_PAN_MAP_START_DONE:function(){this._fire("PAN_MAP_START_DONE")
},$ON_PAN_MAP_END_DONE:function(){this._fire("PAN_MAP_END_DONE")
},$ON_START_STREET_POINTER_DONE:function(){this._fire("START_STREET_POINTER_DONE")
},$ON_END_STREET_POINTER_DONE:function(){this._fire("END_STREET_POINTER_DONE")
},$ON_SET_ZOOM_LEVEL:function(b){this._fire("SET_ZOOM_LEVEL",{level:b})
},$ON_LOAD_STREET_PANE:function(){this._fire("LOAD_STREET_PANE")
},$ON_UNLOAD_STREET_PANE:function(){this._fire("UNLOAD_STREET_PANE")
},$ON_CONTEXTMENU_EVENT_DONE:function(){this._fire("CONTEXTMENU_EVENT_DONE")
},$ON_CLICK_MAP_DONE:function(c){var b=$.event.fix(c.$value()),d=this.getLatLngByScreenPoint({x:b.clientX,y:b.clientY});
this._fire("CLICK_MAP_DONE",{domEvent:b,latlng:d})
},$ON_MOUSEDOWN_EVENT_DONE:function(c){var b=$.event.fix(c.$value()),d=this.getLatLngByScreenPoint({x:b.clientX,y:b.clientY});
this._fire("MOUSEDOWN_EVENT_DONE",{domEvent:b,latlng:d})
},$ON_MOUSEUP_EVENT_DONE:function(c){var b=$.event.fix(c.$value()),d=this.getLatLngByScreenPoint({x:b.clientX,y:b.clientY});
this._fire("MOUSEUP_EVENT_DONE",{domEvent:b,latlng:d})
},$ON_MOUSEMOVE_EVENT_DONE:function(b){this._fire("MOUSEMOVE_EVENT_DONE",{domEvent:$.event.fix(b.$value())})
},$BEFORE_SET_MAP_SIZE:function(){return !this._resizeDisabled
},$ON_RESIZE_MAP_DONE:function(){this._fire("RESIZE_MAP_DONE")
},$ON_REGISTER_MAP_TYPE_DONE:function(b){this._fire("REGISTER_MAP_TYPE_DONE",{mapType:b})
},$ON_UNREGISTER_MAP_TYPE_DONE:function(b){this._fire("UNREGISTER_MAP_TYPE_DONE",{mapType:b})
},$ON_REDRAW:function(b){if(b){this.dispatch("zoom",{zoomLevel:this.getLevel()})
}this.dispatch("REDRAW")
},$ON_MOVE_MAP:function(b){this._fire("MOVE_MAP",b)
},$ON_SET_MIN_MAX_LEVEL:function(c,b){this._fire("SET_MIN_MAX_LEVEL",{minLevel:c,maxLevel:b})
},setMinMaxLevel:function(c,b){this.oApp.exec("SET_MIN_MAX_LEVEL",[c,b])
},getMinMaxLevel:function(){return this.oApp.getMinMaxLevel()
},getMinLevel:function(){return this.getMinMaxLevel()[0]
},getMaxLevel:function(){return this.getMinMaxLevel()[1]
},setBoundLock:function(b){this.oApp.exec("SET_BOUND_LOCK",[b])
},clearBoundLock:function(){this.oApp.exec("CLEAR_BOUND_LOCK")
},addPane:function(b){this.oApp.exec("ADD_PANE",[b])
},$ON_SET_INDOOR_LEVEL:function(b){this._fire("SET_INDOOR_LEVEL",{indoorLevel:b})
},$AFTER_CLEAR_INDOOR_LEVEL:function(){this._fire("CLEAR_INDOOR_LEVEL")
},$ON_SET_BOUND_LOCK:function(b){this._fire("SET_BOUND_LOCK",{lockedBound:b})
},$ON_CLEAR_BOUND_LOCK:function(){this._fire("CLEAR_BOUND_LOCK")
},pushDrawing:function(b){this.oApp.getPane("nmap_drawing_pane").pushDrawing(b)
},flushDrawing:function(){return this.oApp.getPane("nmap_drawing_pane").flush()
},$ON_SELECT_MARKER:function(b){this._fire("SELECT_MARKER",{marker:b})
},$ON_UNSELECT_MARKER:function(){this._fire("UNSELECT_MARKER")
},$ON_LOAD_TERRAIN_PANE:function(){this._fire("load_terrain_pane")
},$ON_UNLOAD_TERRAIN_PANE:function(){this._fire("unload_terrain_pane")
},$ON_LOAD_CADASTRAL_PANE:function(){this._fire("load_cadastral_pane")
},$ON_UNLOAD_CADASTRAL_PANE:function(){this._fire("unload_cadastral_pane")
},$ON_LOAD_VECTOR_PANE:function(){this._fire("load_vector_pane")
},$ON_UNLOAD_VECTOR_PANE:function(){this._fire("unload_vector_pane")
},$ON_LOAD_SATELLITE_PANE:function(){this._fire("load_satellite_pane")
},$ON_UNLOAD_SATELLITE_PANE:function(){this._fire("unload_satellite_pane")
},$ON_LOAD_BICYCLE_PANE:function(){this._fire("load_bicycle_pane")
},$ON_UNLOAD_BICYCLE_PANE:function(){this._fire("unload_bicycle_pane")
},$ON_LOAD_TRAFFIC_PANE:function(){this._fire("load_traffic_pane")
},$ON_UNLOAD_TRAFFIC_PANE:function(){this._fire("unload_traffic_pane")
},$ON_SET_MAP_SIZE:function(){this._fire("SET_MAP_SIZE")
},$ON_ADD_CREATED_MARKER:function(b){this._fire("ADD_CREATED_MARKER",{marker:b})
},$ON_REMOVE_CREATED_MARKER:function(b){this._fire("REMOVE_CREATED_MARKER",{marker:b})
},getFloor:function(){return this.oApp.getFloor()||0
},setSatelliteSubtype:function(b,c){this.oApp.exec("SET_SATELLITE_SUBTYPE",[b,c])
},unsetSatelliteSubtype:function(){this.oApp.exec("UNSET_SATELLITE_SUBTYPE")
},$ON_LOAD_SATELLITE_SUBTYPE:function(b,c){this._fire("LOAD_SATELLITE_SUBTYPE",{subtype:b,timestamp:c})
},$ON_UNLOAD_SATELLITE_SUBTYPE:function(b,c){this._fire("UNLOAD_SATELLITE_SUBTYPE",{subtype:b,timestamp:c})
},setZoomBasePoint:function(b){this.oApp.setZoomBasePoint(b)
},clearZoomBasePoint:function(){this.oApp.clearZoomBasePoint()
},getZoomBasePoint:function(){return this.oApp.getZoomBasePoint()||null
},findOptimaizedZoomLevel:function(e,p){var h=this.getMapSize(),c=parseInt(e[2],10)-parseInt(e[0],10),o=parseInt(e[1],10)-parseInt(e[3],10),l=this.getBoundOffset(),b=this.getMinMaxLevel()[0],m=this.getMinMaxLevel()[1],d,g,j;
if(p.mapSize){h.width=p.mapSize.width;
h.height=p.mapSize.height
}if(p&&p.offset){for(var f=0,n=p.offset.length;
f<n;
f++){l[f]+=p.offset[f]
}}if(p&&p.minLevel){b=p.minLevel
}if(p&&p.maxLevel){m=p.maxLevel
}for(var f=m;
f>=b;
f--){d=this.getScale(f);
g=(h.width-(l[2]+l[0]))/d;
j=(h.height-(l[3]+l[1]))/d;
if((g>c)&&(j>o)){return f
}}return -1
},disableDrag:function(){this.oApp.exec("DISABLE_DRAG")
},enableDrag:function(){this.oApp.exec("ENABLE_DRAG")
},levelInRange:function(e,b,d){var c=this.getMinMaxLevel();
d=d||this.getLevel();
e=e||c[0];
b=b||c[1];
return e<=d&&b>=d
},pointInBound:function(b,c){c=c||this.getBound();
b=b.toInner();
return b.x>=c[0]&&b.x<=c[2]&&b.y>=c[3]&&b.y<=c[1]
},getInfowindowPane:function(){return this.getPane("nmap_info_pane")
},getOverlayPane:function(){return this.getPane("nmap_overlay_pane")
},getDrawingPane:function(){return this.getPane("nmap_drawing_pane")
},getTrafficLastVersion:function(){return this.oApp.getTrafficLastVersion()
},gatherUrlParameter:function(){var b=this.getCenter().toLatLng(),f=this.getLevel(),c=["cadastral","bicycle","traffic"],d=this.getActiveMapType(),e={lat:b.lat(),lng:b.lng(),dlevel:f};
d.filter(function(g){return c.indexOf(g)>-1
}).forEach(function(g){e[g]="on"
});
return e
},registerPlugin:function(b){this.oApp.registerPlugin(b)
}});
(function(){var b="/common2/encryptParams.nhn";
iron.ns("nhn.map.service").EncryptParamsDAO={request:function(d,f,c){d=decodeURIComponent(d);
var e=this._getParams(d);
$.ajax({type:"POST",url:b,dataType:"json",data:e,success:function(g){var h=g.queryString;
if(h){f&&f(h)
}else{c&&c()
}},error:function(g){c&&c()
}})
},_getParams:function(d){var c=d.split("?")[1]||"",f=c.split("&"),n={};
for(var g=0,m=f.length;
g<m;
g++){var e=f[g],h=e.indexOf("="),l=e.substring(0,h),j=e.substring(h+1);
n[l]=j
}return n
}}
}());
function SocialPlugIn_Core(P){function H(b){x()&&(typeof b=="undefined"?G():(C(b),A(b)))
}function G(){J.sCharset=K,L.loadCSS("naver-splugin-css",N._CSS["standard_"+K+(window.location.protocol=="https:"?"_https":"")]),I&&I.length>0&&C();
var e=L.cssquery(N._SPLUGIN_CLASS);
for(var c=0;
c<e.length;
c++){var g=e[c],f=splugin.util.getAttribute(e[c],"data-style")||"standard";
I.push({id:L.randomId(),container:g})
}A()
}function F(d,c){C(d),typeof c!="undefined"&&L.setParameters(d,c),A(d)
}function E(b){b=b.toLowerCase(),C(),D(b),setTimeout(function(){H(),J.onLangChange&&typeof J.onLangChange=="function"&&J.onLangChange()
},2000)
}function D(b){document.getElementById("naver-splugin-sdk")&&document.getElementById("naver-splugin-sdk").remove(),function(){var c="naver-splugin-sdk",p=new Date,o=p.getFullYear(),n=p.getMonth()+1,m=p.getDate(),l=document.createElement("script");
l.id=c,l.type="text/javascript",l.charset="utf-8",l.async=!1,l.src=N._sSpiDomain[N.getDeployVariable()].net+"/js/release/"+N._sLangCode[b]+"/splugin.js?"+o+(n<10?"0"+n:n)+(m<10?"0"+m:m);
var j=document.getElementsByTagName("head")[0];
j.appendChild(l,j)
}()
}function C(d){if(typeof d=="undefined"){for(var c=0;
c<I.length;
c++){var m=I[c].handler;
m.kill(),M.detachEvent(I[c].container,"click",m.handleEvent)
}I=[]
}else{var l=L.getAttribute(d,N._SPLUGIN_ID);
for(var c=0;
c<I.length;
c++){var h=I[c],e=I[c].container,m=I[c].handler;
if(h.id==l){m.kill(),M.detachEvent(e,"click",m.handleEvent),I.splice(c,1);
break
}}}}function B(f){if(typeof f=="undefined"){for(var e=0;
e<I.length;
e++){var h=I[e].handler;
h.hide()
}}else{for(var e=0;
e<I.length;
e++){var g=I[e];
h=I[e].handler,g.id!=f&&h.hide()
}}}function A(h){if(typeof h=="undefined"){for(var e=0;
e<I.length;
e++){var q=I[e],p=z(q),o=p.htElements,n=p.htParameter||{},m=p.htLayout||{},l=y(q,o,n,m);
I[e].handler=l
}}else{var q={id:L.randomId(),container:h},p=z(q),o=p.htElements,n=p.htParameter||{},m=p.htLayout||{},l=y(q,o,n,m);
q.handler=l,I.push(q)
}}function z(f){var e=new SocialPlugIn_View({htOption:J}),h=L.getAttribute(f.container,"data-style")||"standard",g=e.getNewInstance(h);
return g.initView({sSplugInId:f.id,elContainer:f.container})
}function y(e,d,o,n){var m=new SocialPlugIn_Handler({htOption:J}),l=L.getAttribute(e.container,"data-style")||"standard",g=m.getNewInstance(l,d,o,n);
return M.attachEvent(e.container,"click",g.handleEvent),g
}function x(){var r=[],q=L.cssquery(N._SPLUGIN_CLASS);
for(var p=0;
p<q.length;
p++){var o=q[p];
r.push({container:o})
}var n=document.location.href;
if(w(n)){return !0
}for(var p=0;
p<r.length;
p++){var m=r[p],l,e;
for(var c=0;
c<m.container.attributes.length;
c++){return m.container.attributes[c].name=="data-url"?l=m.container.attributes[c].value:m.container.attributes[c].name=="data-canonical-url"&&(e=m.container.attributes[c].value),w(l)?!0:w(e)?!0:v(n)||v(l)||v(e)?!1:(sendInvalidRefererLog(n||l||e),!0)
}}}function w(e){var d=/^(https?):\/\/((.)*((naver\.com)|(pholar\.co)|(spacecloud\.kr)|(naverfoundation\.org)|(modoo\.at)|(grafolio\.com)|(nhn\.com)|(nhncorp\.com)|(hangame\.com)|(wingspoon\.com)|(me2day\.net)|(navercorp\.com)|(playsw\.or\.kr)|(naver\.me)|(blog\.me)|(naver\.net)|(linedict\.com)))(.)*(\/(.)*)*$/,f=d.test(e);
return f?!0:!1
}function v(e){var d=/^(https?):\/\/((.)*((daum\.net)))(.)*(\/(.)*)*$/,f=d.test(e);
return f?!0:!1
}"use strict";
var O=splugin.charset,N=splugin.variables,M=splugin.common,L=splugin.util,K=O._CHARSET,J=P||{},I=[];
return H(),M.attachEvent(document,"click",function(e){var c=e.target||e.srcElement,f=L.findParentNode(c,N._SPLUGIN_CLASS,10),f=f||L.findParentNode(c,"_ly_spi",10);
f?B(f.getAttribute(N._SPLUGIN_ID)):B()
}),splugin.instance={init:function(b){H(b)
},update:function(d,c){F(d,c)
},kill:function(b){C(b)
},hide:function(b){B(b)
},updateLang:function(b){E(b)
}},splugin.instance
}function SocialPlugIn_LayerPosition(B,A,z){function s(){r(A),q()
}function r(d){var c={};
y.isNotEmpty(d.option)&&(typeof d.option=="object"?c=d.option:c=x.strToJson(d.option)),w={baseElement:document.getElementById(c.baseElement),limitElement:c.limitElement||null,layerPosition:c.layerPosition||"outside-bottom",align:c.align||"right",top:c.top||4,left:c.left||0,marginTop:c.marginTop||0,marginLeft:c.marginLeft||0}
}function q(){v={left:0,top:0};
try{var e=w.baseElement||o(z),c=x.offset(e),g={height:e.clientHeight,width:e.clientWidth};
w.layerPosition=="outside-bottom"?v.top=c.top+g.height+w.top:w.layerPosition=="outside-top"&&(v.top=c.top-w.top,u=function(b){return v.top-b.clientHeight
}),w.align=="left"?v.left=c.left+w.left:w.align=="right"&&(v.left=c.left+g.width-w.left,t=function(b){return v.left-b.clientWidth
})
}catch(f){}}function p(e){var d={left:0,top:0};
try{d.top=u(e),d.left=t(e)
}catch(f){}return{top:d.top<0?w.marginTop||0:d.top,left:d.left<0?w.marginLeft||0:d.left}
}function o(e){var d=y.getSingle("_spi_lst",e);
if(!d){return e
}var f=d.getElementsByTagName("li");
return !f||f.length<=0?e:w.align=="left"?f[0]:f[f.length-1]
}"use strict";
var y=splugin.util,x=splugin.common,w={},v={},u=function(){return v.top||0
},t=function(){return v.left||0
};
return s(),{getOption:function(){return w
},getAdjustOffset:function(b){return p(b)
}}
}function SocialPlugIn_Handler(e){function f(b,i,h,g){d.htElement=i,d.htParameter=h,d.htLayout=g;
if(b=="type_c"||b=="type_c-dark_bg"||b=="standard-v1-text"||b=="standard-v1-community"){return new SocialPlugIn_Handler_TypeC(d)
}if(b=="type_b"||b=="standard-v1-basic"||b=="standard"||b=="standard-v2"){return new SocialPlugIn_Handler_TypeB(d)
}if(b=="type_a"||b=="unity-v2"||b=="unity"||b=="unity-v1"){return new SocialPlugIn_Handler_TypeA(d)
}if(b=="type_news"){return new SocialPlugIn_Handler_TypeNews(d)
}}typeof window!="undefined"&&window.splugin===undefined&&(window.splugin={}),window.splugin.handler===undefined&&(window.splugin.handler={}),splugin.handler.common=new SocialPlugIn_Handler_Common;
var d=e;
return{getNewInstance:function(g,c,i,h){return f(g,c,i,h)
}}
}function SocialPlugIn_Handler_Common(){function o(B,A,z,y,x,w,v,u){var t,g,f=y.target||y.srcElement;
s.hasClass(f,"_spi_band")?(t=g="band",s.preventEvent(y),x(),B.postBand(A)):s.hasClass(f,"_spi_twitter")?(t=g="twitter",s.preventEvent(y),x(),B.postTwitter(A)):s.hasClass(f,"_spi_facebook")?(t=g="facebook",s.preventEvent(y),x(),B.postFacebook(A)):s.hasClass(f,"_spi_blog")?(t=g="blog",s.preventEvent(y),x(),B.postBlog(A,u)):s.hasClass(f,"_spi_me")?(t=g="me",s.preventEvent(y),x(),B.postSubscribe(A)):s.hasClass(f,"_ly_pop_lnk")?t="melink":s.hasClass(f,"_spi_copyurl")||s.hasClass(f,"_spi_input_copyurl")?(t=g="copyurl",s.preventEvent(y),m(A,f,x,w,v)):s.hasClass(f,"_ly_copyurl_ok_cls")?(s.preventEvent(y),x()):s.hasClass(f,"_spi_mail")?(t=g="mail",s.preventEvent(y),x(),B.postMail(A,u)):s.hasClass(f,"_spi_cafe")?(t=g="cafe",s.preventEvent(y),x(),B.postCafe(A,u)):s.hasClass(f,"_spi_memo")?(t=g="memo",s.preventEvent(y),x(),B.postMemo(A)):s.hasClass(f,"_spi_pholar")?(t=g="pholar",s.preventEvent(y),x(),B.postPholar(A,u)):s.hasClass(f,"_spi_disco")?(t=g="disco",s.preventEvent(y),x(),B.postDisco(A)):s.hasClass(f,"_spi_weibo")?(t=g="weibo",s.preventEvent(y),x(),B.postWeibo(A)):s.hasClass(f,"_spi_reddit")?(t=g="reddit",s.preventEvent(y),x(),B.postReddit(A)):s.preventEvent(y),n(z,A,t,g,u)
}function n(b,t,i,h,d){r.isNotEmpty(i)&&sendClickLog(i,t,p._share.device.pc,d),r.isNotEmpty(h)&&b.onClick&&typeof b.onClick=="function"&&b.onClick(h)
}function m(z,y,x,w,v){var u=navigator.userAgent.toLowerCase().indexOf("gecko")!=-1,t=navigator.userAgent.toLowerCase().indexOf("msie")!=-1,i=z.copyurl||{},h=r.isNotEmpty(i.url)?i.url:z.url,c=document.querySelectorAll("._spi_input_copyurl")[0].innerText,b=c?c:h;
if(u){if(l(y,x,w,v)){return
}x(),prompt(q.message.copyurl.etc,b);
return
}window.clipboardData.setData("Text",b),j(x,w,v)
}function l(B,A,z,y){if(!document.queryCommandSupported||!document.queryCommandSupported("copy")){return !1
}var x=document.body.onselectstart?document.body.onselectstart():!0;
x||(document.body.onselectstart="");
var w=!1,v=document.createRange(),u=window.getSelection(),t=r.getSingle("_spi_input_copyurl",r.findParentNode(B,"_spi_cnt_copyurl"));
v.selectNodeContents(t),u.removeAllRanges(),u.addRange(v);
var i=document.createAttribute("href");
i.value=t.textContent,t.attributes.setNamedItem(i),document.querySelectorAll("._spi_input_copyurl")[0].style.display="inline";
try{w=document.execCommand("copy"),w&&j(A,z,y)
}catch(b){}return window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges(),i.value="#",t.attributes.setNamedItem(i),document.querySelectorAll("._spi_input_copyurl")[0].style.display="inline-block",x||(document.body.onselectstart=new Function("return "+x)),w
}function j(h,w,v){var u=w.elements.elCopyUrlLayer,t=w.elements.elSpluginLayer;
h(),t&&s.show(t),s.show(u);
var i=v.getAdjustOffset(u);
s.offset(u,i.top,i.left)
}"use strict";
var s=splugin.common,r=splugin.util,q=splugin.locale,p=splugin.variables;
return{onClick:function(t,e,z,y,x,w,v,u){o(t,e,z,y,x,w,v,u)
},clickPostProcess:function(g,f,t,i,h){n(g,f,t,i,h)
}}
}function SocialPlugIn_Handler_TypeA(ad){function M(b){U=b
}function K(){D(),ab.detachEvent(W.elContainer,"click",J),T&&(T=null),X=W=U={}
}function J(b){switch(b.type){case"click":I(b);
break;
case"mouseover":H(b);
break;
case"mouseout":G(b);
break;
default:ab.preventEvent(b)
}}function I(c){var j,e=c.target||c.srcElement,d=e.getAttribute("data-button"),b=(new Date).getTime();
if(ab.hasClass(e,ac._SPLUGIN_CLASS)||ab.hasClass(e,ac._SPLUGIN_CLASS+"-c")){var l=Z.findParentNode(e,ac._SPLUGIN_CLASS,10),g=Z.getParameters(X,l),j="release";
M(g),setTimeout(ab.fn(function(){F(l)
},this).bind(),100),ab.preventEvent(c)
}else{ab.hasClass(e,"_spi_bookmark")?(j="bookmark",ab.preventEvent(c),T.postBookmark(U,function(f){f.result=="success"&&(f.type=="add"?O():f.type=="exist"&&L(f.urlId))
},b)):ab.hasClass(e,"_ly_bmk_lnk")?(j="bmklink",D()):ab.hasClass(e,"_ly_bmk_ok_cls")?(ab.preventEvent(c),O()):ab.hasClass(e,"_ly_bmk_cnf_y")?(ab.preventEvent(c),T.deleteBookmark(U,S,function(f){L()
})):ab.hasClass(e,"_ly_bmk_cnf_n")||ab.hasClass(e,"_ly_bmk_cnf_cls")?(ab.preventEvent(c),L()):aa.onClick(T,U,X,c,C,Q,P,b)
}aa.clickPostProcess(X,U,j,d,b)
}function H(d){var c=d.target||d.srcElement;
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){clearTimeout(R),ab.visible(W.elSubsInfoLayer)||(ab.show(W.elSubsInfoLayer),ab.offset(W.elSubsInfoLayer,Q.offset.top-65,Q.offset.left))
}}function G(d){var c=d.target||d.srcElement;
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){R=setTimeout(ab.fn(function(){ab.visible(W.elSubsInfoLayer)&&ab.hide(W.elSubsInfoLayer),R=null
},this).bind(),1000)
}}function F(d){var c=W.elSpluginLayer;
c&&ab.visible(c)?D():E(d)
}function E(j){var i={},h=N.layer,g=W.elContainer,e=document.getElementsByTagName("body")[0],c=g.getAttribute(ac._SPLUGIN_ID),b=ac._SPLUGIN_LAYER+"-"+c,p=document.getElementById(b);
try{ab.detachEvent(W.elSpluginLayer,"click",J),ab.detachEvent(W.elSpluginLayer,"keydown",J),ab.detachEvent(W.elSpluginLayer,"mouseover",J),ab.detachEvent(W.elSpluginLayer,"mouseout",J)
}catch(o){}if(!p){p=document.createElement("div"),p.id=b,p.className="_ly_spi spi_default spi_onebtn",p.style.display="none",p.style.userSelect="text",W.elSpluginLayer=p;
var n=U.style;
n=="unity"||n=="unity-v1"?g.parentNode.appendChild(p):e.appendChild(p)
}p.innerHTML=h,p.setAttribute(ac._SPLUGIN_ID,c),W.elSpluginLayer=p,W.elBookmarkOkLayer=Z.getSingle("_ly_bmk_ok",p),W.elBookmarkCnfLayer=Z.getSingle("_ly_bmk_cnf",p),W.elSubsInfoLayer=Z.getSingle("_ly_pop",p),ab.show(W.elSpluginLayer),T=new SocialPlugIn_Service_Release(X),P=new SocialPlugIn_LayerPosition(p,U,W.elContainer),Q=new SocialPlugIn_Release_Layer(V,p,U,P),ab.attachEvent(W.elSpluginLayer,"click",J),ab.attachEvent(W.elSpluginLayer,"keydown",J),ab.attachEvent(W.elSpluginLayer,"mouseover",J),ab.attachEvent(W.elSpluginLayer,"mouseout",J),X.onShow&&typeof X.onShow=="function"&&X.onShow(j)
}function D(){var d=W.elSpluginLayer;
if(!d){return
}try{C(),ab.detachEvent(d,"click",J),ab.detachEvent(d,"keydown",J),ab.detachEvent(d,"mouseover",J),ab.detachEvent(d,"mouseout",J),Q&&(Q.destroy(),Q=null),d.parentNode.removeChild(d),W={elContainer:W.elContainer},T&&(T=null),X.onHide&&typeof X.onHide=="function"&&X.onHide()
}catch(c){console.log(c)
}}function C(){ab.hide(W.elSpluginLayer),ab.hide(W.elBookmarkOkLayer),ab.hide(W.elBookmarkCnfLayer),ab.hide(W.elSubsInfoLayer),Q.hide()
}function O(){var d=W.elBookmarkOkLayer;
if(ab.visible(d)){C()
}else{C(),ab.show(W.elSpluginLayer),ab.show(d);
var c=P.getAdjustOffset(d)||{};
ab.offset(d,c.top,c.left)
}}function L(e){var c=W.elBookmarkCnfLayer;
if(ab.visible(c)){C()
}else{S=e,C(),ab.show(W.elSpluginLayer),ab.show(c);
var f=P.getAdjustOffset(c)||{};
ab.offset(c,f.top,f.left)
}}"use strict";
var ac=splugin.variables,ab=splugin.common,aa=splugin.handler.common,Z=splugin.util,Y=splugin.locale,X=ad.htOption,W=ad.htElement,V=ad.htLayout?ad.htLayout.button:[],U={},T=null,S="",R=null,Q=null,P=null,N={layer:'<ul class="spi_lst">\t<li class="_spi_release_cont spi_btn_release"></li></ul><div class="_ly_bmk_ok spi_ly_pop spi_pop_bookmark" style="top: 0px; left: 95px; width: 255px;display:none;">\t<p class="spi_dsc">'+Y.message.bookmark.success.text+'<br> <a href="http://me.naver.com/tab/bookmark.nhn" target="_blank" class="_ly_bmk_lnk spi_impact">'+Y.message.bookmark.success.link+'</a></p>\t<button type="button" class="_ly_bmk_ok_cls spi_close"><span class="_ly_bmk_ok_cls"></span><em class="_ly_bmk_ok_cls">X</em></button></div><div class="_ly_bmk_cnf spi_ly_pop spi_ly_pop_v2 spi_pop_unbookmark" style="top: 0px; left: 95px; width: 255px;display:none;">\t<p class="spi_dsc">'+Y.message.bookmark.confirm.text1+"<br>"+Y.message.bookmark.confirm.text2+'</p>\t<div class="spi_btn">       <a href="#" class="_ly_bmk_cnf_y spi_y '+(Y.lang=="ko"?"":"spi_y_"+Y.lang)+'" target="_blank"><span class="_ly_bmk_cnf_y"></span>'+Y.message.bookmark.confirm.btn_yes+'</a>       <a href="#" class="_ly_bmk_cnf_n spi_n '+(Y.lang=="ko"?"":"spi_n_"+Y.lang)+'" target="_blank"><span class="_ly_bmk_cnf_n"></span>'+Y.message.bookmark.confirm.btn_no+'</a>\t</div>\t<button type="button" class="_ly_bmk_cnf_cls spi_close"><span class="_ly_bmk_cnf_cls"></span><em class="_ly_bmk_cnf_cls">X</em></button></div>'};
return{handleEvent:function(b){J(b)
},kill:function(){K()
},hide:function(){D()
}}
}function SocialPlugIn_Handler_TypeB(ad){function M(){U=Z.getParameters(X,W.elContainer),T=new SocialPlugIn_Service_Release(X),ab.attachEvent(W.elContainer,"mouseover",J),ab.attachEvent(W.elContainer,"mouseout",J),Q=U.option,Q&&typeof Q=="string"&&(Q=ab.strToJson(Q));
if(Q.align=="left"){var b=Z.getSingle("spi_ico_arr",W.elSubsInfoLayer);
ab.removeClass(b,"spi_ico_right")
}}function K(){Q=U={},T&&(T=null),R&&(R.destroy(),R=null),ab.detachEvent(W.elContainer,"click",J),ab.detachEvent(W.elContainer,"mouseover",J),ab.detachEvent(W.elContainer,"mouseout",J)
}function J(b){switch(b.type){case"click":I(b);
break;
case"mouseover":H(b);
break;
case"mouseout":G(b);
break;
default:ab.preventEvent(b)
}}function I(d){var c,j,i=d.target||d.srcElement,g=(new Date).getTime();
ab.hasClass(i,"_spi_bookmark")?(c="bookmark",ab.preventEvent(d),T.postBookmark(U,function(b){b.result=="success"&&(b.type=="add"?D():b.type=="exist"&&C(b.urlId))
},g)):ab.hasClass(i,"_ly_bmk_lnk")?(c="bmklink",F()):ab.hasClass(i,"_ly_bmk_ok_cls")?(ab.preventEvent(d),D()):ab.hasClass(i,"_ly_bmk_cnf_y")?(ab.preventEvent(d),T.deleteBookmark(U,P,function(b){C()
})):ab.hasClass(i,"_ly_bmk_cnf_n")||ab.hasClass(i,"_ly_bmk_cnf_cls")?(ab.preventEvent(d),C()):ab.hasClass(i,"_spi_release")?(c="release",ab.preventEvent(d),E()):aa.onClick(T,U,X,d,F,R,O(),g),aa.clickPostProcess(X,U,c,j,g)
}function H(e){var c=e.target||e.srcElement,j=Z.getSingle("_spi_me",W.elSpluginLayer),i=ab.offset(j),h={height:c.clientHeight,width:c.clientWidth};
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){clearTimeout(N),ab.visible(W.elSubsInfoLayer)||(ab.show(W.elSubsInfoLayer),Q.align=="left"?ab.offset(W.elSubsInfoLayer,i.top-W.elSubsInfoLayer.clientHeight-6,i.left):ab.offset(W.elSubsInfoLayer,i.top-W.elSubsInfoLayer.clientHeight-6,i.left+h.width-W.elSubsInfoLayer.clientWidth))
}}function G(d){var c=d.target||d.srcElement;
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){N=setTimeout(ab.fn(function(){ab.visible(W.elSubsInfoLayer)&&ab.hide(W.elSubsInfoLayer),N=null
},this).bind(),1000)
}}function F(){ab.removeClass(W.elReleaseButton,"spi_btn_release_open"),R&&R.hide(),ab.hide(W.elBookmarkOkLayer),ab.hide(W.elBookmarkCnfLayer),ab.hide(W.elBookmarkErrLayer),ab.hide(W.elBookmarkRosLayer),ab.hide(W.elSubsInfoLayer)
}function E(){if(R&&R.visible()){ab.removeClass(W.elReleaseButton,"spi_btn_release_open"),R.destroy(),R=null
}else{L(),ab.addClass(W.elReleaseButton,"spi_btn_release_open");
var d=Z.getSingle("_spi_release_btn",W.elContainer),c=Z.getSingle("_spi_lst",W.elContainer).getElementsByTagName("li")[0];
R=new SocialPlugIn_Release_Layer(V,W.elSpluginLayer,U,O())
}}function D(){if(ab.visible(W.elBookmarkOkLayer)){ab.hide(W.elBookmarkOkLayer)
}else{var e=W.elBookmarkOkLayer,c=Z.getSingle("_spi_bookmark",W.elSpluginLayer);
F(),ab.show(e);
var f=O().getAdjustOffset(e)||{};
ab.offset(e,f.top,f.left)
}}function C(e){if(ab.visible(W.elBookmarkCnfLayer)){ab.hide(W.elBookmarkCnfLayer)
}else{var c=W.elBookmarkCnfLayer,h=Z.getSingle("_spi_bookmark",W.elSpluginLayer);
P=e,F(),ab.show(c);
var g=O().getAdjustOffset(c)||{};
ab.offset(c,g.top,g.left)
}}function O(){return S||(S=new SocialPlugIn_LayerPosition(W.elSpluginLayer,U,W.elContainer)),S
}function L(){F(),R&&(R.destroy(),R=null)
}"use strict";
var ac=splugin.variables,ab=splugin.common,aa=splugin.handler.common,Z=splugin.util,Y=splugin.locale,X=ad.htOption,W=ad.htElement,V=ad.htLayout?ad.htLayout.inner:[],U={},T=null,S=null,R=null,Q={},P="",N=null;
return M(),{handleEvent:function(b){J(b)
},kill:function(){K()
},hide:function(){L()
}}
}function SocialPlugIn_Handler_TypeC(ad){function M(){U=Z.getParameters(X,W.elContainer),Q=new SocialPlugIn_Service_Release(X),ab.attachEvent(W.elContainer,"mouseover",J),ab.attachEvent(W.elContainer,"mouseout",J),R=U.option,R&&typeof R=="string"&&(R=ab.strToJson(R));
if(R.align=="left"){var b=Z.getSingle("spi_ico_arr",W.elSubsInfoLayer);
ab.removeClass(b,"spi_ico_right")
}}function K(){R=U={},T&&(T=null),Q&&(Q=null),S&&(S.destroy(),S=null),ab.detachEvent(W.elContainer,"click",J),ab.detachEvent(W.elContainer,"mouseover",J),ab.detachEvent(W.elContainer,"mouseout",J)
}function J(b){switch(b.type){case"click":I(b);
break;
case"mouseover":H(b);
break;
case"mouseout":G(b);
break;
default:ab.preventEvent(b)
}}function I(d){var c,j,i=d.target||d.srcElement,g=(new Date).getTime();
ab.hasClass(i,"_spi_bookmark")?(c="bookmark",ab.preventEvent(d),F(),Q.postBookmark(U,function(b){b.result=="success"&&(b.type=="add"?D():b.type=="exist"&&C(b.urlId))
},g)):ab.hasClass(i,"_ly_bmk_lnk")?(c="bmklink",F()):ab.hasClass(i,"_ly_bmk_ok_cls")?(ab.preventEvent(d),D()):ab.hasClass(i,"_ly_bmk_cnf_y")?(ab.preventEvent(d),Q.deleteBookmark(U,P,function(b){C()
})):ab.hasClass(i,"_ly_bmk_cnf_n")||ab.hasClass(i,"_ly_bmk_cnf_cls")?(ab.preventEvent(d),C()):ab.hasClass(i,"_spi_release")?(c="release",ab.preventEvent(d),E()):aa.onClick(Q,U,X,d,F,S,O(),g),aa.clickPostProcess(X,U,c,j,g)
}function H(e){var c=e.target||e.srcElement,j=Z.getSingle("_spi_me",W.elSpluginLayer),i=ab.offset(j),h={height:c.clientHeight,width:c.clientWidth};
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){clearTimeout(N),ab.visible(W.elSubsInfoLayer)||(ab.show(W.elSubsInfoLayer),R.align=="left"?ab.offset(W.elSubsInfoLayer,i.top-W.elSubsInfoLayer.clientHeight-6,i.left+3):ab.offset(W.elSubsInfoLayer,i.top-W.elSubsInfoLayer.clientHeight-6,i.left+h.width-W.elSubsInfoLayer.clientWidth+20))
}}function G(d){var c=d.target||d.srcElement;
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){N=setTimeout(ab.fn(function(){ab.visible(W.elSubsInfoLayer)&&ab.hide(W.elSubsInfoLayer),N=null
},this).bind(),1000)
}}function F(){ab.hide(W.elBookmarkOkLayer),ab.hide(W.elBookmarkCnfLayer),ab.hide(W.elBookmarkErrLayer),ab.hide(W.elBookmarkRosLayer),ab.hide(W.elSubsInfoLayer),S&&S.hide()
}function E(){S&&S.visible()?S.destroy():(L(),S=new SocialPlugIn_Release_Layer(V,W.elSpluginLayer,U,O()))
}function D(){if(ab.visible(W.elBookmarkOkLayer)){ab.hide(W.elBookmarkOkLayer)
}else{var e=W.elBookmarkOkLayer,c=Z.getSingle("_spi_bookmark",W.elSpluginLayer),h=ab.offset(c);
F(),ab.show(e);
var g=O().getAdjustOffset(e)||{};
ab.offset(e,g.top,g.left)
}}function C(e){if(ab.visible(W.elBookmarkCnfLayer)){ab.hide(W.elBookmarkCnfLayer)
}else{var c=W.elBookmarkCnfLayer,j=Z.getSingle("_spi_bookmark",W.elSpluginLayer),i=ab.offset(j);
P=e,F(),ab.show(c);
var h=O().getAdjustOffset(c)||{};
ab.offset(c,h.top,h.left)
}}function O(){return T||(T=new SocialPlugIn_LayerPosition(W.elSpluginLayer,U,W.elContainer)),T
}function L(){F(),S&&(S.destroy(),S=null)
}"use strict";
var ac=splugin.variables,ab=splugin.common,aa=splugin.handler.common,Z=splugin.util,Y=splugin.locale,X=ad.htOption,W=ad.htElement,V=ad.htLayout?ad.htLayout.inner:[],U={},T=null,S=null,R={},Q=null,P="",N=null;
return M(),{handleEvent:function(b){J(b)
},kill:function(){K()
},hide:function(){L()
}}
}function SocialPlugIn_Handler_TypeNews(ad){function M(){U=Z.getParameters(X,W.elContainer),T=new SocialPlugIn_Service_Release(X),ab.attachEvent(W.elContainer,"mouseover",J),ab.attachEvent(W.elContainer,"mouseout",J),Q=U.option,Q&&typeof Q=="string"&&(Q=ab.strToJson(Q));
if(Q.align=="left"){var b=Z.getSingle("spi_ico_arr",W.elSubsInfoLayer);
ab.removeClass(b,"spi_ico_right")
}}function K(){Q=U={},T&&(T=null),R&&(R.destroy(),R=null),ab.detachEvent(W.elContainer,"click",J),ab.detachEvent(W.elContainer,"mouseover",J),ab.detachEvent(W.elContainer,"mouseout",J)
}function J(b){switch(b.type){case"click":I(b);
break;
case"mouseover":H(b);
break;
case"mouseout":G(b);
break;
default:ab.preventEvent(b)
}}function I(d){var c,j,i=d.target||d.srcElement,g=(new Date).getTime();
ab.hasClass(i,"_spi_bookmark")?(c="bookmark",ab.preventEvent(d),T.postBookmark(U,function(b){b.result=="success"&&(b.type=="add"?D():b.type=="exist"&&C(b.urlId))
},g)):ab.hasClass(i,"_ly_bmk_lnk")?(c="bmklink",F()):ab.hasClass(i,"_ly_bmk_ok_cls")?(ab.preventEvent(d),D()):ab.hasClass(i,"_ly_bmk_cnf_y")?(ab.preventEvent(d),T.deleteBookmark(U,P,function(b){C()
})):ab.hasClass(i,"_ly_bmk_cnf_n")||ab.hasClass(i,"_ly_bmk_cnf_cls")?(ab.preventEvent(d),C()):ab.hasClass(i,"_spi_release")?(c="release",ab.preventEvent(d),E()):aa.onClick(T,U,X,d,F,R,O(),g),aa.clickPostProcess(X,U,c,j,g)
}function H(e){var c=e.target||e.srcElement,j=Z.getSingle("_spi_me",W.elSpluginLayer),i=ab.offset(j),h={height:c.clientHeight,width:c.clientWidth};
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){clearTimeout(N),ab.visible(W.elSubsInfoLayer)||(ab.show(W.elSubsInfoLayer),Q.align=="left"?ab.offset(W.elSubsInfoLayer,i.top-W.elSubsInfoLayer.clientHeight-6,i.left):ab.offset(W.elSubsInfoLayer,i.top-W.elSubsInfoLayer.clientHeight-6,i.left+h.width-W.elSubsInfoLayer.clientWidth))
}}function G(d){var c=d.target||d.srcElement;
if(ab.hasClass(c,"_spi_me")||ab.hasClass(c,"_ly_pop")){N=setTimeout(ab.fn(function(){ab.visible(W.elSubsInfoLayer)&&ab.hide(W.elSubsInfoLayer),N=null
},this).bind(),1000)
}}function F(){ab.removeClass(W.elReleaseButton,"spi_btn_release_open"),R&&R.hide(),ab.hide(W.elBookmarkOkLayer),ab.hide(W.elBookmarkCnfLayer),ab.hide(W.elBookmarkErrLayer),ab.hide(W.elBookmarkRosLayer),ab.hide(W.elSubsInfoLayer)
}function E(){if(R&&R.visible()){ab.removeClass(W.elReleaseButton,"spi_btn_release_open"),R.destroy(),R=null
}else{L(),ab.addClass(W.elReleaseButton,"spi_btn_release_open");
var d=Z.getSingle("_spi_release_btn",W.elContainer),c=Z.getSingle("_spi_lst",W.elContainer).getElementsByTagName("li")[0];
R=new SocialPlugIn_Release_Layer(V,W.elSpluginLayer,U,O())
}}function D(){if(ab.visible(W.elBookmarkOkLayer)){ab.hide(W.elBookmarkOkLayer)
}else{var e=W.elBookmarkOkLayer,c=Z.getSingle("_spi_bookmark",W.elSpluginLayer);
F(),ab.show(e);
var f=O().getAdjustOffset(e)||{};
ab.offset(e,f.top,f.left)
}}function C(e){if(ab.visible(W.elBookmarkCnfLayer)){ab.hide(W.elBookmarkCnfLayer)
}else{var c=W.elBookmarkCnfLayer,h=Z.getSingle("_spi_bookmark",W.elSpluginLayer);
P=e,F(),ab.show(c);
var g=O().getAdjustOffset(c)||{};
ab.offset(c,g.top,g.left)
}}function O(){return S||(S=new SocialPlugIn_LayerPosition(W.elSpluginLayer,U,W.elContainer)),S
}function L(){F(),R&&(R.destroy(),R=null)
}"use strict";
var ac=splugin.variables,ab=splugin.common,aa=splugin.handler.common,Z=splugin.util,Y=splugin.locale,X=ad.htOption,W=ad.htElement,V=ad.htLayout?ad.htLayout.inner:[],U={},T=null,S=null,R=null,Q={},P="",N=null;
return M(),{handleEvent:function(b){J(b)
},kill:function(){K()
},hide:function(){L()
}}
}function SocialPlugIn_View(e){function f(b){if(b=="type_c"||b=="type_c-dark_bg"||b=="standard-v1-text"||b=="standard-v1-community"){return new SocialPlugIn_View_TypeC(d)
}if(b=="type_b"||b=="standard-v1-basic"||b=="standard"||b=="standard-v2"){return new SocialPlugIn_View_TypeB(d)
}if(b=="type_a"||b=="unity-v2"||b=="unity"||b=="unity-v1"){return new SocialPlugIn_View_TypeA(d)
}if(b=="type_news"){return new SocialPlugIn_View_TypeNews(d)
}}typeof window!="undefined"&&window.splugin===undefined&&(window.splugin={});
var d=e;
return{getNewInstance:function(b){return f(b)
}}
}function SocialPlugIn_Release_Layer(X,W,V,U){function H(){R.appendHTML(P.elSpluginLayer,I.copyurlSuccessLayer),P.elCopyUrlLayer=S.getSingle("_spi_ly_copyurl_ok",I.elSpluginLayer);
var f=S.getSingle("_spi_release_cont",P.elSpluginLayer),c=I.releaseLayer.replace(/__spi_buttons__/gi,E(N,O)).replace(/__feed_info__/gi,V.me.feedInfo)+I.releasePadLayer;
R.appendHTML(f,c);
var h=P.elReleaseLayer=S.getSingle("_spi_release_ly",f),g=P.elReleasePadLayer=S.getSingle("_spi_release_pad_ly",f);
S.isNotEmpty(O.extraHTML)&&R.appendHTML(h,O.extraHTML),G(V.url,V)&&F(V.url,R.fn(function(b){b!=""&&(S.getSingle("spi_input_copyurl",P.elSpluginLayer).href=b,S.getSingle("spi_input_copyurl",P.elSpluginLayer).innerText=b)
},this).bind(),O.preventShortUrl),R.show(h),R.show(g),C(),R.attachEvent(window,"resize",C)
}function G(d,c){return !c.preventShortUrl&&c.useShortUrl&&d.indexOf("naver.me")<0?!0:!1
}function F(f,e,h){var g="";
if(h||f.indexOf("naver.me")>=0){e(g);
return
}R.requestJsonp(L.API101,{svcCode:"0022",url:f},splugin.common.fn(function(b){var d=b;
switch(d.code){case"200":g=d.result.url;
break;
case"500":alert(Q.message.error.maintanance);
break;
default:alert(Q.message.error.shorturl+"("+d.code+")")
}e(g)
},this).bind())
}function E(h,g){var m=I.innerButton,l=[];
for(var j=0;
j<h.length;
j++){var i=h[j];
D(g,h[j])&&(i=="copyurl"?l.push(I.copyurlButton.replace(/__url__/gi,g.url)):l.push(m(i)))
}return l.join("")
}function D(d,c){return c=="me"?S.isEmpty(d[c])?!1:d[c].displayInner=="on"?!0:!1:S.isEmpty(d[c])?!0:d[c].display=="off"?!1:!0
}function C(){var d=P.elReleaseLayer,c=P.elReleasePadLayer;
J=M.getAdjustOffset(d),R.offset(d,J.top,J.left),J=R.offset(d),R.offset(c,J.top,J.left),c.width=d.clientWidth-1,c.height=d.clientHeight-1
}function B(){R.hide(P.elReleaseLayer),R.hide(P.elReleasePadLayer),R.hide(P.elCopyUrlLayer)
}function A(){return P.elReleaseLayer&&R.visible(P.elReleaseLayer)
}function z(){B(),R.detachEvent(window,"resize",C),P.elReleaseLayer&&P.elReleaseLayer.parentNode.removeChild(P.elReleaseLayer),P.elReleasePadLayer&&P.elReleasePadLayer.parentNode.removeChild(P.elReleasePadLayer),P=J={}
}"use strict";
var T=splugin.variables,S=splugin.util,R=splugin.common,Q=splugin.locale,P={elSpluginLayer:W},O=V,N=X,M=U,L=T._htAPI[T.getDeployVariable()];
S.isEmpty(L)&&(L=T._htAPI.real);
var K=null,J={},I={innerButton:function(d){var c=['<li class="_spi_',d," spi_lnk_",d,'">','<a href="#" title="',Q.button[d].title,'" class="_spi_',d,'" target="_blank">','<span class="_spi_',d,'" ></span><strong class="_spi_',d,'">',Q.button[d].text,"</strong>","</a>","</li>"];
return c.join("")
},releaseLayer:'<ul class="_spi_release_ly spi_lst_release" style="display: none; user-select: text;">\t__spi_buttons__</ul>',releasePadLayer:'<iframe title="빈 프레임" class="spi_pad_lyr _spi_release_pad_ly" name="padding" width="0" height="0" scrolling="no" frameborder="0" style="display:none;"></iframe>',copyurlButton:'<li class="_spi_cnt_copyurl spi_lnk_copyurl">\t<a href="#" class="_spi_input_copyurl spi_input_copyurl">__url__</a>\t<a href="#" class="_spi_copyurl spi_btn_copyurl">URL복사</a></li>',copyurlSuccessLayer:'   <div class="_spi_ly_copyurl_ok spi_ly_pop" style="display:none;width:255px;">\t\t<p class="spi_dsc">'+Q.message.copyurl.success+'</p>\t\t<button type="button" class="_ly_copyurl_ok_cls spi_close"><span class="_ly_copyurl_ok_cls title="'+Q.message.copyurl.close+'""></span><em class="_ly_copyurl_ok_cls">X</em></button>   </div>'};
return H(),{elements:P,offset:J,hide:function(){B()
},visible:function(){return A()
},destroy:function(){z()
}}
}function SocialPlugIn_View_TypeA(i){function j(b){var f=b.sSplugInId,e=b.elContainer;
return e.setAttribute(h._SPLUGIN_ID,f),{htElements:{elContainer:e},htLayout:l}
}"use strict";
var h=splugin.variables,o=splugin.common,n=splugin.util,m=i.htOption,l={button:["blog","cafe","bookmark","memo","pholar","me","mail","band","twitter","facebook","weibo","reddit","copyurl"]};
return{initView:function(b){return j(b)
}}
}function SocialPlugIn_View_TypeB(v){function n(f){var w=f.sSplugInId,j=f.elContainer,h=s.getParameters(q,j),g=o.layer,d=s.getSingle("_ly_spi",j);
d&&d.parentNode.removeChild(d),g=g.replace(/__spi_buttons__/gi,m(h)).replace(/__feed_info__/gi,h.me.feedInfo);
var b=document.createElement("div");
return b.className="_ly_spi spi_default spi_sns_share",b.style.display="block",b.innerHTML=g,j.appendChild(b),j.setAttribute(u._SPLUGIN_ID,w),{htParameter:h,htElements:{elContainer:j,elSpluginLayer:s.getSingle("_ly_spi",j),elBookmarkOkLayer:s.getSingle("_spi_ly_bmk_ok",j),elBookmarkCnfLayer:s.getSingle("_spi_ly_bmk_cnf",j),elBookmarkErrLayer:s.getSingle("_spi_ly_bmk_err",j),elBookmarkRosLayer:s.getSingle("_spi_ly_bmk_ros",j),elSubsInfoLayer:s.getSingle("_spi_ly_pop",j),elReleaseButton:s.getSingle("_spi_release_btn",j),elBookmarkIcon:s.getSingle("_spi_bookmark_icon",j)},htLayout:p}
}function m(h){var g=p.outer,B=o.outerButton,A=[],z=!1;
for(var y=0;
y<g.length;
y++){var x=g[y],w=g[y-1];
l(h,x)&&(x=="release"?(z&&A.push(A.pop().replace(/__separator__/gi,"")),A.push(o.releaseButton)):(z&&A.push(A.pop().replace(/__separator__/gi,'style="display: none;"')),A.push(B(x))),z=!0)
}return A.join("")
}function l(d,c){return s.isEmpty(d[c])?!0:d[c].display=="off"?!1:!0
}"use strict";
var u=splugin.variables,t=splugin.common,s=splugin.util,r=splugin.locale,q=v.htOption,p={outer:["blog","cafe","bookmark","memo","pholar","me","release"],inner:["blog","cafe","bookmark","memo","pholar","mail","band","twitter","facebook","weibo","reddit","copyurl"]},o={layer:'    <ul class="_spi_lst spi_lst">\t\t__spi_buttons__    </ul>    <div class="_spi_ly_bmk_ok spi_ly_pop" style="left: -91px; top: 33px; width: 255px;display:none;">        <p class="spi_dsc">'+r.message.bookmark.success.text+'<br> <a href="http://me.naver.com/tab/bookmark.nhn" target="_blank" class="_ly_bmk_lnk spi_impact">'+r.message.bookmark.success.link+'</a></p>        <button type="button" class="_ly_bmk_ok_cls spi_close"><span class="_ly_bmk_ok_cls"></span><em class="_ly_bmk_ok_cls">X</em></button>    </div>    <div class="_spi_ly_bmk_cnf spi_ly_pop spi_ly_pop_v2" style="left: -91px; top: 33px; width: 255px;display:none;">    \t<p class="spi_dsc">'+r.message.bookmark.confirm.text1+"<br>"+r.message.bookmark.confirm.text2+'</p>        <div class="spi_btn">            <a href="#" class="_ly_bmk_cnf_y spi_y '+(r.lang=="ko"?"":"spi_y_"+r.lang)+'" target="_blank"><span class="_ly_bmk_cnf_y"></span>'+r.message.bookmark.confirm.btn_yes+'</a>            <a href="#" class="_ly_bmk_cnf_n spi_n '+(r.lang=="ko"?"":"spi_n_"+r.lang)+'" target="_blank"><span class="_ly_bmk_cnf_n"></span>'+r.message.bookmark.confirm.btn_no+'</a>        </div>        <button type="button" class="_ly_bmk_cnf_cls spi_close"><span class="_ly_bmk_cnf_cls"></span><em class="_ly_bmk_cnf_cls">X</em></button>    </div>    <div class="_spi_ly_bmk_err spi_ly_pop" style="left: -91px; top: 33px; width: 255px;display:none;">    <p class="spi_dsc">'+r.message.bookmark.error+'</p>        <button type="button" class="_ly_bmk_err_cls spi_close"><span class="_ly_bmk_err_cls"></span><em class="_ly_bmk_err_cls">X</em></button>    </div>    <div class="_spi_ly_bmk_ros spi_ly_pop" style="left: -91px; top: 33px; width: 255px;display:none;">    <p class="spi_dsc">'+r.message.bookmark.maintanance+'</p>        <button type="button" class="_ly_bmk_ros_cls spi_close"><span class="_ly_bmk_ros_cls"></span><em class="_ly_bmk_ros_cls">X</em></button>    </div>\t <div class="_spi_ly_pop spi_ly_pop ly_pop_v1" style="display:none;top: -82px; left: 136px; width: 213px">\t\t<p class="_ly_pop spi_dsc">'+r.message.me+'</p>\t\t<div class="_ly_pop spi_ico_arr spi_ico_right"></div>    </div>',outerButton:function(d){var c=['<li class="_spi_',d," spi_btn_",d,'" data-button="',d,'">','<a href="#" title="',r.button[d].title,'" class="_spi_',d,'" target="_blank">',"<span  __separator__></span>",r.button[d].text,"<em __separator__></em>","</a>","</li>"];
return c.join("")
},releaseButton:'<li class="_spi_release_cont _spi_release _spi_release_btn spi_btn_release" data-button="release">\t<a href="#" title="'+r.button.release.title+'" class="_spi_release" target="_blank">\t\t<span class="_spi_release spi_bg_release"></span>'+r.button.release.text+'<em class="_spi_release"></em>\t</a></li>'};
return{initView:function(b){return n(b)
}}
}function SocialPlugIn_View_TypeC(v){function n(x){var w=x.sSplugInId,j=x.elContainer,h=s.getParameters(q,j),g={},f=h.style,d=o.layer,c=s.getSingle("_ly_spi",j);
c&&c.parentNode.removeChild(c),s.isNotEmpty(h.option)&&(typeof h.option=="object"?g=h.option:g=t.strToJson(h.option)),d=d.replace(/__spi_buttons__/gi,m(h)).replace(/__feed_info__/gi,h.me.feedInfo).replace(/__text_class__/gi,g.textClass||"").replace(/__bar_class__/gi,g.barClass||"");
var b=document.createElement("div");
return b.style.display="block",b.className="_ly_spi spi_default",f=="type_c-dark_bg"&&(b.className+=" spi_darkbg"),b.innerHTML=d,j.appendChild(b),j.setAttribute(u._SPLUGIN_ID,w),{htParameter:h,htElements:{elContainer:j,elSpluginLayer:s.getSingle("_ly_spi",j),elReleaseLayer:s.getSingle("_spi_release_ly",j),elBookmarkOkLayer:s.getSingle("_spi_ly_bmk_ok",j),elBookmarkCnfLayer:s.getSingle("_spi_ly_bmk_cnf",j),elBookmarkErrLayer:s.getSingle("_spi_ly_bmk_err",j),elBookmarkRosLayer:s.getSingle("_spi_ly_bmk_ros",j),elSubsInfoLayer:s.getSingle("_spi_ly_pop",j),elReleasePadLayer:s.getSingle("_spi_release_pad_ly",j),elReleaseButton:s.getSingle("_spi_release_btn",j)},htLayout:p}
}function m(h){var g=p.outer,B=o.outerButton,A=[],z=!1;
for(var y=0;
y<g.length;
y++){var x=g[y],w=g[y-1];
l(h,x)&&(x=="me"?A.push(o.meButton.replace(/__separator__/gi,z?"block":"none")):x=="release"?A.push(o.releaseButton.replace(/__separator__/gi,w&&z?"block":"none")):A.push(B(x)),z=!0)
}return A.join("")
}function l(d,c){return s.isEmpty(d[c])?!0:d[c].display=="off"?!1:!0
}"use strict";
var u=splugin.variables,t=splugin.common,s=splugin.util,r=splugin.locale,q=v.htOption,p={outer:["blog","cafe","bookmark","memo","pholar","me","release"],inner:["blog","cafe","bookmark","memo","pholar","mail","band","twitter","facebook","weibo","reddit","copyurl"]},o={layer:'\t<ul class="_spi_lst spi_lst">\t\t__spi_buttons__\t</ul>\t<div class="_spi_ly_bmk_ok spi_ly_pop" style="display:none;left: -78px; top: 20px; width: 253px;">\t\t<p class="spi_dsc">'+r.message.bookmark.success.text+'<br> <a href="http://me.naver.com/tab/bookmark.nhn" target="_blank" class="_ly_bmk_ok_cls _ly_bmk_lnk spi_impact">'+r.message.bookmark.success.link+'</a></p>\t\t<button class="_ly_bmk_ok_cls spi_close" type="button"><span class="_ly_bmk_ok_cls" title="'+r.message.bookmark.close+'"></span><em class="_ly_bmk_ok_cls">X</em></button>\t</div>\t<div class="_spi_ly_bmk_cnf spi_ly_pop spi_ly_pop_v2" style="display:none;left: -78px; top: 20px; width: 253px;">\t\t<p class="spi_dsc">'+r.message.bookmark.confirm.text1+"<br>"+r.message.bookmark.confirm.text2+'</p>\t\t<div class="spi_btn">\t\t\t<a href="#" class="_ly_bmk_cnf_y spi_y '+(r.lang=="ko"?"":"spi_y_"+r.lang)+'" target="_blank"><span class="_ly_bmk_cnf_y"></span>'+r.message.bookmark.confirm.btn_yes+'</a>\t\t\t<a href="#" class="_ly_bmk_cnf_n spi_n '+(r.lang=="ko"?"":"spi_n_"+r.lang)+'" target="_blank"><span class="_ly_bmk_cnf_n"></span>'+r.message.bookmark.confirm.btn_no+'</a>\t\t</div>\t\t<button class="_ly_bmk_cnf_cls spi_close" type="button"><span class="_ly_bmk_cnf_cls" title="'+r.message.bookmark.close+'"></span><em class="_ly_bmk_cnf_cls">X</em></button>\t</div>\t<div class="_spi_ly_bmk_err spi_ly_pop" style="display:none;left: -78px; top: 20px; width: 253px;">\t\t<p class="spi_dsc">'+r.message.bookmark.error+'</p>\t\t<button class="_ly_bmk_err_cls spi_close" type="button"><span class="_ly_bmk_err_cls" title="'+r.message.bookmark.close+'"></span><em class="_ly_bmk_err_cls">X</em></button>\t</div>\t<div class="_spi_ly_bmk_ros spi_ly_pop" style="display:none;left: -78px; top: 20px; width: 253px;">\t\t<p class="spi_dsc">'+r.message.bookmark.maintanance+'</p>\t\t<button class="_ly_bmk_ros_cls spi_close" type="button"><span class="_ly_bmk_ros_cls" title="'+r.message.bookmark.close+'"></span><em class="_ly_bmk_ros_cls">X</em></button>\t</div>\t<div class="_spi_ly_pop spi_ly_pop ly_pop_v1" style="display:none;top: -82px; left: 136px; width: 213px">\t\t<p class="_ly_pop spi_dsc">'+r.message.me+'</p>\t\t<div class="_ly_pop spi_ico_arr spi_ico_right"></div>\t</div>',outerButton:function(d){var c=['<li class="_spi_',d," spi_btn_",d,'">','<a href="#" title="',r.button[d].title,'" class="_spi_',d,'" target="_blank">',r.button[d].text,"</a>","</li>"];
return c.join("")
},meButton:'<li class="_spi_me spi_btn_me"><a href="#" class="_spi_me" title="'+r.button.me.title+'" target="_blank""><span class="_spi_me"></span>'+r.button.me.text+'<em class="_spi_me __bar_class__" style="display: __separator__"></em></a></li>',releaseButton:'<li class="_spi_release_cont _spi_release_btn spi_btn_release">\t<a href="#" class="_spi_release __text_class__" title="'+r.button.release.title+'"><span class="_spi_release spi_bg_release"></span>'+r.button.release.text+'<em class="_spi_release __bar_class__" style="display: __separator__"></em></a></li>'};
return{initView:function(b){return n(b)
}}
}function SocialPlugIn_View_TypeNews(v){function n(f){var w=f.sSplugInId,j=f.elContainer,h=s.getParameters(q,j),g=o.layer,d=s.getSingle("_ly_spi",j);
d&&d.parentNode.removeChild(d),g=g.replace(/__spi_buttons__/gi,m(h)).replace(/__feed_info__/gi,h.me.feedInfo);
var b=document.createElement("div");
return b.className="_ly_spi spi_default spi_sns_share",b.style.display="block",b.innerHTML=g,j.appendChild(b),j.setAttribute(u._SPLUGIN_ID,w),{htParameter:h,htElements:{elContainer:j,elSpluginLayer:s.getSingle("_ly_spi",j),elBookmarkOkLayer:s.getSingle("_spi_ly_bmk_ok",j),elBookmarkCnfLayer:s.getSingle("_spi_ly_bmk_cnf",j),elBookmarkErrLayer:s.getSingle("_spi_ly_bmk_err",j),elBookmarkRosLayer:s.getSingle("_spi_ly_bmk_ros",j),elSubsInfoLayer:s.getSingle("_spi_ly_pop",j),elReleaseButton:s.getSingle("_spi_release_btn",j),elBookmarkIcon:s.getSingle("_spi_bookmark_icon",j)},htLayout:p}
}function m(h){var g=p.outer,B=o.outerButton,A=[],z=!1;
for(var y=0;
y<g.length;
y++){var x=g[y],w=g[y-1];
l(h,x)&&(x=="release"?(z&&A.push(A.pop().replace(/__separator__/gi,"")),A.push(o.releaseButton)):(z&&A.push(A.pop().replace(/__separator__/gi,'style="display: none;"')),A.push(B(x))),z=!0)
}return A.join("")
}function l(d,c){return s.isEmpty(d[c])?!0:d[c].display=="off"?!1:!0
}"use strict";
var u=splugin.variables,t=splugin.common,s=splugin.util,r=splugin.locale,q=v.htOption,p={outer:["blog","bookmark","memo","band","facebook","twitter","release"],inner:["blog","cafe","bookmark","memo","pholar","mail","band","twitter","facebook","weibo","reddit","copyurl"]},o={layer:'    <ul class="_spi_lst spi_lst">\t\t__spi_buttons__    </ul>    <div class="_spi_ly_bmk_ok spi_ly_pop" style="left: -91px; top: 33px; width: 255px;display:none;">        <p class="spi_dsc">'+r.message.bookmark.success.text+'<br> <a href="http://me.naver.com/tab/bookmark.nhn" target="_blank" class="_ly_bmk_lnk spi_impact">'+r.message.bookmark.success.link+'</a></p>        <button type="button" class="_ly_bmk_ok_cls spi_close"><span class="_ly_bmk_ok_cls"></span><em class="_ly_bmk_ok_cls">X</em></button>    </div>    <div class="_spi_ly_bmk_cnf spi_ly_pop spi_ly_pop_v2" style="left: -91px; top: 33px; width: 255px;display:none;">    \t<p class="spi_dsc">'+r.message.bookmark.confirm.text1+"<br>"+r.message.bookmark.confirm.text2+'</p>        <div class="spi_btn">            <a href="#" class="_ly_bmk_cnf_y spi_y '+(r.lang=="ko"?"":"spi_y_"+r.lang)+'" target="_blank"><span class="_ly_bmk_cnf_y"></span>'+r.message.bookmark.confirm.btn_yes+'</a>            <a href="#" class="_ly_bmk_cnf_n spi_n '+(r.lang=="ko"?"":"spi_n_"+r.lang)+'" target="_blank"><span class="_ly_bmk_cnf_n"></span>'+r.message.bookmark.confirm.btn_no+'</a>        </div>        <button type="button" class="_ly_bmk_cnf_cls spi_close"><span class="_ly_bmk_cnf_cls"></span><em class="_ly_bmk_cnf_cls">X</em></button>    </div>    <div class="_spi_ly_bmk_err spi_ly_pop" style="left: -91px; top: 33px; width: 255px;display:none;">    <p class="spi_dsc">'+r.message.bookmark.error+'</p>        <button type="button" class="_ly_bmk_err_cls spi_close"><span class="_ly_bmk_err_cls"></span><em class="_ly_bmk_err_cls">X</em></button>    </div>    <div class="_spi_ly_bmk_ros spi_ly_pop" style="left: -91px; top: 33px; width: 255px;display:none;">    <p class="spi_dsc">'+r.message.bookmark.maintanance+'</p>        <button type="button" class="_ly_bmk_ros_cls spi_close"><span class="_ly_bmk_ros_cls"></span><em class="_ly_bmk_ros_cls">X</em></button>    </div>\t <div class="_spi_ly_pop spi_ly_pop ly_pop_v1" style="display:none;top: -82px; left: 136px; width: 213px">\t\t<p class="_ly_pop spi_dsc">'+r.message.me+'</p>\t\t<div class="_ly_pop spi_ico_arr spi_ico_right"></div>    </div>',outerButton:function(d){var c=['<li class="_spi_',d," spi_btn_",d,'" data-button="',d,'">','<a href="#" title="',r.button[d].title,'" class="_spi_',d,'" target="_blank">',"<span  __separator__></span>",r.button[d].text,"<em __separator__></em>","</a>","</li>"];
return c.join("")
},releaseButton:'<li class="_spi_release_cont _spi_release _spi_release_btn spi_btn_release" data-button="release">\t<a href="#" title="'+r.button.release.title+'" class="_spi_release" target="_blank">\t\t<span class="_spi_release spi_bg_release"></span>'+r.button.release.text+'<em class="_spi_release"></em>\t</a></li>'};
return{initView:function(b){return n(b)
}}
}function SocialPlugIn_Service_Release(htOption){function _makeOriginSource(a){return a==null?locale.message.source+" ":a=="empty"?"":a+" "
}function _makeOriginInfo(a,b,c){return(util.isNotEmpty(b)?b+" | ":"")+(util.isNotEmpty(a)?_makeOriginSource(c)+a:"")
}function _makeOriginInfoWithSourcePrefix(a,b,c){return locale.message.sourcePrefix+_makeOriginInfo(a,b,c)
}function _makeQueryString(a,b,c,d){var e=0,f=[];
return a&&(f[e++]=a),c&&(f[e++]=c),b&&(f[e++]=b),f.join(d?d:"\n")
}function popupWindow(a,b,c,d,e,f,g,h){util.isIE()||util.isEdge()?popupWindowByURL(a,b,c,d?d:550,e?e:650,f?f:"utf-8",h):popupWindowByAccptCharset(a,b,c,d?d:550,e?e:650,f?f:"utf-8",g?g:"post")
}function popupWindowByAccptCharset(a,b,c,d,e,f,g){var h="_"+c+"Form",i="_"+c+"Popup",j=_makeForm(a,b,h,i,f,g);
document.body.appendChild(j),openPopupToCenter("",i,d,e);
try{_sCharset=document.charset,j.acceptCharset=f,j.submit(),j.acceptCharset=_sCharset,j.parentNode.removeChild(j)
}catch(k){}}function popupWindowByURL(a,b,c,d,e,f,g){var h=[a],i=Object.keys(b)||[],j="_"+c+"Popup",k="";
a.indexOf("?")<0?h.push("?"):h.push("&"),_sCharset=document.charset,document.charset=f;
for(var l=0;
l<i.length;
l++){var m=i[l],n=b[m],o=m==g||g=="all";
m=="title"&&g!="all"?f!="utf-8"?n=encodeData(n):n=encodeURIComponent(n):m=="source_contents"?!util.isIE10()&&!util.isIE11()&&(n=encodeURIComponent(n)):m=="callbackUrl"&&g!="all"&&(n=encodeURIComponent(n)),l?h.push("&"):null,h.push(m),h.push("=");
if(typeof n=="object"){h.push("[");
for(var p=0;
p<n.length;
p++){p?h.push(","):null,h.push(o?encodeURIComponent(n[p]):n[p])
}h.push("]")
}else{f!="utf-8"&&o?h.push(encodeData(n)):h.push(o?encodeURIComponent(n):n)
}}k=h.join(""),openPopupToCenter(k,j,d,e),document.charset=_sCharset
}function encodeData(a){return korCodeCheck(a)?a.replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/#/g,"%23").replace(/\$/g,"%24").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/\//g,"%2F").replace(/:/g,"%3A").replace(/;/g,"%3B").replace(/=/g,"%3D").replace(/\?/g,"%3F").replace(/\@/g,"%40"):encodeURIComponent(a)
}function korCodeCheck(a){try{var b=/[ㄱ-힣]/g;
return a.match(b)
}catch(c){}return !1
}function popupWindowOverIE10(a,b,c,d,e,f,g){var h="_"+c+"Form",i="_"+c+"Popup",j=openPopupToCenter("",i,d,e),k=_makeForm(a,b,h,i,f,g),l=j.document;
try{_sCharset=l.charset,l.charset=f,l.body.innerHTML=k.outerHTML,k=l.getElementById(h),k.submit(),l.charset=_sCharset,l.body.removeChild(k)
}catch(m){}}function _makeForm(a,b,c,d,e,f){var g=document.getElementById(c),h=Object.keys(b)||[];
f=f||"post",g==null&&(g=document.createElement("form"),g.id=c,g.target=d,g.action=a,g.method=f);
try{var i=[],j=new ArrayAppender;
for(var k=0;
k<h.length;
k++){var l=h[k],m=b[l],n;
typeof m=="object"?j.append(createInputElementArr("hidden",l,m)):j.append(createInputElement("hidden",l,m))
}j.append(createInputElement("hidden","enc",e)),f.toLowerCase()=="get"&&appendGetParam(g,a),appendChilds(g,j.toArray())
}catch(o){throw o
}return g
}function postSubscribe(htParameter){var evkey=_htFinishLog.me.key+"."+_htOption.evKey,evvalue=_htFinishLog.me.baseUrl,htMeParams=htParameter.me||{},fPopup=popupWindowByAccptCharset;
if(util.isNotEmpty(htMeParams.oninitialize)){try{var htParam=eval(htMeParams.oninitialize);
if(util.isEmpty(htParam)){return
}htMeParams=htParam
}catch(e){throw e
}}util.isIE11()&&!util.isWindows10()&&(fPopup=popupWindowOverIE10),fPopup(_htAPI.API201+htMeParams.targetUrl,{popupType:htMeParams.popupType,serviceId:htMeParams.serviceId,feedGroupId:htMeParams.feedGroupId,feedGroupUrl:htMeParams.feedGroupUrl,feedGroupName:htMeParams.feedGroupName,ek:evkey,ev:evvalue,feedId:htMeParams.feedId,feedUrl:htMeParams.feedUrl,feedName:htMeParams.feedName,selected:htMeParams.selected,feedType:htMeParams.feedType},"postSubscribe",380,400,"utf-8")
}function postBand(a){var b=a.band||{},c=isNotEmpty(b.url)?b.url:a.url,d=isNotEmpty(b.title)?b.title:a.title;
c=addQueryStringParameter(c,"spi_ref","m_"+_htOption.evKey+"_band"),makeShortUrl(c,splugin.common.fn(function(b){if(b!=""){var c=replaceTitle(_makeQueryString(d,b,_makeOriginInfoWithSourcePrefix(a.serviceName,a.sourceName,a.source))),e=_htAPI.API511+"?body="+encodeURIComponent(c);
openPopupToCenter(e,"bandPopup",520,700)
}},this).bind(),a.preventShortUrl)
}function postBlog(a,b){var c=_htFinishLog.blog.key+"."+_htOption.evKey,d=_htFinishLog.blog.baseUrl,e=a.blog||{},f=getUrl(a,e),g=isNotEmpty(e.title)?e.title:a.title,h=isNotEmpty(e.sourceTitle)?_makeOriginSource(a.source)+e.sourceTitle:_makeOriginInfo(a.serviceName,a.sourceName,a.source),i=f,j,k;
if(checkShortUrl(f,a)){makeShortUrl(f,splugin.common.fn(function(c){c!=""&&(e.url=c,a.shortUrl=c,postBlog(a,b))
},this).bind(),a.preventShortUrl);
return
}isNotEmpty(e.proxyUrl)?(j=e.proxyUrl+(e.proxyUrl.indexOf("?")?"&":"?"),k="get"):(j=_htAPI.API503,k="post"),g=replaceTitle(g),popupWindow(j,{blogId:isNotEmpty(e.blogId)?e.blogId:"naver",source_type:isNotEmpty(e.sourceType)?e.sourceType:"",title:g,source_title:h,source_url:i,source_contents:isNotEmpty(e.sourceContents)?e.sourceContents:"",source_form:isNotEmpty(e.sourceForm)?e.sourceForm:"",callbackType:"image",callbackUrl:getCallbackLog(variables._share.button.blog,a,variables._share.device.pc,b)},"postBlog",533,635,"euc-kr",k,"source_url")
}function postCafe(a,b){var c=_htFinishLog.cafe.key+"."+_htOption.evKey,d=_htFinishLog.cafe.baseUrl,e=a.cafe||{},f=getUrl(a,e),g=isNotEmpty(e.title)?e.title:a.title,h=isNotEmpty(e.sourceTitle)?_makeOriginSource(a.source)+e.sourceTitle:_makeOriginInfo(a.serviceName,a.sourceName,a.source),i=f,j,k;
if(checkShortUrl(f,a)){makeShortUrl(f,splugin.common.fn(function(c){c!=""&&(e.url=c,a.shortUrl=c,postCafe(a,b))
},this).bind(),a.preventShortUrl);
return
}isNotEmpty(e.proxyUrl)?(j=e.proxyUrl+(e.proxyUrl.indexOf("?")?"&":"?"),k="get"):(j=_htAPI.API502,k="post"),g=replaceTitle(g),popupWindow(j,{source_type:isNotEmpty(e.sourceType)?e.sourceType:"",title:g,source_title:h,source_url:i,source_contents:isNotEmpty(e.sourceContents)?e.sourceContents:"",source_form:isNotEmpty(e.sourceForm)?e.sourceForm:"",callbackUrl:getCallbackLog(variables._share.button.cafe,a,variables._share.device.pc,b)},"postCafe",553,660,"euc-kr",k,"source_url")
}function postPholar(a,b){var c=_htFinishLog.pholar.key+"."+_htOption.evKey,d=_htFinishLog.pholar.baseUrl,e=a.pholar||{},f=getUrl(a,e),g=isNotEmpty(e.title)?e.title:a.title,h=isNotEmpty(e.returnUrl)?e.returnUrl:a.returnUrl;
if(checkShortUrl(f,a)){makeShortUrl(f,splugin.common.fn(function(c){c!=""&&(e.url=c,a.shortUrl=c,h==f&&(e.returnUrl=c),postPholar(a,b))
},this).bind(),a.preventShortUrl);
return
}g=replaceTitle(g),popupWindow(_htAPI.API513,{service:isNotEmpty(a.serviceName)?a.serviceName:"",url:f,title:g,contents:isNotEmpty(e.contents)?e.contents:_makeOriginInfoWithSourcePrefix(a.serviceName,a.sourceName,a.source),returnURL:h,callbackUrl:getCallbackLog(variables._share.button.pholar,a,variables._share.device.pc,b)},"postPholar",775,900,"utf-8","post","all")
}function postMail(a,b){var c=_htFinishLog.mail.key+"."+_htOption.evKey,d=_htFinishLog.mail.baseUrl,e="_postMailPopup",f=a.mail||{},g=getUrl(a,f),h=isNotEmpty(f.title)?f.title:a.title,i=isNotEmpty(f.srvId)?f.srvId:"social",j=isNotEmpty(f.srvUrl)?f.srvUrl:_htAPI.API001+encodeURIComponent(g);
if(checkShortUrl(g,a)){makeShortUrl(g,splugin.common.fn(function(c){c!=""&&(f.url=c,a.shortUrl=c,postMail(a,b))
},this).bind(),a.preventShortUrl);
return
}getLogined(splugin.common.fn(function(c){var d=_htAPI.API501+"?svc="+i+"&tmplUrl="+encodeURIComponent(j)+"&subject="+encodeURIComponent(h)+"&callbackUrl="+encodeURIComponent(getCallbackLog(variables._share.button.mail,a,variables._share.device.pc,b));
c?openPopupToCenter(d,e,900,770):openLoginForm(d,e,900,770)
},this).bind())
}function postMemo(a){var b=a.memo||{},c=getUrl(a,b),d=isNotEmpty(b.title)?b.title:a.title,e=_makeOriginInfoWithSourcePrefix(a.serviceName,a.sourceName,a.source);
if(checkShortUrl(c,a)){makeShortUrl(c,splugin.common.fn(function(c){c!=""&&(b.url=c,postMemo(a))
},this).bind(),a.preventShortUrl);
return
}d=replaceTitle(d),e=replaceTitle(e);
var f=d+"\n"+e;
popupWindow(_htAPI.API508,{content:f,linkDisplayText:d,linkUrl:c},"postMemo",540,520,null,"get","all")
}function postFacebook(a){var b=a.facebook||{},c=getUrl(a,b);
if(checkShortUrl(c,a)){makeShortUrl(c,splugin.common.fn(function(c){c!=""&&(b.url=c,postFacebook(a))
},this).bind(),a.preventShortUrl);
return
}popupWindow(_htAPI.API505,{u:c},"postFacebook",540,520,null,"get","all")
}function postTwitter(a){var b="_postTwitterPopup",c=a.twitter||{},d=isNotEmpty(c.url)?c.url:a.url,e=isNotEmpty(c.title)?c.title:a.title;
d=addQueryStringParameter(d,"spi_ref","m_"+_htOption.evKey+"_twitter"),makeShortUrl(d,splugin.common.fn(function(c){if(c!=""){var d=replaceTitle(_makeQueryString(e,c,"("+_makeOriginInfoWithSourcePrefix(a.serviceName,a.sourceName,a.source)+")"," ")),f=_htAPI.API506+"?text="+encodeURIComponent(d);
openPopupToCenter(f,b,640,440)
}},this).bind(),a.preventShortUrl)
}function postWeibo(a){var b="_postWeiboPopup",c=a.weibo||{},d=isNotEmpty(c.url)?c.url:a.url,e=isNotEmpty(c.title)?c.title:a.title;
d=addQueryStringParameter(d,"spi_ref","m_"+_htOption.evKey+"_weibo"),makeShortUrl(d,splugin.common.fn(function(f){if(f!=""){var g=replaceTitle(_makeQueryString(e,"","("+_makeOriginInfoWithSourcePrefix(a.serviceName,a.sourceName,a.source)+")"," ")),h=_htAPI.API514+"?appkey=&url="+encodeURIComponent(d)+"&title="+encodeURIComponent(g)+"&pic="+encodeURIComponent(c.imageUrl);
openPopupToCenter(h,b,540,520)
}},this).bind(),a.preventShortUrl)
}function postReddit(a){var b="_postRedditPopup",c=a.reddit||{},d=isNotEmpty(c.url)?c.url:a.url,e=isNotEmpty(c.title)?c.title:a.title;
d=addQueryStringParameter(d,"spi_ref","m_"+_htOption.evKey+"_reddit"),makeShortUrl(d,splugin.common.fn(function(c){if(c!=""){var f=replaceTitle(_makeQueryString(e,"","("+_makeOriginInfoWithSourcePrefix(a.serviceName,a.sourceName,a.source)+")"," ")),g=_htAPI.API515+"?url="+encodeURIComponent(d)+"&title="+encodeURIComponent(f)+"&type=link";
openPopupToCenter(g,b,1000,1000)
}},this).bind(),a.preventShortUrl)
}function postBookmark(a,b,c){var d=a.bookmark||{},e=getUrl(a,d),f='["'+e+'"]';
if(checkShortUrl(e,a)){makeShortUrl(e,splugin.common.fn(function(e){e!=""&&(d.url=e,postBookmark(a,b,c))
},this).bind());
return
}splugin.common.requestJsonp(_htAPI.API301,{urls:f},splugin.common.fn(function(d){var e=d;
if(e.bookmarkError){var f=e.bookmarkError;
f.responseCode==900?(b({result:"fail",type:"login"}),redirectLoginPage(a,document.location.href)):(b({result:"fail",type:"check"}),alert("서버 접속이 원활하지 않습니다.\n잠시 후 다시 시도해 주십시오."))
}else{if(e&&e.list&&e.list.length==1){var f=e.list[0];
f.exist==0?addBookmarkData(a,b,c):b({result:"success",type:"exist",urlId:f.urlId})
}else{b({result:"fail",type:"check"}),alert("서버 접속이 원활하지 않습니다.\n잠시 후 다시 시도해 주십시오.")
}}},this).bind())
}function addBookmarkData(a,b,c){var d=a.bookmark||{},e=isNotEmpty(d.url)?d.url:a.url,f=isNotEmpty(d.title)?d.title:a.title,g=_htOption.evKey;
f=replaceTitle(f),splugin.common.requestJsonp(_htAPI.API302,{title:f,url:e,isPrivate:!0,type:"B",source:g},splugin.common.fn(function(d){var e=d;
if(e&&e.bookmarkSave){var f=e.bookmarkSave;
f.responseCode==0||f.responseCode==1?(sendEventLog("finish","bookmark",a,c),b({result:"success",type:"add"})):(b({result:"fail",type:"add"}),alert("서버 접속이 원활하지 않습니다.\n잠시 후 다시 시도해 주십시오."))
}else{b({result:"fail",type:"add"}),alert("서버 접속이 원활하지 않습니다.\n잠시 후 다시 시도해 주십시오.")
}},this).bind())
}function delBookmarkData(a,b,c){splugin.common.requestJsonp(_htAPI.API303,{urlId:b},splugin.common.fn(function(a){var b=a;
if(b&&b.bookmarkDelete){var d=b.bookmarkDelete;
d.responseCode==0||d.responseCode==1?c({result:"success",type:"delete"}):(c({result:"fail",type:"delete"}),alert("서버 접속이 원활하지 않습니다.\n잠시 후 다시 시도해 주십시오."))
}else{c({result:"fail",type:"delete"}),alert("서버 접속이 원활하지 않습니다.\n잠시 후 다시 시도해 주십시오.")
}},this).bind())
}function checkShortUrl(a,b){return !b.preventShortUrl&&b.useShortUrl&&a.indexOf("naver.me")<0?!0:!1
}function getUrl(a,b){return a=a||{},b=b||{},isNotEmpty(b.url)?b.url:a.url
}function isNotEmpty(a){return splugin.util.isNotEmpty(a)
}function getLogined(a){common.requestJsonp(_htAPI.API000,{},splugin.common.fn(function(b){var c=b;
c.result=="success"&&c.success==1?a(!0):a(!1)
},this).bind(),"callback")
}function makeShortUrl(a,b,c){var d="";
if(c||a.indexOf("naver.me")>=0){b(a);
return
}common.requestJsonp(_htAPI.API101,{svcCode:"0022",url:a},splugin.common.fn(function(a){var c=a;
switch(c.code){case"200":d=c.result.url;
break;
case"500":alert("성능 개선을 위한 임시점검 중입니다.");
break;
default:alert("단축URL 생성오류("+c.code+")")
}b(d)
},this).bind())
}function setFormCharset(a,b){!util.isIE11Under()||navigator.userAgent.indexOf("Trident/8.0")>=0?a.acceptCharset=b:document.charset=b
}function createHiddenIframe(a,b){var c=document.getElementById(a);
return c!=null&&c.parentNode.removeChild(c),c=document.createElement("iframe"),c.id=a,c.style.border="none",c.style.width="0px",c.style.height="0px",c.style.display="none",c.src=b,c
}function appendGetParam(a,b){var c,d,e,f,g,h;
if(b.indexOf("?")>-1){f=b.substring(b.indexOf("?")+1),g=f.split("&");
for(c=0;
c<g.length;
c++){h=g[c].split("="),d=h[0],e=h[1],d&&e&&a.appendChild(createInputElement("hidden",d,e))
}}}function appendChilds(a,b){if(splugin.util.isNotEmpty(b)){for(var c=0;
c<b.length;
c++){splugin.util.isNotEmpty(b[c])&&a.appendChild(b[c])
}}}function createInputElement(a,b,c){var d=null;
return splugin.util.isNotEmpty(c)==1&&(d=document.createElement("input"),d.type=a,d.name=b,d.value=c),d
}function createInputElementArr(a,b,c){var d=[];
if(isNotEmpty(c)){try{for(var e=0;
e<c.length;
e++){d[e]=createInputElement(a,b,c[e])
}}catch(f){throw f
}}return d
}function addQueryStringParameter(a,b,c){var d=document.createElement("a");
return d.href=a,d.search+=d.search.substring(0,1)=="?"?"&":"?",d.search+=encodeURIComponent(b)+"="+encodeURIComponent(c),d.href
}function sendEventLog(a,b,c,d){try{a==="click"&&typeof _htClickLog[b]!="undefined"?sendClickLog(b,c,variables._share.device.pc,d):a==="finish"&&typeof _htFinishLog[b]!="undefined"&&sendFinishLog(b,c,variables._share.device.pc,d)
}catch(e){throw e
}}function openPopupToCenter(a,b,c,d,e,f){var g=screen.width?(screen.width-c)/2:0,h=screen.height?(screen.height-d)/2:0,i="height="+d+",width="+c+",top="+(d>screen.height?0:h)+",left="+g+(e?","+e:",location=no,resize=no,resizable=no,"+(f||1024>=screen.height?"scrollbars=yes":"scrollbars=no")),j=null;
try{j=window.open(a,b,i);
if(j&util.isChrome()){if(j.screenX=="undefined"||j.screenX<0){return alert("브라우저의 팝업표시가 가능하도록 설정을 변경해주세요."),!1
}}else{if(!j){return !util.isIE()&&!util.isEdge()&&alert("브라우저의 팝업표시가 가능하도록 설정을 변경해주세요."),!1
}}}catch(k){}return j
}function openLoginForm(a,b,c,d){openPopupToCenter("https://nid.naver.com/nidlogin.login?url="+encodeURIComponent(a),b,c,d)
}function redirectLoginPage(a,b){var c={};
util.isNotEmpty(a.option)&&(typeof a.option=="object"?c=a.option:c=common.strToJson(a.option)),c.onLoginRedirect?typeof c.onLoginRedirect=="function"?c.onLoginRedirect():document.location.href=c.onLoginRedirect:window.top.location.href="https://nid.naver.com/nidlogin.login?mode=form&url="+encodeURIComponent(b)
}function ArrayAppender(a){function c(a){if(!a){return
}Object.prototype.toString.call(a)!=="[object Array]"&&b.push(a);
var c=0,d=a.length;
while(c<d){b.push(a[c++])
}}function d(){return b
}var b=a||[];
return{append:function(a){c(a)
},toArray:function(){return d()
}}
}function replaceTitle(a){return a.replace(/'/gi,"˙").replace(/"/gi,"＂").replace(/&quot;/gi,"＂").replace(/&lt;/gi,"<").replace(/&gt;/gi,">＂")
}"use strict";
var variables=splugin.variables,common=splugin.common,util=splugin.util,locale=splugin.locale,_htClickLog=variables._htClickLog,_htFinishLog=variables._htFinishLog,_htOption=htOption||{},_sCharset=htOption.sCharset||"utf-8",_htAPI=variables._htAPI[variables.getDeployVariable()];
return util.isEmpty(_htAPI)&&(_htAPI=variables._htAPI.real),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;
return function(e){if(typeof e=="object"||typeof e=="function"&&e!==null){var f=[],g,h;
for(g in e){a.call(e,g)&&f.push(g)
}if(b){for(h=0;
h<d;
h++){a.call(e,c[h])&&f.push(c[h])
}}return f
}throw new TypeError("Object.keys called on non-object")
}}()),{postSubscribe:function(a){postSubscribe(a)
},postBand:function(a){postBand(a)
},postBlog:function(a,b){postBlog(a,b)
},postCafe:function(a,b){postCafe(a,b)
},postTwitter:function(a){postTwitter(a)
},postFacebook:function(a){postFacebook(a)
},postWeibo:function(a){postWeibo(a)
},postReddit:function(a){postReddit(a)
},postPholar:function(a,b){postPholar(a,b)
},postMemo:function(a){postMemo(a)
},postMail:function(a,b){postMail(a,b)
},postBookmark:function(a,b,c){postBookmark(a,b,c)
},deleteBookmark:function(a,b,c){delBookmarkData(a,b,c)
}}
}function sendClickLog(v,u,t,s){var r=u.evKey,q=u.likeServiceId,p=u.likeContentsId,o=splugin.util.isEmpty(u.title)?u.ogData.ogTitle:u.title,n=u.canonicalUrl||u.ogData.ogUrl||u.url,m=u.kakaotalk.imageUrl||u.ogData.ogImage||"",l=splugin.variables._share.logUrl[splugin.variables.getDeployVariable()]+"?";
l+="evkey="+r,l+="&snsId="+splugin.variables._share.button[v],l+="&platformCode="+t,l+="&likeServiceId="+q,l+="&likeContentsId="+p,l+="&shareTime="+s,l+="&srcUrl="+encodeURIComponent(n),l+="&shareCode="+splugin.variables._share.type.click,l+="&title="+encodeURIComponent(o),l+="&image="+encodeURIComponent(m),setLogImage(l)
}function sendFinishLog(s,r,q,p){var o=r.evKey,n=r.likeServiceId,m=r.likeContentsId,l=r.canonicalUrl||r.ogData.ogUrl||r.url,j=splugin.variables._share.logUrl[splugin.variables.getDeployVariable()]+"?";
j+="evkey="+o,j+="&snsId="+splugin.variables._share.button[s],j+="&platformCode="+q,j+="&likeServiceId="+n,j+="&likeContentsId="+m,j+="&shareTime="+p,j+="&srcUrl="+encodeURIComponent(l),j+="&shareCode="+splugin.variables._share.type.finish,setLogImage(j)
}function setLogImage(e){try{var d=new Image;
d.onerror=d.onload=d.onabort=function(){d=null
},d.src=e
}catch(f){}}function getCallbackLog(j,i,q,p){var o=i.evKey,n=i.canonicalUrl||i.ogData.ogUrl||i.shortUrl||i.url,m=i.likeServiceId,l=i.likeContentsId;
return splugin.variables._share.logUrl[splugin.variables.getDeployVariable()]+"?evkey="+o+"&snsId="+j+"&platformCode="+q+"&likeServiceId="+m+"&likeContentsId="+l+"&shareTime="+p+"&srcUrl="+encodeURIComponent(n)+"&shareCode="+splugin.variables._share.type.finish+"&useShortUrl="+i.useShortUrl
}function sendInvalidRefererLog(d){var c=splugin.variables._share.refererUrl[splugin.variables.getDeployVariable()]+"?";
c+="referer="+encodeURIComponent(d),setLogImage(c)
}typeof JSON!="object"&&(JSON={}),function(){function f(a){return a<10?"0"+a:a
}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];
return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+a+'"'
}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];
i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));
switch(typeof i){case"string":return quote(i);
case"number":return isFinite(i)?String(i):"null";
case"boolean":case"null":return String(i);
case"object":if(!i){return"null"
}gap+=indent,h=[];
if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;
for(c=0;
c<f;
c+=1){h[c]=str(c,i)||"null"
}return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e
}if(rep&&typeof rep=="object"){f=rep.length;
for(c=0;
c<f;
c+=1){typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))
}}else{for(d in i){Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))
}}return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e
}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()
});
var cx,escapable,gap,indent,meta,rep;
typeof JSON.stringify!="function"&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;
gap="",indent="";
if(typeof c=="number"){for(d=0;
d<c;
d+=1){indent+=" "
}}else{typeof c=="string"&&(indent=c)
}rep=b;
if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number"){return str("",{"":a})
}throw new Error("JSON.stringify")
}),typeof JSON.parse!="function"&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];
if(e&&typeof e=="object"){for(c in e){Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c])
}}return reviver.call(a,b,e)
}var j;
text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
}));
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j
}throw new SyntaxError("JSON.parse")
})
}(),typeof window!="undefined"&&window.nhn===undefined&&(window.nhn={}),typeof window!="undefined"&&window.splugin===undefined&&(window.splugin={}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var d=this.length>>>0,f=Number(arguments[1])||0;
f=f<0?Math.ceil(f):Math.floor(f),f<0&&(f+=d);
for(;
f<d;
f++){if(f in this&&this[f]===e){return f
}}return -1
}),splugin.common={byteLen:function(e){var d,f=0;
for(d=0;
d<e.length;
d++){e.charCodeAt(d)>255?f+=2:f++
}return f
},byteSubStr:function(i,h,o){var n=[],m=0;
for(var l=0,j=i.length;
l<j;
l++){i.charCodeAt(l)>127?(n.push(l),n.push(l)):n.push(l)
}return n[h]==n[o]?!1:i.substring(n[h],n[o])
},requestJsonp:function(t,s,r,q){var p=document.head?document.head:document.getElementsByTagName("head")[0],o=document.createElement("script"),n="spi_"+String(parseInt(Math.random()*10000000000,10)),m=typeof a=="function"?setTimeout(a,5000):null,l="";
s=s||{},window[n]=function(){m&&clearInterval(m),r.apply(null,arguments),window[n]=null,p.removeChild(o)
},t.indexOf("?")!=-1?t+="&"+(typeof q!="undefined"?q:"_callback")+"=window."+n:t+="?"+(typeof q!="undefined"?q:"_callback")+"=window."+n;
for(k in s){s.hasOwnProperty(k)&&(l+=encodeURIComponent(k)+"="+encodeURIComponent(s[k])+"&")
}o.src=t+"&"+l,p.appendChild(o)
},requestAjax:function(e,d){this.bindFunction=function(g,c){return function(){return g.apply(c,[c])
}},this.stateChange=function(b){this.request.readyState==4&&this.callbackFunction(this.request.responseText)
},this.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:!1
},this.postBody=arguments[2]||"",this.callbackFunction=d,this.url=e,this.request=this.getRequest();
if(this.request){var f=this.request;
f.onreadystatechange=this.bindFunction(this.stateChange,this),this.postBody!==""?(f.open("POST",e,!0),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("Content-type","application/x-www-form-urlencoded")):f.open("GET",e,!0),f.send(this.postBody)
}},fn:function(func,thisObject){var cl=arguments.callee;
if(func instanceof cl){return func
}if(this instanceof cl){this._events=[],this._tmpElm=null,this._key=null,typeof func=="function"?(this._func=func,this._this=thisObject):typeof func=="string"&&typeof thisObject=="string"&&(this._func=eval("false||function("+func+"){"+thisObject+"}"))
}else{return new cl(func,thisObject)
}},strToJson:function(sObject){try{/^(?:\s*)[\{\[]/.test(sObject)&&(sObject=eval("("+sObject+")"))
}catch(e){sObject={}
}return sObject
},toJson:function(b){return b?typeof b=="string"?this.strToJson(b):b:{}
},offset:function(v,u,t){if(!v){return !1
}var s=null;
if(typeof u=="number"&&typeof t=="number"){isNaN(parseFloat(this.css(v,"top")))&&(v.style.top="0px"),isNaN(parseFloat(this.css(v,"left")))&&(v.style.left="0px");
var r=this.offset(v),q={top:u-r.top,left:t-r.left};
return v.style.top=parseFloat(this.css(v,"top"))+q.top+"px",v.style.left=parseFloat(this.css(v,"left"))+q.left+"px",this
}var p=/Safari/.test(navigator.userAgent),o=/MSIE/.test(navigator.userAgent),n=o?navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]:0,m=function(f){var e={left:0,top:0};
for(var h=f,g=h.offsetParent;
h=h.parentNode;
){h.offsetParent&&(e.left-=h.scrollLeft,e.top-=h.scrollTop),h==g&&(e.left+=f.offsetLeft+h.clientLeft,e.top+=f.offsetTop+h.clientTop,h.offsetParent||(e.left+=h.offsetLeft,e.top+=h.offsetTop),g=h.offsetParent,f=h)
}return e
},l=function(C){var B={left:0,top:0},A=C.ownerDocument||C.document||document,z=A.documentElement,y=A.body;
if(C.getBoundingClientRect){if(!s){var x=window==top;
if(!x){try{x=window.frameElement&&window.frameElement.frameBorder==1
}catch(w){}}o&&n<8&&window.external&&x?(s={left:2,top:2},oBase=null):s={left:0,top:0}
}var i;
try{i=C.getBoundingClientRect()
}catch(w){i={left:0,top:0}
}C!==z&&C!==y&&(B.left=i.left-s.left,B.top=i.top-s.top,B.left+=z.scrollLeft||y.scrollLeft,B.top+=z.scrollTop||y.scrollTop)
}else{if(A.getBoxObjectFor){var i=A.getBoxObjectFor(C),h=A.getBoxObjectFor(z||y);
B.left=i.screenX-h.screenX,B.top=i.screenY-h.screenY
}else{for(var d=C;
d;
d=d.offsetParent){B.left+=d.offsetLeft,B.top+=d.offsetTop
}for(var d=C.parentNode;
d;
d=d.parentNode){if(d.tagName=="BODY"){break
}d.tagName=="TR"&&(B.top+=2),B.left-=d.scrollLeft,B.top-=d.scrollTop
}}}return B
};
return(p?m:l)(v)
},size:function(){var d=0,c=0;
return window.innerWidth?(d=window.innerWidth,c=window.innerHeight):document.documentElement.clientWidth!=0?(d=document.documentElement.clientWidth,c=document.documentElement.clientHeight):(d=document.body.clientWidth,c=document.body.clientHeight),{width:d,height:c}
},css:function(j,i){var q=/MSIE/.test(navigator.userAgent);
if(window.getComputedStyle){try{i=="cssFloat"&&(i="float");
var p=j.ownerDocument||j.document||document,o=j.style[i]||p.defaultView.getComputedStyle(j,null).getPropertyValue(i.replace(/([A-Z])/g,"-$1").toLowerCase());
return i=="textDecoration"&&(o=o.replace(",","")),o
}catch(n){console.log(n)
}}else{if(j.currentStyle){try{i=="cssFloat"&&(i="styleFloat");
var m=j.style[i];
if(m){return m
}var l=j.currentStyle;
return l?l[i]:m
}catch(n){console.log(n)
}}else{try{return i=="cssFloat"&&q&&(i="styleFloat"),j.style[i]
}catch(n){console.log(n)
}}}},preventEvent:function(b){b.preventDefault?b.preventDefault():b.returnValue=!1
},attachEvent:function(e,d,f){if(!e){return
}if(e.addEventListener){e.addEventListener(d,f,!1)
}else{if(e.attachEvent){e.attachEvent("on"+d,f)
}else{switch(d){case"click":e.onclick&&(e.onclick=f);
break;
case"mouseover":e.onmouseover&&(e.onmouseover=f);
break;
case"mouseout":e.onmouseover&&(e.onmouseout=f);
break;
case"keyup":e.onkeyup&&(e.onkeyup=f);
break;
case"keydown":e.onkeydown&&(e.onkeydown=f);
break;
case"keypress":e.onkeypress&&(e.onkeypress=f);
break;
case"focus":e.onfocus&&(e.onfocus=f);
break;
case"focusout":e.onfocusout&&(e.onfocusout=f);
break;
case"blur":e.onblur&&(e.onblur=f);
break;
case"resize":e.onresize&&(e.onresize=f);
break;
case"orientationchange":e.onorientationchange&&(e.onorientationchange=f);
break;
case"touchmove":e.ontouchmove&&(e.ontouchmove=f)
}}}},detachEvent:function(e,d,f){if(!e){return
}if(e.removeEventListener){e.removeEventListener(d,f,!1)
}else{if(e.detachEvent){e.detachEvent("on"+d,f)
}else{switch(d){case"click":e.onclick&&(e.onclick=null);
break;
case"mouseover":e.onmouseover&&(e.onmouseover=null);
break;
case"mouseout":e.onmouseout&&(e.onmouseout=f);
break;
case"keyup":e.onkeyup&&(e.onkeyup=f);
break;
case"keydown":e.onkeydown&&(e.onkeydown=f);
break;
case"keypress":e.onkeypress&&(e.onkeypress=f);
break;
case"focus":e.onfocus&&(e.onfocus=f);
break;
case"focusout":e.focusout&&(e.focusout=f);
break;
case"blur":e.onblur&&(e.onblur=f);
break;
case"resize":e.onresize&&(e.onresize=f);
break;
case"orientationchange":e.onorientationchange&&(e.onorientationchange=f);
break;
case"touchmove":e.ontouchmove&&(e.ontouchmove=f)
}}}},hasClass:function(d,c){return d?d.className.match&&d.className.match(new RegExp("(\\s|^)"+c+"(\\s|$)")):!1
},addClass:function(e,d){var f="";
e.className?(f=e.className,f+=" ",f+=d,e.className=f):e.className=d
},removeClass:function(e,d){if(this.hasClass(e,d)){var f=new RegExp("(\\s|^)"+d+"(\\s|$)");
e.className=e.className.replace(f," ")
}},show:function(b){b&&(b.style.display="block")
},hide:function(b){b&&(b.style.display="none")
},visible:function(b){return !b||b.style.display!="block"&&b.style.display!="inline-block"?!1:!0
},appendHTML:function(f,e){var h,g=document.createElement("div");
g.innerHTML=e;
while(h=g.firstChild){f.appendChild(h)
}}},splugin.common.fn.prototype.bind=function(){var f=arguments,e=this._func,h=this._this,g=function(){var b=arguments;
return f.length&&(b=f.concat(b)),e.apply(h,b)
};
return g
},typeof window.splugin=="undefined"&&(window.splugin={}),function(){function af(s,r,q,p,o,n){o=0;
for(var m=p.length;
o<m;
o++){var l=p[o];
if(l){for(var d=!1,l=l[s];
l;
){if(l[ac]===q){d=p[l.sizset];
break
}1===l.nodeType&&!n&&(l[ac]=q,l.sizset=o);
if(l.nodeName.toLowerCase()===r){d=l;
break
}l=l[s]
}p[o]=d
}}}function ae(s,r,q,p,o,n){o=0;
for(var m=p.length;
o<m;
o++){var l=p[o];
if(l){for(var d=!1,l=l[s];
l;
){if(l[ac]===q){d=p[l.sizset];
break
}if(1===l.nodeType){if(n||(l[ac]=q,l.sizset=o),"string"!=typeof r){if(l===r){d=!0;
break
}}else{if(0<U.filter(r,[l]).length){d=l;
break
}}}l=l[s]
}p[o]=d
}}}var ad=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,ac="sizcache"+(Math.random()+"").replace(".",""),ab=0,aa=Object.prototype.toString,Z=!1,Y=!0,X=/\\/g,W=/\r\n/g,V=/\W/;
[0,0].sort(function(){return Y=!1,0
});
var U=function(z,y,x,w){x=x||[];
var v=y=y||document;
if(1!==y.nodeType&&9!==y.nodeType){return[]
}if(!z||"string"!=typeof z){return x
}var u,r,o,n,l,f=!0,c=U.isXML(y),B=[],A=z;
do{if(ad.exec(""),u=ad.exec(A)){if(A=u[3],B.push(u[1]),u[2]){n=u[3];
break
}}}while(u);
if(1<B.length&&R.exec(z)){if(2===B.length&&S.relative[B[0]]){r=L(B[0]+B[1],y,w)
}else{for(r=S.relative[B[0]]?[y]:U(B.shift(),y);
B.length;
){z=B.shift(),S.relative[z]&&(z+=B.shift()),r=L(z,r,w)
}}}else{if(!w&&1<B.length&&9===y.nodeType&&!c&&S.match.ID.test(B[0])&&!S.match.ID.test(B[B.length-1])&&(u=U.find(B.shift(),y,c),y=u.expr?U.filter(u.expr,u.set)[0]:u.set[0]),y){u=w?{expr:B.pop(),set:M(w)}:U.find(B.pop(),1!==B.length||"~"!==B[0]&&"+"!==B[0]||!y.parentNode?y:y.parentNode,c),r=u.expr?U.filter(u.expr,u.set):u.set;
for(0<B.length?o=M(r):f=!1;
B.length;
){u=l=B.pop(),S.relative[l]?u=B.pop():l="",null==u&&(u=y),S.relative[l](o,u,c)
}}else{o=[]
}}o||(o=r),o||U.error(l||z);
if("[object Array]"===aa.call(o)){if(f){if(y&&1===y.nodeType){for(z=0;
null!=o[z];
z++){o[z]&&(!0===o[z]||1===o[z].nodeType&&U.contains(y,o[z]))&&x.push(r[z])
}}else{for(z=0;
null!=o[z];
z++){o[z]&&1===o[z].nodeType&&x.push(r[z])
}}}else{x.push.apply(x,o)
}}else{M(o,x)
}return n&&(U(n,v,x,w),U.uniqueSort(x)),x
};
U.uniqueSort=function(d){if(J&&(Z=Y,d.sort(J),Z)){for(var c=1;
c<d.length;
c++){d[c]===d[c-1]&&d.splice(c--,1)
}}return d
},U.matches=function(d,c){return U(d,null,null,c)
},U.matchesSelector=function(d,c){return 0<U(c,null,null,[d]).length
},U.find=function(s,r,q){var p,o,n,m,l,i;
if(!s){return[]
}o=0;
for(n=S.order.length;
o<n;
o++){if(l=S.order[o],m=S.leftMatch[l].exec(s)){if(i=m[1],m.splice(1,1),"\\"!==i.substr(i.length-1)&&(m[1]=(m[1]||"").replace(X,""),p=S.find[l](m,r,q),null!=p)){s=s.replace(S.match[l],"");
break
}}}return p||(p="undefined"!=typeof r.getElementsByTagName?r.getElementsByTagName("*"):[]),{set:p,expr:s}
},U.filter=function(ai,ah,ag,C){for(var B,A,z,y,x,w,v,u,t=ai,s=[],n=ah,l=ah&&ah[0]&&U.isXML(ah[0]);
ai&&ah.length;
){for(z in S.filter){if(null!=(B=S.leftMatch[z].exec(ai))&&B[2]){if(w=S.filter[z],x=B[1],A=!1,B.splice(1,1),"\\"!==x.substr(x.length-1)){n===s&&(s=[]);
if(S.preFilter[z]){if(B=S.preFilter[z](B,n,ag,s,C,l)){if(!0===B){continue
}}else{A=y=!0
}}if(B){for(v=0;
null!=(x=n[v]);
v++){x&&(y=w(x,B,v,n),u=C^y,ag&&null!=y?u?A=!0:n[v]=!1:u&&(s.push(x),A=!0))
}}if(void 0!==y){ag||(n=s),ai=ai.replace(S.match[z],"");
if(!A){return[]
}break
}}}}if(ai===t){if(null==A){U.error(ai)
}else{break
}}t=ai
}return n
},U.error=function(b){throw Error("Syntax error, unrecognized expression: "+b)
};
var T=U.getText=function(f){var e,h;
e=f.nodeType;
var g="";
if(e){if(1===e||9===e){if("string"==typeof f.textContent){return f.textContent
}if("string"==typeof f.innerText){return f.innerText.replace(W,"")
}for(f=f.firstChild;
f;
f=f.nextSibling){g+=T(f)
}}else{if(3===e||4===e){return f.nodeValue
}}}else{for(e=0;
h=f[e];
e++){8!==h.nodeType&&(g+=T(h))
}}return g
},S=U.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(b){return b.getAttribute("href")
},type:function(b){return b.getAttribute("type")
}},relative:{"+":function(h,g){var m="string"==typeof g,l=m&&!V.test(g),m=m&&!l;
l&&(g=g.toLowerCase());
for(var l=0,j=h.length,i;
l<j;
l++){if(i=h[l]){for(;
(i=i.previousSibling)&&1!==i.nodeType;
){}h[l]=m||i&&i.nodeName.toLowerCase()===g?i||!1:i===g
}}m&&U.filter(g,h,!0)
},">":function(h,g){var m,l="string"==typeof g,j=0,i=h.length;
if(l&&!V.test(g)){for(g=g.toLowerCase();
j<i;
j++){if(m=h[j]){m=m.parentNode,h[j]=m.nodeName.toLowerCase()===g?m:!1
}}}else{for(;
j<i;
j++){(m=h[j])&&(h[j]=l?m.parentNode:m.parentNode===g)
}l&&U.filter(g,h,!0)
}},"":function(n,m,l){var j,e=ab++,b=ae;
"string"==typeof m&&!V.test(m)&&(j=m=m.toLowerCase(),b=af),b("parentNode",m,e,n,j,l)
},"~":function(n,m,l){var j,e=ab++,b=ae;
"string"==typeof m&&!V.test(m)&&(j=m=m.toLowerCase(),b=af),b("previousSibling",m,e,n,j,l)
}},find:{ID:function(e,d,f){if("undefined"!=typeof d.getElementById&&!f){return(e=d.getElementById(e[1]))&&e.parentNode?[e]:[]
}},NAME:function(h,g){if("undefined"!=typeof g.getElementsByName){for(var m=[],l=g.getElementsByName(h[1]),j=0,i=l.length;
j<i;
j++){l[j].getAttribute("name")===h[1]&&m.push(l[j])
}return 0===m.length?null:m
}},TAG:function(d,c){if("undefined"!=typeof c.getElementsByTagName){return c.getElementsByTagName(d[1])
}}},preFilter:{CLASS:function(i,h,o,n,m,l){i=" "+i[1].replace(X,"")+" ";
if(l){return i
}l=0;
for(var j;
null!=(j=h[l]);
l++){j&&(m^(j.className&&0<=(" "+j.className+" ").replace(/[\t\n\r]/g," ").indexOf(i))?o||n.push(j):o&&(h[l]=!1))
}return !1
},ID:function(b){return b[1].replace(X,"")
},TAG:function(b){return b[1].replace(X,"").toLowerCase()
},CHILD:function(d){if("nth"===d[1]){d[2]||U.error(d[0]),d[2]=d[2].replace(/^\+|\s*/g,"");
var c=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===d[2]&&"2n"||"odd"===d[2]&&"2n+1"||!/\D/.test(d[2])&&"0n+"+d[2]||d[2]);
d[2]=c[1]+(c[2]||1)-0,d[3]=c[3]-0
}else{d[2]&&U.error(d[0])
}return d[0]=ab++,d
},ATTR:function(h,g,m,l,j,i){return g=h[1]=h[1].replace(X,""),!i&&S.attrMap[g]&&(h[1]=S.attrMap[g]),h[4]=(h[4]||h[5]||"").replace(X,""),"~="===h[2]&&(h[4]=" "+h[4]+" "),h
},PSEUDO:function(g,c,j,i,h){if("not"===g[1]){if(1<(ad.exec(g[3])||"").length||/^\w/.test(g[3])){g[3]=U(g[3],null,null,c)
}else{return g=U.filter(g[3],c,j,1^h),j||i.push.apply(i,g),!1
}}else{if(S.match.POS.test(g[0])||S.match.CHILD.test(g[0])){return !0
}}return g
},POS:function(b){return b.unshift(!0),b
}},filters:{enabled:function(b){return !1===b.disabled&&"hidden"!==b.type
},disabled:function(b){return !0===b.disabled
},checked:function(b){return !0===b.checked
},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected
},parent:function(b){return !!b.firstChild
},empty:function(b){return !b.firstChild
},has:function(e,d,f){return !!U(f[3],e).length
},header:function(b){return/h\d/i.test(b.nodeName)
},text:function(e){var d=e.getAttribute("type"),f=e.type;
return"input"===e.nodeName.toLowerCase()&&"text"===f&&(d===f||null===d)
},radio:function(b){return"input"===b.nodeName.toLowerCase()&&"radio"===b.type
},checkbox:function(b){return"input"===b.nodeName.toLowerCase()&&"checkbox"===b.type
},file:function(b){return"input"===b.nodeName.toLowerCase()&&"file"===b.type
},password:function(b){return"input"===b.nodeName.toLowerCase()&&"password"===b.type
},submit:function(d){var c=d.nodeName.toLowerCase();
return("input"===c||"button"===c)&&"submit"===d.type
},image:function(b){return"input"===b.nodeName.toLowerCase()&&"image"===b.type
},reset:function(d){var c=d.nodeName.toLowerCase();
return("input"===c||"button"===c)&&"reset"===d.type
},button:function(d){var c=d.nodeName.toLowerCase();
return"input"===c&&"button"===d.type||"button"===c
},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)
},focus:function(b){return b===b.ownerDocument.activeElement
}},setFilters:{first:function(d,c){return 0===c
},last:function(f,e,h,g){return e===g.length-1
},even:function(d,c){return 0===c%2
},odd:function(d,c){return 1===c%2
},lt:function(e,d,f){return d<f[3]-0
},gt:function(e,d,f){return d>f[3]-0
},nth:function(e,d,f){return f[3]-0===d
},eq:function(e,d,f){return f[3]-0===d
}},filter:{PSEUDO:function(h,g,m,l){var j=g[1],i=S.filters[j];
if(i){return i(h,m,g,l)
}if("contains"===j){return 0<=(h.textContent||h.innerText||T([h])||"").indexOf(g[3])
}if("not"===j){g=g[3],m=0;
for(l=g.length;
m<l;
m++){if(g[m]===h){return !1
}}return !0
}U.error(j)
},CHILD:function(j,d){var q,p,o,n,m,l;
q=d[1],l=j;
switch(q){case"only":case"first":for(;
l=l.previousSibling;
){if(1===l.nodeType){return !1
}}if("first"===q){return !0
}l=j;
case"last":for(;
l=l.nextSibling;
){if(1===l.nodeType){return !1
}}return !0;
case"nth":q=d[2],p=d[3];
if(1===q&&0===p){return !0
}o=d[0];
if((n=j.parentNode)&&(n[ac]!==o||!j.nodeIndex)){m=0;
for(l=n.firstChild;
l;
l=l.nextSibling){1===l.nodeType&&(l.nodeIndex=++m)
}n[ac]=o
}return l=j.nodeIndex-p,0===q?0===l:0===l%q&&0<=l/q
}},ID:function(d,c){return 1===d.nodeType&&d.getAttribute("id")===c
},TAG:function(d,c){return"*"===c&&1===d.nodeType||!!d.nodeName&&d.nodeName.toLowerCase()===c
},CLASS:function(d,c){return -1<(" "+(d.className||d.getAttribute("class"))+" ").indexOf(c)
},ATTR:function(h,g){var m=g[1],m=U.attr?U.attr(h,m):S.attrHandle[m]?S.attrHandle[m](h):null!=h[m]?h[m]:h.getAttribute(m),l=m+"",j=g[2],i=g[4];
return null==m?"!="===j:!j&&U.attr?null!=m:"="===j?l===i:"*="===j?0<=l.indexOf(i):"~="===j?0<=(" "+l+" ").indexOf(i):i?"!="===j?l!==i:"^="===j?0===l.indexOf(i):"$="===j?l.substr(l.length-i.length)===i:"|="===j?l===i||l.substr(0,i.length+1)===i+"-":!1:l&&!1!==m
},POS:function(g,f,j,i){var h=S.setFilters[f[2]];
if(h){return h(g,j,f,i)
}}}},R=S.match.POS,Q=function(d,c){return"\\"+(c-0+1)
},O;
for(O in S.match){S.match[O]=RegExp(S.match[O].source+/(?![^\[]*\])(?![^\(]*\))/.source),S.leftMatch[O]=RegExp(/(^(?:.|\r|\n)*?)/.source+S.match[O].source.replace(/\\(\d+)/g,Q))
}var M=function(d,c){return d=Array.prototype.slice.call(d,0),c?(c.push.apply(c,d),c):d
};
try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType
}catch(K){M=function(g,f){var j=0,i=f||[];
if("[object Array]"===aa.call(g)){Array.prototype.push.apply(i,g)
}else{if("number"==typeof g.length){for(var h=g.length;
j<h;
j++){i.push(g[j])
}}else{for(;
g[j];
j++){i.push(g[j])
}}}return i
}}var J,I;
document.documentElement.compareDocumentPosition?J=function(d,c){return d===c?(Z=!0,0):!d.compareDocumentPosition||!c.compareDocumentPosition?d.compareDocumentPosition?-1:1:d.compareDocumentPosition(c)&4?-1:1
}:(J=function(i,g){if(i===g){return Z=!0,0
}if(i.sourceIndex&&g.sourceIndex){return i.sourceIndex-g.sourceIndex
}var o,n,m=[],l=[];
o=i.parentNode,n=g.parentNode;
var j=o;
if(o===n){return I(i,g)
}if(!o){return -1
}if(!n){return 1
}for(;
j;
){m.unshift(j),j=j.parentNode
}for(j=n;
j;
){l.unshift(j),j=j.parentNode
}o=m.length,n=l.length;
for(j=0;
j<o&&j<n;
j++){if(m[j]!==l[j]){return I(m[j],l[j])
}}return j===o?I(i,l[j],-1):I(m[j],g,1)
},I=function(e,d,f){if(e===d){return f
}for(e=e.nextSibling;
e;
){if(e===d){return -1
}e=e.nextSibling
}return 1
}),Q=document.createElement("div"),O="script"+(new Date).getTime();
var H=document.documentElement;
Q.innerHTML="<a name='"+O+"'/>",H.insertBefore(Q,H.firstChild),document.getElementById(O)&&(S.find.ID=function(e,d,f){if("undefined"!=typeof d.getElementById&&!f){return(d=d.getElementById(e[1]))?d.id===e[1]||"undefined"!=typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===e[1]?[d]:void 0:[]
}},S.filter.ID=function(e,d){var f="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");
return 1===e.nodeType&&f&&f.nodeValue===d
}),H.removeChild(Q),H=Q=null,Q=document.createElement("div"),Q.appendChild(document.createComment("")),0<Q.getElementsByTagName("*").length&&(S.find.TAG=function(g,f){var j=f.getElementsByTagName(g[1]);
if("*"===g[1]){for(var i=[],h=0;
j[h];
h++){1===j[h].nodeType&&i.push(j[h])
}j=i
}return j
}),Q.innerHTML="<a href='#'></a>",Q.firstChild&&"undefined"!=typeof Q.firstChild.getAttribute&&"#"!==Q.firstChild.getAttribute("href")&&(S.attrHandle.href=function(b){return b.getAttribute("href",2)
}),Q=null;
if(document.querySelectorAll){var G=U,Q=document.createElement("div");
Q.innerHTML="<p class='TEST'></p>";
if(!Q.querySelectorAll||0!==Q.querySelectorAll(".TEST").length){var U=function(v,u,t,s){u=u||document;
if(!s&&!U.isXML(u)){var r=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(v);
if(r&&(1===u.nodeType||9===u.nodeType)){if(r[1]){return M(u.getElementsByTagName(v),t)
}if(r[2]&&S.find.CLASS&&u.getElementsByClassName){return M(u.getElementsByClassName(r[2]),t)
}}if(9===u.nodeType){if("body"===v&&u.body){return M([u.body],t)
}if(r&&r[3]){var q=u.getElementById(r[3]);
if(!q||!q.parentNode){return M([],t)
}if(q.id===r[3]){return M([q],t)
}}try{return M(u.querySelectorAll(v),t)
}catch(p){}}else{if(1===u.nodeType&&"object"!==u.nodeName.toLowerCase()){var r=u,o=(q=u.getAttribute("id"))||"__sizzle__",n=u.parentNode,m=/^\s*[+~]/.test(v);
q?o=o.replace(/'/g,"\\$&"):u.setAttribute("id",o),m&&n&&(u=u.parentNode);
try{if(!m||n){return M(u.querySelectorAll("[id='"+o+"'] "+v),t)
}}catch(l){}finally{q||r.removeAttribute("id")
}}}}return G(v,u,t,s)
},F;
for(F in G){U[F]=G[F]
}Q=null
}}F=document.documentElement;
var E=F.matchesSelector||F.mozMatchesSelector||F.webkitMatchesSelector||F.msMatchesSelector;
if(E){var D=!E.call(document.createElement("div"),"div"),P=!1;
try{E.call(document.documentElement,"[test!='']:sizzle")
}catch(N){P=!0
}U.matchesSelector=function(f,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");
if(!U.isXML(f)){try{if(P||!S.match.PSEUDO.test(e)&&!/!=/.test(e)){var h=E.call(f,e);
if(h||!D||f.document&&11!==f.document.nodeType){return h
}}}catch(g){}}return 0<U(e,null,null,[f]).length
}}F=document.createElement("div"),F.innerHTML="<div class='test e'></div><div class='test'></div>",F.getElementsByClassName&&0!==F.getElementsByClassName("e").length&&(F.lastChild.className="e",1!==F.getElementsByClassName("e").length&&(S.order.splice(1,0,"CLASS"),S.find.CLASS=function(e,d,f){if("undefined"!=typeof d.getElementsByClassName&&!f){return d.getElementsByClassName(e[1])
}},F=null)),U.contains=document.documentElement.contains?function(d,c){return d!==c&&(d.contains?d.contains(c):!0)
}:document.documentElement.compareDocumentPosition?function(d,c){return !!(d.compareDocumentPosition(c)&16)
}:function(){return !1
},U.isXML=function(b){return(b=(b?b.ownerDocument||b:0).documentElement)?"HTML"!==b.nodeName:!1
};
var L=function(i,h,o){var n,m=[],l="";
for(h=h.nodeType?[h]:h;
n=S.match.PSEUDO.exec(i);
){l+=n[0],i=i.replace(S.match.PSEUDO,"")
}i=S.relative[i]?i+"*":i,n=0;
for(var j=h.length;
n<j;
n++){U(i,h[n],m,o)
}return U.filter(l,m)
};
window.splugin.cssquery=U
}(),splugin.util={cssquery:function(d,c){return splugin.cssquery("."+d,c)
},getSingle:function(d,c){return splugin.cssquery("."+d,c)[0]
},randomId:function(){return String(parseInt(Math.random()*10000000000,10))
},trim:function(b){return b.replace(/^\s*|\s*$/g,"")
},isNotEmpty:function(b){return b==null||b=="undefined"||b=="null"||b==""?!1:!0
},isEmpty:function(b){return !this.isNotEmpty(b)
},loadCSS:function(f,e){if(document.getElementById(f)){return
}var h=document.getElementsByTagName("head")[0],g=document.createElement("link");
g.id=f,g.rel="stylesheet",g.type="text/css",g.href=e,h.appendChild(g)
},loadSCRIPT:function(f,e){if(document.getElementById(f)){return
}var h=document.getElementsByTagName("head")[0],g=document.createElement("script");
g.id=f,g.type="text/javascript",g.src=e,h.appendChild(g)
},isDisplayOn:function(g,f,j){var i=f[j],h=g.evkey;
return h!="cafe"&&h!="blog"||btn!="mypeople"?this.isNotEmpty(i.display)&&i.display==="off"?!1:!0:!1
},findParentNode:function(g,f,j){var i=g;
for(var h=0;
h<j;
h++){if(splugin.common.hasClass(i,f)){return i
}i=i.parentNode;
if(!i||i.nodeType!=1){break
}}return null
},isWindows10:function(){return navigator.userAgent.indexOf("Windows NT 10.0")>-1
},isIE11Under:function(){return navigator.userAgent.indexOf("MSIE")>-1
},isIE10:function(){return navigator.userAgent.indexOf("MSIE 10")>-1
},isIE11:function(){return !!navigator.userAgent.match(/Trident.*rv[ :]*\d+\./)
},isIE:function(){return this.isIE11Under()||this.isIE11()
},isEdge:function(){return navigator.userAgent.indexOf("Edge")>-1
},isChrome:function(){return !this.isEdge()&&navigator.userAgent.indexOf("Chrome")>-1
},isMobile:function(){var d=navigator.userAgent.indexOf("Android")>-1,c=navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPad")>-1;
return d||c?!0:!1
},isNaverApp:function(){var e=this.getCookie("AppInfo")||"",d=navigator.userAgent.indexOf("NAVER(inapp; search;")>-1||navigator.userAgent.indexOf("NAVER(higgs; search;")>-1,f=e.indexOf("NAVER(inapp; search;")>-1||e.indexOf("NAVER(higgs; search;")>-1;
return d||f?!0:!1
},isNaverBlogApp:function(){var e=this.getCookie("AppInfo")||"",d=navigator.userAgent.indexOf("NAVER(inapp; blog;")>-1,f=e.indexOf("NAVER(inapp; blog;")>-1;
return d||f?!0:!1
},getCookie:function(g){g+="=";
var f=document.cookie,j=f.indexOf(g),i="";
if(j!=-1){j+=g.length;
var h=f.indexOf(";",j);
h==-1&&(h=f.length),i=f.substring(j,h)
}return unescape(i)
},setAttribute:function(e,d,f){this.isNotEmpty(d)&&this.isNotEmpty(f)&&e.setAttribute(d,f)
},setParameters:function(d,c){this.setAttribute(d,"data-evkey",c.evKey),this.setAttribute(d,"data-service-name",c.serviceName),this.setAttribute(d,"data-source-name",c.sourceName),this.setAttribute(d,"data-option",c.option),this.setAttribute(d,"data-url",c.url),this.setAttribute(d,"data-title",c.title),this.setAttribute(d,"data-return-url",c.returnUrl),this.setAttribute(d,"data-oninitialize",c.oninitialize),this.setAttribute(d,"data-prevent-short-url",c.preventShortUrl?"on":"off"),this.setAttribute(d,"data-use-short-url",c.useShortUrl?"on":"off"),this.setAttribute(d,"data-extra-html",c.extraHTML),c.me&&(this.setAttribute(d,"data-me-display",c.me.display),this.setAttribute(d,"data-me-feed-info",c.me.feedInfo),this.setAttribute(d,"data-me-popup-type",c.me.popupType),this.setAttribute(d,"data-me-service-id",c.me.serviceId),this.setAttribute(d,"data-me-feed-group-id",c.me.feedGroupId),this.setAttribute(d,"data-me-feed-group-name",c.me.feedGroupName),this.setAttribute(d,"data-me-feed-group-url",c.me.feedGroupUrl),this.setAttribute(d,"data-me-feed-id",c.me.feedId),this.setAttribute(d,"data-me-feed-name",c.me.feedName),this.setAttribute(d,"data-me-feed-type",c.me.feedType),this.setAttribute(d,"data-me-feed-url",c.me.feedUrl),this.setAttribute(d,"data-me-selected",c.me.selected),this.setAttribute(d,"data-me-target-url",c.me.targetUrl),this.setAttribute(d,"data-me-oninitialize",c.me.oninitialize)),c.mail&&(this.setAttribute(d,"data-mail-display",c.mail.display),this.setAttribute(d,"data-mail-url",c.mail.url),this.setAttribute(d,"data-mail-title",c.mail.title),this.setAttribute(d,"data-mail-body",c.mail.body),this.setAttribute(d,"data-mail-srv-id",c.mail.srvId),this.setAttribute(d,"data-mail-srv-url",c.mail.srvUrl)),c.blog&&(this.setAttribute(d,"data-blog-display",c.blog.display),this.setAttribute(d,"data-blog-method",c.blog.method),this.setAttribute(d,"data-blog-url",c.blog.url),this.setAttribute(d,"data-blog-title",c.blog.title),this.setAttribute(d,"data-blog-blog-id",c.blog.blogId),this.setAttribute(d,"data-blog-source-type",c.blog.sourceType),this.setAttribute(d,"data-blog-source-title",c.blog.sourceTitle),this.setAttribute(d,"data-blog-source-contents",c.blog.sourceContents),this.setAttribute(d,"data-blog-source-form",c.blog.sourceForm),this.setAttribute(d,"data-blog-proxy-url",c.blog.proxyUrl),this.setAttribute(d,"data-blog-return-url",c.blog.returnUrl)),c.post&&(this.setAttribute(d,"data-post-display",c.post.display),this.setAttribute(d,"data-post-url",c.post.url),this.setAttribute(d,"data-post-title",c.post.title),this.setAttribute(d,"data-post-contents",c.post.contents),this.setAttribute(d,"data-post-return-url",c.post.returnUrl)),c.cafe&&(this.setAttribute(d,"data-cafe-display",c.cafe.display),this.setAttribute(d,"data-cafe-method",c.cafe.method),this.setAttribute(d,"data-cafe-url",c.cafe.url),this.setAttribute(d,"data-cafe-title",c.cafe.title),this.setAttribute(d,"data-cafe-source-type",c.cafe.sourceType),this.setAttribute(d,"data-cafe-source-title",c.cafe.sourceTitle),this.setAttribute(d,"data-cafe-source-contents",c.cafe.sourceContents),this.setAttribute(d,"data-cafe-source-form",c.cafe.sourceForm),this.setAttribute(d,"data-cafe-proxy-url",c.cafe.proxyUrl),this.setAttribute(d,"data-cafe-return-url",c.cafe.returnUrl)),c.cafechat&&(this.setAttribute(d,"data-cafechat-display",c.cafechat.display),this.setAttribute(d,"data-cafechat-url",c.cafechat.url),this.setAttribute(d,"data-cafechat-share-type",c.cafechat.shareType)),c.memo&&(this.setAttribute(d,"data-memo-display",c.memo.display),this.setAttribute(d,"data-memo-url",c.memo.url),this.setAttribute(d,"data-memo-title",c.memo.title),this.setAttribute(d,"data-memo-return-url",c.memo.returnUrl)),c.bookmark&&(this.setAttribute(d,"data-bookmark-display",c.bookmark.display),this.setAttribute(d,"data-bookmark-url",c.bookmark.url),this.setAttribute(d,"data-bookmark-title",c.bookmark.title)),c.copyurl&&(this.setAttribute(d,"data-copyurl-display",c.copyurl.display),this.setAttribute(d,"data-copyurl-url",c.copyurl.url)),c.twitter&&(this.setAttribute(d,"data-twitter-display",c.twitter.display),this.setAttribute(d,"data-twitter-url",c.twitter.url),this.setAttribute(d,"data-twitter-title",c.twitter.title)),c.facebook&&(this.setAttribute(d,"data-facebook-display",c.facebook.display),this.setAttribute(d,"data-facebook-url",c.facebook.url),this.setAttribute(d,"data-facebook-title",c.facebook.title)),c.band&&(this.setAttribute(d,"data-band-display",c.band.display),this.setAttribute(d,"data-band-url",c.band.url),this.setAttribute(d,"data-band-title",c.band.title)),c.line&&(this.setAttribute(d,"data-line-display",c.line.display),this.setAttribute(d,"data-line-url",c.line.url),this.setAttribute(d,"data-line-title",c.line.title),this.setAttribute(d,"data-line-image-url",c.line.imageUrl)),c.kakaotalk&&(this.setAttribute(d,"data-kakaotalk-display",c.kakaotalk.display),this.setAttribute(d,"data-kakaotalk-url",c.kakaotalk.url),this.setAttribute(d,"data-kakaotalk-title",c.kakaotalk.title),this.setAttribute(d,"data-kakaotalk-image-url",c.kakaotalk.imageUrl)),c.kakaostory&&(this.setAttribute(d,"data-kakaostory-display",c.kakaostory.display),this.setAttribute(d,"data-kakaostory-url",c.kakaostory.url),this.setAttribute(d,"data-kakaostory-title",c.kakaostory.title)),c.pholar&&(this.setAttribute(d,"data-pholar-display",c.pholar.display),this.setAttribute(d,"data-pholar-url",c.pholar.url),this.setAttribute(d,"data-pholar-title",c.pholar.title),this.setAttribute(d,"data-pholar-contents",c.pholar.contents),this.setAttribute(d,"data-pholar-return-url",c.pholar.returnUrl)),c.weibo&&(this.setAttribute(d,"data-weibo-display",c.weibo.display),this.setAttribute(d,"data-weibo-url",c.weibo.url),this.setAttribute(d,"data-weibo-title",c.weibo.title),this.setAttribute(d,"data-weibo-image-url",c.weibo.imageUrl)),c.reddit&&(this.setAttribute(d,"data-reddit-display",c.reddit.display),this.setAttribute(d,"data-reddit-url",c.reddit.url),this.setAttribute(d,"data-reddit-title",c.reddit.title))
},getAttribute:function(d,c){return this.isEmpty(d.getAttribute(c))?null:d.getAttribute(c)
},getSubParameter:function(e,d,f){return e[d]&&e[d][f]?e[d][f]:null
},convertEmptyToString:function(b){return b==""?"empty":b
},getTagValue:function(e,d){try{return document.querySelector(e).getAttribute(d)
}catch(f){return null
}},getParameters:function(htOption,elContainer){var htInitParam={},sDocUrl=document.location.href,sDocTitle=document.title,fOnInitialize=this.getAttribute(elContainer,"data-oninitialize");
if(fOnInitialize){try{htInitParam=eval(fOnInitialize),this.isEmpty(htInitParam)&&(htInitParam={})
}catch(e){}}var htParameter={evKey:htInitParam.evKey||this.getAttribute(elContainer,"data-evkey")||htOption.evKey||"",likeServiceId:htInitParam.likeServiceId||this.getAttribute(elContainer,"data-likeServiceId")||"",likeContentsId:htInitParam.likeContentsId||this.getAttribute(elContainer,"data-likeContentsId")||"",serviceName:htInitParam.serviceName||this.getAttribute(elContainer,"data-service-name")||htOption.serviceName||"",sourceName:htInitParam.sourceName||this.getAttribute(elContainer,"data-source-name")||htOption.sourceName||"",source:this.convertEmptyToString(htInitParam.source)||this.convertEmptyToString(elContainer.getAttribute("data-source"))||this.convertEmptyToString(htOption.source)||null,style:this.getAttribute(elContainer,"data-style")||"standard",option:htInitParam.option||this.getAttribute(elContainer,"data-option")||"{}",url:htInitParam.url||this.getAttribute(elContainer,"data-url")||sDocUrl,canonicalUrl:htInitParam.canonicalUrl||this.getAttribute(elContainer,"data-canonical-url")||"",title:htInitParam.title||this.getAttribute(elContainer,"data-title")||sDocTitle,returnUrl:htInitParam.returnUrl||this.getAttribute(elContainer,"data-return-url")||sDocUrl,preventShortUrl:(htInitParam.preventShortUrl||this.getAttribute(elContainer,"data-prevent-short-url")||"off")=="on",useShortUrl:(htInitParam.useShortUrl||this.getAttribute(elContainer,"data-use-short-url")||htOption.useShortUrl||"off")=="on",extraHTML:window.location.href.match(/https?:\/\/[\w\.]+\.((naver.com)|(grafolio.com))(\/.*)?/)?htInitParam.extraHTML||this.getAttribute(elContainer,"data-extra-html"):"",ogData:{ogTitle:this.getTagValue('meta[property="og:title"]',"content")||"",ogUrl:this.getTagValue('meta[property="og:url"]',"content")||"",ogImage:this.getTagValue('meta[property="og:image"]',"content")||"",ogDesc:this.getTagValue('meta[property="og:description"]',"content")||"",ogArticleAuthor:this.getTagValue('meta[property="og:article:author"]',"content")||"",ogArticleAuthorUrl:this.getTagValue('meta[property="og:og:article:author:url"]',"content")||"",ogArticleThumbnailUrl:this.getTagValue('meta[property="og:article:thumbnailUrl"]',"content")||""},me:{display:this.getSubParameter(htInitParam,"me","display")||this.getAttribute(elContainer,"data-me-display")||"on",displayInner:this.getSubParameter(htInitParam,"me","display")||this.getAttribute(elContainer,"data-me-display")||"off",feedInfo:this.getSubParameter(htInitParam,"me","feedInfo")||this.getAttribute(elContainer,"data-me-feed-info")||"",popupType:this.getSubParameter(htInitParam,"me","popupType")||this.getAttribute(elContainer,"data-me-popup-type")||"C",serviceId:this.getSubParameter(htInitParam,"me","serviceId")||this.getAttribute(elContainer,"data-me-service-id")||"",feedGroupId:this.getSubParameter(htInitParam,"me","feedGroupId")||this.getAttribute(elContainer,"data-me-feed-group-id")||"",feedGroupName:this.getSubParameter(htInitParam,"me","feedGroupName")||this.getAttribute(elContainer,"data-me-feed-group-name")||"",feedGroupUrl:this.getSubParameter(htInitParam,"me","feedGroupUrl")||this.getAttribute(elContainer,"data-me-feed-group-url")||"",feedId:this.getSubParameter(htInitParam,"me","feedId")||this.getAttribute(elContainer,"data-me-feed-id")||"",feedName:this.getSubParameter(htInitParam,"me","feedName")||this.getAttribute(elContainer,"data-me-feed-name")||"",feedType:this.getSubParameter(htInitParam,"me","feedType")||this.getAttribute(elContainer,"data-me-feed-type")||"",feedUrl:this.getSubParameter(htInitParam,"me","feedUrl")||this.getAttribute(elContainer,"data-me-feed-url")||"",selected:this.getSubParameter(htInitParam,"me","selected")||this.getAttribute(elContainer,"data-me-selected")||"",targetUrl:this.getSubParameter(htInitParam,"me","targetUrl")||this.getAttribute(elContainer,"data-me-target-url")||"/subscribe/applyFeedRelation.nhn",oninitialize:this.getSubParameter(htInitParam,"me","oninitialize")||this.getAttribute(elContainer,"data-me-oninitialize")||""},mail:{display:this.getSubParameter(htInitParam,"mail","display")||this.getAttribute(elContainer,"data-mail-display")||"on",url:this.getSubParameter(htInitParam,"mail","url")||this.getAttribute(elContainer,"data-mail-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"mail","title")||this.getAttribute(elContainer,"data-mail-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,body:this.getSubParameter(htInitParam,"mail","body")||this.getAttribute(elContainer,"data-mail-body")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,srvId:this.getSubParameter(htInitParam,"mail","srvId")||this.getAttribute(elContainer,"data-mail-srv-id")||"social",srvUrl:this.getSubParameter(htInitParam,"mail","srvUrl")||this.getAttribute(elContainer,"data-mail-srv-url")||""},blog:{display:this.getSubParameter(htInitParam,"blog","display")||this.getAttribute(elContainer,"data-blog-display")||"on",method:this.getSubParameter(htInitParam,"blog","method")||this.getAttribute(elContainer,"data-blog-method")||"post",url:this.getSubParameter(htInitParam,"blog","url")||this.getAttribute(elContainer,"data-blog-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"blog","title")||this.getAttribute(elContainer,"data-blog-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,blogId:this.getSubParameter(htInitParam,"blog","blogId")||this.getAttribute(elContainer,"data-blog-blog-id")||"naver",sourceType:this.getSubParameter(htInitParam,"blog","sourceType")||this.getAttribute(elContainer,"data-blog-source-type")||"111",sourceTitle:this.getSubParameter(htInitParam,"blog","sourceTitle")||this.getAttribute(elContainer,"data-blog-source-title")||"",sourceContents:this.getSubParameter(htInitParam,"blog","sourceContents")||this.getAttribute(elContainer,"data-blog-source-contents")||"",sourceForm:this.getSubParameter(htInitParam,"blog","sourceForm")||this.getAttribute(elContainer,"data-blog-source-form")||"",proxyUrl:this.getSubParameter(htInitParam,"blog","proxyUrl")||this.getAttribute(elContainer,"data-blog-proxy-url")||"",returnUrl:this.getSubParameter(htInitParam,"blog","returnUrl")||this.getAttribute(elContainer,"data-blog-return-url")||this.getAttribute(elContainer,"data-return-url")||htInitParam.returnUrl||sDocUrl},post:{display:this.getSubParameter(htInitParam,"post","display")||this.getAttribute(elContainer,"data-post-display")||"on",url:this.getSubParameter(htInitParam,"post","url")||this.getAttribute(elContainer,"data-post-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"post","title")||this.getAttribute(elContainer,"data-post-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,contents:this.getSubParameter(htInitParam,"post","contents")||this.getAttribute(elContainer,"data-post-contents")||"",returnUrl:this.getSubParameter(htInitParam,"post","returnUrl")||this.getAttribute(elContainer,"data-post-return-url")||this.getAttribute(elContainer,"data-return-url")||htInitParam.returnUrl||sDocUrl},cafe:{display:this.getSubParameter(htInitParam,"cafe","display")||this.getAttribute(elContainer,"data-cafe-display")||"on",method:this.getSubParameter(htInitParam,"cafe","method")||this.getAttribute(elContainer,"data-cafe-method")||"post",url:this.getSubParameter(htInitParam,"cafe","url")||this.getAttribute(elContainer,"data-cafe-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"cafe","title")||this.getAttribute(elContainer,"data-cafe-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,sourceType:this.getSubParameter(htInitParam,"cafe","sourceType")||this.getAttribute(elContainer,"data-cafe-source-type")||"111",sourceTitle:this.getSubParameter(htInitParam,"cafe","sourceTitle")||this.getAttribute(elContainer,"data-cafe-source-title")||"",sourceContents:this.getSubParameter(htInitParam,"cafe","sourceContents")||this.getAttribute(elContainer,"data-cafe-source-contents")||"",sourceForm:this.getSubParameter(htInitParam,"cafe","sourceForm")||this.getAttribute(elContainer,"data-cafe-source-form")||"",proxyUrl:this.getSubParameter(htInitParam,"cafe","proxyUrl")||this.getAttribute(elContainer,"data-cafe-proxy-url")||"",returnUrl:this.getSubParameter(htInitParam,"cafe","returnUrl")||this.getAttribute(elContainer,"data-cafe-return-url")||this.getAttribute(elContainer,"data-return-url")||htInitParam.returnUrl||sDocUrl},cafechat:{display:this.getSubParameter(htInitParam,"cafechat","display")||this.getAttribute(elContainer,"data-cafechat-display")||"off",url:this.getSubParameter(htInitParam,"cafechat","url")||this.getAttribute(elContainer,"data-cafechat-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,shareType:this.getSubParameter(htInitParam,"cafechat","shareType")||this.getAttribute(elContainer,"data-cafechat-share-type")||""},memo:{display:this.getSubParameter(htInitParam,"memo","display")||this.getAttribute(elContainer,"data-memo-display")||"on",url:this.getSubParameter(htInitParam,"memo","url")||this.getAttribute(elContainer,"data-memo-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"memo","title")||this.getAttribute(elContainer,"data-memo-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,returnUrl:this.getSubParameter(htInitParam,"memo","returnUrl")||this.getAttribute(elContainer,"data-memo-return-url")||this.getAttribute(elContainer,"data-return-url")||htInitParam.returnUrl||sDocUrl},calendar:{display:this.getSubParameter(htInitParam,"calendar","display")||this.getAttribute(elContainer,"data-calendar-display")||"on",url:this.getSubParameter(htInitParam,"calendar","url")||this.getAttribute(elContainer,"data-calendar-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"calendar","title")||this.getAttribute(elContainer,"data-calendar-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,returnUrl:this.getSubParameter(htInitParam,"calendar","returnUrl")||this.getAttribute(elContainer,"data-calendar-return-url")||this.getAttribute(elContainer,"data-return-url")||htInitParam.returnUrl||sDocUrl},bookmark:{display:this.getSubParameter(htInitParam,"bookmark","display")||this.getAttribute(elContainer,"data-bookmark-display")||"on",url:this.getSubParameter(htInitParam,"bookmark","url")||this.getAttribute(elContainer,"data-bookmark-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"bookmark","title")||this.getAttribute(elContainer,"data-bookmark-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle},copyurl:{display:this.getSubParameter(htInitParam,"copyurl","display")||this.getAttribute(elContainer,"data-copyurl-display")||"on",url:this.getSubParameter(htInitParam,"copyurl","url")||this.getAttribute(elContainer,"data-copyurl-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl},twitter:{display:this.getSubParameter(htInitParam,"twitter","display")||this.getAttribute(elContainer,"data-twitter-display")||"on",url:this.getSubParameter(htInitParam,"twitter","url")||this.getAttribute(elContainer,"data-twitter-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"twitter","title")||this.getAttribute(elContainer,"data-twitter-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle},facebook:{display:this.getSubParameter(htInitParam,"facebook","display")||this.getAttribute(elContainer,"data-facebook-display")||"on",url:this.getSubParameter(htInitParam,"facebook","url")||this.getAttribute(elContainer,"data-facebook-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"facebook","title")||this.getAttribute(elContainer,"data-facebook-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle},band:{display:this.getSubParameter(htInitParam,"band","display")||this.getAttribute(elContainer,"data-band-display")||"on",url:this.getSubParameter(htInitParam,"band","url")||this.getAttribute(elContainer,"data-band-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"band","title")||this.getAttribute(elContainer,"data-band-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle},line:{display:this.getSubParameter(htInitParam,"line","display")||this.getAttribute(elContainer,"data-line-display")||"on",url:this.getSubParameter(htInitParam,"line","url")||this.getAttribute(elContainer,"data-line-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"line","title")||this.getAttribute(elContainer,"data-line-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,imageUrl:this.getSubParameter(htInitParam,"line","imageUrl")||this.getAttribute(elContainer,"data-line-image-url")||this.getTagValue('meta[property="og:image"]',"content")||""},kakaotalk:{display:this.getSubParameter(htInitParam,"kakaotalk","display")||this.getAttribute(elContainer,"data-kakaotalk-display")||"on",url:this.getSubParameter(htInitParam,"kakaotalk","url")||this.getAttribute(elContainer,"data-kakaotalk-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"kakaotalk","title")||this.getAttribute(elContainer,"data-kakaotalk-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,imageUrl:this.getSubParameter(htInitParam,"kakaotalk","imageUrl")||this.getAttribute(elContainer,"data-kakaotalk-image-url")||this.getTagValue('meta[property="og:image"]',"content")||""},kakaostory:{display:this.getSubParameter(htInitParam,"kakaostory","display")||this.getAttribute(elContainer,"data-kakaostory-display")||"on",url:this.getSubParameter(htInitParam,"kakaostory","url")||this.getAttribute(elContainer,"data-kakaostory-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"kakaostory","title")||this.getAttribute(elContainer,"data-kakaostory-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle},pholar:{display:this.getSubParameter(htInitParam,"pholar","display")||this.getAttribute(elContainer,"data-pholar-display")||"on",url:this.getSubParameter(htInitParam,"pholar","url")||this.getAttribute(elContainer,"data-pholar-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"pholar","title")||this.getAttribute(elContainer,"data-pholar-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,contents:this.getSubParameter(htInitParam,"pholar","contents")||this.getAttribute(elContainer,"data-pholar-contents")||"",returnUrl:this.getSubParameter(htInitParam,"pholar","returnUrl")||this.getAttribute(elContainer,"data-pholar-return-url")||this.getAttribute(elContainer,"data-return-url")||htInitParam.returnUrl||sDocUrl},disco:{display:this.getSubParameter(htInitParam,"disco","display")||this.getAttribute(elContainer,"data-disco-display")||"on",url:this.getSubParameter(htInitParam,"disco","url")||this.getAttribute(elContainer,"data-disco-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl},weibo:{display:this.getSubParameter(htInitParam,"weibo","display")||this.getAttribute(elContainer,"data-weibo-display")||"off",url:this.getSubParameter(htInitParam,"weibo","url")||this.getAttribute(elContainer,"data-weibo-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"weibo","title")||this.getAttribute(elContainer,"data-weibo-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle,imageUrl:this.getSubParameter(htInitParam,"weibo","imageUrl")||this.getAttribute(elContainer,"data-weibo-image-url")||this.getTagValue('meta[property="og:image"]',"content")||""},reddit:{display:this.getSubParameter(htInitParam,"reddit","display")||this.getAttribute(elContainer,"data-reddit-display")||"off",url:this.getSubParameter(htInitParam,"reddit","url")||this.getAttribute(elContainer,"data-reddit-url")||this.getAttribute(elContainer,"data-url")||htInitParam.url||sDocUrl,title:this.getSubParameter(htInitParam,"reddit","title")||this.getAttribute(elContainer,"data-reddit-title")||this.getAttribute(elContainer,"data-title")||htInitParam.title||sDocTitle}};
return this.retreiveImageSize(htParameter.kakaotalk),htParameter
},retreiveImageSize:function(e){if(!e){return
}var d=e.imageUrl;
if(this.isNotEmpty(d)&&d.match(/^http.?:\/\//)){var f=new Image;
f.src=d,f.onload=function(){e.imageWidth=f.width,e.imageHeight=f.height
}}}},splugin.charset={_CHARSET:"utf-8"},splugin.variables={_DEPLOY_VARIABLE:"real",_SPLUGIN_CLASS:"naver-splugin",_SPLUGIN_ID:"splugin-id",_SPLUGIN_LAYER:"naver-splugin-wrap",_htAPI:{dev:{API000:(window.location.protocol=="https:"?"https://static.nid.naver.com":"http://gn.naver.com")+"/getLoginStatusLv2.nhn",API001:"http://dev.bookmark.naver.com/getRichMailTmpl.ajax?sourceUrl=",API101:(window.location.protocol=="https:"?"https://s.search.naver.com/n/me2do":"http://me2do.naver.com")+"/common/requestJsonpV2.nhn",API201:"http://relation.commcast.naver.com",API301:(window.location.protocol=="https:"?"https://s.search.naver.com/n/bookmark":"http://dev.bookmark.naver.com")+"/api/exist_v2.nhn",API302:(window.location.protocol=="https:"?"https://s.search.naver.com/n/bookmark":"http://dev.bookmark.naver.com")+"/apiSave.nhn",API303:(window.location.protocol=="https:"?"https://s.search.naver.com/n/bookmark":"http://dev.bookmark.naver.com")+"/apiDelete.nhn",API501:"http://mail.naver.com/write/tmpl",API502:"http://dev.cafe.naver.com/CafeScrapView.nhn",API503:"http://dev.blog.naver.com/ScrapForm.nhn",API504:"http://plugin.me2day.net/v1/me2post/create_post_form.nhn",API505:"https://www.facebook.com/sharer/sharer.php",API506:"https://twitter.com/intent/tweet",API507:"http://yozm.daum.net/api/popup/prePost",API508:"http://memo.naver.com/plugin/view.nhn",API509:"https://calendar.naver.com/cplugin.nhn",API510:"http://webmsg.naver.com/api/send_url.php",API511:"http://www.band.us/plugin/share",API512:"http://post.naver.com/post/share.nhn",API513:"http://dev.pholar.co/spi/rephol",API514:"http://service.weibo.com/share/share.php",API515:"https://reddit.com/submit"},real:{API000:(window.location.protocol=="https:"?"https://static.nid.naver.com":"http://gn.naver.com")+"/getLoginStatusLv2.nhn",API001:"http://bookmark.naver.com/getRichMailTmpl.ajax?sourceUrl=",API101:(window.location.protocol=="https:"?"https://s.search.naver.com/n/me2do":"http://me2do.naver.com")+"/common/requestJsonpV2.nhn",API201:"http://relation.commcast.naver.com",API301:(window.location.protocol=="https:"?"https://s.search.naver.com/n/bookmark":"http://bookmark.naver.com")+"/api/exist_v2.nhn",API302:(window.location.protocol=="https:"?"https://s.search.naver.com/n/bookmark":"http://bookmark.naver.com")+"/apiSave.nhn",API303:(window.location.protocol=="https:"?"https://s.search.naver.com/n/bookmark":"http://bookmark.naver.com")+"/apiDelete.nhn",API501:"http://mail.naver.com/write/tmpl",API502:"http://cafe.naver.com/CafeScrapView.nhn",API503:"http://blog.naver.com/ScrapForm.nhn",API504:"http://plugin.me2day.net/v1/me2post/create_post_form.nhn",API505:"https://www.facebook.com/sharer/sharer.php",API506:"https://twitter.com/intent/tweet",API507:"http://yozm.daum.net/api/popup/prePost",API508:"http://memo.naver.com/plugin/view.nhn",API509:"https://calendar.naver.com/cplugin.nhn",API510:"http://webmsg.naver.com/api/send_url.php",API511:"http://www.band.us/plugin/share",API512:"http://post.naver.com/post/share.nhn",API513:"http://www.pholar.co/spi/rephol",API514:"http://service.weibo.com/share/share.php",API515:"https://reddit.com/submit"}},_htClickLog:{me:{baseUrl:"http://social.naver.com/v/click",key:"pc.subs"},mecount:{baseUrl:"http://social.naver.com/v/click",key:"pc.subs.count"},bookmark:{baseUrl:"http://social.naver.com/v/click",key:"pc.bmk"},me2:{baseUrl:"http://social.naver.com/v/click",key:"pc.me2"},me2count:{baseUrl:"http://social.naver.com/v/click",key:"pc.me2.count"},release:{baseUrl:"http://social.naver.com/v/click",key:"pc.snd"},copyurl:{baseUrl:"http://social.naver.com/v/click",key:"pc.cpurl"},mail:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndmail"},blog:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndblog"},post:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndpost"},memo:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndmemo"},calendar:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndclnd"},cafe:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndcafe"},me2post:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndme2"},facebook:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndfb"},twitter:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndtw"},yozm:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndyz"},sms:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndsms"},band:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndband"},pholar:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndpholar"},melink:{baseUrl:"http://social.naver.com/v/click",key:"pc.melnk"},bmklink:{baseUrl:"http://social.naver.com/v/click",key:"pc.bmklnk"},event:{baseUrl:"http://social.naver.com/v/click",key:"pc.evt"},weibo:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndwei"},reddit:{baseUrl:"http://social.naver.com/v/click",key:"pc.sndred"}},_htFinishLog:{me:{baseUrl:"http://social.naver.com/v/finish",key:"pc.subs"},bookmark:{baseUrl:"http://social.naver.com/v/finish",key:"pc.bmk"},me2:{baseUrl:"http://social.naver.com/v/finish",key:"pc.m2"},mail:{baseUrl:"http://social.naver.com/v/finish",key:"pc.sndmail"},blog:{baseUrl:"http://social.naver.com/v/finish",key:"pc.sndblog"},cafe:{baseUrl:"http://social.naver.com/v/finish",key:"pc.sndcafe"},post:{baseUrl:"http://social.naver.com/v/finish",key:"pc.sndpost"},pholar:{baseUrl:"http://social.naver.com/v/finish",key:"pc.sndpholar"},me2post:{baseUrl:"http://social.naver.com/v/finish",key:"pc.sndme2"}},_CSS:{"standard_utf-8":"http://spi.naver.net/css/20171113/spi_standard_20171113.css","standard_euc-kr":"http://spi.naver.net/css/20171113/spi_standard_euckr_20171113.css","standard_utf-8_https":"https://ssl.pstatic.net/spi/css/20171113/spi_standard_https_20171113.css","standard_euc-k_https":"https://ssl.pstatic.net/spi/css/20171113/spi_standard_euckr_https_20171113.css"},_sSpiDomain:{dev:{net:"http://dev.spi.naver.net",com:"http://dev.spi.naver.com"},real:{net:window.location.protocol=="https:"?"https://ssl.pstatic.net/spi":"http://spi.naver.net",com:"http://spi.naver.com"}},_sLangCode:{en_us:"en_US",ja_jp:"ja_JP",ko_kr_euckr:"ko_EUC-KR",ko_kr:"ko_KR",zh_cn:"zh_CN",zh_tw:"zh_TW"},_share:{logUrl:{dev:(window.location.protocol=="https:"?"https:":"http:")+"//dev.share.naver.com/spi/v1/api/shareLog",real:(window.location.protocol=="https:"?"https:":"http:")+"//api.share.naver.com/spi/v1/api/shareLog"},device:{pc:"pc",mobile:"mobile"},type:{click:"click",finish:"finish"},button:{me:"me",bookmark:"bookmark",release:"release",copyurl:"copyurl",mail:"mail",blog:"blog",memo:"memo",cafe:"cafe",facebook:"facebook",twitter:"twitter",band:"band",pholar:"pholar",melink:"melink",bmklink:"bmklink",weibo:"weibo",reddit:"reddit"},refererUrl:{dev:(window.location.protocol=="https:"?"https:":"http:")+"//dev.share.naver.com/spi/v1/api/invalidRefererLog",real:(window.location.protocol=="https:"?"https:":"http:")+"//api.share.naver.com/spi/v1/api/invalidRefererLog"}},getDeployVariable:function(){return this._DEPLOY_VARIABLE.indexOf("depoly_profile")<0?"real":"dev"
}},splugin.locale={lang:"ko",button:{me:{text:"구독",title:"네이버me 구독하기"},band:{text:"밴드",title:"밴드보내기"},blog:{text:"블로그",title:"블로그 보내기"},post:{text:"포스트",title:"포스트 보내기"},pholar:{text:"폴라",title:"폴라 보내기"},twitter:{text:"트위터",title:"트윗하기"},bookmark:{text:"북마크",title:"북마크로 보내기",loading:"로딩중"},copyurl:{text:"URL 복사",title:"URL복사"},cafe:{text:"카페",title:"카페 보내기"},memo:{text:"메모",title:"메모 보내기"},mail:{text:"메일",title:"메일 보내기"},calendar:{text:"일정",title:"일정 보내기"},facebook:{text:"페이스북",title:"페이스북 보내기"},weibo:{text:"웨이보",title:"웨이보 보내기"},reddit:{text:"레딧",title:"레딧 보내기"},release:{text:"보내기",title:"기타 보내기 펼치기"}},message:{close:"닫기",sourcePrefix:"출처 : ",source:"네이버",me:'이 __feed_info__ 마음에 드셨다면<br><a href="http://me.naver.com/" target="_blank" class="_ly_pop_lnk _ly_pop spi_impact">네이버me</a>에서 편하게 받아보세요.',bookmark:{close:"북마크 레이어 닫기",success:{text:"북마크 되었습니다.",link:"네이버 북마크 가기"},confirm:{text1:"현재 북마크 되어 있습니다.",text2:"북마크를 해제하시겠습니까?",btn_yes:"예",btn_no:"아니오"},error:"서버 접속이 원활하지 않습니다.<br> 잠시 후 다시 시도해 주십시오.",maintanance:"북마크 서비스 점검 중으로,<br>현재 북마크 읽기만 가능하오니<br>이용에 참고해 주시기 바랍니다."},copyurl:{success:"주소가 복사되었습니다. <br>원하는 곳에 붙여넣기(Ctrl+V)해주세요.",etc:"아래의 URL을 복사(Ctrl+C)하여\n원하는 곳에 붙여넣기(Ctrl+V)하세요.",close:"URL복사 레이어 닫기"}}},splugin.instance={};
!function(){var q={NAVIGATION:'<li class="__spi_navi spi_lnk_navi"><a href="#" title="내비게이션으로 보내기" class="__spi_navi" target="_blank"><span class="__spi_navi"></span><strong class="__spi_navi">내비게이션</strong></a></li>',SMS:'<li class="__spi_sms spi_lnk_sms"><a href="#" title="SMS 보내기" class="__spi_sms" target="_blank"><span class="__spi_sms"></span><strong class="__spi_sms">SMS</strong></a></li>'};
var m={evKey:"map",serviceName:"지도",sourceName:"",style:"unity"};
var j={source:"",tags:[""],style:"unity",me:{display:"off"},me2post:{display:"off"},me2day:{display:"off"},mail:{display:"on"},cafe:{display:"on",sourceType:"75",sourceTitle:"지도",sourceForm:2},blog:{display:"on",sourceType:"75",sourceTitle:"지도",sourceForm:2},bookmark:{display:"on"},calendar:{display:"off"},pholar:{display:"on"},band:{display:"on"},copyurl:{display:"on"},navi:{display:"off"},sms:{display:"on"}};
var y=null,c="",A={},D=function(E){return $(E).attr("splugin-id")+""
},t={onClick:function(F){var E=A[c];
if(E){E._onClickItem(F)
}},onShow:function(F){c=D(F);
var E=A[c];
if(E){E._onShowLayer(F)
}},onHide:function(){var E=A[c];
if(E){E._onHideLayer()
}}};
iron.ns("nhn.map").SocialPlugin=iron.Class(nhn.map.Dispatcher,{initialize:function(G,F){this._id=G;
this._options=$.extend(true,{urlEncryption:true},j,F);
this.setOptions(this._options);
var E=y;
if(!E){E=SocialPlugIn_Core($.extend({},m,{onClick:t.onClick,onShow:t.onShow,onHide:t.onHide}));
y=E;
window.__splugin=E
}this._plugin=E
},getID:function(){return this._id
},setExporter:function(E){this._exporter=E||function(){}
},setController:function(E){this._controller=E
},getController:function(){return this._controller
},setOptions:function(E){var F=$.extend(true,{},E);
if("urlEncryption" in F){this._urlEncryption=!!F.urlEncryption;
delete F.urlEncryption
}if(F.controller){this.setController(F.controller);
delete F.controller
}if(F.acode){this.setAreaCode(F.acode);
delete F.acode
}if(F.adcrData){this.setAdcrData(F.adcrData);
delete F.adcrData
}F=d(F);
this._options=F;
return F
},getOptions:function(){return this._options
},getSocialMarkupStr:function(E){return'<a href="#" class="naver-splugin _spi_btn_release" data-style="unity">보내기</a>'
},_createButton:function(G){var E=$(G),F=E.find(".naver-splugin");
if(F.length){return F[0]
}F=$(this.getSocialMarkupStr());
E.empty().append(F);
F.on("click",this._onClickBtn.bind(this));
return F[0]
},init:function(E){this._plugin.init(E)
},update:function(F,E){this._plugin.update(F,E)
},drawTo:function(H,J){var K=$("._share",H);
if(K.length===0){return
}K.enableSelection();
var E=this.getController();
if(E){var G=E.getSocialExportItem(),I;
if(G){if(!J.__dontExtend){I=this._getExportData(G)
}else{I=G
}J=$.extend(true,{},J,I)
}}var L=J.mapUrl;
this.setOptions(J);
if(L&&this._urlEncryption){var F=this;
nhn.map.service.EncryptParamsDAO.request(L,function(M){var P=M,N=F._getOriginUrl(L)+P;
var O=function(Q){Q=Q.replace(/(local|dev|test|stg).map.naver.com/g,"map.naver.com");
if(F._options.__smsUrl){F._options.__smsUrl=N
}F._options.mapUrl=N;
F._options.url=N;
for(var S in F._options){var R=F._options[S];
if(R&&typeof(R)==="object"&&typeof(R.url)!=="undefined"){F._options[S]["url"]=Q
}}F._afterDrawTo(K)
};
O(N)
},function(){nhn.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.")
})
}else{this._afterDrawTo(K)
}},_afterDrawTo:function(F){var E=this._createButton(F),H=this._options;
this.update(E,H);
var G=D(E);
if(this._instanceId){delete A[this._instanceId]
}this._instanceId=G;
A[G]=this
},_getOriginUrl:function(E){return E.substring(0,E.indexOf("?")+1)
},hide:function(){},destroy:function(){this.kill()
},kill:function(){if(this._instanceId){delete A[this._instanceId]
}this._plugin.kill()
},close:function(){this.hide()
},hideLayer:function(){this._layer&&this._layer.hide()
},closeCopyComplete:function(){$("._spi_ly_copyurl_ok, ._ly_bmk_ok").hide()
},_delayCloseLayer:function(){var E=this;
window.clearTimeout(this._delayCloseLayerTimer);
this._delayCloseLayerTimer=window.setTimeout(function(){E.closeCopyComplete();
E._plugin.hide()
},2000)
},isMenuOpen:function(){return this._layer&&this._layer.is(":visible")?true:false
},_customize:function(I){var H=this._options,F=I.find("._spi_release_ly"),E=F.find("li.spi_lnk_copyurl");
if(H.navi.display===true||H.navi.display==="on"){var G=$(q.NAVIGATION);
E.before(G);
G.on("click","a",this._onClickCustomItem.bind(this,"navi"))
}if(H.sms.display===true||H.sms.display==="on"){var J=$(q.SMS);
E.before(J);
J.on("click","a",this._onClickCustomItem.bind(this,"sms"))
}var K=this;
I.find("li._spi_mail > a").off().on("click.navermaps_mail",function(L){L.stopPropagation();
L.preventDefault();
K._onClickCustomItem("mail",L)
});
I.find("li._spi_bookmark > a").off().on("click.navermaps_bookmark",function(L){K._clickedItem="bookmark"
})
},_onClickBtn:function(G){var F=G.target;
window.clearTimeout(this._delayCloseLayerTimer);
var E=this.isMenuOpen();
if($(F).hasClass("_spi_btn_release")){if(this._acode){this._sendNClick(G,(E?".sendclose":".sendopen"))
}this._sendADCR("sum_send")
}this.dispatch("release_selected",{target:F,event:G.originalEvent})
},_onClickItem:function(E){this._clickedItem=E
},_onShowLayer:function(F){var E=D(F),G=$("#naver-splugin-wrap-"+E);
if(G.length===0){return
}this._customize(G);
this._layer=G;
G.off(".navermaps").on("click.navermaps","._spi_release_ly > li > a",this._onClickCustomItem.bind(this,"auto")).on("click.navermaps",function(H){H.stopPropagation()
})
},_logOnInfowindow:function(H,G){var I=$(G.currentTarget).closest("._infolay_frame"),E="to_navigation",F=".sendtocar";
if(H==="sms"){E="to_sms";
F=".sendtosms"
}if(I.length){E="sum_"+E
}this._sendADCR(E);
this._sendNClick(G,F)
},_onClickCustomItem:function(H,J){if(H!=="auto"){this._clickedItem=H
}var K=this._clickedItem,F=K==="sms",I=(K==="mail"||K==="navi"),G=(K==="navi"||K==="sms"),E=K==="copyurl";
if(G){J.preventDefault();
J.stopPropagation();
this._logOnInfowindow(K,J)
}if(F){this.openSMS()
}if(E){this._delayCloseLayer()
}if(I){this._doExport(K,J)
}if(I||F){this.hideLayer()
}this.dispatch("menu_selected",{menu:K||"",event:J.originalEvent})
},_doExport:function(H,G){var E=this.getController();
if(!E){return
}var F=E.getSocialExportItem();
if(!F){return
}switch(H){case"mail":case"navi":if(F){this._customPopup(H,F)
}break
}},_customPopup:function(F,E){this._exportPopup(F,E)
},_exportPopup:function(){},_getExportData:function(){},_onHideLayer:function(){delete this._layer;
delete this._clickedItem
},openSMS:function(F){var E=this.getOptions(),H=F||E.sms,G=H.url||E.url||E.mapUrl;
f(G,function(P){if(!P){return
}var I="_smsPostPopup",Q="_smsPopupForm",J=$("#"+Q),O="[네이버지도] "+H.title,M=nhn.map.Util;
if(M.getByteLength(O+P)>56){O=M.ellipsis(O,64-M.getByteLength(P),"...")
}if(J.length===0){var N=nhn.map.SocialPlugin.CONST.variables,K=N?N._htAPI.real.API510:"http://webmsg.naver.com/api/send_url.php";
J=$('<form id="'+Q+'" target="'+I+'" method="GET" action="'+K+'"></form>')
}J.append($('<input type="hidden" name="NHN_CODE" value="navermap" />'));
J.append($('<input type="hidden" name="SMSID" value="ESG00070" />'));
J.append($('<input type="hidden" name="MMSID" value="EMG00051" />'));
J.append($('<input type="hidden" name="MSG_CONTENT" value="'+O+'" />'));
J.append($('<input type="hidden" name="MSG_URL" value="'+P+'" />'));
J.appendTo(document.body);
window.open("about:blank",I,"width=540, height=520, location=no,resize=no,scrollbars=no,resizable=no");
var L=document.charset;
J[0].charset="utf-8";
J.submit();
J[0].charset=L;
J.remove();
J=null
})
},setAdcrData:function(E){if(!(E&&E.x1&&E.x2)){this._adcrData=null
}else{this._adcrData={x1:E.x1,x2:E.x2}
}},setAreaCode:function(E){this._acode=E
},_getAcode:function(F){var G=$(F).closest('._share[data-type="AD"]'),E=this._acode||"";
if(G.length){E="adv"
}return E
},_sendNClick:function(H,F){var G=H.target,E=this._getAcode(G);
if(!E||!nhn.map.LogClick){return
}nhn.map.LogClick({event:H.originalEvent,element:G,acode:E+F})
},_sendADCR:function(E){if(!this._adcrData||!nhn.map.service.ADCR){return
}nhn.map.service.ADCR.log({x:this._adcrData.x2,p:E})
}});
nhn.map.SocialPlugin.CONST=window.splugin||{};
function f(J,H){var F=nhn.map.SocialPlugin.CONST.common,L=nhn.map.SocialPlugin.CONST.variables;
if(!F){K&&K(J);
return
}var K=H||function(){},I=L._htAPI.real.API101,G=J,E=J.match(/^https?:\/\/([a-z0-9-_\.]*)[\/\?]/i);
if((E&&E[1].indexOf("naver.me")>=0)){K(J);
return
}F.requestJsonp(I,{svcCode:"0022",url:J},function(N){var M=N;
switch(M.code){case"200":G=M.result.url;
break;
case"500":alert("성능 개선을 위한 임시점검 중입니다.");
break;
default:alert("단축URL 생성오류("+M.code+"+");
break
}K(G)
})
}nhn.map.SocialPlugin.requestShortUrl=f;
function b(E){if(!E){return null
}return[E["do"],E.gu,E.dong].join(" ")
}function p(F,E){if(E){F.push(E)
}}function B(F,E){if(E){F.push(E+"\n")
}}function z(H){var G=[],F,E;
if(H&&(Array.isArray(H)===false)){H=H.split(">");
F=H.length;
if(F===1){return H
}for(E=F-2;
E<F;
E++){G.push($.trim(H[E]))
}}else{G=H
}return G
}function r(I,G){var J=I.display||I.name,E=["네이버 지도",J],H,F;
switch(G){case"drt":case"poi":if(I.beginAddress&&I.destAddress){E=[J,I.beginAddress,I.destAddress]
}else{H=z(I.category);
if(H){E=E.concat(H)
}}break;
case"BUS_STATION":F=I.displayID;
E.push(F);
E.push("버스정류장");
break;
case"BUS":E.push(" 버스 노선");
break;
case"SUBWAY_ROUTE":E.push(" 지하철 노선");
break;
case"drive":case"bicycle":case"walk":E.push(" 길찾기");
break
}return E
}function w(V,U){var F=U||"memo",H=V.type,R=V.display||V.name,M=V.tel,J=V.addressRoad||V.address,L=V.displayID,P=V.beginAddress,G=V.destAddress,I=V.distance,W=[],T=[];
if(H==="drive"){R="자동차 길찾기"
}else{if(H==="bicycle"){R="자전거 길찾기"
}else{if(H==="walk"){R="도보 길찾기"
}else{if(H==="publicTransit"){R="대중교통 길찾기"
}}}}switch(H){case"drt":B(W,R);
B(W," ");
B(W,J);
B(W,M);
p(T,R);
break;
case"poi":B(W,R);
B(W,M);
if(P&&G){p(W,P);
p(W," ~ ");
p(W,G);
p(W," ");
p(W," 총거리 ");
p(W,I);
B(W,"km")
}p(T,R);
break;
case"BUS_STATION":p(W,R);
if(L){L="("+L+")";
B(W,L)
}else{W.push("\n")
}p(W,b(J));
p(T,R);
p(T,L);
break;
case"BUS":p(W,R);
B(W," 버스");
if(V.busStartPoint&&V.busEndPoint){W.push(V.busStartPoint+" ↔ "+V.busEndPoint)
}if(V.busFirstTime&&V.busFirstTime!=="-"){W.push("\n");
W.push("첫차 "+V.busFirstTime);
W.push(" ")
}if(V.busLastTime&&V.busLastTime!=="-"){W.push("막차 "+V.busLastTime);
W.push(" ")
}if(V.busIntervalTime){p(W,"배차간격 ");
p(W,V.busIntervalTime);
if(F==="band"){B(W,"분 ")
}else{p(W,"분 ")
}}p(T,R);
p(T," 버스 노선");
break;
case"SUBWAY_ROUTE":p(W,"지하철 노선");
W.push("\n");
W.push("\n");
p(W,R);
p(T,R);
break;
case"drive":case"bicycle":case"walk":var N=V.summary||V.result.summary;
p(W,((N.start&&N.start.address)||(N.startPoint.name))+" → ");
N.waypoints&&N.waypoints.forEach(function(X){var Y=(X.address||X.name);
if((U==="memo"||U==="pholar"||U==="band")&&Y.length>10){Y=Y.substring(0,5)+"..."
}p(W,"("+Y+") → ")
});
p(W,((N.end&&N.end.address)||(N.endPoint.name))+"\n\n");
p(T,W.join(""));
W.unshift(R+"\n\n");
break;
case"publicTransit":p(W,V.item.StartTitle+" → ");
p(W,V.item.EndTitle+"\n\n");
p(T,W.join(""));
W.unshift(R+"\n\n");
break
}var K=$.trim(W.join("")),S=$.trim(R),O=$.trim(W.slice(2).join("")),E=$.trim(V.mapUrl),Q=$.trim(T.join(""));
if(F==="pholar"){O=$.trim(O.replace(/\n/g," "))
}return{title:K,displayTitle:S,contents:O,mapUrl:E,linkDisplayText:Q}
}function u(G,E){var J="",F=[],I=E.linkDisplayText,H=E.displayTitle;
switch(G){case"drive":case"bicycle":case"walk":case"publicTransit":F=I.split(" → ");
J=["‘",F[0],"’에서 ‘",F[F.length-1],"’까지 ",H," 검색 결과"].join("");
break;
case"SUBWAY_ROUTE":F=I.split(" → ");
J=["‘",F[0],"’에서 ‘",F[F.length-1],"’까지 지하철 노선 검색 결과"].join("");
break;
default:J=I;
break
}return J
}function l(G){var F=G.type,E=w(G,"blog");
E.title=u(F,E);
return E
}function e(F){var E=F.type,G=w(F,"cafe");
G.title=u(E,G);
return G
}function C(I){var H=I.type,J=I.display||I.name,G=I.displayID,K=[];
switch(H){case"drt":case"poi":p(K,J);
break;
case"BUS_STATION":p(K,J);
if(G){G="("+G+")";
p(" ");
p(K,G)
}break;
case"BUS":p(K,J);
p(K," 버스");
break;
case"SUBWAY_ROUTE":var F=I.mapUrl.split("?")[1];
I.mapUrl="https://m.map.naver.com/subway/subwayPath.nhn?"+F;
p(K,J);
break;
case"drive":var E=I.summary||I.result.summary;
p(K,((E.start&&E.start.address)||(E.startPoint.name))+"→");
E.waypoints&&E.waypoints.forEach(function(L){p(K,"("+(L.address||L.name)+")→")
});
p(K,((E.end&&E.end.address)||(E.endPoint.name)));
break;
case"publicTransit":p(K,I.item.StartTitle+"→");
p(K,I.item.EndTitle);
break
}return{title:K.join(""),mapUrl:I.__smsUrl||I.mapUrl}
}function o(H){var G=H.type,F=r(H,G),E=w(H,"");
E.tags=F;
E.title="<"+E.displayTitle+"> "+E.linkDisplayText;
E.contents="";
return E
}function g(F){var E=w(F);
return{title:E.linkDisplayText,mapUrl:E.mapUrl}
}function i(E){var F=w(E,"pholar");
F.title=F.displayTitle;
return F
}function x(E){return w(E)
}function v(E){return w(E)
}function n(E){return w(E,"band")
}function h(E){return w(E,"memo")
}var s={blog:l,cafe:e,post:o,bookmark:g,pholar:i,band:n,twitter:x,facebook:v,memo:h,sms:C};
function d(H){var E=H.mapUrl,G=H.display;
H.url=E;
var F=["blog","cafe","post","bookmark","pholar","mail","band","calendar","twitter","facebook","memo","navi","sms"];
H.useShortUrl=true;
F.forEach(function(K){if(s[K]){var J=s[K](H),I={url:J.mapUrl,linkDisplayText:J.linkDisplayText,title:J.title,contents:J.contents};
if(H[K]){H[K]=$.extend(H[K],I)
}else{H[K]=I
}if(K==="cafe"){H[K]=$.extend(H[K],j.cafe)
}if(K==="blog"){H[K]=$.extend(H[K],j.blog)
}}else{if(H[K]){H[K]=$.extend(H[K],{url:E,title:G})
}else{H[K]={url:E,title:G}
}}});
return H
}}();
iron.ns("nhn.map.service").SocialPluginManager=iron.Class({_handlerPool:null,_counter:0,initialize:function(){this._handlerPool={}
},createHandler:function(b){var d="spi_"+(this._counter++),c=new nhn.map.SocialPlugin(d,b||{});
c._exportPopup=this._exportInfoWindow.bind(this);
c._getExportData=this._getSpluginExportData.bind(this);
this._handlerPool[d]=c;
return c
},terminateHandler:function(b){var c=b.getID();
b.destroy();
delete this._handlerPool[c]
},_exportInfoWindow:function(c,b){this.$sharing().exportInfoWindow(c,b)
},_getSpluginExportData:function(b){return this.$sharing().getSpluginExportData(b)
},closeLayer:function(){this.closeAllLayer()
},closeAllLayer:function(){var b=null;
for(b in this._handlerPool){this._handlerPool[b].close()
}},closeLayerExceptFor:function(b){var c=b.getID(),d=null;
for(d in this._handlerPool){if(c!==d){this._handlerPool[d].close()
}}}});
iron.ns("nhn.map").Bridge=iron.Class({inherit:nhn.map.Dispatcher},{_fire:function(c,b){this.dispatch(c,b||{})
},addMethod:function(b,c){this.oApp.exec("ADD_APP_PROPERTY",[b,c])
},fireMessage:function(c){var b=Array.prototype.slice.call(arguments,1);
this.oApp.exec(c,b)
},$BEFORE_MSG_APP_READY:function(){this._fire("BEFORE_MSG_APP_READY")
},$ON_MSG_APP_READY:function(){this._fire("MSG_APP_READY")
},$AFTER_MSG_APP_READY:function(){this._fire("AFTER_MSG_APP_READY")
},$ON_KEY_ESC_DONE:function(){this._fire("KEY_ESC_DONE")
},$ON_CHECK_LOGIN:function(c,b){this._fire("CHECK_LOGIN",{successCallback:c,failureCallback:b})
},$ON_CHECK_LOGIN_IFNOT_OPENPOPUP:function(c,b){this._fire("CHECK_LOGIN_IFNOT_OPENPOPUP",{callback:c,loginType:b})
},$ON_REFRESH_LOGIN_INFO:function(){this._fire("REFRESH_LOGIN_INFO")
},$ON_COMPLETE_LOGIN_DONE:function(c,b){this._fire("COMPLETE_LOGIN_DONE",{userID:c,email:b})
},$ON_COMPLETE_LOGOUT_DONE:function(){this._fire("COMPLETE_LOGOUT_DONE")
},$ON_BLOCK_LOGIN_POPUP:function(b){this._fire("BLOCK_LOGIN_POPUP",{loginType:b})
},$ON_ADD_ROUTE_COURSE_BOOKMARK:function(c,b){this._fire("ADD_ROUTE_COURSE_BOOKMARK",{elTarget:c,routeData:b})
},$ON_REMOVE_ROUTE_COURSE_BOOKMARK:function(b){this._fire("REMOVE_ROUTE_COURSE_BOOKMARK",{bookmarkKey:b})
},$ON_MARK_ROUTE_COURSE_BOOKMARK:function(){this._fire("MARK_ROUTE_COURSE_BOOKMARK")
},$ON_NORMAL_MARKER_MOUSE_OVER_DONE:function(b){this._fire("NORMAL_MARKER_MOUSE_OVER_DONE",{marker:b})
},$ON_DUPLICATION_MARKER_MOUSE_OVER_DONE:function(b,c){this._fire("DUPLICATION_MARKER_MOUSE_OVER_DONE",{marker:b,duplicatedMarkers:c})
},$ON_BLUR_MARKER:function(b){this._fire("BLUR_MARKER",{marker:b})
},$ON_CLOSE_INFOWINDOW:function(){this._fire("CLOSE_INFOWINDOW")
},$ON_OPEN_MARKER_DUP_LAYER:function(){this._fire("OPEN_MARKER_DUP_LAYER")
},$ON_UNSELECT_TRAFFIC_MARKER:function(){this._fire("UNSELECT_TRAFFIC_MARKER")
},$ON_SEND_NCLICK:function(b){this._fire("SEND_NCLICK",{logData:b})
},openLabelLayer:function(b,d,c){this.oApp.exec("OPEN_LABEL_LAYER",[b,d,c])
},closeLabelLayer:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},restoreOpenmapTheme:function(c){var b=this.oApp.getContextInstance("theme_stage_bridge");
b.restoreThemeViewerByURL(c)
},restoreOpenmapHome:function(){var b=this.oApp.getContextInstance("theme_stage_bridge");
b.openStage("THEME_HOME",null,{isFromURLCopy:true})
},activateCCTV:function(){this._fire("activate_cctv")
},deactivateCCTV:function(){this._fire("deactivate_cctv")
},hideMarkerLabel:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},getMarkerById:function(b){return this.oApp.getMarkerById(b)
},isThemeEditing:function(){var b=this.oApp.getContextInstance("theme_stage_bridge");
return b?b.isEditingTheme():false
},addPolyMarker:function(b){this.oApp.exec("ADD_CREATED_MARKER",[b]);
this.oApp.exec("DRAW_POLY_MARKER_LINE",[b])
},openSubwayRoute:function(b){this.oApp.exec("SHOW_SUBWAY_STATION_LAYER",[{stationID:b}])
},gatherURLQuery:function(c,b){this.oApp.exec("GATHER_URL_QUERY",[c,b])
},gatherMapData:function(b){this.oApp.exec("GATHER_MAP_DATA",[b])
},showLightBox:function(b,c){this.$dialog().showDialog(b,c)
},showCommonLayer:function(b){this.oApp.exec("SHOW_FOGGY",["GRAY",b.elLightBox,null,null,b.baseEl])
},hideCommonLayer:function(b){this.oApp.exec("HIDE_FOGGY",[b])
},hideLightBox:function(){this.$dialog().hideDialog()
},selectMarker:function(b){this.oApp.exec("SELECT_MARKER",[b])
},focusMarker:function(b){this.oApp.exec("FOCUS_MARKER",[b])
},blurMarker:function(b){this.oApp.exec("BLUR_MARKER",[b])
},registerMapType:function(b){this.oApp.exec("REGISTER_MAP_TYPE",[b])
},unregisterMapType:function(b){this.oApp.exec("UNREGISTER_MAP_TYPE",[b])
},$ON_HIDE_OVERLAP_CCTV:function(){this.$AreaMarkerManager().hideOverlapCctv()
},$ON_CLEAR_AREA_MARKER:function(b){this.$AreaMarkerManager().clearAreaMarker(b)
},$ON_CLOSE_INFOWINDOW_DONE:function(){this._fire("close_infowindow_done")
},closeInfoWindowDone:function(){this.oApp.exec("CLOSE_INFOWINDOW_DONE")
},$ON_ADD_CCTV_MARKER:function(c,e,b,d){this.$Cctv().addCctvMarker(c,e,b,d)
},$ON_SHOW_CCTV_LAYER:function(b,d,c){this.$Cctv().showCctvLayer(b,d,c)
},$ON_HIDE_CCTV_LAYER:function(b){this.$Cctv().hideCctvLayer(b)
},$ON_SELECT_MARKER_DONE:function(b){this._fire("select_marker_done",b)
},$ON_UNSELECT_MARKER_DONE:function(){this._fire("unselect_marker_done")
}});
iron.ns("nhn.map.service").AbstractOverlay=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(b,c){this.options=$.extend(this.options||{},c);
this.setPoint(b);
this._prepareDOM()
},_prepareDOM:function(){throw new Error("Interface '_prepareDOM' should be implemented.")
},setPoint:function(b){this._point=b;
this.redraw()
},getPoint:function(){return this._point
},setOffset:function(b){this._offset=b
},getOffset:function(){return this._offset||{x:0,y:0}
},getElement:function(){return this._el[0]
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},onadd:function(b){if(b){this._pane=b
}this.redraw()
},onremove:function(){var b=this._pane;
if(!b){return
}b.removeOverlay(this);
this.dispatch("remove")
},redraw:function(){if(!this._pane||!this.getPoint()){return
}var e=this._pane,b=this.getPoint(),c=this.getOffset(),d;
d=e.fromPointToOffset(b.toInner());
d.x+=Math.floor(c.x);
d.y+=Math.floor(c.y);
this._el.css({left:d.x,top:d.y});
this.dispatch("redraw")
},destroy:function(){if(!this._pane){return
}this._pane.removeOverlay(this);
this._el.remove();
delete this._pane;
this.dispatch("destroy")
}});
(function(){var c=iron.ns("nhn.map"),b=c.Const,d={OPEN:"openhand",CLOSE:"closedhand",POINTER:"pointer"};
iron.ns("nhn.map.service").State=iron.Class({inherit:c.Dispatcher},{initialize:function(){this._state=b.STATE_NONE
},setState:function(e){var e=+e,f;
if(isNaN(e)||e<b.STATE_NONE||e>b.STATE_UNACTIVATED_INDOOR_HOVERD){throw new Error("정의되지 않은 상태 설정입니다.")
}f=this._state;
this._state=e;
if(f!==e){this.dispatch("changed",{prevState:f,newState:e});
this._updateCursor(e)
}},getState:function(){return this._state
},reset:function(){this.setState(0)
},_listenMap:function(){this.$map().attach({BEGIN_DRAG_DONE:this._beginDragDone.bind(this),END_DRAG_DONE:this._endDragDone.bind(this)})
},_beginDragDone:function(){this._panning=true;
if(this._state!==b.STATE_NONE&&this.$map().getMapMode()!=="PANORAMA_MINI"){return
}this.$map().setCursor(d.CLOSE)
},_endDragDone:function(){this._panning=false;
if(this._state!==b.STATE_NONE&&this.$map().getMapMode()!=="PANORAMA_MINI"){return
}this.$map().setCursor(d.OPEN)
},_updateCursor:function(e){if(this._panning){return
}if(e===b.STATE_MAPPOI_HOVERD||e===b.STATE_UNACTIVATED_INDOOR_HOVERD||e===b.STATE_MARKER){this.$map().setCursor(d.POINTER)
}else{this.$map().setCursor(d.OPEN)
}}})
}());
iron.ns("nhn.map.service").ReducedScale=iron.Class({SCALE_SIZE:50,initialize:function(){this._prepareDOM()
},_prepareDOM:function(){this._el=$("#logo-scale");
this._scale=this._el.find(".scale_len > em")
},_setScaleByLevel:function(d){var d=d||this.$map().getLevel(),c=nhn.mapcore.mapSpec.distancePerPixel(d)*this.SCALE_SIZE,b;
if(c>1000){b=Math.round(c/10)/100+"km"
}else{b=c+"m"
}this._scale.text(b)
},_listenMap:function(){this.$map().attach({AFTER_MSG_APP_READY:this._onZoom.bind(this),SET_ZOOM_LEVEL:this._onZoom.bind(this),REGISTER_MAP_TYPE_DONE:this._onLoadMapTilePane.bind(this)})
},_onZoom:function(){this._setScaleByLevel()
},_onLoadMapTilePane:function(c){var b=c.mapType;
if(b==="vector"){this._scale.parent().removeClass("scale_len_satellite")
}else{this._scale.parent().addClass("scale_len_satellite")
}}});
iron.ns("nhn.map.service").SearchQueryField=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._tabOnce=false;
this._prepareDOM();
this._bindEvent();
this.setKeyword("");
this.focus()
},getElement:function(){return this._el[0]||null
},reset:function(){this.setKeyword("")
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},focus:function(){this._field.focus()
},getKeyword:function(){return this._field.val()
},setKeyword:function(b){this._field.val(b)
},isBoundarySearchMode:function(){return !this._boundarySearch.is(":disabled")&&this._boundarySearch.is(":checked")
},isBoundarySearchChecked:function(){return this._boundarySearch.is(":checked")
},activateBoundarySearch:function(){this._boundarySearch.prop("checked",true);
this.dispatch("bsearch_option_changed",{bsearchChecked:true});
this._boundarySearch.toggleClass("btn_curr_on",true)
},deactivateBoundarySearch:function(){this._boundarySearch.prop("checked",false);
this.dispatch("bsearch_option_changed",{bsearchChecked:false});
this._boundarySearch.toggleClass("btn_curr_on",false)
},disableBoundarySearch:function(){this._boundarySearch.attr("disabled",true);
this._boundarySearch.parent().hide()
},enableBoundarySearch:function(){this._boundarySearch.attr("disabled",false);
this._boundarySearch.parent().show()
},query:function(b,c){if(b===""){alert("검색어를 입력해주세요.");
this.focus();
return
}this.dispatch("query",{keyword:b,queryType:c||null,userTriggered:this._userTriggered||false});
this._userTriggered=false
},queryOutdoor:function(b,c){this.setKeyword(b);
this.query(b,c)
},_prepareDOM:function(){var b=nhn.map.DOMCache.getHeader().find("div.sch");
this._el=b;
this._fieldWrap=this._el.find("span.ii");
this._field=this._fieldWrap.find("input.input_act");
this._btnQuery=this._el.find("button.spm_ssch");
this._boundarySearch=this._el.find(".curr input.input_chk_curr");
this._boundarySearch.prop("checked",false)
},_bindEvent:function(){this._field.on("focus",this._onFocusField.bind(this)).on("blur",this._onBlurField.bind(this));
this._btnQuery.on("click",this._onClickQuery.bind(this));
this._boundarySearch.on("change",this._onChangeToggle.bind(this))
},_unbindEvent:function(){this._field.off();
this._btnQuery.off();
this._boundarySearch.off()
},_queryFromUser:function(){this._userTriggered=true;
this.query(this.getKeyword())
},_onFocusField:function(){this._field.off("keydown.queryfield").on("keydown.queryfield",this._onKeydownField.bind(this));
this._fieldWrap.addClass("ii_focus");
this.$keyNavigation().deactivateKeyNavigation()
},_onBlurField:function(){this._field.off("keydown.queryfield");
this._fieldWrap.removeClass("ii_focus");
this.$keyNavigation().activateKeyNavigation();
this._tabOnce=true
},_onKeydownField:function(c){var b=9,d=13;
if(!this._tabOnce&&this._field.val()!==""){this._tabOnce=true
}if(!this._tabOnce&&c.keyCode===b&&!c.shiftKey){c.preventDefault();
$("#u_skip > a").focus();
this._tabOnce=true
}if(c.keyCode===d){c.preventDefault();
this._queryFromUser()
}},_onClickQuery:function(b){b.preventDefault();
this._queryFromUser()
},_onChangeToggle:function(){var b=this.isBoundarySearchChecked();
this.dispatch("bsearch_option_changed",{bsearchChecked:b});
this._boundarySearch.toggleClass("btn_curr_on")
}});
(function(){iron.ns("nhn.map.service").MapControlBar=iron.Class({inherit:nhn.map.Dispatcher},{MIN_LEVEL:1,NORMAL_MAX_LEVEL:14,INDOOR_MAX_LEVEL:16,INDOOR_MINIMAP_MIN_LEVEL:12,initialize:function(){this._indoorID=null;
this._floor=null
},_prepareDOM:function(){this._el=$(nhn.mapservice.TemplateRepos.get("map_control_wrap").process());
this.$map().getStaticContainer().appendChild(this._el[0]);
this.$map().addIgnoreClass("mc_tools");
this.$map().addIgnoreClass("mc_receive");
this._el.disableSelection()
},_addSubView:function(b){this._el.append(b.getElement());
b.activate()
},_removeSubView:function(b){this._el.remove(b.getElement());
b.deactivate()
},getElement:function(){return this._el?this._el[0]:null
},_listenMap:function(){this.$map().attach({MSG_APP_READY:this._onMapReady.bind(this)})
},_onMapReady:function(){this._prepareDOM();
this._addSubView(this.$LocationControl());
this._addSubView(this.$PanoramaControl());
this._addSubView(this.$ZoomControl());
this._addSubView(this.$Toolbox());
this.$Sharing().initToolbox(this._el[0])
},_listenPanorama:function(){this.$Panorama().attach({openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this),minimapMoved:this._onPanoramaMinimapMoved.bind(this),panoramaStatusChanged:this._onPanoramaStatusChanged.bind(this)})
},_onOpenPanorama:function(){this._el.css({top:8,right:8});
this.$Toolbox().hide();
this.$Sharing().hideToolbox();
this.$ZoomControl().setMiniMode();
this.$LocationControl().hide()
},_onClosePanorama:function(){this._el.css({top:36,right:6});
this.$PanoramaControl().show();
this.$ZoomControl().clearMiniMode();
this.$ZoomControl().setMinMaxLevel(this.MIN_LEVEL,this.$map().getMinMaxLevel()[1]);
this.$map().setMinMaxLevel(this.MIN_LEVEL,this.$map().getMinMaxLevel()[1]);
this.$LocationControl().show();
this.$Toolbox().show();
this.$Sharing().showToolbox();
this._indoorID=null;
this._floor=null
},_onPanoramaMinimapMoved:function(b){this.$ZoomControl().setPanoramaInitialState({center:b.center,level:b.level})
},_onPanoramaStatusChanged:function(h){var d=this.$map().getActiveMapType().join(" ");
if(d.indexOf("satellite")>-1||d.indexOf("cadastral")>-1){return
}var c=h.panoramaStatus,g=c.zoneID,f=c.zorder,i,b;
if(g&&f){i=this.INDOOR_MINIMAP_MIN_LEVEL;
b=this.INDOOR_MAX_LEVEL
}else{i=this.MIN_LEVEL;
b=this.NORMAL_MAX_LEVEL
}this.$ZoomControl().setMinMaxLevel(i,b);
this.$map().setMinMaxLevel(i,b);
this._indoorID=g;
this._floor=f
},_listenIndoor:function(){this.$Indoor().attach({enterIndoorMap:this._onEnterIndoorMap.bind(this),leaveIndoorMap:this._onLeaveIndoorMap.bind(this)})
},_onEnterIndoorMap:function(){this.$ZoomControl().onEnterIndoorMap()
},_onLeaveIndoorMap:function(){this.$ZoomControl().onLeaveIndoorMap()
},_listenSubway:function(){this.$Subway().attach({init_service:this._onActivateSubwayLine.bind(this),restore_service:this._onActivateSubwayLine.bind(this),clear_service:this._onDeactivateSubwayLine.bind(this)})
},_onActivateSubwayLine:function(){window.setTimeout(function(){this.$Sharing().initToolbox($("#subway_static_layer div.map_ctrl")[0]);
this.$Sharing().hidePrint()
}.bind(this),0)
},_onDeactivateSubwayLine:function(){this.$Sharing().initToolbox(this._el[0]);
this.$Sharing().showPrint()
}})
}());
(function(){var e=iron.ns("nhn.map");
iron.ns("nhn.map.service").LocationControlBar=iron.Class({inherit:e.Dispatcher,mix:[e.UIComponent]},{initialize:function(){var f=nhn.map.Env.getVar("client");
this._disabled=false;
this._prepareDOM();
this._clientInfo=f;
if(!f||!f.x){this.disable()
}},_prepareDOM:function(){this._el=$(nhn.mapservice.TemplateRepos.get("location_control_bar").process());
this._enabledBtn=this._el.find("a.spmc_current");
this._disabledBtn=$('<span class="spmc spmc_current spmc_current_dimmed" title="접속위치">접속위치</span>')
},getElement:function(){return this._el[0]
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},enable:function(){if(!this._disabled){return
}this._disabledBtn.replaceWith(this._enabledBtn);
this._disabled=false
},disable:function(){if(this._disabled){return
}this._enabledBtn.replaceWith(this._disabledBtn);
this._disabled=true
},_onActivate:function(){this._bindEvent();
this.$map().addIgnoreClass(["mc_current"])
},_onDeactivate:function(){this._unbindEvent();
this.$map().removeIgnoreClass(["mc_current"])
},_bindEvent:function(){this._el.on("click","a.spmc_current",this._onClickLocation.bind(this))
},_unbindEvent:function(){this._el.off()
},_onClickLocation:function(f){f.preventDefault();
this._moveTo(this._clientInfo)
},_moveTo:function(i){var i=i||this._clientInfo,h=this.$map(),j=new nhn.mapcore.LatLng(i.y,i.x),g=h.getLevel(),f=11;
if(g<=f){h.setCenter(j)
}else{h.setCenter(j,f)
}},_moveByGeolocation:function(){navigator.geolocation.getCurrentPosition(d.bind(this),b.bind(this),c)
}});
var c={maximumAge:300000,timeout:10000};
function d(h){var f=h.coords,g=+(f.accuracy);
if(f&&f.longitude&&f.latitude&&g<10000){this._moveTo({x:f.longitude,y:f.latitude})
}else{this._moveTo(this._clientInfo)
}}function b(){this._moveTo(this._clientInfo)
}}());
(function(){var e=iron.ns("nhn.map.panorama").Const,m=iron.ns("nhn.map");
iron.ns("nhn.map.service").PanoramaControlBar=iron.Class({inherit:m.Dispatcher,mix:[m.UIComponent]},{initialize:function(){this._prepareDOM();
this._indoorID=null;
this._floor=null
},_prepareDOM:function(){var s=$(nhn.mapservice.TemplateRepos.get("panorama_control_bar").process());
this._el=s;
this._btnFlight=s.find("a.spmc_air");
this._disabledFlightEl=$('<span class="spmc spmc_air spmc_air_dimmed" title="항공뷰">항공뷰</span>');
this._btnStreet=s.find("a.spmc_road");
this._disabledStreetEl=$('<span class="spmc spmc_road spmc_road_dimmed" title="거리뷰">거리뷰</span>');
this._noFlightGuide=s.find("div.mes_air")
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},enable:function(){this._disabled=false;
this.enableFlight();
this.enableStreet()
},disable:function(){this.disableFlight();
this.disableStreet();
this._disabled=true
},activateFlight:function(){if(this._el.hasClass("minimode")){this._btnFlight.addClass("spmc_s_air_on")
}else{this._btnFlight.addClass("spmc_air_on")
}},deactivateFlight:function(){if(this._el.hasClass("minimode")){this._btnFlight.removeClass("spmc_s_air_on")
}else{this._btnFlight.removeClass("spmc_air_on")
}},enableFlight:function(){if(!this._flightDisabled){return
}this._flightDisabled=false;
this._disabledFlightEl.replaceWith(this._btnFlight)
},disableFlight:function(){if(this._flightDisabled){return
}this._flightDisabled=true;
this._btnFlight.replaceWith(this._disabledFlightEl)
},isFlightActivated:function(){return this._btnFlight.hasClass("spmc_air_on")||this._btnFlight.hasClass("spmc_s_air_on")
},activateStreet:function(){if(this._el.hasClass("minimode")){this._btnStreet.addClass("spmc_s_road_on")
}else{this._btnStreet.addClass("spmc_road_on")
}},deactivateStreet:function(){if(this._el.hasClass("minimode")){this._btnStreet.removeClass("spmc_s_road_on")
}else{this._btnStreet.removeClass("spmc_road_on")
}},enableStreet:function(){if(!this._streetDisabled){return
}this._streetDisabled=false;
this._disabledStreetEl.replaceWith(this._btnStreet)
},disableStreet:function(){if(this._streetDisabled){return
}this._streetDisabled=true;
this._btnStreet.replaceWith(this._disabledStreetEl)
},isStreetActivated:function(){return this._btnStreet.hasClass("spmc_road_on")||this._btnStreet.hasClass("spmc_s_road_on")
},getElement:function(){return this._el[0]
},_getPanoramaType:function(){if(!NModules.has("panorama")||!this.$Panorama().getPanoramaData()){return 0
}else{return this.$Panorama().getPanoramaData().type
}},_onActivate:function(){this._bindEvent();
this.$map().addIgnoreClass(["mc_view"]);
this.$map().addIgnoreClass(["mmc_view"])
},_onDeactivate:function(){this._unbindEvent();
this.$map().removeIgnoreClass(["mc_view"]);
this.$map().removeIgnoreClass(["mmc_view"])
},_bindEvent:function(){this._el.on("click","a.spmc_air, a.spmc_s_air",p.bind(this)).on("click","a.spmc_road, a.spmc_s_road",h.bind(this))
},_unbindEvent:function(){this._el.off()
},_listenPanorama:function(){this._panoramaLoaded=true;
this.$Panorama().attach({activateStreetView:f.bind(this),deactivateStreetView:l.bind(this),activateFlightView:d.bind(this),deactivateFlightView:i.bind(this),beforeOpenPanorama:c.bind(this),afterClosePanorama:r.bind(this),layoutChanged:q.bind(this),noFlightSpot:b.bind(this),existFlightSpot:n.bind(this),loadFlightSpot:n.bind(this),panoramaStatusChanged:g.bind(this)})
},_listenToolBox:function(){this.$toolbox().attach({begin:o.bind(this),end:j.bind(this)})
}});
function p(t){t.preventDefault();
var s=function(){var u=this.$Panorama();
if(u.isFlightActivated()&&this._getPanoramaType()!==e.TYPE_FLIGHT){u.deactivateFlightView()
}else{u.activateFlightView();
m.service.Log("skyview")
}}.bind(this);
if(this._panoramaLoaded){s()
}else{NModules.load("panorama",s)
}}function h(t){t.preventDefault();
var s=function(){var u=this.$Panorama(),v=u.isStreetActivated();
if(v&&this._getPanoramaType()<e.TYPE_STREET){u.deactivateStreetView()
}else{if(!v){u.activateStreetView();
m.service.Log("streetview")
}}}.bind(this);
if(this._panoramaLoaded){s()
}else{NModules.load("panorama",s)
}}function d(){this.activateFlight()
}function i(){this.deactivateFlight()
}function f(){this.activateStreet()
}function l(){this.deactivateStreet()
}function c(){this._el.removeClass("mc_view").addClass("mmc_view minimode");
this._btnFlight.removeClass("spmc_air").addClass("spmc_s_air");
this._btnStreet.removeClass("spmc_road").addClass("spmc_s_road");
if(this._btnFlight.hasClass("spmc_air_on")){this._btnFlight.removeClass("spmc_air_on").addClass("spmc_s_air_on")
}if(this._btnStreet.hasClass("spmc_road_on")){this._btnStreet.removeClass("spmc_road_on").addClass("spmc_s_road_on")
}this._disabledFlightEl.removeClass("spmc_air spmc_air_dimmed").addClass("spmc_s_air spmc_s_air_dimmed");
this._disabledStreetEl.removeClass("spmc_road spmc_road_dimmed").addClass("spmc_s_road spmc_s_road_dimmed")
}function r(){this._el.removeClass("mmc_view minimode").addClass("mc_view");
this._btnFlight.removeClass("spmc_s_air").addClass("spmc_air");
this._btnStreet.removeClass("spmc_s_road").addClass("spmc_road");
if(this._btnFlight.hasClass("spmc_s_air_on")){this._btnFlight.removeClass("spmc_s_air_on").addClass("spmc_air_on")
}if(this._btnStreet.hasClass("spmc_s_road_on")){this._btnStreet.removeClass("spmc_s_road_on").addClass("spmc_road_on")
}this._disabledFlightEl.removeClass("spmc_s_air spmc_s_air_dimmed").addClass("spmc_air spmc_air_dimmed");
this._disabledStreetEl.removeClass("spmc_s_road spmc_s_road_dimmed").addClass("spmc_road spmc_road_dimmed");
this._indoorID=null;
this._floor=null
}function q(){}function g(v){var s=v.panoramaStatus,u=s.zoneID,t=s.zorder;
if(this._indoorID===u&&this._floor===t){return
}if(u&&t){this.hide()
}else{this.show()
}this._indoorID=u;
this._floor=t
}function b(){this._noFlightSpot=true;
this._noFlightGuide.show();
this.disableFlight()
}function n(){this._noFlightSpot=false;
this._noFlightGuide.hide();
this.enableFlight()
}function o(){this.disable()
}function j(){this.enable();
if(this._noFlightSpot){this.disableFlight()
}}}());
(function(){var j=iron.ns("nhn.map");
iron.ns("nhn.map.service").ZoomControlBar=iron.Class({inherit:j.Dispatcher,mix:[j.UIComponent]},{SCALER_GAP:9,SCALER_MIN_POS:0,SCALER_MAX_POS:117,MIN_LEVEL:1,NORMAL_MAX_LEVEL:14,INDOOR_MAX_LEVEL:16,INDOOR_MINIMAP_MIN_LEVEL:12,initialize:function(){this._tpl=nhn.mapservice.TemplateRepos.get("zoom_control_bar");
this._prepareDOM()
},_prepareDOM:function(){var o=$(this._tpl.process());
this._el=o;
this._legend=o.find(".mc_legend");
this._btnZoomIn=o.find("a.spmc_zoomin");
this._btnZoomOut=o.find("a.spmc_zoomout");
this._btnRefresh=o.find("a.spmc_s_refresh");
this._scaler=o.find("div.mc_scaler");
this._scalerOffArea=this._scaler.find(".spmc_scaler_off");
this._scalerHandle=this._scaler.find("a.spmc_slider")
},getElement:function(){return this._el[0]
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},setMinMaxLevel:function(r,o){var q=this._levelGap||0,p=o;
this._el.removeClass("mc_s"+q).addClass("mc_s"+p);
this._legend.removeClass("mc_m"+q).addClass("mc_m"+p);
this._levelGap=p;
this._minLevel=r;
this._maxLevel=o;
this.SCALER_MAX_POS=(o-r)*9;
this._updateLevelState()
},setMiniMode:function(){this._minimode=true;
this._el.removeClass("mc_zoom").addClass("minimode mmc_zoom");
this._scaler.hide();
this._btnRefresh.show();
this._btnZoomIn.removeClass("spmc_zoomin").addClass("spmc_s_zoomin").addClass("_minimap_zoomin").addClass("minimode");
this._btnZoomOut.removeClass("spmc_zoomout").addClass("spmc_s_zoomout").addClass("_minimap_zoomout").addClass("minimode");
if(this._btnDisabledZoomOut){this._btnDisabledZoomOut.removeClass("spmc_zoomout spmc_zoomout_dimmed").addClass("spmc_s_zoomout _minimap_zoomout dimmed")
}if(this._btnDisabledZoomIn){this._btnDisabledZoomIn.removeClass("spmc_zoomin spmc_zoomin_dimmed").addClass("spmc_s_zoomin _minimap_zoomin dimmed")
}this._updateLevelState()
},clearMiniMode:function(){this._minimode=false;
this.clearPanoramaInitialState();
this._el.removeClass("minimode mmc_zoom").addClass("mc_zoom");
this._scaler.show();
this._btnRefresh.hide();
this._btnZoomIn.removeClass("spmc_s_zoomin").removeClass("_minimap_zoomin").removeClass("minimode").addClass("spmc_zoomin");
this._btnZoomOut.removeClass("spmc_s_zoomout").removeClass("_minimap_zoomout").removeClass("minimode").addClass("spmc_zoomout");
if(this._btnDisabledZoomOut){this._btnDisabledZoomOut.removeClass("spmc_s_zoomout dimmed").addClass("spmc_zoomout spmc_zoomout_dimmed")
}if(this._btnDisabledZoomIn){this._btnDisabledZoomIn.removeClass("spmc_s_zoomin _minimap_zoomin dimmed").addClass("spmc_zoomin spmc_zoomin_dimmed")
}this._updateLevelState()
},zoom:function(o){var p=this.$map();
p.zoom(o,p.getZoomBasePoint(),{useEffect:true,relativeLevel:false})
},_updateLevelState:function(q){var p=this.$map(),q=q||p.getLevel(),o="spmc_";
q=Math.min(this._maxLevel,q);
q=Math.max(this._minLevel,q);
if(this._minimode){o="spmc_s_"
}if(q===this._minLevel){this.disableZoomOut()
}else{this.enableZoomOut()
}if(q===this._maxLevel){this.disableZoomIn()
}else{this.enableZoomIn()
}this.setScalerLevel(q)
},disableZoomOut:function(){if(this._btnDisabledZoomOut){return
}var o="spmc ";
if(this._minimode){o+="spmc_s_zoomout _minimap_zoomout dimmed"
}else{o+="spmc spmc_zoomout spmc_zoomout_dimmed"
}this._btnDisabledZoomOut=$('<span class="'+o+'">지도 확대</span>');
this._btnZoomOut.replaceWith(this._btnDisabledZoomOut)
},enableZoomOut:function(){if(!this._btnDisabledZoomOut){return
}this._btnDisabledZoomOut.replaceWith(this._btnZoomOut);
this._btnDisabledZoomOut.remove();
delete this._btnDisabledZoomOut
},disableZoomIn:function(){if(this._btnDisabledZoomIn){return
}var o="spmc ";
if(this._minimode){o+="spmc_s_zoomin _minimap_zoomin dimmed"
}else{o+="spmc spmc_zoomin spmc_zoomin_dimmed"
}this._btnDisabledZoomIn=$('<span class="'+o+'">지도 축소</span>');
this._btnZoomIn.replaceWith(this._btnDisabledZoomIn)
},enableZoomIn:function(){if(!this._btnDisabledZoomIn){return
}this._btnDisabledZoomIn.replaceWith(this._btnZoomIn);
this._btnDisabledZoomIn.remove();
delete this._btnDisabledZoomIn
},setPanoramaInitialState:function(o){this._panoramaInitialState=o
},clearPanoramaInitialState:function(){delete this._panoramaInitialState
},setScalerLevel:function(q){var o=this.SCALER_GAP,p=(this._maxLevel-q)*o;
this._scalerOffArea.css("height",p);
this._scalerHandle.css("top",p)
},_setLevelByPosition:function(p){if(p<this.SCALER_MIN_POS||p>this.SCALER_MAX_POS){return
}var o=this._maxLevel-Math.floor(p/this.SCALER_GAP);
this.zoom(o)
},_onActivate:function(){this.setMinMaxLevel(this.$map().getMinLevel(),this.$map().getMaxLevel());
this._bindDefaultEvent();
this._bindAdvancedEvent();
this._bindMapEvent();
this.$map().addIgnoreClass("mc_zoom");
this.$map().addIgnoreClass("_minimap_zoomin");
this.$map().addIgnoreClass("_minimap_zoomout");
this.setScalerLevel(this.$map().getLevel())
},_onDeactivate:function(){this._unbindDefaultEvent();
this._unbindAdvancedEvent();
this._unbindMapEvent();
this.$map().removeIgnoreClass("mc_zoom");
this.$map().removeIgnoreClass("mmc_zoom")
},_bindDefaultEvent:function(){var o=this._onClickZoomIn.bind(this),p=this._onClickZoomOut.bind(this);
this._el.on("click.default","a.spmc_zoomin, a.spmc_s_zoomin",o).on("click.default","a.spmc_zoomout, a.spmc_s_zoomout",p);
if($.browser.msie){this._el.on("dblclick.default","a.spmc_zoomin, a.spmc_s_zoomin",o).on("dblclick.default","a.spmc_zoomout, a.spmc_s_zoomout",p)
}this._scaler.on("click",n.bind(this));
this._scalerHandle.on("mousedown",h.bind(this))
},_bindAdvancedEvent:function(){this._el.on("mouseenter.advanced",".mc_scaler",b.bind(this)).on("mouseleave.advanced",".mc_scaler",f.bind(this)).on("click.advanced","a.spmc_s_refresh",m.bind(this))
},_unbindDefaultEvent:function(){this._el.off(".default");
this._scaler.off();
this._scalerHandle.off()
},_unbindAdvancedEvent:function(){this._el.off(".advanced")
},_isIndoorView:function(){var o=this.$panorama();
if(!o){return false
}return o.getPanoramaData().type===10
},_onClickZoomIn:function(r){r.preventDefault();
r.stopPropagation();
var q=this.$map(),o=q.getLevel()+1,p="mrt.lvup";
if(o>this._maxLevel){return
}this.zoom(o);
if(this._minimode&&this._isIndoorView()){p=p+"_indoor"
}nhn.map.LogClick({event:r.originalEvent,element:r.target,acode:p})
},_onClickZoomOut:function(r){r.preventDefault();
r.stopPropagation();
var q=this.$map(),o=q.getLevel()-1,p="mrt.lvdown";
if(o<this._minLevel){return
}this.zoom(o);
if(this._minimode&&this._isIndoorView()){p=p+"_indoor"
}nhn.map.LogClick({event:r.originalEvent,element:r.target,acode:p})
},onEnterIndoorMap:function(){this._el.addClass("mc_inside");
var o=this.MIN_LEVEL;
if(this._minimode){o=this.INDOOR_MINIMAP_MIN_LEVEL
}this.setMinMaxLevel(o,this.INDOOR_MAX_LEVEL);
this.$map().setMinMaxLevel(o,this.INDOOR_MAX_LEVEL)
},onLeaveIndoorMap:function(){this._el.removeClass("mc_inside");
this.setMinMaxLevel(this.MIN_LEVEL,this.NORMAL_MAX_LEVEL);
this.$map().setMinMaxLevel(this.MIN_LEVEL,this.NORMAL_MAX_LEVEL)
},_bindMapEvent:function(){if(!this._mapListener){this._mapListener={SET_ZOOM_LEVEL:l.bind(this),load_satellite_pane:i.bind(this),load_vector_pane:e.bind(this),SET_MIN_MAX_LEVEL:d.bind(this)}
}this.$map().attach(this._mapListener)
},_unbindMapEvent:function(){this.$map().detach(this._mapListener)
}});
function n(q){if(q.target===this._scalerHandle[0]){return
}var o=this._scaler.offset().top+parseInt(this._scaler.css("padding-top"),10),r=q.clientY-o,p;
this._setLevelByPosition(r);
if(r<this.SCALER_MIN_POS||r>this.SCALER_MAX_POS){return
}p=this._maxLevel-Math.floor(r/this.SCALER_GAP);
nhn.map.LogClick({event:q.originalEvent,element:q.target,acode:"mrt.lv"+p})
}function h(p){var o=iron.guid();
this._handleDownPos=p.clientY;
j.DOMCache.getDocument().on("mousemove."+o,c.bind(this)).on("mouseup."+o,g.bind(this));
this._scalerToken=o
}function c(p){if(!this._handleDownPos){return
}var o=this._scaler.offset().top+parseInt(this._scaler.css("padding-top"),10),q=p.clientY-o;
q=Math.max(q,this.SCALER_MIN_POS);
q=Math.min(q,this.SCALER_MAX_POS);
this._scalerOffArea.css("height",q);
this._scalerHandle.css("top",q);
window.clearTimeout(this._updateTimer);
this._updateTimer=window.setTimeout(function(){this._setLevelByPosition(q)
}.bind(this),100)
}function g(){if(!this._handleDownPos){return
}j.DOMCache.getDocument().off("."+this._scalerToken);
delete this._scalerToken;
delete this._handleDownPos;
this._updateLevelState()
}function b(){if(this._minimode||this._maxLevel>16){return
}this._legend.show()
}function f(){if(this._minimode||this._maxLevel>16){return
}this._legend.hide()
}function m(p){p.preventDefault();
var o=this._panoramaInitialState;
if(o){this.$map().setCenter(o.center);
this.$map().setLevel(o.level);
this._updateLevelState()
}nhn.map.LogClick({event:p.originalEvent,element:p.target,acode:(this._isIndoorView()?"pnd*m":"pno*m")+".back"})
}function l(o){this._updateLevelState(o.level)
}function i(){this._el.removeClass("mc_land")
}function e(){this._el.addClass("mc_land")
}function d(p){var q=p.minLevel,o=p.maxLevel;
if(this._maxLevel===o&&this._minLevel===q){return
}this.setMinMaxLevel(q,o)
}}());
nhn.mapservice.TemplateRepos.add({contextmenu:function(_d_){var p=[];
with(_d_){p.push('<div class="ly_d ly_d_context" style="top:30px;left:30px">  <div class="ly_d_inner">   <div class="ly_d_context_box">    <h3><strong title="컨텍스트 메뉴">컨텍스트 메뉴</strong></h3>   </div>   <div class="ly_d_bottom"><span></span></div>  </div>  <div class="opac_line"></div> </div>')
}return p.join("")
},contextmenu_pin:function(_d_){var p=[];
with(_d_){p.push('<div class="sp_pins_default" style="width:7px;height:7px;z-index:1000;"><span class="lazyload" style="top:0;left:-273px"></span></div>')
}return p.join("")
},map_control_wrap:function(_d_){var p=[];
with(_d_){p.push('<div class="map_ctrl _none_pointer" style="top:36px;right:6px">  <h3 class="blind">지도 컨트롤러</h3> </div>')
}return p.join("")
},location_control_bar:function(_d_){var p=[];
with(_d_){p.push('<div class="mc_current">  <!-- 딤드시 a태그 span으로 변경후 spmc_current_dimmed 추가 -->  <a href="#" class="spmc spmc_current nclicks(mrt.gomypos)" title="접속위치">접속위치</a> </div>')
}return p.join("")
},panorama_control_bar:function(_d_){var p=[];
with(_d_){p.push('<div class="mc_view" data-m-preload="panorama">  <a href="#" class="spmc spmc_air nclicks(mrt.skyoff)" title="항공뷰">항공뷰</a>  <div class="mes mes_air" style="display:none;top:0">   <p>현재 위치의 <strong>항공뷰</strong>가<br>준비되어 있지 않습니다.</p>   <span class="spmc spmc_arrow_right"></span>   <span class="opac_line"></span>  </div>  <a href="#" class="spmc spmc_road nclicks(mrt.streetoff)" title="거리뷰">거리뷰</a>  <span class="opac_line"></span> </div>')
}return p.join("")
},zoom_control_bar:function(_d_){var p=[];
with(_d_){p.push('<div class="mc_zoom mc_land"><!-- [D] : 최소레벨 s_14 ~ s_1, 부동산범례 사용시 mc_land 추가, [D] : 최소레벨 s_16 ~ s_1, 실내지도범례 사용시 mc_inside 추가 -->  <!-- [D] : 딤드시 a태그 span으로 변경후 spmc_zoomin_dimmed 추가 -->  <a href="#" class="spmc spmc_zoomin nclicks(mrt.lvup)" title="지도 확대">지도 확대</a>  <div class="mc_scaler">   <!-- [D] : 시작은 0px , 끝은 117px,  GAP은 9px height값에 입력 -->   <span class="spmc spmc_scaler_on"></span><span class="spmc spmc_scaler_off" style="height:9px"></span>   <!-- [D] : 딤드시 a태그 span으로 변경후 spmc_slider_dimmed 추가 -->   <!-- [D] : 시작은 0px , 끝은 117px,  GAP은 9px top값에 입력 -->   <a href="#" class="spmc spmc_slider" style="top:0px">지도 확대/축소 슬라이더</a>  </div>  <!-- [D] : 딤드시 a태그 span으로 변경후 spmc_zoomout_dimmed 추가 -->  <a href="#" class="spmc spmc_zoomout nclicks(mrt.lvdown)" title="지도 축소">지도 축소</a>  <a href="#" class="spmc spmc_s_refresh" style="display:none">초기화</a>   <!-- [D] : 최대레벨 m_14 ~ m_1 -->  <div class="mc_legend mc_m14" style="display:none">   <h4 class="blind">지도 컨트롤러 범례</h4>   <div class="spmc spmc_lg0">실내지도</div><div class="spmc spmc_lg1">부동산</div><div class="spmc spmc_lg2">거리</div><div class="spmc spmc_lg3">읍,면,동</div><div class="spmc spmc_lg4">시,군,구</div><div class="spmc spmc_lg5">시,도</div><div class="spmc spmc_lg6">국가</div>  </div>  <span class="opac_line"></span> </div>')
}return p.join("")
},copy_right:function(_d_){var p=[];
with(_d_){p.push('<div class="copyright">  <p>   <span class="weather" style="display:none">기상청</span><span class="radiation" style="display:none">/한국원자력안전기술원</span><span class="satellite13" style="display:none">/천리안 해양관측 위성 2013.04.09 15:48</span><br><span class="_default">© NAVER Corp.</span><span class="satellite" style="display:none">/SPOT</span><span class="ngii" style="display:none">/국토지리정보원</span><span class="cctv" style="display:none">/서울시설공단</span><span class="cadastral" style="display:none">/다울지오인포</span><span class="_molit" style="display:none">/국토교통부</span><span class="_gits" style="display:none">/경기도교통정보센터</span><span class="traffic" style="display:none">/경찰청(UTIS)</span><a href="#" class="limit nclicks(map*c.unfold)" style="display:none" target="_blank">정보 제공의 한계·책임</a>  </p> </div>')
}return p.join("")
},dialog_alert:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert">  <div class="spot_alert_content style1">   <p class="st"><strong>',title,"</strong></p>   <p>",message,'</p>  </div>  <div class="spot_alert_act">   <a href="#" class="spm spm_alert_check _close">확인</a>  </div>  <a href="#" class="spm spm_spot_close _close" title="레이어 닫기">레이어 닫기</a>  <span class="spm spm_alert_ic"></span>  <span class="opac_line"></span> </div>')
}return p.join("")
},dialog_alert_title_only:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert">  <div class="spot_alert_content style2">   <p class="st"><strong>',title,'</strong></p>  </div>  <div class="spot_alert_act">   <a href="#" class="spm spm_alert_check _close">확인</a>  </div>  <a href="#" class="spm spm_spot_close _close" title="레이어 닫기">레이어 닫기</a>  <span class="spm spm_alert_ic"></span>  <span class="opac_line"></span> </div>')
}return p.join("")
},dialog_alert_bold_content:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert">  <div class="spot_alert_content style3">   <p class="st"><strong>',title,"</strong></p>   <p>",message,'</p>  </div>  <div class="spot_alert_act">   <a href="#" class="spm spm_alert_check _close">확인</a>  </div>  <a href="#" class="spm spm_spot_close _close" title="레이어 닫기">레이어 닫기</a>  <span class="spm spm_alert_ic"></span>  <span class="opac_line"></span> </div>')
}return p.join("")
},dialog_confirm:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert">  <div class="spot_alert_content style1">   <p class="st"><strong>',title,"</strong></p>   <p>",message,'</p>  </div>  <div class="spot_alert_act">   <a href="#" class="spm spm_alert_check _confirm">확인</a>   <a href="#" class="spm spm_alert_cancel _close">취소</a>  </div>  <a href="#" class="spm spm_spot_close _close" title="레이어 닫기">레이어 닫기</a>  <span class="spm spm_alert_ic"></span>  <span class="opac_line"></span> </div>')
}return p.join("")
},dialog_checkout:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert">  <div class="spot_alert_content style1">   <p class="st"><strong>',title,"</strong></p>   <p>",message,'</p>  </div>  <div class="spot_alert_act">   <p class="ck_box">    <input type="checkbox" id="roadAirX" class="ip_chk">    <label for="roadAirX">',checkMessage,'</label>   </p>  </div>  <a href="#" class="spm spm_spot_close _close" title="레이어 닫기">레이어 닫기</a>  <span class="spm spm_alert_ic"></span>  <span class="opac_line"></span> </div>')
}return p.join("")
},recent_bookmark_widget_tab:function(_d_){var p=[];
with(_d_){p.push('<div class="sr_tab1">  <ul>   <li class="on"><a href="#" class="_tab_recent">최근검색</a></li>   <li style="display:none"><a href="#" class="_tab_bookmark">즐겨찾기</a></li>  </ul>  <a href="#" class="more" style="display: none;">더보기</a> </div>')
}return p.join("")
},recent_bookmark_widget_recent_panel:function(_d_){var p=[];
with(_d_){p.push('<div class="recent_list_view_panel"></div>')
}return p.join("")
},recent_bookmark_widget_bookmark_panel:function(_d_){var p=[];
with(_d_){p.push('<div class="bookmark_list_view_panel" style="display: none;"></div>')
}return p.join("")
},_guide_lay_bicycle_warning:function(_d_){var p=[];
with(_d_){p.push('<div class="popd _guide_lay_bicycle_warning" style="z-index:32001;display:none;">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_header">    <h3 class="pop_t1">자전거 길찾기에 대한 한계 및 책임</h3>    <p class="blind">자전거 길찾기 검색결과는 이동시 참고 자료로만 활용하세요!</p>   </div>   <div class="pop_container">    <p>네이버에서는 사용자 편의를 돕기 위해 자전거 도로 정보를 수집하고 이를 분석하여 가장 적합한 경로를 추천합니다.<br>그러나 자전거 도로 정보를 수집할 수 없는 일부 지역에 대해서는 자동차 경로 정보를 제공합니다. 단, 자동차 전용 도로는 추천 경로에서 제외합니다.</p>    <p>이와 관련하여 본 사이트에서 제공한 정보에 의해 자전거 주행 시 발생하는 사고 등에 대해서 당사는 법적 책임을 지지 않습니다. 자전거 이동 시에는 관계 법령 및 현장 상황에 맞게 안전한 운행을 하시기 바랍니다.</p>   </div>   <div class="pop_footer">    <input type="checkbox" id="popdBicycleNotice" class="ip_chk">    <label for="popdBicycleNotice">이 창을 다시 표시 안 함</label>    <a href="#" title="닫기" class="sbtn _close btn_popd_close lay_close">닫기</a>   </div>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},_guide_lay_walk_warning:function(_d_){var p=[];
with(_d_){p.push('<div class="popd _guide_lay_walk_warning" style="z-index:32001;display:none;">  <!-- [D] : NOTICE 있을때 추가 -->  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_header">    <h3 class="pop_t2">도보 길찾기에 대한 한계 및 책임</h3>    <p class="blind">걸어서 이동 가능한경로를 알려주는 도보 길찾기를 경험해 보세요.</p>   </div>   <div class="pop_container">    <p>네이버에서는 사용자 편의를 돕기 위해 도로 정보를 수집하고 이를 분석하여 가장 적합한 경로를 추천합니다.<br>이와 관련하여 본 사이트에서 제공한 정보에 의해 보행 시 발생하는 사고<br>등에 대해서 당사는 법적 책임을 지지 않습니다.<br>이동 시에는 상황에 맞게 안전한 보행을 하시기 바랍니다.</p>    </div>   <div class="pop_footer">    <input type="checkbox" id="popdWalkNotice" class="ip_chk">    <label for="popdWalkNotice">이 창을 다시 표시 안 함</label>    <a href="#" title="닫기" class="sbtn btn_popd_close _lay_close">닫기</a>   </div>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
}});
iron.ns("nhn.map.service").GuideLayer=iron.Class({COOKIE_KEY_FORMAT:"map_%type%_cookie",initialize:function(){this.oSkipGuideLayer={};
this.hWelLayers={};
this._elLayer=nhn.map.DOMCache.getDialogPool();
nhn.map.DOMCache.getDocument().on("keydown",this._hideLayerWithESC.bind(this))
},_showGuideLayerIfFirstAccess:function(f){var b=this._checkOnByURL("menu",["route"]);
var e="route";
var c=this._getCookieKey(e);
var d=!$.cookie(c);
if(f&&!b&&d){this._showLayer(e)
}this._showGuideLayerIfFirstAccess=nhn.mapcore.Util.emptyFunction
},_checkOnByURL:function(e,d){var b=nhn.map.Env.getUrlParam();
if(this.oSkipGuideLayer[e]){return false
}this.oSkipGuideLayer[e]=true;
for(var c=0;
c<d.length;
++c){if(b[e]&&(b[e]==d[c])){return true
}}return false
},showDirectionsGuideLayer:function(b){this._checkCookieAndShowLayer(b)
},_checkCookieAndShowLayer:function(d,c){var b=this._getCookieKey(d);
if(!$.cookie(b)){this._showLayer(d,c)
}},_showLayer:function(d,c){var b=this.hWelLayers[d];
if(!b){b=this._getLayerElement(d,c)
}this.$bridge().showLightBox(b[0]);
b.on("click","input[type=checkbox]",this._clickCheckbox.bind(this,d)).on("click",".lay_close, ._lay_close",this._hideLayer.bind(this,d)).on("click","._layer_popup_close",this._hideLayer.bind(this,d))
},_hideLayerWithESC:function(c){var b=c.keyCode,d=27;
if(c.type=="keydown"&&b===d){this.$bridge().hideLightBox()
}},_hideLayer:function(d,c){c.preventDefault();
var b=this._getLayerElement(d);
if(b.find("input[type=checkbox]").checked&&c.type=="click"){this._clickCheckbox(d,null)
}this.$bridge().hideLightBox()
},_clickCheckbox:function(i,g){var d;
var f;
if(g==null){d=true;
var b=this._getLayerElement(i);
f=nhn.mapcore.Util.mapGetClass(b[0],"ip_check")
}else{d=g.target.checked;
f=nhn.mapcore.Util.mapGetClass(g.target,"ip_check")
}var h=f&&f[0]?f[0]:1000;
var c=this._getCookieKey(i);
if(d){$.cookie(c,"no",{expires:h*1})
}else{$.removeCookie(c)
}},_getCookieKey:function(b){return this.COOKIE_KEY_FORMAT.replace("%type%",b)
},_getLayerElement:function(c,b){if(!this.hWelLayers[c]){this._createLayerElement(c,b)
}return this.hWelLayers[c]
},_createLayerElement:function(e,d){var b="_guide_lay_"+e;
var c=nhn.mapservice.TemplateRepos.get(b).process({TAPTYPE:d});
this.elProgress=$(c);
this._elLayer.append(this.elProgress);
this.hWelLayers[e]=this.elProgress
}});
jQuery(function(){$(document.body).on("click","a",function(c){var b=$(this).attr("href");
if(!b){c.preventDefault();
return
}b=b.slice(-1);
if(b=="#"){c.preventDefault()
}})
});
nhn.map.Util={getByteLength:function(e){var b=0,c=0,d=e.length;
for(;
c<d;
c++){b+=(e.charCodeAt(c)>127?2:1)
}return b
},getCharByte:function(b){if(b===null||b.length<1){return 0
}var c=0,d=escape(b);
if(d.length==1){c++
}else{if(d.indexOf("%u")!=-1){c+=2
}else{if(d.indexOf("%")!=-1){c+=d.length/3
}}}return c
},ellipsis:function(g,c,d){if(!g||!g.length){return g
}g=g.replace(/  +/g," ");
if(!d&&d!==""){d="..."
}var f=c,b=g.length,h=0,e=0;
for(;
e<b;
e++){h+=this.getCharByte(g.charAt(e));
if(h==f){if(e==b-1){return g
}else{return g.substring(0,e)+d
}}else{if(h>f){return g.substring(0,e)+d
}}}return g
},stripTags:function(b){return b.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,"")
},Size:function(c,b){return new nhn.map.Size(c,b)
},Offset:function(c,b){return new nhn.map.Offset(c,b)
},preventSelection:function(b){var b=(b instanceof Array)?b[0]:b;
if(!b){return
}if(!!(window.attachEvent&&!window.opera)){b.unselectable="on";
b.onselectstart=function(){return false
}}else{b.style.MozUserSelect="none"
}},getNumberWithComma:function(b){var c=/(\d+)(\d{3})/;
b+="";
while(c.test(b)){b=b.replace(c,"$1,$2")
}return b
},getCurrentServerPhase:function(){var c=["dev","test","alpha","beta","stg","local"];
var b=location.href.match(/https?:\/\/([^\.]+).+naver.com/)[1];
if(c.indexOf(b)<0){b=""
}else{if(b=="local"){b="test"
}}return b
},unescape:function(b){b=b.replace("%20"," ").replace("%2B","+").replace(/&/g,"%26").replace(/=/g,"%3D").replace("%2F","/");
return b
}};
(function(){var l="https://nid.naver.com/nidlogin.login?template=plogin&mode=form&url=",i=location.href.replace(/^(\w+:\/\/[^\/]*)\/.*$/,"$1")+"/common2/_loginInfo.nhn?login=true",j="/common2/adultLogin.nhn",g="https://nid.naver.com/adultauth/adult_restore.nhn",c="https://nid.naver.com/adultauth/adult_exclude.nhn";
iron.ns("nhn.map.service").Login=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(o){if(o){b.id=o
}},cleanUp:function(){delete this._lastCallback
},checkLogin:function(q,p){var o=this.getUserID();
if(o){q&&q(o)
}else{p&&p()
}},checkLoginWithPopup:function(r,p){this.cleanUp();
var o=this.getUserID(),q;
if(o){r(o)
}else{if(typeof p!="string"){q=p
}else{q={loginType:p}
}this.openLoginPopup(q,r)
}},openLoginPopup:function(q,s){this._lastCallback=s;
var p=$.extend({loginType:"DEFAULT",alias:"loginWindow",width:400,height:267,status:false,toolbar:false,menubar:false,location:false},q),o=null;
try{o=this._popUp(p)
}catch(r){}if(!o){this.dispatch($.Event("block_popup",p));
this.$bridge().fireMessage("BLOCK_LOGIN_POPUP",p.loginType)
}},_popUp:function(p){var r=[],s,q;
for(s in p){if(p.hasOwnProperty(s)){q=p[s];
if(q===true){q="yes"
}else{if(q===false){q="no"
}}if(s!="type"){r.push(s+"="+q)
}}}return window.open(l+encodeURIComponent(i),p.alias,r.join(","))
},_requestLoginInfo:function(o){$.ajax({type:"GET",dataType:"json",url:"/common2/loginInfo.nhn",success:function(p){if(p.result){o&&o(p.result)
}},error:function(){}})
},refreshLoginInfo:function(){window.getGNB&&window.getGNB();
this._requestLoginInfo(function(o){if(o.userId&&o.email){this.afterLogin(o.userId,o.email)
}else{this.afterLogout()
}}.bind(this));
this.dispatch($.Event("refresh",b))
},afterLogin:function(q,o){b.id=q;
b.email=o;
if(this._lastCallback){var p=this.getUserID();
this._lastCallback(p);
this.cleanUp()
}if(nhn.map.Env){nhn.map.Env.updateUserInfo({id:q,email:o})
}this.dispatch($.Event("afterLogin",b))
},afterLogout:function(){b={};
if(nhn.map.Env){nhn.map.Env.updateUserInfo({id:"",email:""})
}this.dispatch($.Event("afterLogut"))
},isLoginUser:function(){return !!this.getUserID()
},getUserID:function(){return b.id||null
},setAuthInfo:function(o){b=o
},_goToAdultAuthPage:function(r){var p=this.$sharing().getURLData(),q;
p.setData("adult","1");
p.setData("page","1");
if(p.getData("menu")==="route"){var o=this.$search().getResult(),t=this.$directions().getAllSpots(),s;
if(t.departure){s=t.departure;
p.setData("sText",s.getName());
p.setData("slat",s.getLatLng().lat());
p.setData("slng",s.getLatLng().lng());
p.setData("sdid",s.getSpotId());
p.setData("sType",s.getType())
}if(t.destination){s=t.destination;
p.setData("eText",s.getName());
p.setData("elat",s.getLatLng().lat());
p.setData("elng",s.getLatLng().lng());
p.setData("edid",s.getSpotId());
p.setData("eType",s.getType())
}if(o){if(o.directionsInfo.spotType==="departure"){p.setData("tab","departure")
}if(o.directionsInfo.spotType==="destination"){p.setData("tab","destination")
}p.setData("query",o.queryForDupRegion||o.query)
}q=p.toURL();
nhn.map.service.EncryptParamsDAO.request(q,function(y){var u=document.location,x=u.protocol,w=u.host,v=[x,"//",w,"/?",y].join("");
document.location.href=r+"?url="+encodeURIComponent(v)
},function(){nhn.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.")
})
}else{q=p.toURL(null,["lat","lng"]);
document.location.href=r+"?url="+encodeURIComponent(q)
}},adultAuth:function(){this._goToAdultAuthPage(j)
},adultAuthRestore:function(){this._goToAdultAuthPage(g)
},adultAuthExclude:function(){this._goToAdultAuthPage(c)
},_listenBridge:function(){this.$bridge().attach({BEFORE_MSG_APP_READY:n.bind(this),CHECK_LOGIN:m.bind(this),CHECK_LOGIN_IFNOT_OPENPOPUP:e.bind(this),REFRESH_LOGIN_INFO:d.bind(this),COMPLETE_LOGIN_DONE:f.bind(this),COMPLETE_LOGOUT_DONE:h.bind(this)})
}});
var b={};
function n(){this.$bridge().addMethod("getLoginUserID",this.getUserID.bind(this))
}function m(o){this.checkLogin(o.successCallback,o.failureCallback)
}function e(o){this.checkLoginWithPopup(o.callback,o.loginType)
}function d(){this.refreshLoginInfo()
}function f(o){this.afterLogin(o.userID,o.email)
}function h(){this.afterLogout()
}})();
(function(){nhn.map.service.Dialog=iron.Class({singleton:true},{initialize:function(){this.UID=Date.now();
this._bodyEl=nhn.map.DOMCache.getBody();
this._templates={ALERT:nhn.mapservice.TemplateRepos.get("dialog_alert"),ALERT_TITLE_ONLY:nhn.mapservice.TemplateRepos.get("dialog_alert_title_only"),ALERT_BOLD_CONTENT:nhn.mapservice.TemplateRepos.get("dialog_alert_bold_content"),CONFIRM:nhn.mapservice.TemplateRepos.get("dialog_confirm"),CHECKOUT:nhn.mapservice.TemplateRepos.get("dialog_checkout")};
this.dialog=null;
this.dialogType=null
},showDialog:function(i,g){if(this.dialog){this.hideDialog()
}var h=null,e=null,j;
if(g&&"width" in g){h=g.width
}if(g&&"height" in g){e=g.height
}if(g&&"height" in g){j=g.overflowY
}var d={appendTo:"div#wrap",overlayCss:{backgroundColor:"#000"},dataCss:{overflowY:j,width:h,height:e},opacity:60,zIndex:40001};
var f=$.modal(i,$.extend(d,g));
this.dialog=f.d.data
},hideDialog:function(){this.dialog=null;
this.dialogType=null;
$.modal.close()
},update:function(){$("#simplemodal-container").css("height","auto");
$.modal.update()
},alert:function(g,f,h,d){var e=this._templates[d?"ALERT_BOLD_CONTENT":"ALERT"].process({title:g,message:f});
this.showDialog(e);
this.dialog.on("click","a._close",function(i){i.preventDefault();
h&&h(true,i);
this.hideDialog();
c.apply(this)
}.bind(this));
b.call(this,"alert")
},alertTitleOnly:function(e,f){var d=this._templates.ALERT_TITLE_ONLY.process({title:e});
this.showDialog(d);
this.dialog.on("click.userInteraction","a._close",function(g){g.preventDefault();
f&&f(true,g);
this.hideDialog();
c.apply(this)
}.bind(this));
b.call(this,"alert_title_only")
},confirm:function(f,e,g){var d=this._templates.CONFIRM.process({title:f,message:e});
this.showDialog(d);
this.dialog.on("click.userInteraction","a._confirm",function(h){h.preventDefault();
g&&g(true,h);
this.hideDialog();
c.apply(this)
}.bind(this)).on("click.userInteraction","a._close",function(h){h.preventDefault();
g&&g(false,h);
this.hideDialog();
c.apply(this)
}.bind(this));
b.call(this,"confirm")
},checkout:function(d,h,g,f,i){if($.cookie(d)=="no"){return
}var e=this._templates.CHECKOUT.process({title:h,message:g,checkMessage:f||"이 창을 다시 표시 안 함"});
this.showDialog(e);
this.dialog.on("click.userInteraction","a._close",function(j){j.preventDefault();
var l=this.dialog.find("input.ip_chk").is(":checked");
if(l){$.cookie(d,"no",{expires:1000})
}else{$.removeCookie(d)
}i&&i(true,j);
this.hideDialog();
c.apply(this)
}.bind(this));
b.call(this,"checkout")
},showPreset:function(e){if(e==="CONNECTION_ERR"&&e!==this.dialogType){this.alert("<strong>일시적인 오류로<br/>서비스를 이용할 수 없습니다.</strong>","잠시 후 다시 시도해 주세요")
}else{if(e==="PROGRESSBAR"&&e!==this.dialogType){var d=$(nhn.mapservice.TemplateRepos.get("progressbar").process());
d.css("top",0);
d.css("left",0);
d.css("display","block");
this.showDialog(d)
}}this.dialogType=e
},hidePreset:function(d){if(this.dialogType===d){this.hideDialog();
this.dialogType=null
}}});
var c=function(){this._bodyEl.off("focus.dialog")
};
var b=function(i){this.dialogType=i;
var e=this,i=i||"alert",g=this.dialog,d="a._close",f=function(){if(!g){return
}g.find(d).first().focus()
},h;
if(i=="confirm"){d="a._confirm"
}else{if(i=="checkout"){d="input.ip_chk"
}else{d="a._close"
}}f();
this._bodyEl.on("focus.dialog",function(){c.apply(e);
f()
});
this._hideDialogCallback&&this._hideDialogCallback();
h=this.dialog.find("a, input, button");
h.last().on("blur.wag",function(){window.setTimeout(f,10)
});
this._hideDialogCallback=function(){h.last().off("blur.wag");
delete this._hideDialogCallback
}};
nhn.map.service.Alert=function(g,f,h,d){var e=nhn.map.service.Dialog.getInstance();
if(typeof f==="function"){h=f;
e.alertTitleOnly(g,h)
}else{if(!f){e.alertTitleOnly(g,h)
}else{e.alert(g,f,h,d)
}}};
nhn.map.service.Confirm=function(f,e,g){var d=nhn.map.service.Dialog.getInstance();
d.confirm(f,e,g)
};
nhn.map.service.Checkout=function(d,h,g,f,i){var e=nhn.map.service.Dialog.getInstance();
e.checkout(d,h,g,f,i)
};
nhn.map.service.Commonlayer=function(d,g,f,h){var e=nhn.map.service.Dialog.getInstance();
e.commonlayer(d,g,f,h)
}}());
(function(){var c="서버와의 통신이 원활하지 않습니다.";
var b="잠시 후에 다시 시도해 주세요.";
nhn.map.service.AddressService=iron.Class({inherit:nhn.map.Dispatcher,singleton:true},{API_URL:"/common2/searchCoordToAddr.nhn",requestAddress:function(f,e,d){$.ajax({type:"GET",url:this.API_URL,data:"searchCoord="+f.x+";"+f.y,dataType:"json",success:function(h){var g=this.processData(f,h);
if(g.error===true){this._showErrorMsg(g,d)
}else{e&&e(g)
}}.bind(this),error:function(h){if(!h.error){h.error={};
h.error.code="-1"
}var g=this.processData(f,h);
this._showErrorMsg(g)
}.bind(this)})
},_showErrorMsg:function(d,e){if(e){e(d)
}else{nhn.map.service.Alert(c,b)
}},generateAddress:function(e){var d=[];
e.forEach(function(f){f&&d.push(f)
});
return d.join(" ")
},processData:function(h,g){var d={x:h.x,y:h.y};
if(g.result){var e=g.result;
d.rcode=e.code;
d.fullAddress=this.generateAddress([e["do"],e.si,e.dong,e.ri,this.getJibunString(e.jibun)]);
d.address=d.fullAddress;
d.isDetailAddress=!!e.jibun;
d.isNewAddress=false;
if(e.roadAddr.name){var f;
if(!e.ri){f=this.generateAddress([e["do"],e.si,e.roadAddr.name,e.roadAddr.number])
}else{f=this.generateAddress([e["do"],e.si,e.dong,e.roadAddr.name,e.roadAddr.number])
}d.mappedAddress={fullAddress:d.address,isNewAddress:false};
d.fullAddress=f;
d.address=f;
d.isNewAddress=true
}if(!d.fullAddress&&!d.mappedAddress){d.error=true;
this.dispatch("error",{errInfo:{code:"-1"},result:$.extend({},d)})
}}else{d.error=true;
this.dispatch("error",{errInfo:g.error,result:$.extend({},d)})
}return d
},getJibunString:function(e){var d="";
if(e&&(e.san!="undefined")){if(e.san=="2"){d="산 "
}d+=e.number
}return d
}})
}());
nhn.map.Size=function(c,b){this.setWidth(c);
this.setHeight(b)
};
nhn.map.Size.prototype={setWidth:function(b){this.width=Math.round(b||0)
},getWidth:function(){return this.width
},setHeight:function(b){this.height=Math.round(b||0)
},getHeight:function(){return this.height
},copy:function(){return new nhn.map.Size(this.width,this.height)
},equals:function(b){return b.getWidth()==this.getWidth()&&b.getHeight()==this.getHeight()
}};
nhn.map.Size.create=function(b,c){return new nhn.map.Size(b,c)
};
nhn.map.Offset=function(c,b){this.setLeft(c);
this.setTop(b)
};
nhn.map.Offset.prototype={setLeft:function(b){this.left=Math.round(b||0)
},getLeft:function(){return this.left
},getCssLeft:function(){return this.left+"px"
},setTop:function(b){this.top=Math.round(b||0)
},getCssTop:function(){return this.top+"px"
},getTop:function(){return this.top
},copy:function(){return new nhn.map.Offset(this.left,this.top)
}};
nhn.map.Icon=function(d,b,c){this.setSrc(d);
this.setSize(b);
this.setOffset(c);
this.setType("NORMAL")
};
nhn.map.Icon.prototype={setSrc:function(b){this.src=b
},getSrc:function(){return this.src
},setType:function(b){this._type=b
},getType:function(){return this._type
},setSize:function(b){this.size=b||new nhn.map.Size(0,0)
},getSize:function(){return this.size
},getWidth:function(){return this.size.width
},getHeight:function(){return this.size.height
},setOffset:function(b){this.offset=b||new nhn.map.Size(0,0)
},getOffset:function(){return this.offset
},update:function(d,b,c){d&&this.setSrc(d);
b&&this.setSize(b);
c&&this.setOffset(c)
}};
nhn.map.SpriteIcon=iron.Class(nhn.map.Icon,{initialize:function(e,c,d,b){nhn.map.Icon.call(this,e,c,d);
this.options=$.extend({spriteSize:new nhn.map.Size(500,400),spriteOffset:new nhn.map.Size(0,0),className:"sym_map3"},b||{});
this._type="Sprite"
},setSpriteSize:function(b){this.options.spriteSize=b
},getSpriteSize:function(){return this.options.spriteSize
},getSpriteWidth:function(){return this.options.spriteSize.getWidth()
},getSpriteHeight:function(){return this.options.spriteSize.getHeight()
},setSpriteOffset:function(b){this.options.spriteOffset=b
},getSpriteOffset:function(){return this.options.spriteOffset
},setClassName:function(b){this.options.className=b
},getClassName:function(){return this.options.className
}});
(function(){nhn.map.service.InfoWindowIconOffset=iron.Class({inherit:nhn.map.Offset},{initialize:function(i){var j=this._getIconOffset(i);
this.setIconType(i);
nhn.map.Offset.apply(this,[j[0],j[1]]);
this.setAltText(b[i.toUpperCase()]||"")
},_getIconOffset:function(i){var j=h[i.toUpperCase()]||h.REGION;
return j
},setIconType:function(i){this._iconType=i
},getIconType:function(){return this._iconType
},setAltText:function(i){this._altText=i||""
},getAltText:function(){return this._altText||""
}});
var h={DEFAULT:[0,6],BOOKMARK:[-92,0],REGION:[0,0],REGION_U:[-23,0],ADDRESS:[-46,0],ADDRESS_U:[-69,0],SITE_0:[0,-23],SITE_1:[-23,-23],SITE_2:[-46,-23],SITE_3:[-69,-23],SITE_4:[-92,-23],SITE_5:[-115,-23],SITE_6:[-138,-23],SITE_7:[-161,-23],SITE_8:[-184,-23],SITE_9:[-207,-23],SITE_0_U:[0,-46],SITE_1_U:[-23,-46],SITE_2_U:[-46,-46],SITE_3_U:[-69,-46],SITE_4_U:[-92,-46],SITE_5_U:[-115,-46],SITE_6_U:[-138,-46],SITE_7_U:[-161,-46],SITE_8_U:[-184,-46],SITE_9_U:[-207,-46],SITE_0_P:[0,-161],SITE_1_P:[-23,-161],SITE_2_P:[-46,-161],SITE_3_P:[-69,-161],SITE_4_P:[-92,-161],SITE_5_P:[-115,-161],SITE_6_P:[-138,-161],SITE_7_P:[-161,-161],SITE_8_P:[-184,-161],SITE_9_P:[-207,-161],BUS_0:[0,-69],BUS_1:[-23,-69],BUS_2:[-46,-69],BUS_3:[-69,-69],BUS_4:[-92,-69],BUS_5:[-115,-69],BUS_6:[-138,-69],BUS_7:[-161,-69],BUS_8:[-184,-69],BUS_9:[-207,-69],PERI_BUS:[0,-138],PERI_BUS_ON:[-92,-138],PERI_SUBWAY:[-23,-138],PERI_SUBWAY_ON:[-115,-138],PERI_DINING:[0,-115],PERI_CAFE:[-23,-115],PERI_CONVENIENCE:[-46,-115],PERI_PARKING:[-69,-115],PERI_OIL:[-92,-115],PERI_STORE:[-138,-115],PERI_MART:[-115,-115],PERI_ACCOMMODATION:[-161,-115],PERI_CINEMA:[-184,-115],PERI_SPORT:[-207,-115],PERI_HOSPITAL:[-230,-115],PERI_BANK:[-253,-115],PERI_POST:[-276,-115],PERI_GOVERNMENT:[-299,-115],AROUND_SEARCH:[-46,0],PERICOUPON:[-115,-92],COUPON:[-207,-138],TRAFFIC_BUS:[0,-138],TRAFFIC_EXPRESS:[0,-138],TRAFFIC_EXPRESSBUS:[0,-138],TRAFFIC_SUBWAY:[-23,-138],TRAFFIC_METRO:[-23,-138],TRAFFIC_TRAIN:[-46,-138],TRAFFIC_AIRPORT:[-69,-138],TSEARCH_BUS:[-92,-138],TSEARCH_EXPRESS:[-92,-138],TSEARCH_SUBWAY:[-115,-138],TSEARCH_METRO:[-115,-138],TSEARCH_TRAIN:[-138,-138],TSEARCH_AIRPORT:[-161,-138]};
var b={DEFAULT:"지점",BOOKMARK:"즐겨찾기",REGION:"지역",REGION_U:"지역",ADDRESS:"주소",ADDRESS_U:"주소",AROUND_SEARCH:"주변검색",PERICOUPON:"쿠폰",COUPON:"쿠폰"};
for(var f in h){if(h.hasOwnProperty(f)){if(!b[f]){var d=f.split("_"),e=d[0],c=d[1],g={SITE:["A","B","C","D","E","F","G","H","I","J"],BUS:[1,2,3,4,5,6,7,8,9,10],NAMED:{BUS:"버스 정류장",SUBWAY:"지하철역",DINING:"음식점",CAFE:"카페",CONVENIENCE:"생활/편의",PARKING:"주차장",OIL:"주유소",STORE:"편의점",MART:"마트/슈퍼",ACCOMMODATION:"숙박",CINEMA:"영화/공연",SPORT:"체육시설",HOSPITAL:"병원/의료",BANK:"은행",POST:"우체국",GOVERNMENT:"관공서",EXPRESS:"터미널",EXPRESSBUS:"터미널",METRO:"지하철역",TRAIN:"기차역",AIRPORT:"공항"}};
if(e=="SITE"||e=="BUS"){b[f]=g[e][parseInt(c,10)]
}if(c&&isNaN(parseInt(c,10))){b[f]=g.NAMED[c]
}}}}})();
iron.ns("nhn.map.service").MapResizer=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._detectSize();
this._asideWidth=nhn.map.Env.getUIEnv().ASIDE_WIDTH
},_detectSize:function(){var b=nhn.map.DOMCache.getMapArea();
this._mapSize={width:b[0].offsetWidth,height:b[0].offsetHeight}
},getMapSize:function(){return this._mapSize
},setMapSize:function(b){var c=b||this._mapSize;
this.$map().setMapSize(c.width,c.height);
this.dispatch("resized",{mapWidth:c.width,mapHeight:c.height})
},resizeMap:function(){this._detectSize();
this.setMapSize(this._mapSize);
this.$map().setResizing(false);
this.$map().setBoundLazy()
},wide:function(){var b=nhn.map.DOMCache.getWrap();
this._detectSize();
this._mapSize.width+=this._asideWidth;
this.setMapSize(this._mapSize);
b.addClass("wrap_no_aside")
},narrow:function(){var b=nhn.map.DOMCache.getWrap();
this._detectSize();
this._mapSize.width-=this._asideWidth;
this.setMapSize(this._mapSize);
b.removeClass("wrap_no_aside")
},_listenMap:function(){this.$map().attach({BEFORE_MSG_APP_READY:this._beforeMapReady.bind(this),RESIZE_MAP_DONE:this._onResizeMap.bind(this)})
},_beforeMapReady:function(){this.resizeMap()
},_onResizeMap:function(){window.clearTimeout(this._timer);
this.$map().setResizing(true);
this._timer=window.setTimeout(this.resizeMap.bind(this),100)
}});
nhn.map.service.LazyLoadHint=iron.Class({initialize:function(){this._bindEvent()
},_bindEvent:function(){nhn.map.DOMCache.getDocument().on("mouseover mouseout",this._onMouseOverForLazyLoad.bind(this))
},_onMouseOverForLazyLoad:function(g){var b="data-m-preload",c=g.target,h=c,f,d;
if(c.tagName==="OBJECT"||c.tagName==="EMBED"){return
}while(c.tagName!="BODY"&&c.parentNode){var d=!c.getAttribute?null:c.getAttribute(b);
if(!d){c=c.parentNode
}else{break
}}if(c&&c.tagName&&c.tagName.toUpperCase()=="BODY"){return
}if(d){if(d!="NMAP_LOADING"){f=d.split("|");
if(!f||!f.length){return
}c.setAttribute(b,"NMAP_LOADING");
NModules.load(f,(function(i,e){return function(){i.removeAttribute(b);
if(i.getAttribute("m-preload-mouseout-triggered")==="true"){i.removeAttribute("m-preload-mouseout-triggered")
}else{$(e).trigger("mouseover")
}}
})(c,h));
c=h=null
}else{if(g.type==="mouseout"||g.type==="mouseleave"){c.setAttribute("m-preload-mouseout-triggered","true")
}}}}});
/*! NanoScroller for Naver Maps - v0.1.3 - 2014-10-06
* http://gitlab.map.naver.com/nm-nanoscroller/tree/master
* Copyright (c) 2014 mapfe; Licensed MIT */
/*! nanoScrollerJS - v0.7.3 - 2013
* http://jamesflorentino.github.com/nanoScrollerJS/
* Copyright (c) 2013 James Florentino; Licensed MIT */
(function(i,o,x){var d,p,j,z,e,g,b,r,w,n,A,B,c,q,v,y,l,h,t,s,u,m;
var C=navigator.userAgent,f;
s={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:false,preventPageScrolling:false,disableResize:false,alwaysVisible:false,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null};
y="scrollbar";
v="scroll";
r="mousedown";
w="mousemove";
A="mousewheel";
n="mouseup";
q="resize";
e="drag";
h="up";
c="panedown";
j="DOMMouseScroll";
z="down";
t="wheel";
g="keydown";
b="keyup";
l="touchmove";
d=o.navigator.appName==="Microsoft Internet Explorer"&&/msie 7./i.test(o.navigator.appVersion)&&o.ActiveXObject;
f=!!(i.browser.webkit&&C.indexOf(" Edge/")===-1);
p=null;
u=function(){var E,G,F;
E=x.createElement("div");
G=E.style;
G.position="absolute";
G.width="100px";
G.height="100px";
G.overflow=v;
G.top="-9999px";
x.body.appendChild(E);
F=E.offsetWidth-E.clientWidth;
x.body.removeChild(E);
if(F===0){var D=C.toLowerCase();
if(D.indexOf("mac os")>-1&&!m()){F=17
}}return F
};
m=function(){var F,E,D;
E=C;
F=/(?=.+Mac OS X)(?=.+Firefox)/.test(E);
if(!F){return false
}D=/Firefox\/\d{2}\./.exec(E);
if(D){D=D[0].replace(/\D+/g,"")
}return F&&+D>23
};
B=(function(){function D(F,E){this.el=F;
this.options=E;
p||(p=u());
this.$el=i(this.el);
this.doc=i(this.options.documentContext||x);
this.win=i(this.options.windowContext||o);
this.$content=this.$el.children("."+E.contentClass);
this.$content.attr("tabindex",0);
this.content=this.$content[0];
if(this.options.iOSNativeScrolling&&(this.el.style.WebkitOverflowScrolling!=null)){this.nativeScrolling()
}else{this.generate()
}this.createEvents();
this.addEvents();
this.reset()
}D.prototype.preventScrolling=function(F,E){if(!this.isActive){return
}if(F.type===j){if(E===z&&F.originalEvent.detail>0||E===h&&F.originalEvent.detail<0){F.preventDefault()
}}else{if(F.type===A){if(!F.originalEvent||!F.originalEvent.wheelDelta){return
}if(E===z&&F.originalEvent.wheelDelta<0||E===h&&F.originalEvent.wheelDelta>0){F.preventDefault()
}}}};
D.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"});
this.iOSNativeScrolling=true;
this.isActive=true
};
D.prototype.updateScrollValues=function(){var E;
E=this.content;
this.maxScrollTop=E.scrollHeight-E.clientHeight;
this.prevScrollTop=this.contentScrollTop||0;
this.contentScrollTop=E.scrollTop;
if(!this.iOSNativeScrolling){this.maxSliderTop=this.paneHeight-this.sliderHeight;
this.sliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop
}};
D.prototype.createEvents=function(){var E=this;
this.events={down:function(F){E.isBeingDragged=true;
E.offsetY=F.pageY-E.slider.offset().top;
E.pane.addClass("active");
E.doc.bind(w,E.events[e]).bind(n,E.events[h]);
return false
},drag:function(F){E.sliderY=F.pageY-E.$el.offset().top-E.offsetY;
E.scroll();
E.updateScrollValues();
if(E.contentScrollTop>=E.maxScrollTop&&E.prevScrollTop!==E.maxScrollTop){E.$el.trigger("scrollend")
}else{if(E.contentScrollTop===0&&E.prevScrollTop!==0){E.$el.trigger("scrolltop")
}}return false
},up:function(){E.isBeingDragged=false;
E.pane.removeClass("active");
E.doc.unbind(w,E.events[e]).unbind(n,E.events[h]);
return false
},resize:function(){E.reset()
},panedown:function(F){E.sliderY=(F.offsetY||F.originalEvent.layerY)-(E.sliderHeight*0.5);
E.scroll();
E.events.down(F);
return false
},scroll:function(F){if(E.isBeingDragged){return
}E.updateScrollValues();
if(!E.iOSNativeScrolling){E.sliderY=E.sliderTop;
E.slider.css({top:E.sliderTop})
}if(F==null){return
}if(E.contentScrollTop>=E.maxScrollTop){if(E.options.preventPageScrolling){E.preventScrolling(F,z)
}if(E.prevScrollTop!==E.maxScrollTop){E.$el.trigger("scrollend")
}}else{if(E.contentScrollTop===0){if(E.options.preventPageScrolling){E.preventScrolling(F,h)
}if(E.prevScrollTop!==0){E.$el.trigger("scrolltop")
}}}},wheel:function(F){var G;
if(F==null){return
}G=F.delta||F.wheelDelta||(F.originalEvent&&F.originalEvent.wheelDelta)||-F.detail||(F.originalEvent&&-F.originalEvent.detail);
if(G){E.sliderY+=-G/3
}E.scroll();
return false
}}
};
D.prototype.addEvents=function(){var E;
this.removeEvents();
E=this.events;
if(!this.options.disableResize){this.win.bind(q,E[q])
}if(!this.iOSNativeScrolling){this.slider.bind(r,E[z]);
this.pane.bind(r,E[c]).bind(""+A+" "+j,E[t])
}this.$content.bind(""+v+" "+A+" "+j+" "+l,E[v])
};
D.prototype.removeEvents=function(){var E;
E=this.events;
this.win.unbind(q,E[q]);
if(!this.iOSNativeScrolling){this.slider.unbind();
this.pane.unbind()
}this.$content.unbind(""+v+" "+A+" "+j+" "+l,E[v])
};
D.prototype.generate=function(){var H,I,G,F,K,E,J;
G=this.options;
F=G.paneClass,K=G.sliderClass,H=G.contentClass;
E=[F,K].join("_");
if(!this.$el.find(""+F).length&&!this.$el.find(""+K).length){this.$el.append('<div class="'+F+'"><span class="'+F+'_t"></span><span class="'+F+'_m"></span><span class="'+F+'_b"></span><div class="'+K+'"><span class="'+E+'_t"></span><span class="'+E+'_m"></span><span class="'+E+'_b"></span></div></div>')
}this.pane=this.$el.children("."+F);
this.slider=this.pane.find("."+K);
if(p===0&&m()){J=o.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,"");
I={right:-14,paddingRight:+J+14}
}else{if(p){if(!f){I={right:-p}
}this.$el.addClass("has-scrollbar")
}}if(I!=null){this.$content.css(I)
}return this
};
D.prototype.restore=function(){this.stopped=false;
this.pane.show();
this.addEvents()
};
D.prototype.reset=function(){var K,M,N,F,G,E,I,H,L,J;
if(this.iOSNativeScrolling){this.contentHeight=this.content.scrollHeight;
return
}if(!this.$el.find("."+this.options.paneClass).length){this.generate().stop()
}if(this.stopped){this.restore()
}K=this.content;
N=K.style;
F=N.overflowY;
M=K.scrollHeight+p;
L=parseInt(this.$el.css("max-height"),10);
if(L>0){this.$el.height("");
this.$el.height(K.scrollHeight>L?L:K.scrollHeight)
}E=this.pane.outerHeight(false);
H=parseInt(this.pane.css("top"),10);
G=parseInt(this.pane.css("bottom"),10);
I=E+H+G;
J=Math.round(I/M*I);
if(J<this.options.sliderMinHeight){J=this.options.sliderMinHeight
}else{if((this.options.sliderMaxHeight!=null)&&J>this.options.sliderMaxHeight){J=this.options.sliderMaxHeight
}}if(F===v&&N.overflowX!==v){J+=p
}this.maxSliderTop=I-J;
this.contentHeight=M;
this.paneHeight=E;
this.paneOuterHeight=I;
this.sliderHeight=J;
this.slider.height(J);
this.events.scroll();
this.pane.show();
this.isActive=true;
if((K.scrollHeight===K.clientHeight)||(this.pane.outerHeight(true)>=K.scrollHeight&&F!==v)){this.pane.hide();
this.isActive=false
}else{if(this.el.clientHeight===K.scrollHeight&&F===v){this.slider.hide()
}else{this.slider.show()
}}this.pane.css({opacity:(this.options.alwaysVisible?1:""),visibility:(this.options.alwaysVisible?"visible":"")});
return this
};
D.prototype.scroll=function(){if(!this.isActive){return
}this.sliderY=Math.max(0,this.sliderY);
this.sliderY=Math.min(this.maxSliderTop,this.sliderY);
this.$content.scrollTop((this.paneHeight-this.contentHeight+p)*this.sliderY/this.maxSliderTop*-1);
if(!this.iOSNativeScrolling){this.slider.css({top:this.sliderY})
}return this
};
D.prototype.scrollBottom=function(E){if(!this.isActive){return
}this.reset();
this.$content.scrollTop(this.contentHeight-this.$content.height()-E).trigger(A);
return this
};
D.prototype.scrollTop=function(E){if(!this.isActive){return
}this.reset();
this.$content.scrollTop(+E).trigger(A);
return this
};
D.prototype.scrollTo=function(E){if(!this.isActive){return
}var M,F,H,J,K,G,I,L;
if(i.isPlainObject(E)){M=i(E.element);
F=(typeof E.alignWithTop==="undefined")?true:E.alignWithTop
}else{M=i(E);
F=true
}H=this.$content.offset().top;
J=this.$content.height();
K=M.offset().top;
G=M.outerHeight();
I=this.$content.scrollTop();
L=K+I-H;
if(!F){L=L-J+G
}this.reset();
this.scrollTop(L);
return this
};
D.prototype.stop=function(){this.stopped=true;
this.removeEvents();
this.pane.hide();
return this
};
D.prototype.destroy=function(){if(!this.stopped){this.stop()
}if(this.pane.length){this.pane.remove()
}this.$content.removeAttr("tabindex");
if(this.$el.hasClass("has-scrollbar")){this.$el.removeClass("has-scrollbar");
this.$content.css({right:""})
}return this
};
D.prototype.flash=function(){var E=this;
if(!this.isActive){return
}this.reset();
this.pane.addClass("flashed");
setTimeout(function(){E.pane.removeClass("flashed")
},this.options.flashDelay);
return this
};
return D
})();
i.fn.nanoScroller=function(D){return this.each(function(){var E,F;
if(!(F=this.nanoscroller)){E=i.extend({},s,D);
this.nanoscroller=F=new B(this,E)
}if(D&&typeof D==="object"){i.extend(F.options,D);
if(D.scrollBottom){return F.scrollBottom(D.scrollBottom)
}if(D.scrollTop){return F.scrollTop(D.scrollTop)
}if(D.scrollTo){return F.scrollTo(D.scrollTo)
}if(D.scroll==="bottom"){return F.scrollBottom(0)
}if(D.scroll==="top"){return F.scrollTop(0)
}if(D.scroll&&D.scroll instanceof i){return F.scrollTo(D.scroll)
}if(D.stop){return F.stop()
}if(D.destroy){return F.destroy()
}if(D.flash){return F.flash()
}}return F.reset()
})
}})(jQuery,window,document);
nhn.map.service.Panel=iron.Class({inherit:nhn.map.Dispatcher},{_LEGAL_NOTICE_URL:"/legalNotice.nhn",_CR_VIEW_URL:"https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=973&contentsNo=12043&interactiveMainNo=10924",_handlerCount:null,_panelWidth:340,_rollUpHeight:0,_menuClass:{MAIN:"panel_main",LOCATION:"panel_search",ROUTE:"panel_findway",BUS:"panel_bus",SUBWAY:"panel_subway",BOOKMARK:"panel_favorite",OPENMAP:"panel_theme"},_panelEl:null,_headerEl:null,_contentEl:null,_toggleBtn:null,_isWiden:false,_isFolded:false,_isAutoUnfold:true,initialize:function(){this._underIE8=this._underIE8=!!($.browser.msie&&parseInt($.browser.version,10)<=8);
this._assignElements();
this._attachEvent()
},_attachEvent:function(){this._footerEl.on("click","a._legalNotice",this._onClickLegalNotice.bind(this)).on("click","a._legend_btn",this._onClickLegend.bind(this)).on("click","a._hdc_open_report",this._onClickModifyRequest.bind(this));
nhn.map.DOMCache.getContent().on("click","a.spmh_snbv_close, a.spm_aside_sate_close",this._onClickFold.bind(this)).on("click","a.spmh_snbv_open, a.spm_aside_sate_open",this._onClickUnfold.bind(this));
this._foldEl.on("click",this._onClickFold.bind(this));
this._unfoldEl.on("click",this._onClickUnfold.bind(this))
},_onClickFold:function(b){b.preventDefault();
this.fold()
},_onClickUnfold:function(b){b.preventDefault();
this.unfold()
},fold:function(){if(this.$MapBlocker().isBlocking()){return
}this._isFolded=true;
this.$MapResizer().wide();
this.dispatch("fold")
},unfold:function(){if(this.$MapBlocker().isBlocking()){return
}this._isFolded=false;
this.$MapResizer().narrow();
this.dispatch("unfold")
},_assignElements:function(){var b=nhn.map.DOMCache.getWrap();
this._panelEl=$("#panel");
this._blind=this._panelEl.find("> h2.blind");
this._headerEl=$(".panel_top",this._panelEl);
this._contentWrap=this._panelEl.find(".panel_content");
this._scrollWrap=this._panelEl.find(".scroll_pane");
this._contentTopEl=$(".panel_content .panel_content_fixed",this._panelEl);
this._contentEl=$(".panel_content .panel_content_flexible",this._panelEl);
this._footerEl=$("#aside_footer",b);
this._legendBtn=$("a._legend_btn",this._footerEl);
this._modifyRequestEl=$("._hdc_open_report",this._footerEl);
this._foldEl=$("a.spmh_aside_close",b);
this._unfoldEl=$("a.spmh_aside_open",b);
if(!this._contentEl){alert("ResultPanel의 마크업이 변경되었습니다.")
}},_onClickLegalNotice:function(f){f.preventDefault();
var d=$.browser,b=330,c=navigator.platform.search(/win/i);
if(c>-1){if(d.chrome){b+=30
}else{b+=5
}}else{if(d.webkit){if(d.chrome){b-=10
}}}window.open(this._LEGAL_NOTICE_URL,"legalNotice","toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,top=100,left=100,width=410,height="+b).focus()
},_onClickModifyRequest:function(b){b.preventDefault();
if(NModules.has("panorama")&&this.$Panorama().isPlaying()){window.open(this._CR_VIEW_URL)
}},_onClickLegend:function(d){d.preventDefault();
var c=this.$legend(),b=this._legendBtn;
if(!c.getVisible()){c.show();
b.addClass("legend_on")
}else{c.hide();
b.removeClass("legend_on")
}},getPanelElement:function(){return this._panelEl[0]
},getFooterElement:function(){return this._footerEl[0]
},getLegendBtn:function(){return this._legendBtn&&this._legendBtn.parent()
},getContentElement:function(){return this._contentEl[0]
},getContentTopElement:function(){return this._contentTopEl[0]
},setContentHtml:function(b){if(!b){return
}this._contentEl.html(b);
this._panelEl.removeClass("_ssc_nclick");
this.refreshScrollBar()
},setContentByElement:function(c,b){if(!c){return
}if(!b){this._contentEl.empty()
}this._contentEl.append(c);
this._panelEl.removeClass("_ssc_nclick");
this.refreshScrollBar()
},setContent:function(b){if(typeof b!=="string"){this.setContentByElement.apply(this,arguments)
}else{this.setContentHtml.apply(this,arguments)
}},setContentTopHtml:function(b){this._clearMainFooter();
this._contentTopEl.html(b);
this.refreshScrollBar()
},setContentTopByElement:function(c,b){this._clearMainFooter();
if(!b){this._contentTopEl.empty()
}this._contentTopEl.append(c);
this.refreshScrollBar()
},setContentTop:function(b){if(typeof b!=="string"){this.setContentTopByElement.apply(this,arguments)
}else{this.setContentTopHtml.apply(this,arguments)
}},clearContentTop:function(){this._contentTopEl.empty()
},setHeader:function(b){if(typeof b!=="string"){this.setHeaderByElement(b)
}else{this.setHeaderHtml(b)
}},setHeaderHtml:function(b){if(!b){return
}this._headerEl.html(b)
},setHeaderByElement:function(c,b){if(!c){return
}if(!b){this._headerEl.empty()
}this._headerEl.append(c)
},clearHeader:function(){this._headerEl.empty();
this._panelEl.removeClass()
},setMainFooter:function(b){if(!b){return
}this._mainFooterEl=$(b);
this._contentWrap.after(this._mainFooterEl)
},_clearMainFooter:function(){if(!this._mainFooterEl){return
}this._mainFooterEl.remove();
delete this._mainFooterEl
},getHeaderElement:function(){if(this._headerEl){return this._headerEl[0]
}else{return null
}},getContentHtml:function(){return this._contentEl.html()
},clearContent:function(){this._contentEl.empty()
},getWidth:function(){return this._panelWidth
},isFolded:function(){return this._isFolded
},_bringSelectedItemIntoView:function(d){var d=d?d:this._contentEl.find("._selected");
if(!d.length){return
}var e=this._scrollWrap,c=e[0].getBoundingClientRect(),b=d[0].getBoundingClientRect();
if(b.bottom>c.bottom){this.scrollToElement(d,false)
}else{if(b.top<c.top){this.scrollToElement(d,true)
}}},_scrollIntoView:function(d,f){var e=this._scrollWrap,c=e[0].getBoundingClientRect(),b=d[0].getBoundingClientRect();
if(typeof f==="undefined"){f=true
}if(!f){e[0].scrollTop+=(b.bottom-c.bottom)
}else{e[0].scrollTop-=(c.top-b.top)
}},scrollToElement:function(b,c){b=$(b);
if(this._scroller){this._scroller.nanoScroller({scrollTo:{element:b,alignWithTop:c}})
}else{this._scrollIntoView(b,c)
}},selectItem:function(c,b){this.unselectItem();
c=$(c);
c.addClass("_selected");
b||this._bringSelectedItemIntoView(c)
},unselectItem:function(){this._contentEl.find("._selected").removeClass("_selected")
},_listenPanorama:function(){if(this._panoramaListener){return
}this._panoramaListener={openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this)};
this.$Panorama().attach(this._panoramaListener)
},_onOpenPanorama:function(){this._modifyRequestEl.data("mode","panorama")
},_onClosePanorama:function(){this._modifyRequestEl.data("mode","map")
},setBlindtext:function(b){this._blind.text(b)
},setBlindTextByMenu:function(c){var b={LOCATION:"지도 검색",ROUTE:"길찾기",BUS:"버스 검색",SUBWAY:"지하철 검색",BOOKMARK:"즐겨찾기",OPENMAP:"테마지도"};
this.setBlindtext(b[c]||"지도 검색")
},setPanelClassByMenu:function(c){var b=this._menuClass[c]||"";
this._panelEl[0].className=["panel",b].join(" ")
},addPanelClass:function(b){this._panelEl.addClass(b)
},removePanelClass:function(b){this._panelEl.removeClass(b)
},getNanoScroller:function(){return this._scroller
},resetScrollBar:function(){if(this._scroller){delete this._scroller
}this._scroller=this._contentWrap.nanoScroller();
this.scrollToTop()
},refreshScrollBar:function(b){if(!this._scroller){return this.resetScrollBar()
}if(!b){this.scrollToTop()
}this._scroller.nanoScroller()
},scrollToTop:function(){if(this._scroller){this._scroller.nanoScroller({scroll:"top"})
}else{this._scrollWrap[0].scrollTop=0
}},_listenMenuBar:function(){this.setBlindTextByMenu(this.$menubar().getMenuState());
this.$menubar().attach({after_change:this._afterChangeMenu.bind(this)})
},_afterChangeMenu:function(b){this.setBlindTextByMenu(b.newMenu);
this.setPanelClassByMenu(b.newMenu)
},_listenMapResizer:function(){this.$MapResizer().attach({resized:this._onMapResized.bind(this)})
},_onMapResized:function(){this.refreshScrollBar((this.$menubar().getMenuState()==="ROUTE"))
}});
(function(b){var e=nhn.map.DOMCache.getBody(),h=600,c=screen.availHeight,d="low_resolution",g=c<=h,f;
if(g){e.addClass(d)
}f={isLowResolution:function(){return g
}};
b.LowResolution=f
})(iron.ns("nhn.map.service"));
(function(){var b={helpdesk_help:{ops:"https://help.naver.com/support/service/main.nhn",param:"serviceNo=768",nclick:"fot.help"},helpdesk_ask:{ops:"http://help.naver.com/ops/step2/mail.nhn",param:"upCatg=235",nclick:"fot.qna"},helpdesk_disclaimer:{url:"http://www.naver.com/rules/disclaimer.html",nclick:"fot.disclaimer"},helpdesk_privacy:{url:"http://www.naver.com/rules/privacy.html",nclick:"fot.privacy"},helpdesk_rules:{url:"http://www.naver.com/rules/service.html",nclick:"fot.agreement"},helpdesk_submit:{url:"https://"+(nhn.map.Env.getServerPhase()!=="real"?"stage.":"")+"smartplace.naver.com",nclick:"fot.submit"}};
nhn.map.service.CustomerCenter=iron.Class({inherit:nhn.map.Dispatcher},{link:null,timer:null,initialize:function(){this._prepareDOM();
this._bindEvent()
},_prepareDOM:function(){var d=$("div.aside_footer"),c=d.find("a._hdc_open_custom");
this._el=d;
this._wrapper=c.parent();
this._helpdesk=d.find("._ly_helpdesk_custom")
},_bindEvent:function(){nhn.map.DOMCache.getDocument().on("click",this._onDocumentClick.bind(this));
var c=function(g){var f=9;
if(g.keyCode==f&&g.shiftKey){this._hideMenu()
}}.bind(this);
var d=function(g){var f=9;
if(g.keyCode==f){this._hideMenu()
}}.bind(this);
this._wrapper.on("click","a._hdc_open_custom, a._hdc_close_custom",this._toggleLayer.bind(this)).on("keydown","a._hdc_open_custom, a._hdc_close_custom",c);
this._helpdesk.on("click","ul > li > a",this._onClickLink.bind(this)).on("keydown","div > ul > li > a:first",c).on("keydown","div > ul > li > a:last",d)
},_onDocumentClick:function(d){var c=$(d.target).closest(this._wrapper);
if(c.length===0){this._hideMenu()
}},_toggleLayer:function(c){c.preventDefault();
this._wrapper.toggleClass("on")
},_hideMenu:function(){this._wrapper.removeClass("on")
},_showMenu:function(){this._wrapper.addClass("on")
},_onClickLink:function(f){f.preventDefault();
var d=$(f.target),c=d.data("menu"),g=b[c];
if(!g){return
}if(g.ops){this._openOPS(g)
}else{this._openWindow(g)
}this._hideMenu()
},_openOPS:function(c){OPS.viewOPS("ops",{url:c.ops,param:c.param})
},_openWindow:function(c){window.open(c.url)
},_sendNclick:function(d,c){nhn.map.LogClick({element:d.target,event:d,acode:c})
}})
}());
(function(){var c=["lat","lng","dlevel"],d=["pathType","dtPathType","slng","slat","sText","elng","elat","eText","t1lng","t1lat","t1Text","t2lng","t2lat","t2Text","t3lng","t3lat","t3Text","t4lng","t4lat","t4Text","t5lng","t5lat","t5Text"],b=["mapMode","menu"];
nhn.map.service.Report=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._prepareDOM();
this._bindEvent()
},_prepareDOM:function(){var f=$("div.aside_footer"),e=f.find("a._hdc_open_report");
this._el=f;
this._wrapper=e.parent();
this._report=f.find("._ly_helpdesk_report")
},_bindEvent:function(){nhn.map.DOMCache.getDocument().on("click",this._onDocumentClick.bind(this));
var e=function(h){var g=9;
if(h.keyCode==g&&h.shiftKey){this._hideMenu()
}}.bind(this);
var f=function(h){var g=9;
if(h.keyCode==g){this._hideMenu()
}}.bind(this);
this._wrapper.on("click","a._hdc_open_report, a._hdc_close_report",this._toggleLayer.bind(this)).on("keydown","a._hdc_open_report, a._hdc_close_report",e);
this._report.on("click","ul > li > a",this._onClickLink.bind(this)).on("keydown","div > ul > li > a:first",e).on("keydown","div > ul > li > a:last",f)
},_onDocumentClick:function(g){var f=$(g.target).closest(this._wrapper);
if(f.length===0){this._hideMenu()
}},_toggleLayer:function(i){i.preventDefault();
var h=$(i.target),g=h.parent(),f=(h.data("mode")||g.data("mode"))==="panorama";
if(f){return
}this._wrapper.toggleClass("on")
},_hideMenu:function(){this._wrapper.removeClass("on")
},_showMenu:function(){this._wrapper.addClass("on")
},_onClickLink:function(h){h.preventDefault();
var g=$(h.target),f=g.data("menu");
if(!f){return
}this._hideMenu();
this.reportError(null,f)
},_openPopup:function(f,e,g){return window.open(f,e,g)
},_openTab:function(f,e){return window.open(f,e,"")
},_openBugreportWindow:function(f){var e="bug_report",g=["toolbar=no","location=no","status=no","menubar=no","scrollbars=no","resizable=no","width=795"];
if(f.tab==="map"){g.push("height=686")
}else{g.push("height=611")
}if(!!f.routePathAndStyle){var h;
if(!!navigator.userAgent.match(/Trident.*rv\:11\./)){f.combinedURL+="&openpopup=true";
h=this._openTab(f.combinedURL,e)
}else{h=this._openPopup(f.combinedURL,e,g.join(","))
}this._submitRoutePath(h,e,f.combinedURL,f.routePathAndStyle)
}else{this._openPopup(f.combinedURL,e,g.join(","))
}},_submitRoutePath:function(g,h,j,f){if(!g){return
}var i=document.createElement("form");
var e=document.createElement("input");
i.method="POST";
i.target=h;
i.action=j;
e.type="text";
e.name="routePathAndStyle";
e.value=f;
i.appendChild(e);
document.body.appendChild(i);
i.submit();
$(i).remove();
delete i
},reportErrorWithInfoWindow:function(){var e=this._getPublicTransportType(),f=this._getInfoWindowData();
if(e){this.reportError({tab:"pubtrans",additionalParam:{id:f.id,target:f.name||f.stationName,type:e}})
}else{if(this._getInfoWindowType().toLowerCase()==="address"){this.reportError({tab:"map"})
}else{this.reportError({tab:"place",additionalParam:{id:f.id}})
}}},reportError:function(g,f){var h=this._getErrorReportInfo(g,f);
if(f==="place"||h.combinedURL.indexOf("tab=place")>-1){var i=nhn.map.Env.getServerPhase()==="real"?"https://smartplace.naver.com/suggestion/modification":"https://stage.smartplace.naver.com/suggestion/modification",j=h.combinedURL.match(/id=(\d*)/),m=(j&&j[1])?j[1]:"",e=this.$map().getCenter().toLatLng(),l="";
if(!m){l="&"+$.param({lat:e.y,lng:e.x,bounds:this._getLatLngBounds().join(",")})
}this._openPopup(i+"?id="+m+l,"spot_modify","toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=794,height=611");
return
}this._openBugreportWindow(h)
},_getErrorReportInfo:function(v,l){var h=nhn.map.Env.getVar("bugreportURL"),j=this.$sharing().getURLData(),n="map",o=j.toURL(c,b,true),u={},f=this._getLatLngBounds().join(",");
if(!v){switch(j.getData("menu")){case"location":var g=this._getSearchResults();
if(g.type==="REGION_HOME"&&this._getInfoWindowType()){var m=this._getErrorReportInfoWithInfoWindow();
n=m.tab;
u=m.additionalParam||{}
}else{if(g.type==="BUS"){n="pubtrans"
}else{if(g.type==="SITE_1"){var e=g.list.map(function(w){return w.id.replace("s","")
});
n="place";
u={id:e.join(","),type:"batch"}
}}}break;
case"route":var r=this._getRouteResultFromPrintData()[0];
n="route";
o=j.toURL(c.concat(d),b,true);
break;
case"bus":n="pubtrans";
u={type:"ctbus"};
break;
case"subway":n="pubtrans";
u={type:"subway"};
break;
case"bookmark":var s=this.$bookmark(),p=s.getSelectedBookmark(),q=s.getBookmarkGroupType();
if(p){var m=this._getErrorReportInfoWithInfoWindow();
n=m.tab;
u=m.additionalParam||{}
}else{if(q==="place"){n="place"
}else{if(q==="route"){n="route"
}else{if(q==="bus"||q==="subway"){n="pubtrans"
}}}}break;
default:break
}}else{if(v.tab){n=v.tab
}if(v.additionalParam){u=v.additionalParam
}}u.bounds=f;
o=$.param(u)+"&"+o;
var t=h+"?tab=",i=(n==="route"&&r)?r.paths:null;
if(!v&&(l!==n)){t+=(l+"&bounds="+f);
i=null
}else{t+=(n+"&"+o)
}return{url:h,param:o,tab:n,routePathAndStyle:i,combinedURL:t}
},_getErrorReportInfoWithInfoWindow:function(){var f=this._getPublicTransportType(),g=this._getInfoWindowData(),e;
if(f){e={tab:"pubtrans",additionalParam:{id:g.id,target:g.name||g.stationName,type:f}}
}else{if(this._getInfoWindowType().toLowerCase()==="address"){e={tab:"map"}
}else{e={tab:"place",additionalParam:{id:g.id}}
}}return e
},_getPublicTransportType:function(){var g=this._getInfoWindowType().indexOf("bus")>-1,f=this._getInfoWindowData().theme,e;
if(g){e="ctbus"
}if(f){if(+f.isSubway){e="subway"
}if(+f.isStation){e="train"
}if(+f.isTerminal){e="itbus"
}if(+f.isAirport){e="airplane"
}}return e
},_getLatLngBounds:function(){var g=this.$map().getBound(),f=new nhn.mapcore.Inner(g[0],g[3]).toLatLng(),e=new nhn.mapcore.Inner(g[2],g[1]).toLatLng();
return[f.y,f.x,e.y,e.x]
},_getInfoWindowType:function(){var e=this.$action().getInfoWindow(),g=this._getInfoWindowData()||{},f=e?e.getType().toLowerCase():null;
if(f==="panorama"&&g.MarkerType){f=g.MarkerType.toLowerCase()
}return f
},_getInfoWindowData:function(){var e=this.$action().getInfoWindow();
return e&&e.getModel().getData()
},_getSearchResults:function(){var h=this._getServiceData("search"),g=h.data,e;
if(g){var f;
if(g.site){f=g.site.list
}else{if(g.address){f=g.address.list
}else{if(g.bus){f=g.bus.list
}}}e={type:g.type,boundary:g.boundary,selected:g.selected,list:f}
}return e
},_getRouteResultFromPrintData:function(){var e=this.$sharing().getMapData();
if(!e.print){return
}return $.grep(e.print,function(f){return f.name==="route"
})
},_getServiceData:function(h){var l=this.$sharing().getMapData(),j=l.service,f;
for(var g=0,e=j.length;
g<e;
++g){if(j[g].name===h){f=j[g];
break
}}return f
},_getInterCityExtraQuery:function(f){var e={pbsMapObj:f.StartPath.error?"0":f.StartPath.info.mapObj,pbeMapObj:f.EndPath.error?"0":f.EndPath.info.mapObj};
if(f.ViaPath){var g=f.ViaPath;
e.SX=g.SX;
e.SY=g.SY;
e.startSTN=encodeURIComponent(Base64.encode(g.startSTN));
e.EX=g.EX;
e.EY=g.EY;
e.endSTN=encodeURIComponent(Base64.encode(g.endSTN))
}return e
},submitRegisterInfo:function(g){var i=nhn.map.Env.getServerPhase()==="real"?"https://smartplace.naver.com/businesses/new":"https://stage.smartplace.naver.com/businesses/new",j=new nhn.mapcore.Inner(g.point.x,g.point.y).toLatLng(),h=function(n){var e,m,l;
if(n.isNewAddress){e=n.address;
m=n.mappedAddress&&n.mappedAddress.fullAddress
}else{m=n.address
}if(e&&m){l=[i,"?addr=",encodeURIComponent(m),"&roadaddr=",encodeURIComponent(e)].join("")
}else{if(m){l=[i,"?addr=",encodeURIComponent(m)].join("")
}else{if(e){l=[i,"?roadaddr=",encodeURIComponent(e)].join("")
}}}window.location=l
},f=function(l){nhn.map.service.Alert("해당 위치에서는 업체를 등록할 수 없습니다.<br>정확한 위치에서 다시 시도해 주세요.")
};
this._requestAddress(j,h,f)
},spotRegistration:function(g){var f=function(){this.$spot_registration().showForm(new nhn.mapcore.Inner(g.point.x,g.point.y).toLatLng())
}.bind(this);
NModules.loadAndCall("register",f)
},_requestAddress:function(g,f,e){if(!this._addrService){this._addrService=nhn.map.service.AddressService.getInstance()
}this._addrService.requestAddress(g,f,e)
},_sendNclick:function(g,f){nhn.map.LogClick({element:g.target,event:g,acode:f})
},_listenContextMenu:function(){this.$ctxMenu().attach("item_clicked",this._onClickContextItem.bind(this))
},_listenInfoWindowAction:function(){this.$action().attach("openBugReport",this._onClickInfoWindowModifyRequest.bind(this))
},_onClickInfoWindowModifyRequest:function(){this.reportErrorWithInfoWindow()
},_onClickContextItem:function(f){if(f.msgName==="SEND_REPORT_ERROR"){this.reportError({isContextMenu:true})
}else{if(f.msgName==="REGISTER_SPOT"){this.submitRegisterInfo(f)
}else{if(f.msgName==="USER_REGISTER_SPOT"){this.spotRegistration(f)
}else{return
}}}}})
}());
(function(q,r,i,e){var l="traffic",b="cctv",f="bicycle",n="weather",p="cadastral",o=i.extend({},q.map.weather.Const.WEATHER_TYPE);
var g=2000;
var h="mts";
var d=r.ns("nhn.map.panorama").Const;
function j(u,s,v){var t=(v)?s+"on":s+"off";
q.map.LogClick({acode:[h,t].join("."),element:u.target,event:u})
}function c(u,t,v){var s=t;
switch(t){case o.WEATHER:s="winfo";
break;
case o.WIND:s="wind";
break;
case o.RADIATION:s="radiation";
break
}s=(v)?s+"on":s+"off";
q.map.LogClick({acode:[h,s].join("."),element:u.target,event:u})
}function m(s,t){var u=s;
switch(s){case l:u="realtraffic";
break;
case b:u="cctv";
break;
case f:u="overlaybicycle";
break;
case p:u="cadastralmap";
break
}if(u&&t){u="mini_"+u
}q.map.LogPV(u)
}r.ns("nhn.map.service").TopicControl=r.Class({inherit:q.map.Dispatcher,mix:[q.map.UIComponent]},{initialize:function(){this._targetCheckboxLayerToBeHidden=i();
this._indoorID=null;
this._floor=null
},_onActivate:function(){this._prepareDom();
this._bindEvent()
},_onDeactivate:function(){this._unbindEvent()
},_prepareDom:function(){this._el=i("div.sel_subject")
},_bindEvent:function(){var t=this._el.find("> ul > li"),s=t.find("div"),u=t.find(".ly_ssel_weather");
t.on("click",this._onClickSwitch.bind(this)).on("mouseenter",this._onMouseenterSwitch.bind(this)).on("mouseleave",this._onMouseleaveSwitch.bind(this)).on("mousedown",this._onMousedown.bind(this));
s.on("mouseenter",this._onMouseenterCheckboxLayer.bind(this)).on("mouseleave",this._onMouseleaveCheckboxLayer.bind(this));
u.on("click","> ul > li",this._onClickWeatherType.bind(this))
},_unbindEvent:function(){var s=this._el.find("> ul > li"),t=s.find(".ly_ssel_weather");
s.off();
t.off()
},_onClickSwitch:function(t){var s=i(t.currentTarget).find("[data-topic]").data("topic"),u=i(t.currentTarget).hasClass("on");
if(u){this.switchOff(s)
}else{this.switchOn(s);
m(s,this._isPanoramaOpened)
}j(t,s,!u)
},_onMouseenterSwitch:function(x){var t=i(x.currentTarget),w=t.find("> div"),s=t.hasClass("on"),v=t.siblings(),y=v.find("> div"),u=i().add(w).add(y);
if(i(x.target).closest(u).length>0){return
}s&&this._showCheckboxLayer(w)
},_onMouseleaveSwitch:function(y){var s=i(y.currentTarget),x=s.siblings(),v=i().add(s).add(x),w=i(y.relatedTarget).closest(v),u=v.find("> div"),t=w.find("> div");
this._hideCheckboxLayer(u.not(t))
},_onMousedown:function(v){v.preventDefault();
var s=i(v.currentTarget),u=s.find("div"),t=this._el.find("div");
t.not(u).hide()
},_onMouseenterCheckboxLayer:function(t){var s=i(t.currentTarget);
this._showCheckboxLayer(s)
},_onMouseleaveCheckboxLayer:function(t){var s=i(t.currentTarget);
this._hideCheckboxLayer(s)
},_showCheckboxLayer:function(s){this._cancelHidingCheckboxLayer(s);
s.show()
},_hideCheckboxLayer:function(s){this._cancelHidingCheckboxLayer();
this._targetCheckboxLayerToBeHidden=s;
this._checkboxLayerTimer=window.setTimeout(function(){this._targetCheckboxLayerToBeHidden.hide();
this._targetCheckboxLayerToBeHidden=i();
delete this._checkboxLayerTimer
}.bind(this),g)
},_cancelHidingCheckboxLayer:function(s){if(s){this._targetCheckboxLayerToBeHidden=this._targetCheckboxLayerToBeHidden.not(s)
}else{this._checkboxLayerTimer&&window.clearTimeout(this._checkboxLayerTimer);
this._targetCheckboxLayerToBeHidden=i();
delete this._checkboxLayerTimer
}},_onClickWeatherType:function(w){w.stopPropagation();
var v=i(w.target),u=i(w.currentTarget),t=i(u.find("input[type=checkbox]")),s=t.data("weather_type"),x=t.prop("checked");
if(v.is("label")){return
}if(x){this.$WeatherService().selectWeatherType(s)
}else{this.$WeatherService().deselectWeatherType(s)
}c(w,s,x)
},switchOn:function(s){switch(s){case l:this.$Map().loadTrafficPane();
break;
case b:this.$bridge().activateCCTV();
break;
case f:this.$Map().loadBicyclePane();
break;
case p:this.$Map().loadCadastralPane();
break;
case n:NModules.load("weather",function(){this.$WeatherService().activate();
this.$WeatherService().selectWeatherType(o.WEATHER)
}.bind(this));
break
}this.dispatch("topicOn",{topic:s})
},switchOff:function(s){switch(s){case l:this.$Map().unloadTrafficPane();
break;
case b:this.$bridge().deactivateCCTV();
break;
case f:this.$Map().unloadBicyclePane();
break;
case p:this.$Map().unloadCadastralPane();
break;
case n:NModules.has("weather")&&this.$WeatherService().deactivate();
break
}},switchOffAll:function(){var s=this;
this._el.find("li.on").each(function(t,u){s.switchOff(i(u).children().data("topic"))
})
},_updateUiOfMapType:function(u){var s=this.$Map().isActiveMapType(u),t=this._el.find('[data-topic="'+u+'"]').closest("li");
t.toggleClass("on",s)
},_updateUiOfWeather:function(){var v=this._el.find('[data-topic="'+n+'"]').closest("li"),s=v.find(".ly_ssel_weather"),t=v.find(".input_chk"),u=this.$WeatherService().getSelectedWeatherTypes();
t.each(function(){var w=i(this).data("weather_type"),x=u.indexOf(w)>-1;
if(x){i(this).prop("checked",true)
}else{i(this).prop("checked",false)
}});
if(u.length>0){!v.hasClass("on")&&v.addClass("on");
s.show()
}else{v.removeClass("on");
s.hide()
}},getElement:function(){return this._el?this._el[0]:null
},_listenMap:function(){this.$Map().attach({AFTER_MSG_APP_READY:this._onAppReady.bind(this),REGISTER_MAP_TYPE_DONE:this._onRegisterMapTypeDone.bind(this),UNREGISTER_MAP_TYPE_DONE:this._onUnregisterMapTypeDone.bind(this)})
},_onAppReady:function(){this.activate()
},_onRegisterMapTypeDone:function(t){var s=t.mapType;
this._updateUiOfMapType(s);
if(s===l){this.$TrafficGuide().activate()
}},_onUnregisterMapTypeDone:function(t){var s=t.mapType;
this._updateUiOfMapType(s);
if(s===l){this.$TrafficGuide().deactivate()
}},_listenWeatherService:function(){this.$WeatherService().attach({select:this._onSelectWeather.bind(this),deselect:this._onDeselectWeather.bind(this)})
},_onSelectWeather:function(){this._updateUiOfWeather()
},_onDeselectWeather:function(){this._updateUiOfWeather()
},getTopicToRestore:function(){return this._topicToRestore||[]
},_listenPanorama:function(){this.$Panorama().attach({openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this),layoutChanged:this._onLayoutChanged.bind(this),panoramaStatusChanged:this._onPanoramaStatusChanged.bind(this)})
},_onOpenPanorama:function(){if(this._isPanoramaOpened){return
}else{this._isPanoramaOpened=true
}this._topicToRestore=[];
this._el.find("[data-topic]").filter(function(){var s=i(this).data("topic");
return[f,p].indexOf(s)==-1
}).each(function(t,s){i(s).closest("li").hide()
}).filter(function(){return i(this).closest("li").hasClass("on")
}).map(function(s,t){return i(t).data("topic")
}).each(function(t,s){if(s===n){this.$WeatherService().pause()
}else{this.switchOff(s)
}this._topicToRestore.push(s)
}.bind(this));
this._el.attr("class","mmc_sel_subject");
this._replaceClassName(this._el,"spm","spmc");
i(this.$MapControlBar().getElement()).prepend(this._el);
this.$Map().addIgnoreClass("mmc_sel_subject");
if(this.$Panorama().getLayout()===d.MINIMAP_EXPANDED){this._el.show()
}else{this._el.hide()
}},_onClosePanorama:function(){this._el.find("[data-topic]").filter(function(){var s=i(this).data("topic");
return[f,p].indexOf(s)==-1
}).each(function(t,s){i(s).closest("li").show()
});
this._topicToRestore.forEach(function(s){if(s===n){this.$WeatherService().resume()
}else{this.switchOn(s)
}}.bind(this));
this._el.attr("class","sel_subject");
this._replaceClassName(this._el,"spmc","spm");
q.map.DOMCache.getLnbWrap().append(this._el);
this._el.show();
this.$Map().removeIgnoreClass("mmc_sel_subject");
this._indoorID=null;
this._floor=null;
delete this._isPanoramaOpened
},_onLayoutChanged:function(u){var s=this.$Panorama().getPanoramaData();
if(!s){return
}var t=s.zoneID;
if(u.newLayout==d.MINIMAP_EXPANDED){if(!t){this._el.show()
}}else{this._el.hide()
}},_onPanoramaStatusChanged:function(v){var s=v.panoramaStatus,u=s.zoneID,t=s.zorder;
if(u&&t){this.hide()
}else{this.show()
}this._indoorID=u;
this._floor=t
},show:function(){var s=this.$Panorama().getLayout();
if(s===d.MINIMAP_EXPANDED){this._el.show()
}else{this._el.hide()
}},hide:function(){this._el.hide()
},_replaceClassName:function(u,t,s){var v=new RegExp(t,"g");
u.find("[class]").filter(function(){var w=i(this).attr("class");
return w.match(v)
}).each(function(){var x=i(this).attr("class"),w=x.replace(v,s);
i(this).attr("class",w)
})
}})
}(nhn,iron,jQuery));
(function(q,r,l,g){var d="vector",c="satellite",m="hybrid",o="terrain";
var h=2000,f="nmap_map_type_control",b="nmap_map_mode";
var e=r.ns("nhn.map.panorama").Const;
var j=(function(u,s){var t=!!r.Storage;
return{clear:function(){if(t){return r.Storage.removeItem(u)
}},getModel:function(){var x={};
if(t){var v=r.Storage.getItem(u);
try{x=JSON.parse(v)||{}
}catch(y){x={}
}}if(!x.options){var w={};
w[m]=true;
x.options=w;
this.setModel(x)
}return x
},setModel:function(w){var v=JSON.stringify(w);
if(t){r.Storage.setItem(u,v)
}this._syncMapMode(w)
},_syncMapMode:function(w){var v=this._getMapModeFromModel(w);
if(t){r.Storage.setItem(s,v)
}},_getMapModeFromModel:function(v){if(v.mapType===d){return 0
}else{if((v.mapType===c||v.mapType===m)&&v.options[m]){return 1
}else{if(v.mapType===c||v.mapType===m){return 2
}else{if(v.mapType===o){return 3
}}}}}}
}(f,b));
var i="mts";
function n(u,t,v){var s=(v)?t+"on":t+"off";
q.map.LogClick({acode:[i,s].join("."),element:u.target,event:u})
}function p(u,s){var t=u;
switch(u){case d:t="maptypevector";
break;
case c:t="maptypesatellite";
break;
case m:t="maptypehybrid";
break;
case o:t="maptypeterrain";
break
}if(t&&s){t="mini_"+t
}q.map.LogPV(t)
}r.ns("nhn.map.service").MapTypeControl=r.Class({inherit:q.map.Dispatcher,mix:[q.map.UIComponent]},{initialize:function(){this._mapListener={REGISTER_MAP_TYPE_DONE:this._onRegisterMapTypeDone.bind(this),UNREGISTER_MAP_TYPE_DONE:this._onUnregisterMapTypeDone.bind(this)};
this._indoorID=null;
this._floor=null
},_onActivate:function(){var s=this.$Map().getActiveMapType();
this._prepareDom();
this._bindEvent();
s.forEach(function(t){this._updateUiOfMapType(t);
this._updateUiOfSwitchOption(t);
this.switchTo(t)
}.bind(this))
},_onDeactivate:function(){this._unbindEvent()
},_prepareDom:function(){this._el=l("div.sel_satellite")
},_bindEvent:function(){var t=this._el.find("> ul > li"),s=t.find("div"),v=this._el.find("img"),w=t.find(".ly_ssel_basic"),u=t.find(".ly_ssel_satellite");
t.on("click",this._onClickSwitch.bind(this)).on("mouseenter",this._onMouseenterSwitch.bind(this)).on("mouseleave",this._onMouseleaveSwitch.bind(this)).on("mousedown",this._onMousedownSwitch.bind(this));
s.on("mouseenter",this._onMouseenterCheckboxLayer.bind(this)).on("mouseleave",this._onMouseleaveCheckboxLayer.bind(this));
w.on("click","> p",this._onClickTerrain.bind(this));
u.on("click","> p",this._onClickHybrid.bind(this));
v.on("click",this._onClickNoticeLayer.bind(this));
this.$Map().attach(this._mapListener)
},_unbindEvent:function(){var s=this._el.find("> ul > li"),t=s.find(".ly_ssel_satellite");
s.off();
t.off();
this.$Map().dettach(this._mapListener)
},_onClickSwitch:function(v){var s=l(v.currentTarget),u=s.find("> div"),t=s.find("[data-map_type]").data("map_type"),w=s.hasClass("on");
if(!w){this.switchTo(t);
u.show();
p(t,this._isPanoramaOpened)
}},_onMouseenterSwitch:function(x){var t=l(x.currentTarget),w=t.find("> div"),s=t.hasClass("on"),v=t.siblings(),y=v.find("> div"),u=l().add(w).add(y);
if(l(x.target).closest(u).length>0){return
}s&&this._showCheckboxLayer(w)
},_onMouseleaveSwitch:function(y){var s=l(y.currentTarget),x=s.siblings(),v=l().add(s).add(x),w=l(y.relatedTarget).closest(v),u=v.find("> div"),t=w.find("> div");
this._hideCheckboxLayer(u.not(t))
},_onMousedownSwitch:function(v){v.preventDefault();
var s=l(v.currentTarget),u=s.find("div"),t=this._el.find("div");
t.not(u).hide()
},_onMouseenterCheckboxLayer:function(t){var s=l(t.currentTarget);
this._showCheckboxLayer(s)
},_onMouseleaveCheckboxLayer:function(t){var s=l(t.currentTarget);
this._hideCheckboxLayer(s)
},_showCheckboxLayer:function(s){if(this._isLayerOpened){return
}this._cancelHidingCheckboxLayer();
s.show()
},_hideCheckboxLayer:function(s){this._cancelHidingCheckboxLayer();
this._checkboxLayerTimer=window.setTimeout(function(){s.hide();
delete this._checkboxLayerTimer
}.bind(this),h)
},_cancelHidingCheckboxLayer:function(){this._checkboxLayerTimer&&window.clearTimeout(this._checkboxLayerTimer);
delete this._checkboxLayerTimer
},_onClickNoticeLayer:function(u){var t=l(u.currentTarget),s=this.getOptions();
window.clearTimeout(this._layerTimeout);
this._layerTimeout=null;
t.css("opacity",0);
t.hide();
this._isLayerOpened=false;
this._showCheckboxLayer(l(".ly_ssel_basic",this._el));
this.$Map().loadTerrainPane();
s[o]=true;
this.setOptions(s)
},_onClickTerrain:function(x){var w=l(x.target),v=l(x.currentTarget),t=v.find("input[type=checkbox]"),u=t.data("map_type"),y=t.prop("checked"),s=this.getOptions();
if(w.is("label")){return
}if(y){this.$Map().loadTerrainPane();
s[o]=true;
p(u,this._isPanoramaOpened)
}else{this.$Map().loadVectorPane();
s[o]=false
}n(x,u,s[o]);
this.setOptions(s)
},switchOffTerrain:function(){var s=this.getOptions();
s.terrain=true;
this.$Map().loadVectorPane();
this._el.find("#chk_basic").attr("checked",false)
},_onClickHybrid:function(x){var w=l(x.target),v=l(x.currentTarget),t=v.find("input[type=checkbox]"),u=t.data("map_type"),y=t.prop("checked"),s=this.getOptions();
if(w.is("label")){return
}if(y){this.$Map().loadHybridPane();
s[m]=true;
p(u,this._isPanoramaOpened)
}else{this.$Map().unloadHybridPane();
s[m]=false
}n(x,u,s[m]);
this.setOptions(s)
},switchTo:function(u){var t=j.getModel(),s=this.getOptions();
switch(u){case d:this.$Map().loadVectorPane();
s[o]&&this.$Map().loadTerrainPane();
break;
case c:this.$Map().loadSatellitePane();
s[m]&&this.$Map().loadHybridPane();
break
}t.mapType=u;
j.setModel(t)
},getMapType:function(){var s=j.getModel();
return s.mapType
},_updateUiOfMapType:function(v){var t=this.$Map().isActiveMapType(v),u=this._el.find('[data-map_type="'+v+'"]').closest("li"),s;
if(u.length===0){return
}if(t){s=q.map.DOMCache.getWrap();
if(v===c||v===m){s.addClass("wrap_satellite")
}else{s.removeClass("wrap_satellite")
}!u.hasClass("on")&&u.addClass("on")
}else{u.removeClass("on")
}},_updateUiOfSwitchOption:function(w){var s=this.$Map().isActiveMapType(w),v=(w===m)?c:d,t=this._el.find('[data-map_type="'+v+'"]').closest("li"),u=t.find('[data-map_type="'+w+'"]');
if(s){u.prop("checked",true)
}else{u.prop("checked",false)
}},getOptions:function(){var s=j.getModel();
return s.options
},setOptions:function(t){var s=j.getModel();
s.options=t;
j.setModel(s)
},getElement:function(){return this._el?this._el[0]:null
},_listenMap:function(){this.$Map().attach({AFTER_MSG_APP_READY:this._onAppReady.bind(this)})
},_onAppReady:function(){this.activate()
},_onRegisterMapTypeDone:function(t){var s=t.mapType;
if(s==m){this._updateUiOfSwitchOption(s)
}else{if(s==o){this._updateUiOfSwitchOption(s);
this._updateUiOfMapType(s)
}else{this._updateUiOfMapType(s)
}}},_onUnregisterMapTypeDone:function(t){var s=t.mapType;
if(s==m){this._updateUiOfSwitchOption(s)
}else{if(s==o){this._updateUiOfSwitchOption(s);
this._updateUiOfMapType(s)
}else{this._updateUiOfMapType(s)
}}},_listenPanorama:function(){this.$Panorama().attach({openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this),layoutChanged:this._onLayoutChanged.bind(this),panoramaStatusChanged:this._onPanoramaStatusChanged.bind(this)})
},_onOpenPanorama:function(){if(this._isPanoramaOpened){return
}else{this._isPanoramaOpened=true
}this._el.attr("class","mmc_sel_satellite");
this._replaceClassName(this._el,"spm","spmc");
l(this.$MapControlBar().getElement()).prepend(this._el);
this.$Map().addIgnoreClass("mmc_sel_satellite");
i="pno*m";
if(this.$Panorama().getLayout()===e.MINIMAP_EXPANDED){this._el.show()
}else{this._el.hide()
}},_onClosePanorama:function(){this._el.attr("class","sel_satellite");
this._replaceClassName(this._el,"spmc","spm");
q.map.DOMCache.getLnbWrap().append(this._el);
this._el.show();
this.$Map().removeIgnoreClass("mmc_sel_satellite");
i="mts";
this._indoorID=null;
this._floor=null;
delete this._isPanoramaOpened
},_onLayoutChanged:function(u){var s=this.$Panorama().getPanoramaData();
if(!s){return
}var t=s.zoneID;
if(u.newLayout==e.MINIMAP_EXPANDED){if(!t){this._el.show()
}}else{this._el.hide()
}},_onPanoramaStatusChanged:function(v){var s=v.panoramaStatus,u=s.zoneID,t=s.zorder;
if(u&&t){this.hide()
}else{this.show()
}this._indoorID=u;
this._floor=t
},show:function(){var s=this.$Panorama().getLayout();
if(s===e.MINIMAP_EXPANDED){this._el.show()
}else{this._el.hide()
}},hide:function(){this._el.hide()
},_replaceClassName:function(u,t,s){var v=new RegExp(t,"g");
u.find("[class]").filter(function(){var w=l(this).attr("class");
return v.test(w)
}).each(function(){var x=l(this).attr("class"),w=x.replace(v,s);
l(this).attr("class",w)
})
}})
}(nhn,iron,jQuery));
nhn.map.service.GnbMenu=iron.Class({initialize:function(){this._closeGnbArea()
},_closeGnbArea:function(){var b=nhn.map.DOMCache.getDocument();
$(b).on("click",function(c){if($(c.target).closest(".map_gnb_wrap").size()===0){window.gnbAllLayerClose&&window.gnbAllLayerClose()
}})
}});
(function(){var f=iron.ns("nhn.map.service");
f.KeyboardNavigation=iron.Class(nhn.map.Dispatcher,{initialize:function(){this.$document=nhn.map.DOMCache.getDocument();
this._nDiffValue=150;
this._nIntervalTime=150;
this._nUpMovement=0;
this._nDownMovement=0;
this._nLeftMovement=0;
this._nRightMovement=0;
this._bMouseDown=false;
this._bDisableKeyForPanel=false;
this._bDisableKeyForTheme=false;
this._oCodeToKey={38:"Up",40:"Down",37:"Left",39:"Right",107:"ZoomIn",187:"ZoomIn",109:"ZoomOut",189:"ZoomOut",27:"ESC"};
this._oZoomMode={In:1,Out:-1};
this._bindMapEvent()
},_bindMapEvent:function(){this.$document.on("mousedown",this._onDocumentMouseDown.bind(this));
this.$map().attach({BEGIN_DRAG_DONE:this._onDisableKeyForMouse.bind(this,true),END_DRAG_DONE:this._onDisableKeyForMouse.bind(this,false)})
},_onMapReady:function(){this.$document.on("mousedown",this._onDocumentMouseDown.bind(this))
},_onDocumentMouseDown:function(n){var l=n.target,m=nhn.map.DOMCache.getAsideArea(),o=null,j,g,h;
try{o=document.activeElement
}catch(i){o=null
}if(l.tagName==null&&navigator.appName=="Microsoft Internet Explorer"){return
}j=l.tagName.toLowerCase(),g=o&&o.tagName.toLowerCase(),h=$(l).parents().is(m)||$(l).parents().is("._bus_route_layer");
this._onDisableKeyForPanel(h);
if($.browser.msie&&j!="input"&&g=="input"){o.blur()
}},_onDisableKeyForMouse:function(g){this._bMouseDown=g
},_onDisableKeyForPanel:function(g){this._bDisableKeyForPanel=g
},setDisableKeyForTheme:function(g){this._bDisableKeyForTheme=g
},_isDisableKeyNavigation:function(h){var g=$(h.target);
return(g&&g.is("input"))||(g&&g.parents("._listviewly").length)||this._bMouseDown||this._bDisableKeyForPanel||this._bDisableKeyForTheme
},_moveStart:function(g){this["_n"+g+"Movement"]=this._nDiffValue*(g=="Down"||g=="Right"?-1:1);
if(!this._nTimer){this._moveMap();
this._nTimer=setInterval(this._moveMap.bind(this),this._nIntervalTime)
}},_moveMap:function(){var h=this._nLeftMovement+this._nRightMovement,g=this._nUpMovement+this._nDownMovement;
this.$map().panMap(h,g)
},_moveStop:function(g){this["_n"+g+"Movement"]=0;
if(this._nTimer){clearInterval(this._nTimer);
this._nTimer=null
}},_zoomInOut:function(h){var g=this.$map().getLevel();
this.$map().delayZoom(g+h,null,{useEffect:true,relativeLevel:false,centerMark:true})
},activateKeyNavigation:function(){e.apply(this)
},deactivateKeyNavigation:function(){b.apply(this)
},_listenPanorama:function(){this.$Panorama().attach({openPanorama:b.bind(this),closePanorama:e.bind(this)})
}});
function e(){this.$document.on("keydown.keyevent",d.bind(this)).on("keyup.keyevent",c.bind(this))
}function b(){this.$document.off("keydown.keyevent").off("keyup.keyevent")
}function d(i){var h=jindo.$Event(i),g=this._oCodeToKey[i.keyCode];
if(this._isDisableKeyNavigation(i)){this._bDisableKeyForTheme&&i.preventDefault();
return
}this.dispatch("keydown",{domEvent:i.originalEvent,keyCode:i.keyCode,keyCodeText:g});
switch(g){case"Up":case"Down":case"Left":case"Right":i.preventDefault();
this.dispatch(g.toLowerCase());
this._moveStart(g);
break;
case"ZoomIn":i.preventDefault();
this._zoomInOut(this._oZoomMode.In);
break;
case"ZoomOut":i.preventDefault();
this._zoomInOut(this._oZoomMode.Out);
break;
case"ESC":i.preventDefault();
this.$bridge().fireMessage("KEY_ESC_DONE",h);
break
}}function c(h){var g=this._oCodeToKey[h.keyCode];
if(this._isDisableKeyNavigation(h)){return
}if(g!="ZoomIn"||g!="ZoomOut"){this._moveStop(g)
}this.dispatch("keyup",{domEvent:h.originalEvent,keyCode:h.keyCode,keyCodeText:g})
}}());
nhn.map.service.KeyboardNavigationIndicator=iron.Class({inherit:nhn.map.Dispatcher},{DEFAULT_POSITION:30,DOWN_POSITION:20,DOWN_PISITION_WITH_TRAY:170,DURATION:10,initialize:function(){this.$window=$(window);
this._oElIndicator={}
},_prepareDOM:function(){var c=$(nhn.mapservice.TemplateRepos.get("indicate").process()),d=$(this.$map().getStaticContainer()),b;
d.append(c);
b=$(".nmap_indicate",d);
this._oElIndicator={top:$(".nmap_int_scroll_top",b),bottom:$(".nmap_int_scroll_bottom",b),left:$(".nmap_int_scroll_left",b),right:$(".nmap_int_scroll_right",b)};
this._oMapControllerSize={Height:$(".map_controller",d).innerHeight(),Width:$(".map_controller",d).innerWidth()}
},_onUpdateWindowInfo:function(){var b=nhn.map.Env.getUIEnv();
this._nWindowHeight=this.$window.innerHeight()-b.HEADER_HEIGHT-b.LNB_HEIGHT;
this._nWindowWidth=this.$window.innerWidth();
this._nNewLeftPosition=this._nWindowWidth/2;
this._bMapServiceSize=this._isMapServiceSize()
},_onDrawIndicatorUp:function(){this._onUpdateWindowInfo();
if(this._isReturnEvent("top")){return
}this._oElIndicator.top.css({left:"50%",top:this.DEFAULT_POSITION});
this._oElIndicator.top.show()
},_onDrawIndicatorDown:function(){this._onUpdateWindowInfo();
this._elImageTray=$(".opening_image_tray");
if(this._isReturnEvent("bottom")){return
}this._oElIndicator.bottom.css({left:"50%",bottom:this.DOWN_POSITION});
this._oElIndicator.bottom.show()
},_onDrawIndicatorLeft:function(){this._onUpdateWindowInfo();
if(this._isReturnEvent("left")){return
}this._oElIndicator.left.css({left:this.DEFAULT_POSITION,top:"50%"});
this._oElIndicator.left.show()
},_onDrawIndicatorRight:function(){this._onUpdateWindowInfo();
if(this._isReturnEvent("right")){return
}var b=this.DEFAULT_POSITION;
this._oElIndicator.right.css({right:this._isMapController()?this._oMapControllerSize.Width+b:b,top:"50%"});
this._oElIndicator.right.show()
},_onEraseIndicator:function(i){var h=i.keyCode,c=38,g=40,d=37,f=39,b;
if(h===c){b=this._oElIndicator.top
}else{if(h===g){b=this._oElIndicator.bottom
}else{if(h===d){b=this._oElIndicator.left
}else{if(h===f){b=this._oElIndicator.right
}else{return
}}}}if(!b||b.css("display")=="none"){return
}b.hide(this.DURATION)
},_isMapServiceSize:function(){return true
},_isOpenImageTray:function(){return this._elImageTray.css("display")=="block"
},_isCloseImageTray:function(){return this._elImageTray.hasClass("opening_image_tray_close")
},_isMapController:function(){return this._oMapControllerSize.Height>this._nWindowHeight/2.2
},_isReturnEvent:function(b){return !this._oElIndicator[b]||this._oElIndicator[b].css("display")=="block"||!this._bMapServiceSize
},_listenKeyNav:function(){if(this.$map().isReady()){this._prepareDOM()
}else{this.$map().attach("AFTER_MSG_APP_READY",this._prepareDOM.bind(this))
}this.$keynav().attach({up:this._onDrawIndicatorUp.bind(this),down:this._onDrawIndicatorDown.bind(this),left:this._onDrawIndicatorLeft.bind(this),right:this._onDrawIndicatorRight.bind(this),keyup:this._onEraseIndicator.bind(this)})
}});
(function(){iron.ns("nhn.map.service").VehicleIconLib={get:function(H,I){return c(H,I)
},getBaseUrl:function(){return B
}};
var B="https://ssl.pstatic.net/static/maps/ux2013/icons/",q=".png";
var F="ic_bus",A="ic_train",E="ic_sw",b="ic_sq";
var h="spbi spbi_d",e="spmtsq spmtsq_t",z="spms_i spms_i",C="spmtsq spmtsq";
var s={bus:F,subway:E,train:A,inter:b};
var d={bus:h,subway:z,train:e,inter:C};
var i={bus:["","일반버스","좌석버스","마을버스","직행버스","공항버스","급행버스","","","","외곽버스","간선버스","지선버스","순환버스","광역버스","급행버스","","","","","농어촌버스","시외버스","시외버스","","","","급행버스"],subway:{"1":"수도권 1호선","2":"수도권 2호선","3":"수도권 3호선","4":"수도권 4호선","5":"수도권 5호선","6":"수도권 6호선","7":"수도권 7호선","8":"수도권 8호선","9":"수도권 9호선","100":"수도권 분당선","101":"수도권 공항철도","103":"수도권 중앙선","104":"수도권 경의선","107":"에버라인","108":"경춘선","109":"신분당선","110":"의정부","111":"수인선","21":"수도권 인천1호선","31":"대전 1호선","41":"대구 1호선","42":"대구 2호선","51":"광주 1호선","71":"부산 1호선","72":"부산 2호선","73":"부산 3호선","79":"부산김해경전철"},train:["","KTX","새마을","무궁화","누리로","통근","ITX 청춘"],inter:["","고속","시외","항공"]};
var v=[{width:14,height:14},{width:24,height:14},{width:32,height:14},{width:34,height:14},{width:28,height:14},{width:38,height:14},{width:48,height:14},{width:21,height:14},{width:37,height:14},{width:29,height:14},{width:39,height:14},{width:23,height:14}];
var w=v[0],t=v[9],r=v[10],p=v[6],y=v[1],u=v[3],g=v[1],o=v[1],n=v[3],m=v[7],l=v[11];
var G={bus:D,subway:x,train:f,inter:j};
function c(K,L){var H=B+s[K]+L+q,M=G[K],I=M(L),J=d[K]+L,N=i[K][L];
return{url:H,size:I,iconSize:I,className:"nmap_png",spanIconClassName:J,title:N||""}
}function x(I){I=parseInt(I,10);
var H;
switch(I){case 21:case 78:case 100:case 101:case 103:case 104:case 108:case 111:H=t;
break;
case 79:case 109:case 110:H=r;
break;
case 107:H=p;
break;
default:H=w
}return H
}function j(){return g
}function D(I){I=parseInt(I,10);
var H;
switch(I){case 20:case 27:H=u;
break;
default:H=y
}return H
}function f(I){I=parseInt(I,10);
var H;
switch(I){case 1:H=l;
break;
case 5:H=o;
break;
case 6:H=m;
break;
case 8:H=l;
break;
default:H=n
}return H
}})();
(function(){var d=iron.ns("nhn.map.service"),c="/css/maps_theme.css?",b="thememap";
d.CSSLazyLoader=iron.Class({singleton:true},{_timestamp:null,_head:null,_loadState:{},initialize:function(){this._timestamp=nhn.map.Bootstrap.getTimestamp();
this._head=$("head")
},loadTheme:function(){var e=c.replace(".css?",this._timestamp+".css");
if(!this._isCSSLoaded(b)){this._addCSS(e);
this._addLoadState(b)
}},_addCSS:function(e){var f=null;
if(document.createStyleSheet){document.createStyleSheet(e)
}else{f=document.createElement("link");
f.type="text/css";
f.rel="stylesheet";
f.href=e;
this._head.append(f)
}},_isCSSLoaded:function(e){return !!this._loadState[e]
},_addLoadState:function(e){this._loadState[e]=true
}})
}());
nhn.mapservice.TemplateRepos.add({card_tooltip:function(_d_){var p=[];
with(_d_){p.push('<div class="syly_card _card_tooltip" style="display:none;z-index:999">  <div class="_cardList"></div>  <span class="spm spm_arrow_up"></span>  <span class="opac_line"></span> </div>')
}return p.join("")
}});
iron.ns("nhn.map.service").DateFormatter={getDateByString:function(h){var e=+h.substr(0,4)||0,f=+h.substr(4,2)-1||0,c=+h.substr(6.2)||0,b=+h.substr(8,2)||0,d=+h.substr(10,2)||0,g=+h.substr(12)||0;
return new Date(e,f,c,b,d,g)
},formatDate:function(d,c){var f=[String(d.getFullYear()),String(d.getMonth()+1),String(d.getDate())];
var e=f.map(function(g){return g.replace(/^(\d{1})$/,"0$1")
});
var b=e.join(c);
return b
},formatTime:function(c,b){var e=[String(c.getHours()),String(c.getMinutes()),String(c.getSeconds())];
var d=e.map(function(g){return g.replace(/^(\d{1})$/,"0$1")
});
var f=d.join(b);
return f
},formatTimeTo12Hours:function(e,d){var b=e.getHours(),c=b>=12?"오후":"오전",f=function(g){return String(g).replace(/^(\d{1})$/,"0$1")
};
b=b%12;
b=b?b:12;
return[c," ",f(b),d,f(e.getMinutes())].join("")
},formatISODateTime:function(c){var b=this.formatDate(c,""),d=this.formatTime(c,"");
return[b,d].join("T")
},formatISOExtendedDateTime:function(c){var b=this.formatDate(c,"-"),d=this.formatTime(c,":");
return[b,d].join("T")
}};
(function(){var d=iron.ns("nhn.map.service"),e=["iPad","Android","KFTHWI"],b=["SHV-E160","SHV-E250","SHW-M110","SHW-M250","GT-I9100","SHV-E110","SHV-E210","SHW-M440","GT-I9300","Galaxy Nexus","LG-F160","LG-F100","LG-LU6200","LG-SU640","LG-F120K"],c="http://m.map.naver.com/";
d.MobileChangeover=iron.Class({initialize:function(){this._appendLayerForPixelChecking();
if(!this._isTabletType()){return
}this._prepareDom();
this._bindEvent()
},_bindEvent:function(){this._mobileLinkEl.on("click",this._onClickMobileChangeover.bind(this))
},_prepareDom:function(){this._mobileLinkEl=$(".co_view_mobile");
this._mobileLinkEl.show();
$("#wrap").addClass("mobile_view");
if(navigator.userAgent.search(/(iPad);.*CPU.*OS 7_\d/i)>-1){$("html").addClass("ios7")
}},_appendLayerForPixelChecking:function(){var f=$("<div class='_calc_pixel_ratio_layer' style='height: 1in; left: -100%; position: absolute; top: -100%; width: 1in;'></div>");
this._dummyLayer=f.prependTo("body")
},_isTabletType:function(){var j=navigator.userAgent,f=false;
for(var h=0;
h<e.length;
h++){if(j.search(e[h])>-1){f=true;
break
}}var g=j.match("Android");
if(g&&(this._calculateDevicePixelRatio()<7||this._isExceptionBrowser())){f=false
}return f
},_isExceptionBrowser:function(){var h=navigator.userAgent,f=false;
for(var g=0;
g<b.length;
g++){if(h.search(b[g])>-1){f=true;
break
}}return f
},_calculateDevicePixelRatio:function(){var g=window.devicePixelRatio||1,f=this._dummyLayer.width()*g,j=this._dummyLayer.height()*g,h=window.screen.width/f,i=window.screen.height/j;
return Math.round(10*Math.sqrt(Math.pow(h,2)+Math.pow(i,2)))/10
},_refineParameter:function(f){},_onClickMobileChangeover:function(i){var h=$(i.currentTarget),f=this.$sharingService().getURLData().toURL(null,null,true),g=this._refineParameter(f);
location.href=c+"?"+f
}})
}());
(function(){var j=iron.ns("nhn.map"),i=iron.ns("nhn.map.recent").Const,m=iron.ns("nhn.map.bookmark").Const.BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,c=5;
j.RecentBookmarkWidget=iron.Class(j.Dispatcher,{initialize:function(){this._loadedOnce=false;
this._options={};
this._tabTpl=nhn.mapservice.TemplateRepos.get("recent_bookmark_widget_tab");
this._recentTpl=nhn.mapservice.TemplateRepos.get("recent_bookmark_widget_recent_panel");
this._bookmarkTpl=nhn.mapservice.TemplateRepos.get("recent_bookmark_widget_bookmark_panel");
this._bookmarkErrorTpl=nhn.mapservice.TemplateRepos.get("bookmark_list_error");
this._prepareDOM();
this._bindEvent()
},_prepareDOM:function(){var o=$(this._tabTpl.process());
this._tabWrap=o;
this._recentTab=o.find("a._tab_recent").parent();
this._bookmarkTab=o.find("a._tab_bookmark").parent();
this._bookmarkMore=o.find("a.more");
this._recentPanel=$(this._recentTpl.process());
this._bookmarkPanel=$(this._bookmarkTpl.process())
},_bindEvent:function(){this._recentTab.on("click","a",h.bind(this));
this._bookmarkTab.on("click","a",b.bind(this));
this._bookmarkMore.on("click",d.bind(this))
},_unbindEvent:function(){this._recentTab.off();
this._bookmarkTab.off();
this._bookmarkMore.off()
},_clear:function(){this._recentTab.addClass("on");
this._bookmarkTab.removeClass("on");
this.showRecentPanel();
this.hideBookmarkPanel();
this._bookmarkMore.hide();
this._tabWrap.remove();
this._recentPanel.empty().remove();
this._bookmarkPanel.empty().remove();
this._unbindEvent();
this._prepareDOM();
this._bindEvent();
delete this._recentGroup;
delete this._bookmarkGroup;
delete this._banner
},destroy:function(){this._tabWrap.remove();
this._recentPanel.remove();
this._bookmarkPanel.remove();
this._unbindEvent()
},isLoggedIn:function(){return this.$login().isLoginUser()
},setOptions:function(o){this._options=$.extend({},o);
this._recentGroup=this._options.recentGroup||null;
this._bookmarkGroup=this._options.bookmarkGroup||null;
this._banner=this._options.banner||null
},renderTo:function(p,o){this._clear();
this.setOptions(o);
$(p).append(this._tabWrap,this._recentPanel,this._bookmarkPanel);
this._renderList()
},renderAfter:function(p,o){this._clear();
this.setOptions(o);
$(p).after(this._tabWrap,this._recentPanel,this._bookmarkPanel);
this._renderList()
},renderBefore:function(p,o){this._clear();
this.setOptions(o);
$(p).before(this._tabWrap,this._recentPanel,this._bookmarkPanel);
this._renderList()
},_renderList:function(){this._tabWrap.toggleClass("sr_tab1_space",this._recentGroup!==i.TYPE_ALL);
this._renderRecent();
this._renderBookmark()
},redraw:function(){this._renderRecent();
this._renderBookmark()
},_renderRecent:function(){if(!this._recentGroup){return
}var p=this._recentGroup,o=this.$recent();
o.renderToBy(p,this._recentPanel);
if(o.getList(p).length===0){this.hideRecentPanel();
this._recentTab.removeClass("on");
if(!this.isLoggedIn()){this.hideTabWrap();
this.showBanner()
}else{this._bookmarkTab.after(this._recentTab.hide()).addClass("on").html("<span>즐겨찾기</span>");
this.showBookmarkPanel()
}this._tabWrap.addClass("sr_tab1_only")
}else{this.showTabWrap()
}},_renderBookmark:function(){if(!this.isLoggedIn()){this._bookmarkTab.hide();
return
}var o={maxDisplayCount:c,sortOrder:m};
if(this._bookmarkGroup){o.group=this._bookmarkGroup
}this.$bookmark().renderBookmarkListTo(this._bookmarkPanel,o,function(q){var p=q.count;
if(p===0){this.hideBookmarkPanel();
if(this.$recent().getList(this._recentGroup).length===0){this.hideTabWrap();
this.showBanner()
}else{this._bookmarkTab.hide()
}}else{this.showTabWrap();
this._bookmarkTab.show()
}if(!this._loadedOnce){e.apply(this);
this.$infowindow().attachOnce("opened",e.bind(this));
this._loadedOnce=true
}}.bind(this))
},_updateBookmarkMoreBtn:function(){var p=this.$bookmark().getBookmarkListAsData(this._bookmarkGroup||"all").length,o=this._bookmarkTab.hasClass("on")&&p>c;
this._bookmarkMore.toggle(o)
},isVisible:function(){return !!(nhn.map.DOMCache.getAsideArea().has(this._tabWrap[0]).length)&&this._tabWrap.is(":visible")
},isEnable:function(){return !!(nhn.map.DOMCache.getAsideArea().has(this._tabWrap[0]).length)
},getAllElement:function(){return[this._tabWrap,this._recentPanel,this._bookmarkPanel]
},getTabWrap:function(){return this._tabWrap[0]
},getRecentPanel:function(){return this._recentPanel[0]
},getBookmarkPanel:function(){return this._bookmarkPanel[0]
},hideTabWrap:function(){this._tabWrap.hide()
},showTabWrap:function(){this._tabWrap.show()
},hideRecentPanel:function(){this._recentPanel.hide()
},showRecentPanel:function(){this._recentPanel.show()
},hideBookmarkPanel:function(){this._bookmarkPanel.hide()
},showBookmarkPanel:function(){this._bookmarkPanel.show();
this._updateBookmarkMoreBtn()
},showRecentList:function(o){this._recentTab.addClass("on");
this._bookmarkTab.removeClass("on");
this.showRecentPanel();
this.hideBookmarkPanel();
this._bookmarkMore.hide();
o||this.$recent().refreshBy(this._recentGroup);
this._currentPanelType="recent"
},showBookmarkList:function(){this._recentTab.removeClass("on");
this._bookmarkTab.addClass("on");
this.hideRecentPanel();
this.showBookmarkPanel();
this._updateBookmarkMoreBtn();
this._currentPanelType="bookmark"
},showBanner:function(){this._banner&&this._banner.show()
},hideBanner:function(){this._banner&&this._banner.hide()
},_listenRecent:function(){this.$recent().attach("listview_updated",g.bind(this))
},_listenBookmark:function(){this.$bookmark().attach({load:f.bind(this),responseError:n.bind(this)})
},_listenMenuBar:function(){this.$menubar().attach({change:this._clear.bind(this)})
},_listenLogin:function(){this.$login().attach("afterLogin",l.bind(this))
}});
function e(){if(this.$recent().getList(this._recentGroup).length>0&&this._currentPanelType==="recent"){this.showRecentList()
}}function g(){if(!this.isEnable()){return
}this.showTabWrap();
this._recentTab.show();
if(this._recentTab.prev().is(this._bookmarkTab)){this._recentTab.after(this._bookmarkTab);
this._bookmarkTab.html('<a href="#" class="_tab_bookmark">즐겨찾기</a>')
}this.hideBanner();
if(!this._bookmarkTab.is(":visible")){this.showRecentList(true)
}}function f(r){if(!this.isEnable()){return
}var q=r.bookmarkList,p=q.getBookmarkAsData(this._bookmarkGroup);
this._updateBookmarkMoreBtn();
if(p.length===0){return
}this.showTabWrap();
var o='<a href="#" class="_tab_bookmark">즐겨찾기</a>';
if(!this._recentTab.is(":visible")){o="<span>즐겨찾기</span>"
}this._bookmarkTab.html(o).show();
this.hideBanner();
if(!this._bookmarkTab.is(":visible")){this.showRecentList(true)
}}function n(q){var p=q.apiId;
if(p==="INQUIRE_BOOKMARK_LIST"){if(!this.isEnable()){return
}this.showTabWrap();
var o='<a href="#" class="_tab_bookmark">즐겨찾기</a>';
if(!this._recentTab.is(":visible")){o="<span>즐겨찾기</span>"
}this._bookmarkTab.html(o).show();
this.hideBanner();
this._bookmarkPanel.html(this._bookmarkErrorTpl.process());
if(!this._bookmarkTab.is(":visible")){this.showRecentList(true)
}}}function l(){if(this.isEnable()){this.redraw()
}}function h(o){o.preventDefault();
$(o.currentTarget).focus();
this.showRecentList()
}function b(o){o.preventDefault();
$(o.currentTarget).focus();
this.showBookmarkList()
}function d(o){o.preventDefault();
this.$menubar().changeMenu("BOOKMARK")
}}());
nhn.map.FlashUtil={REQUIRE_FLASH_VERSION:"10.0.0",REQUIRE_FLASH_CHROME_VERSION:54,REQUIRE_FLASH_EDGE_VERSION:13,isValidFlashVersion:function(){var d=navigator.userAgent.toLowerCase(),f=d.indexOf("chrome"),h=d.match(/chrome\/(\d+)/i),e=f&&h&&Number(h[1])>this.REQUIRE_FLASH_CHROME_VERSION,c=d.indexOf("edge"),i=d.match(/edge\/(\d+)/i),g=c&&i&&Number(i[1])>this.REQUIRE_FLASH_EDGE_VERSION,b=this.REQUIRE_FLASH_VERSION.split(".");
if(e||g){return true
}return nhn.FlashObject.detectFlashVer(b[0],b[1],b[2])
}};iron.ns("nhn.map.logger").NClickRules={"mts.gnbfold":{"._folded":"mts.gnbunfold"},"#PNO#.gnbfold":{"._folded":"#PNO#.gnbunfold"},"mts.trafficoff":{".ctrl_realtime_on":"mts.trafficon"},"lwc.fold":{"._on_unfolding":"lwc.unfold"},"lwc.wide":{".btn_pf_wideout":"lwc.narrow"},"mit.open":{".opening_image_tray_close":"mit.close"},"STA.offmap":{".btn_curr_on":"STA.onmap"},"adn.itemoff":{".on":"adn.item"},"ado.itemoff":{".on":"ado.item"},"adn.foldadr":{".spm_numaddr_close":"adn.unfoldadr"},"ado.foldadr":{".spm_newaddr_close":"ado.unfoldadr"},"plc.itemoff":{".on":"plc.item"},"adv.itemoff":{".on":"adv.item"},"pla.itemoff":{".on":"pla.item"},"bst.stitemoff":{".on":"bst.stitem"},"mtw.lwfold":{".indoor":"mtm.lwfold",".panorama":"pno*s.gnbfold"},"mtw.lwunfold":{".indoor":"mtm.lwunfold",".panorama":"pno*s.gnbunfold"},"mmk.adr":{".naver_view_minimap":"pno*m.store"},"mmk.place":{".naver_view_minimap":"pno*m.store"},"mpd*p.directionnum":{".naver_view_minimap":"pno*m.direction"},"mts.bicycleon":{".naver_view_minimap":"pno*m.bicycle"},"mts.bicycleoff":{".naver_view_minimap":"pno*m.bicycle"},"mts.cadastraloff":{".naver_view_minimap":"pno*m.cadastral"},"mts.cadastralon":{".naver_view_minimap":"pno*m.cadastral"},"mts.normal":{".naver_view_minimap":"pno*m.normal"},"mts.satellite":{".naver_view_minimap":"pno*m.satellite"},"STA.noroute":{".btn_find_act":"STA.routego"},"lwc_bfr.car":{".searched":"lwc_aft.car"},"lwc_bfr.pubtrans":{".searched":"lwc_aft.pubtrans"},"lwc_bfr.bicycle":{".searched":"lwc_aft.bicycle"},"lwc_bfr.walk":{".searched":"lwc_aft.walk"},"dir_car.unfold":{".fwci_pay_close":"dir_car.fold"},"dir_car.expressclose":{".fw_expand_on":"dir_car.expressopen"},"dir_pbt.detailclose":{".on":"dir_pbt.detailopen"},"dir_inc.detailclose":{".on":"dir_inc.detailopen"},"dir_pbt.bmkadd":{".on":"dir_pbt.bmkdel"},"dir_inc.bmkadd":{".on":"dir_inc.bmkdel"},"dir_pbt.walkclose":{".fw_expand_on":"dir_pbt.walkopen"},"dir_inc.walkclose":{".fw_expand_on":"dir_inc.walkopen"},"dir_inc.others":{".spm_fwpout_open":"dir_inc.othersclose"},"#IWTYPE#.nrsearchclose":{".on":"#IWTYPE#.nrsearchopen"},"#IWTYPE#.nrbusclose":{".on":"#IWTYPE#.nrbusopen"},"#IWTYPE#.sendclose":{".on":"#IWTYPE#.sendopen"},"#IWTYPE#.bmkadd":{".on":"#IWTYPE#.bmkdel"},"#IWTYPE#.bsbmkadd":{".on":"#IWTYPE#.bsbmkdel"},"mrt.skyoff":{".spmc_air_on":"mrt.skyon",".minimode":"pno*m.sky"},"mrt.streetoff":{".spmc_road_on":"mrt.streeton",".minimode":"pno*m.street"},"mrt.lvup":{".minimode":"pno*m.zoomin"},"mrt.lvup_indoor":{".minimode":"pnd*m.zoomin"},"mrt.lvdown":{".minimode":"pno*m.zoomout"},"mrt.lvdown_indoor":{".minimode":"pnd*m.zoomout"},"GNB.close":{".on":"GNB.open"},"adn.bmkadd":{".on":"adn.bmkdel"},"ado.bmkadd":{".on":"ado.bmkdel"},"pla.bmkadd":{".on":"pla.bmkdel"},"plc.bmkadd":{".on":"plc.bmkdel"},"adv.bmkadd":{".on":"adv.bmkdel"},"mtw.adrclose":{".on":"mtw.adropen"},"mrt.distanceoff":{".spmc_distance_on":"mrt.distanceon"},"mrt.rangeoff":{".spmc_area_on":"mrt.rangeon"},"fot.legendclose":{".legend_on":"fot.legendopen"},"bnm.bmkadd":{".on":"bnm.bmkdel"},"bst.bmkadd":{".on":"bst.bmkdel"},"map*b.bmkadd":{".on":"map*b.bmkdel"},"map*b.stbmkadd":{".on":"map*b.stbmkdel"}};
(function(a){var b=iron.ns("nhn.map.logger");
b.NClick=iron.Class({singleton:true},{PANORAMA_NSC:"map.pano",PANORAMA_NSC_RULES:[".naver_view_wrap","._snbv_panorama",".minimode"],initialize:function(){var d=this._logFromEvent.bind(this);
nhn.map.DOMCache.getDocument().click(d);
a.NClickHelper=d
},log:function(d){this._log(d.element,d.acode,d.cid,d.rank,d.event,d.isUseRcode,d.forceSsc,d.mapState)
},_log:function(d,k,j,g,o,r,m,f){var p=this.$watcher(),n=m||($(d).closest("._ssc_nclick").length>0),e,i,l;
j=j||"";
l=j.match(/\d+$/);
if(l!=null&&j.indexOf("brand")!==0){j=l[0]
}g=g||"";
this.resetGlobalParams();
if(n){a.g_ssc=p.getSscWithBase();
a.g_query=p.query;
a.g_pid=p.pageId;
a.g_sid=p.sessionId;
i=""
}else{a.nsc=p.nsc;
i="n"
}if(!d){d=nhn.map.DOMCache.getBody()[0]
}else{var q=d.tagName.toUpperCase();
if(q=="A"||q=="AREA"){i+="1"
}if(!f&&a.nsc&&p.isPanorama()){if($(d).closest(this.PANORAMA_NSC_RULES.join(", ")).length){a.nsc=this.PANORAMA_NSC
}}}if(r){e=p.rcode
}if(f){a.g_ssc=p.getSscWithBase();
a.g_query=p.query;
a.g_pid=p.pageId;
a.g_sid=p.sessionId;
e=f;
i=""
}else{var h=p.nsc;
if(h!=="map.subway"&&h!=="map.bookmark"&&h!=="map.theme"){e=nhn.map.LogClick.getMapStateCode()
}}k=this._resolveAcodeByRule(d,k);
k=this._resolveAcodeByReplacer(k);
this.mapState=f||null;
a.clickcr(d,k,j,g,o,i,e)
},_logFromEvent:function(d){var g=nhn.mapcore.Util.mapGetClass,h=d.target||d.srcElement||d.element,f=d.originalEvent||d._Event||d,e;
while(h){e=g(h,"nclicks");
if(e){break
}h=h.parentNode
}if(!h||!e||g(h,"NCR-SKIP")){return
}if(g(h,"NCR-STOP")){d.stopPropagation();
d.preventDefault()
}this.log({element:h,acode:e[0],cid:e[1],rank:e[2],event:f,isUseRcode:(e[3]=="Y"),forceSsc:(e[4]=="Y")})
},_resolveAcodeByRule:function(f,e){var h=b.NClickRules;
if(e in h){var g=h[e];
for(var d in g){if($(f).closest(d).length>0){e=g[d]
}}}return e
},_resolveAcodeByReplacer:function(d){if(d.indexOf("#")>=0){var f=this.$watcher().getReplacers();
for(var e in f){d=d.replace(e,f[e])
}}return d
},resetGlobalParams:function(){["nsc","g_ssc","g_query","g_pid","g_sid"].forEach(function(d){a[d]=""
})
}});
if(!iron.ns("nhn.map.service").NClick){iron.ns("nhn.map.service").NClick={}
}if(!iron.ns("nhn.mapservice").NClick){iron.ns("nhn.mapservice").NClick={}
}function c(){var d=b.NClick.getInstance();
return d.log.apply(d,arguments)
}nhn.map.service.NClick.log=c;
nhn.mapservice.NClick={hit:c,setSsc:function(){var d=b.NClickStateWatcher.getInstance();
return d._setSsc.apply(d,arguments)
},setRcode:function(){var d=b.NClickStateWatcher.getInstance();
return d._setRcode.apply(d,arguments)
}};
iron.ns("nhn.map").LogClick=c
})(window);
(function(){var l=iron.ns("nhn.map.logger");
l.NClickStateWatcher=iron.Class({singleton:true},{nsc:"map.search",sscBase:"svc.map.",rcode:"",MENU2NSC:{LOCATION:"map.search",ROUTE:"map.route",BUS:"map.bus",SUBWAY:"map.subway",BOOKMARK:"map.bookmark",OPENMAP:"map.theme",PANORAMA:"map.pano"},MENU2SSC:{LOCATION:"svc.map.",ROUTE:"svc.map.route_",BUS:"svc.map."},initialize:function(){this._groupCodeDic={};
this._underIE8=!!($.browser.msie&&parseInt($.browser.version,10)<=8)
},_listenRegion:function(){var m=this;
this.$region().attach("update.logger",function(o){var n=o.region.rcode||0;
m._regionCode=n
})
},_listenMenuBar:function(){this.$menubar().attach({after_change:this.refreshMenuState.bind(this)})
},refreshMenuState:function(){window.setTimeout(function(){var m=this.$menubar().getMenuState();
this.nsc=this.MENU2NSC[m];
this.sscBase=this.MENU2SSC[m];
nsc=this.MENU2NSC[m]
}.bind(this),0)
},setGroupCode:function(n,m){this._groupCodeDic[n]=m
},getGroupCode:function(m){return this._groupCodeDic[m]||null
},getReplacers:function(){return{"#IWTYPE#":(this.getGroupCode("IWTYPE")||this.infoWindowNCGRCode||"map*P"),"#PNO#":this.getGroupCode("PNO")||"pno*s","#DIRECTIONS#":this.getGroupCode("DIRECTIONS")||"dir_car"}
},getSscWithBase:function(){if(this.ssc===null||this.ssc===undefined){return null
}var m=this.sscBase||"";
return m+this.ssc
},_setSsc:function(o,n,m,p){this.ssc=o;
this.query=n;
this.pageId=m;
this.sessionId=p
},_setRcode:function(m){this.rcode=m
},setNscCode:function(n){var m=false;
for(var o in this.MENU2NSC){if(this.MENU2NSC[o]==n){m=true;
break
}}var n=m?n:this.nsc;
this.nsc=n;
nsc=n
},getNscCode:function(){return this.nsc
},setInfoWindowGroupCode:function(m){this.infoWindowNCGRCode=m
},isPanorama:function(){return this.$map().getMapMode()==="PANORAMA_MINI"
},_listenMap:function(){this.$map().attach({BEGIN_DRAG_DONE:this._onStartDragDone.bind(this),MOUSEWHEEL_MAP_DONE:this._onMouseWheelMapDone.bind(this)})
},_onStartDragDone:function(n){if(n.dragGap<=5||!this.ssc||!this.query){return
}var m=!this._underIE8?n.domEvent:$.extend(true,{},n.domEvent);
this._logWithMapState("moe.pan",m)
},_onMouseWheelMapDone:function(o){if(!this.ssc||!this.query){return
}var n=this.$map(),m=!this._underIE8?o.domEvent:$.extend(true,{},o.domEvent);
this._logWithMapState("moe.zoom",m)
},getMapStateCode:function(){var q=this.$map(),m=q.getCenter().toLatLng(),r=q.getLevel(),o=nhn.mapcore.CoordConverter.toLatLng(q.getBound()),p=[],n;
n=[(o[2]-o[0]).toFixed(7),(o[1]-o[3]).toFixed(7)].join(",");
p.push(m.y+","+m.x);
p.push("Z"+r);
p.push(n);
if(this._regionCode){p.unshift(this._regionCode)
}return p.join(":")
},_logWithMapState:function(o,n){var q=this.$region(),p=n.target||n.srcElement,m=this.getMapStateCode();
this._onRegionUpdate&&q.detach("update",this._onRegionUpdate);
this._onRegionUpdate=function(s){var r=s.region.rcode||0;
this._regionCode=r;
nhn.map.LogClick({event:n,element:p,acode:o,mapState:m});
q.detach("update",this._onRegionUpdate)
}.bind(this);
q.attach("update",this._onRegionUpdate)
},_listenKeyEvent:function(){this.$keyhandler().attach({keydown:this._onKeyUp.bind(this)})
},_onKeyUp:function(o){if(!this.ssc||!this.query||!o.keyCodeText){return
}var n=o.keyCodeText.toUpperCase(),m;
switch(n){case"LEFT":case"RIGHT":case"UP":case"DOWN":m=!this._underIE8?o.domEvent:$.extend(true,{},o.domEvent);
this._logWithMapState("moe.pan",o.domEvent);
break;
case"ZOOMIN":case"ZOOMOUT":m=!this._underIE8?o.domEvent:$.extend(true,{},o.domEvent);
this._logWithMapState("moe.zoom",o.domEvent);
break
}}});
function c(){return l.NClickStateWatcher.getInstance()
}function b(){var m=c();
return m._setSsc.apply(m,arguments)
}function k(){var m=c();
return m._setRcode.apply(m,arguments)
}function g(m){return c().setNscCode(m)
}function i(){return c().getNscCode()
}function a(n,m){return c().setGroupCode(n,m)
}function f(m){return c().getGroupCode(m)
}function d(m){return c().setInfoWindowGroupCode(m)
}function e(){return c().refreshMenuState()
}function j(n){var m=c();
window.setTimeout(function(){m.setNscCode(m.MENU2NSC[n.toUpperCase()])
},0);
return
}function h(){return c().getMapStateCode()
}nhn.map.service.NClick.setSscCode=b;
nhn.map.service.NClick.setRcode=k;
nhn.map.service.NClick.setNscCode=g;
nhn.map.service.NClick.getNscCode=i;
nhn.map.service.NClick.setGroupCode=a;
nhn.map.service.NClick.getGroupCode=f;
nhn.map.service.NClick.setInfoWindowGroupCode=d;
nhn.map.service.NClick.refreshMenuState=e;
nhn.map.service.NClick.setMenuNscCode=j;
$.extend(iron.ns("nhn.map").LogClick,{setSscCode:b,setRcode:k,setNscCode:g,getNscCode:i,setGroupCode:a,getGroupCode:f,setInfoWindowGroupCode:d,refreshMenuState:e,setMenuNscCode:j,getMapStateCode:h})
}());
(function(){var c=iron.ns("nhn.map.logger");
c.NDS=iron.Class({singleton:true},{initialize:function(){var e=this;
this._urlSearch=(location.search+"").toLowerCase();
this._urlLogged=false;
this._sViewerMode="";
this._oParam={};
this._skipCount=0;
this._isIgnore=false;
nhn.map.DOMCache.getDocument().on("click mousedown mouseup",this._initIsIgnore.bind(this)).on("keyup",function(f){if(f.keyCode==13){e._initIsIgnore()
}})
},_initIsIgnore:function(){this._isIgnore=false
},_getDummy:function(){if(!this._dummyEl){this._dummyEl=$('<div id="NDSDummy" style="position:absolute;top:-10000px;left:-10000px"></div>');
nhn.map.DOMCache.getBody().append(this._dummyEl).css("display","block")
}return this._dummyEl
},_changePVPage:function(){this._getDummy().empty().html("<h6 class='blind'>빈프레임</h6><iframe id='writeFrame' title='NDS' height='0' frameborder='0' width='0' scrolling='no' src='/common2/checkNds.nhn?rnd="+Date.now()+"'></iframe>")
},_logPageView:function(e,g,f){setTimeout(function(){if(this._isIgnore&&!f){return
}this._isIgnore=true;
if(e){this._oParam={};
this._oParam.sti="map_"+e;
if(g){this._oParam.qy=g
}try{lcs_do(this._oParam)
}catch(h){}}else{try{lcs_do()
}catch(h){}}this._changePVPage()
}.bind(this),0)
},log:function(e,g,f){this._logPageView(e,g,f)
}});
function b(e,h,g){var f=c.NDS.getInstance();
if(typeof e!=="undefined"){f.log(e,h,g)
}else{a()
}}function a(){var e=c.NDS.getInstance();
if(e._urlLogged){return
}e._initIsIgnore();
e.log();
e._urlLogged=true;
nhn.map.LogPV.urlLogged=true
}function d(){var e=c.NDS.getInstance();
e._initIsIgnore()
}iron.ns("nhn.map.service").Log=b;
iron.ns("nhn.map.service").Log.initIsIgnore=d;
iron.ns("nhn.map.service").LogAsURL=a;
iron.ns("nhn.map").LogPV=b;
iron.ns("nhn.map").LogPV.resetIgnore=d;
iron.ns("nhn.map").LogPV.urlLogged=false;
iron.ns("nhn.map").LogPVAsURL=a
}());
(function(){var d=iron.ns("nhn.map.logger"),b="http://qa.adcr.apbox.naver.com:8081/adcr",c="http://dev.adcr.naver.com/adcr",f="http://staging.adcr.naver.com/adcr",e="http://adcr.naver.com/adcr";
d.ADCR=iron.Class({singleton:true},{initialize:function(){},log:function(g){this._logADCR(g.x,g.p)
},_logADCR:function(g,j){var h=[this._getUrl(),"?x=",g,"&p=",j].join("");
var i=new Image();
i.src=h
},_getUrl:function(){var g=nhn.map.Util.getCurrentServerPhase();
var h;
if(g===""){h=e
}else{if(g==="dev"){h=c
}else{if(g==="stg"){h=f
}else{h=b
}}}return h
}});
if(!iron.ns("nhn.map.service").ADCR){iron.ns("nhn.map.service").ADCR={}
}function a(){var g=d.ADCR.getInstance();
return g.log.apply(g,arguments)
}nhn.map.service.ADCR.log=a
})();(function(d,a,b,c){a.ns("nhn.map.overview").OverviewService=a.Class({inherit:d.map.Dispatcher,mix:[d.map.UIComponent]},{initialize:function(){},_onActivate:function(){!this.isActivating()&&this.dispatch("activate")
},_onDeactivate:function(){this.isActivating()&&this.dispatch("deactivate")
},ready:function(){this.activate();
this.$PersistentStorage().isShowing()&&this.show()
},show:function(){this.$PersistentStorage().setVisible(true);
this.isActivating()&&this.dispatch("show")
},hide:function(){this.$PersistentStorage().setVisible(false);
this.isActivating()&&this.dispatch("hide")
},_listenPanorama:function(){this.$Panorama().attach({openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this)})
},_onOpenPanorama:function(){this.deactivate()
},_onClosePanorama:function(){this.activate();
this.$PersistentStorage().isShowing()&&this.show()
},_listenIndoorMap:function(){this.$IndoorMap().attach({beforeEnterIndoorMap:this._onBeforeEnterIndoorMap.bind(this),leaveIndoorMap:this._onLeaveIndoorMap.bind(this)})
},_onBeforeEnterIndoorMap:function(){this.deactivate()
},_onLeaveIndoorMap:function(){this.activate();
this.$PersistentStorage().isShowing()&&this.show()
},_listenChollianService:function(){this.$ChollianService().attach({openChollianView:this._openChollianView.bind(this),closeChollianView:this._closeChollianView.bind(this)})
},_openChollianView:function(){this.deactivate()
},_closeChollianView:function(){this.activate();
this.$PersistentStorage().isShowing()&&this.show()
},_listenOldIncheonService:function(){this.$OldIncheonService().attach({openOldIncheonView:this._openOldIncheonView.bind(this),closeOldIncheonView:this._closeOldIncheonView.bind(this)})
},_openOldIncheonView:function(){this.deactivate()
},_closeOldIncheonView:function(){this.activate();
this.$PersistentStorage().isShowing()&&this.show()
}})
}(nhn,iron,jQuery));
(function(a,c){var b="nmap_overview_showing";
iron.ns("nhn.map.overview").OverviewPersistentStorage=iron.Class({initialize:function(){this._localStorageSupports=!!iron.Storage
},getStorageKey:function(){return b
},clear:function(){if(this._localStorageSupports){return iron.Storage.removeItem(b)
}else{return a.cookie(b,null)
}},_getItem:function(){if(this._localStorageSupports){return iron.Storage.getItem(b)
}else{return a.cookie(b)
}},_setItem:function(d){if(this._localStorageSupports){iron.Storage.setItem(b,d)
}else{a.cookie(b,d)
}},setVisible:function(d){if(d){this._setItem("t")
}else{this._setItem("f")
}},isShowing:function(){var d=this._getItem();
if(d==="t"){return true
}else{if(d==="f"){return false
}else{return false
}}}})
}(jQuery));
iron.ns("nhn.map.overview").OverviewMapZoomControl=iron.Class({inherit:nhn.mapcore.MapZoomControl},{initialize:function(){this.MIN_ZOOM_LEVEL=-1;
this.$init()
},_getLevelFilter:function(a,g,d){if(d.relativeLevel){g=a+(parseInt(g,10)||0)
}else{if(g===null||g===false){g=a
}}var f=this._getMinMaxLevel();
var b=f[0];
var c=f[1];
c=Math.min(c,this._getMaxLimitLevel());
var e=Math.max(b,Math.min(c,parseInt(g,10)));
return e<b||e>c?c:e
}});
(function(){var b=nhn.husky,c=nhn.mapcore;
iron.ns("nhn.map.overview").OverviewMap=iron.Class({initialize:function(e,d){var d=this._refineOptions(d);
this._create(e,d)
},_refineOptions:function(f){var e=f.bound[0].toInner(),d=f.bound[1].toInner(),g=[e.x,e.y,d.x,d.y];
f.bound=g;
if(f.mapType==="satellite"){f.mapType="hybrid"
}return f
},_create:function(f,d){var e=new b.HuskyCore();
a();
this._regist(e,[b.CorePlugin,new c.NMap(f,{}),c.Container,new c.MapConfig({point:d.center,zoomLevel:10}),c.MapCoordConfig,c.TileManager,c.BaseRealTilePane,c.HybridRealTilePane,new c.BaseVirtualTilePane(d.mapType),c.BaseLabelVirtualTilePane,c.TerrainLabelVirtualTilePane,new c.StandaloneHybridVirtualTilePane(d.mapType),c.PanEffect,nhn.map.overview.OverviewMapZoomControl]);
e.exec("SET_ENABLE_WHEEL_ZOOM",[false]);
e.run();
this._core=e;
this.setSize(d.width,d.height);
this.setBound(d.bound,d.offset);
this.setMapType(d.mapType);
return e
},_regist:function(e,d){d.forEach(function(f){var g=f;
if(typeof f==="function"){g=new f()
}e.registerPlugin(g)
})
},getElement:function(){return this._core.getMap()
},getMovableContainer:function(){return this._core.getMovableContainer()
},getStaticContainer:function(){return this._core.getStaticContainer()
},getPixelByPoint:function(d){return this._core.getPointToOffset(d.toInner())
},getPointByPixel:function(d){return this._core.getOffsetToPoint(d).toLatLng()
},setMapType:function(d){if(d=="vector"){this.unloadSatellitePane();
this.unloadHybridPane();
this.unloadTerrainPane();
this.loadVectorPane()
}else{if(d=="hybrid"||d=="satellite"){this.unloadVectorPane();
this.unloadTerrainPane();
this.loadSatellitePane();
this.loadHybridPane()
}else{if(d==="terrain"){this.unloadSatellitePane();
this.unloadHybridPane();
this.unloadVectorPane();
this.loadTerrainPane()
}}}},getMapType:function(){var e=this._core.getActiveMapType(),d="";
if(e.indexOf("satellite")>-1){d=e.indexOf("hybrid")>-1?"hybrid":"satellite"
}else{if(e.indexOf("terrain")>-1){d="terrain"
}else{d="vector"
}}return d
},loadSatellitePane:function(){this._core.exec("LOAD_SATELLITE_PANE");
this._core.exec("LCS_LOAD_SATELLITE_PANE")
},unloadSatellitePane:function(){this._core.exec("UNLOAD_SATELLITE_PANE")
},loadHybridPane:function(){this._core.exec("LOAD_HYBRID_PANE");
this._core.exec("LCS_LOAD_HYBRID_PANE")
},unloadHybridPane:function(){this._core.exec("UNLOAD_HYBRID_PANE");
this._core.exec("LCS_UNLOAD_HYBRID_PANE")
},loadTerrainPane:function(){this._core.exec("LOAD_TERRAIN_PANE")
},unloadTerrainPane:function(){this._core.exec("UNLOAD_TERRAIN_PANE")
},loadVectorPane:function(){this._core.exec("LOAD_VECTOR_PANE");
this._core.exec("LCS_LOAD_VECTOR_PANE")
},unloadVectorPane:function(){this._core.exec("UNLOAD_VECTOR_PANE")
},setBound:function(e,f){var d=[c.CoordConverter.toInner(e)];
if(f){d.push({offset:[f.left,f.top,f.right,f.bottom]})
}this._core.exec("BOUND_TO_CENTER",d)
},setSize:function(d,e){this._core.exec("SET_MAP_SIZE",[d,e])
}});
function a(){$.extend(c.mapSpec,{isValidZoomLevel:function(d){if(d>0){return !(d===undefined||d<this.minLevel||d>this.maxLevel)
}else{if(d===0||d===-1){return true
}else{return false
}}},getScale:function(e){if(!this.isValidZoomLevel(e)){return false
}this._oScale||this._initScale();
var d;
if(e>0){d=this._oScale[e]
}else{if(e<=0&&e>=-1){if(e===0){d=this._oScale[1]/2
}if(e===-1){d=this._oScale[1]/4
}}}return d
},_initRowCount:function(){this._oRowCount={};
for(var d=-1;
d<=this.maxLevel;
d++){this._oRowCount[d]=Math.ceil((this.maxX-this.minX)*this.getScale(d)/this.tileSize)
}},_initColCount:function(){this._oColCount={};
for(var d=-1;
d<=this.maxLevel;
d++){this._oColCount[d]=Math.ceil((this.maxY-this.minY)*this.getScale(d)/this.tileSize)
}}});
c.mapSpec._initRowCount();
c.mapSpec._initColCount()
}}());
(function(){var a={BOUND_OFFSET:{left:25,top:25,right:25,bottom:25}};
iron.ns("nhn.map.overview").OverviewViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._displacement={x:0,y:0};
this._serviceListener={activate:this._onActivate.bind(this),deactivate:this._onDeactivate.bind(this),show:this._onShow.bind(this),hide:this._onHide.bind(this)};
this._mapViewListener={CHANGE_MAP_DONE:this._onChangeMapDone.bind(this),SET_MAP_SIZE:this._onChangeMapDone.bind(this),MOVE_MAP:this._onMoveMap.bind(this),REGISTER_MAP_TYPE_DONE:this._onRegisterMapTypeDone.bind(this),UNREGISTER_MAP_TYPE_DONE:this._onUnRegisterMapTypeDone.bind(this)};
this._overviewViewListener={open:this._onOpen.bind(this),close:this._onClose.bind(this),change:this._onChange.bind(this)}
},_listenService:function(){this.$service().attach(this._serviceListener)
},_unlistenService:function(){this.$service().detach(this._serviceListener)
},_onActivate:function(){this.$overview_view().activate();
this.$overview_view().attach(this._overviewViewListener)
},_onDeactivate:function(){this.$overview_view().detach(this._overviewViewListener);
this.$overview_view().deactivate()
},_onShow:function(){var c=this.$map_view().getActiveMapType().filter(function(e){return["vector","satellite","terrain"].indexOf(e)>0
}),b=this.$map_view().getCenter().toLatLng(),d=this.$map_view().getBoundAsLatLng();
this.$overview_view().show(c[0],d,a.BOUND_OFFSET);
this.$overview_view().setBboxSize(d);
this.$overview_view().setForegroundBboxPosition(b);
this.$overview_view().setBackgroundBboxPosition(b);
this.$map_view().attach(this._mapViewListener)
},_onHide:function(){this.$map_view().detach(this._mapViewListener);
this.$overview_view().hide()
},_onChangeMapDone:function(){var b=this.$map_view().getCenter().toLatLng(),c=this.$map_view().getBoundAsLatLng();
this._displacement={x:0,y:0};
this.$overview_view().setBound(c,a.BOUND_OFFSET);
this.$overview_view().setBboxSize(c);
this.$overview_view().setForegroundBboxPosition(b);
this.$overview_view().setBackgroundBboxPosition(b)
},_onMoveMap:function(d){this._displacement={x:this._displacement.x-d.x,y:this._displacement.y-d.y};
var c=this.$map_view().getPointToOffset(this.$map_view().getCenter()),f={x:c.x+this._displacement.x,y:c.y+this._displacement.y},b=this.$map_view().getOffsetToLatlng(f);
this.$overview_view().setBackgroundBboxPosition(b)
},_onRegisterMapTypeDone:function(c){var b=c.mapType;
switch(b){case"vector":case"satellite":case"hybrid":case"terrain":this.$overview_view().setMapType(b);
break
}},_onUnRegisterMapTypeDone:function(c){var b=c.mapType;
if(b==="hybrid"&&this.$map_view().isActiveMapType("satellite")){this.$overview_view().setMapType("satellite")
}},_onOpen:function(){this.$service().show()
},_onClose:function(){this.$service().hide()
},_onChange:function(c){var b=c.center;
this.$map_view().setCenter(b)
},_listenPanel:function(){this.$panel().attach({fold:this._onPanelSizeChanged.bind(this),unfold:this._onPanelSizeChanged.bind(this)})
},_onPanelSizeChanged:function(){this.$overview_view().isVisible()&&this._onChangeMapDone()
}})
}());
(function(d,e){var a="overview",c=165,b=165;
iron.ns("nhn.map.overview").OverviewView=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){this._UID=iron.guid();
this._docEl=nhn.map.DOMCache.getDocument();
this._containerEl=d("div.nmap_mover")
},_onActivate:function(){this._containerEl.show();
this._bindEvent()
},_onDeactivate:function(){this._unbindEvent();
this._containerEl.hide()
},_bindEvent:function(){this._containerEl.on("click."+this._UID,'map[name="img_mover_hide"] area',this._onClickCloseBtn.bind(this)).on("click."+this._UID,'map[name="img_mover_expand"] area',this._onClickOpenBtn.bind(this))
},_unbindEvent:function(){this._containerEl.off("."+this._UID)
},_onClickOpenBtn:function(f){f.preventDefault();
f.stopPropagation();
this.dispatch("open")
},_onClickCloseBtn:function(f){f.preventDefault();
f.stopPropagation();
this.dispatch("close")
},_prepareDom:function(j,i,k){var h=new nhn.mapcore.LatLng(i[1],i[0]),g=new nhn.mapcore.LatLng(i[3],i[2]),f=new nhn.mapcore.LatLng((h.y-g.y)/2+g.y,(g.x-h.x)/2+h.x).toInner(),l=d("#"+a)[0];
this._overviewMap=new nhn.map.overview.OverviewMap(l,{mapType:j,center:f,bound:[h,g],offset:k,width:c,height:b});
this._createBbox(this._overviewMap.getMovableContainer())
},_createBbox:function(f){this._backgroundBboxEl=d('<div class="nmap_mover_box background" style="z-index:100"><span></span></div>');
this._foregroundBboxEl=d('<div class="nmap_mover_box foreground" style="z-index:110"><span></span></div>');
this._bboxEl=d().add(this._backgroundBboxEl).add(this._foregroundBboxEl);
d(f).append(this._bboxEl);
this._bboxEl.each(function(h,g){var j=d(g),k=j.find("span").css("opacity");
j.find("span").css("opacity",k/this._bboxEl.length)
}.bind(this))
},show:function(g,f,h){if(!this._overviewMap){this._prepareDom(g,f,h)
}else{this.setBound(f,h);
this.setMapType(g)
}this._bindMapEvent();
this._containerEl.removeClass("nmap_mover_hide");
this._containerEl.find(".nmap_mover_img").attr("usemap","#img_mover_hide")
},hide:function(){this._unbindMapEvent();
this._containerEl.addClass("nmap_mover_hide");
this._containerEl.find(".nmap_mover_img").attr("usemap","#img_mover_expand")
},isVisible:function(){return !this._containerEl.hasClass("nmap_mover_hide")
},_bindMapEvent:function(){this._foregroundBboxEl.on("mousedown",this._onMousedownDraggable.bind(this))
},_unbindMapEvent:function(){this._foregroundBboxEl.off()
},_onMousedownDraggable:function(f){this._mousedownPosition={left:f.pageX,top:f.pageY};
this._bindEphemeralEvent();
return false
},_onMousemoveDocument:function(g){var f={left:g.pageX,top:g.pageY},h={left:f.left-this._mousedownPosition.left,top:f.top-this._mousedownPosition.top};
this._foregroundBboxEl.css({left:this._backgroundBboxEl.position().left+h.left,top:this._backgroundBboxEl.position().top+h.top});
return false
},_onMouseupDocument:function(n){this._mousedownPosition=null;
this._unbindEphemeralEvent();
var h=this._foregroundBboxEl.width(),o=this._foregroundBboxEl.height(),l=this._foregroundBboxEl.position(),m={left:l.left+h,top:l.top+o},g={left:l.left+h/2,top:l.top+o/2};
var k=this._overviewMap.getPointByPixel({x:l.left,y:l.top}),i=this._overviewMap.getPointByPixel({x:m.left,y:m.top}),f=this._overviewMap.getPointByPixel({x:g.left,y:g.top}),j=[k.x,k.y,i.x,i.y];
this.dispatch("change",{center:new nhn.mapcore.LatLng(f.y,f.x),bound:j});
nhn.map.LogClick({element:n.target,event:n,acode:"mnm.drag"});
return false
},_bindEphemeralEvent:function(){this._docEl.on("mousemove."+this._UID,this._onMousemoveDocument.bind(this)).on("mouseup."+this._UID,this._onMouseupDocument.bind(this))
},_unbindEphemeralEvent:function(){this._docEl.off("."+this._UID)
},setBound:function(f,g){this._overviewMap.setBound(f,g)
},setBboxSize:function(f){var g=new nhn.mapcore.LatLng(f[1],f[0]),k=new nhn.mapcore.LatLng(f[1],f[2]),m=new nhn.mapcore.LatLng(f[3],f[0]);
var h=this._overviewMap.getPixelByPoint(g),i=this._overviewMap.getPixelByPoint(k),j=this._overviewMap.getPixelByPoint(m);
var l=i.x-h.x,n=j.y-h.y;
this._bboxEl.css({width:l,height:n});
if(l>c-10||n>b-10){this._bboxEl.hide()
}else{this._bboxEl.show()
}},_setBboxPosition:function(h,j){var i=this._overviewMap.getPixelByPoint(j);
var g=h.width(),f=h.height();
h.css({left:i.x-(g/2),top:i.y-(f/2)})
},setForegroundBboxPosition:function(f){this._setBboxPosition(this._foregroundBboxEl,f)
},setBackgroundBboxPosition:function(f){this._setBboxPosition(this._backgroundBboxEl,f)
},setMapType:function(f){this._overviewMap.setMapType(f)
},getMapType:function(){return this._overviewMap.getMapType()
},getElement:function(){return this._containerEl[0]
}})
}(jQuery));(function(){nhn.map.service.ContextMenu=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){this._instanceId=Date.now();
this.menuQueue=[];
this._groupList=[];
this._itemList=[];
this._managers=[];
this._ctrlKeyDowned=false;
this._exterior=["left","top"];
this._template=nhn.mapservice.TemplateRepos.get("contextmenu");
this._pinTemplate=nhn.mapservice.TemplateRepos.get("contextmenu_pin");
this._document=nhn.map.DOMCache.getDocument();
this._element=$();
this.currentPoint={x:0,y:0};
this._activated=false
},_observe:function(){if(this._observing){return false
}this._mapListeners={RESIZE_MAP_DONE:this.hide.bind(this),REDRAW_DONE:this.hide.bind(this),CHANGE_MAP_DONE:this._onChangeMapDone.bind(this)};
this.$map().attach(this._mapListeners);
this._observing=true
},_unobserve:function(){this.$map().detach(this._mapListeners);
this._observing=false
},_onChangeMapDone:function(d){if(this._ctrlKeyDowned||!d.moved){return
}this.hide()
},_onActivate:function(){if(!this._element.length){this._draw()
}this._bindEvent();
this._observe();
this._managers.forEach(function(d){d.activate()
})
},_onDeactivate:function(){this._managers.forEach(function(d){d.deactivate()
});
this._unbindEvent();
this._unobserve()
},_draw:function(){var d=nhn.map.DOMCache.getMapArea();
this._element=$("div.ly_d_context",d);
if(!this._element.length){this._element=$(this._template.process({}));
d.append(this._element);
this._pin=$(this._pinTemplate.process({}));
d.append(this._pin)
}this._initContextmenu()
},_bindEvent:function(){var f=$(this.$map().getMapElement()),e=this._instanceId,d=this;
f.on("contextmenu."+e,this._onContextMenu.bind(this));
$("body").on("mousedown."+e,this._onMapMouseDown.bind(this));
this._document.on("keydown."+e,function(g){if(!g.ctrlKey&&g.keyCode!==17){return
}d._ctrlKeyDowned=true
});
this._document.on("keyup."+e,function(g){d._ctrlKeyDowned=false
});
this._element.on("click","a",this._onClickMenuItem.bind(this))
},_unbindEvent:function(){var e=$(this.$map().getMapElement()),d=this._instanceId;
e.off("contextmenu."+d);
$("body").off("mousedown."+d,this._onMapMouseDown.bind(this));
this._element.off("click","a")
},_onMapMouseDown:function(f){var d=f.target;
this._element.has(d).length||this.hide()
},_resetFirstMenu:function(){var d=false;
this._groupList.forEach(function(e){if(e.css("display")!="none"){d?e.removeClass("first"):e.addClass("first");
d=true
}})
},showTitle:function(e){if(!e||!this._element.length){return
}var d=e.title||"명칭 없음";
this._titleTextElement.text(d).attr("title",d);
this._titleElement.show()
},hideTitle:function(){this._element.removeClass("sc_menu_ext");
this._titleElement.hide()
},_setPosition:function(d,e){this._element.css({left:d,top:e||d});
if(this._titleElement.css("display")=="none"){var f=this._exterior;
d+=f[0]=="left"?-3:(this._element.width()-3);
e+=f[1]=="top"?-3:(this._element.height()-3);
this._pin.M_lazyloadImg().css({left:d,top:e||d})
}},setDisableState:function(d){this._isDisabledMenu=d
},hide:function(){this._setPosition(-9999)
},show:function(h){if(this._isDisabledMenu){return
}var f=this._element.width(),n=this._element.height(),i=this.$map().getMapSize(),d=this.$map().getMapOffset({x:h.left,y:h.top}),e="left",g="top",l=d.x,k=d.y,m,j;
m=i.width-f;
j=i.height-n;
if(d.x>m){l-=f;
e="right"
}if(h.top>j){k-=n;
g="bottom"
}this.$bridge().hideMarkerLabel();
this._exterior=[e,g];
this._setPosition(l,k)
},getElement:function(){return this._element[0]
},getContextElement:function(){return this._contextElement[0]
},registContextMenuManager:function(d){this._managers.push(d)
},unregistContextMenuManager:function(e){var d=this._managers.indexOf(e);
this._manager.splice(d,1)
},_onContextMenu:function(i){var h=$(i.target),k=h.closest(a),d=h.closest("."+c),j,f;
i.preventDefault();
if(h&&h.closest("._none_pointer")[0]&&!d[0]){return false
}if(k.length){return false
}if(d.length){h=d
}j=new nhn.map.Offset(i.pageX,i.pageY);
f=h.attr("id")||"";
var g=h.hasClass(c)&&f.indexOf("ADDRESS")==-1&&!(h.hasClass("no_context_title"));
if(g){this._clickedMarker=this.$bridge().getMarkerById(f);
this._updateContextMenuList(f);
this.showTitle(this._clickedMarker);
this.currentPoint=this._clickedMarker.point.copy()
}else{delete this._clickedMarker;
this._updateContextMenuList(f,h);
this.hideTitle();
this.currentPoint=this.$map().getPixelToLatLng({x:j.left,y:j.top})
}this._deactivateStreetView();
this.show(j);
return false
},_updateContextMenuList:function(d,e){this._managers.forEach(function(f){f.updateContextMenuList(d)
});
this.dispatch("updateContextMenuList",{markerId:d,target:e})
},_initContextmenu:function(){this._assignElement();
this.menuQueue.forEach(function(d){this._addContextMenu(d)
},this);
this.menuQueue.length=0
},_assignElement:function(){this._element.show().css({position:"absolute",left:-999,top:-999,zIndex:999});
this._contextElement=this._element.find("div.ly_d_context_box");
this._titleElement=this._element.find("h3");
this._titleTextElement=this._titleElement.find("strong");
this.hideTitle()
},_changeClickCode:function(d,g){var e=g.attr("class");
var f=/map\*[A-Z]/;
if(d){if(d.type==="ADPIN"){g.attr("class",e.replace(f,"map*Z"))
}else{if(d.type==="AD"){g.attr("class",e.replace(f,"map*Q"))
}else{g.attr("class",e.replace(f,"map*R"))
}}}else{g.attr("class",e.replace(f,"map*R"))
}},_onClickMenuItem:function(h){h.preventDefault();
var g=$(h.target),j=g.attr("href").split("#").pop(),d=this._clickedMarker,f;
if(d){f={type:d.type,title:d.title,point:d.point,markerId:d.id};
if(d.options&&d.options.entranceCoords){f.entranceCoords=d.options.entranceCoords
}this.currentPoint=d.point
}this._changeClickCode(d,g);
this.currentPoint=this.currentPoint.toInner();
var i=this.currentPoint.copy();
this.$bridge().fireMessage(j,i,f);
this.dispatch("item_clicked",{domEvent:h.originalEvent,msgName:j,point:i,itemInfo:f});
this.hide();
g.blur()
},_handleQueue:function(){var d=this._groupList.sort(function(f,e){return parseInt(f.data("group-id"),10)-parseInt(e.data("group-id"),10)
});
d.forEach(function(e){e.removeClass("first");
this._contextElement.append(e)
},this);
d[0].addClass("first");
this._groupList=d
},_addContextMenu:function(d){var e=this._getGroup(d.groupId);
d.setGroup(e);
d.createItem();
this._itemList.push(d);
if(this._queuingTimer){window.clearTimeout(this._queuingTimer);
delete this._queuingTimer
}this._queuingTimer=window.setTimeout(this._handleQueue.bind(this),500)
},_removeContextMenu:function(e){var d=this._itemList.indexOf(e);
e.destroy();
d>-1&&this._itemList.splice(d,1)
},_getGroupById:function(d){var e=this._groupList.filter(function(f){return f.data("group-id")==d
}).pop();
return e
},_getGroup:function(d){var e=this._getGroupById(d);
if(!e){e=this._createGroup(d)
}return e
},_createGroup:function(d){var e=$("<ul>");
e.data("group-id",d);
e.addClass(b["G_"+d]);
this._groupList.push(e);
return e
},_getItem:function(e,d){var f=this._itemList.filter(function(g){return g.getGroupId()==e&&g.getOrder()==d
}).pop();
return f
},addContextMenu:function(d){if(!this._element.length){this.menuQueue.push(d)
}else{this._addContextMenu(d)
}},removeContextMenu:function(d){this._removeContextMenu(d)
},hideContextMenuList:function(e,d){var f;
if(e instanceof nhn.map.service.ContextMenuItem){f=e
}else{f=this._getItem(e,d)
}f.hide()
},showContextMenuList:function(e,d){var f;
if(e instanceof nhn.map.service.ContextMenuItem){f=e
}else{f=this._getItem(e,d)
}f.show()
},showContextMenuGroup:function(d){var e=this._getGroupById(d);
if(e){e.show()
}else{this._groupList.forEach(function(f){f.show()
})
}this._resetFirstMenu()
},hideContextMenuGroup:function(d){var e=this._getGroupById(d);
if(e){e.hide()
}else{this._groupList.forEach(function(f){f.hide()
})
}this._resetFirstMenu()
},sortGroupItems:function(f,h){var g=this._getGroupById(f),h=h||"asc",e=(h=="asc")?10000:0,d;
if(!g||!g.length){return
}d=Array.prototype.slice.call(g.find("li"));
d.sort(function(k,j){var i=$(k).data("order")*1||e,l=$(j).data("order")*1||e;
return h=="asc"?i-l:l-i
});
g.empty();
d.forEach(function(i){g.append(i)
})
},removeContextMenuGroup:function(e){var f=this._getGroupById(e),d=this._groupList.indexOf(f);
if(d>-1){this._groupList.splice(d,1)
}f.remove();
this._resetFirstMenu()
},_listenPanorama:function(){this._panorama=this.$Panorama();
this._panorama.attach({openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this)})
},_onOpenPanorama:function(){this.deactivate()
},_onClosePanorama:function(){this.activate()
},_isPanoramaPlaying:function(){return this._panorama&&this._panorama.isPlaying()
},_deactivateStreetView:function(){var d=this._panorama;
if(d&&d.isStreetActivated()){d.deactivateStreetView()
}},_listenState:function(){this.$state().attach({changed:this._onStateChanged.bind(this)})
},_onStateChanged:function(d){if(this._isPanoramaPlaying()){return
}if(d.newState===nhn.map.Const.STATE_DISTANCE||d.newState===nhn.map.Const.STATE_AREA){this.deactivate()
}else{this.activate()
}}});
var c="_nmap_marker",a="div.lys, div.map_controller",b={G_10:"context_way",G_50:"context_way context_no_via",G_100:"context_way_setting",G_150:"context_theme",G_200:"context_zoom",G_300:"context_act"}
})();
nhn.map.service.ContextMenuItem=iron.Class({initialize:function(d,a,b,f,c,e){this.groupId=d;
this.order=a;
this.label=b;
this.msgName=f;
this.isHidden=c;
this.className=e
},setGroup:function(a){if(a.is(".context_way")){a[0].setAttribute("data-m-preload","directions")
}this.group=a;
return this
},getGroup:function(){return this.group
},setGroupId:function(a){this.groupId=a;
return this
},getGroupId:function(){return this.groupId
},setOrder:function(a){this.order=a;
if(this._element){this._element.data("order",a)
}return this
},getOrder:function(){return this.order
},setLabel:function(a){this.label=a;
if(this._element){this._element.find("a").html(a)
}return this
},getLabel:function(){return this.label
},setMsgName:function(a){this.msgName=a;
if(this._element){this._element.find("a").attr("href","#"+a)
}return this
},getMsgName:function(){return this.msgName
},setClassName:function(a){this.className=a;
if(this._element){this._element.find("a")[0].className=a
}return this
},getClassName:function(){return this.className
},setElement:function(a){this._element=a;
return this
},getElement:function(){return this._element
},createItem:function(){var g=this.getGroup(),b=this.getOrder(),a=g.find("li"),d=$("<li></li>"),f=-1;
for(var c=0,h=a.length;
c<h;
c++){var j=$(a[c]),e=parseInt(j.data("order"),10);
if(e>b){f=c;
break
}}d.data("order",b).html('<a href="#'+this.getMsgName()+'">'+this.getLabel()+"</a>");
if(this.getMsgName()==="SEND_REPORT_ERROR"){d.find("a").attr("target","_blank")
}if(this.getClassName()){d.find("a")[0].className=this.getClassName()
}if(f<0){g.append(d)
}else{$(a[f]).before(d)
}this.isHidden&&d.hide();
this.setElement(d);
return d
},show:function(){this.getElement().show();
return this
},hide:function(){this.getElement().hide();
return this
},destroy:function(){this._element.remove();
delete this._element;
delete this.group
}});
iron.ns("nhn.map.service").DefaultContextMenu=iron.Class({initialize:function(){var b=nhn.map.service.ContextMenuItem;
this.contextMenuList=[new b(200,100,"확대","ZOOM_IN_TO_CENTER",false,"cw_zoomin nclicks(map*R.zoomin)"),new b(200,200,"축소","ZOOM_OUT_TO_CENTER",false,"cw_zoomout nclicks(map*R.zoomout)"),new b(300,50,"이 위치의 주소는?","WHATS_HERE",false,"cw_here nclicks(map*R.here)"),new b(300,200,"내 업체 등록","REGISTER_SPOT",false,"cw_myshop nclicks(map*R.submit)"),new b(300,300,"신규장소 등록","USER_REGISTER_SPOT",false,"cw_new nclicks(map*R.placesubmit)"),new b(300,400,"지도 수정요청","SEND_REPORT_ERROR",false,"cw_modify nclicks(map*R.csopen)")];
this.addContextMenu(this.contextMenuList);
var a=this.$ContextMenu();
a.registContextMenuManager(this.$directionsManager());
a.activate()
},addContextMenu:function(a){var c=this.$ContextMenu();
for(var b=0;
b<a.length;
b++){c.addContextMenu(a[b])
}},hideWhatsHere:function(){this.$ContextMenu().hideContextMenuList(300,50)
},showWhatsHere:function(){this.$ContextMenu().showContextMenuList(300,50)
},show:function(){this.$ContextMenu().setDisableState(false)
},hide:function(){this.$ContextMenu().hide();
this.$ContextMenu().setDisableState(true)
}});
(function(){nhn.map.service.DirectionsContextMenu=iron.Class({mix:[nhn.map.UIComponent]},{initialize:function(){f()
},_onActivate:function(){this._registMenuItem()
},_onDeactivate:function(){this._unregistMenuItem()
},_registMenuItem:function(){var g=this.$ContextMenu(),h;
b.forEach(function(i){for(var j in i){h=i[j];
g.addContextMenu(h)
}})
},_unregistMenuItem:function(){var g=this.$ContextMenu(),h;
b.forEach(function(i){for(var j in i){h=i[j];
g.removeContextMenu(h)
}})
},updateContextMenuList:function(g){var h=this.$menubar().getMenuState();
if(h==="ROUTE"){this._setConmenuToRoute(g)
}else{this._setConmenuToLocation();
if(this.$bridge().isThemeEditing()){this.$ContextMenu().hideContextMenuGroup(d.BTN_CTXITEM)
}}},_setConmenuToLocation:function(){var g=this.$ContextMenu();
g.hideContextMenuGroup(d.BTN_CTXITEM_WITHOUT_VIA);
g.hideContextMenuGroup(d.LIST_CTXITEM);
g.showContextMenuGroup(d.BTN_CTXITEM)
},_hideAllCtxItems:function(g){g=g||a;
for(var h in g){g[h].hide().setOrder(1000)
}},_setConmenuToRoute:function(k){var p=this.$directions(),i=p.getRequest().getJson(),s=p.getRequest().getTypeNum(),r=this.$bridge().getMarkerById(k),j=this.$ContextMenu(),q=a,l=r?$(r.getElement()):null,o=s==1||s==3,m=l&&l.hasClass("_route_start"),h=l&&l.hasClass("_route_via"),n=l&&l.hasClass("_route_end"),g=(!l||!l.hasClass("_route_start")&&!l.hasClass("_route_end")&&!l.hasClass("_route_via"));
j.hideContextMenuGroup(d.BTN_CTXITEM_WITHOUT_VIA);
j.hideContextMenuGroup(d.BTN_CTXITEM);
j.showContextMenuGroup(d.LIST_CTXITEM);
this._hideAllCtxItems(q);
if(m){q.DEPARTURE_REMOVE.show().setOrder(100);
q.VIA.show();
if(i.destination){q.DESTINATION_RESET.show().setOrder(200)
}else{q.DESTINATION.show().setOrder(200)
}}if(n){q.DESTINATION_REMOVE.show().setOrder(100);
q.VIA.show();
if(i.start){q.DEPARTURE_RESET.show().setOrder(200)
}else{q.DEPARTURE.show().setOrder(200)
}}if(h){q.VIA_REMOVE.show().setOrder(100);
if(i.start){q.DEPARTURE_RESET.show().setOrder(200)
}else{q.DEPARTURE.show().setOrder(200)
}if(i.destination){q.DESTINATION_RESET.show().setOrder(300)
}else{q.DESTINATION.show().setOrder(300)
}}if(o){q.VIA.hide();
q.VIA_REMOVE.hide();
if(g){j.hideContextMenuGroup(d.LIST_CTXITEM);
j.showContextMenuGroup(d.BTN_CTXITEM_WITHOUT_VIA)
}}else{if(g){j.hideContextMenuGroup(d.LIST_CTXITEM);
j.showContextMenuGroup(d.BTN_CTXITEM)
}}j.sortGroupItems(d.LIST_CTXITEM)
}});
var f=function(){var g=nhn.map.service.ContextMenuItem;
d={BTN_CTXITEM:10,BTN_CTXITEM_WITHOUT_VIA:50,LIST_CTXITEM:100};
e={DEPARTURE:new g(10,100,"출발","APPLY_DEPARTURE",false,"btn_cw_start nclicks(map*R.from)"),VIA:new g(10,200,"경유","APPLY_WAYPOINT",false,"btn_cw_via nclicks(map*R.via)"),DESTINATION:new g(10,300,"도착","APPLY_DESTINATION",false,"btn_cw_end nclicks(map*R.to)")};
c={DEPARTURE:new g(50,100,"출발","APPLY_DEPARTURE",false,"btn_cw_start nclicks(map*R.from)"),DESTINATION:new g(50,300,"도착","APPLY_DESTINATION",false,"btn_cw_end nclicks(map*R.to)")};
a={DEPARTURE:new g(100,100,"출발지로 설정","APPLY_DEPARTURE",false,"cw_reset nclicks(map*R.from)"),DEPARTURE_RESET:new g(100,101,"출발지로 재설정","APPLY_DEPARTURE",true,"cw_reset nclicks(map*R.refrom)"),DEPARTURE_REMOVE:new g(100,102,"출발지 삭제","CLEAR_DEPARTURE",true,"cw_del nclicks(map*R.delfrom)"),DESTINATION:new g(100,200,"도착지로 설정","APPLY_DESTINATION",false,"cw_reset nclicks(map*R.to)"),DESTINATION_RESET:new g(100,201,"도착지로 재설정","APPLY_DESTINATION",true,"cw_reset nclicks(map*R.reto)"),DESTINATION_REMOVE:new g(100,202,"도착지 삭제","CLEAR_DESTINATION",true,"cw_del nclicks(map*R.delto)"),VIA:new g(100,300,"경유지로 추가","APPLY_WAYPOINT",false,"cw_via nclicks(map*R.via)"),VIA_REMOVE:new g(100,301,"경유지 삭제","CLEAR_WAYPOINT",false,"cw_del nclicks(map*R.delvia)")};
b=[e,c,a]
},d,e,c,a,b
})();
iron.ns("nhn.map.service").Marker=iron.Class({inherit:nhn.map.Dispatcher},{HIGHLIGHT_ZINDEX:30000,EVENTS_TO_STOP_PROPAGATION_WHEN_DISABLED:["click","mouseover","mouseenter","mouseout","select"],highlightTimer:null,initialize:function(b,a){if(!b||!(b instanceof nhn.map.Icon)){throw new Error("instance of nhn.map.Icon required")
}this.options=$.extend({title:"",type:"NewNormal",point:null,groupIndex:0,zIndex:1,smallIcon:null,disableClassName:"pin_dimmed",showLabel:true,labelOffset:new nhn.map.Size(5,0)},a||{});
this.group="";
this.uncoverable=false;
this._prepareDOM();
this.setId(this.options.id||"MARKER_"+iron.guid());
this.setPoint(this.options.point);
this.setIcon(b);
this.setSmallIcon(this.options.smallIcon);
this.setZIndex(this.options.zIndex);
this.setTitle(this.options.title);
this.setType(this.options.type);
this.setLabelOffset(this.options.labelOffset);
this.enable()
},_prepareDOM:function(){var a="position:absolute; cursor:pointer; _cursor:pointer; overflow:hidden; margin:0; border:0;"+(this.options.cssText||"");
this.element=$('<div class="_nmap_marker _none_pointer" style="'+a+'"></div>')
},setIcon:function(a){this._icon=a;
if(this._icon instanceof nhn.map.service.MarkerSpriteIcon){this._setMarkerSprite();
this._setAltText()
}else{this._setMarkerImage()
}},getIcon:function(){return this._icon
},_setMarkerSprite:function(){var b=this.getIcon(),a=b.getClassName(),c=b.getSpriteOffset();
if(!this.imgElement||!this.imgElement.length){this.imgElement=$('<span><a href="#" class="ck">'+this.options.title+"</a></span>");
this.imgElement.find("a").on("focus",function(d){$(d.currentTarget).blur()
});
this.element.append(this.imgElement)
}this.element.css({width:b.getWidth(),height:b.getHeight()})[0].className="_nmap_marker _none_pointer "+a;
this.imgElement.css({left:c.getLeft(),top:c.getTop()})
},_setAltText:function(){},_setMarkerImage:function(){if(!this.imgElement||!this.imgElement.length){this.imgElement=$('<img alt="" style="position:absolute;top:0;left:0;z-index:1;" />');
this.element.append(this.imgElement)
}var e=this.getIcon(),a=e.getWidth(),d=e.getHeight(),c=a,i=d,f,b;
if(nhn.map.SpriteIcon&&e instanceof nhn.map.SpriteIcon){c=e.getSpriteWidth();
i=e.getSpriteHeight();
f=e.getWidth()*e.getSpriteOffset().getWidth();
b=e.getHeight()*e.getSpriteOffset().getHeight();
this.imgElement.css({left:-f,top:-b})
}this.element.css({width:a,height:d});
this.imgElement.attr("src",e.src).attr("width",c).attr("height",i).css({width:c,height:i});
var g=e.src.split(".");
if($.browser.msie&&$.browser.version<7&&g.pop().toLowerCase()==="png"){this._fixPngOpacity()
}},_fixPngOpacity:function(){var a=this.imgElement.attr("src");
this.imgElement.attr("src","https://ssl.pstatic.net/static/maps/dot.gif").css("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a+"',sizingMethod='image')")
},setId:function(a){this.options.id=a;
this.id=a;
this.element.attr("id",a)
},getId:function(){return this.id||null
},setPoint:function(a){if(!a){return false
}this.options.point=a.copy();
this._point=this.options.point;
this.point=this._point;
this.redraw()
},getPoint:function(){return this.point||this._point
},setTitle:function(a){this.options.title=a;
this.title=this.options.title
},getTitle:function(){return this.title
},setSize:function(a){var b=this.getIcon();
if(b){b.setSize(a)
}},getSize:function(){var a=this.getIcon();
return a?a.getSize():null
},setSmallIcon:function(a){this._smallIcon=a
},getSmallIcon:function(){return this._smallIcon
},setGroupIndex:function(a){this.options.groupIndex=a
},getGroupIndex:function(){return this.options.groupIndex||0
},setZIndex:function(b){var a=this.getGroupIndex();
this.options.zIndex=b;
this.zIndex=b;
this.element.css("z-index",a+b)
},getZIndex:function(){return this.element.css("z-index")
},getElement:function(){return this.element[0]
},getBound:function(a){return this._getBound(a)
},getURL:function(){return this.getIcon().src
},getOffset:function(){return this.getIcon().getOffset()
},getWidth:function(){return this.getIcon().getWidth()
},getHeight:function(){return this.getIcon().getHeight()
},setType:function(a){this._type=a;
this.type=this._type
},getType:function(){return this.type||this._type
},setLabelOffset:function(a){this.labelOffset=a
},getLabelOffset:function(){return this.labelOffset
},show:function(){this.setVisible(true)
},hide:function(){this.setVisible(false)
},setVisible:function(a){var b=this.getVisible(),a=!!a;
a?this.element.show():this.element.hide();
this._visibility=a;
if(b!=a){this.dispatch($.Event("changeVisible",{visible:a,markerInfo:this.getInfo()}))
}},getVisible:function(){return this._visibility
},_getBound:function(a){var b=$(a||this.getElement()),c={left:parseFloat(b.css("left"))+parseFloat(b.css("margin-left")),top:parseFloat(b.css("top"))+parseFloat(b.css("margin-top"))};
c.right=c.left+b.width();
c.bottom=c.top+b.height();
return c
},_getBoundThis:function(){return this._getBound(this.getElement())
},_getMarginedBound:function(a,b){return{left:a.left-b,top:a.top-b,right:a.right+b,bottom:a.bottom+b}
},_isCover:function(b){var c=$(b),g=5,f=this._getBoundThis(),e=this._getBound(c),d=this._getMarginedBound(f,g),a=this._getMarginedBound(e,g);
return(d.left<=e.left&&d.top<=e.top&&d.right>=e.right&&d.bottom>=e.bottom)||(f.left>=a.left&&f.top>=a.top&&f.right<=a.right&&f.bottom<=a.bottom)
},_getCoveredMarker:function(a){var a=$(a),c=this.getPane(),b;
if(c){b=c.aOverlays;
b.forEach(function(d){if(a[0]==d.getElement()){return d
}})
}return null
},getCoveredMarkers:function(){var b=$(".nmap_movable_container ._nmap_marker"),c=this.getPane(),a=[];
c&&c.aOverlays&&b.each(function(e,d){if(this._isCover(d)){c.aOverlays.forEach(function(f){if(d==f.getElement()){a.push(f)
}})
}});
return a
},setPane:function(a){if(!a){return false
}this._pane=a
},getPane:function(){return this._pane||null
},onadd:function(a){this.setPane(a);
this.show();
this.redraw()
},draw:function(){},redraw:function(b){var d=this.getPane();
if(!d||!this.getPoint()){return false
}if(b){b.point&&this.setPoint(b.point)
}var a=d.fromPointToOffset(this.getPoint().toInner()),c=this.getIcon().getOffset();
this.element.css({left:a.x-c.width,top:a.y-c.height});
this._pixelPoint=a;
this.dispatch($.Event("redraw",{point:this.getPoint()}));
return this._pixelPoint
},remove:function(){var a=this.getPane();
if(a){a.removeOverlay(this);
this.dispatch($.Event("remove",{id:this.getId()}))
}},onremove:function(){this.destroy()
},isCovering:function(a){return this._isCover(a)
},highlight:function(){var a=$.Deferred();
window.clearTimeout(this.highlightTimer);
this.highlightTimer=window.setTimeout(function(){this.element.css("z-index",this.HIGHLIGHT_ZINDEX);
this._focusIcon();
this._highlighted=true;
a.resolve()
}.bind(this),10);
return a.promise()
},_focusIcon:function(){if(!(this._icon instanceof nhn.map.service.MarkerSpriteIcon)){return
}var a=this._icon.getClassName().split(/ +/).filter(function(b){return b.match(/^sp_pins/)&&!b.match(/_over$/)
}).map(function(b){return[b,"over"].join("_")
}).filter(function(b){return !this._icon.getClassName().match(b)
}.bind(this)).join(" ");
this._icon.setClassName(this._icon.getClassName()+" "+a);
this.setIcon(this._icon)
},unhighlight:function(){window.clearTimeout(this.highlightTimer);
var a=this.getGroupIndex();
this.element.css("z-index",a+this.options.zIndex);
this._blurIcon();
this._highlighted=false
},_blurIcon:function(){if(!(this._icon instanceof nhn.map.service.MarkerSpriteIcon)){return
}var a=this._icon.getClassName().split(/\s+/).filter(function(b){return !b.match(/_over$/)
}).join(" ");
this._icon.setClassName(a);
this.setIcon(this._icon)
},isSelected:function(){return this._selected||false
},select:function(a){if(!this.isEnabled()||this._selected){return
}if(!this._forceSelected){this.highlight();
this._selected=true;
this.dispatch($.Event("select",{markerInfo:this.getInfo(),options:a||{}}))
}},unselect:function(){if(!this.isEnabled()||!this._selected){return
}if(!this._forceSelected){this.unhighlight();
this._selected=false;
this.dispatch($.Event("unselect",{markerInfo:this.getInfo()}))
}},selectWithForce:function(){this.select();
this._forceSelected=true;
this.dispatch($.Event("select_force",{markerInfo:this.getInfo()}))
},unselectWithForce:function(){delete this._forceSelected;
this.unselect();
this.dispatch($.Event("unselect_force",{markerInfo:this.getInfo()}))
},onLoad:function(){this.dispatch($.Event("load",{point:this.getPoint(),markerInfo:this.getInfo()}))
},onMouseOver:function(){var a=$.Deferred();
$.when(this.highlight()).then(function(){this.dispatch($.Event("mouseover",{point:this.getPoint(),markerInfo:this.getInfo()}));
a.resolve()
}.bind(this));
return a.promise()
},onMouseOut:function(){if(!this._selected){this.unhighlight()
}this.dispatch($.Event("mouseout",{point:this.getPoint(),markerInfo:this.getInfo()}))
},onDraw:function(){this.dispatch($.Event("draw",{point:this.getPoint(),markerInfo:this.getInfo()}))
},onClick:function(b,a){if(this._selected){this.unselect()
}else{this.select()
}this.dispatch($.Event("click",{domEvent:(a)?a.originalEvent:null,point:this.getPoint(),markerInfo:this.getInfo()}))
},onSelect:function(){},visible:function(){return this.getVisible()
},toDupLayerInfo:function(){var c=this.getSmallIcon(),d;
if(c&&c instanceof nhn.map.SpriteIcon){var a=c.getSpriteSize(),b=c.getSpriteOffset();
d={type:c.getType(),title:this.getTitle(),id:this.getId(),url:c.getSrc(),className:c.getClassName(),spriteWidth:a.width,spriteHeight:a.height,xOffset:b.width,yOffset:b.height,iconWidth:c.getWidth(),iconHeight:c.getHeight()}
}return d
},getInfo:function(){return{id:this.getId(),type:this.getType(),point:this.getPoint(),size:this.getSize(),offset:this.getOffset(),smallIcon:this.getSmallIcon(),options:this.options}
},isEnabled:function(){return !this._disabled
},_createDimmedElement:function(){this._dimmedElement=$('<span class="'+this.options.disableClassName+'"></span>');
this.element.css("cursor","auto").append(this._dimmedElement);
return this._dimmedElement
},_getDimmedEventType:function(){var a=[].concat(this.EVENTS_TO_STOP_PROPAGATION_WHEN_DISABLED);
a=a.map(function(b){return b+".dimmedMarker"
}).join(" ");
return a
},enable:function(){if(this.isEnabled()){return
}this._disabled=false;
this.element.off(this._getDimmedEventType()).css("cursor","pointer");
if(this._dimmedElement){this._dimmedElement.remove();
delete this._dimmedElement
}if(this._preDisabledZIndex){this.setZIndex(this._preDisabledZIndex)
}delete this._preDisabledZIndex;
this.dispatch($.Event("enabled"))
},disable:function(){if(!this.isEnabled()){return
}var c=this.element,a=this._dimmedElement,b=this._getDimmedEventType();
this._disabled=true;
if(!a||!a.length){this._createDimmedElement();
a=this._dimmedElement
}c.on(b,function(d){d.stopPropagation();
d.preventDefault();
return false
});
this._preDisabledZIndex=parseInt(this.getZIndex(),10);
this.element.css("z-index",1);
a.disableSelection();
this.dispatch($.Event("disabled"))
},destroy:function(){this.element.remove();
delete this._pane;
this.dispatch($.Event("destroy",{markerInfo:this.getInfo()}))
}});
(function(){var b=iron.ns("nhn.map.service"),a=b.Marker;
b.PolyMarker=iron.Class(a,{initialize:function(d,c){this.oPolyLines=[];
a.apply(this,[d,c])
},_calcDist:function(c,f){var e=c.x-f.x,d=c.y-f.y;
return Math.sqrt(e*e+d*d)
},setPointByBound:function(f,g,e){var e=e||1,i=1,c,j,h,d=this.getPoint().toInner(),k=this._centerOfPath||g;
if(this._isInBound(f,d,e)){return
}c=d.copy();
j=d.copy();
h=this._calcDist(d,g);
this.oPolyLines.forEach(function(m,n){var p=m.getPoints(),l,q;
for(var n=0,o=p.length;
n<o;
n+=i){l=p[n].toInner();
if(this._isInBound(f,l,e)){var q=this._calcDist(l,k);
if(h>q){j=l;
h=q
}}else{if(!j.equals(d)){break
}}}},this);
this.setPoint(j.toLatLng());
this.dispatch($.Event("moveMarker",{oldPoint:c,point:this.getPoint()}))
},_isInBound:function(c,e,d){var e=e||this.getPoint().toInner(),d=d||0;
return e.x>c[0]+d&&e.y<c[1]-d&&e.x<c[2]-d&&e.y>c[3]+d
},setLine:function(l){if(!l||!l.geometry){return
}if(!this.oPolyLines){this.oPolyLines=[]
}var c=l;
var k=[];
var h=c.geometry.coordinates;
if(c.geometry.type=="FilledPolygon"){var n=h.split(" ");
for(var f=0;
f<n.length;
++f){var o=n[f].split(",");
k.push(new nhn.mapcore.UTMK(o[0],o[1]))
}var m={stroke:"#FF3B92","stroke-width":5,"stroke-opacity":0.45,fill:l.color,"fill-opacity":"0.3"};
l.stroke=m;
var e=new nhn.mapcore.Polygon(k,m);
this.oPolyLines.push(e)
}else{if(c.geometry.type=="LineString"){var g={stroke:"#FF3B92","stroke-width":5,"stroke-opacity":0.45};
l.stroke=g;
k=[];
var n=h;
for(var d=0;
d<n.length;
d++){var o=n[d];
k.push(new nhn.mapcore.UTMK(o[0],o[1]))
}var e=new nhn.mapcore.Polyline(k,g);
this.oPolyLines.push(e)
}else{if(c.geometry.type=="MultiLineString"){var g={stroke:"#FF3B92","stroke-width":5,"stroke-opacity":0.45};
l.stroke=g;
for(var f=0;
f<h.length;
++f){k=[];
var n=h[f];
for(var d=0;
d<n.length;
d++){var o=n[d];
k.push(new nhn.mapcore.UTMK(o[0],o[1]))
}var e=new nhn.mapcore.Polyline(k,g);
this.oPolyLines.push(e)
}}else{alert("Error : not defined type. "+c.geometry.type)
}}}},setPolygon:function(e){var k=e.geometry,h=k.coordinates,l,n,m,d;
for(var g=0,c=h.length;
g<c;
g++){n=[];
for(var f=0;
f<h[g].length;
f++){m=h[g][f];
d=new nhn.mapcore.LatLng(m[1],m[0]);
n.push(d)
}l=new nhn.mapcore.Polygon(n,{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.7",strokeStyle:"solid",fillColor:"FF8D8D",fillOpacity:"0"});
this.oPolyLines.push(l)
}},onadd:function(){a.prototype.onadd.apply(this,arguments);
var c=this.options.poiInfo;
if(!c){return
}if(c.hasRoad){this.setLine(c.road.line)
}},focus:function(){var c=parseInt(this.getZIndex(),10);
if(c>this.HIGHLIGHT_ZINDEX){return
}this.element.css("z-index",c+this.HIGHLIGHT_ZINDEX)
},blur:function(){this.setZIndex(this.options.zIndex)
}})
}());
iron.ns("nhn.map.service").PolyPointMarker=iron.Class({inherit:nhn.map.service.Marker},{initialize:function(c){var b=nhn.map.Size.create,d=new nhn.map.SpriteIcon("https://ssl.pstatic.net/static/maps2/icons/pin_polyline.png",new b(11,11),b(5,5),{spriteSize:b(33,11),spriteOffset:b(0,0)}),a=$.extend({},c||{});
nhn.map.service.Marker.apply(this,[d,a]);
this.uncoverable=true
},changeLook:function(a){var a=a||"default",c=0,b=0;
switch(a){case"default":break;
case"select":c=-11;
b=0;
break;
case"unselect":c=-22;
b=0;
break
}this.imgElement.css({left:c,top:b})
},isCovering:function(){return false
},toPrint:function(){var a=this.getIcon();
return{imgOrder:0,offset:a.getOffset(),size:a.getSize(),spriteSize:a.getSpriteSize(),type:a.getType(),url:a.getSrc(),zIndex:this.getZIndex()}
}});
nhn.map.service.TrafficMarker=iron.Class({inherit:nhn.map.service.Marker},{initialize:function(b,c){var a=$.extend({},c||{});
if(c.acode){this._ncsCode=c.acode
}else{if(b.indexOf("TRAFFIC_BUS")===0){this._ncsCode="map*m.bus"
}else{if(b.indexOf("TRAFFIC_SUBWAY")===0){this._ncsCode="map*m.bus"
}}}var d=this._createSpriteIcon(b);
nhn.map.service.Marker.apply(this,[d,a]);
this.setSmallIcon(this._createSmallIcon())
},_createSmallIcon:function(){var b=this.getIcon(),a=b.getIconType();
return new nhn.map.service.SmallIcon(a)
},getTrafficData:function(){return this.options.trafficData
},onDraw:function(b,a,c){this.options.onDraw&&this.options.onDraw(b,a,c)
},_createSpriteIcon:function(a){return new nhn.map.service.MarkerSpriteIcon(a,this._ncsCode)
}});
(function(){iron.ns("nhn.map.service").MarkerSpriteIcon=iron.Class({inherit:nhn.map.Icon},{initialize:function(g,h){this._orderText=["A","B","C","D","E","F","G","H","I","J"];
g=g||"DEFAULT";
this.setNClicksCode(h);
this.setIconType(g);
this.setAltText(g);
this._setClassName();
this.setSpriteOffset(this._getSpriteOffsetPreset(g));
nhn.map.Icon.apply(this,["https://ssl.pstatic.net/static/maps3/icons/sp_pins.png",this._getIconSize(g),this._getIconOffset(g)])
},_getSpriteOffsetPreset:function(g){var h=e[g.toUpperCase()]||e.REGION;
return new nhn.map.Offset(h[0],h[1])
},_getIconSize:function(g){var i=this._getPresetType(g),h=a[i]||a.DEFAULT;
return new nhn.map.Size(h[0],h[1])
},_getIconOffset:function(g){var h=this._getPresetType(g),i=d[h]||d.DEFAULT;
return new nhn.map.Size(i[0],i[1])
},_getPresetType:function(h){h=h||this.getIconType();
var i=h.split("_")[0],k="DEFAULT";
for(var j in f){var g=j.split("|");
if(g.indexOf(i)>-1){k=f[j];
break
}}return k
},setIconType:function(g){this._iconType=g
},getIconType:function(){return this._iconType
},setAltText:function(h){var j="",g=this._orderText;
if(h.indexOf("REGION")===0){j="지역"
}else{if(h.indexOf("SITE")===0){var i=h.split("_");
j="장소";
if(i[1]!==undefined){j="장소 "+g[parseInt(i[1],10)]
}if(i[2]!==undefined){if(i[2]=="U"){j=j.replace("장소","도로")
}}}else{if(h.indexOf("BUS")===0){var i=h.split("_");
j="버스정류장";
if(i[1]!==undefined){j="버스정류장 "+(parseInt(i[1],10))
}}else{if(h.indexOf("BOOKMARK")===0){j="즐겨찾기"
}else{if(h.indexOf("ADPIN")===0){j="광고핀"
}else{if(h.indexOf("AD")===0){j="광고 "+h.split("_")[1]
}else{if(h.indexOf("INDOORVIEW")===0){j="실내뷰"
}else{if(h.indexOf("MUSEUM")===0){j="뮤지엄뷰"
}else{if(h.indexOf("INTERIOR")===0){j="펜션뷰"
}else{if(h.indexOf("FLIGHT")===0){j="항공뷰"
}else{if(h.indexOf("MARINE")===0){j="수중뷰"
}}}}}}}}}}}this._altText=j
},getAltText:function(){return this._altText
},_setClassName:function(){var h=this.getIconType(),g=h.split("_")[0],n=this.getNClicksCode(),p=[],l;
for(var j in c){var o=j.split("|");
if(o.indexOf(g)>-1){l=c[j]||"OTHER";
p.push(b[l])
}}if(h.match(/_ON$/)){for(var k=0,m=p.length;
k<m;
k++){p.push([p[k],"over"].join("_"))
}}if(p.length===0){p.push(b.OTHER)
}n&&p.push("nclicks("+n+")");
this.setClassName(p.join(" "))
},setClassName:function(g){this._className=g
},getClassName:function(){return this._className||b.DEFAULT
},setSpriteOffset:function(g){this._spriteOffset=g
},getSpriteOffset:function(){return this._spriteOffset
},setNClicksCode:function(g){if(!g){return
}this._nClicksCode=g
},getNClicksCode:function(){return this._nClicksCode
}});
var e={REGION:[0,0],SPOT:[0,0],ID:[0,0],ADDRESS:[-60,0],INDOORSPOT:[-60,0],REGION_U:[-30,0],ADDRESS_U:[-60,0],REGION_Q:[-30,0],SPOT_Q:[-30,0],ID_Q:[-30,0],ADDRESS_Q:[-30,0],SITE_0:[0,0],SITE_1:[-29,0],SITE_2:[-58,0],SITE_3:[-87,0],SITE_4:[-116,0],SITE_5:[-145,0],SITE_6:[-174,0],SITE_7:[-203,0],SITE_8:[-232,0],SITE_9:[-261,0],SITE_0_U:[0,-50],SITE_1_U:[-29,-50],SITE_2_U:[-58,-50],SITE_3_U:[-87,-50],SITE_4_U:[-116,-50],SITE_5_U:[-145,-50],SITE_6_U:[-174,-50],SITE_7_U:[-203,-50],SITE_8_U:[-232,-50],SITE_9_U:[-261,-50],SITE_0_Q:[0,-100],SITE_1_Q:[-29,-100],SITE_2_Q:[-58,-100],SITE_3_Q:[-87,-100],SITE_4_Q:[-116,-100],SITE_5_Q:[-145,-100],SITE_6_Q:[-174,-100],SITE_7_Q:[-203,-100],SITE_8_Q:[-232,-100],SITE_9_Q:[-261,-100],SITE_0_P:[0,-200],SITE_1_P:[-29,-200],SITE_2_P:[-58,-200],SITE_3_P:[-87,-200],SITE_4_P:[-116,-200],SITE_5_P:[-145,-200],SITE_6_P:[-174,-200],SITE_7_P:[-203,-200],SITE_8_P:[-232,-200],SITE_9_P:[-261,-200],BUS_0:[0,-150],BUS_1:[-29,-150],BUS_2:[-58,-150],BUS_3:[-87,-150],BUS_4:[-116,-150],BUS_5:[-145,-150],BUS_6:[-174,-150],BUS_7:[-203,-150],BUS_8:[-232,-150],BUS_9:[-261,-150],BOOKMARK:[-90,0],PERI_DINING:[0,0],PERI_DINING_ON:[0,0],PERI_CAFE:[-23,0],PERI_CAFE_ON:[-23,0],PERI_CONVENIENCE:[-46,0],PERI_CONVENIENCE_ON:[-46,0],PERI_PARKING:[-69,0],PERI_PARKING_ON:[-69,0],PERI_OIL:[-92,0],PERI_OIL_ON:[-92,0],PERI_STORE:[-138,0],PERI_STORE_ON:[-138,0],PERI_MART:[-115,0],PERI_MART_ON:[-115,0],PERI_ACCOMMODATION:[-161,0],PERI_ACCOMMODATION_ON:[-161,0],PERI_CINEMA:[-184,0],PERI_CINEMA_ON:[-184,0],PERI_SPORT:[-207,0],PERI_SPORT_ON:[-207,0],PERI_HOSPITAL:[-230,0],PERI_HOSPITAL_ON:[-230,0],PERI_BANK:[-253,0],PERI_BANK_ON:[-253,0],PERI_POST:[-276,0],PERI_POST_ON:[-276,0],PERI_GOVERNMENT:[-299,0],PERI_GOVERNMENT_ON:[-299,0],PERI_BUS:[-322,0],PERI_BUS_ON:[-322,0],PERI_SUBWAY:[-345,0],PERI_SUBWAY_ON:[-345,0],AROUNDSEARCH:[-254,0],TRAFFIC_BUS:[-322,0],TRAFFIC_BUS_ON:[-322,0],TRAFFIC_SUBWAY:[-345,0],TRAFFIC_SUBWAY_ON:[-345,0],TRAFFIC_TRAIN:[-368,0],TRAFFIC_TRAIN_ON:[-368,0],TRAFFIC_AIRPORT:[-391,0],TRAFFIC_AIRPORT_ON:[-391,0],TRAFFIC_EXPRESSBUS:[-414,0],TRAFFIC_EXPRESSBUS_ON:[-414,0],TSEARCH_BUS:[-92,-56],TSEARCH_BUS_ON:[-92,-84],TSEARCH_SUBWAY:[-115,-56],TSEARCH_SUBWAY_ON:[-115,-84],TSEARCH_TRAIN:[-138,-56],TSEARCH_TRAIN_ON:[-138,-84],TSEARCH_AIRPORT:[-161,-56],TSEARCH_AIRPORT_ON:[-161,-84],DIRSTEP_NUMBER:[0,0],DIRSTEP_SUBWAY:[0,-128],DIRSTEP_SUBWAY_ON:[0,-154],DIRSTEP_BUS:[-26,-128],DIRSTEP_BUS_ON:[-26,-154],DIRSTEP_WALK:[-52,-128],DIRSTEP_WALK_ON:[-52,-154],DIRSTEP_EXPRESS:[-78,-128],DIRSTEP_EXPRESS_ON:[-78,-154],DIRSTEP_INTERBUS:[-78,-128],DIRSTEP_INTERBUS_ON:[-78,-154],DIRSTEP_TRAIN:[-104,-128],DIRSTEP_TRAIN_ON:[-104,-154],DIRSTEP_AIR:[-130,-128],DIRSTEP_AIR_ON:[-130,-154],DIRSTEP_NONE:[-156,-128],DIRSTEP_NONE_ON:[-156,-154],DEPARTURE:[0,-26],DEPARTURE_SUBWAY:[0,-77],DEPARTURE_BUS:[-37,-77],DEPARTURE_WALK:[-74,-77],DEPARTURE_EXPRESS:[-111,-77],DEPARTURE_INTERBUS:[-111,-77],DEPARTURE_TRAIN:[-148,-77],DEPARTURE_AIR:[-185,-77],DESTINATION:[-37,-26],DESTINATION_ON:[-37,-77],VIA:[-74,-26],VIA_1:[-111,-26],VIA_2:[-148,-26],VIA_3:[-185,-26],VIA_4:[-222,-26],VIA_5:[-259,-26],SPOTPOINT:[-273,0],COUPON:[0,0],COUPON_ON:[0,0],PERICOUPON:[-25,0],MUSEUM:[0,-111],INTERIOR:[-40,-111],INDOORVIEW:[-73,-111],FLIGHT:[0,-74],FLIGHTG:[-31,-74],MARINE:[-64,-74],MARINEG:[-90,-74],CCTV:[0,-39],CCTVGROUP:[-24,-34],ACCIDENT_0:[0,0],ACCIDENT_1:[-29,0],ACCIDENT_2:[-58,0],ACCIDENT_3:[-116,0],ACCIDENT_4:[-87,0],AD_0:[0,0],AD_1:[-29,0],AD_2:[-58,0],ADPIN:[-120,0]};
var a={DEFAULT:[24,37],BOOKMARK:[24,37],SMALL:[20,26],DIRSTEP:[21,21],LARGE:[32,46],SMALLEST:[7,7],AROUNDSEARCH:[14,22],TRAFFICROAD:[26,31],PERICOUPON:[14,22],COUPON:[20,26],MUSEUM:[30,36],INTERIOR:[30,36],INDOORVIEW:[30,36],FLIGHT:[26,22],FLIGHTG:[28,22],MARINE:[24,23],MARINEG:[28,23],CCTV:[20,23],CCTVGROUP:[25,28],ACCIDENT:[24,21],ADPIN:[10,11]};
var d={DEFAULT:[12,37],BOOKMARK:[12,35],SMALL:[10,26],DIRSTEP:[10,10],LARGE:[16,46],SMALLEST:[4,4],AROUNDSEARCH:[7,22],TRAFFICROAD:[13,31],PERICOUPON:[7,22],COUPON:[10,26],MUSEUM:[17,40],INTERIOR:[15,35],INDOORVIEW:[15,35],FLIGHT:[13,11],FLIGHTG:[14,11],MARINE:[12,11],MARINEG:[14,11],CCTV:[10,23],CCTVGROUP:[13,28],ACCIDENT:[12,21],ADPIN:[6,6]};
var b={DEFAULT:"sp_pins_default",BOOKMARK:"sp_pins_default",SPOT:"sp_pins_spot",AROUND:"sp_pins_around",DEPARTURE:"sp_pins_findway _route_start",DESTINATION:"sp_pins_findway _route_end",VIA:"sp_pins_findway _route_via",DIRSTEP:"sp_pins_findway sp_pins_sym",COUPON:"sp_pins_coupon",AD:"sp_pins_ad",ADPIN:"sp_pins_default sp_pins_default_v2",OTHER:"sp_pins_other"};
var f={"AROUNDSEARCH|":"AROUNDSEARCH","TSEARCH|TRAFFIC|PERI|":"SMALL","ID|REGION|SPOT|ADDRESS|SITE|SEQ|AD|INDOORSPOT|":"DEFAULT","DIRSTEP|":"DIRSTEP","BOOKMARK|":"BOOKMARK","DEPARTURE|DESTINATION|VIA|":"LARGE","SPOTPOINT|":"SMALLEST",PERICOUPON:"PERICOUPON","COUPON|":"COUPON","MUSEUM|":"MUSEUM","INTERIOR|":"INTERIOR","INDOORVIEW|":"INDOORVIEW","FLIGHT|":"FLIGHT","FLIGHTG|":"FLIGHTG","MARINE|":"MARINE","MARINEG|":"MARINEG","CCTV|":"CCTV","CCTVGROUP|":"CCTVGROUP","ACCIDENT|":"ACCIDENT","ADPIN|":"ADPIN"};
var c={"ID|REGION|ADDRESS|AROUNDSEARCH|SPOTPOINT|INDOORSPOT|":"DEFAULT","BOOKMARK|":"BOOKMARK","SPOT|SITE|SEQ|BUS|":"SPOT","TSEARCH|TRAFFIC|PERI|":"AROUND",DEPARTURE:"DEPARTURE",DESTINATION:"DESTINATION",VIA:"VIA","DIRSTEP|":"DIRSTEP","COUPON|PERICOUPON|":"COUPON",AD:"AD",ADPIN:"ADPIN","CCTV|CCTVGROUP|ACCIDENT|AIR|MUSEUM|INTERIOR|INDOORVIEW|FLIGHT|FLIGHTG|MARINE|MARINEG":"OTHER"}
})();
(function(){var c=iron.ns("nhn.map"),b=c.Util.Size;
c.service.SmallIcon=iron.Class({inherit:c.SpriteIcon},{initialize:function(d,e){e=$.extend({url:"https://ssl.pstatic.net/static/maps/img/pins_ds_v4.png",size:b(21,21),offset:b(0,0),spriteSize:b(500,400),spriteOffset:this._getSpriteOffsetPreset(d),className:"sym_map3"},e||{});
c.SpriteIcon.apply(this,[e.url,e.size,e.offset,{spriteSize:e.spriteSize,spriteOffset:e.spriteOffset,className:e.className}]);
this.setIconType(d)
},setIconType:function(d){this._iconType=d
},getIconType:function(){return this._iconType
},_getSpriteOffsetPreset:function(d){var e=a[d]||a.DEFAULT;
return b(e[0],e[1])
}});
var a={DEFAULT:[8,6],ID:[8,6],REGION:[8,6],ADDRESS:[0,6],INDOORSPOT:[0,6],CCTV:[2,6],BOOKMARK:[7,6],SITE_0:[0,2],SITE_0_U:[0,3],SITE_0_P:[0,15],SITE_1:[1,2],SITE_1_U:[1,3],SITE_1_P:[1,15],SITE_2:[2,2],SITE_2_U:[2,3],SITE_2_P:[2,15],SITE_3:[3,2],SITE_3_U:[3,3],SITE_3_P:[3,15],SITE_4:[4,2],SITE_4_U:[4,3],SITE_4_P:[4,15],SITE_5:[5,2],SITE_5_U:[5,3],SITE_5_P:[5,15],SITE_6:[6,2],SITE_6_U:[6,3],SITE_6_P:[6,15],SITE_7:[7,2],SITE_7_U:[7,3],SITE_7_P:[7,15],SITE_8:[8,2],SITE_8_U:[8,3],SITE_8_P:[8,15],SITE_9:[9,2],SITE_9_U:[9,3],SITE_9_P:[9,15],BUS_0:[0,13],BUS_1:[1,13],BUS_2:[2,13],BUS_3:[3,13],BUS_4:[4,13],BUS_5:[5,13],BUS_6:[6,13],BUS_7:[7,13],BUS_8:[8,13],BUS_9:[9,13],PERI_BUS:[0,1],PERI_BUS_ON:[4,1],PERI_SUBWAY:[1,1],PERI_SUBWAY_ON:[5,1],PERI_DINING:[0,0],PERI_CAFE:[1,0],PERI_CONVENIENCE:[2,0],PERI_PARKING:[3,0],PERI_OIL:[4,0],PERI_MART:[5,0],PERI_STORE:[6,0],PERI_ACCOMMODATION:[7,0],PERI_CINEMA:[8,0],PERI_SPORT:[9,0],PERI_HOSPITAL:[10,0],PERI_BANK:[11,0],PERI_POST:[12,0],PERI_GOVERNMENT:[13,0],PERI_NONE:[10,6],AROUNDSEARCH:[10,6],COUPON:[9,1],PERICOUPON:[11,6],MUSEUM:[11,1],INTERIOR:[10,1],WEATHER:[12,1],WIND:[14,1],RADIATION_1:[0,14],RADIATION_2:[1,14],RADIATION_3:[2,14],RADIATION_4:[3,14],DEPARTURE:[0,11],DESTINATION:[1,11],VIA:[2,11],TRAFFIC_BUS:[0,1],TRAFFIC_SUBWAY:[1,1],TRAFFIC_METRO:[1,1],TRAFFIC_TRAIN:[2,1],TRAFFIC_AIRPORT:[3,1],TSEARCH_BUS:[4,1],TSEARCH_SUBWAY:[5,1],TSEARCH_METRO:[5,1],TSEARCH_TRAIN:[6,1],TSEARCH_AIRPORT:[7,1],FLIGHT:[15,1],FLIGHTG:[16,1],MARINE:[15,1],MARINEG:[16,1],ACCIDENT_0:[1,8],ACCIDENT_1:[0,8],ACCIDENT_2:[4,8],ACCIDENT_3:[3,8],ACCIDENT_4:[2,8],ADPIN:[4,14],AD_0:[0,16],AD_1:[1,16],AD_2:[2,16]}
})();
nhn.map.service.InfoWindow=iron.Class(nhn.map.Dispatcher,{DEFAULT_INFO_LAYER_OPTIONS:{className:"nmap_infowindow _none_pointer",style:{cursor:"default",display:"none",zIndex:999,top:"-10000px",left:"-10000px"}},DEFAULT_INFO_CONTENTLAYER_OPTIONS:{style:{position:"relative"}},initialize:function(a){this.options=$.extend({type:"normal",point:new nhn.mapcore.Point(0,0),offset:{width:0,height:0},margin:{left:30,top:0,right:60,bottom:0},content:"",zIndex:999,multiple:false,autoPosition:true,enableWheelZoom:false,enableDragPan:false,enableDblClickZoom:false,enableBubbling:false},a);
this.layers={};
this.setType(this.options.type);
this.setPoint(this.options.point);
this.setOffset(this.options.offset);
this.drawFrame();
this.setZIndex(this.options.zIndex);
this.setContent(this.options.content);
this.setMargin(this.options.margin)
},createFrame:function(a){var b=$("<div style='position:absolute;top:0;left:0;z-index:1;margin:0;padding:0;border:0 none;overflow:visible;'>");
if(a){b.addClass(a.className||"").css(a.style||{})
}b.css("MozUserSelect","-moz-none");
if($.browser.msie){b[0].unselectable="on"
}return b
},drawFrame:function(){var a=this.getTemplate();
this.layers={window:this.createFrame(this.DEFAULT_INFO_LAYER_OPTIONS),content:this.createFrame(this.DEFAULT_INFO_CONTENTLAYER_OPTIONS)};
this.layers.window.append(this.layers.content);
if(a){this.layers.content.html(a.process({}))
}this.dispatch($.Event("drawFrame",{layers:this.layers}))
},setTemplate:function(a){if(!a){return false
}this._template=a
},getTemplate:function(){return this._template||null
},setOption:function(b,c){var a=this;
if(typeof b=="object"){$(b).each(function(d,e){a.setOption(e,d)
})
}else{this.options[b]=c
}},getOption:function(a){return this.options[a]
},setType:function(a){this.options.type=a;
this._type=a
},getType:function(){return this._type
},setPoint:function(a){if(!a){return false
}this.options.point=a.copy();
this._point=this.options.point;
this.redraw()
},getPoint:function(){return this._point
},setOffset:function(a){if(!a){return false
}this.options.offset=a;
this._offset=a
},getOffset:function(){return this._offset
},setOpacity:function(a){if(!a){return false
}this.layers.content.css("opacity",a)
},getOpacity:function(){return this.layers.content.css("opacity")
},getVisible:function(){return this.getVisibility()
},getVisibility:function(){return this._visibility||false
},open:function(){var a=this.getPane();
a&&a.aOverlays.filter(function(b){return b!==this
}.bind(this)).forEach(function(b){b.close()
});
this.layers.window.show();
this._visibility=true;
if(this.options.autoPosition){this.autoPosition()
}this.dispatch($.Event("open",{}))
},close:function(){if(!this.getVisible()){return
}this.layers.window.hide();
this._visibility=false;
this.dispatch($.Event("close",{}))
},_getContentArea:function(){return !this.getTemplate()?this.layers.content:$("div._infowindow_content",this.layers.content)
},setContent:function(a){if(!a){return false
}var b=this._getContentArea();
b.empty();
this.options.content=a;
if(typeof a==="string"){b.html(a)
}else{b.append(a)
}this.getPane()&&this.setSize();
this.dispatch($.Event("setContent",{}))
},getContent:function(){return this.options.content
},setModel:function(a){this._infoModel=a
},getModel:function(){return this._infoModel
},setSize:function(a){if(!this.getPane()){return false
}var a=a||this.getFrameSize();
this.layers.content.css({width:a.width,height:a.height});
this._size=a
},getSize:function(){return this._size
},setMargin:function(a){if(!a){return false
}this.options.margin=a;
this._margin=a
},getMargin:function(){return this._margin||{}
},setPane:function(a){if(!a){return false
}this._pane=a
},getPane:function(){return this._pane||null
},setZIndex:function(a){this.options.zIndex=a;
this.layers.window.css("z-index",a)
},getZIndex:function(){return this.options.zIndex
},autoPosition:function(e){if(!this.getPane()||!this.getSize()){return false
}var g=this.getPane(),d=this.getSize(),f=this.getMargin(),c=(d.width/2)+this.getOffset().width,b=d.height+this.getOffset().height,a=this.getPoint();
window.setTimeout(function(){if(!g.makeRangeVisible){return
}g.makeRangeVisible(a,[-c,-b,c,0],[-f.left,-f.top,f.right,f.bottom],false,e||false)
},100)
},getElement:function(){return this.layers.window[0]||null
},getContentElement:function(){return this.layers.content[0]
},getFrameSize:function(){if(!this.getPane()){return false
}var b=$(":first-child",this.layers.content).eq(0),a={width:0,height:0};
this.layers.window.show();
b=b.length>0?b:this.layers.content;
a.width=b.width();
a.height=b.outerHeight();
!this.getVisibility()&&this.layers.window.hide();
return a
},getArrowSize:function(){var a=$("div._arrow:first",this.layers.content);
return{width:a.width(),height:a.height()}
},redraw:function(e){var g=this.getPane(),d=this.getArrowSize(),a,f,b,c;
if(e){e.point&&this.setPoint(e.point);
e.offset&&this.setOffset(e.offset);
e.content&&this.setContent(e.content);
e.size&&this.setSize(e.size)
}a=this.getPoint();
b=this.getSize();
f=this.getOffset();
if(!g||!(a&&b)){return false
}c=g.fromPointToOffset(a.toInner());
c.x-=(Math.floor(b.width/2))+f.width/2;
c.y-=(b.height+f.height);
c.x+=18;
c.y-=d.height;
this.layers.window.css({left:c.x,top:c.y});
this._pixelPoint=c;
this.dispatch($.Event("redraw",{}));
return this._pixelPoint
},onadd:function(a){this.setPane(a);
this.setSize();
this.redraw();
this.open()
},remove:function(){var a=this.getPane();
if(a){a.removeOverlay(this);
this.dispatch($.Event("remove",{}))
}},animate:function(h,e,g){var e=e||200,f={},a=false,d=false,b;
f.top=h.top;
delete h.top;
f.left=h.left;
delete h.left;
f.bottom=h.bottom;
delete h.bottom;
f.right=h.right;
delete h.right;
var c=function(){if(!a||!d){return false
}window.clearInterval(b);
this.setSize();
this.redraw();
this.options.autoPosition&&this.autoPosition();
g&&g();
c=function(){}
}.bind(this);
this.layers.window.animate(f,e,function(){a=true
});
this.layers.content.animate(h,e,function(){d=true
});
window.setTimeout(function(){b=window.setInterval(c,10)
},e)
},cleanUp:function(){},onremove:function(){this.destroy()
},destroy:function(){this.layers.window.remove();
delete this._pane;
this.dispatch($.Event("destroy",{}))
}});
nhn.map.service.SpotWindow=iron.Class({inherit:nhn.map.service.InfoWindow},{initialize:function(a){this.setTemplate(nhn.mapservice.TemplateRepos.get("infowindow_basic_2013"));
var b=$.extend({duration:200},a);
nhn.map.service.InfoWindow.call(this,b)
},setClassName:function(a){this.options.className=a
},getClassName:function(){return this.options.className||""
},setContent:function(){var b=this.getClassName(),a=this.layers.content.find("> div.spotly:eq(0)")[0];
if(a){a.className=["spotly","_infolay_frame",b].join(" ")
}nhn.map.service.InfoWindow.prototype.setContent.apply(this,arguments)
},getNCGRCode:function(){return this.options.ncgrCode
},setNCGRCode:function(a){this.options.ncgrCode=a
},sendNCSLog:function(b,a){var c=this.getNCGRCode();
c&&nhn.map.LogClick({element:b.target,event:b,acode:[c,a].join(".")})
},close:function(){nhn.map.service.InfoWindow.prototype.close.apply(this,arguments)
},setDuration:function(a){this.options.duration=a
},getDuration:function(){return this.options.duration
},disableNavigation:function(){this.layers.content.find("div.lys_btn").hide()
},enableNavigation:function(){this.layers.content.find("div.lys_btn").show()
},rearrange:function(){this.setSize();
this.redraw()
},getFooter:function(){return this.layers.content.find("div.infowindow_footer_content")
},cleanUp:function(){},openFooter:function(a){var d=this.getFooter(),c=a?0:this.getDuration(),b="-="+d.show().height();
this.animate({top:b},c);
d.stop().hide().slideDown(c,function(){d.show()
})
},closeFooter:function(a){var d=this.getFooter(),c=a?0:this.getDuration(),b="+="+d.height();
d.stop().slideUp(c,function(){d.hide()
});
if(!a){this.animate({top:b},c,this.cleanUp.bind(this))
}else{this.cleanUp()
}}});
nhn.map.service.PanoramaWindow=iron.Class({inherit:nhn.map.service.SpotWindow},{initialize:function(a){var b=$.extend({basicTemplate:true,duration:200},a);
if(b.basicTemplate){this.setTemplate(nhn.mapservice.TemplateRepos.get("panorama_infowindow_basic"))
}nhn.map.service.InfoWindow.call(this,b);
this.setPixelPoint(a.pixelPoint)
},setPixelPoint:function(a){this._pixelPoint=a
},getPixelPoint:function(){return this._pixelPoint
},autoPosition:function(){},open:function(){this.layers.window.show();
this._visibility=true;
this.setSize();
this.dispatch($.Event("open",{}))
},setSize:function(a){var a=a||this.getFrameSize();
this.layers.content.css({width:a.width,height:a.height});
this._size=a
},getFrameSize:function(){var b=$(":first-child",this.layers.content).eq(0),a={width:0,height:0};
this.layers.window.show();
b=b.length>0?b:this.layers.content;
a.width=b.width();
a.height=b.outerHeight();
!this.getVisibility()&&this.layers.window.hide();
return a
},redraw:function(e){var d=this.getArrowSize(),a,f,b,c;
if(e){e.point&&this.setPoint(e.point);
e.pixelPoint&&this.setPixelPoint(e.pixelPoint);
e.offset&&this.setOffset(e.offset);
e.content&&this.setContent(e.content);
e.size&&this.setSize(e.size)
}c=$.extend({},this.getPixelPoint());
a=this.getPoint();
b=this.getSize();
f=this.getOffset();
if(!(c&&b)){return false
}c.y-=d.height;
c.x+=28;
this.layers.window.css({left:c.x-(b.width/2)-f.width,top:c.y-(b.height+2)});
this.dispatch($.Event("redraw",{}));
return this._pixelPoint
},onadd:function(){this.setSize();
this.redraw();
this.open()
}});
nhn.map.service.PerimeterInfoWindow=iron.Class({inherit:nhn.map.service.SpotWindow},{initialize:function(a){nhn.map.service.SpotWindow.call(this,a);
this.disableNavigation()
}});
nhn.map.service.AddressWindow=iron.Class(nhn.map.service.SpotWindow,{initialize:function(a){var a=$.extend(a||{},{type:"address"});
nhn.map.service.SpotWindow.call(this,a);
this.disableSpotMove();
this.disableRequestModify()
}});
(function(){var a=iron.ns("nhn.map.service");
a.SimpleWindow=iron.Class({inherit:nhn.map.service.InfoWindow},{initialize:function(b){this.setTemplate(nhn.mapservice.TemplateRepos.get("simple_infowindow_basic"));
var c=$.extend({duration:200},b);
nhn.map.service.InfoWindow.call(this,c)
}})
}());
nhn.map.service.SubwayStationWindowController=iron.Class({initialize:function(a){this._view=a;
this._bindEvents()
},_bindEvents:function(){this._view.on("click","ul.sways_tab a",this._onClickInfoTab.bind(this))
},_onClickInfoTab:function(f){f.preventDefault();
var d;
if($(f.target).closest("li").hasClass("on")){return false
}var b=$(f.target).closest("ul").find("li");
for(var c=0,a=b.length;
c<a;
c++){$(b[c]).toggleClass("on")
}this._view.find(".sways_default_info").toggle();
d=this._view.find(".sways_exit_info");
d.toggle();
if(d.is(":visible")){this._view.find(".spotly_btn_act").hide()
}else{this._view.find(".spotly_btn_act").show()
}}});
(function(){var NS=iron.ns("nhn.map.service"),CONTENT_URL={ADDRESS:"/search2/getAddressInfo.nhn",REGION:"/search2/getAddressInfo.nhn",SITE:"/search2/getSiteInfo.nhn",BOOKMARK_SITE:"/search2/getSiteInfo.nhn",PERIMETERINFO:"/search2/getSiteInfo.nhn",SPOT:"/search2/getSpotInfo.nhn",SUBWAY:"/search2/getSiteInfo.nhn",SUBWAY_ROUTE:"/search2/getSiteInfo.nhn",PANORAMA:"/search2/getSiteInfo.nhn",PUBLIC_TRANSPORT:"/search2/getSiteInfo.nhn"},TRAFFIC_URL="/realtraffic/roadTraffic.nhn",SERVER_TOKEN="/common2/getToken.nhn",BOOKMARK_TYPE=$.extend({},nhn.map.bookmark.Const.BOOKMARK_TYPE);
NS.InfoWindowDataService=iron.Class({mix:[nhn.map.Dispatcher]},{initialize:function(){this.CACHE={};
this._initTemplates();
this._hmacCount=0
},_initTemplates:function(){var TemplateRepos=nhn.mapservice.TemplateRepos;
this._templates={bookmark:TemplateRepos.get("summary_window_2013"),summary:TemplateRepos.get("summary_window_2013"),siteContent:TemplateRepos.get("site_content"),landContent:TemplateRepos.get("land_contents"),subwayContent:TemplateRepos.get("subway_contents"),addressContent:TemplateRepos.get("address_contents"),roadContent:TemplateRepos.get("road_contents")}
},_addCache:function(key,result){this.CACHE[key]=result
},getCache:function(key){return this.CACHE[key]
},_getCacheKey:function(url,param){delete param.MarkerInfo;
return url+"?"+$.param(param)
},getWindowContent:function(type,data){var smallIcon=data.MarkerInfo?data.MarkerInfo.smallIcon:null,html=null;
if(smallIcon){var iconType=smallIcon.getIconType();
if(data.couponUrl){if(iconType==="AROUNDSEARCH"){iconType="COUPON"
}else{if(iconType.indexOf("PERI")>-1){iconType="PERICOUPON"
}}}data.infoWindowIconOffset=new nhn.map.service.InfoWindowIconOffset(iconType)
}else{data.infoWindowIconOffset=false
}if(data&&data.subwayId){if(type==="SUBWAY_ROUTE"){data.subwayDetail.subwayType=type;
data.bookmarkType=BOOKMARK_TYPE.SUBWAY
}else{data.subwayDetail.subwayType="SUBWAY"
}type="SUBWAY"
}data.bookmarkKey=nhn.map.bookmark.Util.generateKeyFromData(data);
data.contentHTML=this.makeContent(data);
html=this._templates.summary.process(data);
return html
},makeContent:function(data){if(data.oEntityType.isLand&&data.landDetail){return this._templates.landContent.process(data.landDetail)
}else{if(data.isSubway){return this._templates.subwayContent.process(data.subwayDetail)
}else{if(data.oEntityType.isAddress){return this._templates.addressContent.process(data)
}else{if(data.oEntityType.isRoad){return this._templates.roadContent.process(data)
}else{return this._templates.siteContent.process(data)
}}}}},requestDataByType:function(type,paramData,callback,failure){var url=CONTENT_URL[type],markerInfo=paramData.MarkerInfo,param=this._generateParamData(type,paramData),self=this;
this._request(url,param,function(data){if(data&&data.result){if(paramData.poiInfo&&paramData.poiInfo.road&&paramData.poiInfo.road.line){data.result.poiInfo.road.line=paramData.poiInfo.road.line
}this.getGeneratedData(type,data.result,function(result){result.MarkerInfo=markerInfo;
result.isFirstSpot=result.MarkerInfo.first||false;
result.isLastSpot=result.MarkerInfo.last||false;
result.coupon=0;
result.itemLevel=paramData.itemLevel||null;
if(type==="PUBLIC_TRANSPORT"){result.panoramaOverlayInfo=self._generatePanoramaInfo(result)
}callback(result)
})
}}.bind(this),failure)
},_request:function(url,param,success,failure,notErrorException){var self=this,isHmac=(url.indexOf("getSiteInfo")>0);
if(isHmac&&(document.cookie.indexOf("_naver_usersession_")===-1)){if(typeof param!=="function"){param._=""
}}this.abort();
var ajaxOptions={url:url,type:"GET",error:function(xhr,textStatus){if(textStatus&&textStatus.toLowerCase()==="abort"){return
}nhn.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.");
failure&&failure()
}},cacheKey,cache;
if(typeof param==="function"){success=param;
ajaxOptions.success=success
}else{cacheKey=this._getCacheKey(url,param);
ajaxOptions.data=param;
ajaxOptions.type="POST";
ajaxOptions.success=function(textData){var result=eval("("+textData+")");
if(result.error){if(isHmac&&(result.error.code==="HMAC_EXPIRED"||result.error.code==="HMAC_AUTH_FAILED")){self._hmacCount++;
if(self._hmacCount===3){self._hmacCount=0;
self._xhr&&self._xhr.abort();
return
}$.ajax({url:SERVER_TOKEN,type:"GET",dataType:"json",success:function(){self._request(url,param,success,failure,notErrorException)
}});
return
}else{if(!notErrorException){if(result.error.code==="LE0300"){alert(result.error.displayMsg);
failure&&failure(result.error);
return
}else{ajaxOptions.error();
return
}}}}else{if(!result){alert("데이터 오류입니다.");
failure&&failure();
return
}}this._addCache(cacheKey,result);
success&&success(result)
}.bind(this)
}if(cacheKey){cache=this.getCache(cacheKey)
}if(cache){success&&success(cache)
}else{this._xhr=$.ajax(ajaxOptions)
}},_generateParamData:function(type,data){var paramData={},realType=data.MarkerInfo?(data.MarkerInfo.realType||type):type;
if(realType==="BOOKMARK_SITE"||realType==="SPOT"||realType==="SITE"||realType==="PERIMETERINFO"||realType==="AD"||realType==="PANORAMA"||realType==="PUBLIC_TRANSPORT"){if(data.id){paramData.id=data.id
}else{var stationClass=data.MarkerInfo.options.stationClass,themeName=this._getThemeName(stationClass);
paramData.stationId=data.stationId;
paramData.theme=themeName
}}else{if(type==="BOOKMARK"){paramData.bookmarkId=data.bookmarkId
}else{if(type==="SUBWAY"||type==="SUBWAY_ROUTE"){paramData.stationId=data.stationId
}else{paramData={address:data.fullAddress||data.name,name:data.name,xPos:data.point?data.point.x:(data.px||data.x),yPos:data.point?data.point.y:(data.py||data.y),rcode:data.id||data.rCode,fullAddress:data.fullAddress,isNewAddress:data.isNewAddress};
if(data.mappedAddress){paramData.mappedFullAdd=data.mappedAddress.fullAddress;
paramData.mappedIsNew=data.mappedAddress.isNewAddress
}}}}if(data.MarkerInfo){paramData.MarkerInfo=data.MarkerInfo
}if(data.noExNoPrnt){paramData.noExNoPrnt=data.noExNoPrnt
}if(data.MarkerType==="AD"){paramData.isAd=true
}return paramData
},_getThemeName:function(stationClass){var themeName=null;
switch(stationClass){case 1:themeName="station";
break;
case 2:themeName="subway";
break;
case 3:themeName="station";
break;
case 4:themeName="terminal";
break;
case 5:themeName="airport";
break;
case 6:themeName="terminal";
break
}return themeName
},getGeneratedData:function(type,primitive,callback){var realType=type,data=primitive;
if(!data){callback&&callback(data);
return false
}switch(type){case"BOOKMARK":realType=primitive.bookmark.type.toUpperCase();
if(realType==="PLACE"){realType="SITE"
}data=data.item;
if(!data){callback&&callback(data);
return false
}data.isBookmark=true;
break;
case"PERIMETERINFO":realType="SITE";
break;
case"PANORAMA":realType="SITE";
break;
case"SUBWAY_ROUTE":realType="SITE";
break;
case"PUBLIC_TRANSPORT":realType="SITE";
break;
case"BOOKMARK_SITE":realType="SITE";
break;
case"POI":realType="SITE";
break
}var refinedData=NS.InfowindowDataRefinery.refine(type,realType,data);
if(refinedData===null){alert("장소 정보가 확인되지 않습니다.");
return
}this._setRealTrafficDataIfRoadType(refinedData,callback)
},_generatePanoramaInfo:function(data){var panorama=data.streetPanorama;
var markerInfo=data.MarkerInfo;
if(!panorama){return null
}panorama.point=new nhn.mapcore.LatLng(panorama.lat,panorama.lng).toInner();
var markerId=markerInfo.id;
var icon=markerInfo.panoIcon;
var iconData={oLatLng:new nhn.mapcore.LatLng(data.y,data.x),sIconType:"Sprite",oIcon:icon,sId:markerId,sTitle:data.stationName,oPano:panorama};
var panoramaOverlayinfo={markerId:markerId,iconData:iconData,panorama:panorama,stationID:markerInfo.options.stationId};
return panoramaOverlayinfo
},_getTitleMarkup:function(type,data){var windowTitle=data.name,maxLength=28,nameLength=0,markup="";
if(data.isExistStreetView||data.isExistIndoorView){maxLength-=3;
data.windowTitleWidth-=24
}if(data.isExistAirView){maxLength-=3;
data.windowTitleWidth-=24
}if(data.isExistMuseumView){maxLength-=3;
data.windowTitleWidth-=23
}if(data.isInteriorMuseumView){maxLength-=3;
data.windowTitleWidth-=23
}if(type==="ADDRESS"){windowTitle=data.fullAddress;
nameLength=nhn.map.Util.getByteLength(windowTitle);
if(nameLength>maxLength+2){data.isLongTitle=true
}markup=nhn.mapservice.Util.wrapSpanTagByWord(windowTitle)
}else{if(type==="SUBWAY"){windowTitle=data.stationDisplayName||data.itemMetaData[0].data.stationDisplayName;
nameLength=nhn.map.Util.getByteLength(windowTitle);
if(nameLength>maxLength){windowTitle=nhn.map.Util.ellipsis(windowTitle,maxLength-2,"..")
}}else{nameLength=nhn.map.Util.getByteLength(windowTitle);
if(nameLength>maxLength){windowTitle=nhn.map.Util.ellipsis(windowTitle,maxLength-2,"..")
}markup=windowTitle
}}if($.browser.msie){data.windowTitleWidth=0
}return markup
},_cutTrafficData:function(data,props){if(!data){return[]
}var result=[],maxWidth=200,len=0,self=this;
function getLengthByTrafficData(trafficData){var text=[];
props&&props.forEach(function(key){text.push(trafficData[key])
});
text=text.join(" ");
return self._getPixelSizeOfText(text)
}for(var i=0,ii=data.length,trafficData;
i<ii;
i++){trafficData=data[i];
len+=getLengthByTrafficData(trafficData);
if(len>maxWidth){if(result.length===0){result.push(trafficData)
}break
}else{result.push(trafficData)
}}return result
},_getPixelSizeOfText:function(text){var len=0;
for(var i=0,ii=text.length;
i<ii;
i++){var charLen=this._getCharPixelWidth(text.charAt(i));
len+=charLen
}return len
},_getCharPixelWidth:function(strChar){if(strChar===""){return 0
}var asciiWidthTable=[0,6,6,6,6,6,6,6,6,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,4,3,5,7,7,11,8,4,5,5,6,6,4,6,4,6,6,6,6,6,6,6,6,6,6,6,4,4,8,6,8,6,10,8,8,9,8,8,7,9,8,3,6,7,7,11,8,9,8,9,8,8,7,8,8,10,8,8,8,6,11,6,6,6,4,7,7,7,7,7,3,7,7,3,3,6,3,9,7,7,7,7,4,7,3,7,6,10,6,6,7,6,6,6,9];
var code=strChar.charCodeAt(0);
return code>126?10:asciiWidthTable[code]
},_setRealTrafficDataIfRoadType:function(data,callback){if(!data.oEntityType.isRoad){callback&&callback(data);
return
}if(!data.poiInfo.road.line){data.oTraffic=null;
callback&&callback(data);
return
}var upParam={link:"0",node:data.poiInfo.road.line.properties.U_CODE,roadUpDown:1,nocache:1};
var downParam={link:"0",node:data.poiInfo.road.line.properties.D_CODE,roadUpDown:0,nocache:1};
data.oTraffic={};
this._request(TRAFFIC_URL,upParam,this._onResponseTraffic.bind(this,data,"up",function(upResponse){this._request(TRAFFIC_URL,downParam,this._onResponseTraffic.bind(this,upResponse,"down",function(response){if(!response.oTraffic.up.speed&&!response.oTraffic.down.speed){response.oTraffic=null
}callback(response)
}.bind(this)),null,true)
}.bind(this)),null,true)
},_onResponseTraffic:function(data,direction,callback,response){var result=response.result||response.error,displayTime;
if(!result.roads||!result.summary){displayTime=this._getDisplayTravelTime(0);
data.oTraffic[direction]={displayTime:this._getDisplayTravelTime(0),displaySpeed:this._getDisplaySpeed(0)};
callback&&callback(data);
return
}result.summary.displayTime=this._getDisplayTravelTime(result.summary.travelTime);
result.summary.displaySpeed=this._getDisplaySpeed(result.summary.speed);
data.oTraffic[direction]=result.summary;
callback&&callback(data)
},_getDisplayTravelTime:function(sec){if(!sec){return"미제공"
}var hour=Math.floor(sec/60/60),minute=Math.floor((sec-hour*60*60)/60),html=["약 "];
(hour>0)&&html.push("<em>"+hour+"</em>시간 ");
(minute>0)&&html.push("<em>"+minute+"</em>분");
return html.join("")
},_getDisplaySpeed:function(sec){return sec?"약 <em>"+sec+"</em>km ":"미제공"
},abort:function(){if(this._xhr){this._xhr.abort();
delete this._xhr
}}})
}());
(function(){var b="SIMPLE";
nhn.map.service.InfoWindowFacade=iron.Class(nhn.map.Dispatcher,{initialize:function(){this._current=null;
this.windows={};
this._shareBtn=null;
this._printBtn=null;
this.$Action().attach({setInfoWindow:this._onSetInfoWindowInAction.bind(this),openPanorama:this._onOpenPanorama.bind(this),close:this._onCloseInfoWindowInAction.bind(this)})
},_createInfoWindow:function(e,f,d){var c;
if(e=="SPOT"||e=="SITE"){c=new nhn.map.service.SpotWindow(f);
c.attach(d)
}else{if(e=="REGION"||e=="ADDRESS"){c=new nhn.map.service.SpotWindow(f)
}else{if(e=="PUBLIC_TRANSIT_SUBWAY"){c=new nhn.map.service.SpotWindow(f)
}else{if(e=="PUBLIC_TRANSIT_TERMINAL"){c=new nhn.map.service.SpotWindow(f)
}else{if(e=="PUBLIC_TRANSIT_BUS"){c=new nhn.map.service.SpotWindow(f)
}else{if(e=="PERIMETERINFO"||e=="PUBLIC_TRANSPORT"){c=new nhn.map.service.PerimeterInfoWindow(f);
d&&c.attach(d)
}else{if(e=="BOOKMARK_SITE"){c=new nhn.map.service.SpotWindow(f)
}else{if(e=="SUBWAY"){c=new nhn.map.service.SpotWindow(f);
d&&c.attach(d)
}else{if(e=="PANORAMA"||e=="SUBWAY_ROUTE"){c=new nhn.map.service.PanoramaWindow(f)
}else{if(e=="BUS"){c=new nhn.map.service.BusInfoWindow(f)
}else{if(e=="POI"){c=new nhn.map.service.SpotWindow(f)
}else{if(e==="THEME"){c=new nhn.map.theme.ThemeInfoWindow(f)
}else{if(e==="THEME_EDIT"){c=new nhn.map.theme.ThemeEditInfoWindow(f)
}else{if(e===b){c=new nhn.map.service.SimpleWindow(f)
}else{c=new nhn.map.service.SpotWindow(f)
}}}}}}}}}}}}}}if(e!="PANORAMA"&&e!="SUBWAY_ROUTE"){this.getInfoPane().addOverlay(c)
}else{if(e=="SUBWAY_ROUTE"){this.$Action().addSubwayRouteWindow(c);
this.$Action().panoramaDelegate($(c.getElement()))
}else{this.$Action().addPanoramaWindow(c);
this.$Action().panoramaDelegate($(c.getElement()))
}}this.setWindowByType(e,c)
},getInfoPane:function(){return this.$Action().getInfoPane()
},setCurrentWindow:function(c){this._current=c
},getCurrentWindow:function(){return this._current
},_onSetInfoWindowInAction:function(c){this.setCurrentWindow(c.infoWindow)
},_onCloseInfoWindowInAction:function(c){this.abort();
this.dispatch("close",{infoWindow:c.infoWindow})
},setWindowByType:function(d,c){this.windows[d]=c
},getWindowByType:function(c){return this.windows[c]||null
},getCurrentModel:function(){var c=this.getCurrentWindow();
return c?c.getModel():null
},_generateWindowOptions:function(e,g){var f=g.oEntityType,d={type:e,point:new nhn.mapcore.LatLng(g.y,g.x),offset:new nhn.map.Size(20,g.MarkerInfo.size.height+2),content:g.contentHTML||this.$DataService().getWindowContent(e,g)},i="";
if(e=="PANORAMA"){d.pixelPoint=g.MarkerInfo.pixelPoint;
if(g.basicTemplate===false){d.basicTemplate=g.basicTemplate
}}if(g.isSubway||g.stationClass==2){d.className="spotly_subway"
}if(g.stationID||(g.theme&&g.theme.isStation)){var c=g.stationClass||g.MarkerInfo.stationType;
switch(c){case 1:i=a.BUS;
break;
case 2:i=a.SUBWAY;
break;
case 3:i=a.TRAIN;
break;
case 4:i=a.EXPRESS;
break;
case 5:i=a.AIRPORT;
break
}}else{if(g.isAd){if(e==="AD"){i=a.ADPIN
}else{i=a.AD
}}else{i=a[e]
}}if(f){if(f.isRoad){d.className="spotly_road";
var h=g.poiInfo.road;
if(!(h&&h.detail&&h.detail.pictureUrl)){d.className+=" lys_nothumb"
}i=a.ROAD
}else{if(f.isLand){d.className="spotly_land";
i=a.LAND
}else{if(f.isAddress){d.className="lys_addr"
}}}}if(g.autoPosition===false){d.autoPosition=false
}this.$Action().setNCGRCode(i);
d.ncgrCode=i;
return d
},open:function(g,c,f,e){var g=g.toUpperCase(),h=typeof f=="function"?f:null,e=typeof e=="function"?e:null,f=!h?f:null,d=this;
if(g===b){this.openSimpleWindow(g,c);
return
}this.$DataService().requestDataByType(g,c,function(i){var j=null;
if(c.x){i.x=c.x
}if(c.y){i.y=c.y
}if(c.isAd){i.isAd=c.isAd
}if(c.x1){i.x1=c.x1
}if(c.x2){i.x2=c.x2
}i.__fromMoveStation=!!c.__fromMoveStation;
if(c.noExNoPrnt){i.noExNoPrnt=c.noExNoPrnt
}j=d.openByData(g,i,f);
h&&h(j)
},this.close.bind(this))
},disableArroundFeature:function(c){var d=c||this.getCurrentWindow();
this._arroundFeatureDisabled=true;
if(d&&d.disableArroundFeature){d.disableArroundFeature();
d.cleanUp();
d.rearrange()
}},enableArroundFeature:function(c){var d=c||this.getCurrentWindow();
this._arroundFeatureDisabled=false;
if(d&&d.enableArroundFeature){d.enableArroundFeature()
}},disableNavigation:function(c){var d=c||this.getCurrentWindow();
this._navigationDisabled=true;
if(d&&d.disableNavigation){d.disableNavigation()
}},enableNavigation:function(c){var d=c||this.getCurrentWindow();
this._navigationDisabled=false;
if(d&&d.enableNavigation){d.enableNavigation()
}},classifyWindow:function(d,f,c){if(d=="BOOKMARK_SITE"||d=="ADDRESS"||d=="REGION"||d=="PANORAMA"||d=="PERIMETERINFO"||d=="POI"){c.disableNavigation()
}if(d==="THEME"){if(f.type==="LINE"){c.hideFooter()
}else{c.showFooter()
}}if(f.MarkerInfo&&f.MarkerInfo.id){var e=f.MarkerInfo.id.toLowerCase();
if(e.indexOf("perimeter")===0||e.indexOf("id")===0){c.disableNavigation()
}}if(f.stationID){c.disableRequestModify&&c.disableRequestModify()
}else{c.enableRequestModify&&c.enableRequestModify()
}this._arroundFeatureDisabled&&this.disableArroundFeature(c);
this._navigationDisabled&&c.disableNavigation(c)
},openByData:function(f,i,e){var j=this._generateWindowOptions(f,i),d=this.getWindowByType(f);
if(!d){this._createInfoWindow(f,j,e);
d=this.getWindowByType(f);
if(f=="PANORAMA"){delete this.windows[f]
}}else{d.setClassName(j.className);
j.pixelPoint&&d.setPixelPoint(j.pixelPoint);
d.redraw(j);
d.open()
}if(e){d.listeners=e
}if(j.ncgrCode){d.options.ncgrCode=j.ncgrCode
}d.setModel(new nhn.map.service.InfoWindowModel(i));
this.setCurrentWindow(d);
this.classifyWindow(f,i,d);
if(i.noExNoPrnt){this._hideExPrnt(d)
}else{if(!i.noExNoPrnt&&!!this._printBtn){this._showExPrnt(d)
}}var g=(i.selectedPinData)?i.selectedPinData:i;
var c={x1:g.x1,x2:g.x2,type:g.type,isAd:g.isAd||false};
this.$Action().setData(c);
this.$Action().setInfoWindow(d,i.noExNoPrnt);
if(f=="POI"){var h=i.stationID?"label_subway":"label_spot";
nhn.map.LogPV(h)
}else{this.$Action().sendNDSLog(f,i.stationClass)
}if($(d.getContentElement()).find(".btn_like").length>0){nhn.LikeIt.list.instance.update()
}this.dispatch("opened",{infowindowType:f,infowindowData:i,infoWindow:d});
return d
},openIndoorListWindow:function(f,d,e){var c=this;
this.$DataService().getGeneratedData("SPOT",f,function(g){g.isFirstSpot=g.isLastSpot=false;
g.MarkerInfo=d;
c.openByData("SPOT",g,e||null)
})
},openPOIWindow:function(e,d){var c=this;
this.$DataService().getGeneratedData("POI",e,function(f){f.isFirstSpot=f.isLastSpot=false;
f.MarkerInfo={size:new nhn.map.Size(0,0)};
c.openByData("POI",f,d||null)
})
},openAdPinWindow:function(e,d){var c=this;
this.$DataService().getGeneratedData("POI",e,function(f){f.isFirstSpot=f.isLastSpot=false;
f.MarkerInfo={size:new nhn.map.Size(0,0)};
c.openByData("AD",f,d||null)
})
},openSimpleWindow:function(d){var e=this.getWindowByType(b),c=d.x||d.lng,h=d.y||d.lat,f=d.title,g={type:b,point:new nhn.mapcore.LatLng(h,c),x:c,y:h,itemLevel:12,name:f,offset:{height:32,width:0},content:nhn.mapservice.TemplateRepos.get("simple_window").process({title:f})};
if(!e){this._createInfoWindow(b,g);
e=this.getWindowByType(b)
}else{e.redraw(g);
e.open()
}e.setModel(new nhn.map.service.InfoWindowModel(g));
this.$Action().setInfoWindow(e);
this.dispatch("opened",{infowindowType:b,infowindowData:d,infoWindow:e})
},pushPanoramaOverlayInfo:function(c){this.$Action().pushPanoramaOverlayInfo(c)
},getVisibility:function(d){var c=d?this.getWindowByType(d):this.getCurrentWindow();
return c?c.getVisible():false
},_onClose:function(c){c.preventDefault();
this.close()
},close:function(d){var e=this.getCurrentWindow(),c=d?this.getWindowByType(d):e;
if(e&&c&&!this.$Action().isCloseLocked()){this.$Action().close(c);
if(e.getType()==c.getType()){this._current=null
}}},moveCurrentWindow:function(c,d){this.$Action().moveInfoWindow(c,d)
},abort:function(){this.$DataService().abort();
this.dispatch("abort")
},_listenIndoorMap:function(){this.$IndoorMap().attach({enterIndoorMap:this._onEnterIndoorMap.bind(this),leaveIndoorMap:this._onLeaveIndoorMap.bind(this)})
},_onEnterIndoorMap:function(){this.disableArroundFeature();
this.disableNavigation()
},_onLeaveIndoorMap:function(){this.enableArroundFeature();
this.enableNavigation()
},_onOpenPanorama:function(){this.abort();
this.close()
},_hideExPrnt:function(c){if($(c.getContentElement()).find(".common_act .print").length===0){return
}this._shareBtn=$(c.getContentElement()).find(".common_act .receive").detach();
this._printBtn=$(c.getContentElement()).find(".common_act .print").detach()
},_showExPrnt:function(c){if($(c.getContentElement()).find(".common_act .print").length>0){return
}$(c.getContentElement()).find(".common_act").prepend(this._printBtn);
$(c.getContentElement()).find(".common_act").prepend(this._shareBtn);
this._shareBtn=null;
this._printBtn=null
}});
var a={SPOT:"map*F",SITE:"map*P",REGION:"map*F",ADDRESS:"map*L",LAND:"map*e",ROAD:"map*y",BUS:"map*p",SUBWAY:"map*s",EXPRESS:"map*i",TRAIN:"map*k",AIRPORT:"map*A",BUS_STATIOM:"map*p",AD:"map*q",ADPIN:"map*z"}
})();
(function(){var g=12,c=nhn.map.panorama.Const,e=0,f=0,d=0,k=0,b=25;
nhn.map.service.InfoWindowAction=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._delegated=false;
this._socialHandler=null;
this._btnArea=null;
this._bindBookmarkEvent();
this._bindBridgeEvent()
},_bindBridgeEvent:function(){this.$bridge().attach({CLOSE_INFOWINDOW:function(){this.close()
}.bind(this)})
},_getSocialHandler:function(){if(this._socialHandler===null){this._socialHandler=this.$SocialManager().createHandler({acode:"#IWTYPE#",controller:this})
}return this._socialHandler
},getSocialExportItem:function(){return this.getModel()
},_terminateSocialHandler:function(){if(this._socialHandler){this.$SocialManager().terminateHandler(this._socialHandler);
this._socialHandler=null
}},_insertSocialMenu:function(){var l=this.getInfoWindow(),m=l.getElement(),n={mail:{display:"on"},cafe:{display:"on"},blog:{display:"on"},navi:{display:"on"},adcrData:this._infoData};
if(this._infoWindow.getType()==="SUBWAY_ROUTE"){n={mail:{display:"off"},cafe:{display:"off"},blog:{display:"off"},navi:{display:"off"}}
}n.option="{layerPosition:'outside-bottom', align:'left'}";
this._getSocialHandler().drawTo(m,n);
this._btnArea=$("ul.spi_lst",m)
},_listenPanorama:function(){this.$Panorama().attach({openPanorama:function(){this.dispatch("openPanorama");
this.close()
}.bind(this),needsInfoWindowClose:function(){this.close()
}.bind(this)})
},setInfoPane:function(l){this._pane=l;
this._paneElement=$(l.getElement());
this.delegate()
},getInfoPane:function(){if(!this._pane){this.setInfoPane(this.$map().getInfowindowPane())
}return this._pane
},addPanoramaWindow:function(l){if(!NModules.has("panorama")){return
}this.$Panorama().clearInfoWindow();
this.$Panorama().addInfoWindow(l)
},addSubwayRouteWindow:function(l){if(!NModules.has("subway")){return
}this.$Subway().removeInfoWindow();
this.$Subway().addInfoWindow(l)
},setNCGRCode:function(l){nhn.map.service.NClick.setInfoWindowGroupCode(l)
},setData:function(l){this._infoData=l
},setInfoWindow:function(m,l,o){this._infoWindow=m;
this._cleanUp(m);
if(typeof l==="undefined"||!l){this._insertSocialMenu()
}this._setZoomBase(m.getPoint());
this._bindInfoWindowEvent(m);
if(this.$BookmarkService().isLoggedIn()){if(this.$BookmarkService().isLoaded()){this._updateUiOfBookmarkStud()
}else{this.$BookmarkService().requestBookmarkList()
}}var n=this.getModel();
this._pinData=o;
this._searchResult=this._getSearch().getSelectedItem();
this.dispatch($.Event("setInfoWindow",{infoWindow:this._infoWindow}))
},getInfoWindow:function(){return this._infoWindow||null
},getModel:function(){if(!this.getInfoWindow()){return
}var l=this.getInfoWindow().getModel();
return l&&l.getData?l.getData():null
},delegate:function(){if(this._delegated){return
}this._doDelegate(this._paneElement);
this._subwayController=new nhn.map.service.SubwayStationWindowController(this._paneElement);
this._delegated=true
},panoramaDelegate:function(l){this._doDelegate(l);
this._subwayPanoramaController=new nhn.map.service.SubwayStationWindowController(l)
},_doDelegate:function(l){l.off(".infowindowAction").on("click.infowindowAction","div._infolay_frame",this._onInfoWindowClick.bind(this)).on("click.infowindowAction","a._coupon",this.openCouponWindow.bind(this)).on("click.infowindowAction","._free_call",this.openFreeCallWindow.bind(this)).on("click.infowindowAction","a.btn_lys_prev:not(.btn_lys_prev_dimmed)",this.goPrev.bind(this)).on("click.infowindowAction","a.btn_lys_next:not(.btn_lys_next_dimmed)",this.goNext.bind(this)).on("click.infowindowAction","a._streetview",this.showStreetView.bind(this)).on("click.infowindowAction","a._skyview",this.showSkyView.bind(this)).on("click.infowindowAction","a._spotlayer_museum",this.showMuseumView.bind(this)).on("click.infowindowAction","a._pension",this.showInteriorView.bind(this)).on("click.infowindowAction","a._request_modify",this.openRequestModifyWindow.bind(this)).on("click.infowindowAction","a._direction_start",this.setDirectionPoint.bind(this,"DEPARTURE")).on("click.infowindowAction","a.btn_lys_via",this.setDirectionPoint.bind(this,"WAYPOINT")).on("click.infowindowAction","a._direction_end",this.setDirectionPoint.bind(this,"DESTINATION")).on("click.infowindowAction","a.btn_lys_close, a.spm_spot_close",this._onClose.bind(this)).on("click.infowindowAction","a.spm_spot_viewmap",this._onGoToMapView.bind(this)).on("click.infowindowAction","a.spm_spot_viewline",this._onGoToLineView.bind(this)).on("click.infowindowAction","a._movestation",this._onMoveSubwayStation.bind(this,false)).on("click.infowindowAction","a._transferStation",this._onMoveSubwayStation.bind(this,true)).on("click.infowindowAction","a._price",this._onClickPrice.bind(this)).on("click.infowindowAction","a._pollspace",this._onClickPollingSpace.bind(this)).on("click.infowindowAction","a._print",this._onPrintInfoWindow.bind(this)).on("click.infowindowAction","a.btn_lys_favorite, a._layer_favorite",this._onBookmarkClick.bind(this)).on("click.infowindowAction","a._fold",this._onFold.bind(this)).on("click.infowindowAction","a._unfold",this._onUnfold.bind(this)).on("click.infowindowAction","a._zoom_default",this._onZoom.bind(this)).on("click.infowindowAction","a._all_path",this._onClickAllTrafficPath.bind(this)).on("click.infowindowAction","a._realtime_traffic",this._onClickRealtimeTraffic.bind(this)).on("click.infowindowAction","a._talktalk",this._onClickTalkTalk.bind(this)).on("mouseenter.infowindowAction","a.dead_link",this._onEnterDeadLink.bind(this)).on("mouseleave.infowindowAction","a.dead_link",this._onLeaveDeadLink.bind(this));
l.parent().off("mousedown.infowindowAction").off("mouseup.infowindowAction").on("mousedown.infowindowAction",this._onInfoPaneDown.bind(this)).on("mouseup.infowindowAction",this._onInfoPaneUp.bind(this))
},undelegate:function(){this._paneElement.off(".infowindowAction");
this._paneElement.parent().off("mousedown.infowindowAction").off("mouseup.infowindowAction");
this._delegated=false
},getPoint:function(){if(!this.getInfoWindow()){return null
}return this.getInfoWindow().getPoint()
},_getSpotInfo:function(){var l=this.getModel();
var m={id:l.id||"ANONYMOUS",point:this.getPoint(),title:l.name||l.stationDisplayName,type:l.MarkerType||""};
if(l.entranceCoords){m.entranceCoords=l.entranceCoords
}return m
},_onFold:function(){var l=$("._infolay_frame",this.getInfoWindow().getElement());
$("._fold",l).hide();
$("._unfold",l).show();
l.removeClass("lay_opening_spread");
this.getInfoWindow().rearrange()
},_onUnfold:function(){var l=$("._infolay_frame",this.getInfoWindow().getElement());
$("._fold",l).show();
$("._unfold",l).hide();
l.addClass("lay_opening_spread");
this.getInfoWindow().rearrange()
},_onGoToMapView:function(){var m=this.getInfoWindow(),n=m.getModel().getData(),l=m.getPoint(),o=this.$map().getLevel();
this.$MenuBar().attach({"after_change.subway":function(){this.$map().setCenter(l,o);
this.$Subway().showSubwayInfoWindowByLineView(n);
this.$MenuBar().detach("after_change.subway")
}.bind(this)});
NModules.load("mappoi",function(){this.$MenuBar().changeMenu("LOCATION")
}.bind(this))
},_onGoToLineView:function(){var l=this.getInfoWindow(),m=l.getModel().getData();
NModules.load("subway",function(){this.$Subway().showSubwayInfoWindowByMapView(m)
}.bind(this))
},_onClose:function(m){m&&m.preventDefault();
var l=this.getInfoWindow();
if(l){l.listeners&&l.listeners.close&&l.listeners.close();
l.close()
}},_bindInfoWindowEvent:function(l){l.detach(".infowindow_action");
l.attach("close.infowindow_action",this._onCloseInfoWindow.bind(this,l))
},_onCloseInfoWindow:function(l){var l=l||this.getInfoWindow();
this._clearZoomBase();
this.dispatch("close",{infoWindow:l});
delete this._infoWindow
},close:function(l){if(this._closeLocked){return
}var l=l||this.getInfoWindow();
l&&l.close()
},_bindMapEvent:function(){if(this._mapEventToken){return
}var l="infowindow_"+Date.now();
this.$map().attach("CHANGE_MAP_DONE."+l,this._onChangeMapDone.bind(this));
this._mapEventToken=l;
this._centerPixel=this.$map().getCenterPixel();
this.$map().addIgnoreClass("_infolay_frame")
},_unbindMapEvent:function(){if(!this._mapEventToken){return
}this.$map().detach("."+this._mapEventToken);
delete this._mapEventToken
},_checkOverThreshold:function(m){if(!this._centerPixel){return false
}var m=m||this.$map().getCenterPixel(),l=m.x-this._centerPixel.x,o=m.y-this._centerPixel.y,n=Math.abs(l)>50||Math.abs(o)>50;
if(n){this._centerPixel=m
}return n
},_onChangeMapDone:function(){if(!this._checkOverThreshold()){return
}var m=this.$map(),l=m.getZoomBasePoint();
if(l&&!m.isInBound(l)){m.clearZoomBasePoint();
this._currentZoomBase=l
}else{if(!l&&this._currentZoomBase&&m.isInBound(this._currentZoomBase)){m.setZoomBasePoint(this._currentZoomBase);
delete this._currentZoomBase
}}},_onMouseWheelMap:function(){this._getSocialHandler()._plugin.hide()
},_setZoomBase:function(l){this._bindMapEvent();
delete this._currentZoomBase;
this.$map().setZoomBasePoint(l)
},_clearZoomBase:function(){this._unbindMapEvent();
delete this._currentZoomBase;
this.$map().clearZoomBasePoint()
},moveToStaticContainer:function(){var o=$(this.getInfoWindow().getElement()),n=this.$map().getStaticContainer(),l=o.offset(),m=this.$map().getMapOffset({x:l.left,y:l.top});
o.data("prev-left",o.css("left")).data("prev-top",o.css("top")).css({left:m.x,top:m.y});
n.appendChild(o[0])
},restoreToInfoPane:function(){var l=this.getInfoWindow();
if(!l){return
}var p=$(l.getElement()),m=this.$map().getInfoPane(),n=this._setCenterCalled,o=0;
if(n){o=this.getInfoWindow().getSize().height
}p.css({left:parseInt(p.data("prev-left"),10)-this._gapPixel.x,top:parseInt(p.data("prev-top"),10)-this._gapPixel.y-o});
m.appendChild(p[0])
},_moveInfoWindowCallback:function(l){if(!this._panning){return
}this.restoreToInfoPane();
delete this._newMarkerInfo;
l&&l();
this._panning=false;
this.$map().detach("SET_CENTER.panMapInfoWindow");
window.setTimeout(function(){var m=this.getInfoWindow();
m&&m.setOption("autoPosition",true)
}.bind(this),500)
},moveInfoWindow:function(l,n){var m=this.getInfoWindow();
if(m.getPoint().equals(l.point)){n&&n();
return
}this._moving=false;
this._newMarkerInfo=l;
this._panning=true;
this.getInfoWindow().setOption("autoPosition",false);
this.moveToStaticContainer();
this._moveMap(l,this._moveInfoWindowCallback.bind(this,n))
},_moveMap:function(m,s){if(!this.getInfoWindow()){return
}var p=this.getInfoWindow(),o=p.getOffset(),r=m.offset,q=this.$map().getPointToPixel(p.getPoint().toInner()),n=this.$map().getPointToPixel(m.point.toInner()),l={x:q.x-n.x,y:-((q.y+o.height)-(n.y+r.height))};
this._gapPixel=l;
this._panMap(l,s)
},_panMap:function(l,n){var m=this.$map();
this._setCenterCalled=false;
m.attach("SET_CENTER.panMapInfoWindow",this._onSetCenter.bind(this));
m.panMapAnd(l,n)
},_onInfoWindowClick:function(p){var o=$(p.target);
var l=this._getADCRParams();
var m=o.closest("a").data("adcr"),n;
if(!l||!m||!l.x1||!l.x2){return
}if(m==="sum_detail"){if(l.type==="marker"){n=l.x2
}else{n=l.x1
}}else{n=l.x2
}nhn.map.service.ADCR.log({x:n,p:m})
},_onInfoPaneDown:function(l){this._downPoint=new nhn.map.Offset(l.clientX,l.clientY)
},_onInfoPaneUp:function(m){if(!this._downPoint){return
}var n=Math.abs(m.clientX-this._downPoint.left)+Math.abs(m.clientY-this._downPoint.top),l;
if(n<5){l=$(m.target);
if(!l.closest("div.nmap_infowindow, div._nmap_marker, div.nmap_indoor_region_drawing_pane").length){this.close();
this.$map().unselectMarker()
}}delete this._downPoint
},openCouponWindow:function(n){n.preventDefault();
var m=$(n.currentTarget),l=window.open(m.attr("href"),"siteCoupon","resizable=no,scrollbars=1,status=no,menubar=no,toolbar=no");
l&&l.focus()
},openFreeCallWindow:function(m){m.preventDefault();
var l=this.getModel();
nhn.map.search.openSiteFreeCallWindow({id:l.id,name:l.name,tel:l.phone,ktCallMd:l.ktCallMd})
},openAroundTrafficDialog:function(l){l.preventDefault();
this._closePanorama();
this.close()
},openRequestModifyWindow:function(l){if(!this.getInfoWindow()){return
}l.preventDefault();
this.dispatch("openBugReport")
},_isPublicTransportSpot:function(){var l=this.getModel().theme;
if(!!l&&l.isSubway+l.isStation+l.isTerminal+l.isAirport>0){return true
}return false
},openBusRoute:function(p){p.preventDefault();
var o=$(p.target).closest("a"),n=this.getModel(),m=parseInt(o.data("route-index"),10)||0,l=n.bus[m];
this._closePanorama();
NModules.load("bus",function(){this.$bus().showBusRouteByID(l.id,{sWindowType:"STATIC",stationId:l.stationID,point:new nhn.mapcore.LatLng(l.y,l.x).toInner(),bMoveToCenter:true,bMoveBound:false})
}.bind(this));
this.close()
},openSubwayRoute:function(p){p.preventDefault();
var n=$(p.target).closest("a"),m=this.getModel(),l=parseInt(n.data("route-index"),10)||0,o=m.subway[l].stationID;
this._closePanorama();
this.$bridge().openSubwayRoute(o);
this.close()
},pushPanoramaOverlayInfo:function(){},showPanoramaView:function(o){var n=this.getModel(),p=((n.MarkerInfo&&n.MarkerInfo.id?n.MarkerInfo.id:n.stationID)||n.id)+"",m={id:o.id,type:o.type||1,pan:o.pan,tilt:o.tilt,fov:o.fov,point:new nhn.mapcore.LatLng(o.lat||n.y,o.lng||n.x)},l=this.$bridge().getMarkerById(p);
if("layout" in o){m.layout=o.layout
}if(l&&l.type==="PERIMETER_TRAFFIC"&&n.oEntityType&&n.oEntityType.isAirport){if(l.options.streetPanorama&&o.type===3){o=l.options.streetPanorama
}else{if((l.options.skyPanorama||n.skyPanorama)&&o.type===1){o=l.options.skyPanorama
}}m={id:o.id,type:o.type,pan:o.pan,tilt:o.tilt,fov:o.fov,point:new nhn.mapcore.LatLng(o.lat||n.y,o.lng||n.x)}
}if(l&&l.type==="PERIMETER_TRAFFIC"&&!l.options.skyPanorama&&n.skyPanorama){l.options.skyPanorama=n.skyPanorama
}NModules.load("panorama",function(){l&&this.$Panorama().addMarker(l);
this.$Panorama().openPanorama(m)
}.bind(this))
},showStreetView:function(o){o.preventDefault();
var l=this.getModel(),n,m;
if(l.indoorMapInfo&&!l.indoorMapInfo.isRepresent&&l.indoorPanorama){n=l.indoorPanorama;
m=c.TYPE_INDOOR
}else{n=l.streetPanorama;
m=c.TYPE_STREET
}n.type=m;
this.showPanoramaView(n)
},showSkyView:function(n){n.preventDefault();
var l=this.getModel(),m=l.skyPanorama;
m.type=c.TYPE_FLIGHT;
this.showPanoramaView(m)
},showMuseumView:function(n){n.preventDefault();
var l=this.getModel(),m=l.insidePanorama;
m.type=c.TYPE_MUSEUM;
m.layout=0;
this.showPanoramaView(m)
},showInteriorView:function(n){n.preventDefault();
var l=this.getModel(),m=l.interiorPanorama;
m.type=c.TYPE_INTERIOR_FRONT;
this.showPanoramaView(m)
},goPrev:function(m){m.preventDefault();
if(!this.getInfoWindow()){return
}var l=this.getInfoWindow();
if(l.listeners&&l.listeners.prev){l.listeners.prev()
}},goNext:function(m){m.preventDefault();
if(!this.getInfoWindow()){return
}var l=this.getInfoWindow();
if(l.listeners&&l.listeners.next){l.listeners.next()
}},_onMoveSubwayStation:function(o,s){s.preventDefault();
if(!this.getInfoWindow()){return
}var p=this.getInfoWindow();
if(p.listeners&&p.listeners.moveStation){var r=$(s.currentTarget);
var n={stationID:r.data("stationid"),title:r.data("title"),x:r.data("x"),y:r.data("y"),fromTransfer:!!o};
var l=null;
if(r.data("haspano")){var q=r.data("panolat"),m=r.data("panolng");
var l={fov:r.data("panofov"),id:r.data("panoid"),pan:r.data("panopan"),tilt:r.data("panotilt"),point:new nhn.mapcore.LatLng(q,m).toInner(),type:2}
}p.listeners.moveStation(n,l)
}},setDirectionPoint:function(m,p){p.preventDefault();
var l=this.getInfoWindow();
if(!l){return
}var o=this._getSpotInfo(),n=l.getType();
if(n!=="PANORAMA"&&this.$MenuBar().getMenuState()==="SUBWAY"){}else{NModules.load("directions",function(){var q=this.$Directions();
switch(m){case"DEPARTURE":q.applyDeparture(o);
break;
case"DESTINATION":q.applyDestination(o);
break;
case"WAYPOINT":q.applyWaypoint(o);
break
}if(NModules.has("bus")){this.$bus().closeBusRoute({animation:true})
}}.bind(this))
}this.close()
},_closePanorama:function(){NModules.has("panorama")&&this.$Panorama().closePanorama()
},_getADCRParams:function(){var l;
if(this._searchResult&&this._searchResult.type==="ad"){l=this._searchResult.item
}else{if(this._infoData&&(this._infoData.type==="adPin"||this._infoData.isAd)){l=this._infoData
}else{l=null
}}if(!l){return null
}return{x1:l.x1,x2:l.x2,type:(l.type==="adPin")?"pin":"marker"}
},_onClickTitle:function(l){},_onClickPrice:function(n){n.preventDefault();
var m=$(n.currentTarget).attr("href"),l=window.open(m);
if(l){l.focus()
}},_onClickPollingSpace:function(m){m.preventDefault();
var l=m.currentTarget;
window.open(l.href,l.target,"width=800,height=270,history=no,status=no,menubar=no");
return false
},_onPrintInfoWindow:function(){var l=this.getModel();
this.$Sharing().printInfoWindow(l)
},_onBookmarkClick:function(p){var o=$(p.currentTarget),n=o.data("bookmark-key"),m=nhn.map.bookmark.BookmarkModelFactory.createBookmark(this.getModel()),l=o.hasClass("on");
if(l){this.$BookmarkService().removeBookmarkByBookmarkStud(n)
}else{this.$BookmarkService().addBookmarkByBookmarkStud(m)
}},sendNDSLog:function(n,m){var o=null,l=n;
if(m){n=this._getStationType(m);
o=i[n]
}else{if(n=="SPOT"||n=="SITE"||n=="BOOKMARK_SITE"||n=="PUBLIC_TRANSPORT"||n==="PERIMETERINFO"){o=i.SITE
}else{if(n=="REGION"||n=="ADDRESS"){o=i.ADDRESS
}}}if(o&&l!=="SUBWAY_ROUTE"){nhn.map.LogPV(o)
}},_getStationType:function(l){var m=null;
switch(l){case 1:m="BUS";
break;
case 2:m="SUBWAY";
break;
default:m="SITE"
}return m
},_cleanUp:function(l){var l=l||this.getInfoWindow();
if(!l||!l.cleanUp){return
}l.cleanUp()
},sendNCSLog:function(m,l){nhn.map.LogClick({element:m.target,event:m,acode:l})
},_onSetCenter:function(){this._setCenterCalled=true
},_bindBookmarkEvent:function(){this.$BookmarkService().attach({load:this._updateUiOfBookmarkStud.bind(this),add:this._updateUiOfBookmarkStud.bind(this),remove:this._updateUiOfBookmarkStud.bind(this)})
},_updateUiOfBookmarkStud:function(){var n=this.getInfoWindow();
if(!n){return
}var m=$(n.getElement()).find("a._layer_favorite"),o=m.data("bookmark-key"),l=this.$BookmarkService().isBookmarked(o);
m.toggleClass("on",l)
},_onClickAllTrafficPath:function(n){n.preventDefault();
var l=this.getModel(),m=l.poiInfo.road.boundary;
m=j(m);
this.$map().setBound(m)
},_onClickRealtimeTraffic:function(l){l.preventDefault();
this.$map().loadTrafficPane()
},_onClickTalkTalk:function(n){n.preventDefault();
var m=$(n.target).data("link"),l=this.$Sharing().getExportUrl(this.getModel()),o="toolbar=no,location=no,scrollbars=no,resizable=yes,width=471,height=640";
if(l){this.$login().checkLoginWithPopup(function(){var p=window.open(m+"&ref="+encodeURIComponent(l),"톡톡하기",o);
if(p){p.focus()
}},{width:471,height:640})
}},_autoPosition:function(){this._unbindAutoPosition();
var l=this.getInfoWindow();
if(l){l.autoPosition()
}},_unbindAutoPosition:function(){this.$map().detach("ZOOM_MAP_END_DONE")
},_onZoom:function(){var m=this.$map(),q=this.getModel(),r=q.itemLevel||g,l=new nhn.mapcore.LatLng(q.y,q.x),s=m.getLevel(),n=a(q),u=m.getMinMaxLevel()[1],o=this._autoPosition.bind(this),t;
if(n){t=this.$map().findOptimaizedZoomLevel(n,{minLevel:1})
}else{t=r
}var p=m.getLevel();
this._unbindAutoPosition();
m.attach("ZOOM_MAP_END_DONE",o);
if(s<t-2){m.setCenter(l);
m.zoom(t);
if(p===t){this._unbindAutoPosition()
}}else{if(s+3>u){s=u
}else{s+=3
}m.setCenter(l);
m.zoom(s);
if(p===s){this._unbindAutoPosition()
}}this.getInfoWindow().autoPosition()
},_onEnterDeadLink:function(r){var s=$(r.target),q=s.closest("div"),p=q.width(),l=q.find(".syly_card"),o=s.closest(".spotly_detail"),n,m;
n=p-59;
m=o.height()+parseInt(o.css("padding-top"),10)+"px";
l.css("left",n);
l.css("top",m);
l.show()
},_onLeaveDeadLink:function(l){$(l.target).closest("dd").find(".syly_card").hide()
},isCloseLocked:function(){return !!this._closeLocked
}});
function j(o){var l=new nhn.mapcore.UTMK(o.minX,o.maxY).toInner(),m=new nhn.mapcore.UTMK(o.maxX,o.minY).toInner(),n=[l.x,l.y,m.x,m.y];
return n
}function h(o){var l=new nhn.mapcore.LatLng(o.maxY,o.minX).toInner(),m=new nhn.mapcore.LatLng(o.minY,o.maxX).toInner(),n=[l.x,l.y,m.x,m.y];
return n
}function a(l){if(l.boundary){var m=l.boundary;
return h(m)
}else{if(l.poiInfo&&l.poiInfo.hasPolygon){var m=l.poiInfo.polygon.boundary;
return h(m)
}else{if(l.poiInfo&&l.poiInfo.hasRoad){var m=l.poiInfo.road.boundary;
return j(m)
}}}return null
}var i={SUBWAY:"subway",BUS:"busstop",SITE:"spot",ADDRESS:"zone"}
})();
nhn.map.service.InfoWindowModel=iron.Class({initialize:function(a){this._data=a
},getData:function(){return this._data
}});
(function(){var a=iron.ns("nhn.map.service");
a.InfowindowDataRefinery=function(){};
a.InfowindowDataRefinery.refine=function(r,q,t){var o;
t=$.extend({},t);
if(t.subwayId){if(!t.itemMetaData[0].data){return null
}e(t)
}if(!t.isBookmark){t.isBookmark=false
}b(t);
var p=false,s=false;
if(t.indoorMapInfo&&!t.indoorMapInfo.isRepresent&&t.indoorPanorama){p=true
}else{if(t.streetPanorama){s=true
}}if(t.modooHomepage===undefined){t.modooHomepage=null
}o=$.extend(t,{phone:t.phone||null,IsPanoramaMode:r==="PANORAMA",infoWindowIconOffset:false,oEntityType:l(r,q,t),mappedAddress:t.mappedAddress||null,isDetailAddress:(typeof t.isDetailAddress==="string")?(t.isDetailAddress==="true"):(t.isDetailAddress||false),isNewAddress:(typeof t.isNewAddress==="string")?(t.isNewAddress==="true"):(t.isNewAddress||false),isExistIndoorView:p,isExistStreetView:s,isExistAirView:!!(typeof t.skyPanorama!=="undefined"&&t.skyPanorama),isExistMuseumView:!!(typeof t.insidePanorama!=="undefined"&&t.insidePanorama),isExistInteriorView:!!(typeof t.interiorPanorama!=="undefined"&&t.interiorPanorama),isLongTitle:false,isSubway:!!t.isSubway,movieInfo:t.movieInfo||null,streetPanorama:t.streetPanorama||null,indoorPanorama:t.indoorPanorama||null,skyPanorama:t.skyPanorama||null,insidePanorama:t.insidePanorama||null,MarkerType:q,bSpotSiteEntityType:(q==="SPOT"||q==="SITE"),bHasImage:!!t.imageURL,windowTitleWidth:210,isCorrectPos:(typeof t.posExact!=="undefined")?!!parseInt(t.posExact,10):null,evaluationURL:f(t.id,q),couponUrl:t.couponUrl||null,credit:t.credit||null,isFromMapPoi:r==="POI",detailViewUrl:nhn.map.search.getDetailViewUrl({id:t.id},false),scheduleEnable:t.movieInfo&&t.movieInfo.scheduleEnable,isCallLink:t.isCallLink==="1",category:t.category,roadAddr:t.roadAddr||null});
o.thumbURL=j(o.bHasImage,o.oEntityType.isPollingSpace,o.imageURL);
if(o.imageURL&&o.imageURL.indexOf("https://")===-1){o.imageURL="https://search.pstatic.net/common/?src="+encodeURIComponent(o.imageURL)
}if(o.oEntityType.isRoad){o.roadDetail=m(t)
}else{if(o.oEntityType.isLand){o.landDetail=k(t)
}else{if(o.isSubway){o.subwayDetail=d(t);
o.subwayDetail.IsPanoramaMode=o.IsPanoramaMode
}else{if(o.oEntityType.isAddress){t.displayName=t.name;
t.name=t.fullAddress||t.address
}}}}if(o.scheduleEnable){o.scheduleUrl=t.movieInfo.scheduleUrl
}return o
};
function g(o){}function e(p){var o=p.x,q=p.y;
p.isSubway=true;
p.isFromSearch=true;
p.isIdSearch=false;
$.extend(p,p.itemMetaData[0].data);
p.x=o;
p.y=q
}function b(q){var o=q.mappedAddress,p=q.matchAddresses;
if(o){if(o.fullAddress==="null"){o.fullAddress=null
}if(typeof o.isNewAddress==="string"){o.isNewAddress=(o.isNewAddress==="true")
}}else{if(p&&p.address&&p.address.length>0){q.mappedAddress={isNewAddress:q.isNewAddress!=="true",fullAddress:p.address[0].fullMatchAddress}
}}}function l(p,o,r){var s=r.theme||{},q=r.poiInfo||{};
return{isSpot:(o==="SPOT"),isSite:(o==="SITE"&&r.isSite==="1"),isPoi:(o==="SITE"&&r.isSite==="0"),isAddress:(o==="ADDRESS"||o==="REGION"),isRoad:(o==="SITE"&&q.hasRoad===true),isLand:(o==="SITE"&&s.isLand==="1"),isHospital:(o==="SITE"&&s.isHospital==="1"),isMovie:(o==="SITE"&&s.isMovie==="1"),isGas:(o==="SITE"&&r.petrolInfo),isPerimeter:(p==="PERIMETERINFO"||p==="PUBLIC_TRANSPORT"),isWingSpoon:(o==="SITE"&&s.isWingspoon==="1"),isWingbus:(o==="SITE"&&s.isWingbus==="1"),isStation:(s.isStation==="1"),isAirport:(s.isAirport==="1"),isTerminal:(s.isTerminal==="1"),isBookmark:(p==="BOOKMARK_SITE"),isPollingSpace:r.isPollingPlace==="1"}
}function k(r){var o=r.poiInfo,t=o&&o.land&&o.land.detail,v=false,p,s,w,q,u;
if(!t){return null
}s=o.land.detail;
v=!!s.pictureUrl;
p=nhn.map.search.getDetailViewUrl({id:r.id},false);
if(!s.hscpTypeNm||!s.mviYm){w=s.formatType
}else{if(!s.hasMviYm){w=s.hscpTypeNm
}else{w=s.hscpTypeNm;
q=s.mviYm
}}u=s.minDealPrcForDisplay||s.maxDealPrcForDisplay||s.minLeasePrcForDisplay||s.maxLeasePrcForDisplay;
return $.extend({},s,{name:r.name,hasDetail:o.land&&o.land.detail,hasLandImg:v,detailViewUrl:p,pictureURL:s.pictureUrl,address:r.address,typeName:w,date:q,hasPrice:u,isCorrectPos:+r.posExact!==0,roadAddr:r.roadAddr})
}function d(t){var s=[],r=[],q,o,u,p;
if(!t.isSubway){return null
}q=t.prevOBJ&&t.prevOBJ.station&&t.prevOBJ.station.length>0;
u=t.nextOBJ&&t.nextOBJ.station&&t.nextOBJ.station.length>0;
if(q){o=t.prevOBJ.station;
s=i(o)
}if(u){p=t.nextOBJ.station;
r=i(p)
}return $.extend({},t,{hasDetail:true,prevStations:s,nextStations:r,transferInfo:c(t),exitGate:n(t)})
}function m(p){var o=p.poiInfo.road.detail;
return{beginAddress:o.beginAddress,destAddress:o.destAddress,wholeDistance:o.wholeDistance}
}function n(q){var o=q.exitInfo&&q.exitInfo.gate&&q.exitInfo.gate.length>0,p=[];
if(o){p=q.exitInfo.gate
}return p
}function c(p){var o=p.exOBJ&&p.exOBJ.station&&p.exOBJ.station.length>0,q=[];
if(o){q=p.exOBJ.station
}return q
}function i(t){var r=[],o,q,p,s;
for(p=0,s=t.length;
p<s;
p++){q=t[p];
o=q.streetPanorama;
r.push({x:q.x,y:q.y,title:escape(q.laneCity+q.laneName),name:h(q,s),stationID:q.stationID,hasPano:!!o,panorama:o})
}return r
}function h(p,q){var o;
o=p.stationName;
if(o.length>(6/q)){o=o.slice(0,Math.floor(5/q))+".."
}return o
}function j(r,p,q){if(r&&!p){var o=q;
return"https://search.pstatic.net/common/?type=ofullfill&size=110x110&src="+encodeURIComponent(o)
}return null
}function f(p,o){if(!p){return null
}return"/local/siteview.nhn?"+((o==="SPOT")?"type=spot&":"")+"evaluate=open&code="+p+"#review"
}}());
nhn.mapservice.TemplateRepos.add({infowindow_basic_2013:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="_infowindow_content">  </div>  <div class="spotly_footer">   <div style="display:block">    <h5 class="blind">옵션</h5>    <ul class="common_act">     <li class="receive _share" title="보내기"></li>     <li class="print"><a href="#" class="spm spm_ca_print _print nclicks(#IWTYPE#.print)" title="인쇄">인쇄</a></li>     <li class="zoom"><a href="#" class="spm spm_ca_zoom _zoom_default nclicks(#IWTYPE#.enlarge)" title="확대">확대</a></li>    </ul>   </div>   <div class="sf_act">    <a href="#" class="spm spm_spot_report2_v2 _request_modify nclicks(#IWTYPE#.report)">정보수정 제안</a>    <a href="#" class="spm spm_sc_start2 _direction_start nclicks(#IWTYPE#.from)" data-adcr="sum_to_start">출발지로 설정</a>    <a href="#" class="spm spm_sc_end2 _direction_end nclicks(#IWTYPE#.to)" data-adcr="sum_to_dest">도착지로 설정</a>   </div>  </div>  <div class="spotly_act">   <a href="#" class="spm spm_spot_close nclicks(#IWTYPE#.close)" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow _arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},panorama_infowindow_basic:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="_infowindow_content">  </div>  <div class="spotly_footer">   <div style="display:block">    <h5 class="blind">옵션</h5>    <ul class="common_act">     <li class="receive _share" title="보내기"></li>     <li class="print"><a href="#" class="spm spm_ca_print _print" title="인쇄">인쇄</a></li>    </ul>   </div>   <div class="sf_act">    <a href="#" class="spm spm_spot_report2_v2 _request_modify nclicks(#IWTYPE#.report)">정보수정 제안</a>    <a href="#" class="spm spm_sc_start2 _direction_start">출발지로 설정</a>    <a href="#" class="spm spm_sc_end2 _direction_end">도착지로 설정</a>   </div>  </div>  <div class="spotly_act">   <a href="#" class="spm spm_spot_close nclicks(#IWTYPE#.close)" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow _arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},simple_infowindow_basic:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="_infowindow_content">  </div>  <div class="spotly_footer">   <div style="display:block">    <h5 class="blind">옵션</h5>    <ul class="common_act">     <li class="zoom"><a href="#" class="spm spm_ca_zoom _zoom_default" title="확대">확대</a></li>    </ul>   </div>   <div class="sf_act">    <a href="#" class="spm spm_spot_report2_v2 _request_modify nclicks(#IWTYPE#.report)">정보수정 제안</a>    <a href="#" class="spm spm_sc_start2 _direction_start">출발지로 설정</a>    <a href="#" class="spm spm_sc_end2 _direction_end">도착지로 설정</a>   </div>  </div>  <div class="spotly_act">   <a href="#" class="spm spm_spot_close" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow _arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},summary_window_2013:function(_d_){var p=[];
with(_d_){p.push("");
var sAddress=mappedAddress?mappedAddress.fullAddress:address;
var sNCGrCode="map*P";
var credit=typeof credit!="undefined"?credit:null;
if(oEntityType.isAddress){sNCGrCode="map*L"
}if(oEntityType.isRoad){sAddress=poiInfo.road.detail.displayAddress;
sNCGrCode="map*y"
}if(oEntityType.isLand){sNCGrCode="map*e"
}if(bSpotSiteEntityType){sNCGrCode="map*P"
}var detailViewUrl="#",reviewUrl="#",evalutaionUrl="#",cardUrl="#";
var id=id||null;
if(id){detailViewUrl="/local/siteview.nhn?"+((MarkerType=="SPOT")?"type=spot&":"")+"code="+id;
if(typeof isAd!="undefined"&&isAd){detailViewUrl+="&clickArea=ad"
}reviewUrl=detailViewUrl+"#review";
evaluationUrl="/local/siteview.nhn?"+((MarkerType=="SPOT")?"type=spot&":"")+"evaluate=open&code="+id+"#review";
cardUrl=detailViewUrl+"#infoTab=cardInfo"
}p.push(' <div class="spotly_header">  <div class="sh_fav"><a href="#" class="spm spm_lst_fav _layer_favorite nclicks(#IWTYPE#.bmkadd)" data-bookmark-key="',bookmarkKey,'" title="즐겨찾기에 추가">즐겨찾기에 추가</a></div>  <div class="sh_flexible"> ');
if(id){p.push('  <h3 class="sh_h _title nclicks(#IWTYPE#.title)"><a href="',detailViewUrl,'" target="_blank" data-adcr="sum_title">',name,"</a></h3> ")
}else{p.push('  <h3 class="sh_h _title nclicks(#IWTYPE#.title)" data-adcr="sum_title">',name,"</h3> ")
}p.push("  ");
if(isExistIndoorView||isExistStreetView||isExistAirView||isExistMuseumView||isExistInteriorView||oEntityType.isPollingSpace||(typeof menuExist!=="undefined"&&menuExist==="1")){p.push('   <span class="sh_icset"> ');
if(oEntityType.isPollingSpace){p.push('             <span class="spm spm_lst_vote">투표소</span> ')
}p.push(" ");
if(isExistIndoorView){p.push('    <a href="#" class="spm spm_spot_road _streetview nclicks(#IWTYPE#.indoorpano)" title="실내뷰">실내뷰</a> ')
}else{if(isExistStreetView){p.push('    <a href="#" class="spm spm_spot_road _streetview nclicks(#IWTYPE#.streetpano)" title="거리뷰">거리뷰</a> ')
}}p.push(" ");
if(isExistAirView){p.push('    <a href="#" class="spm spm_spot_air _skyview nclicks(#IWTYPE#.skypano)" title="항공뷰">항공뷰</a> ')
}p.push(" ");
if(isExistMuseumView){p.push('    <a href="#" class="spm spm_spot_museum _spotlayer_museum nclicks(#IWTYPE#.inside)" title="뮤지엄뷰">뮤지엄뷰</a> ')
}p.push(" ");
if(isExistInteriorView){p.push('    <a href="#" class="spm spm_spot_pension _pension nclicks(#IWTYPE#.insidepano)" title="펜션뷰">펜션뷰</a> ')
}p.push(" ");
if(typeof menuExist!=="undefined"&&menuExist==="1"){p.push('             <a href="',detailViewUrl,'#infoTab=baseInfo" title="가격정보" class="spm spm_lst_price _price nclicks(#IWTYPE#.menu)" data-adcr="sum_price">가격</a> ')
}p.push("   </span> ")
}p.push('  </div> </div> <div class="spotly_container"> ',contentHTML,"  </div>")
}return p.join("")
},simple_window:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly_header">  <div class="sh_flexible">   <h3 class="sh_h">',title,'</h3>  </div> </div> <div class="spotly_container"> </div>')
}return p.join("")
},accident_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly spotly_trouble">  <h5 class="blind">유고정보 레이어</h5>  <div class="spotly_header">   <!-- [D] : 교통사고 : tpga_icon1, 고장/공사 : tpga_icon2, 자연재해 : tpga_icon3,  행사/훈련 : tpga_icon4, 기타 : tpga_icon5 -->   <div class="tpga_icon"><span class="spm spm_tpga_icon5 _accidentType">기타</span></div>   <div class="tpga_tit">    <h3 class="_roadName">대전 통영간 고속도로</h3>    <p class="_typeName">기타</p>   </div>  </div>  <div class="spotly_container">   <div class="tpga_detail">    <p class="_desc">서울외곽순환고속도로(일산-판교) 판교분기지점부근 2,3차로 화물차에 실려있던 화물이 도로에 쏟아진 사고</p>    <dl>     <dt class="first">발생시각</dt>     <dd class="_start_time">2012.02.15 16:05</dd>     <dt>예상종료</dt>     <dd class="_end_time">2012.02.15 16:05</dd>    </dl>   </div>   <p class="tpga_date">최종 수정 2011.01.03</p>   <p class="txt_org"></p>  </div>  <div class="spotly_act">   <a href="#" class="spm spm_spot_close _close" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow _arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},cctv_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spotlyb _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="spotlyb_header _cctv_header">   <div class="sh_flexible">    <h3 class="sh_h _cctv_name">함안고개</h3>    <span class="bar">|</span>    <span class="sh_d _cctv_road_name">남해고속도로</span>   </div>  </div>  <div class="spotlyb_container _cctv_container">   </div>  <div class="spotlyb_footer">   <p class="info2 _provider"><em>국토교통부 제공</em><br>실제와 5~10분 정도 차이가 날 수 있습니다.</p>   <div class="sf_act">    <a href="#" class="spm spm_spotb_prev _cctv_prev" title="이전구간CCTV">이전구간CCTV</a>    <a href="#" class="spm spm_spotb_next _cctv_next" title="다음구간CCTV">다음구간CCTV</a>   </div>  </div>  <div class="spotlyb_act">   <a href="#" class="spm spm_spotb_close _close" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spotb_arrow _arrow"></div>  <div class="spotlyb_oc"></div> </div>')
}return p.join("")
},cctv_layer_player:function(_d_){var p=[];
with(_d_){p.push('<div class="info_layer _cctv_embed">  <object id="silverlightplayer" data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="320px" height="240px">   <param name="source" value="/js2/lib/NCPlayer.xap?ver=20111031"/>   <param name="onerror" value="onSilverlightError" />   <param name="onload" value="onSilverlightLoad" />   <param name="minRuntimeVersion" value="3.0.40818.0" />   <param name="autoUpgrade" value="true" />   <param name="enableHtmlAccess" value="true" />   <param name="initParams" value="cpid=',sOfferer,", chid=",sNo,' ,authtime=0,onclose=nhn.mapservice.CCTV.onSilverlightClose()"/>   <param name="windowless" value="true" />   <param name="background" value="#31333e" />  </object> </div>')
}return p.join("")
},cctv_layer_install:function(_d_){var p=[];
with(_d_){p.push("");
var imgPath="https://ssl.pstatic.net/static/maps2/";
p.push(' <div class="info_layer _cctv_should_install">  <p class="msg">이 영상을 보시려면<br> Silverlight를 설치해주세요.</p>  <p class="btn"><a href="https://go.microsoft.com/fwlink/?LinkID=149156&v"><img src="',imgPath,'btn_install.gif" width="118" height="39" alt="설치하기"/></a></p>  <p class="msg2">설치가 잘 안되시면 <a href="https://help.naver.com/ops/step2/faq.nhn?parentId=230&depth=2" target="_blank">여기</a>를 클릭해주세요.</p>   <div class="copyright">   <a href="https://www.microsoft.com/silverlight/" target="_blank" class="logo"><img src="',imgPath,'logo_silverlight.gif" width="73" height="25" alt="Microsoft Silverlight"/></a>   <p>제작사 : <span>마이크로소프트</span> 용량 : <span>4MB</span></p>  </div> </div>')
}return p.join("")
},cctv_layer_update:function(_d_){var p=[];
with(_d_){p.push("");
var imgPath="https://ssl.pstatic.net/static/maps2/";
p.push(' <div class="info_layer _cctv_should_update">  <p class="msg">이 영상을 보시려면 <br> 설치된 Silverlight의 업그레이드가 필요합니다.<br> 최신 버전으로 업데이트 해주세요.</p>  <p class="btn"><a href="https://go.microsoft.com/fwlink/?LinkID=149156&v"><img src="',imgPath,'btn_update.gif" width="118" height="39" alt="업데이트"/></a></p>  <p class="msg2">설치가 잘 안되시면 <a href="https://help.naver.com/ops/step2/faq.nhn?parentId=230&depth=2" target="_blank">여기</a>를 클릭해주세요.</p>   <div class="copyright">   <a href="https://www.microsoft.com/silverlight/" target="_blank" class="logo"><img src="',imgPath,'logo_silverlight.gif" width="73" height="25" alt="Microsoft Silverlight"/></a>   <p>제작사 : <span>마이크로소프트</span> 용량 : <span>4MB</span></p>  </div> </div>')
}return p.join("")
},cctv_layer_loading:function(_d_){var p=[];
with(_d_){p.push('<p class="mes_loading">영상을 불러오고 있습니다.<br>잠시만 기다려주세요.</p>')
}return p.join("")
},cctv_layer_message_dialog:function(_d_){var p=[];
with(_d_){p.push('<p class="mes_ahead">',sMessage,'</p> <p class="mes_act">  <a href="#" class="spm spm_spotb_yes">예</a>  <a href="#" class="spm spm_spotb_no">아니오</a> </p>')
}return p.join("")
},cctv_layer_flash_install_2011:function(_d_){var p=[];
with(_d_){p.push('<div class="cctv_exception">  <p class="mes_default">이 영상을 보시려면 플래시 플레이어를 설치해주세요.<br>일부 환경에서는 정상적으로 동작하지 않을 수 있습니다.</p>  <p class="mes_act">   <a target="_blank" href="https://get.adobe.com/kr/flashplayer/" class="sbtn btn_lycc_setup">설치하기</a>  </p> </div>')
}return p.join("")
},bus_station_with_realtime_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly spotly_bus _infolay_frame">   <h5 class="blind">요약 레이어</h5>   <div class="spotly_header">    <div class="sh_fav"><a href="#" class="spm spm_lst_fav _favorite ',bookmarked?"on":"",' nclicks(#IWTYPE#.bmkadd)" data-bookmark-key="',bookmarkKey,'">즐겨찾기</a></div>    <div class="sh_flexible">     <h3 class="sh_h">',BusStopName,'</h3>     <span class="lbt_id">',ARSID,'</span>     <span class="sh_icset"> ');
if(hasPanorama){p.push('      <a href="#" class="spm spm_spot_road _streetview nclicks(#IWTYPE#.streetpano)" title="거리뷰">거리뷰</a> ')
}p.push('     </span>    </div>   </div>   <div class="spotly_container"> ');
if(liveUpdate){p.push('    <div class="lpb_rt_area">     <h5 class="blind">실시간버스 정보관련</h5>     <span class="uptime">업데이트 <span class="bar">|</span> 오후 02:34</span>     <span class="rt_loading" style="display:none">데이터 로드 중</span>     <span class="after" style="display:none">서버 응답지연</span>     <a href="#" class="spm spm_rt_refresh nclicks(#IWTYPE#.update)" title="새로고침">새로고침</a>    </div> ')
}p.push('     <div class="lysbus_lst_wrap">     <ul class="lysbus_lst ',liveUpdate?"":"lysbus_lst_norealtime",'"> ');
for(var i=0;
i<lane.length;
i++){p.push('      <li data-live="',lane[i].liveUpdate,'" data-id="',lane[i].busID,'" data-idx="',i,'" class="nclicks(#IWTYPE#.bus)">       <span class="spbi spbi_d',lane[i].type,'">',lane[i].typeName,'</span>       <a href="#" class="tit">',lane[i].busNo,'</a>       <a href="#" class="spm spm_lst_fav _favorite ',lane[i].bookmarked?"on":"",' nclicks(#IWTYPE#.bsbmkadd)" title="즐겨찾기에 추가">즐겨찾기에 추가</a> ');
if(liveUpdate){p.push('       <div class="r">        <span class="not">',lane[i].liveUpdate?"도착 예정정보 없음":"실시간 정보 미제공","</span>       </div> ")
}p.push("      </li> ")
}p.push('     </ul>    </div>   </div>   <div class="spotly_footer">    <div style="display:block">     <h5 class="blind">옵션</h5>     <ul class="common_act">      <li class="receive _share" title="보내기"></li>      <li class="print"><a href="#" class="spm spm_ca_print _print nclicks(#IWTYPE#.print)" title="인쇄">인쇄</a></li>      <li class="zoom"><a href="#" class="spm spm_ca_zoom _zoom_default nclicks(#IWTYPE#.enlarge)" title="확대">확대</a></li>     </ul>    </div>    <div class="sf_act">    <a href="#" class="spm spm_spot_report2_v2 _request_modify nclicks(#IWTYPE#.report)">정보수정 제안</a>     <a href="#" class="spm spm_sc_start2 _direction_start nclicks(#IWTYPE#.from)">출발지로 설정</a>     <a href="#" class="spm spm_sc_end2 _direction_end nclicks(#IWTYPE#.to)">도착지로 설정</a>    </div>   </div>   <div class="spotly_act">    <a href="#" class="spm spm_spot_close nclicks(#IWTYPE#.close)" title="레이어 닫기">레이어 닫기</a>   </div>   <div class="spmh spmh_spot_arrow _arrow"></div>   <div class="spotly_oc"></div>  </div>')
}return p.join("")
},land_contents:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly_detail"> ');
if(hasLandImg){p.push('   <div class="thumb nclicks(#IWTYPE#.image)">    <a href="',detailViewUrl,'" target="_blank"><img src="',pictureURL,'" width="55" height="55" alt="이미지"><span class="opac"></span></a>   </div>  ')
}p.push('  <div class="spotly_flexible">   <h4 class="land_tit">',address,"</h4>   ");
if(roadAddr){p.push('    <dd class="info_road"><span class="spm spm_spot_roadname">도로명주소</span> ',roadAddr.text,"</dd>   ")
}p.push('   <dl class="land_dl">    <dt>종류</dt>    <dd>',typeName," ",(typeof(date)!=="undefined"&&date)?'<span class="ex">('+date+"입주)</span>":"","</dd>    <dt>면적</dt>    <dd>",formatSpc,"</dd>    <dt>규모</dt>    <dd>",totHsehCnt,"세대/총 ",totDongCnt,"개동/총 ",hiestFlrCnt,"층</dd> ");
if(hasPrice){p.push('    <dt>시세</dt>    <dd>     <p>매매가 <span class="bar">|</span> ',minDealPrcForDisplay,"~",maxDealPrcForDisplay,' <span class="ex">(만원)</span></p>     <p>전세가 <span class="bar">|</span> ',minLeasePrcForDisplay,"~",maxLeasePrcForDisplay,' <span class="ex">(만원)</span></p>    </dd> ')
}p.push('    <dt>매물</dt>    <dd>매매 <a href="',dealUrl,'" target="_blank" class="nclicks(#IWTYPE#.sale)">',atclCountSale,'</a> <span class="bar">|</span>     전세 <a href="',leaseUrl,'" target="_blank" class="nclicks(#IWTYPE#.lease)">',atclCountLease,'</a> <span class="bar">|</span>     월세 <a href="',rentUrl,'" target="_blank" class="nclicks(#IWTYPE#.rent)">',atclCountRent,'</a>    </dd>   </dl>  </div> </div> <div class="spotly_btnset">  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_land nclicks(#IWTYPE#.detail)">단지 상세보기</a>   ');
if(!isCorrectPos){p.push('  <span class="incorrect">   <a href="#" class="ic_a"><span class="spm spm_pf_info">참조</span><span class="ly_incorrect">이 지점은 지도에서 위치 정보가<br>정확하지 않습니다.<span class="spm spm_arrow_up"></span><span class="opac_line"></span></span></a>   <span class="ic_s">위치정보가 정확하지 않음</span>  </span>  ')
}p.push(" </div>")
}return p.join("")
},site_content:function(_d_){var p=[];
with(_d_){p.push("");
var sAddress=mappedAddress?mappedAddress.fullAddress:address;
p.push(" ");
if(typeof isAd!="undefined"&&isAd){detailViewUrl+="&clickArea=ad"
}p.push(' <div class="spotly_detail"> ');
if(isPollingPlace==="1"){p.push('     <div class="thumb nclicks(#IWTYPE#.image)">   <a href="',detailViewUrl,'" target="_blank"><img src="https://ssl.pstatic.net/static/maps/ux2013/thumb_vote.png" width="55" height="55" alt="투표소"><span class="opac"></span></a>  </div> ')
}else{if(thumbURL){p.push('  <div class="thumb nclicks(#IWTYPE#.image)">   <a href="',detailViewUrl,'" target="_blank" data-adcr="sum_thumb"><img src="',thumbURL,'" width="55" height="55" alt="이미지"><span class="opac"></span></a>  </div> ')
}}p.push('  <div class="spotly_flexible">   <dl class="default_dl">       ');
if(isPollingPlace==="1"){p.push('           <dt class="addr">',roadAddr.text,"</dt>       ")
}else{p.push("                 ");
if(roadAddr&&roadAddr.text){p.push('                     <dt class="addr">',roadAddr.text,"</dt>                     ");
if(sAddress){p.push('                         <dd class="info_road"><span class="spm spm_addr">지번주소</span> ',sAddress,"</dd>                     ")
}p.push("                 ")
}else{p.push('                     <dt class="addr">',sAddress,"</dt>                 ")
}p.push("             ")
}p.push('    <dd class="info_tel"> ');
if(isCallLink){p.push('     <a href="#" class="free_tel _free_call">',phone,' <span class="spm spm_freetel">무료통화</span></a> ')
}else{p.push('     <span class="tel">',phone,"</span> ")
}p.push(" ");
if(phone&&category){p.push('     <span class="bar">|</span> ')
}p.push(" ");
if(category){p.push('     <span class="cate">',category,"</span> ")
}p.push("    </dd> ");
if(hasCardBenefit||couponUrl){p.push('     <span class="info_icset"> ');
if(couponUrl){p.push('      <a href="',couponUrl,'" title="쿠폰" class="spm spm_lst_coupon _coupon nclicks(#IWTYPE#.coupon)" data-adcr="sum_coupon">쿠폰</a> ')
}p.push(" ");
if(hasCardBenefit){p.push('      <a href="',detailViewUrl+"#infoTab=cardInfo",'" target="_blank" class="spm spm_lst_card _card nclicks(#IWTYPE#.card)" data-adcr="sum_card">카드</a> ')
}p.push("     </span> ")
}p.push("    </dd> ");
if(urlList&&urlList.length>0){p.push('    <dd class="url nclicks(#IWTYPE#.url)"> ');
for(var i=0,len=(urlList.length>2?2:urlList.length);
i<len;
i++){p.push("   <div>    ");
if(urlList[i].isDeadUrl==="1"){p.push('                 <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=606&categoryNo=3246" class="dead_link"><img src="https://ssl.pstatic.net/static/maps/img/icons/ico_dead.gif" width="10" height="10" alt="">접속불안정</a>             ')
}p.push("             ");
if(urlList[i].url){p.push('                 <a href="',urlList[i].landingUrl,'" title="',urlList[i].landingUrl,'" target="_blank" data-adcr="sum_url">',urlList[i].url.replace(/https?:\/\//,""),"</a>             ")
}p.push("             ");
if(urlList[i].isDeadUrl==="1"){p.push('              <div class="syly_card" style="top:184px;left:192px;display:none;">                     <p>현재 사이트 접속이<br>원활하지 않습니다.</p>                 </div>             ')
}p.push("         </div> ")
}p.push("             </dd> ")
}p.push("   </dl> ");
if(isPollingPlace==="1"){p.push('     <div class="info_vote">         실제 투표소 정보와 차이가 있을수 있으니,<br><a href="https://www.nec.go.kr/portal/main.do" target="_election">선거관리위원회</a>에서 최종 확정된 투표소<br>정보를 필히 확인하시기 바랍니다.     </div> ')
}p.push("  </div> ");
if(petrolInfo){p.push(' <div class="oil_tb">  <table cellspacing="0">   <caption>유가정보</caption>   <colgroup>    <col width="96">    <col width="129">    <col/>   </colgroup>   <thead>    <tr>     <th>유종</th>     <th>가격</th>     <th>조사기간</th>    </tr>   </thead>   <tbody> ');
if(petrolInfo.gasInfo){p.push("    <tr>     <td>휘발유</td>     <td>",petrolInfo.gasInfo.price,"원</td>     <td>",petrolInfo.gasInfo.tradeDate,"</td>    </tr> ")
}p.push(" ");
if(petrolInfo.hGasInfo){p.push("    <tr>     <td>고급휘발유</td>     <td>",petrolInfo.hGasInfo.price,"원</td>     <td>",petrolInfo.hGasInfo.tradeDate,"</td>    </tr> ")
}p.push(" ");
if(petrolInfo.dieselInfo){p.push("    <tr>     <td>경유</td>     <td>",petrolInfo.dieselInfo.price,"원</td>     <td>",petrolInfo.dieselInfo.tradeDate,"</td>    </tr> ")
}p.push(" ");
if(petrolInfo.lpgInfo){p.push("    <tr>     <td>LPG</td>     <td>",petrolInfo.lpgInfo.price,"원</td>     <td>",petrolInfo.lpgInfo.tradeDate,"</td>    </tr> ")
}p.push("   </tbody>  </table> </div> ")
}p.push(' </div> <div class="spotly_btnset"> ');
if(bSpotSiteEntityType){p.push(" ");
if(oEntityType.isGas){p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_gas nclicks(#IWTYPE#.detail)" data-adcr="sum_detail">주유소 상세보기</a> ')
}else{if(oEntityType.isMovie){p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_theater nclicks(#IWTYPE#.detail)" data-adcr="sum_detail">영화관 상세보기</a> ');
if(scheduleEnable){p.push('  <a href="',scheduleUrl,'" target="_blank" class="spm spm_spot_cinematable nclicks(#IWTYPE#.mbooking)" data-adcr="sum_detail">상영시간표,예매</a> ')
}p.push(" ")
}else{if(oEntityType.isStation||oEntityType.isTerminal){p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_detail nclicks(#IWTYPE#.detail)" data-adcr="sum_detail">상세보기</a>  <a href="',detailViewUrl+"#infoTab=timetable",'" target="_blank" class="spm spm_spot_costtimetable nclicks(#IWTYPE#.timetable)" data-adcr="sum_detail">요금,시간표보기</a> ')
}else{if(oEntityType.isAirport){p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_detail nclicks(#IWTYPE#.detail)" data-adcr="sum_detail">상세보기</a>  <a href="',detailViewUrl+"#infoTab=timetable",'" target="_blank" class="spm spm_spot_timetable nclicks(#IWTYPE#.timetable)" data-adcr="sum_detail">시간표보기</a> ')
}else{if(oEntityType.isLand){p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_land nclicks(#IWTYPE#.detail)" data-adcr="sum_detail">단지 상세보기</a> ')
}else{p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_detail nclicks(#IWTYPE#.detail)" data-adcr="sum_detail">상세보기</a> ')
}}}}}p.push('      <div class="btn_like">         <div class="u_likeit_module">             <a href="#" class="u_likeit_btn" data-sid="MAP" data-did="MAP" data-cid="',id,'" data-likeit="0"></a>         </div>     </div>  ');
if(hasNaverBooking){p.push('     <a href="',naverBookingUrl,'" class="spm spm_spot_booking nclicks(#IWTYPE#.reserve)" target="_blank"  data-adcr="sum_booking">예약</a> ')
}p.push("  ");
if(hasNaverTalktalkUrl){p.push('     <a href="#" class="spm spm_spot_talk _talktalk nclicks(#IWTYPE#.talk)" data-adcr="sum_talk" data-link="',naverTalktalkUrl,'">톡톡하기</a> ')
}p.push("  ")
}if(!isCorrectPos){p.push('  <span class="incorrect">   <a href="#" class="ic_a"><span class="spm spm_pf_info">참조</span><span class="ly_incorrect">이 지점은 지도에서 위치 정보가<br>정확하지 않습니다.<span class="spm spm_arrow_up"></span><span class="opac_line"></span></span></a>   <span class="ic_s">위치정보가 정확하지 않음</span>  </span>  ')
}p.push(" </div>")
}return p.join("")
},subway_contents:function(_d_){var p=[];
with(_d_){p.push('<div class="sways_station sways_station',type,'">  <div class="sways_prev"><span class="blind">이전역</span> ');
if(prevStations.length!==0&&!IsPanoramaMode){p.push('  <span class="spmh spmh_sways_prev"></span> ')
}p.push(" ");
for(var i=0;
i<prevStations.length;
i++){p.push(" ");
if(i>0){p.push("    / ")
}p.push(" ");
if(IsPanoramaMode){p.push("    ",prevStations[i].name," ")
}else{p.push('   <a class="_movestation nclicks(#IWTYPE#.backstation)" href="#" data-x="',prevStations[i].x,'" data-y="',prevStations[i].y,'" data-title="',prevStations[i].title,'" data-stationid="',prevStations[i].stationID,'" data-haspano="',prevStations[i].hasPano,'" ');
if(prevStations[i].hasPano){p.push('    data-panofov="',prevStations[i].panorama.fov,'" data-panoid="',prevStations[i].panorama.id,'" data-panolat="',prevStations[i].panorama.lat,'" data-panolng="',prevStations[i].panorama.lng,'" data-panopan="',prevStations[i].panorama.pan,'" data-panotilt="',prevStations[i].panorama.tilt,'" ')
}p.push('    title="',prevStations[i].name,'">',prevStations[i].name,"</a> ")
}p.push("  ")
}p.push('  </div>  <div class="sways_cu"><span class="spms_i spms_i',type,'">',laneCity," ",laneName,"</span>",stationDisplayName,'</div>  <div class="sways_next"><span class="blind">다음역</span> ');
if(nextStations.length!==0&&!IsPanoramaMode){p.push('  <span class="spmh spmh_sways_next"></span> ')
}p.push(" ");
for(var i=0;
i<nextStations.length;
i++){p.push(" ");
if(i>0){p.push("    / ")
}p.push(" ");
if(IsPanoramaMode){p.push("    ",nextStations[i].name," ")
}else{p.push('   <a class="_movestation nclicks(#IWTYPE#.nextstation)" href="#" data-x="',nextStations[i].x,'" data-y="',nextStations[i].y,'" data-title="',nextStations[i].title,'" data-stationid="',nextStations[i].stationID,'" data-haspano="true" ');
if(nextStations[i].hasPano){p.push('    data-panofov="',nextStations[i].panorama.fov,'" data-panoid="',nextStations[i].panorama.id,'" data-panolat="',nextStations[i].panorama.lat,'" data-panolng="',nextStations[i].panorama.lng,'" data-panopan="',nextStations[i].panorama.pan,'" data-panotilt="',nextStations[i].panorama.tilt,'" ')
}p.push('    title="',nextStations[i].name,'">',nextStations[i].name,"</a> ")
}p.push(" ")
}p.push("  </div> </div>  ");
if(transferInfo.length){p.push(' <div class="sways_transfer">  <h5>환승정보</h5> ');
for(var i=0;
i<transferInfo.length;
i++){if(IsPanoramaMode){p.push('   <span class="spms_i spms_i',transferInfo[i].type,'">',transferInfo[i].laneCity,"",transferInfo[i].laneName,"</span> ",transferInfo[i].laneName,"  ")
}else{p.push('   <a class="_transferStation nclicks(#IWTYPE#.transit)" href="#"    data-x="',transferInfo[i].x,'"    data-y="',transferInfo[i].y,'"    data-title="',escape(transferInfo[i].laneCity+transferInfo[i].laneName),'"    data-stationid="',transferInfo[i].stationID,'">    <span class="spms_i spms_i',transferInfo[i].type,'">',transferInfo[i].laneCity,"",transferInfo[i].laneName,"</span> ",transferInfo[i].laneName,"   </a> ")
}}p.push(" </div> ")
}p.push('  <div class="sways_tab_wrap">  <ul class="sways_tab">   <li class="on nclicks(#IWTYPE#.basictab)"><a href="#">기본정보</a></li>   <li class="nclicks(#IWTYPE#.exitinfotab)"><a href="#">출구정보</a></li>  </ul> ');
if(subwayType=="SUBWAY"){p.push('  <a href="#" class="spm spm_spot_viewline nclicks(#IWTYPE#.gosubwaymap)">노선도보기</a> ')
}else{p.push('     <a href="#" class="spm spm_spot_viewmap nclicks(#IWTYPE#.gomap)">지도보기</a> ')
}p.push('  <h4 class="blind">기본정보</h4> </div> <div id="subwaystation_baseinfo" class="sways_default_info">  <div class="base">   ');
if(roadAddr&&roadAddr.text){p.push('       <p class="addr">',roadAddr&&roadAddr.text,"</p>       ");
if(address){p.push('                 <p class="info_road"><span class="spm spm_addr">지번주소</span> ',address,"</p>       ")
}p.push("   ")
}else{p.push('       <p class="addr">',address,"</p>   ")
}p.push('   <p class="tel">',phone,'</p>  </div>  <table class="sways_info_tb">   <caption>지하철역정보</caption>   <colgroup>    <col class="sit_col1">    <col class="sit_col2">    <col class="sit_col3">    <col>   </colgroup>   <tbody>    <tr>     <th scope="row">플랫폼</th>     <td>',useInfo.platform,'</td>     <th scope="row">내리는 문</th>     <td>',useInfo.offDoor,'</td>    </tr>    <tr>     <th scope="row">화장실</th>     <td>',useInfo.restroom,'</td>     <th scope="row">반대편 횡단</th>     <td>',useInfo.crossOver,'</td>    </tr>    <tr>     <th scope="row">편의시설</th>     <td colspan="3">',useInfo.convenientFacilities?useInfo.convenientFacilities:"미제공",'</td>    </tr>   </tbody>  </table> </div> <div id="subwaystation_extrainfo" class="sways_exit_info" style="display:none ',transferInfo.length===0?";height:223px":"",'">  <ul> ');
for(var i=0;
i<exitGate.length;
i++){p.push('   <li>    <dl>     <dt><span class="sub_exit_n sub_exit_n',exitGate[i].gateNo,'">',exitGate[i].gateNo,"번출구</span></dt>     <dd>",exitGate[i].gateLink,"</dd>    </dl>   </li> ")
}p.push('  </ul> </div> <div class="spotly_btn_act">  <a href="/local/siteview.nhn?stationId=',stationID,'#infoTab=timetable" target="_blank" class="spm spm_spot_driveinfo nclicks(#IWTYPE#.schedule)">운행정보보기</a>  <a href="/local/siteview.nhn?stationId=',stationID,'" target="_blank" class="spm spm_spot_detail nclicks(#IWTYPE#.info)">상세보기</a> </div>')
}return p.join("")
},address_contents:function(_d_){var p=[];
with(_d_){p.push("");
if(!!mappedAddress){p.push(' <div class="spotly_detail"> ');
if(mappedAddress.isNewAddress){p.push('   <p class="newdb"><span class="spm spm_newaddr_v2">도로명주소</span> ',mappedAddress.fullAddress," </p> ")
}else{if(!mappedAddress.isNewAddress){p.push('   <p class="newdb"><span class="spm spm_addr">지번주소</span> ',mappedAddress.fullAddress," </p> ")
}}p.push(" </div> ")
}p.push("")
}return p.join("")
},road_contents:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly_detail">  <p class="path_both">',roadDetail.beginAddress,' <span class="arr">↔</span> ',roadDetail.destAddress,'</p>  <p class="total_dis">총거리 <span class="distance"><strong>',roadDetail.wholeDistance,"</strong>km</span></p> ");
if(oTraffic){p.push('  <table class="road_tb">   <caption>상행,하행 시간및 속도</caption>   <colgroup>    <col class="road_col1">    </col>   </colgroup>   <tbody>    <tr>     <th scope="row">상행</th>     <td>소요시간 ',oTraffic.up.displayTime,' <span class="bar">|</span> 평균속도 <strong>',oTraffic.up.displaySpeed,'</strong></td>    </tr>    <tr>     <th scope="row">하행</th>     <td>소요시간 ',oTraffic.down.displayTime,' <span class="bar">|</span> 평균속도 <strong>',oTraffic.down.displaySpeed,"</strong></td>    </tr>   </tbody>  </table> ")
}p.push(' </div> <div class="spotly_btnset"> <a href="#" class="spm spm_spot_allpath _all_path nclicks(#IWTYPE#.whole)">전체경로</a> ');
if(oTraffic){p.push('  <a href="#" class="spm spm_spot_realtime _realtime_traffic nclicks(#IWTYPE#.traffic)">실시간교통</a> ')
}p.push(" ");
if(oEntityType.isWingbus){p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_wingbus">윙버스 상세보기</a> ')
}else{p.push('  <a href="',detailViewUrl,'" target="_blank" class="spm spm_spot_detail nclicks(#IWTYPE#.detail)">상세보기</a> ')
}p.push('     <div class="btn_like">         <div class="u_likeit_module">             <a href="#" class="u_likeit_btn" data-sid="MAP" data-did="MAP" data-cid="',id,'" data-likeit="0"></a>         </div>     </div> ');
if(!isCorrectPos){p.push('  <span class="incorrect">   <a href="#" class="ic_a"><span class="spm spm_pf_info">참조</span><span class="ly_incorrect">이 지점은 지도에서 위치 정보가<br>정확하지 않습니다.<span class="spm spm_arrow_up"></span><span class="opac_line"></span></span></a>   <span class="ic_s">위치정보가 정확하지 않음</span>  </span> ')
}p.push(" </div>")
}return p.join("")
},theme_window:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly spotly_theme _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="_infowindow_content"></div>  <div class="spotly_footer">   <div class="sf_act">    <a href="#" class="spm spm_sc_start2 _direction_start">출발지로 설정</a>    <a href="#" class="spm spm_sc_end2 _direction_end">도착지로 설정</a>   </div>  </div>  <div class="spotly_act">   <a href="#" class="spotly_open _unfold nclicks(mpt*p.winmax)">펼치기</a>   <a href="#" class="spotly_close _fold" style="display:none">접기</a>   <a href="#" class="spm spm_spot_close" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow _arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},theme_edit_window:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly lay_opening_spread _infolay_frame">  <h5 class="blind">요약 레이어</h5>  <div class="_infowindow_content"></div>  <div class="spotly_act">   <a href="#" class="spm spm_spot_close" title="레이어 닫기">레이어 닫기</a>  </div>  <div class="spmh spmh_spot_arrow _arrow"></div>  <div class="spotly_oc"></div> </div>')
}return p.join("")
},theme_content:function(_d_){var p=[];
with(_d_){p.push('<div class="spotly_header">  <div class="sh_flexible">   <h3 class="sh_h">',title,'</h3>  </div> </div> <div class="spotly_container">  <!-- [D] : 기존소스와 동일 -->  <div class="lay_opening_custom_wrap">   <div class="lay_opening_custom">    ',contents,"   </div>  </div> </div>")
}return p.join("")
}});
nhn.map.service.UrlRestorer=iron.Class({inherit:iron.KVO},{_URLParams:null,_stringParams:{pinTitle:false,query:false,psName:true,psQuery:false,ptName:true,ptQuery:false,sText:true,eText:true,t1Text:true,t2Text:true,t3Text:true,t4Text:true,t5Text:true,mappedAddr:false,displayAddr:true,zoneID:true,zOrder:true},initialize:function(){iron.KVO.apply(this)
},_prepareServiceRestore:function(){var a=["search","directions","bus","subway","traffic","additionalTile","perimeterInfo","themeMap","topic","bookmark","indoorMap","panorama","spotRegistration"];
a.forEach(function(b){var c="_"+b+"UrlRestorer",d="$"+b.substr(0,1).toUpperCase()+b.substr(1)+"UrlRestorer";
this.bindTo(c,this[d]());
this[c+"_changed"]=this._restore
},this)
},setURLParams:function(a){if(!a){return
}this._fromStringToNumberParams(a);
this._trimQueryParams(a);
this._URLParams=a
},_fromStringToNumberParams:function(d){var b,c,a=this;
for(b in d){c=d[b];
if(/^\-?([1-9][0-9\.]*|0)$/.test(c)&&!(b in a._stringParams)){d[b]=parseFloat(c)
}}},_trimQueryParams:function(a){if(a.query){a.query=a.query.trim()
}},_getURLParams:function(){return this._URLParams
},restore:function(){this._prepareServiceRestore();
var a=this._getURLParams();
if(!a){throw new Error("URL 복원 파라미터가 설정되지 않았습니다.")
}this._initOrder();
this._restore()
},_initOrder:function(){var b=this.$MapChangeBlocker();
function c(){b.block()
}function a(){b.unblock()
}this._order=["Directions","Search","Bus","Subway","AdditionalTile","Traffic","PerimeterInfo","Topic","ThemeMap",a,"Bookmark","IndoorMap","Panorama","SpotRegistration"]
},_restore:function(){var a=this._getRestorer(),b=this._getURLParams();
if(a){a.restore(b)
}else{this.dispatch("complete")
}},_getRestorer:function(){var a=this._order.shift();
var c=null;
var b=this;
if(a){if(typeof a=="function"){c={restore:function(){a();
b._restore()
}}
}else{c=this["$"+a+"UrlRestorer"]()
}}return c
}});
(function(){iron.ns("nhn.map.service").BusUrlRestorer=iron.Class(iron.KVO,{_restore:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(a){return(a.menu==="bus"&&!!a.query)||!!a.busId||(!!a.stationId&&+a.stationClass!==2)||!!a.busStationId
},restore:function(a){if(!!a.menu&&(a.menu.toUpperCase()==="BUS"||(a.menu.toUpperCase()==="BOOKMARK"&&!!a.bmType&&/^bus+/.test(a.bmType)))){this.$menubar().changeMenu("BUS","urlRestore")
}if(this.isRequireRestore(a)){this._beforeRestore();
this._onRestore(a)
}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true
},_onRestore:function(c){var a=this.$bus(),b=c.type||"BUS_ROUTE";
if(c.menu.toUpperCase()==="BUS"){a.changeMenu(b)
}this._restoreQuery(c)
},bus_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_busUrlRestorer",true)
},_restoreQuery:function(e){var a=this.$bus(),b=e.query,d=e.menu,f=e.doCode,c=e.busType;
if(d==="bus"&&b){a.attachOnce("query_changed",function(){this._restoreBusLayer(e)
}.bind(this));
a.changeQuery(b,{doCode:f,busType:c})
}else{this._restoreBusLayer(e)
}},_restoreBusLayer:function(b){var h=this.$bus(),g=b.busId,c=b.stationId,m=b.busStationId,f=b.stationClass,a=document.location.search,n=(a.indexOf("dlevel")!==-1),i=(a.indexOf("lat")!==-1),k=(a.indexOf("lng")!==-1),j,l,o,d,e,j=((!!c&&f!==2)||!!m);
l=((i&&k)===false)&&(j===false);
o=(l===false&&n===true);
d=((i&&k)===false);
e=!!(b.pinId);
if(g&&j){this._restoreBusRouteAndBusStation(g,c||m,l,o,d,e)
}else{if(g){h.attachOnce("open_bus_route_layer",function(){this._restoreDone()
}.bind(this));
this._restoreBusRoute(g,l,o,e)
}else{if(j){h.attachOnce("ready_busstation_data",function(){this._restoreDone()
}.bind(this));
this._restoreBusStation(c||m,d)
}else{this._restoreDone()
}}}},_restoreBusRouteAndBusStation:function(g,c,a,e,f,d){var b=this.$bus();
b.attachOnce("open_bus_route_layer",function(){this._restoreBusStation(c,f)
}.bind(this));
b.attachOnce("ready_busstation_data",function(){this._restoreDone()
}.bind(this));
this._restoreBusRoute(g,a,e,d)
},_restoreBusRoute:function(d,a,c,b){this.$bus().showBusRouteByID(d,{sCaller:"BusRouteLayer",bMoveBound:a,bMoveToCenter:c,fromUrlRestorer:b})
},_restoreBusStation:function(a,b){this.$bus().showBusStationWindowWithMarker(a,{markerOnly:false,bMoveToStation:true})
},_restoreDone:function(){this.bus_changed()
}})
}());
(function(){var a=iron.ns("nhn.map.service");
a.SubwayUrlRestorer=iron.Class({inherit:iron.KVO},{_restore:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(e){var d=e.menu==="subway",c=!!(e.stationId&&+e.stationClass===2);
return d||c
},restore:function(c){if(!!c.menu&&c.menu.toUpperCase()=="SUBWAY"){this.$menubar().changeMenu("SUBWAY","urlRestore")
}if(this.isRequireRestore(c)){this._beforeRestore();
this._onRestore(c)
}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true
},_onRestore:function(c){if(c.menu==="subway"){this._restoreSubwayLine(c)
}else{if(c.stationId&&+c.stationClass===2){this._restoreMapStation(c)
}}},_restoreMapStation:function(f){var c=this.$SubwayService(),e=f.stationId,d=this;
c.requestSubway(e,{success:function(i){var g=i.result,h;
h=c.addUrlRestorationMarker({stationID:e,stationDisplayName:g.name,x:g.x,y:g.y});
c.openSubwayWindow(e,h);
d._afterRestore()
},error:function(){d._afterRestore()
}})
},_restoreSubwayLine:function(c){this.$SubwayService().showSubwayRouteByUrl(c)
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_subwayUrlRestorer",true)
},_listenService:function(){this.$SubwayService().attach({"serviceRegionChanged.urlrestorer":b.bind(this)})
}});
function b(){if(!this._restore){return
}this._afterRestore();
this.$SubwayService().detach(".urlrestorer")
}}());
iron.ns("nhn.map.service").DirectionsUrlRestorer=iron.Class(iron.KVO,{_MAX_ZOOM_LEVEL:14,_restore:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(a){return a.menu=="route"
},restore:function(b){if(this.isRequireRestore(b)){var a=function(){var c=this._extractRoutePlacesNumberIDs(b),d=this._onRestore.bind(this,b);
this._beforeRestore();
this.$Directions().requestEntrances(c.join(":"),d,d)
}.bind(this);
if(this.$login().isLoginUser()){this.$bookmark().requestBookmarkList(a)
}else{a()
}}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true;
this.$menubar().changeMenu("ROUTE","urlRestore")
},_onRestore:function(g,c){var f=!!(g.slng&&g.slat),a=!!(g.elng&&g.elat),b=!!(g.t1lng&&g.t1lat),e=!!(g.query&&g.tab);
var d=function(k,j,h){var i=k&&c[(k+"").replace(/\D/g,"")];
if(!i&&j&&h){if(g.pathType===0){i={car:[{entranceCoordX:h,entranceCoordY:j}]}
}else{i={walk:[{entranceCoordX:h,entranceCoordY:j}]}
}}return i
};
if(e){this._restoreSearchSuggestionInDirections(g);
this._afterRestore()
}else{if(f&&a){this._restoreRoute(g,d)
}else{if(f||a||b){this._restoreRoutePoint(g,d);
this._afterRestore()
}else{this._restoreHome(g);
this._afterRestore()
}}}},_createDirectionsSpot:function(d,f,c,b,a,e){return new nhn.map.service.DirectionsSpot({name:d,point:{x:c,y:f},id:!!a&&a+"",entrances:b,type:e})
},_restoreRoute:function(q,p){var l=this._createDirectionsSpot(q.sText,q.slat,q.slng,p(q.sdid,q.eslat,q.eslng),q.sdid,q.sType);
var n=this._createDirectionsSpot(q.eText,q.elat,q.elng,p(q.edid,q.eelat,q.eelng),q.edid,q.eType);
var f,s,g,r,b,a=[];
for(var o=1;
;o++){f=q["t"+o+"lat"];
s=q["t"+o+"lng"];
g=q["t"+o+"Text"];
r=q["t"+o+"did"];
b=q["t"+o+"Type"];
if(!f||!s){break
}a.push(this._createDirectionsSpot(g,f,s,p(r,f,s),r,b))
}var c=["drive","publicTransit","bicycle","walk"][q.pathType]||"drive";
var d=this.$Directions().getRequest();
d.setDefault(c);
d.setDeparture(l);
d.setDestination(n);
d.setWaypoints(a);
var h=q.dtPathType;
var e=q.transPathType;
var j=q.searchingTime;
if(j){d.setSearchingTime(j)
}if(!isNaN(h)){d.setOption(+h)
}if(+e==1){d.setMoreInfo({searchType:+e})
}if(parseInt(q.idx)>=0){d.setIdxUrlParameter(parseInt(q.idx))
}if(!q.sQuery||q.sQuery===""){var k=(c=="publicTransit")?"drawTransitResultDone":"responseDirectionsResult";
var m=function(){this._afterRestore();
this.$Directions().detach(k,m);
this.$Directions().detach("responseErrorResult",m);
this.$Directions().detach("connectionError",m)
}.bind(this);
this.$Directions().attach(k,m);
this.$Directions().attach("responseErrorResult",m);
this.$Directions().attach("connectionError",m);
this.$Directions().findDirections()
}},_restoreRoutePoint:function(c,d){var e=this.$Directions().getRequest();
if(c.slat&&c.slng){e.setDeparture(this._createDirectionsSpot(c.sText,c.slat,c.slng,d(c.sdid,c.eslat,c.eslng),c.sdid,c.sType))
}if(c.elat&&c.elng){e.setDestination(this._createDirectionsSpot(c.eText,c.elat,c.elng,d(c.edid,c.eelat,c.eelng),c.edid,c.eType))
}var f,h,j,l,k,b;
for(f=1;
;f++){h=c["t"+f+"lat"];
j=c["t"+f+"lng"];
l=c["t"+f+"Text"];
k=c["t"+f+"did"];
b=c["t"+f+"Type"];
if(!h||!j){break
}e.pushWaypoint(this._createDirectionsSpot(l,h,j,d(k,h,j),k,b))
}var a=parseInt(c.pathType,10),g=["drive","publicTransit","bicycle","walk"][a];
if(g){e.setType(g)
}},_restoreSearch:function(b){var a=b.sQuery||b.query;
if(a){this.$Search().request(a,{sm:"hty"})
}},_restoreSearchSuggestionInDirections:function(b){var a=b.tab==="departure"?0:1;
this.$Search().searchSuggestionInDirections(a,b.query)
},_restoreHome:function(a){if(a.sQuery||a.query){return
}this.$Directions().showHome()
},_extractRoutePlacesNumberIDs:function(c){var a=["sdid","edid","t1did","t2did","t3did","t4did","t5did"];
var b=[];
for(var d in c){if(c.hasOwnProperty(d)&&a.indexOf(d)>-1){b.push((c[d]+"").replace(/\D/g,""))
}}return b
},directions_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_directionsUrlRestorer",true)
}});
nhn.map.service.AdditonalTileUrlRestorer=iron.Class({inherit:iron.KVO},{initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(a){return !a.mid
},restore:function(a){if(this.isRequireRestore(a)){this._restoreBicyclePane(a);
this._restoreTrafficPane(a);
this._restoreCctv(a);
this._restoreCadastralPane(a)
}this._notifyComplete()
},_restoreBicyclePane:function(a){if(!a.bicycle||a.bicycle!="on"){return
}this.$map().loadBicyclePane()
},_restoreTrafficPane:function(a){if(!a.traffic||a.traffic!="on"){return
}this.$map().loadTrafficPane()
},_restoreCctv:function(a){if(!a.cctv||a.cctv!="on"){return
}this.$bridge().activateCCTV()
},_restoreCadastralPane:function(a){if(!a.cadastral||a.cadastral!="on"){return
}this.$map().loadCadastralPane()
},_notifyComplete:function(){this.set("_additionalTileUrlRestorer",true)
}});
nhn.map.service.PanoramaUrlRestorer=iron.Class({inherit:iron.KVO},{VR_TYPE:{flight:1,street:3,bicycle:4,inside:5,interior:8},_restore:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(a){return(a.street||a.streetid||a.streetViewer||a.flight||a.flightid||a.flightViewer||a.vrpanoid||a.insideViewer||a.interiorViewer||(a.streetlat&&a.streetlng))
},restore:function(a){if(this.isRequireRestore(a)){this.$Panorama().attachOnce("playerReady",this.panorama_changed.bind(this));
this._beforeRestore();
this._onRestore(a)
}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true
},_onRestore:function(a){if(a.street||a.flight){this._executePanorama(a)
}this._addInfoWindowWithMarkerProperty(a);
if(a.vrpanoid||a.streetid||a.streetViewer||a.flightid||a.flightViewer||a.insideViewer||a.interiorViewer){this._openPanoramaViewer(a)
}else{if(a.streetlat&&a.streetlng){this._searchPanorama(a)
}else{this._afterRestore()
}}},_executePanorama:function(a){if(a.street&&a.street=="on"){this.$Panorama().activateStreetView()
}if(a.flight&&a.flight=="on"){this.$Panorama().activateFlightView()
}},_openPanoramaData:function(a){this.$Panorama().openPanorama(a)
},_openPanoramaViewer:function(a){if(a.vrpanoid){this._openVrViewer(a)
}else{if(a.streetid){this._openStreetViewer(a)
}else{if(a.flightid){this._openFlightViewer(a)
}else{if(a.streetViewer&&a.streetViewer=="on"){this._openStreetPointViewer(a)
}else{if(a.flightViewer&&a.flightViewer=="on"){this._openFlightPointViewer(a)
}else{if(a.insideViewer&&a.insideViewer=="on"){this._openInsidePointViewer(a)
}else{if(a.interiorViewer&&a.interiorViewer=="on"){this._openInteriorPointViewer(a)
}}}}}}}},_addInfoWindowWithMarkerProperty:function(a){a.isOpenInfoWindowWithMarker=false;
if(a.pinId){a.isOpenInfoWindowWithMarker=true
}},_searchPanorama:function(b){var a=new nhn.mapcore.LatLng(b.streetlat,b.streetlng),c=b.dlevel||b.level||11;
this.$Panorama().searchPanorama(a,c,3,function(){})
},_openVrViewer:function(b){var a=this._extractVrParams(b);
this._openPanoramaData(a)
},_extractVrParams:function(d){var c={id:d.vrpanoid,type:d.vrpanotype,tilt:d.vrpanotilt,pan:d.vrpanopan,fov:d.vrpanofov,poi:d.vrpanopoi,sky:d.vrpanosky,autotour:d.autotour=="true"||false,isOpenInfoWindowWithMarker:d.isOpenInfoWindowWithMarker};
var b=d.vrpanolat||d.lat,a=d.vrpanolng||d.lng;
if(b&&a){c.point=new nhn.mapcore.LatLng(b,a)
}if(d.vrpanoartifactid){c.artifactid=Base64.decode(d.vrpanoartifactid)
}if(d.vrpanopastid){c.pastId=d.vrpanopastid
}if(d.menu=="route"){c.layout=1
}return c
},_openStreetViewer:function(b){var a=this._extractStreetParams(b);
this._openPanoramaData(a)
},_extractStreetParams:function(d){var a={id:d.streetid,type:this.VR_TYPE.street,tilt:d.stilt,pan:d.span,fov:d.sfov,poi:d.spoi,sky:d.ssky,autotour:d.autotour=="true"||false,isOpenInfoWindowWithMarker:d.isOpenInfoWindowWithMarker};
var c=d.streetlat||d.lat,b=d.streetlng||d.lng;
if(c&&b){a.point=new nhn.mapcore.LatLng(c,b)
}if(d.menu=="route"){a.layout=1
}return a
},_openFlightViewer:function(a){var b=this._extractFlightParams(a);
this._openPanoramaData(b)
},_extractFlightParams:function(c){var d={id:c.flightid,type:this.VR_TYPE.flight,tilt:c.ftilt,pan:c.fpan,fov:c.ffov,poi:c.fpoi,sky:c.fsky,layout:2};
var b=c.flat||c.lat,a=c.flng||c.lng;
if(b&&a){d.point=new nhn.mapcore.LatLng(b,a)
}return d
},_openStreetPointViewer:function(a){this._openPanoramaPoiViewer(a,"street")
},_openFlightPointViewer:function(a){this._openPanoramaPoiViewer(a,"flight")
},_openInsidePointViewer:function(a){this._openPanoramaPoiViewer(a,"inside")
},_openInteriorPointViewer:function(a){this._openPanoramaPoiViewer(a,"interior")
},_openPanoramaPoiViewer:function(c,a){var b={};
if(c.pinId!==undefined){b.pinId=c.pinId
}if(c.pinType!==undefined){b.pinType=c.pinType
}b.isOpenInfoWindowWithMarker=c.isOpenInfoWindowWithMarker;
this._openPanoramaById({PARAM:b,VIEWER:a})
},_openPanoramaById:function(a){var b=this._setParamsFromSearch(a);
this._openPanoramaData(b)
},_setParamsFromSearch:function(b){var a=this._getSearchItem(),c=null;
if(b.VIEWER=="street"&&a.streetPanorama){c=$.extend(true,{},a.streetPanorama)
}else{if(b.VIEWER=="flight"&&a.skyPanorama){c=$.extend(true,{},a.skyPanorama)
}else{if(b.VIEWER=="inside"&&a.insidePanorama){c=$.extend(true,{},a.insidePanorama)
}else{if(b.VIEWER=="interior"&&a.interiorPanorama){c=$.extend(true,{},a.interiorPanorama)
}}}}c.type=this.VR_TYPE[b.VIEWER];
c.point=new nhn.mapcore.LatLng(c.lat,c.lng);
c.markerId=a.id;
c.isOpenInfoWindowWithMarker=true;
if(b.PARAM.isOpenInfoWindowWithMarker){c.isOpenInfoWindowWithMarker=true
}return c
},_getSearchItem:function(){var a=this.$Search().getResult(),b=null;
if(a.site){b=a.site.list[0]
}if(a.region){b=a.region
}if(a.address){b=a.address.list[0]
}return b
},panorama_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_panoramaUrlRestorer",true)
}});
nhn.map.service.PerimeterInfoUrlRestorer=iron.Class({inherit:iron.KVO},{_restore:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(e){var a=("perimeter" in e),d=(e.interestZone&&e.interestZone=="TRN"),b=(e.publicTransit&&e.publicTransit=="on"),c=(e.ptLat&&e.ptLng&&e.ptMeter);
return !!(a||d||b||c)
},restore:function(a){if(this.isRequireRestore(a)){this._beforeRestore();
this._onRestore(a)
}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true
},_onRestore:function(c){var a=0,d="perimeter" in c,b=(c.ptLat&&c.ptLng&&c.ptMeter);
if(d){a=c.perimeter
}else{if(b){a=0
}}this.$Perimeter().restore(a)
},perimeterInfo_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_perimeterInfoUrlRestorer",true)
},_listenPerimterInfo:function(){this.$Perimeter().attach({restore_complete:this.perimeterInfo_changed.bind(this),response_complete:this.perimeterInfo_changed.bind(this)})
}});
nhn.map.service.ServiceUrlRestorer=iron.Class(iron.KVO,{initialize:function(){iron.KVO.apply(this)
},restore:function(){this._notifyComplete()
},_notifyComplete:function(){this.set("_serviceUrlRestorer",true)
}});
nhn.map.service.SearchUrlRestorer=iron.Class({inherit:iron.KVO},{_restore:false,_isDefaultHome:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(d){var c=d.menu?d.menu.toLowerCase():"",e=(c==="location"||c==="bookmark")&&!d.topic,b=("query" in d)&&e,a=!!d.pinId;
return !!(e||b||a)
},restore:function(a){if(this.isRequireRestore(a)){this._beforeRestore();
this._onRestore(a)
}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true
},_onRestore:function(b){var a=!!(b.pinId&&b.pinType);
this._setRestoreOptions(b);
if(b.query||a){this._restoreSearch(b)
}else{this._restoreHome(b)
}},_setRestoreOptions:function(a){if(a.inBound&&a.inBound=="on"){this.$Search().activateBoundarySearch()
}},_restoreSearch:function(e){var d={},c={},a=this.$Search(),b=e.pinId&&e.pinType;
if(e.query){var d=this._extractSearchParams(e);
if(e.queryType){c.autoSelect=true
}c.fromCopyUrl=true;
c.isNotResultChangedMap=e.isNotResultChangedMap;
a.request(e.query,d,c)
}else{if(b){d.id=e.pinId;
d.type=e.pinType.toUpperCase();
if(e.pinTitle){d.title=e.pinTitle
}if(e.streetViewer||e.flightViewer||e.insideViewer||e.interiorViewer||e.vrpanoid||e.flightid||e.streetid){d.isAfterPanorama=true
}if(e.stationClass){d.stationClass=e.stationClass
}d.__fromRestorer=true;
d.__pinOnly=!!e.stationId||!!e.busStationId;
a.request("",d)
}}},_getSearchPathOptions:function(a){switch(a){case"departure":return{searchBoxType:a,searchBoxKey:0,autoSelect:true,searchType:"searchSpot"};
case"destination":return{searchBoxType:a,searchBoxKey:1,autoSelect:true,searchType:"searchSpot"}
}return null
},_extractSearchParams:function(c){var b={},a=["boundary","siteSort","siteOrder","menu","page","type","queryRank","siteLocation","queryType","stab","cityCode","mappedAddr","displayAddr","tab","doCode","busType","searchCoord","sm"];
a.forEach(function(d){if(d in c&&(c[d]+"").length>0){b[d]=c[d]+""
}});
if("stab" in b){delete b.stab
}if(c.inBound&&c.inBound=="on"){delete b.tab
}else{b.tab=1
}b.isFirstSearch=true;
b.__fromRestorer=true;
return b
},_restoreHome:function(a){if(a.mid){this.$Home().request({})
}else{if((a.pinTitle||a.title)&&!a.pinId){this.$Home().request({title:a.pinTitle||a.title,xPos:a.xPos||a.lng,yPos:a.yPos||a.lat,rcode:a.rcode||null})
}else{if(a.ipTargeting=="N"&&(location.href.indexOf("?enc=")==-1&&location.href.indexOf("&enc=")==-1)){this.$Home().request({noticeOnly:"1"})
}else{if(this._isDefaultHome){this.$Home().request({})
}else{this.$Home().requestDefault();
this._isDefaultHome=true
}}}}},searchResult_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_searchUrlRestorer",true)
},_listenSearch:function(){this.$Search().attach({searchResultDone:this.searchResult_changed.bind(this)})
}});
iron.ns("nhn.map.service").ThemeMapUrlRestorer=iron.Class({inherit:iron.KVO},{initialize:function(){iron.KVO.apply(this)
},restore:function(a){if((!!a.menu&&a.menu.toUpperCase()=="OPENMAP")){this.$menubar().changeMenu("OPENMAP","urlRestore")
}if(a.omapSeq){this._restoreThemeMap(a)
}else{if(a.openmap){this._restoreThemeHome(a)
}}this._notifyComplete()
},_restoreThemeMap:function(a){this._loadThemeCss();
this.$bridge().restoreOpenmapTheme(a)
},_restoreThemeHome:function(a){this._loadThemeCss();
this.$bridge().restoreOpenmapHome(a)
},_loadThemeCss:function(){var a=nhn.map.service.CSSLazyLoader.getInstance();
a.loadTheme()
},_notifyComplete:function(){this.set("_themeMapUrlRestorer",true)
}});
iron.ns("nhn.map.service").TopicUrlRestorer=iron.Class({inherit:iron.KVO},{initialize:function(){iron.KVO.apply(this)
},restore:function(a){if(!!a.topic){this.$menubar().changeMenu("OPENMAP","urlRestore")
}a.topic&&this._restoreTopicMap(a);
a.weather&&this._restoreWeather(a);
this._notifyComplete()
},_restoreTopicMap:function(f){var b=f.topic.toUpperCase();
this._deleteOtherParams(f);
if(b==="CHOLLIAN"){var e=f.cMapType,a={level:f.tlevel,lat:f.tlat,lng:f.tlng},d=f.cDateTime;
this._openChollianMap(e,a,d)
}else{if(b==="OLDINCHEON"){var c=iron.ns("nhn.map.oldincheon");
this._openOldIncheonMap({level:c.Const.MIN_LEVEL,lat:c.Const.LATITUDE,lng:c.Const.LONGITUDE})
}}},_openChollianMap:function(c,a,b){NModules.load("chollian",function(){this._loadThemeCss();
this.$Chollian().open(c,a,b)
}.bind(this))
},_openOldIncheonMap:function(a){NModules.load("oldincheon",function(){this._loadThemeCss();
this.$OldIncheon().open(a)
}.bind(this))
},_loadThemeCss:function(){var a=nhn.map.service.CSSLazyLoader.getInstance();
a.loadTheme()
},_deleteOtherParams:function(c){var b=["topic","dlevel","ipTargeting","lat","lng","level","menu","tlevel","tlat","tlng","cMapType","cDateTime"];
for(var a in c){if(b.indexOf(a)<0){delete c[a]
}}},_restoreWeather:function(b){var a=b.weather.split(";");
NModules.load("weather",function(){this.$WeatherService().activate();
a.forEach(function(c){this.$WeatherService().selectWeatherType(c)
}.bind(this))
}.bind(this))
},_notifyComplete:function(){this.set("_topicUrlRestorer",true)
}});
nhn.map.service.TrafficUrlRestorer=iron.Class({inherit:iron.KVO},{_restore:false,initialize:function(){iron.KVO.apply(this)
},isRequireRestore:function(a){return"node" in a
},restore:function(a){if(this.isRequireRestore(a)){this._beforeRestore();
this._onRestore(a);
this._afterRestore()
}else{this._notifyComplete()
}},_beforeRestore:function(){this._restore=true
},_onRestore:function(a){this.$traffic().selectRoadById(a.node)
},traffic_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_trafficUrlRestorer",true)
}});
nhn.map.service.BookmarkUrlRestorer=iron.Class({inherit:iron.KVO},{_restore:false,initialize:function(){iron.KVO.apply(this)
},restore:function(a){if(!!a.menu&&a.menu.toUpperCase()=="BOOKMARK"&&!a.bmType){this.$menubar().changeMenu("BOOKMARK","urlRestore")
}this._notifyComplete()
},_beforeRestore:function(){this._restore=true
},bookmark_changed:function(){if(!this._restore){return
}this._afterRestore()
},_afterRestore:function(){this._restore=false;
this._notifyComplete()
},_notifyComplete:function(){this.set("_bookmarkUrlRestorer",true)
}});
iron.ns("nhn.map.service").MapChangeBlocker=iron.Class({initialize:function(){this._boundOffsetInfo=[0,0,0,0];
this._prepareOriginalQuery()
},$AFTER_MSG_APP_READY:function(){if(this._isMapPosFixed()){var b=nhn.map.Env.getUrlParam(),a=nhn.mapcore.CoordConverter.fromLatLngToInner(new nhn.mapcore.LatLng(b.lat,b.lng));
this.oApp.exec("SET_CENTER",[a]);
this.oApp.exec("ZOOM",[b.dlevel,null,{}]);
this.block()
}},setBoundOffsetInfo:function(c,d,e,a){if(c instanceof Array){this._boundOffsetInfo=[].concat(c)
}else{this._boundOffsetInfo=[c,d,e,a]
}},_prepareOriginalQuery:function(){var b={},a=location.search;
if(a.indexOf("?")===0){a=a.substr(1)
}a.split("&").forEach(function(c){c=c.split("=");
if(c[0]){b[c[0]]=c[1]
}});
this._origQuery=b
},_isMapPosFixed:function(){var a=this._origQuery;
return Object.keys(a).length===0||("lat" in a&&"lng" in a&&"dlevel" in a)
},block:function(){this._status=true
},unblock:function(){this._status=false
},isBlocking:function(){return !!this._status
},$BEFORE_SET_CENTER:function(){return !this._status
},$BEFORE_SET_CENTER_POINT:function(){return !this._status
},$BEFORE_SET_ZOOM_LEVEL:function(){return !this._status
},$BEFORE_MOVE_MAP:function(){return !this._status
},$BEFORE_ZOOM:function(){return !this._status
},$BEFORE_PAN_MAP:function(){return !this._status
},$BEFORE_BOUND_TO_CENTER:function(){return !this._status
}});
nhn.map.service.IndoorUrlRestorer=iron.Class({inherit:iron.KVO},{REQUIRED_MIN_LEVEL:12,initialize:function(){iron.KVO.apply(this)
},restore:function(b){if(!b.zoneID||!b.dlevel||b.dlevel<this.REQUIRED_MIN_LEVEL){this._notifyComplete();
return
}var c=null;
if(b.ipTargeting=="N"&&b.lat&&b.lat){c=new nhn.mapcore.LatLng(b.lat,b.lng)
}var a={zoneID:b.zoneID,zOrder:b.zOrder,centerPoint:c,level:b.dlevel};
this.openIndoorMap(a,this._notifyComplete.bind(this))
},openIndoorMap:function(e,f){var c=this.$Indoor(),b=c.isActivating();
var a={},d=this.$map();
if(e&&e.zoneID){a.restore=function(){c.enterIndoorMap(e.zoneID,e.zOrder);
nhn.map.LogPV()
};
a.onActivate=function(){c.detach("activate",a.onActivate);
if(e.centerPoint instanceof nhn.mapcore.LatLng&&e.level){d.setCenter(e.centerPoint,e.level)
}a.restore()
};
a.onEnter=function(){c.detach("enterIndoorMap",a.onEnter);
f&&f()
};
c.attach("enterIndoorMap",a.onEnter)
}else{a.restore=function(){f&&f()
};
a.onActivate=function(){c.detach("activate",a.onActivate);
a.restore()
}}if(!b){c.attach("activate",a.onActivate);
c.activate()
}else{a.restore()
}},_notifyComplete:function(){this.set("_indoorMapUrlRestorer",true)
}});
nhn.map.service.SpotRegistrationUrlRestorer=iron.Class({inherit:iron.KVO},{initialize:function(){iron.KVO.apply(this)
},restore:function(a){if(a.spotRegister==="true"){this._showRegistrationForm()
}this._notifyComplete()
},_showRegistrationForm:function(){var a=function(){this.$spot_registration().showForm()
}.bind(this);
NModules.loadAndCall("register",a)
},_notifyComplete:function(){this.set("_spotRegistrationUrlRestorer",true)
}});
nhn.map.service.AutoComplete=iron.Class({inherit:nhn.map.service.AbstractAutoComplete},{name:"autocomplete",_suggest:null,_inputField:null,_prevInputLeft:null,initialize:function(){nhn.map.service.AbstractAutoComplete.apply(this,arguments)
},bindDirectionsDispatcher:function(a){a.addListener({show_via:this._clickViaCreation.bind(this),add_via:this._clickViaAddition.bind(this),remove_via:this._clickViaRemoval.bind(this),clear_via:this._clearVia.bind(this)})
},setSuggest:function(){var a=$("._search_input");
this._currentMenu="LOCATION";
this._currentField="search_home";
this._inputWrapper=$("div.sch span.ii",nhn.map.DOMCache.getHeader());
this._suggest=new nhn.map.Suggest({inputField:a.toArray(),form:$("#search")[0],layerClassName:"_ac_layer",template:'<li id=@id@><a href="javascript:;" class="nclicks(STA.aclist)" style="outline:none;text-decoration:none;"><span>@txt@</span></a><span style="display:none">@in_txt@</span></li>',apiURL:this.getHostPhase(),serviceTarget:"LOCATION",maxCount:15});
this._suggest.activate();
this._suggest.addHelpLinkClass("nclicks(STA.achelp)");
this._inputField=this._suggest.getInputField();
this._layerView=this._suggest.getSuggestView();
this._layerView.add(this._inputWrapper);
this._bindEvent();
if(a[0]){a[0].blur();
a[0].focus()
}},_bindEvent:function(){this._inputField.attach({submit:this.onSubmit.bind(this),focus:this.onFocus.bind(this),blur:this.onBlur.bind(this),change:this.onChange.bind(this)});
this._layerView.attach({show:this.showLayer.bind(this),hide:this.hideLayer.bind(this)})
},onSubmit:function(b){var a=$(b.input);
if(a.hasClass("_search_input")){this.$QueryField().query(b.value,"autocomplete")
}},getValueLength:function(){return this._inputField.getValue().length()
},_setInfoOnFocus:function(a){this._currentField=a.current
},_clickViaCreation:function(c){var a=c.input;
var e=null;
for(var b=0,d=a.length;
b<d;
b++){e=a[b]._input[0];
this._suggest.addInput(e)
}},_clickViaAddition:function(a){this._suggest.addInput(a.input)
},_clickViaRemoval:function(a){if($(a.input).hasClass("_via_search_input")){return
}this._suggest.removeInput(a.input)
},_clearVia:function(){this._suggest.removeInput()
},hideSuggestLayer:function(){this._inputField.disableFocus()
},getSuggest:function(){return this._suggest
},getSuggestView:function(){return this._layerView
},getInputField:function(){return this._inputField
},_listenMenuBar:function(){this.$menubar().attach({change:this._onChangeMenu.bind(this)})
},_onChangeMenu:function(a){this._currentMenu=a.newMenu
}});
iron.ns("nhn.map.service").MenuBar=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._currentMenu=null;
this._menus={LOCATION:null,ROUTE:null,BUS:null,SUBWAY:null,BOOKMARK:null,OPENMAP:null};
this._prepareDOM();
this._bindEvent();
this.changeMenu("LOCATION")
},_prepareDOM:function(){var a=this._menus;
this._el=$("#nav");
a.LOCATION=this._el.find("li a.spm_nsch");
a.ROUTE=this._el.find("li a.spm_nfw");
a.BUS=this._el.find("li a.spm_nbus");
a.SUBWAY=this._el.find("li a.spm_nsway");
a.BOOKMARK=this._el.find("li a.spm_nfv");
a.OPENMAP=this._el.find("li a.spm_ntm")
},_bindEvent:function(){var b=this._menus,a;
for(a in b){if(b.hasOwnProperty(a)){b[a].on("click",this._onClickMenu.bind(this,a))
}}},_on:function(b){var a=this._menus[b];
if(this._currentMenu){this._menus[this._currentMenu].parent().removeClass("on")
}a.parent().addClass("on")
},_onClickMenu:function(a,b){b.preventDefault();
this.changeMenu(a,"user")
},getElement:function(){return this._el[0]
},getWidth:function(){return this._el.width()
},getMenuState:function(){return this._currentMenu
},changeMenu:function(d,b,e){var d=d.toUpperCase(),c,a;
if(!this._menus[d]){throw new Error("잘못된 메뉴 접근입니다.")
}c=this.getMenuState();
a={trigger:b,prevMenu:c,newMenu:d};
if(c!==d){this._dispatchChanged(a,e)
}else{this.dispatch("reset",{menu:c});
e&&e()
}},_dispatchChanged:function(b,f){var e=this,d=b.newMenu;
function c(){e.dispatch("before_change",b);
e._on(d);
e._currentMenu=d;
e.dispatch("change",b);
e.dispatch("after_change",b);
f&&f()
}function a(g){if(NModules.has(g)){c()
}else{NModules.load(g,c)
}}switch(b.newMenu){case"ROUTE":a("directions");
break;
case"BUS":a("bus");
break;
case"SUBWAY":a("subway");
break;
case"BOOKMARK":c();
break;
case"OPENMAP":a("thememap");
break;
default:c();
break
}}});
(function(){var b={rep:"https://ssl.pstatic.net/static/maps2/02_openjido_63.png",group:"https://ssl.pstatic.net/static/maps2/01_thema_85.png",small:"https://ssl.pstatic.net/static/maps2/03_home_48.png"};
var a={rep:{nWidth:63,nHeight:63},group:{nWidth:85,nHeight:85},small:{nWidth:48,nHeight:48}};
var c=iron.Class({regex:/\?type=(\w+)$/i,toLarge:function(d,e){if(this.isUploadedImage(d)){d=nhn.map.theme.PanePropertyAdjustment.convertImgToThumb(d,1)
}else{d=b[e]
}return d
},toSmall:function(d){if(this.isUploadedImage(d)){d=nhn.map.theme.PanePropertyAdjustment.convertImgToThumb(d,2)
}else{d=b.small
}return d
},isUploadedImage:function(d){return(d&&this.regex.test(d)&&(d!=""))
}});
iron.ns("nhn.map.theme").RepImgConverter=new c();
nhn.map.theme.RepImgConverter.DEFAULT_IMAGE_URL=b
})();
nhn.map.theme.ThemeMapBridge=iron.Class(nhn.map.Dispatcher,{initialize:function(){},openLightBox:function(b){var a=nhn.map.DOMCache.getDialogPool().find("> div."+b);
this.$dialog.showDialog(a);
a.find("a._close").focus()
},addMarker:function(a,b){var c={};
this.oApp.exec("ADD_NORMAL_MARKER",[a,b,c]);
return c.marker
},removeMarker:function(a){this.oApp.exec("REMOVE_MARKER",[a])
},openMarkerLabelLayer:function(a,b){this.oApp.exec("OPEN_MARKER_LABEL_LAYER",[a,b])
},openLabelLayer:function(a,c,b){this.oApp.exec("OPEN_LABEL_LAYER",[a,c,b])
},closeLabelLayer:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},setMapBoundary:function(d,c,b,a){this.oApp.exec("BOUND_TO_CENTER",[Array.prototype.slice.apply(arguments),{maxLevel:12}])
},getMapBoundary:function(){return this.oApp.getBoundPoint()
},fromPixelToInnerSize:function(a){var c=this.oApp.getZoomLevel();
var b=nhn.mapcore.mapSpec.getScale(c);
return Math.floor(a/b)
},setCenter:function(a,d,c){if(!(a instanceof nhn.mapcore.Inner)){try{a=a.toInner()
}catch(b){a=new nhn.mapcore.Inner(a.x,a.y)
}}this.oApp.exec("SET_CENTER",[a,d,c])
},getCenter:function(){return this.oApp.getCenterPoint()
},$ON_SET_CENTER_DONE:function(){this.dispatch("setcenter_done")
},closeInfoWindow:function(){this.oApp.exec("CLOSE_INFOWINDOW")
},closePanoramaAndToolbar:function(){this.oApp.exec("CLOSE_PANORAMA");
this.oApp.exec("RESET_PANORAMA_TOOLBAR")
},addDrawing:function(a){this.oApp.exec("ADD_DRAWING",[a])
},removeDrawing:function(a){this.oApp.exec("REMOVE_DRAWING",[a])
},getMapSize:function(){return this.oApp.getMapSize()
},getMapElement:function(){return this.oApp.getMap()
},$ON_RESIZE_MAP_DONE:function(){this.dispatch("map_resize")
},getStaticContainer:function(){return this.oApp.getStaticContainer()
},setCursor:function(b,c,a){this.oApp.exec("SET_CURSOR",[b,c,a])
},resetCursor:function(){},addIgnoreClass:function(b,a){this.oApp.exec("ADD_IGNORE_CLASS",Array.prototype.slice.call(arguments))
},removeIgnoreClass:function(b,a){this.oApp.exec("REMOVE_IGNORE_CLASS",Array.prototype.slice.call(arguments))
},getInfoPane:function(){return this.oApp.getPane("nmap_info_pane")
},getDrawingPane:function(){return this.oApp.getPane("nmap_drawing_pane")
},getOffsetToPoint:function(a){return this.oApp.getOffsetToPoint(a)
},getPointToOffset:function(a){return this.oApp.getPointToOffset(a)
},getOffset:function(a){return this.oApp.getOffset(a)
},getScreenOffsetToPoint:function(a){return this.getOffsetToPoint(this.getOffset(a))
},getZoomLevel:function(){return this.oApp.getZoomLevel()
},getLoginUserID:function(){return this.oApp.getLoginUserID()
},fireInfoWindowClosed:function(){this.oApp.exec("CLOSE_INFOWINDOW_DONE")
},getBoundOffset:function(){return this.oApp.getBoundOffset()
},setBoundOffset:function(a){this.oApp.exec("SET_BOUND_OFFSET",a)
},$ON_CLOSE_INFOWINDOW_DONE:function(a){if(a==="map"){this.dispatch("close_infowindow_by_map_click")
}},isCadastralMap:function(){return true
},closePanorama:function(){if(!NModules.has("panorama")||!this.$panorama().isPlaying()){return
}this.$panorama().closePanorama()
}});
nhn.map.theme.ThemeStageBridge=iron.Class(nhn.map.Dispatcher,{_activatedStage:null,_activatedStageName:null,readyState:"UNSET",latestAction:null,_prevMenu:null,_defaultStageOptions:{isFromURLCopy:false,mapData:null,mapType:null,isCloseByForce:false},initialize:function(){this.fLoadTheme=$.proxy(this._loadTheme,this);
this.elWrap=$("#fix_wrap");
this.onButton=$("div#lnb-wrap > div.pr > div.pr_theme > a").click(this.onThemeMap.bind(this))
},_listenMenuBar:function(){this.$menubar().attach({change:this._onChangeMenu.bind(this),reset:this._onResetMenu.bind(this),before_change:this._beforeChangeMenu.bind(this)})
},_onChangeMenu:function(b){if(b.prevMenu==="OPENMAP"&&!this.askCloseTheme()){return
}if(b.newMenu==="OPENMAP"){var a="mts.themeopen";
if(b.trigger!=="urlRestore"){this.openStage("THEME_HOME")
}if(this.readyState==="DONE"){this.$themeHome().start(null,{isFromURLCopy:true})
}}else{this.closeStage();
this.clearThemeStyle()
}},_beforeChangeMenu:function(a){if(a.newMenu!=="OPENMAP"){this.closeStage();
this.clearThemeStyle()
}},_onResetMenu:function(a){if(a.menu!=="OPENMAP"){return
}this.closeStage();
this.clearThemeStyle();
this.openStage("THEME_HOME")
},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["isThemeEditorStageLoaded",function(){var a=this.getActivatedStage();
if(a&&a.isEditStageLoaded()){return true
}return false
}.bind(this)]);
this.oApp.exec("ADD_APP_PROPERTY",["isThemeRunning",this.isThemeRunning.bind(this)])
},$ON_OPEN_THEME_STAGE:function(b,a){this.openStage(b,a)
},$ON_CLOSE_THEME_STAGE:function(){this.closeStage()
},openStage:function(){switch(this.readyState){case"UNSET":if(arguments.length>0){this.latestAction=Array.prototype.slice.apply(arguments)
}this.readyState="LOADING";
NModules.load("thememap",function(){this.readyState="DONE";
this.openStage=this._openStage;
if(this.latestAction){this.openStage.apply(this,this.latestAction);
this.latestAction=null
}this._loadThemeCss()
}.bind(this));
break;
case"LOADING":this.latestAction=Array.prototype.slice.apply(arguments);
break;
case"DONE":break
}},_loadThemeCss:function(){var a=nhn.map.service.CSSLazyLoader.getInstance();
a.loadTheme()
},_openStage:function(d,c,b){b=$.extend({},this._defaultStageOptions,b);
var a=null;
c=this._fixMapSequence(c);
if(c===nhn.map.Env.CHOLLIAN_THEME_ID){this.openChollianMap();
return
}else{if(c===nhn.map.Env.OLDINCHEON_THEME_ID){this.openOldIncheonMap();
return
}}switch(d){case"THEME_HOME":b.isFromURLCopy=false;
a=this._getThemeHome();
break;
case"GROUP_THEME_VIEW":a=this._getGroupThemeModel();
nhn.map.LogPV("group");
break;
case"THEME_MAP_VIEW":a=this._getThemeViewerModel();
nhn.map.LogPV("open");
break;
case"THEME_MAP_EDIT":a=this._getThemeEditorModel();
break;
case"GROUP_THEME_EDIT":this.showMyMapLayer("theme_maker",c,function(){this.getActivatedStage().refreshStage("UPDATE")
}.bind(this));
return;
default:return
}if(b.isCloseByForce||this.askCloseTheme()){this.closeStage();
this.clearAtTheBeginning(b.isFromURLCopy);
a.start(c,b);
this._activatedStage=a;
this._activatedStageName=d
}},setDisableKeyForTheme:function(a){this.$Keyboard().setDisableKeyForTheme(a)
},_fixMapSequence:function(a){var b=parseInt(a,10);
if(isNaN(b)){b=null
}return b
},askCloseTheme:function(){if(this._activatedStage&&this._activatedStage.isEditStageLoaded()&&!(this._activatedStage.askCloseEditStage())){return false
}return true
},closeStage:function(){if(this._activatedStage){this._activatedStage.end();
this._activatedStage=null;
this._activatedStageName=null;
this.clearAtTheEnd();
this.setDisableKeyForTheme(false)
}},updateByCloseMyMapLayer:function(d,c){var b=this.getActivatedStage();
if(b){var a=b.doesThemeNeedsRefresh(d,c);
if(a){b.refreshStage(a)
}}},getActivatedStage:function(){return this._activatedStage
},errorStageLoading:function(b,a){this.closeStage();
if(b&&(b.code=="LE0802"||b.code=="LE0804")){window.alert(b.displayMsg)
}else{nhn.map.service.Alert("<strong>현재, 해당 기능이<br> 원활하게 동작하지 않습니다.</strong>","잠시 후 다시 시도해 주세요.")
}if(a){this.$menubar().changeMenu("LOCATION")
}else{this.openStage("THEME_HOME")
}},openChollianMap:function(){NModules.load("chollian",function(){this._loadThemeCss();
this.$Chollian().open()
}.bind(this));
this.closeStage();
nhn.map.LogPV("chollian")
},openOldIncheonMap:function(){NModules.load("oldincheon",function(){this._loadThemeCss();
this.$OldIncheon().open()
}.bind(this))
},restoreThemeViewerByURL:function(a){if(a.omapSeq+""==nhn.map.Env.CHOLLIAN_THEME_ID){this.openChollianMap();
return
}if(a.omapSeq+""==nhn.map.Env.OLDINCHEON_THEME_ID){this.openOldIncheonMap();
return
}$.ajax({url:"/mapplet/readOpenmap.nhn",data:{mapSeq:a.omapSeq,tempSaveYN:"FALSE",updateYN:"FALSE"},success:this.fLoadTheme,error:$.proxy(function(){this.errorStageLoading("",true)
},this)})
},_loadTheme:function(a){var d=JSON.parse(a);
if(d.error){this.errorStageLoading(d.error,true)
}else{if(d.result&&typeof(d.result.isThememap)!="undefined"){var c=d.result;
var b=(c.isThememap?"GROUP_THEME_VIEW":"THEME_MAP_VIEW");
this.openStage(b,c.openmap.mapSeq,{isFromURLCopy:true,mapData:c})
}}},showMyMapLayer:function(a,c,b){this.oApp.exec("CANCEL_CREATE_STATE");
this.oApp.exec("CLOSE_INFOWINDOW");
this.getActivatedStage().notifyMyMapLayerOpen();
if(a=="theme_maker"){this._getHomeLayer().showTheme(c,b)
}else{this._getHomeLayer().show(a)
}},gatherUrlParameter:function(d,c){var a=this.getActivatedStage(),b=null;
if(a){b=a.getURLCopyQuery()
}return b
},clearAtTheBeginning:function(c){var b=this.$menubar(),a=b.getMenuState();
if(!this.elWrap.hasClass("ux11_theme_wrap")){this.elWrap.addClass("ux11_theme_wrap")
}if(b.getMenuState()!=="OPENMAP"){this._prevMenu=a;
b.changeMenu("OPENMAP")
}if(!c){this.clearActionInMap()
}this.oApp.exec("SET_VISIBLE_SEARCH_IN_BOUNDARY",[false]);
this.oApp.exec("CLOSE_PANORAMA");
this.oApp.exec("RESET_PANORAMA_TOOLBAR");
this.onButton.addClass("on")
},clearAtTheEnd:function(){this.clearActionInMap();
this.oApp.exec("SET_VISIBLE_SEARCH_IN_BOUNDARY",[true]);
this.oApp.exec("CLOSE_PANORAMA");
this.oApp.exec("RESET_PANORAMA_TOOLBAR");
this.onButton.removeClass("on")
},clearThemeStyle:function(){this.elWrap.removeClass("ux11_theme_wrap")
},clearActionInMap:function(){this.oApp.exec("HIDE_PERIMETER_TRAFFIC_DIALOG");
this.oApp.exec("HIDE_PERIMETER_SEARCH_RESULT");
this.oApp.exec("UNLOAD_PUBLIC_TRANSIT");
this.oApp.exec("RESET")
},onThemeMap:function(d){var a=$(d.currentTarget);
var c="";
if(!a.is(".on")){this.openStage("THEME_HOME");
if(this.readyState==="DONE"){this.$themeHome().start()
}c="mts.themeopen"
}else{var b=(this._prevMenu||"LOCATION");
this.$menubar().changeMenu(b);
c="mts.themeclose"
}this.onSendNClick({event:d,element:d.target,acode:c})
},isEditingTheme:function(){return(this._activatedStageName==="THEME_MAP_EDIT")
},isThemeRunning:function(){return(this._activatedStageName!==null)
},onSendNClick:function(a){nhn.map.LogClick(a)
},gatherUrlParameter:function(c){if(c!=="openmap"){return
}var b={};
var a=this.getActivatedStage();
if(a){a.fillURLCopyQuery(b)
}return b
}});
nhn.map.theme.ThemeLogBridge=iron.Class({initialize:function(){},sendNDS:function(a){this.oApp.exec(a)
},sendNClick:function(a){nhn.map.LogClick(a)
}});
nhn.map.theme.ThemeUtil={parseISODate:function(e){var b=e.match(/^(\d{4})\-?(\d{2})?\-?(\d{2})?T?(\d{2})?:?(\d{2})?:?(\d{2})?\.?(\d{2})?(\+|\-)?(\d{2})?:?(\d{2})?Z?/);
var d=(b[8]=="+")?-1:1;
var a;
if(b[1]&&b[2]){var c=[];
c.push(parseInt(b[1],10));
c.push(parseInt(b[2],10)-1);
if(b[3]){c.push(parseInt(b[3],10))
}if(b[4]){c.push(parseInt(b[4],10)+(b[9]?parseInt(b[9],10):0)*d)
}if(b[5]){c.push(parseInt(b[5],10)+(b[10]?parseInt(b[10],10):0)*d)
}if(b[6]){c.push(parseInt(b[6],10))
}if(b[7]){c.push(Number(b[7]))
}return new Date(Date.UTC.apply(null,c))
}else{a=new Date();
if(b[1]){a.setUTCFullYear(parseInt(b[1],10))
}if(b[2]){a.setUTCMonth(parseInt(b[2],10)-1)
}return a
}},format:function(e,b){var d=this.parseISODate(e);
var a=function(f){return(f<10?"0"+f:""+f)
};
var c=function(g){var f=(g%12);
return(f?f:12)
};
return(b||"").replace(/[a-z]/ig,function(f){switch(f){case"Y":return d.getFullYear();
case"y":return(""+d.getFullYear()).substr(2);
case"m":return a(d.getMonth()+1);
case"d":return a(d.getDate());
case"H":return a(d.getHours());
case"h":return a(c(d.getHours()));
case"i":return a(d.getMinutes());
default:return""
}})
}};
(function(f,a,d,e){var c=a.ns("nhn.map.service"),b={SEARCH_CCTV_WITHIN_RECTANGLE:{url:"/realtraffic/searchCctv.nhn",defaultParams:{}},INQUIRE_NEXT_PREV_CCTV:{url:"/realtraffic/searchPreNextCctv.nhn",defaultParams:{}},SEARCH_INCIDENT_WITHIN_RECTANGLE:{url:"/realtraffic/searchIncident.nhn",defaultParams:{}}};
c.TrafficDAO=a.Class({inherit:f.map.AbstractDAO},{initialize:function(){f.map.AbstractDAO.apply(this,arguments)
},_onResponseSuccess:function(h,i,g){this.dispatch("responseSuccess",{apiId:h,response:g});
i&&i(g)
},_onResponseError:function(g,h){this.dispatch("responseError",{apiId:g});
h&&h()
},requestCctvWithinRectangle:function(h,g,n,m,j){var i="SEARCH_CCTV_WITHIN_RECTANGLE",l=b[i],k=d.extend(l.defaultParams,{newLtX:h.getX(),newLtY:h.getY(),newRbX:g.getX(),newRbY:g.getY(),dlevel:n});
this.abortCctv();
this._cctvXHR=this._request({url:l.url,data:k,successRule:{result:true},success:this._onResponseSuccess.bind(this,i,m||null),error:this._onResponseError.bind(this,i,j||null)})
},abortCctv:function(){if(!this._cctvXHR){return
}this._cctvXHR.abort();
delete this._cctvXHR
},requestPreNextCctv:function(g,m,l,n,i){var h="INQUIRE_NEXT_PREV_CCTV",k=b[h],j=d.extend(k.defaultParams,{cctvGroupId:g,cctvSeqInGroup:m,preOrNext:l});
this._preNextCctvXHR=this._request({url:k.url,data:j,successRule:{result:true},success:this._onResponseSuccess.bind(this,h,n||null),error:this._onResponseError.bind(this,h,i||null)})
},abortPreNextCctv:function(){if(!this._preNextCctvXHR){return
}this._preNextCctvXHR.abort();
delete this._preNextCctvXHR
},requestIncidentWithinRectangle:function(h,g,n,m,j){var i="SEARCH_INCIDENT_WITHIN_RECTANGLE",l=b[i],k=d.extend(l.defaultParams,{newLtX:h.getX(),newLtY:h.getY(),newRbX:g.getX(),newRbY:g.getY(),dlevel:n});
this.abortIncident();
this._incidentXHR=this._request({url:l.url,data:k,successRule:{result:true},success:this._onResponseSuccess.bind(this,i,m||null),error:this._onResponseError.bind(this,i,j||null)})
},abortIncident:function(){if(!this._incidentXHR){return
}this._incidentXHR.abort();
delete this._incidentXHR
}})
}(nhn,iron,jQuery));
nhn.map.service.ArrowSpliteIcon=iron.Class({initialize:function(){this.elem=$('<div class="rt_direct"><span></span></div>')
},setPoint:function(a){this._point=a
},setClassName:function(a){this.elem.attr("class",a)
},setIconPos:function(b,a){this.elem.find("span").css({left:b,top:a})
},setDegree:function(b){var a="rotate("+b+"deg)";
this.elem.find("span").css("left",-100);
this.elem.css({"-ms-transform":a,"-moz-transform":a,"-webkit-transform":a,"-o-transform":a})
},getPoint:function(){return this._point||null
},getElement:function(){return this.elem[0]
},redraw:function(){var c=this._pane;
if(!c||!this.getPoint()){return false
}var b={width:13,height:13};
var a=c.fromPointToOffset(this.getPoint().toInner());
this.elem.css({left:a.x-b.width,top:a.y-b.height});
return a
},remove:function(){var a=this._pane;
a&&a.removeOverlay(this)
},destroy:function(){this.elem.remove();
delete this._pane
},onadd:function(a){this._pane=a;
this.redraw()
},onremove:function(){this.destroy()
}});
(function(){var a=[-150,-120,-90,-60,-30,0,-570,-540,-510,-480,-450,-420,-390,-360,-330,-300,-270,-240,-210,-180],d=[-120,0,-30,-60,-90],h=["#A0A0A0","#1EAA1E","#F0A800","#EB5600","#DC0000"],g={SMALL:0,LARGE:1},b=["rt_direct","rt_direct rt_direct_b"],e=[6,8],c=11,f=20;
nhn.map.service.RoadIndicatorView=iron.Class({initialize:function(){},setMap:function(i){this._map=i;
this._pane=i.getPane("nmap_drawing_pane")
},draw:function(k,i){i=parseInt(i,10);
if(i==-1){i=0
}var j=this._getCurrentSize();
this._drawLine(k,i,j);
if(this._isEnoughDistance(k)){this._drawArrow(k,i,j)
}this._drawIndicator=true
},remove:function(){if(!this._drawIndicator){return
}this._arrow&&this._arrow.remove();
this._map.removeDrawing(this._line);
this._arrow=null;
this._drawIndicator=false
},_drawLine:function(l,j,k){var m={stroke:h[j],"stroke-width":e[k]};
var i=new nhn.mapcore.Polyline(l,m);
this._line=i;
this._map.addDrawing(i)
},_drawArrow:function(k,i,j){var l=new nhn.map.service.ArrowSpliteIcon(),n=a[this._toRadianIndex(k)],m=d[i];
l.setPoint(k[k.length-1]);
l.setClassName(b[j]);
l.setIconPos(n,m);
this._pane.addOverlay(l);
this._arrow=l
},_getCurrentLevel:function(){return this._map.getLevel()
},_getCurrentSize:function(){var j=this._getCurrentLevel(),i=(j<c)?g.SMALL:g.LARGE;
return i
},_isEnoughDistance:function(i){return this._getLineDistance(i)>f
},_getLineDistance:function(l){var n,m,p=this._pane,o=0;
for(var k=1,j=l.length;
k<j;
k++){n=p.fromPointToOffset(l[k-1].toInner());
m=p.fromPointToOffset(l[k].toInner());
o+=this._toPixelDistance(n,m)
}return o
},_toPixelDistance:function(j,i){return Math.sqrt(Math.abs(Math.pow(i.x-j.x,2))+Math.abs(Math.pow(i.y-j.y,2)))
},_toRadianIndex:function(j){var i=j.length,m=j[i-1],k=j[i-2],l=this._toRadianFrom(m,k);
return this._toIndexFrom(l)
},_toDegreeFrom:function(j){var i=j.length,n=j[i-1],l=j[i-2],m=this._toRadianFrom(n,l),k=Math.round(m*(180/Math.PI));
if(k>=0){k=360-k
}else{k=-k
}return k
},_toRadianFrom:function(l,k){var j=-(k.x-l.x),i=-(k.y-l.y);
return Math.atan2(i,j)
},_toIndexFrom:function(l){var k=a.length,i=k/2,j=Math.round(l*(i/Math.PI));
if(j<0){j=k+j
}if(j==k){j--
}return j
}})
}());
nhn.map.service.TrafficGuideView=iron.Class({ROAD_STATE:["미확인","원활","서행","지체","정체"],initialize:function(){},setMap:function(a){this._map=a;
this._pane=a.getInfowindowPane()
},getElem:function(){return(this._infoWindow)?this._infoWindow.getContentElement():null
},getPoint:function(){return(this._infoWindow)?this._infoWindow.getPoint():null
},openWindow:function(d,i,b,a){var g=nhn.mapservice.TemplateRepos.get("road_traffic_window"),h=this._toTplData(d),e=g.process(h),c=this._pane;
var f=new nhn.map.service.InfoWindow({point:i,offset:{width:20,height:36},content:e,autoPosition:b});
c.addOverlay(f);
this._closeHandler=a;
f.attach("close",this._onCloseHandler.bind(this));
this._infoWindow=f
},_onCloseHandler:function(){this._infoWindow.detach("close");
this._closeHandler()
},closeWindow:function(){if(!this._infoWindow){return
}this._infoWindow.remove();
this._infoWindow=null
},_parseTime:function(a){a=parseInt(a,10);
return nhn.mapservice.Util.makeTimeLabel(a)
},_parseDistance:function(a){a=parseInt(a,10);
return nhn.mapservice.Util.makeMeterLabel(a)
},_toTplData:function(b){var c=parseInt(b.SC_STATE,10);
if(c==-1){c=0
}var a={raw:{min:+b.SC_MINUTE,lane:+b.LANE_NUM,distance:+b.LINK_L,speed:+b.SC_SPEED},section:{startName:b.SC_SP_NAME,endName:b.SC_EP_NAME,laneNum:b.LANE_NUM,time:this._parseTime(b.SC_MINUTE),distance:this._parseDistance(b.LINK_L),state:c,stateStr:this.ROAD_STATE[c],speed:b.SC_SPEED+"km/h",prevId:b.SC_PREV_SID,nextId:b.SC_NEXT_SID},road:{name:b.RD_NAME,speed:b.RD_SPEED+"km/h",time:this._parseTime(b.RD_MINUTE),distance:this._parseDistance(b.RD_DISTANCE)},isClearData:true};
if(!b.SC_SP_NAME||b.SC_SP_NAME===""){a.isClearData=false
}return a
}});
iron.ns("nhn.map.service").TrafficGuideService=iron.Class({API:"https://ssl.map.naver.com/rts/wms/?callbackname=?",initialize:function(){this._guide=new nhn.map.service.TrafficGuideView();
this._indicator=new nhn.map.service.RoadIndicatorView();
this._guide.setMap(this.$map());
this._indicator.setMap(this.$map())
},activate:function(){if(!this._mapListener){this._mapListener={PAN_MAP_END_DONE:this._onPanMapEndDone.bind(this),ZOOM_MAP_START_DONE:this._onZoomStart.bind(this),REDRAW_DONE:this._onRedrawDone.bind(this),CLICK_MAP_DONE:this._onClickMapDone.bind(this)}
}this.$map().attach(this._mapListener);
this.$map().addIgnoreClass("_infolay_frame")
},deactivate:function(){this.clear();
this.$map().detach(this._mapListener)
},_onPanMapEndDone:function(){this.notifyPanMap()
},_onZoomStart:function(){if(!this._selected){return
}this._hide()
},_onRedrawDone:function(){this.update()
},_onClickMapDone:function(g){if(this.$state().getState()!==nhn.map.Const.STATE_NONE){return
}var d=g.domEvent,f=$(d.target||d.srcElement),b=f.closest("._nmap_marker, .ux11_footer, a").size()>0||(f.closest("._indoor_region_clue").length>0);
isStreetPane=this.$map().isActiveMapType("street");
if(b||isStreetPane){return
}var c={x:d.clientX,y:d.clientY},h=this.$map().getOffset(c),a=this.$map().getOffsetToPoint(h);
this.selectRoad(a);
nhn.map.LogClick({element:f[0],event:d,acode:"mmk.trafficline"})
},gatherUrlParameter:function(){var b=this.getSelectedRoadId();
var a=this.getSelectedRoadGroupId();
if(!b){return null
}return{node:b,groupRoadId:a,link:"0"}
},selectRoad:function(a){var b=this,e=this._getCurrLevel(),d=a.toUTMK(),c=a;
this._callAPI(d,e,function(f){b._select(f,c);
b._sendNDSLog()
})
},selectRoadById:function(c){var a=this,b=this.$map().getLevel();
this._callAPIById(c,b,function(f){if(f){var e=f.geometry.coordinates,d=a._toInnerPoints(e);
a._select(f,a._getCenterOfLine(d),true,true)
}else{a._unselect()
}})
},isSelectedRoad:function(){return this._selected
},getSelectedRoadId:function(){if(!this.isSelectedRoad()){return null
}return this._selectedData.properties.N_D_LINK||this._selectedData.properties.N_U_LINK
},getSelectedRoadGroupId:function(){if(!this.isSelectedRoad()){return null
}return this._selectedData.properties.RD_GROUP_ID
},update:function(){if(!this._selected){return
}this.selectRoadById(this.getSelectedRoadId())
},clear:function(){this._unselect()
},notifyPanMap:function(){if(!this._isMovingInfoWindow){return
}this._isMovingInfoWindow=false;
this._select(this._displayData,this._displayPoint,true);
this.$map().removeIgnoreClass("naver_map")
},_callAPI:function(a,c,b){$.getJSON(this.API,{request:"GetTrafficInfo",crs:"NHN:2048",x:a.x,y:a.y,level:c,ts:this._getVersion()},b)
},_callAPIById:function(c,b,a){$.getJSON(this.API,{request:"GetTrafficInfo",crs:"NHN:2048",sid:c,level:b,ts:this._getVersion()},a)
},_getVersion:function(){return this.$map().getTrafficLastVersion()
},_select:function(d,f,b,e){this._unselect();
this._selectedData=d;
if(!d){return
}var c=d.geometry.coordinates,a=this._toInnerPoints(c);
if(!f){f=this._getCenterOfLine(a);
b=true
}if(!b){f=this._getClosestPointInLine(a,f)
}this._indicator.draw(a,d.properties.SC_STATE);
this._guide.openWindow(d.properties,f,!e,this.clear.bind(this));
this._bind(this._guide.getElem());
this._selected=true
},_unselect:function(){if(!this._selectedData){return
}this._hide();
this._selected=false
},_hide:function(){this._unbind();
this._indicator.remove();
this._guide.closeWindow()
},_bind:function(b){b=$(b);
var a=this._onClickCloseBtn.bind(this),c=this._onClickMoveBtn.bind(this);
b.on("click","._close_realtime_traffic",a);
b.on("click","._prev_traffic",c);
b.on("click","._next_traffic",c);
this._guideElem=b
},_unbind:function(){this._guideElem.off()
},_moveMap:function(b,d){this._displayData=d;
this._displayPoint=b;
this._isMovingInfoWindow=true;
var e=this.$map().getPointToPixel(this._guide.getPoint());
var c=this.$map().getPointToPixel(b);
var a=this._gapPixel={x:e.x-c.x,y:-(e.y-c.y)};
this.$map().addIgnoreClass("naver_map");
this.$map().panMap(a.x,a.y)
},_onClickCloseBtn:function(a){a.preventDefault();
this._unselect()
},_onClickMoveBtn:function(b){b.preventDefault();
var a=this,d=this.$map().getLevel(),c=$(b.target).data("id");
if(!c){return
}this._callAPIById(c,d,function(g){if(!g){return
}var f=g.geometry.coordinates,e=a._toInnerPoints(f);
a._moveMap(a._getCenterOfLine(e),g);
a._sendNDSLog()
})
},_getCurrLevel:function(){return this.$map().getLevel()
},_getCenterOfLine:function(c){var b=this._getBoundOfLine(c);
var a=this._getCenterOfBound(b);
return this._getClosestPointInLine(c,a)
},_getClosestPointInLine:function(h,k){var e=Number.MAX_VALUE;
var m=h[0];
var c=m;
for(var a=1;
a<h.length;
a++){var l=h[a];
var f=this._getClosestPoint(m,l,k);
var j=f.x-k.x;
var g=f.y-k.y;
var b=Math.sqrt(j*j+g*g);
if(e>b){e=b;
c=f
}m=l
}return c
},_getClosestPoint:function(f,e,d){var a=this._projectionFactor(f,e,d);
if(a>0&&a<1){return this._project(f,e,d)
}var c=this._calcDistance(f,d);
var b=this._calcDistance(e,d);
return(c<b)?f:e
},_project:function(f,d,c){if(this._equalPoint(c,f)||this._equalPoint(c,d)){return c
}var b=this._projectionFactor(f,d,c);
var a=f.x+(b*(d.x-f.x));
var e=f.y+(b*(d.y-f.y));
return new nhn.mapcore.Point(a,e)
},_projectionFactor:function(g,f,e){if(this._equalPoint(e,g)){return 0
}if(this._equalPoint(e,f)){return 1
}var c=f.x-g.x;
var a=f.y-g.y;
var b=c*c+a*a;
var d=((e.x-g.x)*c+(e.y-g.y)*a)/b;
return d
},_calcDistance:function(b,a){return Math.sqrt(Math.abs(Math.pow(a.x-b.x,2))+Math.abs(Math.pow(a.y-b.y,2)))
},_equalPoint:function(b,a){return(b.x==a.x)&&(b.y==a.y)
},_getBoundOfLine:function(c){var e=Number.MAX_VALUE;
var d=Number.MIN_VALUE;
var b=Number.MIN_VALUE;
var a=Number.MAX_VALUE;
c.forEach(function(f){e=Math.min(e,f.x);
d=Math.max(d,f.y);
b=Math.max(b,f.x);
a=Math.min(a,f.y)
});
return{left:e,top:d,right:b,bottom:a}
},_getCenterOfBound:function(b){var a=(b.left+b.right)/2;
var c=(b.top+b.bottom)/2;
return new nhn.mapcore.Point(a,c)
},_toInnerPoints:function(d){var a,b=[];
for(var c=0;
c<d.length;
c++){a=d[c];
b.push(new nhn.mapcore.UTMK(a[0],a[1]).toInner())
}return b
},_sendNDSLog:function(){nhn.map.LogPV("realtrafficlayer")
}});
(function(e,a,c,d){var b=a.ns("nhn.map.service");
b.AreaMarkerManager=a.Class({inherit:e.map.Dispatcher},{name:"AreaMarkerManager",CCTV_MIN_LEVEL:8,ACCIDENT_MIN_LEVEL:7,initialize:function(){this._sSelectMarkerID=null;
this._oQueSelectMarker=null;
this._bEnableRealtimeTraffic=false;
this._aHideCctvRoute=[];
this._oMarkerList={};
this._oCctvTimer=new e.Timer();
this._oIncidentTimer=new e.Timer();
this.onClickAreaMarker=e.mapcore.Util.bind(this,this.onClickAreaMarker)
},getAreaMarkerData:function(f){return this._oMarkerList[f]
},_listenMap:function(){this.$Map().attach({load_traffic_pane:function(){this._bEnableRealtimeTraffic=true;
this._requestAreaData(300)
}.bind(this),unload_traffic_pane:function(){this._bEnableRealtimeTraffic=false;
this._oIncidentTimer.abort();
this.$TrafficDao().abortIncident()
}.bind(this),REDRAW:function(){var f=this.$Map().getLevel();
if(this.nCurrentZoomLevel!==f){this.nCurrentZoomLevel=f;
this._hideAreaMarkerByZoomLevel(f);
this.$TrafficDao().abortCctv();
this.clearAreaMarker("cctvGroup","accident");
if(f<this.CCTV_MIN_LEVEL){this.clearAreaMarker("cctv")
}}if(this.CCTV_MIN_LEVEL>f){this.hideCctvRouteMarker()
}else{this.showCctvRouteMarker()
}this._requestAreaData(300)
}.bind(this),END_DRAG_DONE:function(f,g){if(g<=0){return
}this._requestAreaData(0)
}.bind(this),PAN_MAP_END_DONE:function(){this._requestAreaData(300)
}.bind(this)})
},_checkMapState:function(){if(this.$Map().isActiveMapType("traffic")){this._bEnableRealtimeTraffic=true;
this._requestAreaData(300)
}},_listenBridge:function(){this.$Bridge().attach({activate_cctv:function(){this._bEnableCctv=true;
this.$Bridge().registerMapType("cctv");
this._requestAreaData(300)
}.bind(this),deactivate_cctv:function(){this._bEnableCctv=false;
this.$Bridge().unregisterMapType("cctv");
this._oCctvTimer.abort();
this.$TrafficDao().abortCctv()
}.bind(this),select_marker_done:function(f){if(typeof f==="string"){this._saveCurrentSelectedMarkerID(f)
}}.bind(this),unselect_marker_done:function(){this._saveCurrentSelectedMarkerID(null)
}.bind(this)})
},setSelectedMarkerId:function(f){this._saveCurrentSelectedMarkerID(f)
},_saveCurrentSelectedMarkerID:function(f){this._sSelectMarkerID=f
},_hideAreaMarkerByZoomLevel:function(f){if(f<this.CCTV_MIN_LEVEL){this.$Cctv().hideCctvLayer(true)
}if(f<this.ACCIDENT_MIN_LEVEL){this.$Accident().hideAccidentLayer()
}},_requestAreaData:function(f){var g=this.$Map().getBound(),i=this.$Map().getLevel(),j=new e.mapcore.Inner(g[0],g[1]).toLatLng(),h=new e.mapcore.Inner(g[2],g[3]).toLatLng();
if(this._bEnableCctv){this._oCctvTimer.start(function(){this.$TrafficDao().requestCctvWithinRectangle(j,h,i,this._onResponseCctvWithinRectangle.bind(this),this._doAjaxError.bind(this));
this.oldBound=g
}.bind(this),f)
}if(this._bEnableRealtimeTraffic){this._oIncidentTimer.start(function(){this.$TrafficDao().requestIncidentWithinRectangle(j,h,i,this._onResponseIncidentWithinRectangle.bind(this),this._doAjaxError.bind(this));
this.oldBound=g
}.bind(this),f)
}},onClickAreaMarker:function(j){var h=j.markerInfo,g=h.id;
if(!/^AREA_([^_]+)_(\w+)$/.test(g)){return
}var f=RegExp.$1;
var i=RegExp.$2;
var k=this._oMarkerList[f][i];
switch(f){case"accident":this.$Accident().showAccidentLayer(i);
break;
case"cctv":case"cctvRoute":if(this.$Cctv().getCurrentCCTVID()){this.$Cctv().hideCctvLayer(true)
}this.$Cctv().showCctvLayer(f,i,{setCenter:false});
break;
case"cctvGroup":setTimeout(function(){this.$Map().zoom(8,k.marker.point.toInner(),{useEffect:true});
this.$TrafficDao().abortCctv();
this.clearAreaMarker("cctv","cctvGroup","accident")
}.bind(this),0);
break
}},hideOverlapCctv:function(){if(!(this._oMarkerList.cctvRoute&&this._oMarkerList.cctv)){return
}var f=this._aHideCctvRoute;
c.each(this._oMarkerList.cctvRoute,function(h,g){if(this._oMarkerList.cctv.hasOwnProperty(h)){f.push(g.marker);
g.marker.hide()
}}.bind(this))
},showCctvRouteMarker:function(){if(!(this._oMarkerList.cctvRoute)){return
}c.each(this._oMarkerList.cctvRoute,function(g,f){f.marker.show()
})
},hideCctvRouteMarker:function(){if(!(this._oMarkerList.cctvRoute)){return
}c.each(this._oMarkerList.cctvRoute,function(g,f){f.marker.hide()
})
},addAreaMarker:function(g,m,f,k){if(!k.icon){return
}var l=this._oMarkerList[g];
if(!l){l=this._oMarkerList[g]={}
}var j=m.id;
if(!l[j]){var i=new e.mapcore.Inner(m.x,m.y);
k.id="AREA_"+g+"_"+j;
k.onClick=this.onClickAreaMarker;
k.point=i.toLatLng();
var h=this._createMarker(k);
this.$Map().addMarker(h);
h.attach({click:this.onClickAreaMarker});
l[j]={};
l[j].marker=h;
l[j].data=m;
if(this._sSelectMarkerID==k.id){h.select()
}if(g==="cctvRoute"&&this.$Map().getLevel()<this.CCTV_MIN_LEVEL){this.hideCctvRouteMarker()
}}delete f[j]
},_createMarker:function(g){var f;
switch(g.group){case"accident":f=new e.map.service.AccidentMarker(g);
break;
case"cctv":case"cctvRoute":case"cctvGroup":f=new e.map.service.CctvMarker(g);
break
}return f
},_getIcon:function(g){var f=g.group.toUpperCase();
switch(g.group){case"accident":f=["ACCIDENT",g.typeIndex].join("_");
break;
case"cctv":case"cctvRoute":f="CCTV";
break;
case"cctvGroup":f="CCTVGROUP";
break
}return new e.map.service.MarkerSpriteIcon(f)
},_getSmallIcon:function(g){var f;
switch(g.group){case"accident":f="ACCIDENT";
break;
case"cctv":case"cctvRoute":case"cctvGroup":f="CCTV";
break
}return new e.map.service.SmallIcon(f)
},clearMarker:function(f){var g=this._oMarkerList[f];
if(!g){return
}c.each(g,function(i,h){this.$Map().removeMarker(h.marker)
}.bind(this));
if(f==="cctvRoute"){this._aHideCctvRoute.length=0
}delete this._oMarkerList[f]
},clearAreaMarker:function(f){if(f){for(var h=0,l=arguments.length;
h<l;
h++){this.clearMarker(arguments[h]);
if(arguments[h]==="cctv"&&this._aHideCctvRoute.length>0){var k=this._aHideCctvRoute;
for(var g=0;
g<k.length;
g++){k[g].show()
}this._aHideCctvRoute.length=0
}}return
}c.each(this._oMarkerList,function(i){this.clearMarker(i)
}.bind(this));
this._oMarkerList={}
},gatherMapData:function(i){var h=Object.keys(this._oMarkerList),g=this.$Map().getLevel(),f=[];
if(h.length===0){return
}h.forEach(function(j){if(c.isEmptyObject(this._oMarkerList[j])){return
}if(g<this.CCTV_MIN_LEVEL){return
}c.each(this._oMarkerList[j],function(m,l){var k=l.marker;
f.push(k)
}.bind(this))
}.bind(this));
if(f.length===0){return
}i("print",{name:"cctv",icons:f})
},_onResponseCctvWithinRectangle:function(h){if(!this._bEnableCctv){return
}var g=e.mapcore.TransPoint.fromPixelUnitToPointUnit(1,this.$Map().getLevel())*26;
c.each(h.result,function(j,k){var l=this._oMarkerList[j];
if(!l){l=this._oMarkerList[j]={}
}var i={};
c.each(l,function(n,m){i[n]=m
});
if(c.isArray(k)){k.forEach(function(m){this.$Cctv().addCctvMarker(j,m,i,{group:j,spriteClass:"sym_cctv"})
}.bind(this))
}c.each(i,function(o,m){var n=m.marker.point.toInner();
if(m.marker.id!=this._sSelectMarkerID&&(this.oldBound[0]-g>n.x||n.x>this.oldBound[2]+g||this.oldBound[1]+g<n.y||n.y<this.oldBound[3]-g)){this.$Map().removeMarker(m.marker);
delete l[o]
}}.bind(this))
}.bind(this));
if(this._oQueSelectMarker){var f=this._oMarkerList[this._oQueSelectMarker.prefix][this._oQueSelectMarker.id];
this.onClickAreaMarker(f.marker);
this._oQueSelectMarker=null
}this.hideOverlapCctv()
},_onResponseIncidentWithinRectangle:function(g){if(!this._bEnableRealtimeTraffic){return
}var f=e.mapcore.TransPoint.fromPixelUnitToPointUnit(1,this.$Map().getLevel())*26;
c.each(g.result,function(i,j){var k=this._oMarkerList[i];
if(!k){k=this._oMarkerList[i]={}
}var h={};
c.each(k,function(m,l){h[m]=l
});
if(c.isArray(j)){j.forEach(function(n){var l=this.$Map().getLevel(),m=i==="accident"&&l>=this.ACCIDENT_MIN_LEVEL;
if(m){this.$Accident().addAccidentMarker(n,{group:i})
}}.bind(this))
}c.each(h,function(m,l){var n=l.marker.point.toInner();
if(l.marker.id!=this._sSelectMarkerID&&(this.oldBound[0]-f>n.x||n.x>this.oldBound[2]+f||this.oldBound[1]+f<n.y||n.y<this.oldBound[3]-f)){this.$Map().removeMarker(l.marker);
delete k[m]
}}.bind(this))
}.bind(this))
},_doAjaxError:function(){this.oldBound=null
}})
}(nhn,iron,jQuery));
(function(){var a=iron.ns("nhn.map.service");
a.CctvPlayer=iron.Class(nhn.map.Dispatcher,{initialize:function(b){this._container=b;
this._width=334;
this._height=250;
this._windowTitle=document.title;
this.playerReady=false;
this._playerLayer=$("<div/>");
this._playerLayer.css({position:"absolute",top:0,left:0,width:this._width+"px",height:this._height+"px"});
this._spinnerLayer=$("<div/>");
var c=nhn.mapservice.TemplateRepos.get("cctv_layer_loading");
$(c.process()).appendTo(this._spinnerLayer);
this._spinnerLayer.css({position:"absolute",top:0,left:0,width:this._width+"px",height:this._height+"px"});
this._messageLayer=$("<div></div>");
this._messageLayer.css({position:"absolute",top:0,left:0,width:this._width+"px",height:this._height+"px",backgroundColor:"#282834"});
this._playerLayer.appendTo(this._container)
},setChannelId:function(b){if(!b){throw new Error("channelId ArgumentError)")
}this._channelId=b;
this._loadVideo()
},stopVideo:function(){if(!this._playerLayer){return
}this._playerLayer.empty()
},_loadVideo:function(){this._showLayer("spinnerLayer");
var b=window.location.href.indexOf("://local")>0?"https://s.search.naver.com/n/api2.map":"/api2.map";
var c=b+"/traffic/getEncryptedURLString.nhn?caller=naver_map&output=json&cctvId="+this._channelId+"&useEnableCctv=true&callback=?";
$.getJSON(c,{type:"jsonp"},this._onJSONLoad.bind(this))
},_reload:function(){this._loadVideo()
},_openMessage:function(b){this._messageLayer.children().remove();
this._showLayer("messageLayer");
var c={sMessage:b};
var e=nhn.mapservice.TemplateRepos.get("cctv_layer_message_dialog");
var d=$(e.process(c));
d.on("click",".spm_spotb_yes",this._yesBtnClickHandler.bind(this));
d.on("click",".spm_spotb_no",this._noBtnClickHandler.bind(this));
d.appendTo(this._messageLayer)
},_closeMessage:function(){this._messageLayer.children().remove()
},_closeCctv:function(){this.dispatch("close_player")
},_showLayer:function(b){if(this._container.has(this._messageLayer)){this._messageLayer.remove()
}if(this._container.has(this._spinnerLayer)){this._spinnerLayer.remove()
}this._playerLayer.css("opacity","0");
switch(b){case"playerLayer":this._playerLayer.css("opacity","1");
break;
case"messageLayer":this._messageLayer.appendTo(this._container);
break;
case"spinnerLayer":this._spinnerLayer.appendTo(this._container);
break
}},_videoErrorHandler:function(){this._openMessage("영상을 불러올 수 없습니다.<br>다시 시도하시겠습니까?")
},_videoReadyHandler:function(){this._showLayer("playerLayer")
},_videoEndedHandler:function(){this._openMessage("계속해서 영상을 보시겠습니까?")
},_videoContextMenuHandler:function(b){b.stopPropagation();
b.preventDefault();
return false
},_yesBtnClickHandler:function(b){b.stopPropagation();
b.preventDefault();
this._closeMessage();
this._reload()
},_noBtnClickHandler:function(b){b.stopPropagation();
b.preventDefault();
this._closeMessage();
this._closeCctv()
},_onJSONLoad:function(c){if(c&&c.message&&c.message.result&&c.message.result.isEnable=="N"){this._openMessage("영상을 불러올 수 없습니다.<br>다시 시도하시겠습니까?")
}else{if(c&&c.message&&c.message.result){try{this._playerLayer.empty();
var f="https://cctvsec.ktict.co.kr/"+this._channelId+"/"+c.message.result.encryptedString,i=!!($.browser.msie&&parseInt($.browser.version,10)<=10),b=!!(navigator.platform.toLowerCase().indexOf("win")!=-1),l=!!(b&&$.browser.safari);
if(i||l){a.CctvPlayer.flashInterface={canplay:this._videoReadyHandler.bind(this),ended:this._videoEndedHandler.bind(this),error:this._videoErrorHandler.bind(this)};
var k={bgColor:"#272834",wmode:"opaque",allowScriptAccess:"always",flashVars:{prefix:"nhn.map.service.CctvPlayer.flashInterface.",videoURL:f}},h=nhn.map.Env?nhn.map.Env.getVar("jsTimestamp"):Date.now(),g=$(nhn.FlashObject.generateTag("/flash2/cctv/CCTVViewer.swf?ver="+h,"CCTVViewer","100%","100%",k));
g.appendTo(this._playerLayer)
}else{var d=$('<video width="'+this._width+'" height="'+this._height+'" src="'+f+'" autoplay></video>');
d.appendTo(this._playerLayer);
d.on("canplay",this._videoReadyHandler.bind(this));
d.on("ended",this._videoEndedHandler.bind(this));
d.on("error",this._videoErrorHandler.bind(this));
d.on("contextmenu",this._videoContextMenuHandler.bind(this))
}this._recoverWindowTitle()
}catch(j){this._openMessage("영상을 불러올 수 없습니다.<br>다시 시도하시겠습니까?")
}}else{if(c&&c.error&&c.error.displayMsg){this._openMessage(c.error.displayMsg)
}else{this._openMessage("영상을 불러올 수 없습니다.<br>다시 시도하시겠습니까?")
}}}},_recoverWindowTitle:function(){if($.browser.msie){document.title=this._windowTitle
}}})
}());
(function(e,a,c,d){var b=a.ns("nhn.map.service");
b.CCTV=a.Class({inherit:e.map.Dispatcher},{name:"CCTV",currentType:null,currentID:null,ajax:null,prevBtnUse:false,nextBtnUse:false,viewRealtimePopupSize:[785,810],MINIMUM_CCTV_ZOOM_LEVEL:8,coNoneMsg:{pre:"이동 가능한 이전 영상이 없습니다.",next:"이동 가능한 다음 영상이 없습니다."},offererCI:{sisul:"https://ssl.pstatic.net/static/maps2/logo_smfmc.gif",expressway:"https://ssl.pstatic.net/static/maps2/logo_roadplus2.gif",expressway2:"https://ssl.pstatic.net/static/maps2/logo_roadplus2.gif",mltm_s:"https://ssl.pstatic.net/static/maps2/logo_mltm.gif",mltm_b:"https://ssl.pstatic.net/static/maps2/logo_mltm.gif",mltm_d:"https://ssl.pstatic.net/static/maps2/logo_mltm.gif",sisulkt:"https://ssl.pstatic.net/static/maps2/logo_cctv_kt.gif",gits:"https://ssl.pstatic.net/static/maps2/logo_cctv_its.gif",utis:"https://ssl.pstatic.net/static/maps2/logo_cctv_utis.gif"},offererTitle:{sisul:"서울시설공단 제공",expressway:"국토교통부 제공",expressway2:"국토교통부 제공",mltm_s:"국토교통부 제공",mltm_b:"국토교통부 제공",mltm_d:"국토교통부 제공",sisulkt:"서울시설공단 / KT 제공",gits:"경기도 교통정보센터 제공",utis:"경찰청 (UTIS) 제공",utis_jeju:"제주자치경찰단 제공",tbs:"tbs 교통방송 제공",its_cheonan:"천안시교통정보센터 제공"},markerIcon:{cctv:{url:"https://ssl.pstatic.net/static/maps2/icons/pins_cctv.png",size:{width:19,height:20},offset:{width:9,height:20},spriteSize:{width:500,height:23,marginX:31,marginY:37},imgOrder:0},cctvGroup:{url:"https://ssl.pstatic.net/static/maps2/icons/pins_cctv.png",size:{width:25,height:20},offset:{width:9,height:20},spriteSize:{width:500,height:23,marginX:31,marginY:37},imgOrder:1}},markerSmallIcon:{cctv:{url:"https://ssl.pstatic.net/static/maps2/icons/pins_ds_new.gif",className:"sym_map3",iconWidth:21,iconHeight:21,spriteWidth:500,spriteHeight:400,xOffset:2,yOffset:6},cctvGroup:{url:"https://ssl.pstatic.net/static/maps2/icons/pins_ds_new.gif",className:"sym_map3",iconWidth:21,iconHeight:21,spriteWidth:500,spriteHeight:400,xOffset:2,yOffset:6}},initialize:function(g){this._sMapType=(g&&g.sMapType)?g.sMapType:"MainMap";
var f=c.browser;
if(this.viewRealtimePopupSize&&f.msie&&f.version<=6){this.viewRealtimePopupSize[1]-=40
}this.cctvMessage={};
this._onMarkerDraw=this.MarkerEventHandler._onDraw.bind(this);
this._onMarkerLoad=this.MarkerEventHandler._onLoad.bind(this);
this._oFnEventHandlerList={"btn_lycc_prev:click":this.DomEventHandler._onClickPrevBtn.bind(this),"btn_lycc_next:click":this.DomEventHandler._onClickNextBtn.bind(this),"btn_lycc_close:click":this.DomEventHandler._onClickCloseBtn.bind(this)};
this._bindEvent()
},getCurrentCCTVID:function(){return this.currentID
},_bindEvent:function(){if(!this._infoWindow){return false
}var f=c(this._infoWindow.getElement());
f.on("click","a._cctv_prev",this.DomEventHandler._onClickPrevBtn.bind(this)).on("click","a._cctv_next",this.DomEventHandler._onClickNextBtn.bind(this)).on("click","a._close",this.DomEventHandler._onClickCloseBtn.bind(this))
},_listenMap:function(){this.$Map().attach({PAN_MAP_END_DONE:function(){this.buttonDisable=false;
this._currentPanMapCallback&&this._currentPanMapCallback();
delete this._currentPanMapCallback
}.bind(this)})
},_listenBridge:function(){this.$Bridge().attach({activate_cctv:function(){this._bEnableCctv=true
}.bind(this),deactivate_cctv:function(){this._bEnableCctv=false;
this.$AreaMarkerManager().clearAreaMarker("cctv","cctvGroup");
this.hideCctvLayer()
}.bind(this),close_infowindow_done:function(){if(this.cctvLayerOpened){this.$Map().unselectMarker();
this.cctvLayerOpened=false
}this.hideCCTVPhantom();
this.currentID=null;
this.currentType=null
}.bind(this)})
},gatherUrlParameter:function(){if(this._bEnableCctv){return{cctv:"on"}
}else{return{}
}},addCctvMarker:function(g,j,f,i){i.onLoad=this._onMarkerLoad;
if(j.location){var h=j.location.split(",");
j.x=h[0];
j.y=h[1]
}else{j.id=j.uid;
j.cctv_name=j.cctv_nm;
j.start_section_name=j.cctv_strt_secn_nm
}switch(g){case"cctv":case"cctvRoute":i.title=j.cctv_name;
i.location=j.start_section_name;
i.icon=this.markerIcon.cctv;
i.smallIcon=this.markerSmallIcon.cctv;
i.zIndex=25;
i.onDraw=this._onMarkerDraw;
if(j.nextCctv&&j.nextCctv.cctv_name){this.$AreaMarkerManager().addAreaMarker(g,j.nextCctv,f,{group:"cctv",spriteClass:"sym_cctv"})
}if(j.preCctv&&j.preCctv.cctv_name){this.$AreaMarkerManager().addAreaMarker(g,j.preCctv,f,{group:"cctv",spriteClass:"sym_cctv"})
}break;
case"cctvGroup":i.title="이 주변 CCTV 보기";
i.icon=this.markerIcon.cctvGroup;
i.smallIcon=this.markerSmallIcon.cctvGroup;
i.zIndex=25;
break
}this.$AreaMarkerManager().addAreaMarker(g,j,f,i)
},showCctvLayer:function(f,h,g){if(NModules&&NModules.has("panorama")){if(this.$Panorama().isPlaying()){this.$Panorama().closePanorama()
}}if(!this._isTemplateLoded()){this._loadTemplate()
}this._showCCTVLayer(f,h,g)
},hideCctvLayer:function(f){if(this.currentType=="cctv"||(f&&this.currentType=="cctvRoute")){this._infoWindow&&this._infoWindow.close();
this.$Bridge().closeInfoWindowDone()
}},_isTemplateLoded:function(){return typeof this._el!="undefined"&&this._el!=null
},_loadTemplate:function(){this._el=c(e.mapservice.TemplateRepos.get("cctv_layer").process());
this._cctvFrameEl=this._el.find("._cctv_container");
this._cctvPathEl=this._el.find("div._cctv_header h3._cctv_name");
this._cctvNameEl=this._el.find("span._cctv_road_name");
this._prevBtnEl=this._el.find("._cctv_prev");
this._nextBtnEl=this._el.find("._cctv_next");
this._originEl=this._el.find("p._provider > em");
var g=!!(c.browser.msie&&parseInt(c.browser.version,10)<=10),f=!e.FlashObject.detectFlashVer(9,0,0)&&g;
if(f){if(!this._msgInstallEl){this._msgInstallEl=c(e.mapservice.TemplateRepos.get("cctv_layer_flash_install_2011").process())
}this._cctvFrameEl.append(this._msgInstallEl)
}else{this.cctvPlayerDom=c('<div style="position:relative;" />');
this.cctvPlayer=new e.map.service.CctvPlayer(this.cctvPlayerDom);
this._cctvFrameEl.append(this.cctvPlayerDom[0]);
this.cctvPlayer.attach({close_player:this._onClickPlayerCloseEvent.bind(this)})
}},setCCTVTitle:function(f,g){this._cctvNameEl.text(f).attr("title",f);
this._cctvPathEl.text(g).attr("title",g)
},_onResponseSearchNextPrevCctv:function(j,k){var g=k.result.cctv[0];
if(!g){if(this.coNoneMsg[j]){alert(this.coNoneMsg[j])
}return
}var f=this.$AreaMarkerManager().getAreaMarkerData(this.currentType);
if(!f){return
}this.reqSetCctvPlayerMessages(g);
this.setCCTVFrame(g);
var i=g.uid;
if(!f[i]){this.addCctvMarker("cctv",g,{},{group:"cctv",spriteClass:"sym_cctv"})
}this.showFloatCCTVLayer(f[i].marker);
this.currentType="cctv";
this.currentID=i;
this.setCCTVTitle(g.cctv_nm,g.cctv_strt_secn_nm);
var h="AREA_cctv_"+i;
this.$AreaMarkerManager().setSelectedMarkerId(h)
},setCCTVFrame:function(i){var h=this.sLastCPID=i.info_offerer;
var g=i.info_offerer_nm?i.info_offerer_nm+" 제공":null;
c(this._originEl).text(g||this.offererTitle[h]);
var f=(h=="expressway");
if("preCctv" in i){this.enableButton("prev",i.preCctv)
}else{this.enableButton("prev",!f)
}if("nextCctv" in i){this.enableButton("next",i.nextCctv)
}else{this.enableButton("next",!f)
}},_createInfoWindow:function(f,g){if(this._infoWindow){return false
}this._infoWindow=new e.map.service.InfoWindow({point:f,offset:g,content:this._el});
this.$Map().getInfowindowPane().addOverlay(this._infoWindow);
this._bindEvent();
this._infoWindowAdded=true
},_showCCTVLayer:function(f,i,n){if(this._sMapType==="MiniMap"){return
}var o=this;
var l=this.$AreaMarkerManager().getAreaMarkerData(f);
if(!l){return
}n=n||{};
this.hideCCTVPhantom();
var g=this.currentID;
var m=l[g];
var j=l[i];
if("zoomLevel" in n||n.setCenter){var h=null;
var k=null;
if("zoomLevel" in n&&this.$Map().getLevel()<n.zoomLevel){h=n.zoomLevel
}if(n.setCenter){k=j.marker.point.toInner()
}if(h!==null||k!==null){this.$Map().zoom(h,k,{useEffect:false})
}}if(m){this.reqSetCctvPlayerMessages(j.data);
this.setCCTVFrame(j.data);
if(!("panorama" in n)){this.showFloatCCTVLayer(j.marker)
}}else{if(!("panorama" in n)){if(!this._infoWindowAdded){this._createInfoWindow(j.marker.point,new e.map.Size(0,j.marker.getOffset().height))
}else{this._infoWindow.redraw({point:j.marker.point});
this._infoWindow.open()
}this.$InfoWindowAction().setInfoWindow(this._infoWindow)
}this.reqSetCctvPlayerMessages(j.data);
this.setCCTVFrame(j.data);
this.setCctvPlayerMessages()
}if("panorama" in n){this._prevBtnEl.hide();
this._nextBtnEl.hide()
}else{this._prevBtnEl.show();
this._nextBtnEl.show()
}if(j){this.currentType=f;
this.currentID=i;
this.setCCTVTitle(j.data.cctv_name,j.data.start_section_name);
this.$Map().selectMarker(j.marker)
}this._el.css("zoom",1);
setTimeout(function(){o._el.css("zoom","")
},0);
this.cctvLayerOpened=true
},_getMarkerInfo:function(f){return{point:f.point||f.getPoint(),offset:f.offset||f.getOffset(),size:f.size||f.getSize()}
},_getMoveWindowCallback:function(f){return function(g){g&&this.$Map().clickMarker(g)
}.bind(this,f)
},showFloatCCTVLayer:function(f){this.$InfoWindowAction().moveInfoWindow(this._getMarkerInfo(f),this._getMoveWindowCallback(f))
},moveWindowToStaticContainer:function(g){var g=c(g),h=g.offset(),f=this.$Map().getMapOffset({x:h.left,y:h.top});
g.data("prev-offset-left",g.css("left"));
g.data("prev-offset-top",g.css("top"));
g.css("left",f.x).css("top",f.y);
this.$Map().getStaticContainer().appendChild(g[0])
},moveWindowToInfoPane:function(f){this.$Map().getInfowindowPane().getElement().appendChild(f)
},hideCCTVPhantom:function(){},reqSetCctvPlayerMessages:function(f){this.cctvMessage.offerer=f.info_offerer;
this.cctvMessage.no=f.channel
},setCctvPlayerMessages:function(){var g=this.cctvMessage.offerer;
var f=this.cctvMessage.no;
if(!g){return
}this.cctvMessage.offerer=null;
this.cctvPlayer.setChannelId(f);
e.map.LogPV("overlaycctv")
},_onClickPlayerCloseEvent:function(){if(this.cctvPlayer){this.cctvPlayer.stopVideo()
}this._infoWindow&&this._infoWindow.close();
this.$Bridge().closeInfoWindowDone()
},enableButton:function(h,f){var g=this["_"+h+"BtnEl"];
if(f){g.removeClass("spm_spotb_"+h+"_dimmed").css("cursor","pointer").attr("href","#")
}else{g.addClass("spm_spotb_"+h+"_dimmed").css("cursor","default").removeAttr("href")
}this[h+"BtnUse"]=!!f
},MarkerEventHandler:{_onDraw:function(g,i,h){var f=true;
g.draw(i.left,i.top);
if(h<this.MINIMUM_CCTV_ZOOM_LEVEL){f=false
}g[f?"show":"hide"]()
},_onLoad:function(f){switch(f.group){case"cctv":e.mapcore.Util.mapSetClass(f.icon.$value(),"nclicks",["map*u.cctvicon"]);
break;
case"cctvGroup":e.mapcore.Util.mapSetClass(f.icon.$value(),"nclicks",["map*u.cctvgicon"]);
break;
case"cctvRoute":e.mapcore.Util.mapSetClass(f.icon.$value(),"nclicks",["mpd*p.cctv"]);
break;
default:return
}e.mapcore.Util.mapSetClass(f.icon.$value(),"no_context_title")
}},DomEventHandler:{_onClickPrevBtn:function(h){h.preventDefault();
if(!this.prevBtnUse){return
}var k=this.currentType;
var g=this.currentID;
if(!g){return
}var i=this.$AreaMarkerManager().getAreaMarkerData(k)[g];
if(!i){return
}var j=i.data;
if("preCctv" in j){if(j.preCctv){var f=j.preCctv.uid;
this._showCCTVLayer(k,f)
}}else{this.$TrafficDao().requestPreNextCctv(j.cctv_grp_no,j.cctv_grp_in_seq,"pre",this._onResponseSearchNextPrevCctv.bind(this,"pre"))
}},_onClickNextBtn:function(g){g.preventDefault();
if(!this.nextBtnUse){return
}var k=this.currentType;
var f=this.currentID;
if(!f){return
}var i=this.$AreaMarkerManager().getAreaMarkerData(k)[f];
if(!i){return
}var j=i.data;
if("nextCctv" in j){if(j.nextCctv){var h=j.nextCctv.uid;
this._showCCTVLayer(k,h)
}}else{this.$TrafficDao().requestPreNextCctv(j.cctv_grp_no,j.cctv_grp_in_seq,"next",this._onResponseSearchNextPrevCctv.bind(this,"next"))
}},_onClickCloseBtn:function(f){f.preventDefault();
if(this.cctvPlayer){this.cctvPlayer.stopVideo()
}this._infoWindow&&this._infoWindow.close();
this.$Bridge().closeInfoWindowDone()
}}})
}(nhn,iron,jQuery));
iron.ns("nhn.map.service").CctvMarker=iron.Class({inherit:nhn.map.service.Marker},{initialize:function(b){var a,d;
switch(b.group){case"cctv":case"cctvRoute":a="CCTV";
d="map*u.cctvicon";
break;
case"cctvGroup":a="CCTVGROUP";
d="map*u.cctvgicon";
break
}var c=new nhn.map.service.MarkerSpriteIcon(a,d),b={id:b.id,title:b.title,point:b.point,zIndex:15,smallIcon:new nhn.map.service.SmallIcon("CCTV")};
nhn.map.service.Marker.apply(this,[c,b])
},toPrint:function(){var b=this.getIcon(),a=b.size,c=b.offset;
return{type:"Sprite",url:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_other.png",size:{width:a.getWidth(),height:a.getHeight()},spriteSize:{marginX:a.getWidth(),marginY:a.getHeight()},offset:{width:c.getWidth(),height:c.getHeight()},spriteOffsets:"0,1"}
}});
(function(e,a,c,d){var b=a.ns("nhn.map.service");
b.Accident=a.Class({inherit:e.map.Dispatcher},{name:"Accident",markerIcon:{url:"https://ssl.pstatic.net/static/maps2/icons/pins_trouble.png",size:{width:24,height:21},offset:{width:12,height:10},spriteSize:{width:500,height:21,marginX:31,marginY:21},imgOrder:0},markerSmallIcon:{url:"https://ssl.pstatic.net/static/maps2/icons/pins_ds_new.gif",className:"sym_map3",iconWidth:21,iconHeight:21,spriteWidth:500,spriteHeight:400,xOffset:0,yOffset:8},initialize:function(){this._prepareDOM();
this._bindEvent()
},_prepareDOM:function(){this._el=c(e.mapservice.TemplateRepos.get("accident_layer").process());
this._closeBtnEl=this._el.find("._close");
this._roadNameEl=this._el.find("h3._roadName");
this._accidentBodyEl=this._el.find("span._accidentType");
this._accidentTypeEl=this._el.find("p._typeName");
this._accidentDescEl=this._el.find("p._desc");
this._startTimeEl=this._el.find("dd._start_time");
this._endTimeEl=this._el.find("dd._end_time");
this._modifiedTimeEl=this._el.find("p.tpga_date");
this._offerer=this._el.find("p.txt_org")
},_bindEvent:function(){this._closeBtnEl.on("click",function(f){f.preventDefault();
this.hideAccidentLayer()
}.bind(this))
},_listenMap:function(){this.$Map().attach({unload_traffic_pane:function(){this.$AreaMarkerManager().clearAreaMarker("accident");
this.hideAccidentLayer()
}.bind(this)})
},_listenBridge:function(){this.$Bridge().attach({close_infowindow_done:function(){if(this.accidentLayerOpened){this.$Map().unselectMarker();
this.accidentLayerOpened=false
}}.bind(this)})
},_createInfoWindow:function(f,g){if(this._infoWindow){return false
}this._infoWindow=new e.map.service.InfoWindow({point:f,offset:g,content:this._el});
this.$Map().getInfowindowPane().addOverlay(this._infoWindow);
this._infoWindowAdded=true
},addAccidentMarker:function(h,g){var f=h.type_index;
if(f==3){f=4
}else{if(f==4){f=3
}}this.markerIcon.imgOrder=f;
this.markerSmallIcon.xOffset=parseInt(f,10);
h.id=h.uid;
g.icon=this.markerIcon;
g.title=h.sub_type;
g.zIndex=15;
g.smallIcon=this.markerSmallIcon;
g.typeIndex=h.type_index;
g.onLoad=function(i){e.mapcore.Util.mapSetClass(i.icon.$value(),"nclicks",["map*u.construction"])
};
this.$AreaMarkerManager().addAreaMarker("accident",h,{},g)
},showAccidentLayer:function(h){var i=this.$AreaMarkerManager().getAreaMarkerData("accident");
if(!i){return
}var k=i[h];
var m=k.data;
this._accidentBodyEl.attr("class","_accidentType spm spm_tpga_icon"+(parseInt(m.type_index,10)+1));
this._roadNameEl.html(m.road_name||"");
this._roadNameEl.attr("title",m.road_name);
this._accidentBodyEl.html(m.sub_type||"");
this._accidentTypeEl.html(m.sub_type||"");
this._accidentDescEl.html(m.restrict_sub_type||"");
var l=m.start_time.replace(/(\d{2}:\d{2})(:\d{2})\s*$/,function(o,n){return n
});
l=l.split("-").join(".");
var g=m.end_time.replace(/(\d{2}:\d{2})(:\d{2})\s*$/,function(o,n){return n
});
g=g.split("-").join(".");
this._startTimeEl.html(l||"");
this._endTimeEl.html(g||"");
this._modifiedTimeEl.html("최종 수정 "+m.last_modified_time);
var f="";
var j=m.offerer_name?m.offerer_name+" 제공":null;
switch(m.offerer){case"utis":f="경찰청(UTIS) 제공";
break;
case"gits":f="경기도 교통정보센터 제공";
break;
case"tbs":f="tbs 교통방송 제공";
break;
case"its_cheonan":f="천안시교통정보센터 제공";
break
}this._offerer.html(j||f);
if(!this._infoWindowAdded){this._createInfoWindow(k.marker.point,new e.map.Size(0,k.marker.getOffset().height))
}else{this._infoWindow.setSize();
this._infoWindow.redraw({point:k.marker.point});
this._infoWindow.open()
}this.accidentLayerOpened=true;
e.map.LogPV("rtm")
},hideAccidentLayer:function(){if(this.accidentLayerOpened){this._infoWindow&&this._infoWindow.close();
this.$Bridge().closeInfoWindowDone()
}}})
}(nhn,iron,jQuery));
iron.ns("nhn.map.service").AccidentMarker=iron.Class({inherit:nhn.map.service.Marker},{initialize:function(b){var a=["ACCIDENT",b.typeIndex].join("_"),c=new nhn.map.service.MarkerSpriteIcon(a,"map*u.construction"),b={id:b.id,title:b.title,point:b.point,zIndex:15,smallIcon:new nhn.map.service.SmallIcon(a)};
nhn.map.service.Marker.apply(this,[c,b])
},toPrint:function(){var c=this.getIcon(),b=c.size,d=c.offset,a=c.getSpriteOffset();
return{type:"Sprite",url:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_other.png",size:{width:b.getWidth(),height:b.getHeight()},spriteSize:{marginX:b.getWidth(),marginY:b.getHeight()},offset:{width:d.getWidth(),height:d.getHeight()},spriteOffsets:(a.getLeft())+","+a.getTop()}
}});
(function(){var a={DEFAULT:"default",CADASTRAL:"cadastral",BICYCLE:"bicycle",WEATHER:"weather",TRAFFIC:"traffic"};
iron.ns("nhn.map.service").Legend=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._mapListener={AFTER_MSG_APP_READY:this._onAfterMsgAppReady.bind(this),load_traffic_pane:this._activateType.bind(this,a.TRAFFIC),unload_traffic_pane:this._deactivateType.bind(this,a.TRAFFIC),load_bicycle_pane:this._activateType.bind(this,a.BICYCLE),unload_bicycle_pane:this._deactivateType.bind(this,a.BICYCLE),load_cadastral_pane:this._activateType.bind(this,a.CADASTRAL),unload_cadastral_pane:this._deactivateType.bind(this,a.CADASTRAL)};
this._weatherServiceListener={select:this._onWeatherTypeSelect.bind(this),deselect:this._onWeatherTypeDeselect.bind(this)};
this._setDOM();
this._bindEvent();
this._stack=[]
},_setDOM:function(){this._template=nhn.mapservice.TemplateRepos.get("legend_wrap");
this._element=$(this._template.process({}));
this._legend=this._element.siblings(".ly_legend");
this._hintLayer=this._element.siblings(".ly_legend_help");
this._legendBtn=$(this.$rpanel().getLegendBtn());
this._legendBtn.append(this._element)
},_listenMap:function(){this.$MapConnector().attach(this._mapListener)
},_onAfterMsgAppReady:function(){this.$MapConnector().addIgnoreClass("ly_legend")
},_listenWeatherService:function(){this.$WeatherService().attach(this._weatherServiceListener)
},_bindEvent:function(){this._element.on("click",".spm_llh_close",this._onClickHintLayerClose.bind(this)).on("click","a._legend_close",this.hide.bind(this)).on("click","a._legend_section",this._onClickEntry.bind(this))
},_unbindEvent:function(){this._element.off()
},_onClickHintLayerClose:function(b){b.preventDefault();
this._hintLayer.hide()
},_onClickEntry:function(c){c.preventDefault();
var b=$(c.target);
this._setCase(b.data("case"))
},_setCase:function(c){if(!this._element){return this
}if(c===16){var b="case"+c+"_v2 case"+c
}else{var b="case"+c
}this._legend.attr("class","ly_legend "+b);
this._focusTab(c);
return this
},_focusTab:function(b){this._legend.find("h5 a[data-case="+b+"]").focus()
},changeTo:function(b){var c;
switch(b){case a.DEFAULT:c=11;
break;
case a.CADASTRAL:c=21;
break;
case a.BICYCLE:c=31;
break;
case a.WEATHER:c=41;
break;
case a.TRAFFIC:c=51;
break;
default:c=11
}this._setCase(c);
return this
},_saveType:function(b){if(!b){return
}this._removeType(b);
this._stack.push(b)
},_loadType:function(){return this._stack.pop()
},_removeType:function(c){var b=this._stack.indexOf(c);
if(b>-1){this._stack.splice(b,1);
return true
}else{return false
}},show:function(){if(this._legend.is(":visible")){return this
}this.changeTo(this._currentType);
this._legend.show();
this._cancelShowingHintLayer();
this.dispatch($.Event("show"));
this._isLegendShow=true;
return this
},hide:function(){if(!this._legend.is(":visible")){return this
}this._legend.hide();
this.dispatch($.Event("hide"));
this._isLegendShow=false;
return this
},getElement:function(){return this._element?this._element[0]:undefined
},_activateType:function(b){this._wasHintLayerShown||this._showHintLayer();
if(this._currentType!=b){this._saveType(this._currentType)
}this._currentType=b
},_deactivateType:function(b){if(this._currentType!=b){this._removeType(b)
}else{this._currentType=this._loadType()
}},_showHintLayer:function(){this._wasHintLayerShown=true;
this._hintLayer.show();
this._hintLayerTimer=window.setTimeout(function(){this._hintLayer.hide();
delete this._hintLayerTimer
}.bind(this),5000)
},_cancelShowingHintLayer:function(){if(this._hintLayerTimer){window.clearTimeout(this._hintLayerTimer);
this._hintLayer.hide()
}},getVisible:function(){return this._legend&&this._legend.is(":visible")
},isActivateLegend:function(){return this._isLegendShow
},_onWeatherTypeSelect:function(){this._activateType(a.WEATHER)
},_onWeatherTypeDeselect:function(){if(this.$WeatherService().getSelectedWeatherTypes().length===0){this._deactivateType(a.WEATHER)
}}})
}());
nhn.mapservice.TemplateRepos.add({legend_wrap:function(_d_){var p=[];
with(_d_){p.push('<div class="ly_legend_help" style="display:none">  <span class="spm spm_llh_tip">tip</span>  <p><strong>지도범례</strong>를 클릭 하시면 범례<br>정보를 확인하실 수 있습니다.</p>  <a href="#" class="spm spm_llh_close">tip 닫기</a>  <span class="spm spm_arrow_down"></span> </div> <div class="ly_legend case11" style="display:none">  <h3 class="ly_legend_title"><span class="blind">지도범례 레이어</span></h3>  <p class="blind">지도범례 레이어는 시각적인 요소이므로 이용에 불편함을 겪으실수도 있습니다.</p>  <!-- [D] : 닫기버튼 동작 -->  <a href="#" title="지도 범례 레이어 닫기" class="lyl_close">지도 범례 레이어 닫기</a>  <div class="fifth traffic">   <h4 class="title5"><a href="#" data-case="51" class="_legend_section nclicks(leg.traffic)">교통</a></h4>  </div>  <div class="first default">   <h4 class="title1"><a href="#" data-case="11" class="_legend_section nclicks(leg.normal)">일반</a></h4>   <ul class="sub">    <li class="df1"><a href="#" data-case="11" class="_legend_section nclicks(leg*n.group)">경계</a></li>    <li class="df2"><a href="#" data-case="12" class="_legend_section nclicks(leg*n.group)">도로</a></li>    <li class="df3"><a href="#" data-case="13" class="_legend_section nclicks(leg*n.group)">교통</a></li>    <li class="df4"><a href="#" data-case="14" class="_legend_section nclicks(leg*n.group)">등산</a></li>    <li class="df5"><a href="#" data-case="15" class="_legend_section nclicks(leg*n.group)">아파트</a></li>    <li class="df6"><a href="#" data-case="16" class="_legend_section nclicks(leg*n.group)">실내지도</a></li>   </ul>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=1107" class="more nclicks(leg*n.more)" target="_blank"><span class="blind">일반지도 범례</span> 더보기</a>  </div>  <div class="second cadastral">   <h4 class="title2"><a href="#" data-case="21" class="_legend_section nclicks(leg.cadastral)">지적편집도</a></h4>   <ul class="sub">    <li class="cs1"><a href="#" data-case="21" class="_legend_section nclicks(leg*c.group)">지번·경계</a></li>    <li class="cs2"><a href="#" data-case="22" class="_legend_section nclicks(leg*c.group)">개발</a></li>    <li class="cs3"><a href="#" data-case="23" class="_legend_section nclicks(leg*c.group)">용도</a></li>    <li class="cs4"><a href="#" data-case="24" class="_legend_section nclicks(leg*c.group)">도로철로</a></li>    <li class="cs5"><a href="#" data-case="25" class="_legend_section nclicks(leg*c.group)">국토계획</a></li>   </ul>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2144" class="more nclicks(leg*c.more)" target="_blank"><span class="blind">지적편집도 범례</span> 더보기</a>  </div>  <div class="third bicycle">   <h4 class="title3"><a href="#" data-case="31" class="_legend_section nclicks(leg.bike)">자전거</a></h4>   <ul class="sub">    <li class="bc1"><a href="#" data-case="31" class="_legend_section nclicks(leg*b.group)">도로안내</a></li>    <li class="bc2"><a href="#" data-case="32" class="_legend_section nclicks(leg*b.group)">진입로</a></li>    <li class="bc3"><a href="#" data-case="33" class="_legend_section nclicks(leg*b.group)">편의시설</a></li>   </ul>  </div>  <div class="fourth weather">   <h4 class="title4"><a href="#" data-case="41" class="_legend_section nclicks(leg.weather)">날씨</a></h4>   <ul class="sub">    <li class="wt1"><a href="#" data-case="41" class="_legend_section nclicks(leg*w.group)">기상</a></li>    <li class="wt2"><a href="#" data-case="42" class="_legend_section nclicks(leg*w.group)">풍속</a></li>    <li class="wt3"><a href="#" data-case="43" class="_legend_section nclicks(leg*w.group)">풍향</a></li>    <li class="wt4"><a href="#" data-case="44" class="_legend_section nclicks(leg*w.group)">방사선수치</a></li>   </ul>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2145" class="more nclicks(leg*w.more)" target="_blank"><span class="blind">날씨 범례</span> 더보기</a>  </div>  <div class="lyl_content"></div>  <!-- [D] : 닫기버튼 동작 -->  <a href="#" title="지도범례 레이어 닫기" class="spm spm_legend_close _legend_close nclicks(leg.close)">지도범례 레이어 닫기</a> </div>')
}return p.join("")
}});
nhn.map.service.InsertMapZoomSlider=iron.Class({inherit:nhn.map.Dispatcher},{name:"nhn.map.service.InsertMapZoomSlider",SLIDER_START_POS:0,SLIDER_END_POS:91,SLIDER_UNIT_SIZE:7,_MIN_ZOOM_LEVEL:0,_MAX_ZOOM_LEVEL:0,oTimer:null,welDescLayer:null,_nZoomLevel:null,_elContainer:null,_elZoomInCtrl:null,_elZoomOutCtrl:null,_elCtrlZoom:null,_elSliderCtrl:null,_sliderBGImage:null,_slider:null,_sliderHelper:null,bZoomInOutButtonClicked:false,initialize:function(){this.oTimer=new nhn.Timer();
this._beforeZoomLevel=this.SLIDER_START_POS;
this._attachBridgeEvent()
},_attachBridgeEvent:function(){this.$bridge().attach("ON_MAP_FIRST_INITIALIZE_DONE",function(){this._showSliderDescription("fourteenLevel")
}.bind(this));
this.$bridge().attach("BEFORE_SET_ZOOM_LEVEL",function(a){this._beforeZoomLevel=a.nLevel
}.bind(this));
this.$bridge().attach("ON_RESTORE_ZOOM_SLIDER",function(a){this._hideSliderDescription();
this._activeSliderBarImg();
this._setZoomLevel(a.nLevel,true)
}.bind(this));
this.$bridge().attach("ON_SET_ZOOM_LEVEL",function(a){this._setZoomLevel(a.nLevel,true)
}.bind(this));
this.$bridge().attach("AFTER_SET_ZOOM_LEVEL",function(b){var a=b.nLevel;
if(this._needShowFourteenLayer(a)){this._showSliderDescription("fourteenLevel")
}}.bind(this));
this.$bridge().attach("REFRESH_ZOOM_SLIDER",function(){this._setZoomLevel(this._nZoomLevel,true)
}.bind(this));
this.$bridge().attach("ON_MSG_APP_READY",function(a){this._elContainer=a.container;
this._addZoomController(this._elContainer);
this._bindZoomControllerEvent();
this.$bridge().addIgnoreClass("ctrl_zoomlevel");
this._MIN_ZOOM_LEVEL=this.$bridge().getMinZoomLevel();
this._MAX_ZOOM_LEVEL=this.$bridge().getMaxZoomLevel()
}.bind(this))
},_addZoomController:function(a){var b=nhn.mapservice.TemplateRepos.get("insertMapController").process();
this.$bridge().addToStaticContainer(b);
var c=$(a);
this._elCtrlZoom=$(".mapctrl_zoom",c);
this._elSliderCtrl=$(".ctrl_slider",c);
$(".ctrl_zoomlevel").css("height","105px");
this._elZoomOutCtrl=$(".ctrl_zoomout",this._elCtrlZoom);
this._elZoomInCtrl=$(".ctrl_zoomin",this._elCtrlZoom);
this._sliderBGImage=$(".ctrl_scale_off",this._elCtrlZoom);
this._sliderHelper=this.$helper()
},_bindZoomControllerEvent:function(){this._slider=this._getSliderCOM();
this._slider.getDragArea().attach("handledown",function(b){b.event.stop()
});
this._elZoomInCtrl.click(this._zoomIn.bind(this));
this._elZoomOutCtrl.click(this._zoomOut.bind(this));
this._elCtrlZoom.mouseenter(this._showHelper.bind(this)).mouseleave(this._hideHelper.bind(this));
var a=this;
setTimeout(function(){a._setZoomLevel(a.$bridge().getZoomLevel(),true)
},0)
},_showHelper:function(a){var b=a.currentElement;
var c=a.element;
if(b==c){this.$helper().showZoomSliderHelper()
}else{while(c&&c.parentNode){c=c.parentNode;
if(b==c){this.$helper().showZoomSliderHelper();
return
}}}},_hideHelper:function(){this.$helper().hideZoomSliderHelper()
},_zoomIn:function(){var a=this._getSliderZoomLevel();
this.bZoomInOutButtonClicked=true;
this._setZoomLevel(a+1,false)
},_zoomOut:function(){var a=this._getSliderZoomLevel();
this.bZoomInOutButtonClicked=true;
if(a>this._MIN_ZOOM_LEVEL){this._setZoomLevel(a-1,false)
}},_getSliderZoomLevel:function(){var a=this._slider.positions();
return this._calculateZoomLevel(a)
},_setZoomLevel:function(c,a){if(c===undefined||c<this.MIN_ZOOM_LEVEL||this.MAX_ZOOM_LEVEL<c){return false
}if(!this._slider){return
}this._nZoomLevel=c;
var b=this._calculateZoomPos(c);
this._slider.positions(0,b,!a);
if(a&&c<this.MAX_ZOOM_LEVEL){this._hideSliderDescription()
}this._setSliderBGImage(b)
},_setSliderBGImage:function(a){this._sliderBGImage.css("height",a+"px")
},_hideSliderDescription:function(){if(!this.welDescLayer){return
}this.welDescLayer.css("display","none");
this.oTimer.abort();
this.welDescLayer=null
},_showSliderDescription:function(c){var b={traffic:"mes_traffic",search:"mes_round"};
var a=$(".mes",this._elCtrlZoom);
a.css("display","none");
this.welDescLayer=$("."+b[c],this._elContainer);
if(!this.welDescLayer){return
}this.welDescLayer.css("display","block");
this.oTimer.abort();
this.oTimer.start(this._hideSliderDescription.bind(this),3000)
},_needShowFourteenLayer:function(c){var b=14;
var a=this.$bridge().isActiveMapType("vector");
return this._elCtrlZoom&&c==b&&this._beforeZoomLevel!=c&&a
},_calculateZoomPos:function(a){if(a===undefined||a<this.MIN_ZOOM_LEVEL||this.MAX_ZOOM_LEVEL<a){return false
}return this.SLIDER_END_POS-((a-1)*this.SLIDER_UNIT_SIZE)
},_calculateZoomLevel:function(a){return(this.SLIDER_END_POS-a)/this.SLIDER_UNIT_SIZE+1
},_getSliderCOM:function(){var a=this;
var b=$(".ctrl_zoomlevel",this._elCtrlZoom)[0];
return new nhn.Slider(b,{vertical:true}).attach({beforechange:function(c){if(c.pos<a.SLIDER_START_POS){c.pos=a.SLIDER_START_POS;
return
}if(c.pos>a.SLIDER_END_POS){c.pos=a.SLIDER_END_POS;
return
}c.pos=a._snapPos(c.pos)
},change:function(){var c=this.positions(),d=a._calculateZoomLevel(c);
a._activeSliderBarImg();
a._hideSliderDescription();
if(a.bZoomInOutButtonClicked){a.$bridge().delayZoom(d,null,{useEffect:true,relativeLevel:false,centerMark:true});
a.bZoomInOutButtonClicked=false
}else{a.$bridge().delayZoom(d,null,{useEffect:false})
}a._setSliderBGImage(a._slider.positions())
}})
},_activeSliderBarImg:function(){this._elSliderCtrl.addClass("on")
},_deactiveSliderBarImg:function(){this._elSliderCtrl.removeClass("on")
},_snapPos:function(b){b=b-this.SLIDER_START_POS;
var a=b%this.SLIDER_UNIT_SIZE;
b=(a<(this.SLIDER_UNIT_SIZE/2))?b=b-a:b=b+(this.SLIDER_UNIT_SIZE-a);
return b+this.SLIDER_START_POS
}});
nhn.map.service.InsertMapZoomSliderHelper=iron.Class({inherit:nhn.map.Dispatcher},{name:"nhn.map.service.InsertMapZoomSliderHelper",_helper:null,initialize:function(){this._welHelper=$(".mapctrl_legend");
this._welEstate=$(".lg",this._welHelper)
},showZoomSliderHelper:function(){this._welHelper.show();
var c=["satellite","hybrid"];
var a=true;
for(var b=0;
b<c.length;
b++){if(this.$bridge().isActiveMapType(c[b])){a=false;
break
}}this._welEstate.css("display",(a)?"block":"none")
},hideZoomSliderHelper:function(){this._welHelper.hide()
}});
(function(f,a,d,e){var c=d.extend({},f.map.weather.Const.WEATHER_TYPE),b={NORTH_KOREA:[124.019911,42.99527,130.51321,37.659996],INCHEON:[125.690716,37.687529,126.853252,36.915887],SEOUL_KYOUNGKI:[126.7654746,38.1834428,127.8062689,36.9604682],JEJU:[126.1631646,33.5666617,126.9448023,33.1940984],JEOLLA:[126.1667903,36.157058,127.916409,34.2894075],GANGWON:[127.1017059,38.6097027,129.4009515,37.0338716],GYEONGSANG:[127.5739401,37.1422076,129.6170151,34.7636795],ULLEUNG:[130.6524052,37.6950155,131.0788897,37.2844933],CHUNGCHEONG:[125.5567761,37.2537581,128.6557701,35.9625217]};
a.ns("nhn.map.service").CopyRight=a.Class({inherit:f.map.Dispatcher},{initialize:function(){this._tpl=f.mapservice.TemplateRepos.get("copy_right");
this._prepareDOM();
this._bindEvent()
},_prepareDOM:function(){this._el=d(this._tpl.process());
this._weatherProvider=this._el.find(".weather");
this._radiationProvider=this._el.find(".radiation");
this._sateLastUpdate=this._el.find(".satellite13");
this._satelliteProvider=this._el.find(".satellite");
this._defaultProvider=this._el.find("._default");
this._trafficProvider=this._el.find(".traffic");
this._cctvProvider=this._el.find(".cctv");
this._cadastralProvider=this._el.find(".cadastral");
this._cadastralLimit=this._el.find(".limit");
this._ngii=this._el.find(".ngii");
this._molit=this._el.find("._molit");
this._gits=this._el.find("._gits")
},_bindEvent:function(){this._el.on("click",".limit",this._onClickLimit.bind(this))
},_onClickLimit:function(g){g.preventDefault();
window.open("/help/cadastral.html","limit","toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=382,height=269,left=100,top=100").focus()
},_listenMap:function(){this.$map().attach({MSG_APP_READY:this._onMapReady.bind(this),LOAD_SATELLITE_SUBTYPE:this._onLoadSatelliteSubtype.bind(this),UNLOAD_SATELLITE_SUBTYPE:this._onUnloadSatelliteSubtype.bind(this),REGISTER_MAP_TYPE_DONE:this._onRegisterMapTypeDone.bind(this),UNREGISTER_MAP_TYPE_DONE:this._onUnregisterMapTypeDone.bind(this),CHANGE_MAP_DONE:this._onChangeMapDone.bind(this)})
},_onMapReady:function(){d(this.$map().getStaticContainer()).append(this._el);
this._checkMapState()
},_checkMapState:function(){var g=this.$map().getActiveMapType();
g.forEach(this._showMapProvider.bind(this))
},_showMapProvider:function(g){switch(g){case"satellite":this._satelliteProvider.show();
break;
case"traffic":this._molit.show();
this._trafficProvider.show();
break;
case"cctv":this._molit.show();
this._cctvProvider.show();
this._gits.show();
break;
case"cadastral":this._cadastralProvider.show();
this.showCadastralResponsibilityLink();
break
}this._makeCopyRightTextByOrder()
},_hideMapProvider:function(g){switch(g){case"satellite":this._satelliteProvider.hide();
this._sateLastUpdate.hide();
break;
case"traffic":this._trafficProvider.hide();
this._molit.hide();
break;
case"cctv":this._cctvProvider.hide();
this._molit.hide();
this._gits.hide();
break;
case"cadastral":this._cadastralProvider.hide();
this.hideCadastralResponsibilityLink();
this._molit.hide();
break
}if(this._trafficProvider.is(":visible")||this._cctvProvider.is(":visible")){this._molit.show()
}this._makeCopyRightTextByOrder()
},showCadastralResponsibilityLink:function(){this._cadastralLimit.show()
},hideCadastralResponsibilityLink:function(){this._cadastralLimit.hide()
},_makeCopyRightTextByOrder:function(){var g=this._el.find("span:visible");
g.each(function(h){var i=d(this).text().replace(/^\//,"");
if(h===0||d(this).hasClass("_default")){d(this).text(i)
}else{d(this).text("/"+i)
}})
},_onRegisterMapTypeDone:function(h){var g=h.mapType;
this._showMapProvider(g);
["vector","satellite"].indexOf(g)>-1&&this._checkDynamicCopyRight()
},_onUnregisterMapTypeDone:function(h){var g=h.mapType;
this._hideMapProvider(g)
},_onChangeMapDone:function(){this._checkDynamicCopyRight()
},_checkDynamicCopyRight:function(){var g=this.$map().getActiveMapType().indexOf("satellite")>-1;
if(this._isIntersect(b.NORTH_KOREA)){this._defaultProvider.text("© NAVER Corp./OpenStreetMap")
}else{this._defaultProvider.text("© NAVER Corp.")
}if(g&&this._isIntersect(b.INCHEON)){this._satelliteProvider.text("/SPOT/인천광역시")
}else{this._satelliteProvider.text("/SPOT")
}if(g&&(this._isIntersect(b.SEOUL_KYOUNGKI)||this._isIntersect(b.JEJU)||this._isIntersect(b.JEOLLA)||this._isIntersect(b.GANGWON)||this._isIntersect(b.GYEONGSANG)||this._isIntersect(b.CHUNGCHEONG)||this._isIntersect(b.ULLEUNG))){this._ngii.show()
}else{this._ngii.hide()
}},_isIntersect:function(i){var j={l:i[0],t:i[1],r:i[2],b:i[3]},h=this.$map().getBoundAsLatLng(),g={l:h[0],t:h[1],r:h[2],b:h[3]};
if(j.l>g.r){return false
}if(j.t<g.b){return false
}if(j.r<g.l){return false
}if(j.b>g.t){return false
}return true
},setSatelliteSubtypeLastUpdateTime:function(g,h){this._sateLastUpdate.empty();
if(g){this._sateLastUpdate.html("/"+g+" "+h)
}},_onLoadSatelliteSubtype:function(){this._sateLastUpdate.show();
this._makeCopyRightTextByOrder()
},_onUnloadSatelliteSubtype:function(){this._sateLastUpdate.hide()
},_listenWeatherService:function(){this.$WeatherService().attach({select:this._onSelectWeather.bind(this),deselect:this._onDeselectWeather.bind(this)})
},_onSelectWeather:function(h){var g=h.weatherType;
this._showWeatherProvider(g);
this._makeCopyRightTextByOrder()
},_onDeselectWeather:function(h){var g=h.weatherType;
this._hideWeatherProvider(g);
this._makeCopyRightTextByOrder()
},_showWeatherProvider:function(g){if(g===c.RADIATION){this._radiationProvider.show()
}else{this._weatherProvider.show()
}},_hideWeatherProvider:function(i){var h=this.$WeatherService().getSelectedWeatherTypes(),g=h.filter(function(j){return j!==c.RADIATION
});
if(i===c.RADIATION){this._radiationProvider.hide()
}if(g.length===0){this._weatherProvider.hide()
}}})
}(nhn,iron,jQuery));
(function(){nhn.map.service.SearchPrint=iron.Class({initialize:function(){},fillSearchData:function(a){var d={boundary:$.extend({},a.boundary),type:a.type};
this._copy(a,d,"site");
this._copy(a,d,"address");
this._copy(a,d,"region");
this._copy(a,d,"bus");
var e={name:"search",data:d};
var c=this.$Search().getSelectedItem();
if(c){e.selected=c
}var b=this.oApp.getMenuState();
if(b){e.menu=b
}return e
},fillHomeData:function(a){var d={name:"search",data:{type:a.type}};
this._copy(a,d.data,"region");
var c=this.$Search().getSelectedItem();
if(c){d.selected=c
}var b=this.oApp.getMenuState();
if(b){d.menu=b
}return d
},fillMarkerData:function(j){var a=this.$SearchMapView().getSearchMarkerList();
var h=[];
var c,g,e;
var f,d;
if(j.type=="BUS"){a=this.fixMarkerIndexes(a)
}for(var b=0;
b<a.length;
b++){c=a[b];
e=c.type.toLowerCase();
if(e=="id"){e="site";
c.type="SITE";
g=c.id.replace("ID_","");
c.id=c.type+"_"+g
}else{g=c.id.replace(c.type+"_","")
}if(e=="region"){f=j[e];
h.push(new nhn.map.service.ReplaceMarkerForPrint(c,f))
}else{if(!j[e]){f=j[j.type.toLowerCase()].list
}else{f=j[e].list
}d=this._getIndexOfMarker(f,g);
if(d!==-1){h.push(new nhn.map.service.ReplaceMarkerForPrint(c,f[d]))
}}}return h
},_getIndexOfMarker:function(b,c){for(var a=0;
a<b.length;
a++){if(b[a].id==c){return a
}}return -1
},_copy:function(b,c,a){if(b[a]){c[a]=$.extend({},b[a],true)
}},fixMarkerIndexes:function(d){if(!d){return
}var c=new Array(d.length);
for(var b=0,a=d.length;
b<a;
b++){c[d[b]._icon._iconType.split("_")[1]]=d[b]
}return c
}})
})();
nhn.map.service.ReplaceMarkerForExport=iron.Class({initialize:function(){},_getIconType:function(d,b){var a;
for(var c=0;
c<d.length;
c++){a=d[c];
if(a.url==b){return a
}}return null
},replace:function(d,h){var g=[];
var f,a,b;
for(var c=0;
c<d.length;
c++){f=d[c];
a=this._getIconType(g,f.url);
if(!f.point){continue
}if(f.point&&isNaN(f.point.x)||isNaN(f.point.y)){continue
}if(a==null){a={url:f.url,mode:f.type,width:(f.size?f.size.width:f.width),height:(f.size?f.size.height:f.height),offsetX:f.offset.width,offsetY:f.offset.height,zIndex:f.zIndex,spriteOffsets:"",points:""};
if(f._markerType){var e=f.SPRITE_SIZE_BY_TYPE[f._markerType];
if(e){a.width=e.marginX
}}g.push(a)
}a.spriteOffsets+=(f.order+",0 ");
a.points+=(f.point.x+","+f.point.y+" ")
}return g
},_getIndoorDimmedIcon:function(b,d){var c=b.options,a=null;
return a
}});
(function(){nhn.map.service.ReplaceMarkerForPrint=iron.Class({MARKER_LARGE_ICON_URL:{bus_station:"https://ssl.pstatic.net/static/maps3/icons/one_sp_bus.png",pl:"https://ssl.pstatic.net/static/maps2/icons/pin_g2.png",pr:"https://ssl.pstatic.net/static/maps2/icons/pins_dd.png",s:"https://ssl.pstatic.net/static/maps2/icons/pins_dd.png",k:"https://ssl.pstatic.net/static/maps2/icons/pins_dd.png",kp:"https://ssl.pstatic.net/static/maps2/icons/pins_dd.png",p:"https://ssl.pstatic.net/static/maps2/icons/pins_dd.png",line:"https://ssl.pstatic.net/static/maps2/icons/pins_dl.png",error:"https://ssl.pstatic.net/static/maps2/icons/pins_dn.png",traffic:"https://ssl.pstatic.net/static/maps3/icons/one_sp_around.png",spot:"https://ssl.pstatic.net/static/maps3/icons/one_sp_spot.png",dev:"https://ssl.pstatic.net/static/maps2/icons/pins_spot_poly.png"},MARKER_ICON_SIZE:{bus_station:{width:24,height:35},pl:{width:28,height:36},pr:{width:24,height:34},s:{width:24,height:34},k:{width:24,height:34},kp:{width:24,height:34},p:{width:24,height:34},line:{width:24,height:34},error:{width:24,height:34},traffic:{width:18,height:23},spot:{width:24,height:35},dev:{width:24,height:35}},MARKER_ICON_OFFSET:{bus_station:{width:12,height:35},pl:{width:14,height:36},pr:{width:12,height:34},s:{width:12,height:34},k:{width:12,height:34},kp:{width:12,height:34},p:{width:12,height:34},line:{width:12,height:34},error:{width:12,height:34},traffic:{width:9,height:23},spot:{width:12,height:35},dev:{width:12,height:35}},SPRITE_SIZE_BY_TYPE:{bus_station:{width:300,height:35,marginX:29,marginY:35},pl:{width:500,height:34,marginX:31,marginY:34},pr:{width:500,height:34,marginX:31,marginY:34},s:{width:500,height:34,marginX:31,marginY:34},k:{width:500,height:34,marginX:31,marginY:34},kp:{width:500,height:34,marginX:31,marginY:34},p:{width:500,height:34,marginX:31,marginY:34},line:{width:500,height:34,marginX:31,marginY:34},error:{width:500,height:34,marginX:31,marginY:34},traffic:{width:600,height:23,marginX:23,marginY:23},spot:{width:200,height:35,marginX:29,marginY:35},dev:{width:300,height:35,marginX:29,marginY:35}},initialize:function(c,e){this.HIGHLIGHT_ZINDEX=c.HIGHLIGHT_ZINDEX;
this.PREFIX_ID="MARKER_";
this.group=c.group;
if(!c.getId){this.id=c.id;
this.order=c.order
}else{this.id=c.getId();
var f=c.getIcon().getSpriteOffset();
this.order=(Math.abs(f.getLeft())/29)
}this.siForcedSelection=false;
var d={};
if(e&&e.poiInfo){d=$.extend(d,e.poiInfo)
}this.options=$.extend(d,c.options);
var b=this.options.point.toInner();
this.point={x:b.x,y:b.y};
this.title=c.title;
this.zIndex=c.zIndex;
this._markerType="";
if(this.id.indexOf("BUS")!=-1){if(!!e.mainStation){return
}this._markerType="bus_station"
}else{if(this.id.indexOf("ADDRESS")!=-1){this._markerType="spot"
}else{if(this.id.indexOf("REGION")!=-1){this._markerType="spot"
}else{if(this.id.indexOf("traffic")!=-1){this._markerType="traffic";
this.order=14
}else{if(a(e)){this._markerType="dev"
}else{if(e.MarkerType=="ID"){this._markerType="spot"
}else{this._markerType=this.id.match(/_((\D+)(\d+))(_\d+)?$/)[2];
if(e.posExact=="0"){this._markerType="error"
}else{if(e.poiInfo.hasRoad){this._markerType="line"
}}}}}}}}this.url=this.MARKER_LARGE_ICON_URL[this._markerType];
this.size=this.MARKER_ICON_SIZE[this._markerType];
this.offset=this.MARKER_ICON_OFFSET[this._markerType];
this.type="Sprite"
},getType:function(){return this.type
},toPrint:function(){return{type:this.type,offset:this.offset,size:this.size,imgOrder:this.order,spriteClass:"sp_pin",spriteSize:this.SPRITE_SIZE_BY_TYPE[this._markerType],url:this.url,zIndex:this.zIndex}
}});
function a(d){var c=d.poiInfo,b=false;
if(c&&c.hasPolygon&&c.polygon.shapeKey.typeName==="DVLP"){b=true
}return b
}}());
(function(){iron.ns("nhn.map.service").TransportMarkerPool=iron.Class({initialize:function(){this._markerList={};
this._markerTypeList=new nhn.map.transport.MarkerIdListByType()
},put:function(d,a,b){var c=this._markerTypeList.put(b,d);
if(!c){return false
}if(this.containId(d)){this._markerList[d].refCount+=1
}else{this._markerList[d]={marker:a,refCount:1}
}return true
},get:function(a){if(this.containId(a)){return this._markerList[a].marker
}return null
},getByType:function(f){var c=[];
if(!!f){var b=this._markerTypeList.getIdListByType(f),d,e;
for(d=0,e=b.length;
d<e;
d+=1){var g=b[d];
var a=this.get(g);
c.push(a)
}}return c
},containId:function(a){return this._markerList.hasOwnProperty(a)
},clear:function(e){var b=[],a,g;
if(!!e){var f=this._markerTypeList.getIdListByType(e),c,d;
f=$.extend(true,[],f);
for(c=0,d=f.length;
c<d;
c+=1){g=f[c];
a=this.remove(g,e);
if(!!a){b.push(a)
}}this._markerTypeList.remove(e)
}else{for(g in this._markerList){if(this._markerList.hasOwnProperty(g)){b.push(this.get(g))
}}this._markerTypeList.clear();
this._markerList={}
}return b
},remove:function(c,b){if(this.containId(c)&&this._markerTypeList.remove(b,c)){var a=this._markerList[c];
a.refCount-=1;
if(a.refCount<1){delete this._markerList[c];
return a.marker
}}return null
},size:function(){return Object.keys(this._markerList).length
}});
iron.ns("nhn.map.transport").MarkerIdListByType=iron.Class({initialize:function(){this._markerIdList={}
},put:function(a,c){var b=false;
if(!this.contain(a)){this._markerIdList[a]=[]
}if(!this._containId(a,c)){this._markerIdList[a].push(c);
b=true
}return b
},getIdListByType:function(a){return this._markerIdList[a]||[]
},remove:function(c,e){var b=false;
if(typeof e=="string"){var d=this.getIdListByType(c);
for(var a=d.length-1;
a>=0;
a--){if(d[a]===e){d.splice(a,1);
b=true;
break
}}}else{delete this._markerIdList[c];
b=true
}return b
},contain:function(a){return this._markerIdList.hasOwnProperty(a)
},clear:function(){this._markerIdList={}
},_containId:function(a,c){var b=this.getIdListByType(a);
return b.indexOf(c)>-1
}})
})();iron.ns("nhn.map.overlay").MarkerLabelLayer=iron.Class({name:"nhn.mapservice.MarkerLabelLayer",DEFAULT_ZINDEX:500,DEFAULT_TEMPLATE_TYPE:"NORMAL",_wrapperLayerEl:null,_labelLayerEl:null,_MAX_LABEL_SIZE:275,_LABEL_MARGIN_PIXEL:0,_NORMAL_LABEL_MARGIN_PIXEL:26,_templateType:null,_isVisible:false,initialize:function(){this._templateType=this.DEFAULT_TEMPLATE_TYPE;
this.dupLayerTemplate=nhn.mapservice.TemplateRepos.get("marker_duplicate_label");
this.normalTemplate=nhn.mapservice.TemplateRepos.get("marker_normal_label");
this.indoorTemplate=nhn.mapservice.TemplateRepos.get("marker_indoor_label");
this.trafficTemplate=this.normalTemplate
},$ON_MSG_APP_READY:function(){this._prepareDom()
},$BEFORE_SET_ZOOM_LEVEL:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},$ON_REDRAW:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},$ON_OPEN_INFOWINDOW:function(){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},$ON_OPEN_MARKER_LABEL_LAYER:function(a,b){if(this._isVisible||a.noLabel){return
}if(b&&b.type){this._templateType=b.type
}if(a.getType()==="ADPIN"){this._templateType="ADPIN";
b.id=a.id
}this._showByMarker(a,b)
},$ON_CLOSE_MARKER_LABEL_LAYER:function(){this.closeLabelLayer()
},closeLabelLayer:function(){if(!this._isVisible){return
}this._isVisible=false;
this._wrapperLayerEl.hide()
},_prepareDom:function(){this._wrapperLayerEl=$("<div>");
this._wrapperLayerEl.css({position:"absolute",top:"0px",left:"0px",margin:"0px",padding:"0px 0px 0px 0px",border:"0px",overflow:"visible",zIndex:this.DEFAULT_ZINDEX});
this._wrapperLayerEl.hide();
this._labelLayerEl=$("<div>");
this._labelLayerEl.css({position:"relative",top:"0px",left:"0px",margin:"0px",padding:"0px",border:"0px",overflow:"visible"});
this._wrapperLayerEl.disableSelection();
this._labelLayerEl.disableSelection();
$(this.oApp.getInfoPane()).append(this._wrapperLayerEl);
this._wrapperLayerEl.append(this._labelLayerEl)
},_showByMarker:function(b,d){var e=null;
if(b.group==="cctv"||b.group==="cctvRoute"||b.group==="cctvGroup"){e="lay_cctv_label"
}var c={x:b.getBound().right,y:b.getBound().top},a={width:b.getWidth?b.getWidth():b.getIcon().size.width,height:b.getHeight?b.getHeight():b.getIcon().size.height};
if(d&&!("data" in d)){d.data=b.title
}d.htmlTitle=b.options.htmlTitle||false;
if(b.getLabelOffset){d.labelOffset=b.getLabelOffset()
}this._show(d,c,a)
},$ON_OPEN_LABEL_LAYER:function(c,b,a){this.openLabelLayer(c,b,a)
},openLabelLayer:function(c,b,a){if(this._isVisible){return
}if(c&&c.type){this._templateType=c.type
}this._show(c,b,a)
},_show:function(o,f,l,i){var d=this._wrapperLayerEl,n=this._labelLayerEl;
if(typeof o.data=="string"){o.data=o.data.replace("&lt;","<").replace("&gt;",">")
}var g=this.getLabelHTML(this._templateType,{title:o.data,htmlTitle:o.htmlTitle||false,id:o.id}),b=$(g);
b=(b instanceof Array)?$(b[0]):b;
if(o.type==="NORMAL"){$("span",b).disableSelection()
}n.empty();
n.append(b);
d.show();
d.css("visibility","hidden");
i&&b.addClass(i);
var m=0,a=0,e=this._MAX_LABEL_SIZE;
if(this._templateType==="DUP"){m=b.height();
a=b.width();
e=a
}else{if(this._templateType==="ADPIN"){m=b.outerHeight();
a=b.outerWidth();
e=a
}else{if(this._templateType==="INDOOR"){m=b.outerHeight();
a=b.outerWidth();
e=a
}else{var k=b.find(".tly_middle");
m=b.height();
a=k.width()+this._LABEL_MARGIN_PIXEL;
e=a;
b.css("width",e+"px")
}}}var h=f.x,c=f.y,j=(h+this.oApp.getDragOffset().x+l.width)>(this.oApp.getMapSize().width-e);
h=j?(h-e-l.width):h;
if(this._templateType==="NORMAL"&&j){h-=this._NORMAL_LABEL_MARGIN_PIXEL
}if(this._templateType==="TRAFFIC"){c=c-l.height/2
}if(!j&&this._templateType!=="DUP"){b.removeClass("tly_point_right").addClass("tly_point_right")
}else{if(j&&this._templateType==="ADPIN"){b.find(".spmh_spot_arrow2").addClass("spmh_spot_arrow2_rgt")
}else{if(j&&this._templateType==="INDOOR"){b.removeClass("tly_impo_v2_left").addClass("tly_impo_v2_right")
}}}if(this._templateType==="ADPIN"){c+=l.height/2-m/2;
if(j){h-=l.width
}else{h+=l.width
}}h=j?h-1:h+1;
c=c-1;
if(o.labelOffset){if(j){h-=o.labelOffset.width
}else{h+=o.labelOffset.width
}c+=o.labelOffset.height
}d.css({left:h+"px",top:c+"px"});
if(this._templateType==="ADPIN"&&b.find(".sh_h").length===0){this.$AdPin().updateAdPinLabelHTML(o.id,this._wrapperLayerEl)
}else{d.css("visibility","visible");
d.show()
}this._isVisible=true
},getLabelHTML:function(a,d){var c=d.htmlTitle||d.title,b;
switch(a){case"DUP":c=d.title;
b=this.dupLayerTemplate.process({numOfMarker:c});
break;
case"NORMAL":b=this.normalTemplate.process({labelContent:c});
break;
case"INDOOR":b=this.indoorTemplate.process({labelContent:c});
break;
case"TRAFFIC":b=this.trafficTemplate.process({labelContent:c});
break;
case"ADPIN":b=this.$AdPin().getAdPinLabelHTML(d.id);
break;
default:b=""+c;
break
}return b
},$ON_DUPLICATION_MARKER_MOUSE_OVER_DONE:function(b,a){this.oApp.exec("OPEN_MARKER_LABEL_LAYER",[b,{type:"DUP",data:a.length}])
},$ON_TRAFFIC_MARKER_MOUSE_OVER_DONE:function(a){var b;
if(a.options.location){b=a.options.location+"["+a.title+"]"
}else{b=a.title
}this.oApp.exec("OPEN_MARKER_LABEL_LAYER",[a,{type:"TRAFFIC",data:b}])
},$ON_NORMAR_MARKER_FOCUS_DONE:function(a){if(!a.options.showLabel||(!a.title&&!a.options.title)){return
}var b=a.options.type,c;
switch(b){case"car":case"bicycle":case"walk":c=a.options.tplData.guide;
break;
default:c=(a.title||a.options.title);
break
}this.oApp.exec("OPEN_MARKER_LABEL_LAYER",[a,{type:"NORMAL",data:c.replace(/<[^<]+?>/g,"")}])
},$ON_REGION_RESULT_MOUSE_OVER_DONE:function(a){this.oApp.exec("OPEN_MARKER_LABEL_LAYER",[a,{type:"NORMAL",data:a.title}])
}});
iron.ns("nhn.map.overlay").MarkerDupLayer=iron.Class({name:"nhn.mapservice.MarkerDupLayer",point:null,offset:null,templateClass:"lay_int_duppin",DEFAULT_ZINDEX:999,dupLayer:null,visible:false,selectedMarker:null,initialize:function(){this.itemTemplate=nhn.mapcore.Template.get(['<li id="_item:{%=id%}" class="ellipsis _nmap_item">','{% if( type == "Sprite" ) { %}','<span class="{%=className%}">','<img width="{%=spriteWidth%}" height="{%=spriteHeight%}" alt="{%=title%}" title="{%=title%}"','style="top:{%=(-1*iconHeight*yOffset)%}px; left: {%=(-1*xOffset*iconWidth)%}px;" src="{%=url%}"/>',"</span>",'{% } else if( type == "Text" ) { %}','<span class="{%=className%}">','<img src="{%=url%}" width="{%=spriteWidth%}" height="{%=spriteHeight%}" alt="{%=title%}" title="{%=title%}">',"<span>{%=text%}</span>","</span>","{% } else { %}",'<span class="{%=className%}">','<img src="{%=url%}" width="{%=iconWidth%}" height="{%=iconHeight%}" alt="{%=title%}" title="{%=title%}">',"</span>","{% } %}",'<a href="#">{%=title%}</a>',"</li>"].join(""));
this.layerTemplate=['<div class="'+this.templateClass+'" style="position:relative;display:block">','<div class="scroll">','<ul class="_nmap_group">',"</ul>",'<div class="mask"></div>',"</div>","</div>"].join("\n")
},$ON_MSG_APP_READY:function(){this.oApp.exec("ADD_IGNORE_CLASS",["lay_int_duppin"]);
this.oApp.exec("ADD_IGNORE_CLASS",["nmap_duplayer"]);
this.oApp.exec("REMOVE_IGNORE_CLASS",["nmap_duplayer","MOUSEDOWN"]);
this.dupLayer=nhn.mapservice.Util.createDefaultLayer({className:"nmap_duplayer",style:{padding:"0px 0px 0px 0px",display:"none",zIndex:this.DEFAULT_ZINDEX}});
this.dupLayer.appendChild(jindo.$(this.layerTemplate));
this.oApp.getInfoPane().appendChild(this.dupLayer);
this.itemGroup=jindo.$Element(jindo.$$.getSingle("._nmap_group",this.dupLayer));
jindo.$Fn(this._selectOtherMarker,this).attach(this.itemGroup,"click");
this.oApp.exec("ADD_APP_PROPERTY",["isMarkerDupLayer",jindo.$Fn(this.isMarkerDupLayer,this).bind()])
},$ON_OPEN_MARKER_DUP_LAYER:function(c,b,g){var f=(this._isVisible()&&this.selectedMarker.id==b.id);
if(!f){this._hide();
this.itemGroup.empty();
this.contentLayer=jindo.$$.getSingle("."+this.templateClass,this.dupDiv);
if(this.contentLayer!=null){var a,e;
for(var d=g.length-1;
d>-1;
d--){a=g[d];
e=this.itemTemplate.process(a.toDupLayerInfo());
this.itemGroup.append(jindo.$(e))
}this.$AdPin().updateDupLayer(this.itemGroup);
this._show(b,c,g);
this.selectedMarker=b
}}},$ON_CLOSE_MARKER_DUP_LAYER:function(){if(this._isVisible()){this.oApp.exec("UNSELECT_MARKER");
this._hide()
}},$ON_MOUSEDOWN_EVENT_DONE:function(d){var c=d.element;
var b=jindo.$Element(c);
var e=this.oApp.isMarker(c);
var a=b.isChildOf(this.dupLayer);
if(!(e||a||b.hasClass("nmap_duplayer"))){this.oApp.exec("CLOSE_MARKER_DUP_LAYER")
}c=null
},$ON_REDRAW:function(){this.oApp.exec("CLOSE_MARKER_DUP_LAYER")
},$ON_OPEN_INFOWINDOW:function(){this.oApp.exec("CLOSE_MARKER_DUP_LAYER")
},$ON_ZOOM:function(){this.oApp.exec("CLOSE_MARKER_DUP_LAYER")
},isMarkerDupLayer:function(a){return jindo.$Element(a).isChildOf(this.dupLayer)
},_selectOtherMarker:function(a){var c=this._isMarkerClicked(a.element);
if(c){a.stop();
var b=c.id.replace("_item:","");
this.oApp.exec("CLOSE_MARKER_DUP_LAYER",[]);
this.oApp.exec("CLICK_MARKER",[b,a])
}},_isMarkerClicked:function(b){if(b.tagName.toLowerCase()=="a"){var a="_nmap_item";
var c=jindo.$$.test(b,"."+a)?b:jindo.$$.getSingle("! ."+a,b);
if(c&&this.itemGroup.isParentOf(c)){return c
}}return null
},_show:function(h,c,f){var l={width:h.getWidth(),height:h.getHeight()};
var g={x:c.right,y:c.top};
var j=this.oApp.getDragOffset();
var k=this.oApp.getMapSize();
var e=jindo.$Element(this.contentLayer);
var a=jindo.$Element(this.dupLayer);
f.length>=8?e.addClass("lay_int_duppin_scroll"):e.mapRemoveClass("lay_int_duppin_scroll");
a.css("visibility","hidden");
a.show();
var b=this.contentLayer.clientWidth;
var m=this.contentLayer.clientHeight;
var i=g.x+j.x;
var d=g.y+j.y;
i=(i>k.width-b)?(i-b-j.x-l.width-10):i-j.x;
d=(d+m>k.height)?(d-m-j.y):d-j.y;
a.css({left:i+"px",top:d+"px"});
this.visible=true;
a.css("visibility","visible")
},_hide:function(){this.dupLayer.style.display="none";
this.visible=false
},_isVisible:function(){return this.visible
}});
iron.ns("nhn.map.overlay").MarkerManager=iron.Class({name:"nhn.mapservice.MarkerManager",HIGHLIGHT_ZINDEX:900,MARKER_CLASSNAME:"_nmap_marker",markerList:null,selectedMarker:null,overlayPane:null,initialize:function(){this._UID=iron.guid();
this.markerList=new nhn.map.overlay.MarkerList();
nhn.mapservice.TextIcon.prototype.divHolder=document.createElement("div");
nhn.mapservice.SpriteIcon.prototype.divHolder=document.createElement("div")
},$BEFORE_MSG_APP_READY:function(){var a=nhn.mapcore.Util.bind;
this.oApp.exec("ADD_APP_PROPERTY",["getAllMarkers",a(this,this.getAllMarkers)]);
this.oApp.exec("ADD_APP_PROPERTY",["getMarkerById",a(this,this.getMarkerById)]);
this.oApp.exec("ADD_APP_PROPERTY",["getMarkerByPos",a(this,this.getMarkerByPos)]);
this.oApp.exec("ADD_APP_PROPERTY",["getSelectedMarker",a(this,this.getSelectedMarker)]);
this.oApp.exec("ADD_APP_PROPERTY",["isMarker",a(this,this.isMarker)]);
this.oApp.exec("ADD_IGNORE_CLASS",["_nmap_marker","DBLCLICK"]);
this.overlayPane=this.oApp.getOverlayPane();
this._wfhOnMouseOver=this._onMouseOverHandler.bind(this);
this._wfhOnMouseOut=this._onMouseOutHandler.bind(this);
this._wfhOnMouseDown=this._onMouseDownHandler.bind(this);
this._wfhOnClick=this._onClickHandler.bind(this);
this._fSetEventHandler(this.overlayPane)
},_fSetEventHandler:function(a){$(a).on("mouseover."+this._UID,this._wfhOnMouseOver).on("mouseout."+this._UID,this._wfhOnMouseOut).on("mousedown."+this._UID,this._wfhOnMouseDown).on("click."+this._UID,this._wfhOnClick)
},_fCutEventHandler:function(a){$(a).off("."+this._UID)
},$ON_DETACH_MARKER_EVENT_ACTION:function(){this._fCutEventHandler(this.overlayPane)
},getMarkerById:function(a){return this.markerList.get(a)
},getAllMarkers:function(){var a=[];
this.markerList.forEach(function(b){a.push(b)
});
return a
},getMarkerByPos:function(a){return this.markerList.filter(function(b){if(b.point.equals(a)){return true
}else{return false
}},this)
},getSelectedMarker:function(){return this.selectedMarker
},isMarker:function(b){var a=$(b).closest("._nmap_marker");
return a.length?a[0]:null
},_hasClass:function(b,a){if((" "+b.className+" ").indexOf(" "+a+" ")>-1){return b
}else{return null
}},$BEFORE_ADD_MARKER:function(){if(arguments.length===0){throw"no arguments for ADD_MARKER"
}},$ON_ADD_NORMAL_MARKER:function(a,c,b){this.oApp.exec("ADD_MARKER",[a,c,b,"Normal"])
},$ON_ADD_SPRITE_MARKER:function(a,c,b){this.oApp.exec("ADD_MARKER",[a,c,b,"Sprite"])
},$ON_ADD_TEXT_MARKER:function(a,c,b){this.oApp.exec("ADD_MARKER",[a,c,b,"Text"])
},$ON_ADD_POLY_MARKER:function(a,c,b){this.oApp.exec("ADD_MARKER",[a,c,b,"Poly"])
},$ON_ADD_MARKER:function(a,d,c,f){if(a instanceof nhn.mapcore.Inner===false){a=nhn.mapcore.CoordConverter.inputFilter(a)
}var e=nhn.map.overlay[f+"MarkerPool"];
var b=e.getInstance(a,d);
this.oApp.getPane("nmap_overlay_pane").addOverlay(b);
this._drawMarker(b);
this.markerList.add(b.id,b);
if(c){c.marker=b
}},$ON_ADD_CREATED_MARKER:function(a){this.oApp.getPane("nmap_overlay_pane").addOverlay(a);
this._drawMarker(a);
this.markerList.add(a.getId(),a);
if(a instanceof nhn.map.service.PolyMarker){this.oApp.exec("ADD_CREATED_POLY_MARKER_DONE",[a])
}},$ON_REMOVE_MARKER:function(a){this.oApp.exec("CLOSE_MARKER_DUP_LAYER");
if(arguments.length===0){this.oApp.exec("CLEAR_OVERLAY");
this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
}else{if(a!=null){this.oApp.exec("REMOVE_OVERLAY",[a]);
this.oApp.exec("CLOSE_MARKER_LABEL_LAYER");
if(a.id){if(this.selectedMarker&&a.id==this.selectedMarker.id){this.selectedMarker=null
}this.markerList.remove(a.id)
}else{this.markerList.empty()
}var a=a.marker||a;
if(nhn.map.overlay[a.getType()+"MarkerPool"]){nhn.map.overlay[a.getType()+"MarkerPool"].release(a)
}}}},$ON_REMOVE_CREATED_MARKER:function(a){return this.oApp.exec("REMOVE_MARKER",[a])
},$ON_REDRAW_MARKER:function(a){this._drawMarker(a)
},$ON_REDRAW:function(){var a=this;
this.markerList.forEach(function(b){a.oApp.exec("REDRAW_MARKER",[b])
})
},_drawMarker:function(b){var c=b.getOffset();
var d=this.oApp.getPointToOffset(b.point);
var a={left:d.x-c.width,top:d.y-c.height};
if(b.onDraw){b.onDraw(b,a,this.oApp.getZoomLevel())
}$("span",b.getElement()).disableSelection()
},$BEFORE_CLEAR_OVERLAY:function(){if(this.markerList.length()===0){return false
}},$ON_CLEAR_OVERLAY:function(){var b=this.markerList;
var a=this;
b.forEach(function(c){a.oApp.exec("REMOVE_MARKER",[c])
});
if(this.selectedMarker){this.selectedMarker.unselect()
}},_getMarker:function(a){if(typeof(a)=="string"){return this.getMarkerById(a)
}return a
},$ON_CLICK_MARKER:function(b,c){var a=(c)?c.$value():null;
this.clickMarker(b,$.Event(a))
},$ON_SELECT_MARKER:function(b){var a=this._getMarker(b);
if(this.selectedMarker){this.selectedMarker.unselect()
}this.selectedMarker=a;
if(this.selectedMarker){this.selectedMarker.select()
}this.oApp.exec("SELECT_MARKER_DONE",[b])
},_ignoreEvent:function(a){var b=this._getMarker(a);
if(!b){return false
}var d=/IGNORE_(?:CLICK)/;
var c=b.getElement().className;
return d.test(c)?true:false
},_activeStreet:function(b){var d=NModules.has("panorama")&&this.oApp.getContextInstance("panorama_service").isStreetActivated();
var c=this._getMarker(b);
if(!c){return false
}var a=c.group.indexOf("Panorama")>-1?false:true;
return(d&&a)
},_isPinSelectMode:function(){return this.oApp.isPinSelectMode&&this.oApp.isPinSelectMode()
},clickMarker:function(b,c){if(this._ignoreEvent(b)||(c&&this._isPinSelectMode())){return
}var a=this._getMarker(b);
if(!a){return false
}a.onClick&&a.onClick(a,c)
},highlightMarker:function(b){var a=this._getMarker(b);
if(this.selectedMarker){this.selectedMarker.unselect()
}this.selectedMarker=a;
if(this.selectedMarker){this.selectedMarker.select()
}},$ON_UNSELECT_MARKER:function(){if(this.selectedMarker){this.selectedMarker.unselect();
this.selectedMarker=null
}this.oApp.exec("UNSELECT_MARKER_DONE",[])
},_focusMarker:function(b){var a=$.Deferred();
b.focus&&b.focus();
$.when(b.onMouseOver()).then(function(){a.resolve(b)
}.bind(this));
return a.promise()
},_blurMarker:function(a){a.blur&&a.blur();
a.onMouseOut&&a.onMouseOut(a);
this.oApp.exec("CLOSE_MARKER_LABEL_LAYER")
},$ON_FOCUS_MARKER:function(b){var a=this._getMarker(b);
if(a){this._focusMarker(a).done(function(c){this.oApp.exec("NORMAR_MARKER_FOCUS_DONE",[c])
}.bind(this))
}},$ON_BLUR_MARKER:function(b){var a=this._getMarker(b);
if(a&&(this.selectedMarker==null||a.id!=this.selectedMarker.id)){this._blurMarker(a)
}},_onMouseDownHandler:function(a){if(this.isMarker(a.target)){this.downPosition={x:a.pageX,y:a.pageY}
}},_isClickEvent:function(c){if(!this.downPosition){return false
}var b=c.pageX-this.downPosition.x;
var a=c.pageY-this.downPosition.y;
this.downPosition=null;
return(Math.sqrt(b*b+a*a)<5)
},_getState:function(){if(this.oApp.getCreateState){return this.oApp.getCreateState()
}else{return this.oApp.getContextInstance("state").getState()
}},_onClickHandler:function(l){var o=this.isMarker(l.target);
if(!o){return
}var a=this._getState(),n=false;
switch(a){case nhn.map.Const.STATE_NONE:case nhn.map.Const.STATE_THEME_EDIT:case nhn.map.Const.STATE_STREET_VIEW:n=true;
break
}if(this._isClickEvent(l)&&(n)||this._getState&&!this._hasClass(l.target,"btn_favorite_del")){this.oApp.exec("CLOSE_MARKER_LABEL_LAYER");
this.oApp.exec("CLOSE_MARKER_DUP_LAYER");
var k=this.getMarkerById(o.id);
var b=this._getDuplicatedMarkers(k);
var j=[],f=[],c=[];
for(var h=0;
h<b.length;
++h){var m=b[h].getType();
if(m==="ADPIN"){j.push(b[h])
}else{if(m==="AD"){f.push(b[h])
}else{c.push(b[h])
}}}b=c.concat(j).concat(f);
if(o.id.indexOf("INSIDE")==-1&&b.length>1){var d=[];
for(var h=0;
h<b.length;
++h){var g=b[h];
if(g.visible()){d.push(g)
}}this.oApp.exec("OPEN_MARKER_DUP_LAYER",[k.getBound(),k,d])
}else{this.clickMarker(k,l)
}}},_focusPolygonMarker:function(a){var b=a.options._polygonParam;
if(!b){return
}var c=this.oApp.getContextInstance("search_polygon_service");
c.focusPolygon(b)
},_blurPolygonMarker:function(a){var b=a.options._polygonParam;
if(!b){return
}var c=this.oApp.getContextInstance("search_polygon_service");
c.blurPolygon(b)
},_onMouseOutHandler:function(d){var b=this.isMarker(d.target);
var c=this.isMarker(d.relatedTarget);
if(b&&(!c||(b!==c))){var a=this.getMarkerById(b.id);
if(a){this._blurMarker(a);
this._blurPolygonMarker(a)
}}},_onMouseOverHandler:function(c){var b=this.isMarker(c.target);
if(b){var a=this.getMarkerById(b.id);
this._focusMarker(a).done(function(d){var e=this._getDuplicatedMarkers(d);
if(e.length>1){this.oApp.exec("DUPLICATION_MARKER_MOUSE_OVER_DONE",[d,e])
}else{if(d){var f=d&&(d.group=="accident"||d.group=="cctv"||d.group=="cctvGroup"||d.group=="cctvRoute");
if(f===true){this.oApp.exec("TRAFFIC_MARKER_MOUSE_OVER_DONE",[d])
}else{this.oApp.exec("NORMAR_MARKER_FOCUS_DONE",[d])
}}}this._focusPolygonMarker(d)
}.bind(this))
}},$ON_NORMAL_MARKER_MOUSE_OVER_DONE:function(a){this.oApp.exec("FOCUS_MARKER",[a])
},_getDuplicatedMarkers:function(a){var d=[];
if(!a){return d
}var c=$(this.overlayPane).find("."+this.MARKER_CLASSNAME),b=c.filter(function(f){var e=c[f];
return this.markerList.get(e.id)
}.bind(this));
b.each(function(e,g){var f=this.markerList.get(g.id);
if(!f.uncoverable&&$(g).is(":visible")&&(!f.isEnabled||f.isEnabled())&&a.isCovering(g)){d.push(f)
}}.bind(this));
return d
}});
iron.ns("nhn.map.overlay").MarkerList=function(){var b=0;
var a={};
this.add=function(c,d){a[c]=d;
b++;
this.rearrange()
};
this.remove=function(c){delete a[c];
b--
};
this.get=function(c){return(typeof(a[c])!="undefined"?a[c]:null)
};
this.filter=function(e){var c=[],f;
for(var d in a){f=a[d];
if(e(f)){c.push(f)
}}return c
};
this.empty=function(){for(var c in a){delete a[c];
b--
}};
this.forEach=function(d){for(var c in a){d(a[c],c)
}};
this.length=function(){return b
};
this.rearrange=function(){if(this._rearrangeTimer){window.clearTimeout(this._rearrangeTimer);
delete this._rearrangeTimer
}this._rearrangeTimer=window.setTimeout(function(){var c=[];
for(var d in a){c.push(a[d])
}c.sort(function(g,f){return f.point.y-g.point.y
});
var e=1;
c.forEach(function(f){if(f.type==="COUPON"){return
}if(f.isSelected&&f.isSelected()){return
}var g=f.id+"";
if(g.indexOf("DIR")!=-1){f.setGroupIndex(6000)
}if(f.setZIndex){if(!f.isEnabled||f.isEnabled()){f.setZIndex(e)
}}e++
})
},500)
}};
iron.ns("nhn.map.overlay").MarkerPool=iron.Class({initialize:function(a){this.options=a;
this._pool=[]
},isAvailable:function(){return(this._pool.length>0)
},getInstance:function(b,c){var a;
if(this.isAvailable()){a=this._pool.shift();
return a.update(b,c)
}else{return new this.options.fnCreate(b,c)
}},release:function(a){if(this._pool.length<this.options.limit){a.toInitState();
this._pool.push(a)
}else{a.clear()
}}});
iron.ns("nhn.map.overlay").NormalMarkerPool=new nhn.map.overlay.MarkerPool({fnCreate:nhn.mapservice.Marker,limit:15});
iron.ns("nhn.map.overlay").SpriteMarkerPool=new nhn.map.overlay.MarkerPool({fnCreate:nhn.mapservice.SpriteMarker,limit:30});
iron.ns("nhn.map.overlay").TextMarkerPool=new nhn.map.overlay.MarkerPool({fnCreate:nhn.mapservice.TextMarker,limit:50});
iron.ns("nhn.map.overlay").PolyMarkerPool=new nhn.map.overlay.MarkerPool({fnCreate:nhn.mapservice.PolyMarker,limit:20});
iron.ns("nhn.map.overlay").PolyMarkerManager=iron.Class({name:"nhn.mapservice.PolyMarkerManager",_ICON_PATH:"https://ssl.pstatic.net/static/maps2/icons/",_POLYMARKER_MARGIN:70,initialize:function(){this._timeStamp=+new Date();
this.polyMarkerList=new nhn.map.overlay.MarkerList();
this.hPointMarkers=jindo.$H()
},$BEFORE_MSG_APP_READY:function(){},$ON_DRAW_POLY_MARKER_LINE:function(a){this._doAddForPolyData(a)
},_doAddForPolyData:function(a){this._addPolyAdditionMarker(a);
this._drawLineIfPolyMarker(a)
},_addPolyAdditionMarker:function(e){if(!e.options||!e.options.poiInfo||e.options.poiInfo.hasRoad===false){return
}var f={};
f.group="Polygon";
var d=new nhn.mapcore.UTMK(e.options.poiInfo.road.detail.beginPoiX,e.options.poiInfo.road.detail.beginPoiY).toInner();
var c=new nhn.mapcore.UTMK(e.options.poiInfo.road.detail.destPoiX,e.options.poiInfo.road.detail.destPoiY).toInner();
f.title=e.options.poiInfo.road.detail.beginAddress;
var b=new nhn.map.service.PolyPointMarker($.extend(f,{point:d}));
this.oApp.exec("ADD_CREATED_MARKER",[b]);
f.title=e.options.poiInfo.road.detail.destAddress;
var a=new nhn.map.service.PolyPointMarker($.extend(f,{point:c}));
this.oApp.exec("ADD_CREATED_MARKER",[a]);
this.hPointMarkers.add(e.id,{beginMarker:b,destMarker:a})
},_drawLineIfPolyMarker:function(a){if(a.oPolyLines){for(var c=0;
c<a.oPolyLines.length;
c++){this.oApp.exec("ADD_DRAWING",[a.oPolyLines[c]])
}var b=this.hPointMarkers.$(a.id);
if(b){b.aPolyLines=a.oPolyLines
}a.attach({"select.polyMarkerManager":this._onSelectPolyMarker.bind(this,a),"unselect.polyMarkerManager":this._onUnselectPolyMarker.bind(this,a)});
this.polyMarkerList.add(a.id,a)
}},_onSelectPolyMarker:function(a){if(this._selectedMarker){this._unselectPolyLine(this._selectedMarker)
}this._selectedMarker=a;
this._selectPolyLine(a)
},_onUnselectPolyMarker:function(a){if(this._selectedMarker===a){this._unselectPolyLine(this._selectedMarker);
delete this._selectedMarker
}},$ON_SELECT_MARKER_DONE:function(a){var b=this._getMarker(a);
this._selectedMarker&&this._unselectPolyLine(this._selectedMarker);
this._selectedMarker=b;
this._focusAndDefocusPolyLines(b)
},$ON_FOCUS_MARKER:function(a){var b=this._getMarker(a);
if(b&&b!=this._selectedMarker){this._focusAndDefocusPolyLines(b)
}},_focusAndDefocusPolyLines:function(a){if(a&&this.hPointMarkers.$(a.id)){this.hPointMarkers.forEach(function(d,c){var b=this._getMarker(c);
if(b){if(b.id==a.id||b==this._selectedMarker){this._selectPolyLine(b)
}else{this._unselectPolyLine(b)
}}},this)
}},_selectPolyLine:function(b){var a=this.hPointMarkers.$(b.id);
if(!a){return
}a.beginMarker.changeLook("select");
a.destMarker.changeLook("select");
this._setPolyLinesStyle(b,{strokeOpacity:1})
},_unselectPolyLine:function(b){var a=this.hPointMarkers.$(b.id);
if(!a){return
}a.beginMarker.changeLook("unselect");
a.destMarker.changeLook("unselect");
this._setPolyLinesStyle(b,{strokeOpacity:0.45})
},_defaultPolyLine:function(b){var a=this.hPointMarkers.$(b.id);
if(!a){return
}a.beginMarker.changeLook("default");
a.destMarker.changeLook("default");
this._setPolyLinesStyle(b,{strokeOpacity:0.45})
},_setPolyLinesStyle:function(b,a){if(b.oPolyLines){b.oPolyLines.forEach(function(c){c.setStyle(a)
})
}},$ON_CLOSE_INFOWINDOW_DONE:function(){},$ON_BLUR_MARKER:function(a){var b=this._getMarker(a);
this._selectedMarker&&this._selectPolyLine(this._selectedMarker);
if(b){if(this._selectedMarker==b){return
}if(this._selectedMarker==null){this._blurPolyLines()
}else{this._unselectPolyLine(b)
}}},_blurPolyLines:function(){this.hPointMarkers.forEach(function(c,b){var a=this._getMarker(b);
if(a){this._defaultPolyLine(a)
}},this)
},_getMarker:function(a){if(typeof(a)=="string"){return this.oApp.getMarkerById(a)
}return a
},$BEFORE_REMOVE_MARKER:function(a){if(a!=null&&this.hPointMarkers.hasKey(a.id)){this._removeLineIfPolyMarker(a);
this._removePointMarker(a);
if(a.id){this.polyMarkerList.remove(a.id);
this.hPointMarkers.remove(a.id)
}else{this.polyMarkerList.empty();
this.hPointMarkers.empty()
}}},_removeLineIfPolyMarker:function(a){if(a.oPolyLines){for(var b=0;
b<a.oPolyLines.length;
b++){this.oApp.exec("REMOVE_DRAWING",[a.oPolyLines[b]])
}a.detach(".polyMarkerManager");
delete a.oPolyLines
}},_removePointMarker:function(a){if(this.hPointMarkers.hasKey(a.id)){var b=this.hPointMarkers.$(a.id);
this.oApp.exec("REMOVE_CREATED_MARKER",[b.beginMarker]);
this.oApp.exec("REMOVE_CREATED_MARKER",[b.destMarker])
}},$ON_CHANGE_MAP_DONE:function(){var c=this,a=+new Date(),b=false;
if(a>c._timeStamp+1000){b=true;
this._timeStamp=a
}this.polyMarkerList.forEach(function(d){b&&c._calcAndSetPointForPolyMarker(d);
c._redrawMarker(d)
})
},$ON_REDRAW_POLY_MARKER:function(b,c){var a=+new Date();
if(a>this._timeStamp+1000){this._calcAndSetPointForPolyMarker(b,c);
this._timeStamp=a
}this._redrawMarker(b)
},_redrawMarker:function(a){this.oApp.exec("REDRAW_MARKER",[a]);
if(a==this.oApp.getSelectedMarker()){this.oApp.exec("REPOSITIONING_INFO_WINDOW",[a])
}},_calcAndSetPointForPolyMarker:function(a,d){if(a&&a.oPolyLines&&a.setPointByBound){var b=this.oApp.getBoundPoint();
var c=Math.round(this._POLYMARKER_MARGIN/nhn.mapcore.mapSpec.getScale(this.oApp.getZoomLevel()));
a.setPointByBound(b,this.oApp.getCenterPoint(),c,d)
}},$ON_GATHER_MAP_DATA:function(d){var b=this._getPolyAdditionMarkers();
if(!b.length){return
}d("print",{name:"route",icons:b});
var a=this.hPointMarkers.values();
for(var c=0;
c<a.length;
c++){d("pane",nhn.mapservice.Util.getPolyLineInfoForPrintMap(a[c].aPolyLines))
}},_getPolyAdditionMarkers:function(){var b=this.hPointMarkers.values();
var a=[];
for(var c=0;
c<b.length;
c++){a.push(b[c].beginMarker);
a.push(b[c].destMarker)
}var d=jindo.$A(a);
return d.$value()
}});
nhn.mapservice.TemplateRepos.add({marker_normal_label:function(_d_){var p=[];
with(_d_){p.push('<div class="tly_point"  style="width:400px">  <span class="tly_left"></span>  <span class="tly_middle"><em class="fw">',labelContent,'</em></span>  <span class="tly_right"></span> </div>')
}return p.join("")
},marker_duplicate_label:function(_d_){var p=[];
with(_d_){p.push('<div class="nmap_lay_duppin" style="position:relative;">  <p class="nmap_lay_msg3">   <strong>',numOfMarker,"</strong>개의 결과가 있습니다.  </p> </div>")
}return p.join("")
},marker_indoor_label:function(_d_){var p=[];
with(_d_){p.push('<div class="tly_impo tly_impo_v2 tly_impo_v2_left">     <span class="tlyi_middle">         <span class="ico_pin"></span>         ',labelContent,'     </span>     <span class="tlyi_arrow"></span> </div>')
}return p.join("")
}});iron.ns("nhn.map.regionnav").RegionNavService=iron.Class({inherit:nhn.map.AbstractDAO},{name:"localIndicator",_SERVER_REGION_POSITION:"/common2/getRegionByPosition.nhn",_SERVER_LOCAL_LIST:"/common2/getBRegionByCodeAndLevel.nhn",_SERVER_TOKEN:"/common2/getToken.nhn",_updateDelay:400,initialize:function(){var a=nhn.map.Env,b=a.VARS.hmacToken||{};
this._randomKey=b.randomKey||"";
this._token=b.token||"";
this._expireTime=b.expireTime||"";
this.enableCache();
this._view=this._getColumnView();
this._bindEvent();
this._initilizeVariables()
},_initilizeVariables:function(){this._clientInfo=null;
this._allColumns="2,5,8";
this._currentBound=null;
this._wrongTerritory=false;
this._isFirstLoad=true
},_listenMenuBar:function(){this.$MenuBar().attach({before_change:this._onBeforeChangeMenu.bind(this)})
},_onBeforeChangeMenu:function(b){var a;
if(b.newMenu==="SUBWAY"){a=true;
this._view.hide()
}else{a=false;
this._view.show()
}this._view.setSubwayMenuState(a)
},_setClientInfo:function(a){this._clientInfo=a
},_loadColumnView:function(c,b){var a=this;
if(b===undefined){return false
}this._request({url:this._SERVER_LOCAL_LIST,type:"GET",dataType:"json",data:{level:c,code:b.substring(1)},success:function(d){if(!d.error){if(!d.SORTED){d=a._sortRegionData(d)
}a._loadRegionList(d,c);
a._handleException(c,b)
}else{a._showErrorAlert()
}},error:function(){a._showErrorAlert()
}})
},_processingData:function(a){this._view.setData(a.clientInfo,a.regionList)
},_prepareParameter:function(a){return{regionList:a.result.subRegion,clientInfo:this._clientInfo}
},_sortRegionData:function(a){if(!a.result||!a.result.subRegion){return a
}function b(d,c){if(d.name>c.name){return 1
}if(d.name<c.name){return -1
}return 0
}if(a.result.subRegion.length){a.result.subRegion=a.result.subRegion.sort(b)
}else{$.each(a.result.subRegion,function(c,d){d=d.sort(b)
})
}a.SORTED=true;
return a
},_getRegionInfoData:function(c,b){var a=this;
this._request({url:this._SERVER_LOCAL_LIST,type:"GET",data:{level:c,code:b},dataType:"json",success:function(d){if(!d.error){if(!d.SORTED){d=a._sortRegionData(d)
}a._processingData(a._prepareParameter(d))
}else{if(d.error){a._showErrorAlert()
}}},error:function(){a._showErrorAlert()
}})
},_fillList:function(){if(this._clientInfo){this._getRegionInfoData(this._allColumns,this._clientInfo[2])
}else{this._getRegionInfoData("2")
}},_bindEvent:function(){this._view.attach("open",this._fillList.bind(this));
this._view.attach("submit",this._submit.bind(this));
this._view.attach("select",this._selection.bind(this))
},_selection:function(a){this._loadColumnView(a.level,a.code)
},requestUpdateLocation:function(a){window.clearTimeout(this._timer);
this._timer=window.setTimeout(function(){this._moveToNewPosition(a.x,a.y)
}.bind(this),this._updateDelay)
},_loadRegionList:function(a,b){var b="level"+b;
this._view.setDataList(b,a.result.subRegion[b])
},_confirm:function(d){var e={rcode:d.data("set"),grs_x:d.data("grs_x"),grs_y:d.data("grs_y"),poly_lty:d.data("poly_lty"),poly_ltx:d.data("poly_ltx"),poly_rbx:d.data("poly_rbx"),poly_rby:d.data("poly_rby")};
var a=new nhn.mapcore.LatLng(e.poly_lty,e.poly_ltx);
var b=new nhn.mapcore.LatLng(e.poly_rby,e.poly_rbx);
a=a.toInner();
b=b.toInner();
var c=[a.x,a.y,b.x,b.y];
this.dispatch("region_selected",{bound:c,center:new nhn.mapcore.LatLng(e.grs_y,e.grs_x)})
},_submit:function(){var a=$(this._view._dicision[0]).find("a"),b=true;
if(b){this._confirm(a)
}},_updateIndicator:function(b){if(b.result){var a=b.result.region;
this._view.updateIndicator(b);
this._updateCurrentPosition(a);
this.dispatch("update",{region:b.result.region})
}else{this._setWrongRange(b)
}},_updateCurrentPosition:function(a){var b=a;
this._setClientInfo([b.doCode,b.siCode,b.dongCode])
},_showErrorAlert:function(){nhn.map.service.Alert("일시적인 오류로<br />서비스를 이용할 수 없습니다.","잠시 후 다시 시도해 주세요.")
},_setWrongRange:function(a){if(a.error.code==2){this._wrongTerritory=true;
this._view.setWrongTerritory()
}},getWrongRange:function(){if(this._wrongTerritory){return"WRONG_TERRITORY"
}else{return"RIGHT_TERRITORY"
}},_moveToNewPosition:function(b,a){this._request({url:this._SERVER_REGION_POSITION,type:"GET",data:{xPos:b,yPos:a,randomKey:this._randomKey,token:this._token,expireTime:this._expireTime},dataType:"json",success:this._checkExpireTime.bind(this,b,a)})
},_checkExpireTime:function(d,c,a){var b=a.error;
if(b){if(b.code==="HMAC_EXPIRED"){this._request({url:this._SERVER_TOKEN,type:"GET",dataType:"json",disableCache:true,success:function(f){var e=f.result;
if(e){this._token=e.token||"";
this._randomKey=e.randomKey||"";
this._expireTime=e.expireTime||"";
this._moveToNewPosition(d,c)
}}.bind(this)})
}}else{this._updateIndicator(a)
}},_handleException:function(b,a){if(b==5&&a=="d17"){this._view.selectEntireOfColumnIndexBy(1)
}},getRegionText:function(){return this.$ColumnView().getRegionText()
},getHmac:function(){return{rk:this._randomKey,ak:this._token,et:this._expireTime}
}});
(function(){iron.ns("nhn.map.regionnav").ColumnView=iron.Class({inherit:nhn.map.Dispatcher},{name:"columnView",initialize:function(){this._currentWeatherClassName="spm_ws1";
this._assignHTMLObjects();
this._initilizeVariables();
this._bindEvent()
},_assignHTMLObjects:function(){var e=nhn.map.DOMCache.getLnbWrap();
this._openButton=e.find("a.content_curr");
this._regionText=this._openButton.find("h1");
this._regionBtnText=this._openButton.find("span.spm");
this._columnView=e.find(".ly_location");
this._okButton=this._columnView.find(".spm_scheck");
this._cancelButton=this._columnView.find(".spm_scancel");
this._notSelectMessage=this._columnView.find(".not_select");
this._columnLevel2=5;
this._columnLevel3=8;
this._columns=this._columnView.find(".scrl_first > ul, .scrl_second > ul, .scrl_third > ul");
this._levelInfo={level2:"first",level5:"second",level8:"third"};
this._wRoot=$("#snb");
this._elWeatherAnchor=e.find("a.weather");
this._elWeatherImg=this._elWeatherAnchor.find("span.spm_ws");
this._elWeatherDegree=this._elWeatherAnchor.find("span.degree");
this._elWeatherDegreeText=this._elWeatherDegree.find(">em")
},_initilizeVariables:function(){this._dicision=null;
this._isViewOpened=false;
this._isUpdated=false;
this._isSubwayMenu=false;
this._scrollPos=[];
this._submitedList=[];
this._clientInfo=null
},_bindEvent:function(){this._bindEventOpenButton();
this._bindEventOKButton();
this._bindEventCancelButton();
this._bindEventListItems();
nhn.map.DOMCache.getDocument().on("click",this._onDocumentClick.bind(this))
},_onDocumentClick:function(g){var f=$(g.target);
if(f.closest("a.content_curr, .ly_location").size()===0){this.close()
}},_bindEventOpenButton:function(){this._openButton.click(function(){this._isViewOpened?this.close():this.open()
}.bind(this))
},open:function(){this.dispatch("open",{});
this._columnView.show();
this._adjustScroll();
this._isViewOpened=true;
this._regionBtnText.removeClass("spm_smore").addClass("spm_smore_close").text("현재주소 변경 레이어 닫기");
this._openButton.addClass("on")
},close:function(){this._regionBtnText.removeClass("spm_smore_close").addClass("spm_smore").text("현재주소 변경 레이어 열기");
this._openButton.removeClass("on");
this._columnView.hide();
this._isViewOpened=false
},setSubwayMenuState:function(e){this._isSubwayMenu=e
},_adjustScroll:function(){var e=this;
this._columns.find("._showAll").removeClass("on").end();
this._scrollPos.forEach(function(g,f){$(e._columns[f]).parent().scrollTop(parseInt(g,10)*20)
});
this._handleExceptionForEntire()
},_bindEventOKButton:function(){this._okButton.bind("click",$.proxy(this._okSubmit,this))
},_bindEventCancelButton:function(){this._cancelButton.bind("click",$.proxy(function(f){this.close(f)
}.bind(this),this))
},_okSubmit:function(){var e=this;
this._columns.find(".co").removeClass("co").end().find("._showAll").removeClass("on").end().find(".on").each(function(g,f){$(f).addClass("on");
e._dicision=$(f)
});
this.close();
nhn.map.LogPV(b);
if(this._dicision){this.dispatch("submit",{})
}},_saveCurrentList:function(){var e=this;
this._columns.each(function(g,f){e._submitedList[g]=$(f).clone()
})
},setData:function(h,f){var e=this;
var g=0;
this._scrollPos=[];
$.each(f,function(j,i){if(h){e.setDataList(j,i,h[g])
}else{e.setDataList(j,i)
}g++
});
e._adjustScroll()
},setDataList:function(k,g,j){this._removeList(k);
var e=this,i=[],h={level2:"mtw.depth1",level5:"mtw.depth2",level8:"mtw.depth3"};
if(k=="level5"||k=="level8"){i.push(e._getDefaultLiHTML(h[k]))
}g.forEach(function(n,m){var l="";
if(j!==undefined&&j.indexOf(n.code)===0){e._scrollPos.push(m);
l='class = "on co"'
}i.push(e._getLiHTML(l,n,h[k]))
});
var f={level2:this._columns[0],level5:this._columns[1],level8:this._columns[2]};
$(f[k]).append(i.join(""));
this._handleExceptionData(k,g,j);
$(f[k]).find("li.on a").first().focus()
},_getDefaultLiHTML:function(f){var e='class = "on _showAll"';
return(["<li ",e,'><a href="#" title="',"전체",'" class="nclicks(',f,')"><strong>',"전체",'</strong><span class="ck"></span></a></li>']).join("")
},_getLiHTML:function(e,g,f){return(["<li ",e,'><a href="#" title="',g.name,'" class="nclicks(',f,")\" data-set='d",g.code,"' data-grs_x='",g.grs_x,"' data-grs_y='",g.grs_y,"' data-poly_lty='",g.poly_lty,"' data-poly_ltx='",g.poly_ltx,"' data-poly_rbx='",g.poly_rbx,"' data-poly_rby='",g.poly_rby,"'><strong>",g.name,'</strong><span class="ck"></span></a></li>']).join("")
},_removeList:function(e){this._columnView.find(".scrl_"+this._levelInfo[e]+" > ul > li").remove();
$(this._columns[1]).scrollTop(0);
$(this._columns[2]).scrollTop(0);
this._notSelectMessage.hide();
if(e=="level5"){this._columnView.find(".scrl_third > ul > li").remove();
this._notSelectMessage.show()
}},_bindEventListItems:function(){var e=this;
this._columns.each(function(g,f){$(f).delegate("li","click",e._notifyClick.bind(e))
});
this._columns.each(function(g,f){if(g!=2){$(f).delegate("li","click",e._updateNextColumn.bind(e))
}})
},_updateNextColumn:function(f){var e={level:this._getLevel(f.currentTarget),code:$(f.currentTarget).find("a").data("set")};
this.dispatch("select",e);
this._isUpdated=true;
if(e.code===undefined){this._removeList("level8");
this._notSelectMessage.show()
}},_getLevel:function(e){if($(e).parent().parent().attr("class").indexOf("first")>=0){return this._columnLevel2
}else{if($(e).parent().parent().attr("class").indexOf("second")>=0){return this._columnLevel3
}}},updateIndicator:function(e){var h=e.result.region;
var g=e.result.weather;
if(!!g){var f="spm_ws"+g.weatherCode;
if(!this._isSubwayMenu){this._elWeatherAnchor.show()
}this._elWeatherImg.removeClass(this._currentWeatherClassName).addClass(f).attr("title",g.weatherText).text(g.weatherText).show();
this._currentWeatherClassName=f;
this._elWeatherAnchor.attr("href",g.detailURL);
this._elWeatherDegreeText.text(g.temperature);
this._elWeatherDegree.show()
}else{this._elWeatherAnchor.remove()
}if(h!==undefined){if(!this._isSubwayMenu){this._openButton.show()
}this._regionText.text(h.doName+" "+h.siName+" "+h.dongName)
}},setWrongTerritory:function(){this._elWeatherImg.hide();
this._elWeatherDegree.hide();
this._openButton.show();
this._regionText.text("대한민국")
},_notifyClick:function(f){this._removeCheck(f);
$(f.currentTarget).addClass("on");
var g=this._getLevel(f.currentTarget);
var e=c;
switch(g){case 5:e=d;
break;
case 8:e=a;
break
}},_removeCheck:function(e){$(e.currentTarget).parent().find(".on").each(function(g,f){$(f).removeClass("on")
});
e.preventDefault()
},unDelegate:function(){this._columns.each(function(f,e){$(e).undelegate()
})
},selectEntireOfColumnIndexBy:function(f){var e=$(this._columns[f]);
e.find("li._showAll a").click().mousedown()
},_handleExceptionData:function(g,f){var e={level2:this._columns[0],level5:this._columns[1],level8:this._columns[2]};
if(f[0].code=="17110"){$(e[g]).find("._showAll a").data("set","d17110").parent().addClass("on").nextAll().remove()
}},_handleExceptionForEntire:function(){var e=$("._showAll a",this._columns[1]);
if(e.length&&e.data("set")=="d17110"){e.parent().addClass("on")
}},getRegionText:function(){return this._regionText.text()
},show:function(){this._openButton.show();
this._elWeatherAnchor.show()
},hide:function(){this._openButton.hide();
this._elWeatherAnchor.hide()
}});
var d="DEPTH1",a="DEPTH2",c="DEPTH3",b="district"
}());
iron.ns("nhn.map.regionnav").MapView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._centerPixel={x:0,y:0}
},moveRegion:function(b,a){this.$map().setBound(b);
this.$map().setCenter(a)
},_checkOverThreshold:function(){var b=this.$map().getCenterPixel(),a=b.x-this._centerPixel.x,d=b.y-this._centerPixel.y,c=(Math.abs(a)>50||Math.abs(d)>50);
if(c){this._centerPixel=b
}return c
},_listenMap:function(){this.$map().attach({AFTER_MSG_APP_READY:this._onChangeMapDone.bind(this),CHANGE_MAP_DONE:this._onChangeMapDone.bind(this)})
},_onChangeMapDone:function(a){if(a.zoomed){this._centerPixel=this.$map().getCenterPixel()
}else{if(!this._checkOverThreshold()){return
}}this.dispatch("mapmoved",{center:this.$map().getCenter().toLatLng()})
}});
iron.ns("nhn.map.regionnav").MapViewController=iron.Class({_listenService:function(){this.$service().attach({region_selected:this._onRegionSelected.bind(this)})
},_onRegionSelected:function(c){var b=c.bound,a=c.center;
this.$view().moveRegion(b,a)
},_listenView:function(){this.$view().attach({mapmoved:this._onMapMoved.bind(this)})
},_onMapMoved:function(a){this.$service().requestUpdateLocation(a.center)
}});(function(){var s=iron.ns("nhn.map.toolbox"),m=s.Const;
s.ToolBox=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){this._default="distance";
this._isEnterIndoorMapSuspended=false;
this._prepareDOM();
this._bindIndoorEvent()
},_prepareDOM:function(){this._el=$(nhn.mapservice.TemplateRepos.get("map_toolbox").process());
this._inner=this._el.find("div.mc_toolsin");
var t=function(u){u.preventDefault()
};
this._btnArea=this._inner.find(".spmc_area");
this._btnDistance=this._inner.find(".spmc_distance");
this._btnReset=this._inner.find(".spmc_initialization");
this._btnArea.on("click",t);
this._btnDistance.on("click",t);
this._btnReset.on("click",t)
},getElement:function(){return this._el[0]
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},disable:function(){this._unbindEvent();
var t={cursor:"default"};
this._btnDistance.addClass("spmc_distance_dimmed").css(t);
this._btnArea.addClass("spmc_area_dimmed").css(t);
this._btnReset.addClass("spmc_initialization_dimmed").css(t)
},enable:function(){this._bindEvent();
var t={cursor:"pointer"};
this._btnDistance.removeClass("spmc_distance_dimmed").css(t);
this._btnArea.removeClass("spmc_area_dimmed").css(t);
this._btnReset.removeClass("spmc_initialization_dimmed").css(t)
},reset:function(){this.$area().reset();
this.$distance().reset();
this._adjustButtonState()
},_adjustButtonState:function(){if(this._mouseEntered){return
}this._btnReset.hide();
if(this._default==="distance"){this._btnDistance.show();
this._btnArea.hide();
this._btnArea.after(this._btnDistance)
}else{this._btnDistance.hide();
this._btnArea.show();
this._btnDistance.after(this._btnArea)
}this._inner.removeClass("mc_toolsin_open")
},_adjustResetState:function(){if(this.hasMeasured()){return
}this._adjustButtonState()
},_suspendIndoor:function(){if(this.isMeasuring()&&!this._isEnterIndoorMapSuspended){this.$Indoor().suspend();
this._isEnterIndoorMapSuspended=true
}},_resumeIndoor:function(){if(!this.isMeasuring()&&this._isEnterIndoorMapSuspended){this.$Indoor().resume();
this._isEnterIndoorMapSuspended=false
}},hasMeasured:function(){return this.$distance().getCount()>0||this.$area().getCount()>0
},isMeasuring:function(){return this.$distance().isMeasuring()||this.$area().isMeasuring()
},_onActivate:function(){this._bindEvent()
},_onDeactivate:function(){this._unbindEvent()
},_bindEvent:function(){this._el.on("mouseenter",g.bind(this)).on("mouseleave",r.bind(this));
this._btnDistance.on("click",i.bind(this));
this._btnArea.on("click",o.bind(this));
this._btnReset.on("click",n.bind(this))
},_unbindEvent:function(){this._el.off();
this._btnDistance.off();
this._btnArea.off();
this._btnReset.off()
},_listenDistance:function(){this.$distance().attach({begin:c.bind(this),cancel:a.bind(this),removed:e.bind(this),finish:a.bind(this)})
},_listenArea:function(){this.$area().attach({begin:k.bind(this),cancel:l.bind(this),removed:h.bind(this),finish:l.bind(this)})
},_bindIndoorEvent:function(){this.$Indoor().attach({beforeEnterIndoorMap:p.bind(this),beforeLeaveIndoorMap:f.bind(this)})
},_listenPanorama:function(){this.$Panorama().attach({openPanorama:q.bind(this),afterClosePanorama:d.bind(this),activateStreetView:b.bind(this),deactivateStreetView:j.bind(this)})
}});
function g(){this._mouseEntered=true;
this._inner.addClass("mc_toolsin_open");
this._btnArea.show();
this._btnDistance.show()
}function r(){this._mouseEntered=false;
if(this.hasMeasured()||this.isMeasuring()){return
}this._adjustButtonState()
}function i(t){t.preventDefault();
this.$area().cancel();
this.$distance().toggle()
}function o(t){t.preventDefault();
this.$distance().cancel();
this.$distance().finish();
this.$area().toggle()
}function n(t){t.preventDefault();
var u=this;
this._btnReset.addClass("spmc_initialization_on");
nhn.map.service.Confirm("지도위에 그린 거리/면적재기 내용을 한 번에<br />지우고 초기화합니다.","모두 지우시겠습니까?",function(v){if(v){u.reset()
}u._btnReset.removeClass("spmc_initialization_on")
})
}function c(){this._btnDistance.addClass("spmc_distance_on");
this._btnReset.show();
this._suspendIndoor();
this.dispatch("begin",{toolType:"distance"})
}function a(){this._btnDistance.removeClass("spmc_distance_on");
this._adjustResetState();
this._resumeIndoor();
this._default="distance";
this.dispatch("end",{toolType:"distance"})
}function e(){this._adjustResetState()
}function k(){this._btnArea.addClass("spmc_area_on");
this._btnReset.show();
this._suspendIndoor();
this.dispatch("begin",{toolType:"area"})
}function l(){this._btnArea.removeClass("spmc_area_on");
this._adjustResetState();
this._resumeIndoor();
this._default="area";
this.dispatch("end",{toolType:"area"})
}function h(){this._adjustResetState()
}function p(){var t=this.$area(),u=this.$distance();
t.cancel();
u.cancel();
t.changePool(m.POOL_INDOOR);
u.changePool(m.POOL_INDOOR);
this.reset()
}function f(){this.$area().changePool(m.POOL_DEFAULT);
this.$distance().changePool(m.POOL_DEFAULT)
}function q(){this.$area().cancel();
this.$distance().cancel();
this.$area().hide(m.POOL_DEFAULT);
this.$distance().hide(m.POOL_DEFAULT)
}function d(){this.$area().show(m.POOL_DEFAULT);
this.$distance().show(m.POOL_DEFAULT)
}function b(){this.disable()
}function j(){this.enable()
}}());
(function(c){var c=iron.ns("nhn.map.toolbox"),a=c.Const,e=[a.POOL_DEFAULT,a.POOL_INDOOR],b=a.STATE_DISTANCE;
c.DistanceService=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._currentPool=a.POOL_DEFAULT;
this._pool={};
e.forEach(function(f){this._pool[f]=[]
},this);
this._bindStateEvent()
},isMeasuring:function(){return this.$state().getState()===b
},toggle:function(){if(this.isMeasuring()){this.cancel()
}else{this.begin()
}},begin:function(){if(this.isMeasuring()){return
}this.$state().setState(b);
this.dispatch("begin")
},cancel:function(){if(!this.isMeasuring()){return
}this.$state().reset();
this.dispatch("cancel")
},finish:function(){if(!this.isMeasuring()){return
}this.$state().reset();
this.dispatch("finish")
},reset:function(){this.cancel();
this._pool[this._currentPool].forEach(function(f){f.destroy()
});
this._pool[this._currentPool]=[]
},addDistance:function(f){if(!f||!(f instanceof c.Distance)){return
}this.getCurrentPool().push(f)
},removeDistance:function(i){var h=i.getUID(),f=[],g;
for(g in this._pool){if(this._pool.hasOwnProperty(g)){f.push(this._pool[g])
}}f.forEach(function(m){var l=0,n=m.length,k=-1,j;
for(;
l<n;
l++){if(m[l].getUID()===h){k=l;
j=m[l];
break
}}if(k>-1){m.splice(k,1);
j.destroy();
this.dispatch("removed",{distance:j})
}},this)
},show:function(f){this._pool[f].forEach(function(g){g.show()
})
},hide:function(f){this._pool[f].forEach(function(g){g.hide()
})
},changePool:function(f){this._currentPool=f;
e.forEach(function(g){if(g===f){this.show(g)
}else{this.hide(g)
}},this)
},getCurrentPool:function(){return this._pool[this._currentPool]
},getCount:function(){var f=this.getCurrentPool();
return f.length
},gatherMapData:function(g){if(this.isMeasuring()){this.cancel()
}var f=this.getCurrentPool();
if(!f.length){return
}f.forEach(function(h){h.exportData(g)
})
},_bindStateEvent:function(){this.$state().attach({changed:d.bind(this)})
},restorePrint:function(f){var g=new c.Distance();
g.setMap(f.map);
f.path.forEach(function(j,h){g.addMilestone(j,f.posts[h])
});
g.finish();
g.attach("removeclicked",this.removeDistance.bind(this,g));
this.addDistance(g)
}});
function d(h){var g=h.prevState,f=h.newState;
if(g===b&&f!==b){this.dispatch("cancel")
}}}());
iron.ns("nhn.map.toolbox").Distance=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(a){this.UID=iron.guid();
this._milestones=[];
this._startpoint=null;
this._polyline=null;
this.setMap(a)
},getUID:function(){return this.UID
},setMap:function(a){this._map=a
},show:function(){this._milestones.forEach(function(a){a.show()
});
this._polyline.show();
this._resultLayer.show()
},hide:function(){this._milestones.forEach(function(a){a.hide()
});
this._polyline.hide();
this._resultLayer.hide()
},_processPolyline:function(a){var b=this.getPoints();
b.push(a);
if(!this._polyline){this._polyline=new nhn.map.toolbox.DistancePolyline(b);
this._map.addDrawing(this._polyline)
}else{this._polyline.setPoints(b)
}},addMilestone:function(c,a){this._processPolyline(c);
var b=new nhn.map.toolbox.DistanceMilestone(c,a||this.getDistanceInfo());
this._milestones.push(b);
this._map.addDrawing(b)
},removeMilestones:function(){this._milestones.forEach(function(a){a.destroy()
});
this._milestones=[]
},getPoints:function(){var a=this._milestones.map(function(b){return b.getPoint()
});
return a||[]
},getDistancePolyline:function(){return this._polyline
},getTotalMeter:function(){return this._polyline.getMeter()
},_getTextByMeter:function(c){var a,b,d;
if(this._getUnitByMeter(c)==="km"){c=(c/1000).toFixed(1)
}a=Math.floor(c);
d=nhn.mapservice.Util.makeCommaNumber(a);
b=c%a;
if(b>0){d+="."+b.toFixed(1)*10
}return d
},_getUnitByMeter:function(a){return(a/1000>=1)?"km":"m"
},_getTimeInfoByMeter:function(d,c){var b=Math.ceil(d/c*60),a=Math.floor(b/60),e;
b-=(a*60);
e=[{text:b,unit:"분"}];
if(a>0){e.unshift({text:a,unit:"시간"})
}return e
},_getWalkTimeInfo:function(a){return this._getTimeInfoByMeter(a||this.getTotalMeter(),4000)
},_getBicycleTimeInfo:function(a){return this._getTimeInfoByMeter(a||this.getTotalMeter(),15000)
},getDistanceInfo:function(a){var b=this.getTotalMeter()+(a||0);
return{text:this._getTextByMeter(b),unit:this._getUnitByMeter(b),walk:this._getWalkTimeInfo(b),bicycle:this._getBicycleTimeInfo(b),meter:b}
},getResultLayer:function(){return this._resultLayer
},_addResultLayer:function(a){var b=new nhn.map.toolbox.DistanceResultLayer(a,this.getDistanceInfo());
b.attach("removeclicked",this._onRemoveClicked.bind(this));
this._map.getOverlayPane().addOverlay(b);
this._resultLayer=b
},finish:function(){var b=this._milestones[this._milestones.length-1],a=b.getPoint();
b.removeDistancePost();
this._addResultLayer(a)
},_onRemoveClicked:function(){this.dispatch("removeclicked",{distance:this})
},destroy:function(){this.removeMilestones();
this._polyline&&this._polyline.destroy();
this._resultLayer&&this._resultLayer.destroy();
delete this._polyline;
delete this._resultLayer
},exportData:function(b){if(!b){return
}var a=this._getPathString();
b("print",{name:"distance",path:a,boxPoints:this._getBoxPoints(),boxTexts:this._getMilestoneText(),walk:this._getWalkTimeInfoText(),bicycle:this._getBicycleTimeInfoText()})
},_getBoxPoints:function(){var c=this._milestones.length,l=[],h,d,f,e,j,k,g,a,b;
for(h=0;
h<c-1;
h++){d=$(this._milestones[h].getElement());
f=$("._milestone",this._milestones[h].getElement());
e=parseInt(d.css("left"),10);
j=parseInt(d.css("top"),10);
g=parseInt(f.css("top"),10);
a=parseInt(f.css("left"),10);
b=parseInt(f.css("bottom"),10);
if(!isNaN(g)){j+=g
}if(!isNaN(a)){e+=a
}if(!isNaN(b)){j-=b;
j-=f.height()
}k=this._map.getOffsetToPoint({x:e,y:j});
l.push(k.x+","+k.y)
}d=$(this._resultLayer.getElement());
e=parseInt(d.css("left"),10);
j=parseInt(d.css("top"),10);
k=this._map.getOffsetToPoint({x:e+9,y:j+8});
l.push(k.x+","+k.y);
return l.join(" ")
},_getPathString:function(){var a=this.getPoints();
return a.map(function(c){var b=c.toInner();
return[b.x,b.y].join(",")
}).join(" ")
},_getMilestoneText:function(){var a=this._milestones,b=a.map(function(c){var d=c.getUnit();
d=d!==null?","+d:"";
return c.getText()+d
});
return b.join(" ")
},_getTextByTimeInfo:function(a){return a.map(function(b){return[b.text,b.unit].join(",")
}).join(" ")
},_getWalkTimeInfoText:function(){return this._getTextByTimeInfo(this._getWalkTimeInfo())
},_getBicycleTimeInfoText:function(){return this._getTextByTimeInfo(this._getBicycleTimeInfo())
},_getCloseIcon:function(){var a=this.getResultLayer(),c=$(a.getCloseBtn()),b;
b={getType:function(){return"Normal"
},toPrint:function(){return{type:"Norma",offset:{width:0,height:0},size:{width:c.width(),height:c.height()},url:c.attr("src"),zIndex:50}
},id:"closeBtn",point:a.getPoint(),zIndex:50};
return b
}});
iron.ns("nhn.map.toolbox").DistanceView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this.UID=iron.guid();
this._guideTpl=nhn.mapservice.TemplateRepos.get("distance_guide");
this._listTpl=nhn.mapservice.TemplateRepos.get("distance_guide_list")
},_prepareGuide:function(){this._guide=$(this._guideTpl.process())
},begin:function(){if(!this._guide){this._prepareGuide()
}var a=this.$map(),b=new nhn.map.toolbox.Distance();
b.setMap(a);
a.setCursor("rule",0,32);
this._bindEvent();
this._distance=b
},cancel:function(){this._distance&&this._distance.destroy();
this._teardown();
this.$service().cancel()
},finish:function(){var a=this._distance;
if(a.getPoints().length<2){this.cancel();
return
}a.finish();
this._bindAreaEvent(a);
this._teardown();
this.$service().addDistance(a);
this.$service().finish()
},_teardown:function(){var a=this.$map();
this._unbindEvent();
this._guide&&this._guide.remove();
a.setCursor("openhand");
this._guideLine&&this._guideLine.destroy();
delete this._guideLine;
delete this._pickPoint;
delete this._distance;
delete this._distancePoints
},_moveGuide:function(a){this._guide.css({left:a.x,top:a.y-47})
},_bindAreaEvent:function(a){a.attach("removeclicked",this._onDistanceRemoveClicked.bind(this))
},_bindEvent:function(){var a=this.UID;
this.$map().attach("CLICK_MAP_DONE."+a,this._onClickMapDone.bind(this));
this.$map().attach("CONTEXTMENU_EVENT_DONE."+a,this._onContextMenu.bind(this));
nhn.map.DOMCache.getDocument().on("keydown."+a,this._onKeyDown.bind(this)).on("mousemove."+a,this._onMouseMove.bind(this))
},_unbindEvent:function(){var a=this.UID;
this.$map().detach("."+a);
nhn.map.DOMCache.getDocument().off("."+a)
},_onClickMapDone:function(b){var c=b.latlng,a;
if(!this._pickPoint){nhn.map.DOMCache.getContainer().append(this._guide);
this._moveGuide({x:b.domEvent.clientX,y:b.domEvent.clientY});
this._guideLine=new nhn.map.toolbox.GuideLine([c,c]);
this.$map().addDrawing(this._guideLine);
a="START"
}this._distance.addMilestone(c,a);
this._guideLine.setPoints([c,c]);
this._pickPoint=c
},_onMouseMove:function(d){if(!this._pickPoint){return
}var b={x:d.clientX,y:d.clientY},f=this.$map().getLatLngByScreenPoint(b),a=this._guideLine.getPoints(),c;
this._pickPoint=f;
a.pop();
a.push(f);
this._guideLine.setPoints(a);
this._moveGuide(b);
c=this._distance.getDistanceInfo(this._guideLine.getMeter());
this._guide.find("ul.length_sum").html(this._listTpl.process(c))
},_onContextMenu:function(){this.finish()
},_onKeyDown:function(a){var b=27;
if(a.keyCode===b){a.preventDefault();
this.finish()
}},_onDistanceRemoveClicked:function(a){this.$service().removeDistance(a.distance)
},_listenService:function(){this.$service().attach({begin:this._onBegin.bind(this),cancel:this._onCancel.bind(this)})
},_onBegin:function(){this.begin()
},_onCancel:function(){this.cancel()
}});
(function(){var a=nhn.mapcore.Polyline.prototype;
iron.ns("nhn.map.toolbox").GuideLine=iron.Class({inherit:a.constructor},{initialize:function(d,c){var b=$.extend({strokeColor:"#fc1a1a",strokeOpacity:0.2,strokeWidth:5},c);
a.$init.apply(this,[d,b])
},getMeter:function(){return Math.ceil(+this.getLength())
},destroy:function(){if(!this.pane){return
}this.pane.removeOverlay(this);
a.destroy.apply(this)
}})
}());
iron.ns("nhn.map.toolbox").Vertex=iron.Class({inherit:nhn.map.service.AbstractOverlay},{initialize:function(){this._tpl=nhn.mapservice.TemplateRepos.get("vertex");
this.options={"background-color":"#fff",border:"solid 2px #0d0de5",width:6,height:6};
nhn.map.service.AbstractOverlay.prototype.initialize.apply(this,arguments);
this.setStyle();
this._initOffset()
},_prepareDOM:function(){this._el=$(this._tpl.process())
},_initOffset:function(){var a=parseInt(this._el.css("border-width"),10),b=Math.floor(this._el.width()/2)+a,c=Math.floor(this._el.height()/2)+a;
this.setOffset({x:-b,y:-c})
},setStyle:function(a){$.extend(this.options,a||{});
this._el.css(a||this.options)
},getStyle:function(){return $.extend({},this.options)
}});
iron.ns("nhn.map.toolbox").DistanceMilestone=iron.Class({inherit:nhn.map.toolbox.Vertex},{initialize:function(a,b){this._initTemplate();
this._info=b;
this._text="";
nhn.map.toolbox.Vertex.prototype.initialize.apply(this,[a,{border:"solid 2px #fc1a1a"}])
},_initTemplate:function(){this._startMilestoneTemplate=nhn.mapservice.TemplateRepos.get("distance_start_milestone");
this._milestoneTemplate=nhn.mapservice.TemplateRepos.get("distance_milestone")
},_prepareDOM:function(){var a=this._info;
nhn.map.toolbox.Vertex.prototype._prepareDOM.apply(this);
if(typeof a!=="string"){this._el.append(this._milestoneTemplate.process(a));
this._text=a.text
}else{if(a==="START"){this._text="시작점";
this.setStyle({"background-color":"#f8c7c7"});
this._el.append(this._startMilestoneTemplate.process())
}}},removeDistancePost:function(){this._el.empty()
},getUnit:function(){if(this._info&&this._info.unit){return this._info.unit
}return null
},getText:function(){return this._text
}});
(function(){var a=nhn.mapcore.Polyline.prototype;
iron.ns("nhn.map.toolbox").DistancePolyline=iron.Class({inherit:nhn.mapcore.Polyline},{initialize:function(d,c){var b=$.extend({strokeColor:"#fc1a1a",strokeOpacity:0.65,strokeWidth:5},c);
a.$init.apply(this,[d,b])
},show:function(){$(this.getElement()).show()
},hide:function(){$(this.getElement()).hide()
},getMeter:function(){return Math.ceil(+this.getLength())
},destroy:function(){if(!this.pane){return
}this.pane.removeOverlay(this);
a.destroy.apply(this)
}})
}());
iron.ns("nhn.map.toolbox").DistanceResultLayer=iron.Class({inherit:nhn.map.service.AbstractOverlay},{initialize:function(a,b){this._initTemplate();
this._info=b;
nhn.map.service.AbstractOverlay.prototype.initialize.apply(this,[a]);
this._bindEvent()
},_initTemplate:function(){this._tpl=nhn.mapservice.TemplateRepos.get("distance_result");
this._listTpl=nhn.mapservice.TemplateRepos.get("distance_guide_list")
},_prepareDOM:function(){this._el=$(this._tpl.process());
this._el.find("ul.length_sum").html(this._listTpl.process(this._info))
},_bindEvent:function(){this._el.on("click",this._onClick.bind(this)).on("mouseenter",this._onMouseEnter.bind(this)).on("mouseleave",this._onMouseLeave.bind(this))
},_onClick:function(a){a.preventDefault();
a.stopPropagation();
if($(a.target).hasClass("spm_len_del_r")){this.dispatch("removeclicked")
}},_onMouseEnter:function(){this._el.css("z-index",59999)
},_onMouseLeave:function(){this._el.css("z-index",1)
},getCloseBtn:function(){return this._el.find("a.spm_len_del_r")[0]
}});
iron.ns("nhn.map.toolbox").Area=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this.UID=iron.guid();
this._vertexes=[];
this._polygon=null
},getUID:function(){return this.UID
},setMap:function(a){this._map=a
},show:function(){this._vertexes.forEach(function(a){a.show()
});
this._polygon.show();
this._resultLayer.show()
},hide:function(){this._vertexes.forEach(function(a){a.hide()
});
this._polygon.hide();
this._resultLayer.hide()
},_processPolygon:function(a){var b=this.getPoints();
b.push(a);
if(!this._polygon){this._polygon=new nhn.map.toolbox.AreaPolygon(b);
this._map.addDrawing(this._polygon)
}else{this._polygon.setPoints(b)
}},addVertex:function(b){this._processPolygon(b);
var a=new nhn.map.toolbox.Vertex(b);
this._vertexes.push(a);
this._map.addDrawing(a)
},removeVertexes:function(){this._vertexes.forEach(function(a){a.destroy()
});
this._vertexes=[]
},getPoints:function(){var a=this._vertexes.map(function(b){return b.getPoint()
});
return a
},getAreaPolygon:function(){return this._polygon
},getAreaSize:function(){return this._polygon.getSize()
},_getTextBySquareMeter:function(b){var a,c,d;
if(this._getUnitBySquareMeter(b)==="km"){b=(b/1000000).toFixed(1)
}a=Math.floor(b);
d=nhn.mapservice.Util.makeCommaNumber(a);
c=b%a;
if(c>0){d+="."+c.toFixed(1)*100
}return d
},_getUnitBySquareMeter:function(a){return(a/1000000>=1)?"km":"m"
},getAreaInfo:function(a){var b=this.getAreaSize()+(a||0);
return{text:this._getTextBySquareMeter(b),unit:this._getUnitBySquareMeter(b),sqmeter:b}
},getResultLayer:function(){return this._resultLayer
},_addResultLayer:function(a){var b=new nhn.map.toolbox.AreaResultLayer(a,this.getAreaInfo());
b.attach("removeclicked",this._onRemoveClicked.bind(this));
this._map.getOverlayPane().addOverlay(b);
this._resultLayer=b
},finish:function(){var a=this.getPoints();
this._addResultLayer(a[a.length-1])
},_onRemoveClicked:function(){this.dispatch("removeclicked",{area:this})
},destroy:function(){this.removeVertexes();
this._polygon&&this._polygon.destroy();
this._resultLayer&&this._resultLayer.destroy();
delete this._polygon;
delete this._resultLayer
},exportData:function(c){if(!c){return
}var b=this._getPointString(),a=this._resultLayer.getPoint().toInner();
c("print",{name:"area",coordType:"nhn:2048",icons:[],points:b,strokeWeight:5,strokeColor:"#0d0de5",strokeOpacity:0.65,fillColor:"#0d0de5",fillOpacity:0.2,zIndex:0,boxPoints:[a.x,a.y].join(","),boxTexts:this._getMilestoneText(),areaPaths:this._getPointStringAsInner()})
},_getPointString:function(){var b=this.getPoints(),a=b[0],c=[];
c=b.map(function(d){d=d.toUTMK();
return[d.x,d.y]
});
a=a.toUTMK();
c.push([a.x,a.y]);
return[c]
},_getPointStringAsInner:function(){var a=this.getPoints();
return a.map(function(c){var b=c.toInner();
return[b.x,b.y].join(",")
}).join(" ")
},_getMilestoneText:function(){var a=this.getAreaInfo();
return a.text+" "+a.unit+"2"
},_getTextByTimeInfo:function(a){return a.map(function(b){return[b.text,b.unit].join(",")
}).join(",")
},_getWalkTimeInfoText:function(){return this._getTextByTimeInfo(this._getWalkTimeInfo())
},_getBicycleTimeInfoText:function(){return this._getTextByTimeInfo(this._getBicycleTimeInfo())
}});
(function(c){var c=iron.ns("nhn.map.toolbox"),b=c.Const,e=[b.POOL_DEFAULT,b.POOL_INDOOR],a=b.STATE_AREA;
c.AreaService=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._currentPool=b.POOL_DEFAULT;
this._pool={};
e.forEach(function(f){this._pool[f]=[]
},this);
this._bindStateEvent()
},isMeasuring:function(){return this.$state().getState()===a
},toggle:function(){if(this.isMeasuring()){this.cancel()
}else{this.begin()
}},begin:function(){if(this.isMeasuring()){return
}this.$state().setState(a);
this.dispatch("begin")
},cancel:function(){if(!this.isMeasuring()){return
}this.$state().reset();
this.dispatch("cancel")
},finish:function(){if(!this.isMeasuring()){return
}this.$state().reset();
this.dispatch("finish")
},reset:function(){this.cancel();
this._pool[this._currentPool].forEach(function(f){f.destroy()
});
this._pool[this._currentPool]=[]
},addArea:function(f){if(!f||!(f instanceof c.Area)){return
}this.getCurrentPool().push(f)
},removeArea:function(i){var h=i.getUID(),f=[],g;
for(g in this._pool){if(this._pool.hasOwnProperty(g)){f.push(this._pool[g])
}}f.forEach(function(m){var l=0,n=m.length,j=-1,k;
for(;
l<n;
l++){if(m[l].getUID()===h){j=l;
k=m[l];
break
}}if(j>-1){m.splice(j,1);
k.destroy();
this.dispatch("removed",{area:k})
}},this)
},show:function(f){this._pool[f].forEach(function(g){g.show()
})
},hide:function(f){this._pool[f].forEach(function(g){g.hide()
})
},changePool:function(f){this._currentPool=f;
e.forEach(function(g){if(g===f){this.show(g)
}else{this.hide(g)
}},this)
},getCurrentPool:function(){return this._pool[this._currentPool]
},getCount:function(){var f=this.getCurrentPool();
return f.length
},gatherMapData:function(g){if(this.isMeasuring()){this.cancel()
}var f=this.getCurrentPool();
if(!f.length){return
}f.forEach(function(h){h.exportData(g)
})
},_bindStateEvent:function(){this.$state().attach({changed:d.bind(this)})
},restorePrint:function(f){var g=new c.Area();
g.setMap(f.map);
f.path.forEach(function(h){g.addVertex(h)
});
g.finish();
g.attach("removeclicked",this.removeArea.bind(this,g));
this.addArea(g)
}});
function d(h){var g=h.prevState,f=h.newState;
if(g===a&&f!==a){this.dispatch("cancel")
}}}());
iron.ns("nhn.map.toolbox").AreaView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this.UID=iron.guid();
this._guideTpl=nhn.mapservice.TemplateRepos.get("area_guide")
},_prepareGuide:function(){this._guide=$(this._guideTpl.process())
},begin:function(){if(!this._guide){this._prepareGuide()
}var a=new nhn.map.toolbox.Area(),b=this.$map();
a.setMap(b);
b.setCursor("area",0,32);
this._bindEvent();
this._area=a
},cancel:function(){this._area&&this._area.destroy();
this._teardown();
this.$service().cancel()
},finish:function(){var c=this._area,b=c.getPoints();
if(b.length<3){this.cancel();
return
}var a=this._area.getAreaPolygon();
a.setPoints(b);
c.finish();
this._bindAreaEvent(c);
this._teardown();
this.$service().addArea(c);
this.$service().finish()
},_teardown:function(){var a=this.$map();
this._unbindEvent();
this._guide&&this._guide.remove();
a.setCursor("openhand");
delete this._pickPoint;
delete this._area;
delete this._areaPoints
},_moveGuide:function(b){this._guide.css({left:b.x,top:b.y-47});
if(this._areaPoints&&this._areaPoints.length>=2){var a=this._area.getAreaInfo();
this._guide.find(".length_sum").show();
this._guide.find(".length_sum li strong").text(a.text);
this._guide.find(".length_sum li span.unit").html(a.unit+"<sup>2</sup>")
}else{this._guide.find(".length_sum").hide()
}},_bindAreaEvent:function(a){a.attach("removeclicked",this._onAreaRemoveClicked.bind(this))
},_bindEvent:function(){var a=this.UID;
this.$map().attach("CLICK_MAP_DONE."+a,this._onClickMapDone.bind(this));
this.$map().attach("CONTEXTMENU_EVENT_DONE."+a,this._onContextMenu.bind(this));
nhn.map.DOMCache.getDocument().on("keydown."+a,this._onKeyDown.bind(this)).on("mousemove."+a,this._onMouseMove.bind(this))
},_unbindEvent:function(){var a=this.UID;
this.$map().detach("."+a);
nhn.map.DOMCache.getDocument().off("."+a)
},_onClickMapDone:function(a){var b=a.latlng;
if(!this._pickPoint){nhn.map.DOMCache.getContainer().append(this._guide);
this._moveGuide({x:a.domEvent.clientX,y:a.domEvent.clientY})
}this._pickPoint=b;
this._area.addVertex(b);
this._areaPoints=this._area.getPoints();
if(this._areaPoints.length===19){this.finish()
}},_onMouseMove:function(c){if(!this._pickPoint){return
}var b={x:c.clientX,y:c.clientY},d=this.$map().getLatLngByScreenPoint(b),a=this._area.getAreaPolygon();
this._pickPoint=d;
this._areaPoints.push(d);
a.setPoints(this._areaPoints);
this._areaPoints.pop();
this._moveGuide(b)
},_onContextMenu:function(){this.finish()
},_onKeyDown:function(a){var b=27;
if(a.keyCode===b){a.preventDefault();
this.finish()
}},_onAreaRemoveClicked:function(a){this.$service().removeArea(a.area)
},_listenService:function(){this.$service().attach({begin:this._onBegin.bind(this),cancel:this._onCancel.bind(this)})
},_onBegin:function(){this.begin()
},_onCancel:function(){this.cancel()
}});
(function(){var a=nhn.mapcore.Polygon.prototype;
iron.ns("nhn.map.toolbox").AreaPolygon=iron.Class({inherit:nhn.mapcore.Polygon},{initialize:function(e,d){var c=$.extend({strokeColor:"#0d0de5",strokeOpacity:0.65,strokeWidth:5,fillColor:"#0d0de5",fillOpacity:0.2},d);
a.$init.apply(this,[e,c])
},show:function(){$(this.getElement()).show()
},hide:function(){$(this.getElement()).hide()
},destroy:function(){if(!this.pane){return
}this.pane.removeOverlay(this);
a.destroy.apply(this)
},getSize:function(){var d=this.getPoints(),c;
if(d.length>20){alert("Polygon의 꼭지점이 20개 미만인 경우만 면적 계산이 가능합니다.");
return
}c=b(this.getPoints())/100;
return +(c.toFixed(2))
}});
var b=(function(){var g=function(n,m,h,q){var k={x:m.x-n.x,y:m.y-n.y};
var p={x:q.x-h.x,y:q.y-h.y};
var i=p.x*(n.y-h.y)-p.y*(n.x-h.x);
var j=k.x*(n.y-h.y)-k.y*(n.x-h.x);
var l=p.y*k.x-p.x*k.y;
if(l==0){return null
}i/=l;
j/=l;
if(!(0<i&&i<=1&&0<j&&j<=1)){return null
}var o={x:n.x+i*(m.x-n.x),y:n.y+i*(m.y-n.y)};
if((o.x<=Math.min(n.x,m.x)||o.x>=Math.max(n.x,m.x)||o.y<=Math.min(n.y,m.y)||o.y<=Math.min(n.y,m.y))&&(o.x<=Math.min(h.x,q.x)||o.x>=Math.max(h.x,q.x)||o.y<=Math.min(h.y,q.y)||o.y<=Math.min(h.y,q.y))){return null
}return o
};
var f=function(p){var r=p.length;
var k=[];
for(var o=0;
o<r;
o++){var m=p[o];
var l=p[(o+1)%r];
for(var n=0;
n<r;
n++){var h=p[n];
var s=p[(n+1)%r];
var q=g(m,l,h,s);
if(q){k.push(q)
}}}return k
};
var e=function(l){var k=0;
var n=l.length;
var h=n-1;
for(var m=0;
m<n;
h=m++){k+=(l[h].x*l[m].y);
k-=(l[m].x*l[h].y)
}return Math.abs(k/2)
};
var d=function(i,h,j){return(j-i.x)*(h.y-i.y)/(h.x-i.x)+i.y
};
var c=function(p,l,h){var r=0;
var o=[],n=[];
var q=p.length;
for(var m=0;
m<q;
m++){var k=p[m];
var j=p[(m+1)%q];
if(Math.min(k.x,j.x)>l||h>Math.max(k.x,j.x)){continue
}o.push({x:l,y:d(k,j,l)});
n.push({x:h,y:d(k,j,h)})
}o.sort(function(s,i){return s.y-i.y
});
n.sort(function(s,i){return s.y-i.y
});
if(o.length!=n.length||o.length<2){alert("Uh?");
throw new Error("Uh?")
}var q=o.length;
for(var m=0;
m<q;
m+=2){r+=e([o[m],n[m],n[m+1],o[m+1]])
}return r
};
return function(k){var h=f(k).concat(k);
h.sort(function(p,i){return p.x-i.x
});
var j=null;
var m=0;
var n;
for(var l=0;
n=h[l];
l++){var o=n.x;
if(j===o){continue
}if(j!==null){m+=c(k,j,o)
}j=o
}return m.toFixed(8)*1
}})()
}());
iron.ns("nhn.map.toolbox").AreaResultLayer=iron.Class({inherit:nhn.map.service.AbstractOverlay},{initialize:function(a,b){this._initTemplate();
this._info=b;
nhn.map.service.AbstractOverlay.prototype.initialize.apply(this,[a]);
this._bindEvent()
},_initTemplate:function(){this._tpl=nhn.mapservice.TemplateRepos.get("area_result")
},_prepareDOM:function(){this._el=$(this._tpl.process(this._info))
},_bindEvent:function(){this._el.on("click",this._onClick.bind(this)).on("mouseenter",this._onMouseEnter.bind(this)).on("mouseleave",this._onMouseLeave.bind(this))
},_onClick:function(a){a.preventDefault();
a.stopPropagation();
if($(a.target).hasClass("spm_len_del_area")){this.dispatch("removeclicked")
}},_onMouseEnter:function(){this._el.css("z-index",59999)
},_onMouseLeave:function(){this._el.css("z-index",1)
},getCloseBtn:function(){return this._el.find("a.spm_len_del_area")[0]
}});
nhn.mapservice.TemplateRepos.add({map_toolbox:function(_d_){var p=[];
with(_d_){p.push('<div class="mc_tools">  <h3 class="blind">길이/면적재기 툴</h3>  <div class="mc_toolsin">   <a href="#" class="spmc spmc_area nclicks(mrt.rangeoff)" title="면적재기" style="display:none">면적재기</a><a href="#" class="spmc spmc_distance nclicks(mrt.distanceoff)" title="길이재기">길이재기</a>   <a href="#" class="spmc spmc_initialization nclicks(mrt.delall)" title="초기화" style="display:none">초기화</a>  </div> </div>')
}return p.join("")
},area_guide:function(_d_){var p=[];
with(_d_){p.push('<div style="margin:10px 0 0 10px;z-index:1;" class="lay_simple lay_simple_b">  <ul class="length_sum">   <li>    <span class="label">총면적</span> <strong>4529</strong> <span class="unit">㎡</span>   </li>  </ul>  <p class="lay_msg" style="display: block;">마우스 오른쪽 버튼<br>또는 키보드 \'esc\'<br>를 누르면 마침</p> </div>')
}return p.join("")
},area_result:function(_d_){var p=[];
with(_d_){p.push('<div style="margin:8px 0 0 11px;z-index:10;" class="lay_simple lay_simple_b">  <ul class="length_sum">   <li>    <span class="label">총면적</span> <strong>',text,'</strong> <span class="unit">',unit,'<sup>2</sup></span>   </li>  </ul>   <a href="#" class="spm spm_len_del_area" title="삭제" style="position:absolute;top:-1px;left:-19px;z-index:5000">삭제</a> </div>')
}return p.join("")
},distance_guide:function(_d_){var p=[];
with(_d_){p.push('<div class="lay_simple lay_simple_r" style="margin:10px 0 0 10px;z-index:1;">  <ul class="length_sum">  <li><span class="label">총거리</span> <strong class="total">0</strong> <span class="unit">m</span></dd></li>  <li><span class="label">도보</span> <strong class="walk">0</strong>분</li>  <li><span class="label">자전거</span> <strong class="bicycle">0</strong>분</li>  </ul>  <p class="lay_msg">마우스 오른쪽 버튼<br>또는 키보드 \'esc\'<br>를 누르면 마침</p> </div>')
}return p.join("")
},distance_milestone:function(_d_){var p=[];
with(_d_){p.push('<div class="lay_rect lay_rect_r _milestone" style="top:8px;left:8px;font-size:12px;line-height:14px;">  <span class="num">',text,'</span><span class="unit">',unit,"</span> </div>")
}return p.join("")
},distance_start_milestone:function(_d_){var p=[];
with(_d_){p.push('<div class="lay_rect_fill lay_rect_fill_r _milestone" style="bottom:11px;left:-2px">시작점</div>')
}return p.join("")
},vertex:function(_d_){var p=[];
with(_d_){p.push('<div class="vertex" style="position:absolute;z-index:100;font-size:1px;line-height:1px;"></div>')
}return p.join("")
},distance_guide_list:function(_d_){var p=[];
with(_d_){p.push('<li><span class="label">총거리</span> <strong>',text,'</strong> <span class="unit">',unit,'</span></dd></li> <li>  <span class="label">도보</span>  ');
for(var i=0,ii=walk.length;
i<ii;
i++){p.push("   &nbsp;<strong>",walk[i].text,"</strong>",walk[i].unit,"  ")
}p.push(' </li>  <li>  <span class="label">자전거</span>  ');
for(var i=0,ii=bicycle.length;
i<ii;
i++){p.push("   &nbsp;<strong>",bicycle[i].text,"</strong>",bicycle[i].unit,"  ")
}p.push(" </ul>")
}return p.join("")
},distance_result:function(_d_){var p=[];
with(_d_){p.push('<div class="lay_simple lay_simple_r _milestone" style="margin:8px 0 0 11px;z-index:1;">  <ul class="length_sum">  <li><span class="label">총거리</span> <strong>0</strong> <span class="unit">m</span></dd></li>  <li><span class="label">도보</span> <strong>0</strong>분</li>  <li><span class="label">자전거</span> <strong>0</strong>분</ul>   <a href="#" class="spm spm_len_del_r" title="삭제" style="position:absolute;top:-1px;left:-19px">삭제</a> </div>')
}return p.join("")
}});iron.ns("nhn.map.search").PolygonExtractor={getDrawings:function(b){var a=[];
b.features.filter(function(c){return c.type=="Feature"
}).forEach(function(g){var j=g.bbox,f=g.properties;
switch(g.geometry.type){case"Polygon":var d=g.geometry.coordinates,i=this._convertGeoJsonLinearRingsToMapcoreLinearRings(d),e=new nhn.mapcore.Polygon(i);
e.bbox=j;
e.properties=f;
a.push(e);
break;
case"MultiPolygon":var c=[];
g.geometry.coordinates.forEach(function(k){var l=this._convertGeoJsonLinearRingsToMapcoreLinearRings(k);
c.push(l)
}.bind(this));
var h=new nhn.mapcore.MultiPolygon(c);
h.bbox=j;
h.properties=f;
a.push(h);
break
}}.bind(this));
return a
},_convertGeoJsonLinearRingsToMapcoreLinearRings:function(a){var b=[];
a.forEach(function(d){var c=d.map(function(e){return new nhn.mapcore.LatLng(e[1],e[0])
});
b.push(c)
});
return b
}};
iron.ns("nhn.map.search").PolygonGroup={SEARCH:"SEARCH",BOOKMARK:"BOOKMARK"};
iron.ns("nhn.map.search").PolygonService=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){this._polygonParamHash={}
},_onActivate:function(){this.dispatch("activate")
},_onDeactivate:function(){this.dispatch("deactivate")
},pause:function(){if(!this.isActivating()||this._paused){return this
}this._paused=true;
this.$dao().abortAll();
this.dispatch("pause");
return this
},resume:function(){if(!this.isActivating()||!this._paused){return this
}this._paused=false;
this.dispatch("resume");
return this
},_getKey:function(b){var a;
switch(b.type){case"REGION":a=[b.group,b.type,b.regionCode].join("_");
break;
case"ADDRESS":a=[b.group,b.type,b.center.x,b.center.y].join("_");
break;
case"SITE":a=[b.group,b.type,b.center.x,b.center.y,b.shapeId].join("_");
break
}return a
},_isValidData:function(a){if(!this._hasMandatoryParam(a,["group","type"])){return false
}if(!nhn.map.search.PolygonGroup[a.group]){return false
}switch(a.type){case"REGION":if(a.group&&a.regionCode){return true
}break;
case"ADDRESS":if(a.group&&a.center&&a.center instanceof nhn.mapcore.LatLng){return true
}break;
case"SITE":if(a.group&&a.shapeId&&a.center&&a.center instanceof nhn.mapcore.LatLng){return true
}break
}return false
},_hasMandatoryParam:function(b,a){return a.every(function(c){return b.hasOwnProperty(c)
})
},addPolygon:function(c){if(!this._isValidData(c)){return this
}var a=this._getKey(c);
if(this._polygonParamHash[a]){return this
}else{var b={};
$.extend(true,b,c);
c=b
}this._polygonParamHash[a]=c;
if(this._paused){return this
}this.dispatch("add",{key:a,polygonParam:c});
return this
},removePolygon:function(b){if(!this._isValidData(b)){return this
}var a=this._getKey(b);
if(!this._polygonParamHash[a]){return this
}delete this._polygonParamHash[a];
if(this._paused){return this
}this.dispatch("remove",{key:a,polygonParam:b});
return this
},clear:function(){this._polygonParamHash={};
if(this._paused){return this
}this.dispatch("clear");
return this
},selectPolygon:function(b){if(this._paused||!this._isValidData(b)){return this
}var a=this._getKey(b);
if(!this._polygonParamHash[a]){return this
}this.dispatch("select",{key:a,polygonParam:b});
return this
},deselectPolygon:function(b){if(this._paused||!this._isValidData(b)){return this
}var a=this._getKey(b);
if(!this._polygonParamHash[a]){return this
}this.dispatch("deselect",{key:a,polygonParam:b});
return this
},focusPolygon:function(b){if(this._paused||!this._isValidData(b)){return this
}var a=this._getKey(b);
if(!this._polygonParamHash[a]){return this
}this.dispatch("focus",{key:a,polygonParam:b});
return this
},blurPolygon:function(b){if(this._paused||!this._isValidData(b)){return this
}var a=this._getKey(b);
if(!this._polygonParamHash[a]){return this
}this.dispatch("blur",{key:a,polygonParam:b});
return this
},getPolygonParamHash:function(){return this._polygonParamHash
},getVisibleLevels:function(c){var b=[];
if(!this._isValidData(c)){return b
}if(c.type==="REGION"){var a=c.regionCode;
if(a.length<=2){switch(a){case"01":case"02":case"03":case"04":case"12":case"13":case"15":case"16":b=[1,2,3];
break;
default:b=[1,2,3,4,5,6,7];
break
}}else{if(a.length<=5){b=[1,2,3,4,5,6,7,8,9]
}else{b=[1,2,3,4,5,6,7,8,9,10,11]
}}}else{b=[1,2,3,4,5,6,7,8,9,10,11,12,13,14]
}return b
},getExportData:function(){var a=[],b=this.$polygonMapview().getDrawings();
$.each(this._polygonParamHash,function(c,e){var d=b.filter(function(f){return f.key==c
});
e.drawings=d;
a.push(e)
});
return a
},requestRegionPolygon:function(a,d,c,b){this.$dao().requestRegionPolygon(a,d,c,b)
},requestAddressPolygon:function(a,c,b){this.$dao().requestAddressPolygon(a,c,b)
},requestSitePolygon:function(a,d,c,b){this.$dao().requestSitePolygon(a,d,c,b)
},_listenMap:function(){this.$map().attach({MSG_APP_READY:this.activate.bind(this)})
},_listenMenuBar:function(){this.$menubar().attach({change:this._onChangeMenu.bind(this)})
},_onChangeMenu:function(b){var a=b.newMenu;
(a==="ROUTE")?this.pause():this.resume()
},_listenIndoorMap:function(){this.$indoorMap().attach({beforeEnterIndoorMap:this._onBeforeEnterIndoorMap.bind(this),leaveIndoorMap:this._onLeaveIndoorMap.bind(this)})
},_onBeforeEnterIndoorMap:function(){this.pause()
},_onLeaveIndoorMap:function(){this.resume()
},_listenPanorama:function(){this.$panorama().attach({openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this)})
},_onOpenPanorama:function(){this.dispatch("openPanorama")
},_onClosePanorama:function(){this.dispatch("closePanorama")
},gatherMapData:function(c){var l=this.getExportData(),k,a,n,o,m,e,f;
for(var h=0,d=l.length;
h<d;
h++){if(l[h].group===nhn.map.search.PolygonGroup.BOOKMARK){continue
}o=l[h].drawings;
e=l[h].regionCode;
for(var g=0,b=o.length;
g<b;
g++){m=o[g];
a=m.getStyle();
f=(m instanceof nhn.mapcore.MultiPolygon);
n=this._getPolygonPoints(m,f);
k=$.extend({name:f?"multipolygon":"polygon",coordType:"EPSG:4326",points:[n],zIndex:0,rcode:e},{strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,fillColor:a.fillColor.indexOf("#")!=-1?a.fillColor:"#"+a.fillColor,fillOpacity:a.fillOpacity,strokeWeight:a.strokeWidth,zIndex:0});
c("pane",{name:"drawing",data:[k]})
}}},_gatherMapData:function(n){var c=n.gather,m=this.getExportData(),l,a,p,q,o,f,g;
for(var k=0,d=m.length;
k<d;
k++){if(m[k].group===nhn.map.search.PolygonGroup.BOOKMARK){continue
}q=m[k].drawings;
f=m[k].regionCode;
for(var h=0,b=q.length;
h<b;
h++){o=q[h];
a=o.getStyle();
g=(o instanceof nhn.mapcore.MultiPolygon);
p=this._getPolygonPoints(o,g);
l=$.extend({name:g?"multipolygon":"polygon",coordType:"EPSG:4326",points:[p],zIndex:0,rcode:f},{strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,fillColor:a.fillColor.indexOf("#")!=-1?a.fillColor:"#"+a.fillColor,fillOpacity:a.fillOpacity,strokeWeight:a.strokeWidth,zIndex:0});
c("pane",{name:"drawing",data:[l]})
}}},_getPolygonPoints:function(a,c){var b;
if(c){b=this._extractMultiPolygonPoints(a)
}else{b=this._extractPolygonPoints(a)
}return b
},_splitPolygonPoints:function(c){var e=[],b=[];
for(var a=0,d=c.length;
a<d;
a++){if(c[a].start&&a!==0){e.push(this._extractPoints(b));
b=[]
}b.push(c[a])
}e.push(this._extractPoints(b));
return e
},_extractPolygonPoints:function(a){var b=a.getPoints();
b=this._splitPolygonPoints(b);
return b[0]
},_extractMultiPolygonPoints:function(b){var c=b.getPoints(),a=this,d=[];
c.forEach(function(e){var g=[];
for(var f=0,h=e.length;
f<h;
f++){if(e[f].start&&f!==0){d.push(a._extractPoints(g));
g=[]
}g.push(e[f])
}d.push(a._extractPoints(g))
});
return d
},_extractPoints:function(a){var b=[];
a.forEach(function(c){c=c.toLatLng();
b.push([c.getX(),c.getY()])
});
return b
}});
iron.ns("nhn.map.search").PolygonDAO=iron.Class({inherit:nhn.map.AbstractDAO},{API:{SEARCH_REGION_POLYGON:{url:"/wfs/stargate",defaultParams:{request:"codeToFeatures",version:"1.0",targetcrs:"epsg:4326",order:"adm",output:"geojson",codetype:"naver"}},SEARCH_ADDRESS_POLYGON:{url:"/wfs/stargate",defaultParams:{request:"pointToFeatures",version:"1.0",sourcecrs:"epsg:4326",targetcrs:"epsg:4326",order:"jibun",output:"geojson"}},SEARCH_SITE_POLYGON:{url:"/wfs/stargate",defaultParams:{request:"pointToFeatures",version:"1.0",sourcecrs:"epsg:4326",targetcrs:"epsg:4326",order:"develope",output:"geojson"}}},initialize:function(){nhn.map.AbstractDAO.apply(this,arguments)
},_onResponseSuccess:function(c,d,b){var a=this._refineResponse(c,b);
this.dispatch("responseSuccess",{apiId:c,response:a});
d&&d(a)
},_onResponseError:function(a,b){this.dispatch("responseError",{apiId:a});
b&&b()
},requestRegionPolygon:function(a,g,f,c){var b="SEARCH_REGION_POLYGON",e=this.API[b],d=$.extend(e.defaultParams,{keyword:a,level:g});
this._regionPolygonXHR=this._request({url:e.url,data:d,successRule:{type:"FeatureCollection"},success:this._onResponseSuccess.bind(this,b,f||null),error:this._onResponseError.bind(this,b,c||null)})
},abortRegionPolygon:function(){if(!this._regionPolygonXHR){return
}this._regionPolygonXHR.abort();
delete this._regionPolygonXHR
},requestAddressPolygon:function(a,f,c){var b="SEARCH_ADDRESS_POLYGON",e=this.API[b],d=$.extend(e.defaultParams,{coords:[a.lng(),a.lat()].join(",")});
this._addressPolygonXHR=this._request({url:e.url,data:d,successRule:{type:"FeatureCollection"},success:this._onResponseSuccess.bind(this,b,f||null),error:this._onResponseError.bind(this,b,c||null)})
},abortAddressPolygon:function(){if(!this._addressPolygonXHR){return
}this._addressPolygonXHR.abort();
delete this._addressPolygonXHR
},requestSitePolygon:function(a,g,f,c){var b="SEARCH_SITE_POLYGON",e=this.API[b],d=$.extend(e.defaultParams,{coords:[a.lng(),a.lat()].join(","),keyword:g});
this._sitePolygonXHR=this._request({url:e.url,data:d,successRule:{type:"FeatureCollection"},success:this._onResponseSuccess.bind(this,b,f||null),error:this._onResponseError.bind(this,b,c||null)})
},abortSitePolygon:function(){if(!this._sitePolygonXHR){return
}this._sitePolygonXHR.abort();
delete this._sitePolygonXHR
},abortAll:function(){this.abortRegionPolygon();
this.abortAddressPolygon();
this.abortSitePolygon()
},_refineResponse:function(c,b){var a=null;
switch(c){case"SEARCH_REGION_POLYGON":case"SEARCH_ADDRESS_POLYGON":case"SEARCH_SITE_POLYGON":a=nhn.map.search.PolygonExtractor.getDrawings(b);
break
}return a
}});
(function(){iron.ns("nhn.map.search").PolygonMapViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._serviceListener={activate:this._onActivate.bind(this),deactivate:this._onDeactivate.bind(this),pause:this._onPause.bind(this),resume:this._onResume.bind(this),add:this._onAdd.bind(this),remove:this._onRemove.bind(this),clear:this._onClear.bind(this),select:this._onSelect.bind(this),deselect:this._onDeselect.bind(this),focus:this._onFocus.bind(this),blur:this._onBlur.bind(this),openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this)};
this._viewListener={CHANGE_MAP_DONE:this._onChangeMapDone.bind(this),ZOOM_MAP_END_DONE:this._onZoomMapEndDone.bind(this),load_cadastral_pane:this._onCadastralShow.bind(this),unload_cadastral_pane:this._onCadastralHide.bind(this)}
},_listenService:function(){this.$service().attach(this._serviceListener)
},_unlistenService:function(){this.$service().detach(this._serviceListener)
},_onActivate:function(){this.$view().attach(this._viewListener)
},_onDeactivate:function(){this.$view().detach(this._viewListener);
this.$view().removeAll()
},_onPause:function(){this.$view().detach(this._viewListener);
this.$view().removeAll();
this._hideLegend()
},_onResume:function(){var a=this.$service().getPolygonParamHash();
$.each(a,function(b,c){this._addPolygon(b,c)
}.bind(this));
this.$view().attach(this._viewListener);
this._showLegend()
},_onAdd:function(c){var a=c.key,b=c.polygonParam;
this._addPolygon(a,b);
this._showLegend();
if(!this._isValidLevel()||this._isActivateCadastral||this._isActivatePanorama){this._hideLegend()
}},_addPolygon:function(a,b){var c=this.$service().getVisibleLevels(b),e=this.$view().getLevel(),d=c.indexOf(e)>-1;
if(!d){return
}switch(b.type){case"REGION":this.$service().requestRegionPolygon(b.regionCode,e,this._onResponseSuccess.bind(this,a));
this._showLegend();
break;
case"ADDRESS":this.$service().requestAddressPolygon(b.center,this._onResponseSuccess.bind(this,a));
break;
case"SITE":this.$service().requestSitePolygon(b.center,b.shapeId,this._onResponseSuccess.bind(this,a));
break
}},_showLegend:function(){var b=this.$service().getPolygonParamHash(),a=Object.keys(b);
if(a.length>0&&!(this._isActivatePanorama||this._isActivateCadastral)){this.$copyRight().showCadastralResponsibilityLink()
}},_hideLegend:function(){this.$copyRight().hideCadastralResponsibilityLink()
},_onResponseSuccess:function(a,d){var c=this.$service().getPolygonParamHash(),b=Object.keys(c);
if(b.indexOf(a)>-1){this.$view().add(a,d)
}},_onRemove:function(d){var a=d.key,c=this.$service().getPolygonParamHash(),b=Object.keys(c);
this.$view().remove(a);
if(b.length===0){this._hideLegend()
}},_onClear:function(){this.$view().removeAll();
this._hideLegend()
},_onSelect:function(b){var a=b.key;
this.$view().select(a)
},_onDeselect:function(b){var a=b.key;
this.$view().deselect(a)
},_onFocus:function(b){var a=b.key;
this.$view().focus(a)
},_onBlur:function(b){var a=b.key;
this.$view().blur(a)
},_onCadastralShow:function(){this._isActivateCadastral=true
},_onCadastralHide:function(){this._isActivateCadastral=false
},_isValidLevel:function(){var b=this.$service().getPolygonParamHash(),c=this.$view().getLevel(),a=false;
$.each(b,function(d,e){if((e.type!="REGION")||(this.$service().getVisibleLevels(e).indexOf(c)>-1)){a=true;
return false
}}.bind(this));
return a
},_onOpenPanorama:function(){this._isActivatePanorama=true;
this._hideLegend()
},_onClosePanorama:function(){this._isActivatePanorama=false;
if(this._isValidLevel()){this._showLegend()
}},_onChangeMapDone:function(){this.$view().refresh()
},_onZoomMapEndDone:function(){var a=this.$service().getPolygonParamHash();
this._hideLegend();
$.each(a,function(b,c){if(c.type==="REGION"){this.$view().erase(b);
this._addPolygon(b,c)
}else{this._showLegend()
}}.bind(this));
this.$view().refresh()
}})
}());
iron.ns("nhn.map.search").PolygonMapView=iron.Class({inherit:nhn.map.Dispatcher},{STYLE:{NORMAL:{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.7",strokeStyle:"solid",fillColor:"#FF8D8D",fillOpacity:"0"},SELECT:{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.7",strokeStyle:"solid",fillColor:"#FF8D8D",fillOpacity:"0.3"},UNSELECT:{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.4",strokeStyle:"solid",fillColor:"#FF8D8D",fillOpacity:"0"},FOCUS:{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.7",strokeStyle:"solid",fillColor:"#FF8D8D",fillOpacity:"0.3"}},initialize:function(){this._drawingPool={};
this._displayDrawings=[];
this._selectKeyStack=[];
this._mapListener={CHANGE_MAP_DONE:this._onChangeMapDone.bind(this),ZOOM_MAP_END_DONE:this._onZoomMapEndDone.bind(this),load_cadastral_pane:this._onCadastralShow.bind(this),unload_cadastral_pane:this._onCadastralHide.bind(this)};
this._bindEvent()
},_onChangeMapDone:function(a){if(a.zoomed){return
}this._centerPixel=this.$map().getCenterPixel();
this.dispatch("CHANGE_MAP_DONE",a)
},_checkOverThreshold:function(){if(!this._centerPixel){return false
}var c=this.$map().getCenterPixel(),a=c.x-this._centerPixel.x,d=c.y-this._centerPixel.y,b=Math.abs(a)>50||Math.abs(d)>50;
if(b){this._centerPixel=c
}return b
},_onZoomMapEndDone:function(a){this.dispatch("ZOOM_MAP_END_DONE",a)
},_onCadastralShow:function(a){this.dispatch("load_cadastral_pane",a)
},_onCadastralHide:function(a){this.dispatch("unload_cadastral_pane",a)
},getLevel:function(){return this.$map().getLevel()
},_bindEvent:function(){this.$map().attach(this._mapListener)
},_getPane:function(){return this.$map().getPane("nmap_drawing_pane")
},add:function(a,b){if(this._drawingPool[a]){this.erase(a);
delete this._drawingPool[a]
}this._assignKey(a,b);
this._drawingPool[a]=b;
this.draw(a)
},_assignKey:function(a,b){b.forEach(function(c){c.key=a
})
},_isIntersect:function(d){var c=this.$map().getEntireBound(),e=new nhn.mapcore.LatLng(d.bbox[1],d.bbox[0]),b=new nhn.mapcore.LatLng(d.bbox[3],d.bbox[2]),a={l:e.toInner().x,b:e.toInner().y,r:b.toInner().x,t:b.toInner().y};
if(a.r<c.left){return false
}if(a.l>c.right){return false
}if(a.t<c.bottom){return false
}if(a.b>c.top){return false
}return true
},remove:function(a){this.blur(a);
this.deselect(a);
this.erase(a);
delete this._drawingPool[a]
},removeAll:function(){$.each(this._drawingPool,function(a){this.remove(a)
}.bind(this))
},draw:function(a){var b=this._drawingPool[a];
if(!b){return
}b.forEach(function(c){this._draw(c)
}.bind(this));
this.refresh()
},_draw:function(a){if(this._displayDrawings.indexOf(a)>-1){return
}if(this._isIntersect(a)){a.visible=true;
this._getPane().addOverlay(a)
}else{a.visible=false
}this._displayDrawings.push(a)
},refresh:function(){this._displayDrawings.forEach(function(a){if(this._isIntersect(a)){if(!a.visible){a.visible=true;
this._getPane().addOverlay(a)
}this._setDrawingStyle(a)
}else{a.visible=false;
this._getPane().removeOverlay(a)
}}.bind(this))
},_setDrawingStyle:function(a){if(this._focussedKey){if(this._focussedKey==a.key){a.setStyle(this.STYLE.FOCUS)
}else{a.setStyle(this.STYLE.UNSELECT)
}}else{if(this._selectKeyStack.length>0){var b=this._selectKeyStack[this._selectKeyStack.length-1];
if(a.key==b){a.setStyle(this.STYLE.SELECT)
}else{a.setStyle(this.STYLE.UNSELECT)
}}else{a.setStyle(this.STYLE.NORMAL)
}}},erase:function(a){this._displayDrawings.filter(function(b){return b.key==a
}).forEach(function(b){this._erase(b)
}.bind(this))
},_erase:function(a){if(this._displayDrawings.indexOf(a)==-1){return
}if(a.visible){a.visible=false;
this._getPane().removeOverlay(a)
}this._displayDrawings.splice(this._displayDrawings.indexOf(a),1)
},eraseAll:function(){$.each(this._drawingPool,function(a){this.erase(a)
}.bind(this))
},select:function(b){var a=this._selectKeyStack.indexOf(b)>-1;
if(a){this.deselect(b)
}this._selectKeyStack.push(b);
this.refresh()
},deselect:function(b){var a=this._selectKeyStack.indexOf(b)>-1;
if(!a){return
}this._selectKeyStack.splice(this._selectKeyStack.indexOf(b),1);
if(this._selectKeyStack.length>0){this.select(this._selectKeyStack.pop())
}else{this.refresh()
}},getDrawings:function(){return this._displayDrawings
},focus:function(a){if(this._focussedKey){this.blur(this._focussedKey)
}this._focussedKey=a;
this.refresh()
},blur:function(a){if(!this._focussedKey||a!=this._focussedKey){return
}delete this._focussedKey;
this.refresh()
}});iron.ns("nhn.map").NaverLabelMapRealTilePane=iron.Class(nhn.mapcore.AbstractRealTilePane,{_name:"labelmap",_className:"nmap_labelmap_pane",_zIndex:22,initialize:function(a){nhn.mapcore.AbstractRealTilePane.prototype.$init.apply(this,arguments);
this._redrawTiles=nhn.mapcore.AbstractRealTilePane.prototype.redrawTiles;
this._minLevel=a
},redrawTiles:function(){if(this.oApp.getZoomLevel()<this._minLevel){this._clearAllTiles()
}else{this._redrawTiles()
}}});
iron.ns("nhn.map").NaverLabelMapVirtualTilePane=iron.Class(nhn.mapcore.AbstractVirtualTilePane,{name:"labelmap",tileType:"overlay",format:"png",zIndex:22,tileName:"ol_vc_an",belongingRealPaneName:"labelmap",useTimestamp:false,initialize:function(){},ready:function(){if(this._realPane){this._realPane.$BEFORE_MSG_APP_READY()
}},refresh:function(){if(this.isActive){this.redrawTiles()
}},getPaneElement:function(){return this._realPane._paneEl.$value()
}});
(function(){var c="ol_id_bg",b="ol_id_hb_xo",a;
iron.ns("nhn.map.indoor").IndoorMapRealTilePane=iron.Class(nhn.mapcore.AbstractRealTilePane,{_name:"indoormap",_className:"indoormap_pane",_zIndex:14,initialize:function(d){nhn.mapcore.AbstractRealTilePane.prototype.$init.apply(this,arguments);
this._redrawTiles=nhn.mapcore.AbstractRealTilePane.prototype.redrawTiles;
this._minLevel=d
},redrawTiles:function(){if(this.oApp.getZoomLevel()<this._minLevel){this._clearAllTiles()
}else{this._redrawTiles()
}}});
iron.ns("nhn.map.indoor").IndoorMapVirtualTilePane=iron.Class(nhn.mapcore.AbstractVirtualTilePane,{name:"indoormap",tileType:"overlay",format:"png",zIndex:14,tileName:c,belongingRealPaneName:"indoormap",useTimestamp:false,initialize:function(d){a="?dv="+d+"&indoor=";
this.tileName=c+a+"represent"
},ready:function(){if(this._realPane){this._realPane.$BEFORE_MSG_APP_READY()
}},refresh:function(){if(this.isActive){this.redrawTiles()
}},setIndoor:function(d){if(d===undefined){this.tileName=c+a+"represent"
}else{this.tileName=b+a+d.floor+"|"+d.indoorID
}if(this.isActive){this.refresh()
}},getPaneElement:function(){return this._realPane._paneEl.$value()
}})
}());
(function(){var b="ol_id_hb",a;
iron.ns("nhn.map.indoor").ActiveIndoorMapRealTilePane=iron.Class(nhn.mapcore.AbstractRealTilePane,{_name:"active_indoormap",_className:"active_indoormap_pane",_zIndex:52,initialize:function(c){nhn.mapcore.AbstractRealTilePane.prototype.$init.apply(this,arguments);
this._redrawTiles=nhn.mapcore.AbstractRealTilePane.prototype.redrawTiles;
this._minLevel=c
},redrawTiles:function(){if(this.oApp.getZoomLevel()<this._minLevel){this._clearAllTiles()
}else{this._redrawTiles()
}}});
iron.ns("nhn.map.indoor").ActiveIndoorMapVirtualTilePane=iron.Class(nhn.mapcore.AbstractVirtualTilePane,{name:"active_indoormap",tileType:"overlay",format:"png",zIndex:52,tileName:"ol_id_hb",belongingRealPaneName:"active_indoormap",useTimestamp:false,initialize:function(c){a="?dv="+c+"&indoor="
},ready:function(){if(this._realPane){this._realPane.$BEFORE_MSG_APP_READY()
}},refresh:function(){if(this.isActive){this.redrawTiles()
}},setIndoor:function(c){if(c===undefined){this.unload()
}else{this.tileName=b+a+c.floor+"|"+c.indoorID;
this.refresh()
}},getPaneElement:function(){return this._realPane._paneEl.$value()
}})
}());
(function(){var b="ol_ip_rd",a;
iron.ns("nhn.map.indoor").IndoorViewRealTilePane=iron.Class(nhn.mapcore.AbstractRealTilePane,{_name:"indoorview",_className:"indoorview_pane",_zIndex:54,initialize:function(c){nhn.mapcore.AbstractRealTilePane.prototype.$init.apply(this,arguments);
this._redrawTiles=nhn.mapcore.AbstractRealTilePane.prototype.redrawTiles;
this._minLevel=c
},redrawTiles:function(){if(this.oApp.getZoomLevel()<this._minLevel){this._clearAllTiles()
}else{this._redrawTiles()
}}});
iron.ns("nhn.map.indoor").IndoorViewVirtualTilePane=iron.Class(nhn.mapcore.AbstractVirtualTilePane,{name:"indoorview",tileType:"overlay",format:"png",zIndex:54,tileName:"ol_ip_rd",belongingRealPaneName:"indoorview",useTimestamp:false,initialize:function(c){a="?dv="+c+"&indoor="
},ready:function(){if(this._realPane){this._realPane.$BEFORE_MSG_APP_READY()
}},refresh:function(){if(this.isActive){this.redrawTiles()
}},setIndoor:function(d){var c=d.floor+"|"+d.indoorID;
this.tileName=b+a+c;
if(this.isActive){this.refresh()
}},getPaneElement:function(){return this._realPane._paneEl.$value()
},setZIndex:function(d){var c=this.getPaneElement();
c.style.zIndex=d||this.zIndex
},getZIndex:function(){var c=this.getPaneElement();
return parseInt(c.style.zIndex,10)
}})
}());
(function(){var a=iron.ns("nhn.map.panorama").Const;
iron.ns("nhn.map.indoor").IndoorService=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){this._indoors={};
this._clickables=null;
this._isRepresent=false;
this._entryPoint=null;
this._prevIndoor={};
this._activatedIndoorsInfo={};
this._infoWindowIndoorData=null;
this._ready=false;
this._readyQueue=[]
},_onActivate:function(){var c=this,e=0,d=3;
function b(){e++;
if(e===d){c.dispatch("activate");
c._onReady()
}}this.$dao().getDataVersion(function(f){c.$dao().requestIndoorBBox(function(g){c._onResponseIndoorBBox(f,g);
b()
});
b()
});
this.$dao().requestEntryPoint(function(f){c._onResponseEntryPoint(f);
b()
})
},_onResponseIndoorBBox:function(b,c){this._dv=b;
this._indoorBBoxes=c.indoorBBox;
this._indoorMinLevel=c.indoorMinLevel
},_onDeactivate:function(){this.leaveIndoorMap();
this.dispatch("deactivate")
},isIndoorMode:function(){return !!(this._indoorID&&this._floorInfo&&this._floor)
},setIndoorState:function(b){this._isValidState=b
},setFloorInfo:function(b){this._floorInfo=b;
this.dispatch("floorInfo_changed",{floorInfo:b})
},getFloorInfo:function(){return this._floorInfo||null
},setCurrentFloor:function(b){this._floor=b?b+"":null;
this.dispatch("currentFloor_changed",{currentFloor:this._floor})
},getCurrentFloor:function(){return this._floor||null
},enterIndoorMap:function(e,c){var b=this.getIndoorID(),d=this.getCurrentFloor();
if(!e||!c||!this._isValidState){return
}if(!this.isReady()){this._addReadyQueue("enterIndoorMap",arguments);
return
}if(b===e&&d===c){return
}this.setCurrentFloor(c);
this.setIndoorID(e);
if(e!==b){this.closeIndoorList()
}this.$dao().requestIndoorUpdateInfo(e,c,function(g,f){if($.isEmptyObject(g)){this.leaveIndoorMap(true);
return
}this.setFloorInfo(f);
this._onResponseSelectedPolygon(g,e,f.zones);
this.dispatch("enterIndoorMap",{indoorID:e,prevIndoorID:b,floor:c,floorInfo:f})
}.bind(this));
window.setTimeout(function(){this._prevNscCode=nhn.map.LogClick.getNscCode();
nhn.map.LogPV("indoormap")
}.bind(this),0)
},enterIndoorMapByPolygon:function(b){this.enterIndoorMap(b.indoorID,b.floor)
},isRepresent:function(){return this._isRepresent
},setRepresent:function(b){this._isRepresent=b
},_listenBusService:function(b){this.$bus().attach({open_bus_route_layer:this._onBusRouteLayerOpen.bind(this)})
},_onBusRouteLayerOpen:function(){this.dispatch("updateInfoListZIndex")
},_listenTopicControl:function(){this.$topicControl().attach("topicOn",this._onTopicAdd.bind(this))
},_onTopicAdd:function(b){if(b.topic==="weather"||b.topic==="cctv"){this.dispatch("load_weather_or_cctv")
}},enterIndoorOnlyLevel:function(){this.$topicControl().switchOffAll();
this.$mapTypeControl().switchOffTerrain()
},leaveIndoorMap:function(b){if(!b&&!this.isIndoorMode()){return
}if(!this.isReady()){this._addReadyQueue("leaveIndoorMap",arguments);
return
}this.dispatch("beforeLeaveIndoorMap");
this._prevIndoor={indoorID:this.getIndoorID(),floor:this.getCurrentFloor()};
this.setCurrentFloor(null);
this.setFloorInfo(null);
this.setIndoorID(null);
this._activatedIndoorsInfo={};
delete this._clickables;
this.dispatch("leaveIndoorMap",{});
this.closeIndoorList();
if(this._prevNscCode){window.setTimeout(function(){nhn.map.LogClick.setNscCode(this._prevNscCode);
delete this._prevNscCode
}.bind(this),0)
}},_listenMenuBar:function(){this.$menubar().attach({after_change:this._afterChangeMapMenu.bind(this)})
},_afterChangeMapMenu:function(b){if(b.newMenu==="SUBWAY"){this.deactivate();
return
}if(b.prevMenu==="SUBWAY"&&b.newMenu!=="SUBWAY"){this.activate();
return
}},isReady:function(){return this._ready
},_addReadyQueue:function(d,e){var c=this._readyQueue,b=-1;
c.forEach(function(l,h){if(l.methodName==d){var f=true;
for(var g=0,k=l.args.length;
g<k;
g++){if(l.args[g]!=e[g]){f=false;
break
}}if(f){b=h
}}});
if(b>-1){c.splice(b,1)
}c.push({methodName:d,args:e})
},_runWhenReady:function(b,c){if(this.isReady()){this[b].apply(this,c)
}else{this._addReadyQueue(b,c)
}},_onReady:function(){this._ready=true;
this._readyQueue.forEach(function(b){this[b.methodName].apply(this,b.args)
},this);
this._readyQueue=[];
this.dispatch("ready")
},getIndoorData:function(){return this._indoors
},getIndoorDataByID:function(b){if(!this._indoors){return null
}return this._indoors[b]||null
},getIndoorName:function(){return this._indoors[this._indoorID].name
},getIndoorID:function(){return this._indoorID
},setIndoorID:function(b){this._indoorID=b
},getClickables:function(){return this._clickables
},_onResponseClickables:function(b){this._clickables=b
},isCurrentIndoorData:function(b){if(!b){return false
}return +b.underMid===+this._indoorID
},getBound:function(){if(!this._indoorID){return null
}var b=this._indoors[this._indoorID];
return[b.min.x,b.max.y,b.max.x,b.min.y]
},gatherUrlParameter:function(){if(!this.isIndoorMode()){return null
}var c=this.getIndoorID(),b=this.getCurrentFloor();
return{zoneID:c,zOrder:b}
},_listenPanorama:function(){this.$Panorama().attach({activateStreetView:this._onActivateStreetView.bind(this),deactivateStreetView:this._onDeactivateStreetView.bind(this),beforeOpenPanorama:this._beforeOpenPanorama.bind(this),afterClosePanorama:this._afterClosePanorama.bind(this),beforeClosePanorama:this._beforeClosePanorama.bind(this),panoramaStatusChanged:this._onPanoramaStatusChanged.bind(this)})
},_beforeOpenPanorama:function(e){var d=e.panoramaData,b=d.type,c=this.getIndoorID(),f=null;
if(b!==a.TYPE_INDOOR){this.leaveIndoorMap()
}this.dispatch("beforeOpenPanorama");
this.suspend()
},_afterClosePanorama:function(){this.activate();
this.resume()
},_beforeClosePanorama:function(){this.dispatch("beforeClosePanorama")
},_backupPanoramaState:function(){if(!NModules.has("panorama")){return
}var c=this.$Panorama(),d=c.isStreetActivated(),b=c.isFlightActivated();
this._panoramaState={street:d,flight:b};
d&&c.deactivateStreetView();
b&&c.deactivateFlightView()
},_restorePanoramaState:function(){if(!NModules.has("panorama")||!this._panoramaState){return
}var b=this.$Panorama(),c=this._panoramaState;
c.street&&b.activateStreetView();
c.flight&&b.activateFlightView();
delete this._panoramaState
},_onPanoramaStatusChanged:function(h){var b=h.panoramaStatus,g=b.zoneID,f=b.zorder,c=this.getIndoorID(),d=this.getCurrentFloor();
if(!g){this.leaveIndoorMap()
}else{if((g&&(g!==c))||(f&&(f!==d))){if(this.isPanoramaPlaying()){this.enterIndoorMap(g,f);
this._runWhenReady("dispatch",["activateIndoorView"])
}}}},reenterByPanoramaData:function(){var c=this._prevIndoor,b=this.$Panorama().getPanoramaData();
if(c.indoorID===b.zoneID){this.enterIndoorMap(b.zoneID,b.zorder);
this.dispatch("reactivateIndoorView")
}},selectFloor:function(g,f){this.enterIndoorMap(g,f);
this.dispatch("updateIndoorView",{indoorID:g,floor:f});
this.dispatch("closeSpotInfo");
var e=this.$search().getSelectedItem(),c=this.$bookmark().getSelectedBookmark(),d=this.$recent().getCurrentItem(),b=this.$infoWindowFacade().getCurrentWindow();
if(e){this.$search().clearSelectedItem()
}if(c){this.$bookmark().deselectBookmark(c.getBookmarkId())
}if(d){this.$recent().unselect()
}if(b){this.$infoWindowFacade().close()
}},openIndoorPanorama:function(d){var e=d.panoInfo,b=d.floor,c=this.getIndoorID();
if(!e.id){return
}e.type=a.TYPE_INDOOR;
this.enterIndoorMap(c,b);
this.openPanorama(e);
this.loadIndoorView(c,b)
},loadIndoorView:function(c,b){if(this.isPanoramaPlaying()){this.dispatch("loadIndoorView",{indoorID:c,floor:b})
}},openPanorama:function(c){var b=new nhn.map.panorama.PanoramaData(c);
this.$Panorama().openPanorama(b)
},updatePanorama:function(c){var b=this.$Panorama().getPanoramaData();
if(!b){return
}this.$Panorama().searchPanorama(b.point,c.level,a.TYPE_INDOOR,null,"indoor",{floor:c.floor,id:c.indoorID})
},closePanorama:function(){this.$Panorama().closePanorama()
},isPanoramaPlaying:function(){return this.$Panorama().isPlaying()
},_onActivateStreetView:function(){this._runWhenReady("dispatch",["activateIndoorView"])
},_onDeactivateStreetView:function(){this.dispatch("deactivateIndoorView")
},_onResponseSelectedPolygon:function(d,f,c){var b;
for(var e=0;
e<c.length;
++e){if(this.getBBoxByID(c[e].id)){b=c[e].id;
break
}}if(b&&f!==b){d[f].repZoneID=b;
this._indoors[f]=d[f]
}$.each(d,function(h,g){if(h===f){return
}if(this.isHiddenIndoor(h)){g.isLinkedHiddenIndoor=true
}}.bind(this));
this._activatedIndoorsInfo=d;
this.dispatch("updateIndoorPolygons",{indoors:d})
},isActivatedIndoorPolygon:function(b){return b&&!!this._activatedIndoorsInfo[b]
},getActivatedIndoorPolygon:function(b){return this._activatedIndoorsInfo[b]
},getCurrentLinkedIndoorInfo:function(){var c={},d={},b=this._indoorID;
$.each(this._activatedIndoorsInfo,function(e){if(e===b){d[e]=this._activatedIndoorsInfo[e]
}else{c[e]=this._activatedIndoorsInfo[e]
}}.bind(this));
return{currentIndoor:d,linkedIndoors:c}
},isHiddenIndoor:function(c){for(var b=1;
b<this._indoorBBoxes.length;
++b){if(this._indoorBBoxes[b][c]){return b
}}},isVerticalLinkedZone:function(e,d){var c=this.getIndoorDataByID(e),f=this.getIndoorDataByID(d),b;
if(c&&(d===c.repZoneID)){b=d
}else{if(f&&(e===f.repZoneID)){b=e
}}return b
},requestClickables:function(d,e){var c=this.getIndoorID(),b=this._floor;
if(!c){return
}this.$dao().getClickables(d,e,c,b,this._onResponseClickables.bind(this))
},getDataVersion:function(){return this._dv
},getBBoxes:function(){return this._indoorBBoxes[0]
},getBBoxByID:function(b){return this._indoorBBoxes[0][b]
},getBBoxByIDSearchingAll:function(f){var c=null;
for(var d=0,b=this._indoorBBoxes.length;
d<b;
d++){var e=this._indoorBBoxes[d][f];
if(e){c=e;
break
}}return c
},getIndoorMinLevel:function(){return this._indoorMinLevel
},closeIndoorList:function(){this.dispatch("closeList");
this.dispatch("unhighlightListToggle")
},unhighlightListToggle:function(){this.dispatch("unhighlightListToggle")
},openIndoorList:function(){var c=this.getFloorInfo().building,b="chars";
if(+c.locals_count===0){b="convs"
}this.$dao().requestLayerInfo(this._indoorID,b,this._onResponseLayerInfo.bind(this));
this.dispatch("openFloorInfoLayer")
},_onResponseLayerInfo:function(b,c){this.dispatch("showList",{headerInfo:this.getFloorInfo(),tabInfo:b,listInfo:c})
},drawIndoorPolygons:function(d,c){var f={},e="",b=false;
$.each(d,function(g){if(this._indoors[g]){f[g]=this._indoors[g]
}else{b=true;
e+=g+"|"
}}.bind(this));
if(b){e=e.substr(0,e.length-1);
this.$dao().requestIndoorRepPolygon(e,this._onResponseReprPolygons.bind(this,c,f))
}else{this.dispatch("drawIndoorPolygons",{indoors:f,isLeave:c})
}},_onResponseReprPolygons:function(c,d,e){var b={};
$.each(e,function(g,f){this._indoors[g]=f
}.bind(this));
$.extend(b,d,e);
this.dispatch("drawIndoorPolygons",{indoors:b,isLeave:c})
},getIndoorSpotInfo:function(b){this.$dao().requestIndoorSpotInfo(b,this._onResponseSpotInfo.bind(this))
},_onResponseSpotInfo:function(b){if(b.result.indoorMapInfo){this.enterIndoorMap(b.result.indoorMapInfo.zoneId,b.result.indoorMapInfo.zOrder)
}this.dispatch("showSpotInfo",{spotInfo:b.result})
},selectIndoorSpot:function(b){if(this.isPanoramaPlaying()){this.closePanorama()
}this.$search().clearSelectedItem();
if(b.indoorSpotID){this.getIndoorSpotInfo(b.indoorSpotID)
}else{this.dispatch("showSpotMarker",b);
this.enterIndoorMap(b.indoorID,b.floor)
}this.dispatch("updateIndoorView",{indoorID:b.indoorID,floor:b.floor})
},unselectIndoorSpot:function(){this.dispatch("closeSpotInfo")
},unselectList:function(){this.dispatch("unselectList")
},updateList:function(b){this.$dao().requestListInfo(b,this._indoorID,this._onResponseList.bind(this))
},_onResponseList:function(b){this.dispatch("showList",{listInfo:b})
},_onResponseEntryPoint:function(b){this.setEntryPoint(b.features)
},setEntryPoint:function(b){this._entryPoint=b
},getEntryPoint:function(){return this._entryPoint
},_onChangedClickablePoi:function(b){this.dispatch("clickable_poi_changed",b)
},_listenInfoWindowFacade:function(){this.$infoWindowFacade().attach({opened:this._onInfoWindowOpened.bind(this),close:this._onInfoWindowClosed.bind(this)})
},_onInfoWindowOpened:function(f){var c=f.infowindowData,d=c.indoorMapInfo,b=c.MarkerType;
if((b=="SITE"||b=="SPOT")&&!this.isPanoramaPlaying()){this.setInfoWindowIndoorData(d,c.MarkerType);
if(d){this.enterIndoorMap(d.zoneId,d.zOrder)
}else{this.leaveIndoorMap()
}}},_onInfoWindowClosed:function(d){var b=d.infoWindow,c=b.getType();
if(c==="SITE"||c==="SPOT"||c==="POI"||c==="PANORAMA"||c==="BOOKMARK_SITE"||c==="PERIMETERINFO"){this.setInfoWindowIndoorData(null)
}},setInfoWindowIndoorData:function(c,b){if(c){this._infoWindowIndoorData={indoorID:c.zoneId,floor:c.zOrder,type:b}
}else{this._infoWindowIndoorData=null
}},getInfoWindowIndoorData:function(){return this._infoWindowIndoorData
},suspend:function(){this.dispatch("suspend")
},resume:function(){this.dispatch("resume")
},reenterByInfoWindowData:function(){var d=this.getInfoWindowIndoorData(),b=d.indoorID,c=d.floor;
if(d.type=="SITE"&&b&&c){this.enterIndoorMap(b,c)
}},resizeMap:function(b){this.dispatch("resizeMap",{height:b})
}})
})();
(function(){var b="1.0",g=nhn.map.Env,h=g.getVar("panorama"),j=h.metaDomain||"pvxml.map.naver.com",d="https://${META_PATH}/api/panorama/indoor/mappings.jsonp",c="NO_VERSION";
iron.ns("nhn.map.indoor").IndoorDAO=iron.Class({inherit:nhn.map.AbstractDAO},{API:{VERSION:{url:"/external/vis",params:{request:"getSimpleVersion",apiVersion:b,output:"json",addversion:true}},VERSION_FALLBACK:{url:"/nc.onetile.map/vis",params:{request:"getSimpleVersion",apiVersion:b,output:"json",addversion:true}},BBOX:{url:"/indoor/wfsproxy/getBuildingMbr",params:{av:b,fn:"REPRESENT"}},POLYGON:{url:"/indoor/wfsproxy/getBuildingFeature",params:{av:b,o:"geojson",fv:null}},CLICKABLES:{url:"/indoor/picker/getClickable",params:{av:b,scrs:"EPSG:4326",tcrs:"EPSG:4326",o:"geojson"}},INFO:{url:"/indoor/bldg/"},SITEINFO:{url:"/search2/getSiteInfo.nhn"},ENTRY_POINT:{url:d.replace("${META_PATH}",j)}},initialize:function(){nhn.map.AbstractDAO.apply(this,arguments)
},_onSuccessVersion:function(l,k){this._dv=e(k);
l&&l(this._dv)
},_onErrorVersion:function(k){this._dv=c;
k&&k(this._dv)
},getDataVersion:function(l){var k=this.API.VERSION;
this._request({url:k.url,data:k.params,success:this._onSuccessVersion.bind(this,l),error:function(){this.getFallbackDataVersion(l)
}.bind(this)})
},getFallbackDataVersion:function(l){var k=this.API.VERSION_FALLBACK;
this._request({url:k.url,data:k.params,dataType:"jsonp",jsonp:"callback",success:this._onSuccessVersion.bind(this,l),error:this._onErrorVersion.bind(this,l)})
},_getParams:function(m,k,l){if(k){m.fn=k
}if(l){m.fv=l
}if(!m.o){m.o="json"
}if(!m.dv){m.dv=this._dv||c
}return m
},requestIndoorBBox:function(m,k){var l=this.API.BBOX;
this._request({url:l.url,data:this._getParams(l.params),success:this._onSuccessBBox.bind(this,m),error:this._onError.bind(this,k)})
},_onSuccessBBox:function(l,k){l&&l(i(k))
},requestIndoorRepPolygon:function(m,n,k){var l=this.API.POLYGON;
this._request({url:l.url,data:this._getParams(l.params,"REPRESENT",m),successRule:{features:true},success:this._onSuccessPolygon.bind(this,n),error:this._onError.bind(this,k)})
},_onSuccessPolygon:function(l,k){l&&l(f(k))
},requestIndoorUpdateInfo:function(n,o,r,k){var s=this.API.INFO,p=this.API.POLYGON,m=o+","+n,q,l;
$.when(this._request({url:s.url+n+"/floors.json",success:function(t){q=t
},error:this._onError.bind(this,k)}),this._request({url:p.url,data:this._getParams(p.params,"LINKED_ZORDER",m),successRule:{features:true},success:function(t){l=t
},error:this._onError.bind(this,k)})).done(function(){r(f(l),q)
}.bind(this))
},requestListInfo:function(n,m,p,k){var l=this.API.INFO,o;
if(n.id){o=(n.page&&n.page!==1)?n.id+"."+n.page:n.id;
o=n.tab+"/"+encodeURIComponent(o)
}else{o=(n.page&&n.page!==1)?n.tab+"."+n.page:n.tab
}this._request({url:l.url+m+"/locals/"+o+".json",success:p,error:this._onError.bind(this,k)})
},requestLayerInfo:function(o,l,q,m){var n=this.API.INFO,k,p;
$.when(this._request({url:n.url+o+"/navs.json",success:function(r){k=r
},error:this._onError.bind(this,m)}),this._request({url:n.url+o+"/locals/"+l+".json",success:function(r){p=r
},error:this._onError.bind(this,m)})).done(function(){k.enterID=l;
q(k,p)
})
},requestIndoorSpotInfo:function(l,o,k){var m=this.API.SITEINFO,n={id:l};
this._request({url:m.url,data:n,successRule:{result:true},success:o,error:this._onError.bind(this,k),isHmac:true})
},requestEntryPoint:function(m,k){var l=this.API.ENTRY_POINT;
this._request({url:l.url,successRule:{features:true},dataType:"jsonp",jsonp:"callback",success:m,error:this._onError.bind(this,k)})
},getClickables:function(p,q,n,m,o,k){var l=this.API.CLICKABLES;
l.params.coords="box("+p[0]+" "+p[3]+", "+p[2]+" "+p[1]+")";
l.params.lv=q;
this._request({url:l.url,data:this._getParams(l.params,"LINKED_ZORDER",m+","+n),successRule:{features:true},success:this._onSuccessClickables.bind(this,o),error:this._onError.bind(this,k)})
},_onSuccessClickables:function(l,k){k=a(k);
l&&l(k)
},_onError:function(o,l,n,m){o&&o();
try{console.warn("Indoor api call failed!");
console.warn(l,n,m)
}catch(k){}}});
function i(k){var m=[],q=Infinity;
for(var l=0;
l<k.length;
++l){var p=k[l],n=p.bbox,o=p.properties;
if(!m[+o.B_PRIOR]){m[+o.B_PRIOR]={}
}m[+o.B_PRIOR][o.B_ZONEID]={level:o.B_STLV,mid:o.MID,min:new nhn.mapcore.UTMK(n[0],n[1]).toInner(),max:new nhn.mapcore.UTMK(n[2],n[3]).toInner()};
if(q>o.B_STLV){q=o.B_STLV
}}return{indoorBBox:m,indoorMinLevel:q}
}function f(n){var m={},l=n.features;
for(var p=0;
p<l.length;
++p){var r=l[p],s=r.geometry,t=r.bbox,q=r.properties,k=q.B_ZONEID,u={floor:q.B_ZORDER,mid:q.MID,path:[],bType:q.B_TYPE,startLevel:q.B_STLV,name:q.NAME_FULL};
if(s.type==="Polygon"){u.path[0]=s.coordinates[0].map(function(v){return new nhn.mapcore.UTMK(v[0],v[1]).toInner()
})
}else{if(s.type==="MultiPolygon"){for(var o=0;
o<s.coordinates.length;
++o){u.path[o]=s.coordinates[o][0].map(function(v){return new nhn.mapcore.UTMK(v[0],v[1]).toInner()
})
}}else{continue
}}u.bbox={min:new nhn.mapcore.UTMK(t[0],t[1]).toInner(),max:new nhn.mapcore.UTMK(t[2],t[3]).toInner()};
m[k]=u
}return m
}function a(p){var o=p.features,n=[];
for(var m=0,k=o.length;
m<k;
++m){var q={};
q.mID=o[m].properties.mID;
q.box=o[m].bbox;
n.push(q)
}return n
}function e(k){return k.capabilities.addversions.addversion[1].catalog.last_versions.version_data
}})();
nhn.mapservice.TemplateRepos.add({indoor_map_floor_nav:function(_d_){var p=[];
with(_d_){p.push("");
var refinedFloorInfo=[];
if(panoOn){for(var i=0,l=floorInfo.length;
i<l;
++i){if(floorInfo[i].indoor_view.exist==="Y"){refinedFloorInfo.push(floorInfo[i])
}}}else{refinedFloorInfo=floorInfo
}var len=refinedFloorInfo.length,overflow=len>maxDisplayCount;
p.push(' <div class="nav_inside _none_pointer">     ');
if(len>1){p.push('         <div class="nav_floor">          ');
if(overflow){p.push('             <a href="#" class="btn_prv_floor"><span class="spmc ico_prv_floor"></span>이전</a>         ')
}p.push("          ");
for(var i=0;
i<len;
i++){p.push('             <a href="#" data-floor="',refinedFloorInfo[i].order,'">',refinedFloorInfo[i].abbr,"</a>         ")
}p.push("          ");
if(overflow){p.push('             <a href="#" class="btn_nxt_floor disabled"><span class="spmc ico_nxt_floor"></span>다음</a>         ')
}p.push("          </div>     ")
}p.push("      ");
if(showListBtn){p.push("         ");
if(isListOpen){p.push('             <a href="#" class="btn_floor btn_floor_on"><span class="spmc ico_floor"></span>층별안내</a>         ')
}else{p.push('             <a href="#" class="btn_floor"><span class="spmc ico_floor"></span>층별안내</a>         ')
}p.push("     ")
}p.push(" </div>")
}return p.join("")
},indoor_list_layer:function(_d_){var p=[];
with(_d_){p.push('<div>     <h2 class="blind">검색</h2>     <div class="panel_content">         <a class="spm btn_cls_inside" href="#">닫기</a>         <div class="inside_hd"></div>         <div class="inside_sort"></div>         <div class="scroll_y">             <div class="inside_list"></div>             <div class="paginate_wrap"></div>         </div>     </div>     <div class="layer_addr" style="z-index:150;display:none;">         <p></p>     </div> </div>')
}return p.join("")
},indoor_inside_hd:function(_d_){var p=[];
with(_d_){p.push("<h3>",name,'</h3>     <p class="inside_item_address">         ',roadAddr,'         <a href="#" class="inside_item_road_address">지번<i class="spm ico_arr_open"/></a>     </p>')
}return p.join("")
},indoor_inside_tab:function(_d_){var p=[];
with(_d_){p.push("");
var numOfTab=1,tabType;
info.hasFloors&&(info.floors.length>1)&&numOfTab++;
info.hasCates&&numOfTab++;
info.hasConvs&&numOfTab++;
if(numOfTab===2){tabType=" tab_type3"
}else{if(numOfTab===3){tabType=" tab_type2"
}}p.push('      <div class="tab',tabType,'">         <ul>             <li class="on" data-category="chars" data-code="lalltab">                 <a href="#">전체</a>             </li>             ');
if(info.hasFloors&&info.floors.length>1){p.push('             <li data-category="floors" data-code="lflrtab">                 <a href="#">층별</a>             </li>             ')
}p.push("             ");
if(info.hasCates){p.push('             <li data-category="cates" data-code="lcattab">                 <a href="#">업종별</a>             </li>             ')
}p.push("             ");
if(info.hasConvs){p.push('             <li data-category="convs" data-code="lcontab">                 <a href="#">편의시설</a>             </li>             ')
}p.push('         </ul>     </div>     <div class="tab2"></div>')
}return p.join("")
},indoor_inside_tab_sort_chars:function(_d_){var p=[];
with(_d_){p.push('<a class="w61 on" href="#" data-code="lsrtalpha">전체업체</a>     ');
for(var i=0;
i<items.length;
++i){p.push("     ");
if(items[i].has_items){p.push('     <a href="#" data-id="',items[i].id,'" data-code="lsrtalpha">',items[i].name,"</a>     ")
}else{p.push('     <a href="#" data-id="',items[i].id,'" class="disabled">',items[i].name,"</a>     ")
}p.push("     ")
}p.push("")
}return p.join("")
},indoor_inside_tab_sort_floors:function(_d_){var p=[];
with(_d_){p.push("");
var className;
if(items.length===2){className="w102"
}else{if(items.length===3){className="w77"
}else{if(items.length===4){className="w61"
}else{className="w51"
}}}p.push('     <a href="#" class="',className,' on" data-code="lstrflr">전체층</a>     ');
for(var i=0;
i<items.length;
++i){p.push("     ");
if(items[i].has_items){p.push('     <a href="#" data-id="',items[i].id,'" data-code="lstrflr" class="',className,'">',items[i].name,"</a>     ")
}else{p.push('     <a href="#" data-id="',items[i].id,'" class="',className,' disabled">',items[i].name,"</a>     ")
}p.push("     ")
}p.push("")
}return p.join("")
},indoor_inside_tab_sort_cates:function(_d_){var p=[];
with(_d_){p.push('<a href="#" class="w_cate1 on" data-code="lstrcat">전체업종</a>     ');
for(var i=0;
i<items.length;
++i){p.push("     ");
var idx=parseInt(items[i].id.substr(3,1),10);
p.push("     ");
if(items[i].has_items){p.push('     <a href="#" data-id="',items[i].id,'" data-code="lstrcat" class="w_cate',idx+1,'">         <i class="spmh ico_cate ico_cate_',idx,'"></i>         ',items[i].name,"     </a>     ")
}else{p.push('     <a href="#" data-id="',items[i].id,'" class="w_cate',idx+1,' disabled">         <i class="spmh ico_cate ico_cate_',idx,'"></i>         ',items[i].name,"     </a>     ")
}p.push("     ")
}p.push("")
}return p.join("")
},indoor_inside_tab_sort_convs:function(_d_){var p=[];
with(_d_){p.push("")
}return p.join("")
},indoor_inside_list:function(_d_){var p=[];
with(_d_){p.push("");
for(var i=0;
i<items.length;
++i){p.push('     <div class="sort_line">',items[i].type,'</div>     <ul class="inside_list_inn">         ');
for(var j=0;
j<items[i].locals.length;
++j){var item=items[i].locals[j];
p.push('         <li data-id="',item.id,'">             <div class="fr">                 ');
if(item.floor){p.push('                 <div class="inside_list_cell2">                     <em>',item.floor.abbr,"</em>                 </div>                 ")
}p.push("                 ");
if(item.phone){p.push('                 <div class="inside_list_cell3">                     <i class="spmh ico_phone"/>',item.phone,"                 </div>                 ")
}p.push("                 ");
if(item.indoor_view.id){p.push('                 <div class="inside_list_cell4">                     <a class="spm btn_inside" href="#">실내뷰</a>                 </div>                 ')
}p.push('             </div>             <div class="inside_list_cell1">                 <a href="#">',item.name,"</a>             </div>         </li>         ")
}p.push("     </ul>     ")
}p.push("")
}return p.join("")
},indoor_inside_list_convs:function(_d_){var p=[];
with(_d_){p.push("");
for(var i=0;
i<items.length;
++i){p.push('     <div class="sort_line">',items[i].type,'</div>     <ul class="inside_list_inn">         ');
for(var j=0;
j<items[i].locals.length;
++j){var item=items[i].locals[j];
p.push('         <li data-id="',item.id,'">             <div class="fr">                 ');
if(item.phone){p.push('                 <div class="inside_list_cell3">                     <i class="spmh ico_phone"/>',item.phone,"                 </div>                 ")
}p.push("                 ");
if(item.indoor_view.id){p.push('                 <div class="inside_list_cell4">                     <a class="spm btn_inside" href="#">실내뷰</a>                 </div>                 ')
}p.push('             </div>             <div class="inside_list_cell1">                 <a href="#">                     <i class="spm ico_isd ico_isd_',item.dp.iconIdx,'"></i>                     ',item.dp.name,"                 </a>             </div>         </li>         ")
}p.push("     </ul>     ")
}p.push("")
}return p.join("")
},indoor_paginate:function(_d_){var p=[];
with(_d_){p.push('<div class="paginate loaded">         <span class="pre">이전</span>         <span class="next">다음</span>         <a href="#" title="이전" class="pre">이전</a>         <a href="#" title="다음" class="next">다음</a>     </div>')
}return p.join("")
}});
(function(){var f=16,c=1,h=14,d=9,g=200,i;
var e=1,j=2,a=3;
var b=iron.ns("nhn.map.panorama").Const;
iron.ns("nhn.map.indoor").IndoorMapView=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){this.UID=iron.guid();
this.eventToken="."+this.UID;
this._redrawDelay=($.browser.msie&&parseInt($.browser.version,10)<d)?g:0;
this._mapContentEl=$("#content");
this._entryPointMarkers={};
this._entryPointState=false;
this._isLabelLoaded=false
},_onActivate:function(){i=this.$service().getIndoorMinLevel();
this._initMapType(this.$service().getDataVersion());
this._attachEvents();
this._enable()
},_onDeactivate:function(){this.$map().detach(this.eventToken);
this._disable()
},_enable:function(){if(!this._checkActiveMapType()){return
}this.$service().setIndoorState(true);
this.drawIndoorClue();
if(this._isIndoorValid()&&this.$service().getInfoWindowIndoorData()){this.$service().reenterByInfoWindowData()
}this.$service().resizeMap(this._mapContentEl.height())
},_disable:function(){this._state=a;
this._unloadPanes();
this.clearIndoorPolygons();
this.$service().setIndoorState(false)
},_suspend:function(){this.$polygon().suspend()
},_resume:function(){this.$polygon().resume()
},_listenService:function(){this.$service().attach({activate:this._onActivate.bind(this),deactivate:this._onDeactivate.bind(this),enterIndoorMap:this._onEnterIndoorMap.bind(this),leaveIndoorMap:this._onLeaveIndoorMap.bind(this),drawIndoorPolygons:this._drawIndoorPolygons.bind(this),updateIndoorPolygons:this._onUpdateIndoorPolygons.bind(this),showSpotMarker:this._showSpotMarker.bind(this),showSpotInfo:this._showSpotInfo.bind(this),closeSpotInfo:this._closeSpotInfo.bind(this),activateIndoorView:this._onActivateIndoorView.bind(this),reactivateIndoorView:this._onReactivateIndoorView.bind(this),deactivateIndoorView:this._onDeactivateIndoorView.bind(this),loadIndoorView:this._onLoadIndoorView.bind(this),updateIndoorView:this._onUpdateIndoorView.bind(this),suspend:this._suspend.bind(this),resume:this._resume.bind(this),load_weather_or_cctv:this._onLoadAdjustLevelTypePanes.bind(this),clickable_poi_changed:this._onChangedClickablePoi.bind(this)})
},_listenPolygon:function(){this.$polygon().attach("indoor_polygon_clicked",this._onClickIndoorPolygon.bind(this))
},_attachEvents:function(){var k=this.$map();
k.attach("ZOOM_MAP_START_DONE"+this.eventToken,this._onStartZoom.bind(this));
k.attach("ZOOM_MAP_END_DONE"+this.eventToken,this._onEndZoom.bind(this));
k.attach("CHANGE_MAP_DONE"+this.eventToken,this._onChangeMapDone.bind(this));
k.attach("CLICK_MAP_DONE"+this.eventToken,this._onClickMapDone.bind(this));
k.attach("load_satellite_pane"+this.eventToken,this._onLoadDisableTypePanes.bind(this));
k.attach("load_cadastral_pane"+this.eventToken,this._onLoadDisableTypePanes.bind(this));
k.attach("load_traffic_pane"+this.eventToken,this._onLoadSuspendTypePanes.bind(this));
k.attach("unload_traffic_pane"+this.eventToken,this._onUnloadSuspendTypePanes.bind(this));
k.attach("load_terrain_pane"+this.eventToken,this._onLoadAdjustLevelTypePanes.bind(this));
k.attach("load_bicycle_pane"+this.eventToken,this._onLoadAdjustLevelTypePanes.bind(this));
k.attach("load_vector_pane"+this.eventToken,this._onLoadEnableTypePanes.bind(this));
k.attach("unload_cadastral_pane"+this.eventToken,this._onLoadEnableTypePanes.bind(this));
k.attach("RESIZE_MAP_DONE"+this.eventToken,this._onResize.bind(this))
},_onLoadDisableTypePanes:function(){this._checkEntryPoint();
if(this.isIndoorMode()){this.$service().leaveIndoorMap()
}this._disable()
},_onLoadSuspendTypePanes:function(){this._setLevelToNormalMax();
this._suspend()
},_onUnloadSuspendTypePanes:function(){this._resume()
},_onLoadAdjustLevelTypePanes:function(){this._setLevelToNormalMax()
},_setLevelToNormalMax:function(){if(this.isIndoorOnlyMode()){var k=this.$map();
k.zoom(h,k.getZoomBasePoint(),{useEffect:false,relativeLevel:false})
}},_onLoadEnableTypePanes:function(){this._checkEntryPoint();
var m=this.$map().getActiveMapType();
for(var k=0;
k<m.length;
++k){var l=m[k];
if(l==="satellite"||l==="cadastral"||l==="hybrid"){if(this._state===a){return
}}}if(this._state===a){this._enable()
}},_checkActiveMapType:function(){var n=this.$map().getActiveMapType(),m=e;
for(var k=0;
k<n.length;
++k){var l=n[k];
if(l==="satellite"||l==="cadastral"||l==="hybrid"){m=a;
break
}else{if(l==="traffic"){m=j
}}}this._state=m;
if(m===a){return false
}else{return true
}},_onChangeMapDone:function(){var m=this.getLevel(),l=this.$map().getBoundAsLatLng(),k=this.$service();
if(this._entryPointState){this._checkEntryPoint()
}if(this._state===a){return
}if(m>h&&this._preLevel<h+1){k.enterIndoorOnlyLevel()
}this._preLevel=m;
this.drawIndoorClue();
if(this.isIndoorMode()){if(this._isIndoorValid()){k.requestClickables(l,m)
}else{if(!k.isPanoramaPlaying()&&this.$map().getLevel()>14){nhn.map.service.Checkout("leave_indoor_map","실내지도 제공 영역을 벗어나<br/>지도 축소 후 이동을 계속합니다.")
}k.leaveIndoorMap()
}}else{if(this._isIndoorValid()){if(k.isPanoramaPlaying()){k.reenterByPanoramaData()
}else{if(k.getInfoWindowIndoorData()){k.reenterByInfoWindowData()
}}}}},_onStartZoom:function(){var k=this.getLevel();
if(this._labelPane.isActive){this._isLabelLoaded=true;
this._labelPane.unload()
}else{this._isLabelLoaded=false
}if(k<i){this._unloadPanes();
this._activeIndoorTilePane.unload();
this.unloadIndoorView()
}},_onEndZoom:function(){if(this._isLabelLoaded){this._labelPane.load()
}if(!this.isIndoorMode()&&this.$map().getLevel()>h){var k=this.$map();
k.zoom(h,k.getZoomBasePoint(),{useEffect:false,relativeLevel:false})
}},_onClickIndoorPolygon:function(o){var n=o.domEvent,p=o.polygon,k=p.id,m=this.$service().isPanoramaPlaying(),l=this.$service().getIndoorID(),s=this.$service().getCurrentLinkedIndoorInfo(),q=(s&&s.linkedIndoors)||null,r=(q&&q[k])||null;
if(m){if(l&&(l!=k)&&!r){n.stopPropagation()
}}},drawIndoorClue:function(k){var l=this._detectIndoorBBox();
if(l){this.$service().drawIndoorPolygons(l,k);
this._loadPanes()
}else{this.clearIndoorPolygons();
this._unloadPanes()
}},_detectIndoorBBox:function(){var p=this._getBoundWithBuffer(),m=false,r=this.getLevel(),l={},k=this.$service(),o=k.getIndoorID(),q=k.getActivatedIndoorPolygon(o),n=q&&q.bbox;
$.each(k.getBBoxes(),function(t,s){if(r<s.level){return
}if(t===o&&!!n){s=$.extend({},s,n)
}if((p[0]<s.max.x&&p[3]<s.max.y)&&(p[2]>s.min.x&&p[1]>s.min.y)){m=true;
l[t]=s
}}.bind(this));
return m&&l
},_loadPanes:function(){!(this._labelPane.isActive)&&this._labelPane.load();
if(!this._indoorMapTilePane.isActive){this._indoorMapTilePane.load();
this.$service().setRepresent(true)
}},_unloadPanes:function(){if(!this._labelPane){return
}this._labelPane.isActive&&this._labelPane.unload();
if(this._indoorMapTilePane.isActive){this._indoorMapTilePane.unload();
this.$service().setRepresent(false)
}},_drawIndoorPolygons:function(k){this.$polygon().drawIndoorPolygons(k.indoors,k.isLeave)
},_onUpdateIndoorPolygons:function(l){var p=this.$service().getIndoorID(),o=l.indoors[p];
if(!o){for(var k in l.indoors){if(l.indoors.hasOwnProperty(k)){o=l.indoors[k];
p=k;
break
}}}var m=o.bbox,n=o.startLevel;
this.$polygon().updateIndoorPolygons(l.indoors,p,this.$service().isHiddenIndoor(p)&&p);
this._setIndoorBound(l.indoors);
this._indoorLevel=n
},clearIndoorPolygons:function(){this.$polygon().clearIndoorPolygons()
},_getBoundWithBuffer:function(){var l=this.$map().getBound(),m=(l[2]-l[0])/2,k=(l[1]-l[3])/2;
return[l[0]-m,l[1]+k,l[2]+m,l[3]-k]
},_getIndoorPolygonsById:function(k){return this.$polygon().getPolygons(k)
},_setIndoorBound:function(k){this._indoorBounds=[];
$.each(k,function(o,n){var m=n.bbox,l=[m.min.x,m.max.y,m.max.x,m.min.y];
this._indoorBounds.push(l)
}.bind(this))
},_isIndoorValid:function(){var l=this.$map().getEntireBound(),k=false;
if(!this._indoorBounds||!this._indoorBounds.length){return false
}if(this._indoorLevel>this.getLevel()){return false
}for(var m=0;
m<this._indoorBounds.length;
++m){if(this._indoorBounds[m][0]<l[2]&&this._indoorBounds[m][2]>l[0]&&this._indoorBounds[m][3]<l[1]&&this._indoorBounds[m][1]>l[3]){k=true;
break
}}return k
},isIndoorMode:function(){return !!this._selectedPolygons
},isIndoorOnlyMode:function(){return this.isIndoorMode()&&this.getLevel()>h
},_onEnterIndoorMap:function(l){var k=this._getIndoorPolygonsById(l.indoorID);
if(!k){this.$service().leaveIndoorMap();
return
}if(this.$service().isPanoramaPlaying()&&!this._checkActiveMapType()){this.$map().setMapType("vector");
this.$map().unloadCadastralPane()
}this._indoorMapTilePane.setIndoor({indoorID:l.indoorID,floor:l.floor});
this._activeIndoorTilePane.load();
this._activeIndoorTilePane.setIndoor({indoorID:l.indoorID,floor:l.floor});
this._selectedPolygons=k;
this.$service().requestClickables(this.$map().getBoundAsLatLng(),this.getLevel());
if(this._entryPointState){this._checkEntryPoint();
this.loadIndoorView(l.indoorID,l.floor)
}},_onLeaveIndoorMap:function(){this.drawIndoorClue("leave");
this._closeSpotInfo();
this._indoorMapTilePane.setIndoor();
this._activeIndoorTilePane.unload();
this.unloadIndoorView();
this._checkEntryPoint();
delete this._selectedPolygons
},_onResize:function(){if(!this.$service().isIndoorMode()){return
}var k=this._mapContentEl.height();
this.$service().resizeMap(k)
},_showSpotMarker:function(m){var n=this.$map(),l=this._createIndoorSpotMarker(m),o=new nhn.mapcore.LatLng(m.y,m.x),k=o.toInner();
if(!n.isInBound(k)){this.$map().panMapByPoint(k)
}this._unlistenCloseInfoWindow();
this.$infoWindowFacade().close();
this._updateIndoorSpotMarker(l)
},_createIndoorSpotMarker:function(n){var k="INDOORSPOT",m=new nhn.map.service.MarkerSpriteIcon(k),o=new nhn.map.service.SmallIcon(k),l=new nhn.map.service.Marker(m,{title:n.name,point:new nhn.mapcore.LatLng(n.y,n.x),id:n.id,type:k,smallIcon:o});
return l
},_updateIndoorSpotMarker:function(k){this._removeIndoorSpotMarker();
this.$map().addMarker(k);
k.attach({click:this._closeSpotInfo.bind(this)});
k.select();
this._indoorSpotMarker=k
},_closeSpotInfo:function(){var k=this.$service().getInfoWindowIndoorData();
if(k&&k.type=="SPOT"){this._unlistenCloseInfoWindow();
this.$infoWindowFacade().close()
}this._removeIndoorSpotMarker();
this.$service().unselectList()
},_removeIndoorSpotMarker:function(){this._indoorSpotMarker&&this.$map().removeMarker(this._indoorSpotMarker);
this._indoorSpotMarker=null
},_showSpotInfo:function(l){var m=l.spotInfo;
var k=this._createIndoorSpotMarker(m);
this._openInfoWindow(m,k.getInfo());
this._updateIndoorSpotMarker(k)
},_openInfoWindow:function(m,k){var l={};
this.$infoWindowFacade().openIndoorListWindow(m,k,l);
this._listenCloseInfoWindow()
},_listenCloseInfoWindow:function(){var k="close"+this.eventToken;
this._unlistenCloseInfoWindow();
this.$infoWindowFacade().attach(k,this._closeSpotInfo.bind(this))
},_unlistenCloseInfoWindow:function(){var k="close"+this.eventToken;
this.$infoWindowFacade().detach(k)
},_initMapType:function(m){var p=this.$map(),n=new nhn.map.indoor.IndoorMapVirtualTilePane(m),l=new nhn.map.indoor.IndoorViewVirtualTilePane(m),k=new nhn.map.NaverLabelMapVirtualTilePane(),o=new nhn.map.indoor.ActiveIndoorMapVirtualTilePane(m);
p.registerPlugin(new nhn.map.indoor.IndoorMapRealTilePane(i));
p.registerPlugin(n);
p.registerPlugin(new nhn.map.indoor.IndoorViewRealTilePane(i));
p.registerPlugin(l);
p.registerPlugin(new nhn.map.NaverLabelMapRealTilePane(i));
p.registerPlugin(k);
p.registerPlugin(new nhn.map.indoor.ActiveIndoorMapRealTilePane(i));
p.registerPlugin(o);
n.ready();
l.ready();
k.ready();
o.ready();
this._indoorMapTilePane=n;
this._viewTilePane=l;
this._labelPane=k;
this._activeIndoorTilePane=o
},_onActivateIndoorView:function(){this._processIndoorView()
},_onReactivateIndoorView:function(){this._processIndoorView()
},_processIndoorView:function(){var k=this.$service(),l=k.getCurrentFloor(),m=k.getIndoorID(),n=k.getEntryPoint();
this._addIndoorViewEntryPointMarker(n);
this._entryPointState=true;
if(!l&&!m){return
}this.loadIndoorView(m,l)
},_onDeactivateIndoorView:function(){this._removeIndoorViewEntryPointMarker();
this._entryPointState=false;
this.unloadIndoorView()
},_onLoadIndoorView:function(k){this.loadIndoorView(k.indoorID,k.floor)
},_onUpdateIndoorView:function(m){var l=m.indoorID,k=m.floor;
if(!this._viewTilePane.isActive){return
}this.loadIndoorView(l,k)
},_isIndoorView:function(){return this._entryPointState
},loadIndoorView:function(l,k){this._viewTilePane.load();
this._viewTilePane.setIndoor({indoorID:l,floor:k})
},unloadIndoorView:function(){this._viewTilePane&&this._viewTilePane.unload()
},_addIndoorViewEntryPointMarker:function(k){if(!k){return
}if(k.length){k.forEach(function(n){var m=this._generateEntryPointMarkerId(n),l=this._entryPointMarkers[m];
if(!l){l=this._createEntryPointMarker(n);
this._addEntryPointMarker(l)
}},this)
}else{this._removeIndoorViewEntryPointMarker()
}this._checkEntryPoint()
},_removeIndoorViewEntryPointMarker:function(){var k=this;
$.each(this._entryPointMarkers,function(m,l){k._removeEntryPointMarker(l)
});
this._entryPointMarkers={}
},_createEntryPointMarker:function(k){return new nhn.map.indoor.EntryPointMarker({point:new nhn.mapcore.LatLng(k.geometry.coordinates[1],k.geometry.coordinates[0]),id:this._generateEntryPointMarkerId(k),type:b.TYPE_INDOOR,title:k.properties.bzstNm,panoramaId:k.properties.panoEncdgId,pan:k.properties.camPanVal,tilt:k.properties.camTiltVal,fov:k.properties.camFovVal,zoneID:k.properties.bZoneId,zOrder:k.properties.bZorder,showLabel:true,showInfo:true,layout:2,group:"IndoorViewEntryPointMarker"},{click:this._onEntryPointMarkerClick.bind(this)})
},_onEntryPointMarkerClick:function(n){var l=n.markerInfo,m=l.id,k=this._entryPointMarkers[m];
if(!k){return
}this.$service().openPanorama(k.options)
},_addEntryPointMarker:function(k){this.$map().addMarker(k);
this._entryPointMarkers[k.getId()]=k
},_removeEntryPointMarker:function(k){this.$map().removeMarker(k);
delete this._entryPointMarkers[k.getId()]
},_checkEntryPoint:function(){var k=this.$service(),n=this.$map(),p=k.getIndoorID(),m=n.getLevel(),l=k.getCurrentLinkedIndoorInfo(),o=l.linkedIndoors;
$.each(this._entryPointMarkers,function(v,q){var u=q.options.zoneID,r=(o&&o[u])||null,s=k.getBBoxByIDSearchingAll(u);
if(s){var t=s.level;
if((m>=t)&&(!n.isActiveMapType("hybrid")&&!n.isActiveMapType("cadastral")&&!n.isActiveMapType("satellite"))){if(u==p||r){q.hide()
}else{q.show()
}}else{q.hide()
}}})
},_generateEntryPointMarkerId:function(k){return"INDOORVIEW_"+k.id
},getBBox:function(){return this.$map().getBoundAsLatLng()
},getLevel:function(){return this.$map().getLevel()
},_onChangedClickablePoi:function(k){this.$polygon().setClickablePoi(k.isClickable)
},_onClickMapDone:function(k){if(this._indoorSpotMarker){this._closeSpotInfo()
}}})
})();
(function(){iron.ns("nhn.map.indoor").IndoorClue=iron.Class($.extend({initialize:function(b,e,c,d){this._type=d;
this._repZOrder=c;
this._currFloor=c;
this.$init.apply(this,[b,a.MASK]);
this._createVisual(b);
this.setZIndex(10000);
this._setElementData(e,c)
},_setElementData:function(c,b){$(this.getElement()).addClass("_indoor_region_clue");
$(this.getVisual().getElement()).addClass("_indoor_region_clue");
$(this.getPathElement()).data({id:c,floor:b})
},getPathElement:function(){return this.path.element
},updateFloor:function(b){this._currFloor=b;
$(this.getPathElement()).data({floor:b})
},setZIndex:function(e){var c=this.getElement(),d=this.getPathElement(),b=nhn.map.shape.DrawingUtil.getDrawingType();
if(c){c.style.zIndex=e||1
}if(d&&d!==c){d.style.zIndex=e||1
}if(b==="VML"&&(d&&d.firstChild.tagName==="shape")){d.firstChild.style.zIndex=e||1
}},getZIndex:function(){var b=this.getElement();
if(b){return b.style.zIndex||1
}return 1
},_createVisual:function(b){this._visual=new nhn.mapcore.Polygon(b,a["DEFAULT_"+this._type])
},getVisual:function(){return this._visual
},refreshStyle:function(){if(!this._visual){return
}var c=this.getStyle(),b=this._visual.getStyle();
c&&this.setStyle(c);
b&&this._visual.setStyle(b)
},changeLook:function(c){var c=(c||"default").toLowerCase(),b=this.getVisual();
switch(c){case"default":this.setStyle(a.MASK);
b.setStyle(a["DEFAULT_"+this._type]);
break;
case"highlight":this.setStyle(a.MASK);
b.setStyle(a["HIGHLIGHT_"+this._type]);
break;
case"active":this.setStyle(a.MASK);
b.setStyle(a.ACTIVE);
break;
case"inactive":this.setStyle(a.MASK);
b.setStyle(a.INACTIVE);
break
}},highlight:function(){this.changeLook("highlight")
},unhighlight:function(){this.changeLook("default")
},normalize:function(){this.changeLook("default")
},activate:function(){this.changeLook("active")
},inactivate:function(){this.changeLook("inactive")
}},nhn.mapcore.Polygon.prototype));
var a={DEFAULT_1:{fillOpacity:"0.0",fillColor:"transparent",strokeOpacity:"1.0",strokeColor:"#98a7b2",strokeStyle:"solid",strokeWidth:2},DEFAULT_2:{fillOpacity:"0.5",fillColor:"#d3dbe0",strokeOpacity:"1.0",strokeColor:"#98a7b2",strokeStyle:"solid",strokeWidth:2},MASK:{fillOpacity:"0.0",fillColor:"transparent",strokeOpacity:"0.0",strokeColor:"transparent"},HIGHLIGHT_1:{fillOpacity:"0.30",fillColor:"#b8c4cc",strokeOpacity:"1.0",strokeColor:"#7a8c99",strokeStyle:"solid",strokeWidth:2},HIGHLIGHT_2:{fillOpacity:"0.60",fillColor:"#b8c4cc",strokeOpacity:"1.0",strokeColor:"#7a8c99",strokeStyle:"solid",strokeWidth:2},ACTIVE:{fillOpacity:"0.0",fillColor:"transparent",strokeOpacity:"0.0",strokeColor:"#9F0000"},INACTIVE:{fillOpacity:"0.2",fillColor:"black",strokeOpacity:"0.3"}}
})();
iron.ns("nhn.map.indoor").IndoorDrawingPane=jindo.$Class({name:"nhn.map.indoor.IndoorDrawingPane",className:"nmap_indoor_region_drawing_pane",zIndex:16,$init:function(){},redraw:function(c){var b,a;
for(b=0;
b<this.aOverlays.length;
b++){a=this.aOverlays[b];
if(!c||a instanceof nhn.mapcore.Polyline){a.redraw()
}}}}).extend(nhn.mapcore.AbstractOverlayablePane);
iron.ns("nhn.map.indoor").IndoorMapPolygon=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._drawingType=nhn.map.shape.DrawingUtil.getDrawingType();
this._listenBridge();
this._createDrawingPane();
this._indoorPolygons={};
this._replacedIDMap={};
this._replacedIDMapReverse={};
this._activatedIDs={};
this._isClickable=false
},_listenBridge:function(){this.$bridge().attach({NORMAL_MARKER_MOUSE_OVER_DONE:function(){this._insideOfmarker=true
}.bind(this),DUPLICATION_MARKER_MOUSE_OVER_DONE:function(){this._insideOfmarker=true
}.bind(this),BLUR_MARKER:function(){this._insideOfmarker=false
}.bind(this)})
},_createDrawingPane:function(){this._pane=new nhn.map.indoor.IndoorDrawingPane();
this.$map().addPane(this._pane);
$(this._pane.getElement()).disableSelection()
},drawIndoorPolygons:function(c,a){var b={};
if(a){this.clearIndoorPolygons();
$.each(c,function(e,d){this._indoorPolygons[e]=this._createPolygons(e,d)
}.bind(this));
return
}$.each(c,function(f,e){f=this._replacedIDMap[f]||f;
if(this._indoorPolygons[f]){b[f]=this._indoorPolygons[f];
delete this._indoorPolygons[f]
}else{var d;
if(this._activatedIDs[f]){d=this._createPolygons(f,e,true)
}else{d=this._createPolygons(f,e)
}b[f]=d
}}.bind(this));
if(this._indoorPolygons[this._currActivatedHiddenIndoorID]){b[this._currActivatedHiddenIndoorID]=this._indoorPolygons[this._currActivatedHiddenIndoorID];
delete this._indoorPolygons[this._currActivatedHiddenIndoorID]
}$.each(this._indoorPolygons,function(d){this._removePolygons(d)
}.bind(this));
this._indoorPolygons=b;
this._indoorRepData=c
},_createPolygons:function(g,f,e){var a=[],b=f.path.length>1?true:false;
for(var d=0;
d<f.path.length;
++d){var c=new nhn.map.indoor.IndoorClue(f.path[d],g,f.floor,f.bType);
c.isEnabled=true;
c.id=g;
c.name=f.name;
c.isPartialPolygon=b;
this._bindEvent(c);
this._addDrawing(c);
if(!!e){this._activate(c)
}a.push(c)
}return a
},_replacePolygon:function(e,b,a,d){if(!a){a=e
}if(e){this._removePolygons(e);
delete this._indoorPolygons[e];
if(e===this._currActivatedHiddenIndoorID&&e!==a){this._currActivatedHiddenIndoorID=null
}}if(a&&b){var c=this._createPolygons(a,b,d);
this._indoorPolygons[a]=c
}},_removePolygons:function(c){var a=this._indoorPolygons[c];
if(a){for(var b=0;
b<a.length;
++b){this._removeDrawing(a[b])
}}},updateIndoorPolygons:function(f,k,h){var a=this.$map().getLevel(),g=[];
this._activatedIDs={};
this._activeID=k;
if(h!==this._currActivatedHiddenIndoorID){var d=this._indoorPolygons[this._currActivatedHiddenIndoorID];
this._removePolygons(d);
delete f[this._currActivatedHiddenIndoorID]
}this._currActivatedHiddenIndoorID=h;
$.each(f,function(j,i){this._activatedIDs[j]=true;
if(i.startLevel>a||i.isLinkedHiddenIndoor){return
}if(this._indoorPolygons[j]&&this._indoorPolygons[j].length){this._updateCurrentPolygons(j,i)
}else{this._replaceCurrentPolygons(j,i)
}}.bind(this));
$.each(this._indoorPolygons,function(i){if(!f[i]){g.push(i)
}}.bind(this));
for(var e=0;
e<g.length;
++e){var b=g[e],l=this._replacedIDMapReverse[b];
if(l){this._replacePolygon(b,this._indoorRepData[l],l);
delete this._replacedIDMap[l];
delete this._replacedIDMapReverse[b]
}else{if(this._indoorRepData[b]&&this._indoorPolygons[b][0]._currFloor===this._indoorRepData[b].floor){for(var c=0;
c<this._indoorPolygons[b].length;
++c){this._normalize(this._indoorPolygons[b][c])
}}else{this._replacePolygon(b,this._indoorRepData[b],b)
}}}},_updateCurrentPolygons:function(d,c){var a=this._indoorPolygons[d];
if(c.path.length===a.length){for(var b=0;
b<a.length;
++b){this._activate(a[b]);
this._updateDrawing(a[b],{path:c.path[b],floor:c.floor})
}}else{this._replacePolygon(d,c,d,true)
}},_replaceCurrentPolygons:function(c,b){var a=false;
if(b.repZoneID){a=b.repZoneID;
this._replacedIDMap[b.repZoneID]=c;
this._replacedIDMapReverse[c]=b.repZoneID
}else{if(this._replacedIDMap[c]){a=this._replacedIDMap[c];
delete this._replacedIDMap[c];
delete this._replacedIDMapReverse[a]
}}this._replacePolygon(a,b,c,true)
},clearIndoorPolygons:function(){$.each(this._indoorPolygons,function(a){this._removePolygons(a)
}.bind(this));
this._indoorPolygons={};
this._replacedIDMap={};
this._replacedIDMapReverse={};
this._activatedIDs={};
this._activeID=null
},_onenterIndoorPolygon:function(c){if(this._suspended||!c.isEnabled){return
}if(c.isPartialPolygon){var a=this.getPolygons(c.id);
for(var b=0;
b<a.length;
++b){this._highlight(a[b])
}}else{this._highlight(c)
}},_onleaveIndoorPolygon:function(c){if(this._suspended||!c.isEnabled){return
}if(c.isPartialPolygon){var a=this.getPolygons(c.id);
for(var b=0;
b<a.length;
++b){this._normalize(a[b])
}}else{this._normalize(c)
}this.$bridge().closeLabelLayer()
},_onmoveIndoorPolygon:function(d,f){if(this._suspended||!d.isEnabled){return
}var b={type:"INDOOR",data:d.name},g=this.$map().getOffset({x:f.clientX,y:f.clientY}),c={width:30,height:0};
g.x+=20;
g.y-=25;
this.$bridge().closeLabelLayer();
var a=this.getClickablePoi();
if(!a){this.$bridge().openLabelLayer(b,g,c)
}},_onClickIndoorPolygon:function(a,b){if(a.isEnabled){nhn.map.LogClick({event:b,element:b.target,acode:"map*I.cue"})
}this.dispatch("indoor_polygon_clicked",{polygon:a,domEvent:b})
},_addDrawing:function(a){this._pane.addOverlay(a.getVisual());
this.$map().addDrawing(a)
},_updateDrawing:function(b,a){b.setPoints(a.path);
b.updateFloor(a.floor)
},_removeDrawing:function(a){this._pane.removeOverlay(a.getVisual());
this.$map().removeDrawing(a)
},_bindEvent:function(b){var a;
if(this._drawingType==="SVG"){a=$(b.getElement().getElementsByTagName("path")[0])
}else{a=$(b.getElement()).find("shape")
}a&&a.disableSelection();
a.on("mouseenter",this._onenterIndoorPolygon.bind(this,b)).on("mousemove",this._onmoveIndoorPolygon.bind(this,b)).on("mouseleave",this._onleaveIndoorPolygon.bind(this,b)).on("click",this._onClickIndoorPolygon.bind(this,b))
},_activate:function(a){a.activate();
a.isEnabled=false;
this.$bridge().closeLabelLayer();
if(a.id===this._activeID){a.setZIndex(10001)
}else{a.setZIndex(10000)
}},_normalize:function(a){a.updateFloor(a._repZOrder);
a.normalize();
a.setZIndex(10000);
a.isEnabled=true
},_highlight:function(a){a.highlight()
},getPolygons:function(a){return this._indoorPolygons[a]
},suspend:function(){this._suspended=true
},resume:function(){this._suspended=false
},setClickablePoi:function(a){this._isClickable=a
},getClickablePoi:function(){return this._isClickable
}});
(function(){var j=7,g=4;
iron.ns("nhn.map.indoor").IndoorFloorNavi=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._template=nhn.mapservice.TemplateRepos.get("indoor_map_floor_nav");
this._maxDisplayCount=j;
this._isListOpen=false;
this._panoOn=false;
this._leastVisibleIndex=Infinity;
this._lastVisibleIndex=-Infinity
},_listenService:function(){this.$service().attach({enterIndoorMap:this._showNavi.bind(this),leaveIndoorMap:this._hideNavi.bind(this),showList:e.bind(this),unhighlightListToggle:i.bind(this),resizeMap:c.bind(this),beforeOpenPanorama:k.bind(this),beforeClosePanorama:b.bind(this)})
},_showNavi:function(n){if(!this.$service().isIndoorMode()){return
}if(!this._container){this._container=$("#naver_map .copyright").parent()
}if(n.indoorID===this._indoorID){this._floor=n.floor;
this._renderFloors()
}else{if(this._isOn()){this._hideNavi()
}var m=n.floorInfo.building,l=true;
if(+m.locals_count===0&&+m.convs_count===0){l=false
}this._indoorID=n.indoorID;
this._floorInfo=n.floorInfo;
this._floor=n.floor;
this._el=$(this._template.process({floorInfo:this._floorInfo.floors,showListBtn:l,isListOpen:this._isListOpen,maxDisplayCount:this._panoOn?g:this._maxDisplayCount,panoOn:this._panoOn}));
this._floorListEl=this._el.find("a[data-floor]");
this._pArrowEl=this._el.find(".btn_prv_floor");
this._nArrowEl=this._el.find(".btn_nxt_floor");
this._listToggleEl=this._el.find(".btn_floor");
this._renderFloors();
this._container.append(this._el);
this._bindEvents()
}},_renderFloors:function(){var n=this._markSelected(),m=this._floorListEl.length,l=this._panoOn?g:this._maxDisplayCount,o=m>l;
if(!o||(n>=this._leastVisibleIndex&&n<=this._lastVisibleIndex)){return
}this._setHeight(this._maxDisplayCount)
},_renderArrows:function(){if(this._leastVisibleIndex===0){this._pArrowEl.addClass("disabled")
}else{this._pArrowEl.removeClass("disabled")
}if(this._lastVisibleIndex===this._floorListEl.length-1){this._nArrowEl.addClass("disabled")
}else{this._nArrowEl.removeClass("disabled")
}},_markSelected:function(){var l=this._el.find("a[data-floor="+this._floor+"]");
this._floorListEl.removeClass("on");
l.addClass("on");
return this._floorListEl.index(l)
},_bindEvents:function(){this._el.on("dblclick",function(l){l.stopPropagation()
});
this._pArrowEl.on("click",a.bind(this));
this._nArrowEl.on("click",h.bind(this));
this._floorListEl.on("click",d.bind(this));
this._listToggleEl.on("click",f.bind(this))
},_unbindEvents:function(){this._el.off();
this._pArrowEl.off();
this._nArrowEl.off();
this._floorListEl.off();
this._listToggleEl.off()
},_hideNavi:function(l){this._el&&this._unbindEvents();
this._el&&this._el.remove();
this._el=null;
this._floorListEl=null;
this._pArrowEl=null;
this._nArrowEl=null;
this._listToggleEl=null;
this._floor=null;
this._floorInfo=null;
this._indoorID=null;
this._leastVisibleIndex=Infinity;
this._lastVisibleIndex=-Infinity
},_isOn:function(){return !!this._indoorID
},_setHeight:function(n){var m=this._markSelected(),l=this._floorListEl.length,n=this._panoOn?g:n,p=l>n;
this._floorListEl.css("display","");
if(l-m<n){for(var o=0;
o<l;
o++){if(l-o>n){$(this._floorListEl[o]).hide()
}}this._leastVisibleIndex=l-n;
this._lastVisibleIndex=l-1
}else{for(var o=0;
o<l;
o++){if(o<m){$(this._floorListEl[o]).hide()
}else{if(o>m+n-1){$(this._floorListEl[o]).hide()
}}}this._leastVisibleIndex=m;
this._lastVisibleIndex=m+n-1
}if(!this._panoOn){this._maxDisplayCount=n
}this._renderArrows()
},_getPanoramaData:function(q){var n={},p=this._floorInfo.floors;
n.floor=q;
for(var o=0,m=p.length;
o<m;
++o){if(p[o].order===parseInt(q,10)){n.panoInfo=p[o].indoor_view;
break
}}return n
}});
function a(l){l.stopPropagation();
l.preventDefault();
if($(l.target).closest(".btn_prv_floor").hasClass("disabled")){return
}--this._leastVisibleIndex;
$(this._floorListEl[this._leastVisibleIndex]).css("display","");
$(this._floorListEl[this._lastVisibleIndex]).hide();
--this._lastVisibleIndex;
this._renderArrows()
}function h(l){l.stopPropagation();
l.preventDefault();
if($(l.target).closest(".btn_nxt_floor").hasClass("disabled")){return
}++this._lastVisibleIndex;
$(this._floorListEl[this._leastVisibleIndex]).hide();
$(this._floorListEl[this._lastVisibleIndex]).css("display","");
++this._leastVisibleIndex;
this._renderArrows()
}function d(o){o.stopPropagation();
o.preventDefault();
this._floor=$(o.target).data("floor");
var l=this._markSelected(),n=this._floorInfo.floors[l].zone_id;
if(this._panoOn){this.$service().openIndoorPanorama(this._getPanoramaData(this._floor))
}else{this.$service().selectFloor(n,this._floor)
}var m=this.$service().isPanoramaPlaying();
nhn.map.LogClick({event:o,element:o.target,acode:m?"pnd*m.flr":"map*I.flr"})
}function f(l){l.stopPropagation();
l.preventDefault();
if($(l.target).hasClass("btn_floor_on")){this.$service().closeIndoorList()
}else{this.$service().openIndoorList()
}nhn.map.LogClick({event:l,element:l.target,acode:(this.$service().isPanoramaPlaying())?"pnd*m.flrguide":"map*I.flrguide"})
}function e(l){this._listToggleEl&&this._listToggleEl.addClass("btn_floor_on");
this._isListOpen=true
}function i(l){this._listToggleEl&&this._listToggleEl.removeClass("btn_floor_on");
this._isListOpen=false
}function c(l){var m=0;
if(l.height>768){if(this._maxDisplayCount!==j){m=j
}}else{if(this._maxDisplayCount!==g){m=g
}}if(this._isOn()&&m>0){this._setHeight(m)
}}function k(){this._panoOn=true;
if(this._isOn()){var l={indoorID:this._indoorID,floorInfo:this._floorInfo,floor:this._floor};
this._hideNavi();
this._showNavi(l);
this._el.find(".nav_floor").addClass("minimode")
}}function b(){this._panoOn=false;
if(this._isOn()){var l={indoorID:this._indoorID,floorInfo:this._floorInfo,floor:this._floor};
this._hideNavi();
this._showNavi(l);
this._el.find(".nav_floor").removeClass("minimode")
}}}());
(function(){var c=600,b=5,a=30;
iron.ns("nhn.map.indoor").IndoorListView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._containerEl=$("#aside>.panel_inside");
this._layerEl=$(nhn.mapservice.TemplateRepos.get("indoor_list_layer").process());
this._headerEl=this._layerEl.find(".inside_hd");
this._tooltipEl=this._layerEl.find(".layer_addr");
this._tabEl=this._layerEl.find(".inside_sort");
this._listEl=this._layerEl.find(".inside_list");
this._paginateEl=this._layerEl.find(".paginate_wrap");
this._isOpen=false
},_listenService:function(){this.$service().attach({showList:this.show.bind(this),closeList:this.close.bind(this),unselectList:this.unselect.bind(this),resizeMap:this.updateListScroll.bind(this),updateInfoListZIndex:this.updateZIndex.bind(this)})
},isOpen:function(){return this._isOpen
},openLayer:function(e){var d=this.$panel();
this._setData(e);
this._makeHeader(e.headerInfo);
this._makeTab(e.tabInfo);
this._makeSort(e.tabInfo[this._tab]);
this._makeList(e.listInfo);
this._makePaginate(e.listInfo.page);
if(d.isFolded()){d.unfold()
}this._containerEl.html(this._layerEl);
this._attachEvent();
this.open()
},_setData:function(g){var f=g.headerInfo.building;
this._tabInfo=g.tabInfo;
this._tabInfo.hasLocals=!!+f.locals_count;
this._tabInfo.hasFloors=!!g.tabInfo.floors.length;
this._tabInfo.hasCates=!!+f.cate_locals_count;
this._tabInfo.hasConvs=!!+f.convs_count;
this._tab=g.tabInfo.enterID;
this._orderToZone={};
var e=g.headerInfo.floors||[];
for(var d=0;
d<e.length;
++d){this._orderToZone[e[d].order]=e[d].zone_id
}},getTabInfo:function(d){return this._tabInfo[d]
},getZoneIDByOrder:function(d){return this._orderToZone[d]
},_attachEvent:function(){this._layerEl.on("click","a.btn_cls_inside",this._onclickCloseBtn.bind(this));
this._headerEl.on("mouseenter","a.inside_item_road_address",this._onenterLoadAddr.bind(this));
this._headerEl.on("mouseleave","a.inside_item_road_address",this._onleaveLoadAddr.bind(this));
this._tabEl.on("click",".tab li",this._onclickTab.bind(this));
this._tabEl.on("click",".tab2 a",this._onclickSort.bind(this));
this._listEl.on("click","ul.inside_list_inn li",this._onclickListItem.bind(this));
this._listEl.on("click","a.btn_inside, a.btn_inside2",this._onclickIndoorPanoBtn.bind(this));
this._paginate&&this._paginate.attach("move",this._onclickPage.bind(this))
},open:function(){this._containerEl.css("top",this._containerEl.parent().height()+"px");
this._containerEl.show();
this._containerEl.stop().animate({top:"0px"},600,function(){this.updateListScroll()
}.bind(this));
this._containerEl.css("zIndex",10020);
this._isOpen=true
},show:function(d){if(!this.isOpen()){this.openLayer(d)
}else{this._makeList(d.listInfo)
}this._refreshScrollTop()
},close:function(){if(!this.isOpen()){return
}this._containerEl.off();
this._paginate&&this._paginate.detach("move");
this._containerEl.hide();
this._isOpen=false;
this._paginate=null;
this._tab=null;
this._sortID=null
},unselect:function(){var d="inside_list_on";
this._listEl.find("li").removeClass(d)
},_makeHeader:function(d){var e=nhn.mapservice.TemplateRepos.get("indoor_inside_hd").process({roadAddr:d.building.road_addr,name:d.zones.map(function(f){return f.name
}).join(",")});
e=e.replace(/\s{2,}/g,"");
this._tooltipEl.find("p").text(d.building.addr);
this._headerEl.html(e)
},_makeTab:function(d){if(!d.hasLocals){this._tabEl.empty();
return
}var e=nhn.mapservice.TemplateRepos.get("indoor_inside_tab").process({info:d});
this._tabEl.html(e)
},_makeSort:function(d){var e="indoor_inside_tab_sort_"+this._tab,g=this._tabEl.find(".tab2"),f=nhn.mapservice.TemplateRepos.get(e).process({items:d});
if(!g.length){return
}f=f.replace(/\s{2,}/g,"");
g.empty().html(f);
if(this._tab==="chars"){g.find('[data-id="#ABC"]').addClass("w61 type_roman")
}this.updateListScroll()
},_makeList:function(j){var g,d,e;
if(this._tab==="convs"){d=this._getRefinedConvsData(j.items);
e="indoor_inside_list_convs"
}else{d=j.items;
e="indoor_inside_list"
}g=nhn.mapservice.TemplateRepos.get(e).process({items:d});
this._setListData(d);
this._listEl.html(g);
var i=this._paginate;
if(i){var h=j.page,f=h.total*a;
if(i.getItemCount()!==f){i.reset(f)
}i.movePageTo(h.current,false)
}},_getRefinedConvsData:function(d){var f={"0201":12,"0202":11,"0203":8,"0204":9,"0205":2,"0206":3,"0207":4,"0208":13,"0209":10,"0210":7,"0211":6,"0212":5};
for(var g=0;
g<d.length;
++g){var h=d[g];
for(var e=0;
e<h.locals.length;
++e){h.locals[e].dp.iconIdx=f[h.locals[e].dp.raw_id]||14
}}return d
},_setListData:function(d){this._listData={};
for(var f=0;
f<d.length;
++f){var g=d[f];
for(var e=0;
e<g.locals.length;
++e){this._listData[g.locals[e].id]=$.extend(g.locals[e],{type:g.type})
}}},getListData:function(d){return this._listData[d]
},updateListScroll:function(){if(!this.isOpen()){return
}var d=this._containerEl.height()-(this._headerEl.height()+this._tabEl.height());
this._listEl.parent().height(d-35)
},updateZIndex:function(){this._containerEl.css("zIndex",10019)
},_makePaginate:function(e){var d=$(nhn.mapservice.TemplateRepos.get("indoor_paginate").process());
this._paginate=new nhn.Pagination(d[0],{nItem:e.total*a,nItemPerPage:a,nPagePerPageList:b,sMoveUnit:"pagelist",nPage:1,elPrevPageLinkOn:d.find("a.pre")[0],elNextPageLinkOn:d.find("a.next")[0]});
this._paginate.movePageTo(e.current);
this._paginateEl.html(d)
},_onclickCloseBtn:function(d){this.close();
this.$service().unhighlightListToggle();
nhn.map.LogClick({event:d,element:d.target,acode:"map*I.lclose"})
},_onenterLoadAddr:function(d){var f=$(d.currentTarget).offset();
this._tooltipEl.show().offset({top:f.top+18,left:f.left+14})
},_onleaveLoadAddr:function(d){this._tooltipEl.offset({top:0,left:0}).hide()
},_onclickTab:function(g){var f=$(g.currentTarget),d=f.data("code");
this._tab=f.data("category");
this._sortID=null;
if(d){nhn.map.LogClick({event:g,element:g.target,acode:"map*I."+d})
}if(f.hasClass("on")){return
}f.siblings().removeClass("on");
f.addClass("on");
this._makeSort(this.getTabInfo(this._tab));
this.$service().updateList({tab:this._tab})
},_onclickSort:function(g){var f=$(g.currentTarget),h=f.data("id"),d=f.data("code");
if(d){nhn.map.LogClick({event:g,element:g.target,acode:"map*I."+d})
}if(f.hasClass("on")||f.hasClass("disabled")){return
}this._sortID=h;
f.siblings().removeClass("on");
f.addClass("on");
this.$service().updateList({tab:this._tab,page:g.nPage,id:this._sortID})
},_onclickListItem:function(d){var i=$(d.currentTarget),h=i.data("id"),g=this.getListData(h),f="inside_list_on";
d.preventDefault();
if(i.hasClass(f)){i.removeClass(f);
this.$service().unselectIndoorSpot()
}else{this.unselect();
i.addClass(f);
this.$service().selectIndoorSpot({indoorSpotID:g.local_num,id:h,name:$.trim(g.name)?g.name:g.dp.name,floor:g.floor.order,indoorID:this.getZoneIDByOrder(g.floor.order),x:g.lng,y:g.lat})
}nhn.map.LogClick({event:d,element:d.target,acode:"map*I.lselname"})
},_onclickIndoorPanoBtn:function(d){var g=$(d.target).closest("li").data("id"),f=this.getListData(g);
d.preventDefault();
d.stopPropagation();
this.$service().openIndoorPanorama({panoInfo:f.indoor_view,floor:f.floor.order});
nhn.map.LogClick({event:d,element:d.target,acode:"map*I.lselipano"})
},_onclickPage:function(d){this.$service().updateList({tab:this._tab,page:d.nPage,id:this._sortID})
},_refreshScrollTop:function(){this._listEl.parent().scrollTop(0)
}})
})();
(function(b){var a=b.Marker.prototype;
iron.ns("nhn.map.indoor").EntryPointMarker=iron.Class({inherit:b.Marker},{initialize:function(c,e){var d=new b.MarkerSpriteIcon("INDOORVIEW","mmk.indoorpano"),f=new b.SmallIcon("INDOORVIEW");
c.smallIcon=f;
a.initialize.call(this,d,c);
e&&this.attach(e)
},onadd:function(){a.onadd.apply(this,arguments);
$(this.getElement()).addClass("_none_pointer")
}})
})(iron.ns("nhn.map.service"));(function(){iron.ns("nhn.map.panorama").StreetRealTilePane=iron.Class(nhn.mapcore.AbstractRealTilePane,{_name:"street",_className:"street_pane",_zIndex:50,suffix:window.tileVersion?("?dv="+(tileVersion.dv||"1608.007")):"",initialize:function(){nhn.mapcore.AbstractRealTilePane.apply(this);
var b=this;
this._urlRule._makeLayerStr=function(){var c=b.oApp,e=b.suffix,d="";
if(c.isActiveMapType("vector")||c.isActiveMapType("terrain")){d="ol_vc_an"
}else{if(c.isActiveMapType("hybrid")){d="ol_st_an"
}}if(c.isActiveMapType("cadastral")){d=""
}var f=nhn.mapcore.RealTileUrlRule.prototype._makeLayerStr.apply(this);
if(d){f+=("/"+d)
}f+=e;
b._currentLayerString=f;
return f
}},getCurrentLayerStr:function(){return this._currentLayerString
},makeLayerStr:function(){return this._urlRule._makeLayerStr()
}});
var a=nhn.mapcore.AbstractVirtualTilePane.prototype;
iron.ns("nhn.map.panorama").StreetVirtualTilePane=iron.Class(nhn.mapcore.AbstractVirtualTilePane,{name:"street",tileType:"overlay",_className:"street_pane",className:"street_pane",tileName:"ol_pn_rd",belongingRealPaneName:"street",format:"png",zIndex:50,ready:function(){a.$BEFORE_MSG_APP_READY.apply(this);
this._checkMapState()
},$ON_MSG_APP_READY:function(){this._checkMapState()
},_checkMapState:function(){if(this.oApp.isActiveMapType("street")){this.load();
this._bLoaded=true
}},$ON_LOAD_STREET_PANE:function(){this.load();
this._bLoaded=true
},$ON_UNLOAD_STREET_PANE:function(){this.unload();
this._bLoaded=false
},$ON_REGISTER_MAP_TYPE:function(c){if(!this._bLoaded){return
}if(c!=="hybrid"&&c!=="vector"&&c!=="terrain"&&c!=="cadastral"){return
}var e=this._realPane,b=e.getCurrentLayerStr(),d=e.makeLayerStr();
if(b===d){return
}this.redrawTiles()
},$ON_UNREGISTER_MAP_TYPE:function(c){if(!this._bLoaded){return
}if(c!=="hybrid"&&c!=="vector"&&c!=="terrain"&&c!=="cadastral"){return
}var e=this._realPane,b=e.getCurrentLayerStr(),d=e.makeLayerStr();
if(b===d){return
}this.redrawTiles()
}})
}());
(function(){var a=iron.ns("nhn.map.panorama").Const;
iron.ns("nhn.map.panorama").PanoramaData=iron.Class({initialize:function(e){var b,c,d;
this.id=e.panoramaId||e.id||null;
if(e.point){this.point=e.point
}else{if(e.lat&&e.lng){this.point={x:e.lng,y:e.lat,lng:e.lng,lat:e.lat}
}else{this.point=null
}}this.type=e.type||null;
if(this.type==a.TYPE_FLIGHT){b=0;
c=-30;
d=124
}else{b=0;
c=0;
d=120
}e.pan=parseFloat(e.pan,10);
e.tilt=parseFloat(e.tilt,10);
e.fov=parseFloat(e.fov,10);
this.pan=isNaN(e.pan)?b:e.pan;
this.tilt=isNaN(e.tilt)?c:e.tilt;
this.fov=isNaN(e.fov)?d:e.fov;
e.layout=parseInt(e.layout,10);
this.layout=!isNaN(e.layout)&&e.layout>=0?e.layout:2;
this.pois=e.pois||e.Pois||[];
this.autotour=e.autotour||false;
this.mapLevel=e.mapLevel||null;
this.poi=e.poi;
this.sky=e.sky;
if(e.artifactid){this.artifactid=e.artifactid
}if(e.pastId){this.pastId=e.pastId
}if(e.isOpenInfoWindowWithMarker){this.isOpenInfoWindowWithMarker=e.isOpenInfoWindowWithMarker
}}})
}());
iron.ns("nhn.map.panorama").StreetCursorDecorator=iron.Class({inherit:nhn.map.Dispatcher},{WIDTH:40,HEIGHT:32,initialize:function(){var a=$.browser.msie&&$.browser.version<8;
this._moveOffset=a?2:0;
this._uid="PanoramaService_"+(+new Date());
this._eventToken=this._uid+"_cursor";
this._visibility=false;
this._template=nhn.mapservice.TemplateRepos.get("street_cursor");
this._lastPoint={x:0,y:0};
this._domReady()
},getUID:function(){return this._uid
},_domReady:function(){if(!this._el||!this._el.length){this._el=$(this._template.process());
this._dirEl=this._el.find("div.dir_icon");
this._iconEl=this._dirEl.find("img")
}},getElement:function(){return this._el[0]
},show:function(){if(this._iconEl.data("lazyLoaded")!="true"){this._iconEl.M_lazyloadImg();
this._iconEl.data("lazyLoaded","true")
}this._el.show();
this._visibility=true
},hide:function(){this._el.hide();
this._visibility=false
},getVisibility:function(){return this._visibility||false
},move:function(a,d){var c=this._moveOffset,b=nhn.map.DOMCache.getDocument();
this._el.css({left:(a-(this.WIDTH/2)-c)+b.scrollLeft(),top:(d-this.HEIGHT-c)+b.scrollTop()})
},setDirection:function(b){var c="pano_dir pano_dir_move",a=a||0;
switch(b){case"left":c+=" pano_dir_left";
break;
case"right":c+=" pano_dir_right";
break;
case"center":break
}if(b=="none"){this._dirEl.addClass("dir_icon_none")
}else{this._dirEl.removeClass("dir_icon_none")
}this._direction=b;
this._el[0].className=c
},getDirection:function(){return this._direction||"none"
},_bindMapEvent:function(){$(this._target.getMapElement()).on("mousemove."+this._eventToken,this._onMouseMove.bind(this)).on("mouseleave."+this._eventToken,this._onMouseLeave.bind(this))
},_unbindMapEvent:function(){$(this._target.getMapElement()).off("mousemove."+this._eventToken).off("mouseleave."+this._eventToken)
},decorate:function(a){this._target=a;
a.getStaticContainer().appendChild(this.getElement());
a.setCursor("openhand");
this._bindMapEvent();
this.show();
this.move(-10000,-10000)
},undecorate:function(b){if(!this._target){return false
}var a=$(this.getElement());
this.hide();
this._unbindMapEvent();
b.setCursor("default");
a.remove();
delete this._target
},enable:function(){this.resume();
this._disabled=false
},disable:function(){this.pause();
this._disabled=true
},pause:function(){this._paused=true
},resume:function(){this._paused=false
},_onMouseMove:function(h){var g=$(h.target),f=this._lastPoint.x,a=this._target.getMapOffset({x:h.clientX,y:h.clientY}),c=a.x,b=this.getVisibility(),d=!!g.closest("._none_pointer").length;
if(this._paused){return
}if(!d&&!this._disabled){b||this.show();
this.move(a.x,a.y);
if(f>c){this.setDirection("left")
}else{if(f<c){this.setDirection("right")
}else{this.setDirection("center")
}}}else{b&&this.hide()
}this._lastPoint=a
},_onMouseLeave:function(){this.hide()
}});
(function(b){var a=b.Marker.prototype;
iron.ns("nhn.map.panorama").FlightMarker=iron.Class({inherit:b.Marker},{initialize:function(d,f){var c=d.code?"FLIGHTG":"FLIGHT",e=new b.MarkerSpriteIcon(c),g=new b.SmallIcon(c);
d.smallIcon=g;
a.initialize.call(this,e,d);
f&&this.attach(f)
},onadd:function(){a.onadd.apply(this,arguments);
$(this.getElement()).addClass("_none_pointer")
}})
})(iron.ns("nhn.map.service"));
(function(b){var a=b.Marker.prototype;
iron.ns("nhn.map.panorama").MuseumMarker=iron.Class({inherit:b.Marker},{initialize:function(c,e){var d=new b.MarkerSpriteIcon("MUSEUM","mmk.inside"),f=new b.SmallIcon("MUSEUM");
c.smallIcon=f;
a.initialize.call(this,d,c);
e&&this.attach(e)
},onadd:function(){a.onadd.apply(this,arguments);
$(this.getElement()).addClass("_none_pointer")
}});
iron.ns("nhn.map.panorama").InteriorMarker=iron.Class({inherit:b.Marker},{initialize:function(c,e){var d=new b.MarkerSpriteIcon("INTERIOR","mmk.insidepano"),f=new b.SmallIcon("INTERIOR");
c.smallIcon=f;
a.initialize.call(this,d,c);
e&&this.attach(e)
},onadd:function(){a.onadd.apply(this,arguments);
$(this.getElement()).addClass("_none_pointer")
}})
})(iron.ns("nhn.map.service"));
(function(b){var a=b.Marker.prototype;
iron.ns("nhn.map.panorama").MarineMarker=iron.Class({inherit:b.Marker},{initialize:function(d,f){var c=d.code?"MARINEG":"MARINE",e=new b.MarkerSpriteIcon(c),g=new b.SmallIcon(c);
d.smallIcon=g;
a.initialize.call(this,e,d);
f&&this.attach(f)
},onadd:function(){a.onadd.apply(this,arguments);
$(this.getElement()).addClass("_none_pointer")
}})
})(iron.ns("nhn.map.service"));
iron.ns("nhn.map.panorama").AvatarSpriteIcon=iron.Class({inherit:nhn.map.Icon},{initialize:function(a){this.INDEX_TABLE=[{min:-11.25,max:11.25,index:0},{min:-33.75,max:-11.25,index:15},{min:-56.25,max:-33.75,index:14},{min:-78.75,max:-56.25,index:13},{min:-101.25,max:-78.75,index:12},{min:-123.75,max:-101.25,index:11},{min:-146.25,max:-123.75,index:10},{min:-168.75,max:-146.25,index:9},{min:146.25,max:168.75,index:7},{min:123.75,max:146.25,index:6},{min:101.25,max:123.75,index:5},{min:78.75,max:101.25,index:4},{min:56.25,max:78.75,index:3},{min:33.75,max:56.25,index:2},{min:11.25,max:33.75,index:1}];
this.setAvatarType(a||3);
this._draw()
},setAvatarType:function(a){this._avatarType=a;
this._imgUrl="https://ssl.pstatic.net/static/maps2/ico_pano_dir_final.png";
switch(this._avatarType){case 1:this._imgUrl="https://ssl.pstatic.net/static/maps2/ico_air_dir_final.png";
this.setSize(new nhn.map.Size(42,32));
this.setOffset(new nhn.map.Size(21,32));
break;
case 3:case 5:this.setSize(new nhn.map.Size(40,32));
this.setOffset(new nhn.map.Size(20,32));
break;
case 12:this._imgUrl="https://ssl.pstatic.net/static/maps/img/ico_ocean_dir.png";
this.setSize(new nhn.map.Size(35,32));
this.setOffset(new nhn.map.Size(17,32));
break
}if(this._avatarEl){this._avatarEl.find("img").attr("src",this._imgUrl);
if(this._avatarType==12){this._avatarEl.find("img").attr({width:560,height:36})
}}},getAvatarType:function(){return this._avatarType
},_draw:function(){this._avatarEl=$('<div class="dir_icon"><img src="https://ssl.pstatic.net/static/maps2/ico_pano_dir_final.png" width="900" height="400" alt="" /></div>');
this._dirEl=$('<div class="dir_target"><img src="https://ssl.pstatic.net/static/maps2/ico_pano_dir_final.png" width="900" height="400" alt="" style="left:0;" /><img class="pano_blink" src="https://ssl.pstatic.net/static/maps2/bg_pano_blink4.gif" width="8" height="7" alt="" /></div>');
this._dirWidth=40;
this._avatarEl.find("img").attr("src",this._imgUrl);
if(this._avatarType==12){this._avatarEl.find("img").attr({width:560,height:36})
}},setDirection:function(a){if(a<0){a=0
}if(a>15){a=15
}this._avatarEl.find("img").css("left",a*-this.getSize().width);
this._dirEl.find("img:eq(0)").css("left",a*-this._dirWidth)
},setDirectionByPan:function(b){var a=-1;
if(b<-168.75||b>=168.75){a=8
}this.INDEX_TABLE.forEach(function(c){if(c.min<=b&&c.max>b){a=c.index
}});
if(a>-1&&a<16){this.setDirection(a)
}},getAvatarElement:function(){return this._avatarEl[0]
},getDirectionElement:function(){return this._dirEl[0]
}});
iron.ns("nhn.map.panorama").AbstractPanoramaAvatar=iron.Class({inherit:nhn.map.service.Marker},{setDirection:function(a){var b=this.getIcon();
b.setDirection(a)
},setDirectionByPan:function(b){var a=this.getIcon();
a.setDirectionByPan(b)
},setIcon:function(a){this._icon=a;
this._setMarkerSprite()
},_setMarkerSprite:function(){var a=this.getIcon();
if(this.options.pan){a.setDirectionByPan(this.options.pan)
}this.element.empty();
this.element.append(a.getAvatarElement());
this.element.append(a.getDirectionElement());
this.element.css({width:a.getWidth(),height:a.getHeight(),overflow:"visible"})[0].className="_nmap_marker _none_pointer pano_dir"
}});
(function(){var c=iron.ns("nhn.map.panorama"),b=c.AbstractPanoramaAvatar.prototype,a=c.Const;
c.StreetAvatar=iron.Class({inherit:c.AbstractPanoramaAvatar},{initialize:function(d){var f=a.TYPE_STREET,e=new c.AvatarSpriteIcon(f);
d.id="STREET_AVATAR";
d.type=f;
b.initialize.call(this,e,d);
this._doc=nhn.map.DOMCache.getDocument();
this.uncoverable=true;
this._underIE8=!!($.browser.msie&&parseInt($.browser.version,10)<=8);
this.element.addClass("nclicks(pno*m.streeticon)")
},_initDragMove:function(){this.element.on("mousedown",this._onDragMouseDown.bind(this))
},_onDragMouseDown:function(f){f.preventDefault();
var d=this.options.id;
this._dragMouseDownPoint={x:f.clientX,y:f.clientY};
this._doc.on("mousemove."+d,this._onDragMouseMove.bind(this)).on("mouseup."+d,this._onDragMouseUp.bind(this));
if(this._underIE8){this._doc.on("mouseleave."+d,this._onDragCancel.bind(this))
}this.dispatch("mousedown")
},_onDragMouseMove:function(g){if(!this._dragMouseDownPoint){return
}var d={x:g.clientX,y:g.clientY},f=this._dragMouseDownPoint;
if(!this._dragging){var h=Math.abs(d.x-f.x)+Math.abs(d.y-f.y);
if(h>10){this._dragging=true;
this.dispatch("dragstart",{point:d,domEvent:g})
}else{return
}}this.dispatch("dragmove",{point:d,domEvent:g})
},_onDragMouseUp:function(g){var f=this.options.id;
if(this._dragging){var d={x:g.clientX,y:g.clientY};
delete this._dragging;
this.dispatch("dragend",{point:d,domEvent:g})
}delete this._dragMouseDownPoint;
this._doc.off("mousemove."+f).off("mouseup."+f).off("mouseleave."+f);
this.dispatch("mouseup")
},_onDragCancel:function(){var d=this.options.id;
delete this._dragMouseDownPoint;
delete this._dragging;
this._doc.off("mousemove."+d).off("mouseup."+d).off("mouseleave."+d);
this.dispatch("dragcancel")
},onadd:function(){b.onadd.apply(this,arguments);
this._initDragMove()
},onremove:function(){this.element.off("mousedown");
b.onremove.apply(this,arguments)
}})
}());
(function(){var c=iron.ns("nhn.map.panorama"),b=c.AbstractPanoramaAvatar.prototype,a=c.Const;
c.FlightAvatar=iron.Class({inherit:c.AbstractPanoramaAvatar},{initialize:function(d){var f=a.TYPE_FLIGHT,e=new c.AvatarSpriteIcon(f);
d.id="FLIGHT_AVATAR";
d.type=f;
b.initialize.call(this,e,d);
this.uncoverable=true
},_setMarkerSprite:function(){b._setMarkerSprite.call(this);
this.element.addClass("air_dir")
}})
}());
(function(){var c=iron.ns("nhn.map.panorama"),b=c.AbstractPanoramaAvatar.prototype,a=c.Const;
c.MarineAvatar=iron.Class({inherit:c.AbstractPanoramaAvatar},{initialize:function(d){var f=a.TYPE_MARINE,e=new c.AvatarSpriteIcon(f);
d.id="FLIGHT_AVATAR";
d.type=f;
b.initialize.call(this,e,d);
this.uncoverable=true
},_setMarkerSprite:function(){b._setMarkerSprite.call(this);
this.element.addClass("ocean_dir")
}})
}());
iron.ns("nhn.map.panorama").PanoramaDAO=iron.Class({inherit:nhn.map.AbstractDAO},{API:{FLIGHT_SPOT:"/common2/searchPanorama.nhn",PANORAMA_DATA:"/panorama/getPanorama.nhn",MUSEUM_SPOT:"https://${META_PATH}/api/panorama/inside/mappings.jsonp",INTERIOR_SPOT:"https://${META_PATH}/api/panorama/interior/mappings.jsonp"},initialize:function(){var a=nhn.map.panorama.Const.META_PATH;
this.API.MUSEUM_SPOT=this.API.MUSEUM_SPOT.replace("${META_PATH}",a);
this.API.INTERIOR_SPOT=this.API.INTERIOR_SPOT.replace("${META_PATH}",a)
},_getMinMaxPointFromBound:function(a){return{min:new nhn.mapcore.Inner(Math.min(a.left,a.right),Math.min(a.top,a.bottom)).toLatLng(),max:new nhn.mapcore.Inner(Math.max(a.left,a.right),Math.max(a.top,a.bottom)).toLatLng()}
},_onResponseSuccess:function(a,c,b){this.dispatch("responseSuccess",{api:a,response:b});
c&&c(b)
},_onResponseError:function(a,b){this.dispatch("responseError",{api:a});
b&&b()
},requestFlightSpots:function(c,a,i,b){this.abortFlight();
var g="FLIGHT_SPOT",f=this._getMinMaxPointFromBound(c),e=f.min,h=f.max,d={ltX:e.x,ltY:h.y,rbX:h.x,rbY:e.y,dlevel:a};
if(e.x===h.x&&e.y===h.y){return
}this._flightXHR=this._request({url:this.API[g],data:d,successRule:{result:true,error:false},success:this._onResponseSuccess.bind(this,g,i||null),error:this._onResponseError.bind(this,g,b||null)})
},abortFlight:function(){this._flightXHR&&this._flightXHR.abort()
},requestPanoramaData:function(b,h,a,f,g,c){this.abortPanoramaData();
var e="PANORAMA_DATA",d={type:a,lat:b.y,lng:b.x,zoomlevel:h};
if(!!f){d.zoneID=f.id;
d.zOrder=f.floor
}this._panoramaXHR=this._request({url:this.API[e],data:d,successRule:{error:false,result:{error:false}},success:this._onResponseSuccess.bind(this,e,g||null),error:this._onResponseError.bind(this,e,c||null)})
},abortPanoramaData:function(){this._panoramaXHR&&this._panoramaXHR.abort()
},requestMuseumSpots:function(b,d,c,a){this._requestInsideSpots("MUSEUM_SPOT",b,d,c,a)
},requestInteriorSpots:function(b,d,c,a){this._requestInsideSpots("INTERIOR_SPOT",b,d,c,a)
},_requestInsideSpots:function(g,c,a,i,b){var f=this._getMinMaxPointFromBound(c),e=f.min,h=f.max,d={bbox:[e.x,e.y,h.x,h.y].join(","),level:a};
this._request({url:this.API[g],dataType:"jsonp",data:d,jsonp:"callback",successRule:{features:true},success:this._onResponseSuccess.bind(this,g,i||null),error:this._onResponseError.bind(this,g,b||null)})
}});
(function(){var a=nhn.map.Size;
iron.ns("nhn.map.panorama").PanoramaLayout=iron.Class({inherit:nhn.map.Dispatcher},{MIN_CLIENT_HEIGHT:777,initialize:function(){var c=document,b=nhn.map.Env.getUIEnv();
this._underIE7=$.browser.msie&&$.browser.version<=7;
this._uid="PanoramaLayout_"+(+new Date());
this._document=c.documentElement||c.body;
this.setDisabledSize(a.create(b.DISABLED_WIDTH,b.DISABLED_HEIGHT));
this.setPanoramaSize(a.create(0,0));
this.setMinimapSize(a.create(0,0));
this.determineAvailSize()
},getUID:function(){return this._uid
},activate:function(){if(this._activated){return
}this._bindResizeEvent();
this._activated=true
},deactivate:function(){if(!this._activated){return
}this._unbindResizeEvent();
this._activated=false
},isActivated:function(){return !!this._activated
},enableAutosize:function(){this._autoSize=true
},disableAutosize:function(){this._autoSize=false
},isEnabledAutosize:function(){return !!this._autoSize
},setDisabledSize:function(b){this._disabledSize=b
},getDisabledSize:function(){return this._disabledSize.copy()
},setPanoramaSize:function(b){this._panoramaSize=b
},getPanoramaSize:function(){return this._panoramaSize.copy()
},setMinimapSize:function(b){this._minimapSize=b
},getMinimapSize:function(){return this._minimapSize.copy()
},_getClientSize:function(){var c=navigator.userAgent,b=(c.indexOf("WebKit")>-1||c.indexOf("Chrome")>-1),d=(b)?a.create(window.innerWidth,window.innerHeight):a.create(this._document.clientWidth,this._document.clientHeight);
d.height=Math.max(this.MIN_CLIENT_HEIGHT,d.height);
return d
},determineAvailSize:function(){var b=this.$mapresizer().getMapSize();
this._availSize=a.create(b.width,b.height)
},getAvailSize:function(){return this._availSize.copy()
},clearLayout:function(){this._layout=null
},setLayout:function(b){this._layout=parseInt(b,10)
},getLayout:function(){return !isNaN(this._layout)?this._layout:null
},_bindResizeEvent:function(){var b=this.getUID();
this.$mapresizer().attach("resized."+b,this._onClientResize.bind(this))
},_unbindResizeEvent:function(){var b=this.getUID();
this.$mapresizer().detach("resized."+b)
},resize:function(){this._resizeHandler()
},_onClientResize:function(){this._resizeHandler()
},_resizeHandler:function(){this.determineAvailSize();
this.dispatch("resize",{availSize:this.getAvailSize(),disabledSize:this.getDisabledSize()})
}})
})();
(function(){var c=iron.ns("nhn.map.panorama"),a=iron.ns("nhn.map").Const;
c.PanoramaService=iron.Class(nhn.map.Dispatcher,{MIN_CLIENT_HEIGHT:777,initialize:function(){this._streetActivated=false;
this._flightActivated=false;
this._isPlaying=false;
this._flashPlayerEnabled=this._isValidFlashVersion();
this._markerList=[];
this.$menubar().attach("change",this.closePanorama.bind(this));
this.$state().attach("changed",d.bind(this))
},activateStreetView:function(){this._streetActivated=true;
this.$extractor().streetActivated=true;
this.dispatch("activateStreetView");
if(this.$state().getState()!==a.STATE_MARKER){this.$state().setState(a.STATE_STREET_VIEW)
}else{this.suspend()
}},deactivateStreetView:function(){this._streetActivated=false;
this.$extractor().streetActivated=false;
if(this._prevState){this.$state().setState(this._prevState)
}else{this.$state().reset()
}this.dispatch("deactivateStreetView")
},isStreetActivated:function(){return this._streetActivated
},activateFlightView:function(){this._flightActivated=true;
this.$extractor().flightActivated=true;
this.dispatch("activateFlightView")
},deactivateFlightView:function(){this.$dao().abortFlight();
this._flightActivated=false;
this.$extractor().flightActivated=false;
this.dispatch("deactivateFlightView")
},isFlightActivated:function(){return this._flightActivated
},suspend:function(){if(this._suspended){return
}this._suspended=true;
this.dispatch("suspend")
},resume:function(){if(!this._suspended){return
}delete this._suspended;
this.dispatch("resume")
},isSuspended:function(){return this._suspended
},setDisabledSize:function(e){this.$layout().setDisabledSize(e)
},getDisabledSize:function(){return this.$layout().getDisabledSize()
},setPanoramaSize:function(e){this.$layout().setPanoramaSize(e)
},getPanoramaSize:function(){return this.$layout().getPanoramaSize()
},setMinimapSize:function(e){this.$layout().setMinimapSize(e)
},getMinimapSize:function(){return this.$layout().getMinimapSize()
},determineAvailSize:function(){this.$layout().determineAvailSize()
},getAvailSize:function(){return this.$layout().getAvailSize()
},clearLayout:function(){this.$layout().clearLayout()
},setLayout:function(f){var e=this.$layout().getLayout();
this.$layout().setLayout(f);
if(e!=f){this.dispatch("layoutChanged",{oldLayout:e,newLayout:f})
}},getLayout:function(){return this.$layout().getLayout()
},isPlaying:function(){return this._isPlaying
},setPanoramaData:function(e){this._panoramaData=e
},getPanoramaData:function(){return this._panoramaData||null
},_activateLayout:function(){if(this.$layout().isActivated()){return
}var e=this.$layout();
e.activate();
e.attach({resize:this.dispatch.bind(this,"resize")})
},_deactivateLayout:function(){if(!this.$layout().isActivated()){return
}var e=this.$layout();
e.deactivate();
e.detach()
},resize:function(){this.$layout().resize()
},_isValidFlashVersion:function(){return nhn.map.FlashUtil.isValidFlashVersion()
},openPanorama:function(f,e){if(!this._flashPlayerEnabled){this.showUpdateFlashDialog();
return
}this.dispatch("beforeOpenPanorama",{panoramaData:f});
if(!(f instanceof nhn.map.panorama.PanoramaData)){f=new nhn.map.panorama.PanoramaData(f)
}if(f.type===nhn.map.panorama.Const.TYPE_FLIGHT||f.type===nhn.map.panorama.Const.TYPE_MARINE){this.isFlightActivated()||this.activateFlightView();
if(!e){nhn.map.LogPV("skyview")
}}else{this.isStreetActivated()||this.activateStreetView();
if(!e){if(f.type===nhn.map.panorama.Const.TYPE_MUSEUM){nhn.map.LogPV("inside")
}else{nhn.map.LogPV("streetview")
}}}this._activateLayout();
this.dispatch("openPanorama",{panoramaData:f});
this._isPlaying=true;
this.resize();
this.dispatch("afterOpenPanorama",{panoramaData:f})
},searchPanorama:function(f,j,e,g,h,i){if(!this.isStreetActivated()){return
}this.requestPanoramaData(f,j,e,i,function(m){var k=m.result,n=new nhn.mapcore.LatLng(k.lat,k.lng),l;
l=new nhn.map.panorama.PanoramaData({panoramaId:k.id,type:e,point:n,pan:k.pan,tilt:k.tilt});
this.openPanorama(l,h)
}.bind(this),g)
},changePlayerLayout:function(e){this.dispatch("changePlayerLayout",{layout:e})
},closePanorama:function(){if(!this.isPlaying()){return
}this.dispatch("beforeClosePanorama");
this._deactivateLayout();
delete this._panoramaData;
this._isPlaying=false;
this.dispatch("closePanorama");
this.dispatch("afterClosePanorama")
},getMarkerList:function(){return this._markerList
},addMarker:function(e){if(!e){return
}var f=e,g=this._markerList;
if(!Array.isArray(e)){f=[e]
}f.forEach(function(h){for(var j=0,k=g.length;
j<k;
j++){if(b(g[j],h)){g.splice(j,1);
break
}}});
this._markerList=g.concat(f);
this.dispatch("addMarker",{marker:e})
},removeMarker:function(g){var f=g.getId();
for(var e=this._markerList.length-1;
e>=0;
e--){if(this._markerList[e].getId()==f){this._markerList.splice(e,1);
break
}}this.dispatch("removeMarker",{marker:g})
},clearMarker:function(){this._markerList=[];
this.dispatch("clearMarker")
},removeDrawablePoi:function(){this.dispatch("removeDrawablePoi")
},setRouteInfo:function(e){this.dispatch("setRouteInfo",{routeData:e})
},clearRouteInfo:function(){this.dispatch("clearRouteInfo")
},setTransportInfo:function(e){this.dispatch("setTransportInfo",{transportInfo:e})
},clearTransportInfo:function(){this.dispatch("clearTransportInfo")
},openSaveWindow:function(){this.dispatch("openSaveWindow")
},extractData:function(){return this.$extractor().extractData()
},gatherMapData:function(f){var e=this.$extractor().extractData();
if(e&&e.flashOptions.id){f("panorama",e)
}},gatherUrlParameter:function(){return this.$extractor().extractUrlData()
},addInfoWindow:function(e){this.dispatch("addInfoWindow",{infoWindow:e})
},removeInfoWindow:function(e){this.dispatch("removeInfoWindow",{infoWindow:e})
},clearInfoWindow:function(){this.dispatch("clearInfoWindow")
},requestPanoramaImage:function(g,e,h,f){this.dispatch("requestPanoramaImage",{width:g,height:e,isTemp:f});
this._onResponsePanoramaImage=h
},responsePanoramaImage:function(e){this._onResponsePanoramaImage&&this._onResponsePanoramaImage(e);
delete this._onResponsePanoramaImage
},showInaccuratePoiDialog:function(){nhn.map.service.Checkout("inaccurate_poi","거리뷰&middot;항공뷰 위의 상점, 정류장 위치는<br />실제와 다를 수 있습니다.","또한 가로수, 차량 등에 가려 보이지 않을 수 있습니다.")
},showUpdateFlashDialog:function(){nhn.map.service.Alert('<a href="http://get.adobe.com/kr/flashplayer/" target="_blank"> Adobe Flash Player 설치하러 가기</a>',"플래시 플레이어를 설치하셔야 <br/> 보실 수 있습니다.")
},getToolboxContainer:function(){return nhn.map.DOMCache.getBody().find(".map_ctrl_panorama")[0]
},requestFlightSpots:function(g,i,h,f){var e=this;
this.$dao().requestFlightSpots(g,i,function(k,l,j){if(e.isFlightActivated()||e.isPlaying()){h(k,l,j)
}},f)
},requestPanoramaData:function(f,j,e,h,i,g){this.$dao().requestPanoramaData(f,j,e,h,i,g)
},requestMuseumSpots:function(g,i,h,f){var e=this;
this.$dao().requestMuseumSpots(g,i,function(k,l,j){if(!e.isStreetActivated()){return
}h(k,l,j)
},f)
},requestInteriorSpots:function(g,i,h,f){var e=this;
this.$dao().requestInteriorSpots(g,i,function(k,l,j){if(!e.isStreetActivated()){return
}h(k,l,j)
},f)
},panoramaStatusChanged:function(e){this.dispatch("panoramaStatusChanged",{panoramaStatus:e})
},enterIndoorMap:function(f,e){this.$indoor().enterIndoorMap(f,e)
},isActivatedIndoorPolygon:function(e){return this.$indoor().isActivatedIndoorPolygon(e)
},isStreetActivatedOfBtn:function(){return this.$controlBar().isStreetActivated()
}});
function d(f){this._prevState=f.prevState;
this._currentState=f.newState;
if(this._prevState===a.STATE_STREET_VIEW&&this._currentState===a.STATE_MARKER){this.suspend()
}else{if(this._prevState===a.STATE_MARKER&&this._suspended){this.$state().setState(a.STATE_STREET_VIEW);
this.resume()
}}}function b(m,l){var j={streetPanorama:m.options.streetPanorama||{},skyPanorama:m.options.skyPanorama||{}},i={streetPanorama:l.options.streetPanorama||{},skyPanorama:l.options.skyPanorama||{}},g=m.getIcon(),e=l.getIcon(),f=m.getPoint().toInner(),p=l.getPoint().toInner(),h=m.getId()===l.getId(),o=j.streetPanorama.id===i.streetPanorama.id&&j.skyPanorama.id===i.skyPanorama.id,k=g.getIconType()===e.getIconType(),n=f.x===p.x&&f.y===p.y;
return n&&(h||(o&&k))
}}());
iron.ns("nhn.map.panorama").PanoramaDataExtractor=iron.Class({initialize:function(){this.streetActivated=false;
this.flightActivated=false;
this._iframeBaseUrl=location.origin+"/outpage/showStreetPanorama.nhn"
},getPlayerData:function(){var a={};
this.$player().requestPanoramaInfo(function(b){a=b
});
return a
},extractPanoramaData:function(b){var b=b||this.getPlayerData(),a;
if(!b){return{}
}a={id:b.vrpanoid,type:b.vrpanotype,pan:b.vrpanopan,tilt:b.vrpanotilt,fov:b.vrpanofov,point:new nhn.mapcore.LatLng(b.vrpanolat,b.vrpanolng),sky:b.vrpanosky,poi:b.vrpanopoi,pastId:b.vrpanopastid};
$.each(a,function(c,d){if(typeof d==="undefined"||d===null){delete a[c]
}});
return a
},extractPanoramaUrlData:function(b){var b=b||this.getPlayerData(),a;
if(!b){return{}
}a={vrpanotype:b.vrpanotype,vrpanoid:b.vrpanoid,vrpanopan:b.vrpanopan,vrpanotilt:b.vrpanotilt,vrpanofov:b.vrpanofov,vrpanolat:b.vrpanolat,vrpanolng:b.vrpanolng,vrpanopastid:b.vrpanopastid};
$.each(a,function(c,d){if(typeof d==="undefined"||d===null){delete a[c]
}});
return a
},extractStateData:function(b){var b=b||this.getPlayerData(),a={street:this.streetActivated?"on":null,flight:this.flightActivated?"on":null};
if(b){$.extend(a,{address:b.address,title:b.title,vrpanoartifactid:b.vrpanoartifactid,vrpanosky:b.vrpanosky,vrpanopoi:b.vrpanopoi})
}$.each(a,function(c,d){if(typeof d==="undefined"||d===null){delete a[c]
}});
return a
},extractMarkerData:function(b){var b=b||this.getPlayerData(),a;
if(!b){return undefined
}a=b.sinteractiveobject;
return a||undefined
},extractFrameUrl:function(b,a){var c=$.extend({},b);
if(c.point){c.pointX=c.point.x;
c.pointY=c.point.y;
c.pointZ=c.point.z;
delete c.point
}if(a&&a.icon){c.poiId=a.poi_id;
c.poiType=a.type;
c.poiLat=a.lat;
c.poiLng=a.lng;
if(a.icon.url){c.iconURL=a.icon.url.replace("https://ssl.pstatic.net/static/maps2/icons/","")
}if(a.icon.text){c.iconText=a.icon.text
}}return[this._iframeBaseUrl,$.param(c)].join("?")
},extractData:function(){var f=this.getPlayerData(),c=this.extractPanoramaData(f),e=this.extractPanoramaUrlData(f),a=this.extractStateData(f),b=this.extractMarkerData(f),d={title:a.title,address:a.address,flashOptions:c,markerInfo:b,panoramaUrlData:e,stateData:a,iframeURL:this.extractFrameUrl(c,b)};
return d
},extractUrlData:function(){var d=this.getPlayerData(),c=this.extractPanoramaUrlData(d),a=this.extractStateData(d),b={};
$.extend(b,c);
$.extend(b,a);
delete b.title;
delete b.address;
return b
}});
nhn.map.panorama.DOMInitializer=iron.Class({initialize:function(){this._defaulTpl=nhn.mapservice.TemplateRepos.get("panorama_area")
},getDefaultElement:function(){return this._el?this._el[0]:null
},_prepareDefaultDOM:function(){if(this._el){return
}this._el=$(this._defaulTpl.process());
nhn.map.DOMCache.getMapArea().append(this._el);
this._el.before('<h2 class="blind">거리뷰</h2>')
},_listenService:function(){this._prepareDefaultDOM()
}});
(function(){var b=iron.ns("nhn.map.panorama"),a=b.Const;
b.MapView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._uid="PanoramaService_"+(+new Date());
this._streetEventToken=this._uid+"_street";
this._flightEventToken=this._uid+"_flight";
this._museumMarkers={};
this._interiorMarkers={};
this._flightMarkers={}
},addMapEvent:function(c,d){this.$map().attach(c,d)
},removeMapEvent:function(c,d){this.$map().detach(c,d)
},disableMapResize:function(){this.$map().disableResize()
},enableMapResize:function(){this.$map().enableResize()
},resizeMap:function(){this.$map().resize()
},getMap:function(){return this.$map()
},getZoom:function(){return this.$map().getLevel()
},isStreetLoaded:function(){return this._streetLoaded
},getUID:function(){return this._uid
},loadStreetPane:function(){if(this._streetLoaded){return
}var e=this.$map(),c=this.$service(),d=this._streetEventToken,f;
e.loadStreetPane();
f=function(){this._drawMuseumMarker();
this._drawInteriorMarker()
}.bind(this);
f();
e.attach("CHANGE_MAP_DONE."+d,f);
e.attach("SET_MAP_SIZE."+d,f);
c.attach("closePanorama."+d,f);
this._streetLoaded=true
},onCursor:function(){var c=this.$map();
this.$cursor().decorate(c);
c.setCursor("pointer")
},offCursor:function(){var c=this.$map();
this.$cursor().undecorate(c);
c.clearCursor()
},unloadStreetPane:function(){if(!this._streetLoaded){return
}var e=this.$map(),c=this.$service(),d=this._streetEventToken;
e.unloadStreetPane();
this._clearMuseumMarker();
this._clearInteriorMarker();
e.detach("CHANGE_MAP_DONE."+d);
e.detach("SET_MAP_SIZE."+d);
c.detach("closePanorama."+d);
delete this._streetLoaded
},suspend:function(){this.$cursor().undecorate(this.$map())
},resume:function(){this.$cursor().decorate(this.$map())
},beginSeekFlightSpots:function(){if(this._flightSeeking){return
}var d=this.$map(),c=this._flightEventToken,e;
e=this._drawFlightMarker.bind(this);
e();
d.attach("CHANGE_MAP_DONE."+c,e);
d.attach("SET_MAP_SIZE."+c,e);
this._flightSeeking=true
},stopSeekFlightSpots:function(){if(!this._flightSeeking){return
}var d=this.$map(),c=this._flightEventToken;
this._clearFlightMarker();
d.detach("CHANGE_MAP_DONE."+c);
d.detach("SET_MAP_SIZE."+c);
delete this._flightSeeking
},_drawFlightMarker:function(){var c=this.$map();
this.$service().requestFlightSpots(c.getBound(),c.getLevel(),function(e){var d=e.result.data;
if(!d||!d.length){this._clearFlightMarker();
this.dispatch("noFlightSpot")
}else{this._manipulateFlightMarker(d);
this.dispatch("loadFlightSpot",{spotCount:d.length})
}}.bind(this))
},_manipulateFlightMarker:function(d){var e={},c=this;
d.forEach(function(h){var g=this._generateFlightMarkerId(h),f=this._flightMarkers[g];
if(!f){f=this._createFlightMarker(h);
this._addFlightMarker(f)
}e[g]=f;
delete this._flightMarkers[g]
},this);
$.each(this._flightMarkers,function(g,f){c._removeFlightMarker(f)
});
this._flightMarkers=e;
this._hideCurrentFlightMarker()
},_hideCurrentFlightMarker:function(){var c=this.$service().getPanoramaData(),e=c?(c.id||c.panoramaId):null;
if(this._hiddenFlightMarker){this._hiddenFlightMarker.show();
delete this._hiddenFlightMarker
}if(!c||!e||c.type>1){return
}if(this._flightMarkers["FLIGHT_"+e]){var d=this._flightMarkers["FLIGHT_"+e];
d.hide();
this._hiddenFlightMarker=d
}},_generateFlightMarkerId:function(c){return c.code?"FLIGHTG_"+c.code:"FLIGHT_"+c.id
},_createFlightMarker:function(f){var d={id:this._generateFlightMarkerId(f),type:a.TYPE_FLIGHT,point:new nhn.mapcore.LatLng(f.y,f.x),showLabel:true,showInfo:true,groupIndex:500};
if(f.code){d=$.extend(d,{title:f.name,code:f.code,group:"PanoramaGroupMarker"})
}else{d=$.extend(d,{title:f.title,panoramaId:f.id,group:"PanoramaSingleMarker"})
}var c=null,e=parseInt(f.ptype);
if(e===12){c=new nhn.map.panorama.MarineMarker(d,{click:this._onMarineMarkerClick.bind(this)})
}else{c=new nhn.map.panorama.FlightMarker(d,{click:this._onFlightMarkerClick.bind(this)})
}return c
},_addFlightMarker:function(c){this.$map().addMarker(c);
this._flightMarkers[c.getId()]=c
},_removeFlightMarker:function(c){this.$map().removeMarker(c);
delete this._flightMarkers[c.getId()]
},_clearFlightMarker:function(){var c=this.$map();
$.each(this._flightMarkers,function(e,d){c.removeMarker(d)
});
this._flightMarkers={}
},_onFlightMarkerClick:function(h){var d=this._flightMarkers[h.markerInfo.id],c=this.$map().getMapMode()=="PANORAMA_MINI",g={event:h.domEvent||null,element:d.getElement(),acode:c?"pno*m.":"map*v."},f;
if(d.options.code!==undefined){this.$map().zoom(8,d.getPoint().toInner(),{useEffect:true});
g.acode+=c?"skyg":"panogicon"
}else{f=new nhn.map.panorama.PanoramaData(d.options);
this.$service().openPanorama(f,"marker");
g.acode+=c?"skyicon":"panoicon";
nhn.map.LogPV(c?"mini_skymarker":"skyview")
}nhn.map.LogClick(g)
},_onMarineMarkerClick:function(f){var c=this._flightMarkers[f.markerInfo.id],d;
if(c.options.code!==undefined){this.$map().zoom(8,c.getPoint().toInner(),{useEffect:true})
}else{d=new nhn.map.panorama.PanoramaData(c.options);
d.fov=120;
this.$service().openPanorama(d,"marker")
}},_drawMuseumMarker:function(){var c=this.$map();
this.$service().requestMuseumSpots(c.getBound(),c.getLevel(),function(e){var d=e.features;
if(d.length){this._manipulateMuseumMarker(d)
}else{this._clearMuseumMarker()
}}.bind(this))
},_drawInteriorMarker:function(){var c=this.$map();
this.$service().requestInteriorSpots(c.getBound(),c.getLevel(),function(e){var d=e.features;
if(d.length){this._manipulateInteriorMarker(d)
}else{this._clearInteriorMarker()
}}.bind(this))
},_manipulateMuseumMarker:function(d){var e={},c=this;
d.forEach(function(h){var g=this._generateMuseumMarkerId(h),f=this._museumMarkers[g];
if(!f){f=this._createMuseumMarker(h);
this._addMuseumMarker(f)
}e[g]=f;
delete this._museumMarkers[g]
},this);
$.each(this._museumMarkers,function(g,f){c._removeMuseumMarker(f)
});
this._museumMarkers=e
},_manipulateInteriorMarker:function(d){var e={},c=this;
d.forEach(function(h){var g=this._generateInteriorMarkerId(h),f=this._interiorMarkers[g];
if(!f){f=this._createInteriorMarker(h);
this._addInteriorMarker(f)
}e[g]=f;
delete this._interiorMarkers[g]
},this);
$.each(this._interiorMarkers,function(g,f){c._removeInteriorMarker(f)
});
this._interiorMarkers=e
},_generateMuseumMarkerId:function(c){return"INSIDE_"+c.id
},_generateInteriorMarkerId:function(c){return"INTERIOR_"+c.id
},_createMuseumMarker:function(c){return new nhn.map.panorama.MuseumMarker({point:new nhn.mapcore.LatLng(c.geometry.coordinates[1],c.geometry.coordinates[0]),id:this._generateMuseumMarkerId(c),type:a.TYPE_MUSEUM,title:c.properties.bzst_nm,panoramaId:c.id,pan:c.properties.pan_val,tilt:c.properties.tilt_val,fov:c.properties.fov_val,showLabel:true,showInfo:true,layout:0,group:"PanoramaInsideMarker"},{click:this._onMuseumMarkerClick.bind(this)})
},_createInteriorMarker:function(c){return new nhn.map.panorama.InteriorMarker({point:new nhn.mapcore.LatLng(c.geometry.coordinates[1],c.geometry.coordinates[0]),id:this._generateInteriorMarkerId(c),type:a.TYPE_INTERIOR_FRONT,title:c.properties.bzst_nm,panoramaId:c.id,pan:c.properties.pan_val,tilt:c.properties.tilt_val,fov:c.properties.fov_val,showLabel:true,showInfo:true,layout:0,group:"PanoramaInsideMarker"},{select:this._onInteriorMarkerClick.bind(this)})
},_addMuseumMarker:function(c){this.$map().addMarker(c);
this._museumMarkers[c.getId()]=c
},_addInteriorMarker:function(c){this.$map().addMarker(c);
this._interiorMarkers[c.getId()]=c
},_removeMuseumMarker:function(c){this.$map().removeMarker(c);
delete this._museumMarkers[c.getId()]
},_removeInteriorMarker:function(c){this.$map().removeMarker(c);
delete this._interiorMarkers[c.getId()]
},_clearMuseumMarker:function(){var c=this.$map();
$.each(this._museumMarkers,function(e,d){c.removeMarker(d)
});
this._museumMarkers={}
},_clearInteriorMarker:function(){var c=this.$map();
$.each(this._interiorMarkers,function(e,d){c.removeMarker(d)
});
this._interiorMarkers={}
},_onMuseumMarkerClick:function(h){var f=h.markerInfo,g=f.id,c=this._museumMarkers[g],d;
d=new nhn.map.panorama.PanoramaData(c.options);
this.$service().openPanorama(d)
},_onInteriorMarkerClick:function(h){var f=h.markerInfo,g=f.id,c=this._interiorMarkers[g],d;
d=new nhn.map.panorama.PanoramaData(c.options);
this.$service().openPanorama(d)
}})
}());
iron.ns("nhn.map.panorama").MapViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._doc=nhn.map.DOMCache.getDocument()
},_listenService:function(){if(!this._listeners){this._listeners={activateStreetView:this._onActivateStreetView.bind(this),deactivateStreetView:this._onDeactivateStreetView.bind(this),activateFlightView:this._onActivateFlightView.bind(this),deactivateFlightView:this._onDeactivateFlightView.bind(this),openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this),suspend:this._onSuspend.bind(this),resume:this._onResume.bind(this)}
}this.$service().attach(this._listeners)
},_unlistenService:function(){this.$service().detach(this._listeners)
},_loadStreetPane:function(){var a=this.$view();
a.loadStreetPane();
this._doc.on("keydown."+a.getUID(),this._onKeyDown.bind(this))
},_unloadStreetPane:function(){var a=this.$view();
a.unloadStreetPane();
this._doc.off("keydown."+a.getUID())
},_onActivateStreetView:function(){var a=this.$view(),b=a.getZoom();
this._boundOnMapClickDone=this._onMapClickDone.bind(this);
a.addMapEvent("CLICK_MAP_DONE",this._boundOnMapClickDone);
this._zoomChangedDone=this._onZoomChanged.bind(this);
a.addMapEvent("ZOOM."+a.getUID(),this._zoomChangedDone);
a.onCursor();
if(b>14){return
}this._loadStreetPane()
},_onDeactivateStreetView:function(){var a=this.$view();
a.removeMapEvent("CLICK_MAP_DONE",this._boundOnMapClickDone);
a.removeMapEvent("ZOOM."+a.getUID(),this._zoomChangedDone);
a.offCursor();
if(a.isStreetLoaded()){this._unloadStreetPane()
}},_onZoomChanged:function(){var a=this.$view(),b=a.getZoom();
if(b>14){this._unloadStreetPane()
}else{this._loadStreetPane()
}},_onActivateFlightView:function(){this.$view().beginSeekFlightSpots()
},_onDeactivateFlightView:function(){this.$view().stopSeekFlightSpots()
},_onOpenPanorama:function(){this.$view().disableMapResize()
},_onClosePanorama:function(){this.$view().enableMapResize();
this.$view().resizeMap();
if(this.$service().isStreetActivatedOfBtn()&&!this.$view().isStreetLoaded()){this._loadStreetPane()
}},_onSuspend:function(){this.$view().suspend()
},_onResume:function(){this.$view().resume()
},_onMapClickDone:function(f){if(this.$service().isSuspended()){return
}var c=f.latlng,f=f.domEvent,g=$(f.target||f.srcElement),b=this.$view().getMap(),k=b.getMapMode()=="PANORAMA_MINI",d={event:f||null,element:g[0]},b,c,i,a,j;
if(!this.$service().isStreetActivated()||g.closest("._none_pointer").length){return
}if(this._isIndoorRegion(g)){j=g.parent().data();
if(this.$service().isActivatedIndoorPolygon(j.id)){i=nhn.map.panorama.Const.TYPE_INDOOR;
this.$service().enterIndoorMap(j.id,j.floor)
}else{i=nhn.map.panorama.Const.TYPE_STREET
}}else{i=nhn.map.panorama.Const.TYPE_STREET
}a=b.getLevel();
this.$service().searchPanorama(c,a,i,null,"tile",j);
var h;
if(k){h="pno*m.streetlayer";
if(i===nhn.map.panorama.Const.TYPE_INDOOR){h="pnd*m.streetlayer"
}}else{h="map*v.street";
if(i===nhn.map.panorama.Const.TYPE_INDOOR){h="map*v.indoorpano"
}}d.acode=h;
nhn.map.LogClick(d);
if(k){nhn.map.LogPV("mini_overlaystreet")
}else{if(i===nhn.map.panorama.Const.TYPE_INDOOR){nhn.map.LogPV("indoorview")
}else{nhn.map.LogPV("streetview")
}}},_onKeyDown:function(a){var b=a.which;
if(b==27&&!this.$service().isPlaying()){this.$service().deactivateStreetView()
}},_listenView:function(){this.$view().attach({noFlightSpot:this._onNoFlightSpot.bind(this),loadFlightSpot:this._onLoadFlightSpot.bind(this)})
},_onNoFlightSpot:function(){this.$service().dispatch("noFlightSpot")
},_onLoadFlightSpot:function(){this.$service().dispatch("loadFlightSpot")
},_isIndoorRegion:function(a){return($(a).closest("._indoor_region_clue").length>0)
}});
(function(){var h=iron.ns("nhn.map.panorama"),i=h.Const;
var b=i.MINIMAP_CLOSED,g=i.MINIMAP_EXPANDED,e=i.MINIMAP_NORMAL,a=i.MINIMAP_HIDDEN,f=i.MINIMAP_MIN_SIZE,c=i.MINIMAP_MAX_SIZE,d=i.MINIMAP_MIN_EXPANDED_HEIGHT;
h.MinimapView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._uid="PanoramaService_"+(+new Date());
this._mapEventToken=this._uid+"_minimap";
this._drawingType=nhn.map.shape.DrawingUtil.getDrawingType().toUpperCase();
this._activated=false;
this._bound={left:0,top:0,right:0,bottom:0};
this._vector={x:0,y:0,canMove:false,inBound:true};
this._mapEl=$(this.$map().getMapElement())
},getUID:function(){return this._uid
},getMap:function(){return this.$map()
},setFrame:function(j){this._frameEl=$(j)
},getFrame:function(){return this._frameEl[0]
},getToggleButton:function(){if(this._frameEl&&!this._toggleBtn){this._toggleBtn=this._frameEl.find("div.minimap_toggle img")
}return this._toggleBtn[0]
},beginSeekFlightSpots:function(){this._distinguishFlightSpot();
this._bindMapEvent()
},stopSeekFlightSpots:function(){this._unbindMapEvent()
},activate:function(){this._initMap();
this._mapPadding=new nhn.map.Offset(parseInt(this._frameEl.css("padding-left"),10),parseInt(this._frameEl.css("padding-top"),10));
this._bindToggleEvent();
this._activated=true
},deactivate:function(){this._destroyMap();
this._unbindToggleEvent();
this._activated=false
},isActivated:function(){return !!this._activated
},_bindToggleEvent:function(){var k=$(this.getToggleButton()),j=this.getUID();
k.parent().on("click."+j,"area",this._onClickToggle.bind(this))
},_unbindToggleEvent:function(){var k=$(this.getToggleButton()),j=this.getUID();
k.parent().find("area").off("."+j)
},_bindMapEvent:function(){var j=this._mapEventToken,k=this.$map(),l;
l=this._distinguishFlightSpot.bind(this);
k.attach("CHANGE_MAP_DONE."+j,l);
k.attach("SET_MAP_SIZE."+j,l)
},_unbindMapEvent:function(){var j=this._mapEventToken,k=this.$map();
k.detach("CHANGE_MAP_DONE."+j);
k.detach("SET_MAP_SIZE."+j)
},enableCursor:function(){this.$cursor().enable()
},disableCursor:function(){this.$cursor().hide();
this.$cursor().disable()
},pauseCursor:function(){this.$cursor().pause()
},redrawDrawings:function(){if(this._drawingType!="VML"){return
}var k=this.$map().getPane("nmap_drawing_pane"),j=k.aOverlays;
j.forEach(function(l){if(!(l instanceof nhn.mapcore.Polyline)){return
}var m=l.getStyle();
l.setStyle(m)
})
},_initMap:function(){if(this._mainMapInfo){return
}var j=this.$map();
this._mainMapInfo={container:this._mapEl.parent(),center:j.getCenter(),level:j.getLevel(),boundOffset:j.getBoundOffset()};
this._frameEl.prepend(this._mapEl);
this._prevMapMode=j.getMapMode();
window.setTimeout(function(){j.setMapMode("PANORAMA_MINI")
},0);
j.disableResize();
this.disableCursor();
if(this._drawingType=="VML"){this.redrawDrawings()
}},_destroyMap:function(){if(!this._mainMapInfo){return
}var k=this.$map(),j=this._mainMapInfo,l=k.getCenter();
j.container.prepend(this._mapEl);
this._frameEl.hide();
if(this._prevMapMode){k.setMapMode(this._prevMapMode);
delete this._prevMapMode
}k.enableResize();
k.setCenter(l);
this.enableCursor();
this.enableMapDrag();
delete this._mainMapInfo;
if(this._drawingType=="VML"){this.redrawDrawings()
}},showMap:function(j){this._frameEl.show();
if(j&&j.mapLevel!==null){var k=Math.max(this.$map().getLevel(),parseInt(j.mapLevel,10)||11);
this.$map().setLevel(k)
}},hideMap:function(){this._frameEl.hide()
},showFrame:function(){this._frameEl.show()
},moveMap:function(j){var l=this.$map(),k;
l.setCenter(j.point);
this.moveAvatar(j);
k=j.type;
this.$service().dispatch("minimapMoved",{center:j.point.copy(),level:this.$map().getLevel()})
},clearLayout:function(){delete this._layout;
this.$service().clearLayout()
},setLayout:function(l){var k={xRate:0,yRate:0},n=this._frameEl.parent(),m=this.getToggleButton(),j="imgminimap";
this._frameEl.show();
switch(l){case b:this._frameEl.hide();
break;
case g:k.xRate=1;
k.yRate=0.35;
n.addClass("naver_view_wrap_expand");
j="imgminimap_expand";
break;
case e:n.removeClass("naver_view_wrap_expand naver_view_wrap_hide");
k.xRate=0.3;
k.yRate=0.3;
j="imgminimap";
break;
case a:k.xRate=0;
k.yRate=0;
n.addClass("naver_view_wrap_hide");
j="imgminimap_hide";
break
}$(m).attr("usemap","#"+j);
this.setSizeRate(k);
this._layout=l;
this.$service().setLayout(this._layout)
},getLayout:function(){return this._layout!==undefined?this._layout:null
},setSizeRate:function(j){this._sizeRate=j
},getSizeRate:function(){return this._sizeRate||{xRate:0.3,yRate:0.3}
},adjustSize:function(){var k=this.$service().getAvailSize(),j=this.getSizeRate(),l;
if(j.yRate==0.3){k.width-=20;
k.height-=45
}l=new nhn.map.Size(k.width*j.xRate,k.height*j.yRate);
this.setSize(l)
},setSize:function(l){var o=this.getLayout(),m=l.width,j=l.height,k=m,n=j,p=0;
switch(o){case b:m=j=l.width=l.height=0;
this._frameEl.hide();
break;
case g:m="100%";
j=Math.ceil(Math.max(j,f.height));
n=j=Math.ceil(Math.min(j,d));
p=0;
break;
case e:m=Math.max(m,f.width);
m=Math.min(m,c.width);
j=Math.max(j,f.height);
j=Math.min(j,c.height);
k=m;
n=j;
p=-j;
break;
case a:m=j=29;
k=n=0;
p=-j;
break
}if(o!=b){this._frameEl.css({width:m,height:j});
this._frameEl.css({height:j});
this.setMapSize(k,n);
this._size=new nhn.map.Size(this._frameEl.width(),this._frameEl.height())
}else{this._size=new nhn.map.Size(0,0)
}this.$service().setMinimapSize(this._size)
},getSize:function(){return this._size
},setMapSize:function(k,j){var l=this.$map();
if(this.getLayout()!==3){l.enableResize();
l.setMapSize(k,j);
l.disableResize()
}},normalize:function(){this.setLayout(e);
this.$service().resize()
},maximize:function(){this.setLayout(g);
this.$service().resize()
},minimize:function(){this.setLayout(a);
this.$service().resize()
},_getLayoutCommand:function(j){return $(j).data("m-layout-command")
},_onClickToggle:function(p){p.preventDefault();
var o=p.target,n=this._getLayoutCommand(o),k=this.$service().getPanoramaData(),j=k.type,m="pno*m.",l=$(o).data("log")||null;
if(j===10){m="pnd*m."
}switch(n){case"normalize":this.normalize();
break;
case"maximize":this.maximize();
break;
case"minimize":this.minimize();
break
}if(l){nhn.map.LogClick({event:p,element:p.target,acode:m+l})
}},getAvatar:function(j){if(!j){return this._avatar
}var l=j.type,k;
if(l==i.TYPE_FLIGHT){k=this.getFlightAvatar(j)
}else{if(l==i.TYPE_MARINE){k=this.getMarineAvatar(j)
}else{k=this.getStreetAvatar(j)
}}return k
},_switchAvatar:function(j){if(this._avatar&&this._avatar.type!=j.type){this.removeAvatar();
this.addAvatar(j)
}else{if(!this._avatar){this.addAvatar(j)
}}this._avatar=j
},moveAvatar:function(k){var l=this.getAvatar(k),j=k.point,m=k.pan;
this._switchAvatar(l);
(m||m===0)&&l.setDirectionByPan(m);
j&&l.setPoint(j);
l.show();
this.disableCursor()
},addAvatar:function(j){this.$map().addMarker(j)
},removeAvatar:function(){if(!this._avatar){return
}this.$map().removeMarker(this._avatar);
delete this._avatar
},getStreetAvatar:function(j){if(this._streetAvatar){return this._streetAvatar
}if(!j){return null
}var k=new nhn.map.panorama.StreetAvatar({point:j.point,pan:j.pan});
k.attach(this.getStreetAvatarListener());
this._streetAvatar=k;
return this._streetAvatar
},setStreetAvatarListener:function(j){this._streetAvatarListener=j
},getStreetAvatarListener:function(){return this._streetAvatarListener||{}
},getFlightAvatar:function(j){if(this._flightAvatar){return this._flightAvatar
}if(!j){return null
}var k=new nhn.map.panorama.FlightAvatar({point:j.point,pan:j.pan});
this._flightAvatar=k;
return this._flightAvatar
},getMarineAvatar:function(j){if(this._marineAvatar){return this._marineAvatar
}if(!j){return null
}var k=new nhn.map.panorama.MarineAvatar({point:j.point,pan:j.pan});
this._marineAvatar=k;
return this._marineAvatar
},setFlightAvatarTitle:function(j){if(this._flightAvatar){this._flightAvatar.options.title=decodeURI(j)
}},setMarineAvatarTitle:function(j){if(this._marineAvatar){this._marineAvatar.options.title=decodeURI(j)
}},observeAutoPan:function(){this._resetAutoPanningBound();
if(!this._autoPanTimer){var j=this._onAutoPanInterval.bind(this);
this._autoPanTimer=window.setInterval(j,100)
}},_onAutoPanInterval:function(){if(this._vector.canMove){this.$map().moveMap(this._vector)
}},unobserveAutoPan:function(){if(this._autoPanTimer){window.clearInterval(this._autoPanTimer);
delete this._autoPanTimer
}},_resetAutoPanningBound:function(){var m=this._mapEl.offset(),j=this._mapEl.width(),k=this._mapEl.height(),l=nhn.map.DOMCache.getDocument(),n={left:l.scrollLeft(),top:l.scrollTop()};
this._bound={left:m.left-n.left,top:m.top-n.top,right:m.left+j-n.left,bottom:m.top+k-n.top}
},_getMovePanningVector:function(p){var n=p.x,m=p.y,r=0,q=0,o=false,k=20,l=30,j=false;
j=!!(this._bound.left<n&&n<this._bound.right&&this._bound.top<m&&m<this._bound.bottom);
if(n<this._bound.left+k){r=l;
o=true
}else{if(this._bound.right-k<n){r=-l;
o=true
}}if(m<this._bound.top+k){q=l;
o=true
}else{if(this._bound.bottom-k<m){q=-l;
o=true
}}return{x:r,y:q,canMove:o,inBound:j}
},setVectorByScreenPoint:function(j){this._vector=this._getMovePanningVector(j)
},getVector:function(){return this._vector
},enableMapDrag:function(){this.$map().enableDrag()
},disableMapDrag:function(){this.$map().disableDrag()
},enableChangeMapEvent:function(){this.$map().enableChangeMapEvent()
},disableChangeMapEvent:function(){this.$map().disableChangeMapEvent()
},_distinguishFlightSpot:function(){var k=this.$map(),j=this.$service();
j.requestFlightSpots(k.getBound(),k.getLevel(),function(m){var l=m.result.data;
if(!l||!l.length){j.dispatch("noFlightSpot")
}else{j.dispatch("existFlightSpot")
}})
}})
})();
iron.ns("nhn.map.panorama").MinimapViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._listeners={openPanorama:this._onOpenPanorama.bind(this),resize:this._onResize.bind(this),panoramaMove:this._onPanoramaMove.bind(this),panoramaLoadStatus:this._onPanoramaLoadStatus.bind(this),closePanorama:this._onClosePanorama.bind(this),afterClosePanorama:this._afterClosePanorama.bind(this),activateFlightView:this._onActivateFlightView.bind(this),deactivateFlightView:this._onDeactivateFlightView.bind(this)}
},_listenService:function(){this.$service().attach(this._listeners)
},_unlistenService:function(){this.$service().detach(this._listeners)
},_initView:function(){var a=this.$view();
a.setFrame($("#naver-minimap"));
a.setStreetAvatarListener({mousedown:this._onAvatarMouseDown.bind(this),mouseup:this._onAvatarMouseUp.bind(this),dragstart:this._onAvatarDragStart.bind(this),dragmove:this._onAvatarDragMove.bind(this),dragend:this._onAvatarDragEnd.bind(this),dragcancel:this._onAvatarDragCancel.bind(this)})
},_onOpenPanorama:function(c){var b=c.panoramaData,a=this.$view();
a.disableChangeMapEvent();
if(!a.isActivated()){a.activate();
if(!this.$service().isFlightActivated()){a.beginSeekFlightSpots()
}}if(b.layout!==0){a.showMap(b)
}if(a.getLayout()===null){a.setLayout(b.layout)
}},_onClosePanorama:function(){var b=this.$view(),a=this.$service();
b.disableChangeMapEvent();
if(b.isActivated()){b.deactivate()
}b.hideMap();
b.removeAvatar();
b.stopSeekFlightSpots();
if(!a.isFlightActivated()){a.dispatch("existFlightSpot")
}},_afterClosePanorama:function(){this.$view().enableChangeMapEvent()
},_onResize:function(){var a=this.$view();
if(a.isActivated()){a.adjustSize()
}},_onPanoramaMove:function(g){var b=g.panoramaData,f=g.moveData,a=this.$view(),d=a.getLayout(),c;
c=(d===0&&b.layout!==0)||(d!==0&&b.layout===0);
if(c){a.setLayout(b.layout);
this.$service().resize()
}if(!f.lat||!f.lng){a.moveAvatar(b)
}else{a.moveMap(b)
}a.enableChangeMapEvent()
},_onPanoramaLoadStatus:function(b){var a=b.status;
this.$view().setMarineAvatarTitle(a.title);
this.$view().setFlightAvatarTitle(a.title);
this.$service().panoramaStatusChanged(a)
},_onAvatarMouseDown:function(){this.$view().disableMapDrag()
},_onAvatarMouseUp:function(){var a=this.$view();
a.enableMapDrag();
a.pauseCursor()
},_onAvatarDragStart:function(h){var f=h.domEvent,a=this.$view(),g=a.getMap();
this._curDragCenter=g.getCenter();
a.getStreetAvatar().hide();
a.enableCursor();
a.observeAutoPan();
var b=this.$service().getPanoramaData(),d=b.type,c="pno*m.streeticon";
if(d===10){c="pnd*m.streeticon"
}nhn.map.LogClick({event:f||null,element:f.target||f.srcElement,acode:c})
},_onAvatarDragMove:function(b){var a=b.point;
this.$view().setVectorByScreenPoint(a)
},_onAvatarDragEnd:function(g){var l=nhn.map.DOMCache.getDocument(),h=$(g.domEvent.target),j=this.$view(),c=j.getMap(),k=g.point,f=c.getOffset({x:k.x+l.scrollLeft(),y:k.y+l.scrollTop()}),d=c.getOffsetToLatlng(f),i=nhn.map.panorama.Const.TYPE_STREET,b=c.getLevel(),a,m=null;
if(h.closest("._indoor_region_clue").length>0){m=h.parent().data();
if(this.$service().isActivatedIndoorPolygon(m.id)){i=nhn.map.panorama.Const.TYPE_INDOOR
}else{i=nhn.map.panorama.Const.TYPE_STREET
}}j.unobserveAutoPan();
a=function(){c.setCenter(this._curDragCenter);
delete this._curDragCenter;
j.getStreetAvatar().show();
j.disableCursor()
}.bind(this);
nhn.map.LogPV("mini_streetmove");
if(!j.getVector().inBound){a();
return
}this.$service().searchPanorama(d,b,i,a,"minimap",m)
},_onAvatarDragCancel:function(){var a=this.$view(),b=a.getMap();
a.unobserveAutoPan();
if(this._curDragCenter){b.setCenter(this._curDragCenter);
delete this._curDragCenter
}a.getStreetAvatar().show();
a.disableCursor();
a.enableMapDrag();
a.pauseCursor()
},_onActivateFlightView:function(){var a=this.$view();
if(a.isActivated()){a.stopSeekFlightSpots()
}},_onDeactivateFlightView:function(){var a=this.$view();
if(a.isActivated()){a.beginSeekFlightSpots()
}}});
(function(){var a=iron.ns("nhn.map.panorama").Const;
iron.ns("nhn.map.panorama").PlayerView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._html5Enabled=false;
this._playing=false;
this._prefix="PANO_";
this._uid=this._prefix+(+new Date());
this._determinePlayer()
},_determinePlayer:function(){var b=!this._html5Enabled?this.$flashPlayer():this.$htmlPlayer();
this.$player=function(){return b||null
}},_initPlayer:function(){var b=this.$player();
b.setContainer(this._el);
b.setListener(this.getPlayerListener())
},getPlayer:function(){return this.$player()
},setPlayerListener:function(b){this._playerListener=b
},getPlayerListener:function(){return this._playerListener||{}
},_initHeader:function(){this.$header().attach(this.getHeaderListener())
},getHeader:function(){return this.$header()
},setHeaderListener:function(b){this._headerListener=b
},getHeaderListener:function(){return this._headerListener||{}
},setElement:function(b){this._el=$(b)
},getElement:function(){return this._el?this._el[0]:null
},isPlayerReady:function(){return this._player.isReady()
},show:function(){this.$player().show()
},hide:function(){this.$player().hide()
},setSize:function(b){this._underIE7&&this._el.css("zoom",-1);
this.$player().setSize(b);
this.$service().setPanoramaSize(b);
this._underIE7&&this._el.css("zoom",1)
},getSize:function(){return this.$player().getSize()
},isPlaying:function(){var b=this.$player();
return b?b.isPlaying():false
},setPanoramaData:function(b){this.$player().setPanoramaData(b);
this.$service().setPanoramaData(b);
if(!this._el||!this._el.length){return
}var d=this._el.prev(),c=b.type,e="거리뷰";
if(!d[0]||d[0].tagName!="H2"){return
}if(c==a.TYPE_FLIGHT){e="항공뷰"
}if(c==a.TYPE_STREET){e="거리뷰"
}if(c==a.TYPE_INDOOR){e="실내뷰"
}if(c==a.TYPE_MUSEUM){e="뮤지엄뷰"
}if(c>=a.TYPE_INTERIOR&&c<=a.TYPE_INTERIOR_FRONT){e="펜션뷰"
}if(c==a.TYPE_MARINE){e="수중뷰"
}d.text(e)
},getPanoramaData:function(){return this.$player().getPanoramaData()
},openPanorama:function(b){var c=this.isPlaying();
if(!this._inited){this._initHeader();
this._initPlayer();
this._inited=true
}if(!c){this.show();
this.$header().show();
b.isReset=true
}this.setPanoramaData(b);
this.$player().playPanorama(b)
},closePanorama:function(){if(!this.isPlaying()){return
}this.$player().close();
this.$header().hide();
this.hide();
this._cautionShown=false
},_isStaredPoi:function(b){var c=b.getId();
return b.options.lookAt||c.indexOf("ROUTE")===0||c.indexOf("PATHWALK")===0
},_isOpenedPoi:function(b){return b.options.showme||false
},_getInfowindowSize:function(c){var d=360,e=490,b=c.url||"";
if(b.indexOf("path_")===0||b.indexOf("sym_trans")===0){e=160
}else{if(b.indexOf("sym_int")===0&&c.imgOrder!==2){e=400
}}return new nhn.map.Size(d,e)
},_getPoiIconInfo:function(h){var j=h.getId(),n=h.getIcon(),f=n.getIconType?n.getIconType():"Old",i=f.split("_"),c=i[0],m=i[1],e=0,l="pin_spot",g={};
if(f!=="Old"){l=({ID:"pin_spot",SITE:"pin_d",BUS:"pin_bus",REGION:"pin_spot"})[c];
e=m||0
}var b={SUBWAY:0,BUS:1,WALK:2,EXPRESS:3,INNTERBUS:3,TRAIN:4,AIR:5,NONE:6};
if(c=="DEPARTURE"){if(!m){l="path_point";
e=0
}else{l="path_trans_start";
e=b[m]
}}if(f=="DESTINATION"){l="path_point";
e=1
}if(c=="VIA"){l="path_point";
e=+m+2
}if(c=="DIRSTEP"){if(m=="NUMBER"){l="sym_trans_m";
n.text=n.getDisplayNumber();
e=2
}else{l="sym_trans_m";
e=b[m]
}}if(c=="AD"){l="sym_trans_m";
n.text=parseInt(m,10)+1
}var k=[0,2,3,1,4,1];
if(j.indexOf("traffic")===0){var d=+j.split("_")[1]-1;
l="sym_int";
e=k[d]||0
}var o=f.indexOf("_U");
if(o>-1&&(o==(f.length-3))){l="pin_d2_line";
e=f.split("_")[1]
}g.type="Sprite";
if(n.text){g.text=n.text;
g.type="Text"
}g.url=l;
g.imgOrder=e;
return g
},_getPoiInfoFromMarker:function(f,c){var e=f.getPoint().toLatLng(),b=this._isStaredPoi(f)||false,g=this._getPoiIconInfo(f),h=this._getInfowindowSize(g),k=this._getMarkerPanoramaData(f),j=this._isOpenedPoi(f),i=false,d;
if(c){j=true;
i=true
}d={type:g.type,lat:e.lat(),lng:e.lng(),poi_id:f.getId(),title:f.getTitle(),icon:g,layer_size:h,callback:j,lookAt:b,perspective:true,pano_id:k.id,pan:k.pan,tilt:k.tilt,fov:40||k.fov,closeInfoWindowAfter3s:i};
return d
},_getMarkerPanoramaData:function(c){var b=this.getPanoramaData().type,d=c.options.streetPanorama;
if(b==a.TYPE_FLIGHT||b==a.TYPE_MARINE){d=c.options.skyPanorama
}else{if(b==a.TYPE_MUSEUM){d=c.options.insidePanorama
}else{if(b==a.TYPE_INTERIOR_FRONT){d=c.options.interiorPanorama
}else{if(b==a.TYPE_INDOOR){d=c.options.indoorPanorama
}}}}return d||c.options.streetPanorama||null
},_getDrawablePoi:function(){var c=this.getPanoramaData(),b=this.$service().getMarkerList(),d=[];
b.filter(function(e){var f=e.id||e.options.id;
return f.indexOf("BOOKMARK")!==0
}).forEach(function(e){var f=this._getMarkerPanoramaData(e);
if(f&&f.id==c.id){d.push(this._getPoiInfoFromMarker(e,c.isOpenInfoWindowWithMarker))
}},this);
return d
},toggleVisibilityOfNearSkyPanorama:function(){this.$player().setVisibilityOfNearSkyPanorama(this.$header().getNearPanoramaVisibility());
this.$player().focus()
},toggleVisibilityOfNearInfo:function(){this.setVisibilityOfNearInfo(this.getVisibilityOfNearInfo());
this.$player().focus()
},getVisibilityOfNearInfo:function(){return this.$header().getNearInfoVisibility()
},setVisibilityOfNearInfo:function(b){this.$player().setVisibilityOfNearInfo(b)
},removeMarker:function(b){this.$player().removeInteractiveObject(b.getId())
},drawMarkers:function(){var c=this._getDrawablePoi();
if(c.length){this.$player().addInteractiveObject(c);
if(!this._cautionShown){this.$service().showInaccuratePoiDialog();
this._cautionShown=true
}if(c[0].closeInfoWindowAfter3s){var b=this;
setTimeout(function(){b.clearInfoWindow()
},3000)
}}},removeDrawablePoi:function(){var b=this._getDrawablePoi();
if(b.length){b.forEach(function(c){this.$player().removeInteractiveObject(c)
}.bind(this))
}},requestPanoramaInfo:function(b){if(this.isPlaying()){this.$player().requestPanoramaInfo(b)
}else{b(null)
}},openSaveWindow:function(){this.$player().focus();
this.$player().openSaveWindow()
},focusSavePopupCloseBtn:function(){this.$player().focusSavePopupCloseBtn()
},setRouteInfo:function(b){this.$player().setRouteInfo(b)
},clearRouteInfo:function(){this.$player().clearRouteInfo()
},setTransportInfo:function(b){this.$player().setTransportInfo(b)
},clearTransportInfo:function(){this.$player().clearTransportInfo()
},changeLayout:function(b){this.$player().changeLayout(b)
},movePanorama:function(b){this.$player().movePanorama(b)
},openPanoramaWindow:function(b){this.$player().openPanoramaWindow(b)
},moveInfoPane:function(b,c){this.$infoPane().move(b,c)
},getInfoPane:function(){return this.$infoPane()
},addInfoWindow:function(b){this.$infoPane().addOverlay(b)
},removeInfoWindow:function(b){this.$infoPane().removeOverlay(b)
},clearInfoWindow:function(){this.$infoPane().clearOverlays()
},closeAllInfoWindow:function(){this.$infoPane().closeAll()
},requestPanoramaImage:function(d,b,c){this.$player().requestPanoramaImage(d,b,c)
},moveToolbox:function(b,c){this.$toolbox().move(b,c)
},getToolbox:function(){return this.$toolbox()
},hideToolbox:function(){this.$toolbox().hide()
},showToolbox:function(){this.$toolbox().show()
}})
}());
(function(){var a=iron.ns("nhn.map.panorama").Const;
iron.ns("nhn.map.panorama").FlashPlayer=iron.Class({SAVE_URL:"/panorama/storeImg.nhn",initialize:function(){this._uid="PanoramaPlayer_"+(+new Date());
this._windowTitle=document.title;
this._playing=false;
this._ready=false;
this._execInterfaceQueue=[]
},getUID:function(){return this._uid
},setContainer:function(b){this._container=$(b)
},getContainer:function(){return this._container[0]
},getElement:function(){return this._viewer
},_initPlayer:function(){var e=$.extend({baseUrl:a.BASE_URL,ssl:a.SSL,path:a.META_PATH,prefix:a.PLAYER_LISTENER+".",embedMode:false,interval:500},this.getPanoramaData()),d={wheelHandler:"mouseWheelListener",wmode:"opaque",seamlesstabbing:"1",flashVars:{initParams:JSON.stringify(e)}},b=this.getUID(),c;
c=nhn.FlashObject.generateTag(a.SWF_URL,b,"100%","100%",d);
this._container.html(c);
this._viewer=nhn.FlashObject.find(b);
this.changeNsc();
this._viewer.onkeydown=function(f){var f=f||window.event;
f.stopPropagation&&f.stopPropagation();
f.cancelBubble=true
}},isReady:function(){return !!this._ready
},_onReady:function(){this._ready=true;
this._execInterfaceQueue.forEach(function(b){this.execPlayerInterface.apply(this,b)
},this);
this._execInterfaceQueue=[]
},setResponsePanoramaInfoCallback:function(b){this._responsePanoramaInfoCallback=b
},setListener:function(i){var f=this,e={};
function c(k,j){e[k]=function(l){var n;
try{n=JSON.parse(l)
}catch(m){n=l||null
}j.apply(f,n!=null?[n]:[]);
f.recoverWindowTitle()
}}function d(j){e.init=function(k){f.isReady()||f._onReady();
j(k)
}}function b(j){e.responsePanoramaInfo=function(k){f._responsePanoramaInfoCallback&&f._responsePanoramaInfoCallback(JSON.parse(k));
delete f._responsePanoramaInfoCallback;
j(k)
}}for(var g in i){var h=i[g];
c(g,h);
if(g=="init"&&e[g]){d(e[g])
}if(g=="responsePanoramaInfo"&&e[g]){b(e[g])
}}$.extend(iron.ns(a.PLAYER_LISTENER),e)
},setPanoramaData:function(b){this._panoramaData=b
},getPanoramaData:function(){return this._panoramaData
},isPlaying:function(){return this._playing
},show:function(){this._container.parent().css({top:0,left:0,right:0,bottom:0})
},hide:function(){this._container.parent().css({top:-9999,left:-9999,right:"auto",bottom:"auto"});
this._playing=false
},playPanorama:function(b){this.setPanoramaData(b);
if(!this._inited){this._initPlayer();
this._inited=true
}else{this.changeNsc();
this.movePanorama(b)
}this._playing=true
},execPlayerInterface:function(e,b){if(!this.isReady()){this._execInterfaceQueue.push(arguments);
return
}if(!this._viewer[e]){return
}var d=this._viewer,c=typeof b!="string"?JSON.stringify(b):b;
if(c=="true"){c=true
}if(c=="false"){c=false
}if(b===undefined){c=undefined
}if(d[e]){d[e].apply(d,c!==undefined?[c]:[]);
this.recoverWindowTitle()
}},recoverWindowTitle:function(){if($.browser.msie){document.title=this._windowTitle
}},focus:function(){this._viewer&&this._viewer.focus();
this.recoverWindowTitle()
},setSize:function(b){this._container.css({width:b.width,height:b.height})
},getSize:function(){return new nhn.map.Size(this._container.width(),this._container.height())
},setVisibilityOfNearSkyPanorama:function(b){this.execPlayerInterface("setVisibilityOfNearSkyPanorama",b)
},setVisibilityOfNearInfo:function(b){this.execPlayerInterface("setVisibilityOfNearInfo",b)
},addInteractiveObject:function(b){this.execPlayerInterface("addInteractiveObject",b)
},removeInteractiveObject:function(c){var b=["removeInteractiveObject"];
if(typeof c=="string"){b.push(c)
}else{if(c){b.push(c.poi_id)
}}this.execPlayerInterface.apply(this,b)
},requestPanoramaInfo:function(b){b&&this.setResponsePanoramaInfoCallback(b);
this.execPlayerInterface("requestPanoramaInfo")
},requestPanoramaImage:function(d,b,c){this.execPlayerInterface("requestPanoramaImg",{url:this.SAVE_URL,width:d,height:b,temp:c?1:0})
},openSaveWindow:function(){this.execPlayerInterface("save")
},focusSavePopupCloseBtn:function(){this.execPlayerInterface("setFocus","popupCloseBtn")
},setRouteInfo:function(b){this.execPlayerInterface("setRouteInfo",b)
},clearRouteInfo:function(){this.execPlayerInterface("setRouteInfo",{})
},setTransportInfo:function(b){if(!Array.isArray(b)){b=[b]
}this.execPlayerInterface("setTransportInfo",b)
},clearTransportInfo:function(){this.execPlayerInterface("setTransportInfo",[])
},changeLayout:function(b){this.execPlayerInterface("changeLayout",b)
},movePanorama:function(b){if(!b){return
}this.execPlayerInterface("mapMove",b)
},openPanoramaWindow:function(b){var c=typeof b!="string"?b.getId():b;
this.execPlayerInterface("clickInteractiveObject",c)
},changeNsc:function(){this.execPlayerInterface("setNsc","map.pano")
},close:function(){this.execPlayerInterface("close");
this._playing=false
}})
}());
iron.ns("nhn.map.panorama").HTMLPlayer=iron.Class({});
iron.ns("nhn.map.panorama").PlayerHeader=iron.Class({inherit:nhn.map.Dispatcher},{AIR_VIEW:1,STREET_VIEW:3,BICYCLE_VIEW:4,MUSEUM_VIEW:5,INTERIOR_VIEW:7,INTERIOR_FRONT_VIEW:8,INDOOR_VIEW:10,MARINE_VIEW:12,initialize:function(){this._template=nhn.mapservice.TemplateRepos.get("panorama_header")
},getElement:function(){return this._el?this._el[0]:null
},_draw:function(){if(this._el&&this._el.length){return
}this._el=nhn.map.DOMCache.getViewerLnb();
this._el.html(this._template.process()).removeClass("_snbv_indoor").addClass("_snbv_panorama");
this.panoramaInfo=this._el.find("div.snbv_title_area");
this.panoramaBtns=this._el.find("div.snbv_act");
this.streetIcon=this.panoramaInfo.find("span.spmh");
this.streetName=this.panoramaInfo.find("h3.snbv_title");
this.address=this.panoramaInfo.find("p.snbv_info span.snbv_addr");
this.photodate=this.panoramaInfo.find("p.snbv_info em");
this.btnNearPano=this.panoramaBtns.find("a.spm_snbv_aroundair");
this.btnNearInfo=this.btnNearPano.next()
},_bindEvents:function(){this.btnNearPano.on("click",this._onClickNearPanorama.bind(this));
this.btnNearInfo.on("click",this._onClickNearInfo.bind(this));
this._el.on("click","a.spm_viewer_close",this._onClickClose.bind(this))
},_unbindEvents:function(){this.btnNearPano.off();
this.btnNearInfo.off();
this._el.off()
},setType:function(a){if(!a){return false
}var c="",b="";
this._type=a;
this.streetIcon.removeClass("spmh_snbv_road spmh_snbv_air spmh_snbv_inside spmh_snbv_pension");
this.panoramaBtns.show();
if(this._type==this.AIR_VIEW){b="항공뷰";
this.streetIcon.addClass("spmh_snbv_air");
this.btnNearInfo.removeClass("spm_snbv_aroundinfo").addClass("spm_snbv_areacheck").show().text("지명표시");
c="pno*k"
}else{if(this._type==this.STREET_VIEW||this._type==this.BICYCLE_VIEW){b="거리뷰";
this.streetIcon.addClass("spmh_snbv_road");
this.btnNearInfo.removeClass("spm_snbv_areacheck").addClass("spm_snbv_aroundinfo").show().text("주변정보");
c="pno*s"
}else{if(this._type==this.MUSEUM_VIEW){b="뮤지엄뷰";
this.streetIcon.addClass("spmh_snbv_inside");
c="pni*m"
}else{if(this._type==this.INTERIOR_VIEW){b="펜션뷰";
this.streetIcon.addClass("spmh_snbv_pension");
c="pns"
}else{if(this._type==this.INTERIOR_FRONT_VIEW){b="펜션뷰";
this.streetIcon.addClass("spmh_snbv_pension");
c="pns"
}else{if(this._type==this.INDOOR_VIEW){b="실내뷰";
this.streetIcon.addClass("spmh_snbv_road");
this.btnNearInfo.removeClass("spm_snbv_areacheck").addClass("spm_snbv_aroundinfo").show().text("주변정보");
c="pnd*s"
}else{if(this._type==this.MARINE_VIEW){b="수중뷰";
this.streetIcon.addClass("spmh_snbv_ocean");
this.panoramaBtns.hide();
c="pno*k"
}}}}}}}this.streetIcon.text(b).attr("title",b);
c&&nhn.map.LogClick.setGroupCode("PNO",c)
},getType:function(){return this._type
},isPanoHeaderVisible:function(){return this._el.is(":visible")
},toggleNearPanoramaVisibility:function(){this.setNearPanoramaVisibility(!this.getNearPanoramaVisibility())
},setNearPanoramaVisibility:function(a){var b=this._nearPanoramaVisibility;
this._nearPanoramaVisibility=!!a;
if(b!=a){this.updateNearPanoramaButton()
}},getNearPanoramaVisibility:function(){return this._nearPanoramaVisibility||false
},toggleNearInfoVisibility:function(){this.setNearInfoVisibility(!this.getNearInfoVisibility())
},setNearInfoVisibility:function(a){var b=this._nearInfoVisibility;
this._nearInfoVisibility=!!a;
if(b!=a){this.updateNearInfoButton()
}},getNearInfoVisibility:function(){return this._nearInfoVisibility||false
},updateNearPanoramaButton:function(){var a=this.getNearPanoramaVisibility();
if(a){this.btnNearPano.addClass("on")
}else{this.btnNearPano.removeClass("on")
}},updateNearInfoButton:function(){var a=this.getNearInfoVisibility();
if(a){this.btnNearInfo.addClass("on")
}else{this.btnNearInfo.removeClass("on")
}},changeStatus:function(b){if(!b){return false
}var a=b.photodate;
if(b.nearSkyPanoramaEnabled){this.btnNearPano.show()
}else{this.btnNearPano.hide()
}if(b.nearInfoEnabled){this.btnNearInfo.show()
}else{this.btnNearInfo.hide()
}if(a){a=a.split("-").slice(0,2).map(function(c){return +c
}).join(".");
this.photodate.show().text(a)
}else{this.photodate.hide()
}this.panoramaInfo.show();
this.setType(b.type);
this.address.text(decodeURI(b.address));
this.streetName.empty().text(decodeURI(b.title));
this.setNearPanoramaVisibility(b.nearSkyPanoramaVisible);
this.setNearInfoVisibility(b.nearInfoVisible)
},overlayVisibleStateChange:function(a){this.setNearPanoramaVisibility(a.nearSkyPanoramaVisible);
this.setNearInfoVisibility(a.nearInfoVisible)
},show:function(){this._draw();
this._bindEvents();
this._el.show().addClass("_snbv_panorama");
nhn.map.DOMCache.getLnbWrap().hide()
},hide:function(){this._el.hide().removeClass("_snbv_panorama");
nhn.map.DOMCache.getLnbWrap().show();
this.destroy()
},destroy:function(){this._unbindEvents();
delete this._el;
delete this._nearPanoramaVisibility;
delete this._nearInfoVisibility
},_onClickNearPanorama:function(a){a.preventDefault();
this.toggleNearPanoramaVisibility();
this.dispatch("clickNearPanorama",{domEvent:a.originalEvent})
},_onClickNearInfo:function(a){a.preventDefault();
this.toggleNearInfoVisibility();
this.dispatch("clickNearInfo",{domEvent:a.originalEvent})
},_onClickClose:function(b){b.preventDefault();
var c="",a=this;
if(this._type==this.AIR_VIEW){c="pno"
}else{if(this._type==this.STREET_VIEW||this._type==this.BICYCLE_VIEW){c="pno"
}else{if(this._type==this.MUSEUM_VIEW){c="pni"
}else{if(this._type==this.INTERIOR_VIEW){c="pns"
}else{if(this._type==this.INTERIOR_FRONT_VIEW){c="pns"
}else{if(this._type==this.INDOOR_VIEW){c="pnd"
}else{if(this._type==this.MARINE_VIEW){c="pno"
}}}}}}}c&&nhn.map.LogClick.setGroupCode("PNO",c);
window.setTimeout(function(){a.dispatch("clickClose")
},0)
}});
iron.ns("nhn.map.panorama").InfoPane=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._body=nhn.map.DOMCache.getBody();
this._overlayList=[];
this._createElement();
this._draw()
},_createElement:function(){this._el=$('<div style="position:absolute;z-index:200;top:0;left:0;width:0;height:0;overflow:visible;"></div>')
},_draw:function(){if(this._body.has(this.getElement()).length){return
}this._body.append(this.getElement())
},_removeInfoWindowElement:function(b){var a=b.getElement();
a.parentNode.removeChild(a)
},getElement:function(){return this._el[0]
},addOverlay:function(a){if(this._overlayList.indexOf(a)>-1){return
}this._overlayList.push(a);
this._el.append(a.getElement());
a.onadd&&a.onadd(this)
},removeOverlay:function(b){var a=this._overlayList.indexOf(b);
if(a==-1){return
}this._overlayList.splice(a,1);
this._removeInfoWindowElement(b);
b.onremove&&b.onremove(this)
},clearOverlays:function(){this._overlayList.forEach(this._removeInfoWindowElement.bind(this));
this._overlayList=[]
},closeAll:function(){this._overlayList.forEach(function(a){a.close()
})
},move:function(a,b){this._el.css({left:a,top:b})
}});
iron.ns("nhn.map.panorama").Toolbox=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._body=nhn.map.DOMCache.getBody();
this._createElement();
this._draw()
},_createElement:function(){this._el=$('<div class="map_ctrl map_ctrl_panorama _none_pointer" style="position:absolute;z-index:2000;top:0;left:0;width:0;height:0;overflow:visible"></div>')
},_draw:function(){if(this._body.has(this.getElement()).length){return
}this._body.append(this.getElement())
},getElement:function(){return this._el[0]
},move:function(a,b){this._el.css({left:a,top:b})
},show:function(){this._el.show()
},hide:function(){this._el.hide()
}});
(function(){var b=iron.ns("nhn.map.panorama"),a=b.Const;
b.PlayerViewController=iron.Class({initialize:function(){this._listener={openPanorama:this._onOpenPanorama.bind(this),closePanorama:this._onClosePanorama.bind(this),changePlayerLayout:this._onChangePlayerLayout.bind(this),removeMarker:this._onRemoveMarker.bind(this),resize:this._onResize.bind(this),openSaveWindow:this._onOpenSaveWindow.bind(this),setRouteInfo:this._onSetRouteInfo.bind(this),clearRouteInfo:this._onClearRouteInfo.bind(this),setTransportInfo:this._onSetTransportInfo.bind(this),clearTransportInfo:this._onClearTransportInfo.bind(this),addInfoWindow:this._onAddInfoWindow.bind(this),removeInfoWindow:this._onRemoveInfoWindow.bind(this),clearInfoWindow:this._onClearInfoWindow.bind(this),requestPanoramaImage:this._onRequestPanoramaImage.bind(this),removeDrawablePoi:this._onRemoveDrawablePoi.bind(this)}
},_listenService:function(){this.$service().attach(this._listener)
},_unlistenService:function(){this.$service().detach(this._listener)
},_initView:function(){var c=this.$view();
c.setElement($("#naver-view-panel"));
c.setHeaderListener({clickNearPanorama:this._onClickNearPanorama.bind(this),clickNearInfo:this._onClickNearInfo.bind(this),clickClose:this._onClickClose.bind(this)});
c.setPlayerListener({init:this._onInitPlayer.bind(this),close:this._onClosePlayer.bind(this),panoramaMove:this._onPanoramaMove.bind(this),panoramaLoadStatus:this._onPanoramaLoadStatus.bind(this),changeLayout:this._onChangeLayout.bind(this),overlayVisibleStateChange:this._onOverlayVisibleStateChange.bind(this),openInfoWindow:this._onOpenInfoWindow.bind(this),closeInfoWindow:this._onCloseInfoWindow.bind(this),openCctvWindow:this._onOpenCctvWindow.bind(this),moveRoutePanorama:this._onMoveRoutePanorama.bind(this),responsePanoramaInfo:this._onResponsePanoramaInfo.bind(this),responsePanoramaImg:this._onResponsePanoramaImage.bind(this),sendPageView:this._onSendPageView.bind(this),autoTourStart:this._onAutoTourStart.bind(this),autoTourStop:this._onAutoTourStop.bind(this),sendPopupUrl:this._onSendPopupUrl.bind(this),closeSavePopupWindow:this._onCloseSavePopupWindow.bind(this),flashMouseClick:this._onClickPlayer.bind(this),requestPrint:this._onRequestPrint.bind(this),requestShare:this._onRequestShare.bind(this)});
this._saveBtn=$("#result-panel").find("a.btn_save");
this._prevVisibilityOfNearInfo=null
},_listenSaveBtn:function(){var d=this._saveBtn,c=this.$view();
d.on({"focus.PlayerViewController":function(){d.on("keydown.PlayerViewController",function(f){var g=13;
if(f.keyCode==g){f.preventDefault();
f.stopPropagation();
c.openSaveWindow();
c.focusSavePopupCloseBtn()
}})
},"blur.PlayerViewController":function(){d.off("keydown.PlayerViewController")
}})
},_unlistenSaveBtn:function(){this._saveBtn.off(".PlayerViewController")
},_errorLoadPanorama:function(){var c=this.$service();
nhn.map.service.Alert("해당 장소의 거리뷰&middot;항공뷰를<br />불러오지 못했습니다.","이 문제는 서비스 운영담당자에게 자동 보고되었고<br />빠른시일내에 확인 후 문제를 해결하도록 하겠습니다.",function(){c.closePanorama()
})
},_onOpenPanorama:function(d){var c=this.$view();
c.openPanorama(d.panoramaData);
this._listenSaveBtn();
c.showToolbox();
$("#container").addClass("panorama")
},_onClosePanorama:function(){var c=this.$view();
c.closePanorama();
this._onCloseInfoWindow();
this._unlistenSaveBtn();
c.hideToolbox();
$("#container").removeClass("panorama")
},_onChangePlayerLayout:function(d){var c=d.layout;
this.$view().changeLayout(c)
},_onResize:function(f){var c=f.availSize,g=this.$service().getMinimapSize(),d=this.$service().getLayout();
if(d==1){c.height=c.height-g.height
}if(d>=0&&d<=3){this.$view().setSize(c)
}this._onCloseInfoWindow()
},_onRemoveMarker:function(c){this.$view().removeMarker(c.marker)
},_onOpenSaveWindow:function(){this.$view().openSaveWindow()
},_onSetRouteInfo:function(c){this.$view().setRouteInfo(c.routeData)
},_onClearRouteInfo:function(){this.$view().clearRouteInfo()
},_onSetTransportInfo:function(c){this.$view().setTransportInfo(c.transportInfo)
},_onClearTransportInfo:function(){this.$view().clearTransportInfo()
},_onAddInfoWindow:function(c){this.$view().addInfoWindow(c.infoWindow)
},_onRemoveInfoWindow:function(c){this.$view().removeInfoWindow(c.infoWindow)
},_onClearInfoWindow:function(){this.$view().clearInfoWindow()
},_onRequestPanoramaImage:function(c){this.$view().requestPanoramaImage(c.width,c.height,c.isTemp)
},_onRemoveDrawablePoi:function(){this.$view().removeDrawablePoi()
},_onClickPlayer:function(){this.$service().dispatch("player_clicked")
},_onRequestPrint:function(){this.$service().dispatch("click_print")
},_onRequestShare:function(c){var d=$(this.$view().getElement()).offset();
this.$view().moveToolbox(d.left+c.screen_x+30,d.top+c.screen_y-25);
this.$service().dispatch("click_share",{screenX:c.screen_x,screenY:c.screen_y})
},_onClickNearPanorama:function(){this.$view().toggleVisibilityOfNearSkyPanorama()
},_onClickNearInfo:function(){this.$view().toggleVisibilityOfNearInfo()
},_onClickClose:function(){this.$service().closePanorama()
},_onInitPlayer:function(){},_onPanoramaMove:function(f){var c=this.$view().getPanoramaData();
$.each(f,function(g,h){c[g]=h
});
if(f.lat&&f.lng){c.point=new nhn.mapcore.LatLng(c.lat,c.lng)
}if(f.type){var e=[a.TYPE_MUSEUM,a.TYPE_INTERIOR,a.TYPE_INTERIOR_FRONT],d=(e.indexOf(f.type)!=-1);
if(!d&&c.layout===0){c.layout=this._oldLayout||2
}else{if(d&&c.layout!==0){this._oldLayout=this.$service().getLayout();
c.layout=0
}}if(f.type==1&&!this.$service().isFlightActivated()){this.$service().activateFlightView()
}if(f.type!=1&&!this.$service().isStreetActivated()){this.$service().activateStreetView()
}}this.$view().setPanoramaData(c);
this.$service().setPanoramaData(c);
this.$service().dispatch("panoramaMove",{panoramaData:c,moveData:f})
},_onPanoramaLoadStatus:function(c){if(!this._playerReady){this._playerReady=true;
this.$service().dispatch("playerReady")
}if(!c){this._errorLoadPanorama()
}var d=this.$view().getHeader();
d.changeStatus(c);
if(c.type===a.TYPE_MARINE){if(this._prevVisibilityOfNearInfo===null){this._prevVisibilityOfNearInfo=this.$view().getVisibilityOfNearInfo()
}this.$view().setVisibilityOfNearInfo(false)
}else{if(this._prevVisibilityOfNearInfo!==null){this.$view().setVisibilityOfNearInfo(this._prevVisibilityOfNearInfo)
}this._prevVisibilityOfNearInfo=null
}this.$service().dispatch("panoramaLoadStatus",{status:c});
window.setTimeout(function(){this.$view().drawMarkers()
}.bind(this),200);
this._logInsideView(c)
},_logInsideView:function(c){var d={7:"map_interior",8:"map_whole"}[c.type];
if(d){d=d.replace(/^map_/,"");
nhn.map.LogPV.resetIgnore();
nhn.map.LogPV(d)
}},_onChangeLayout:function(){},_onOverlayVisibleStateChange:function(c){var d=this.$view().getHeader();
d.overlayVisibleStateChange(c)
},_onClosePlayer:function(){},_onOpenInfoWindow:function(h){var i=$(this.$view().getElement()).offset(),g=h.id,d=g.split("_"),f=d[0].toUpperCase(),e=d[1],c=d[2];
this.$view().moveInfoPane(i.left,i.top);
h.spotType=f;
h.spotId=e;
if(f=="ROUTE"||f=="PATHWALK"){this.$service().dispatch("needsDirectionsWindowOpen",{windowInfo:h})
}else{if(f=="TRAFFIC"||f=="BUS"||(f==="ID"&&c)){h.trafficType=(f=="BUS")?1:parseInt(e,10);
h.stationId=c||e;
NModules.load(["bus","subway"],function(){this.$service().dispatch("needsTrafficWindowOpen",{windowInfo:h})
}.bind(this))
}else{h.realType=(e&&f!="ID")?f:"SITE";
this.$service().dispatch("needsSpotWindowOpen",{windowInfo:h})
}}this.$service().dispatch("needsInfoWindowOpen",{windowInfo:h})
},_onCloseInfoWindow:function(){this.$view().closeAllInfoWindow();
this.$service().dispatch("needsInfoWindowClose")
},_onOpenCctvWindow:function(){},_onMoveRoutePanorama:function(c){this.$service().dispatch("moveDirectionsPanorama",{targetInfo:c})
},_onResponsePanoramaInfo:function(c){this.$service().dispatch("responsePanoramaInfo",c)
},_onResponsePanoramaImage:function(c){this.$service().responsePanoramaImage(c)
},_onSendPageView:function(c){if(c){c=c.replace(/^map_/,"");
nhn.map.LogPV.resetIgnore();
nhn.map.LogPV(c)
}},_onAutoTourStart:function(){this.$service().dispatch("autoTourStart")
},_onAutoTourStop:function(){this.$service().dispatch("autoTourStop")
},_onSendPopupUrl:function(g){var e=400,c=400,f,d;
if(window.screen){e=window.screen.width;
c=window.screen.height
}f="toolbar=no,location=no,scrollbars=no,resizable=yes,width="+e+",height="+c+",left=0,top=0";
d=function(){return window.open(g,"_fullSizeMuseum",f)
};
this._museumPopup=d();
this._museumPopup.focus();
this.$service().dispatch("sendPopupUrl")
},_onCloseSavePopupWindow:function(){var d=$("#result-panel"),c=this._saveBtn;
if(c.size()===1&&!d.is(".rpanel_minimum")){setTimeout(function(){c.focus()
},0)
}}})
}());
nhn.mapservice.TemplateRepos.add({panorama_area:function(_d_){var p=[];
with(_d_){p.push('<div class="naver_view_wrap" style="z-index:20;top:-9999px;left:-9999px;right:auto;bottom:auto">  <div id="naver-view-panel" class="naver_view"></div>   <h2 class="blind">미니맵</h2>  <div id="naver-minimap" class="naver_view_minimap" style="display:none">    <div class="minimap_toggle" style="z-index:1000">    <img src="https://ssl.pstatic.net/static/maps2/blank.gif" width="29" height="29" alt="미니맵" usemap="#imgminimap">    <map name="imgminimap_expand">     <area data-m-layout-command="placeholder" shape="poly" coords="0,0,29,0,0,29" href="#" alt="">     <area data-m-layout-command="normalize" data-log="close" shape="poly" coords="0,29,29,0,29,29" href="#" title="미니맵 축소" alt="미니맵 축소">    </map>    <map name="imgminimap">     <area data-m-layout-command="maximize" data-log="open" shape="poly" coords="0,0,29,0,0,29" href="#" title="미니맵 확장" alt="미니맵 확장">     <area data-m-layout-command="minimize" data-log="close" shape="poly" coords="0,29,29,0,29,29" href="#" title="미니맵 숨김" alt="미니맵 숨김">    </map>    <map name="imgminimap_hide">     <area data-m-layout-command="normalize" data-log="open" shape="poly" coords="0,0,29,0,0,29" href="#" title="미니맵 열림" alt="미니맵 열림">     <area data-m-layout-command="placeholder" shape="poly" coords="0,29,29,0,29,29" href="#" alt="">    </map>   </div>   <div class="minimap_horizontal"></div>   <div class="minimap_vertical"></div>   </div> </div>')
}return p.join("")
},street_cursor:function(_d_){var p=[];
with(_d_){p.push('<div class="pano_dir pano_dir_move" style="z-index:20;display:none;">  <div class="dir_icon" style="height:32px">   <img src="about:blank" data-m-lazyload-src="https://ssl.pstatic.net/static/maps2/ico_pano_dir_final.png" width="900" height="400" class="_pano_pin" alt="" />  </div> </div>')
}return p.join("")
},panorama_header:function(_d_){var p=[];
with(_d_){p.push('<div class="snb_view_bg"></div>  <div class="snbv_title_area">  <span class="spmh spmh_snbv_road" title="파노라마뷰">파노라마뷰</span>  <h3 class="snbv_title"><span class="blind">파노라마</span></h3>  <p class="snbv_info"><span class="snbv_addr"></span> <span class="bar">|</span> <em></em> 촬영</p> </div> <div class="snbv_act">  <a href="#" class="spm spm_snbv_aroundair nclicks(#PNO#.nearskybutton)">주변항공</a>  <a href="#" class="spm spm_snbv_aroundinfo nclicks(#PNO#.nearinfobutton)">주변정보</a> </div> <a href="#" class="spm spm_viewer_close nclicks(#PNO#.close)" title="뷰어닫기">뷰어닫기</a>  <div class="snb_line"></div>')
}return p.join("")
}});(function(){var d="/local/siteview.nhn?code=",b=400,e=295;
var c=function(i,h,g){return{collection:i,description:h,acode:g}
},f={REGION_HOME:c("region","지도홈","dft"),REGION_POINT:c("region","지도홈","dft"),REGION_1:c("region","인기시즌성","rgn"),REGION_2:c("region","행정지역 시/군/구","rgn"),SITE_1:c("site","업체검색","plc"),SITE_2:c("site","주소 내 업체검색","plc"),SITE_3:c("site","전화번호 검색","plc"),ADDRESS:c("address","주소 검색","adr"),BUS:c("bus","버스 검색","bus"),NO_RESULT:c("site","결과 없음","nsr")},a={rgn:{region:""},plc:{site:""},adr:{address:"_rst",site:"_plc"},bus:{bus:""},region:{"1":"_spt","2":"_dst",HOME:"",POINT:""}};
$.extend(iron.ns("nhn.map.search"),{getNClickGroupCode:function(h,k,i){var g=f[h],j=g.acode;
if(g.collection==="region"){j+=a[g.collection][h.split("_")[1]]
}else{if(k){j+=a[j][k]
}if(i){j+=i
}}return j
},openSiteFreeCallWindow:function(j){if(!j){return
}var i="http://www.calllink.co.kr/ktppc/ctc/ctcwn.jsp",k=screen.availWidth/2-(b/2),h=screen.availHeight/2-(e/2),l=["customerid="+j.id,"callnumber="+j.tel,"username="+encodeURIComponent(j.name),"start=1","key="+j.ktCallMd],g;
i+="?"+l.join("&");
g=window.open(i,"site_freecall","width="+b+",height="+e+",top="+h+",left="+k+"resizable=no,scrollbars=0,status=no,menubar=no,toolbar=no,location=no");
if(g){g.focus()
}},getDetailViewUrl:function(g,k){if(!g.id){return null
}var h=location.href.replace(/(\?|#).*$/g,"")+"?",j=h.match(/^(http|https|mms):\/\/([^\/]*)/i)[0],i=k?"#review":"";
return j+d+g.id.match(/\d+/)+i
},getSearchItemFromMarkerId:function(h){if(!h){return null
}var g=null;
h.replace(/^(\w+)_(\w+)_(\d+)$/,function(j,i,l,k){g={type:i,id:l,index:k}
});
if(!g){h.replace(/^(\w+)_(\w+)$/,function(j,i,k){g={type:i,id:k}
})
}if(!g){h.replace(/^(?:(?:s|pr|pl|p|k|)(\d+))$/,function(i){g={type:"SITE",id:i}
})
}return g||null
}})
}());
(function(){var s=iron.ns("nhn.map.search");
s.Search=iron.Class(iron.KVO,{MAX_QUERY_LENGTH:100,RESEARCH_MODE:"1",_tab:null,_coord:"",_displayQuery:"",_query:"",_params:null,_options:null,_routeOpts:{},_searchById:null,_searchResult:null,_roadResult:null,_innerState:null,_outerState:null,_savedInMenu:false,_isFirstSearch:true,_selectedItem:null,_indoorData:null,_isAutoPanning:false,_centerPixel:null,_THRESHOLD_PIXEL:50,initialize:function(){iron.KVO.apply(this);
this._initBusOptions();
this.setCenterPixel(this.$map().getCenterPixel());
this.$RoadDAO().attach("road_complete",a.bind(this));
this.$CtxMenu().attach("item_clicked",n.bind(this));
this.$login().attach({afterLogin:r.bind(this),afterLogout:o.bind(this)})
},searchAddressByPoint:function(t){var u=this.getMenuState(),v=new nhn.mapcore.Inner(t.x,t.y).toLatLng();
if(u!=="LOCATION"){this.$menubar().changeMenu("LOCATION","tempTrigger")
}this.$QueryField().deactivateBoundarySearch();
this.request("",{searchCoord:[v.x,v.y].join(";"),type:"COORD",tab:1,isFirstSearch:true})
},getResult:function(){var t=this.get("_searchResult");
return(t&&"value" in t)?t.value:t
},_setResult:function(t){this.set("_searchResult",{key:"success",value:t})
},clearIDResult:function(){var t=this.getResult();
if(t._viewType!=="id"&&t._viewType==="home_id"){return
}this.resetToHome();
this.clearIDResult=function(){}
},setIndoorData:function(t){this.set("_indoorData",t)
},getIndoorData:function(){return this.get("_indoorData")
},getStationData:function(){return this._getParams()
},getQuery:function(){return this._query
},_setQuery:function(t){this._query=t
},getDisplayQuery:function(){return this.get("_displayQuery")
},_setDisplayQuery:function(t){this.set("_displayQuery",t);
if(t===undefined||t===null){return
}this.$QueryField().setKeyword(t)
},_getTab:function(){return this._tab
},_setTab:function(t){this._tab=t
},getItemById:function(t,z,w){if(typeof t==="undefined"){return
}var E=this.getResult();
if(!E){return
}var u=["region","address","site","bus"],A,y,C=null,D=function(F){return F.id==t
};
if(z){A=this._getViewName(z);
y=(z==="AD"?E.site.advertiseList:(E[A].list||E[A]));
C=y.filter(D)[0]
}else{for(var v=0,x=u.length;
v<x;
v++){A=u[v];
if(E[A]){y=E[A].list||[E[A]];
C=y.filter(D)[0];
if(C){break
}}}}if(C){C=$.extend(true,{},C);
if(typeof w!="undefined"){C=this._getMappedAddress(C,w)
}var B=("index" in C)?C.index*1:-1;
if(B>-1){C.isFirstItem=!(y[B-1]);
C.isLastItem=!(y[B+1])
}else{C.isFirstItem=C.isLastItem=false
}}return C
},_getViewName:function(t){return(t=="SPOT")?"region":t.toLowerCase().split("_")[0]
},getItemByIndex:function(u,w,z){if(typeof u=="undefined"||typeof w=="undefined"){return false
}var t=this.getResult();
if(!t){return false
}var v=this._getViewName(w),y=(w==="AD"?t.site.advertiseList:(t[v].list||t[v])),x=null;
if(!y){return false
}if(y instanceof Array){if(!y[u]){return false
}x=$.extend(true,{},y[u]);
if(typeof z!="undefined"){x=this._getMappedAddress(x,z)
}x.isFirstItem=!(y[u-1]);
x.isLastItem=!(y[u+1])
}else{x=$.extend(true,{},y);
x.isFirstItem=x.isLastItem=false
}return x
},_getMappedAddress:function(t,v){var u=null;
if(v==-1&&t.mappedAddress){u=t.mappedAddress
}else{if(v>-1&&t.mappedAddress.mappedAddressList){u=t.mappedAddress.mappedAddressList[v]
}}u.mappedAddress={fullAddress:t.fullAddress,isNewAddress:t.isNewAddress};
return u
},getViewType:function(){var t=this.getResult();
return(t&&t._viewType)?t._viewType:null
},request:function(u,w,t,v){if(typeof u=="undefined"){throw new Error("질의어가 입력되지 않았습니다.")
}if(!v){this._innerState=null
}w=w||{};
t=t||{};
this._beforeRequest(u,w,t);
this._onRequest()
},requestByHomeSetting:function(w,x,t,u){if(typeof w=="undefined"){throw new Error("질의어가 입력되지 않았습니다.")
}var y=this.$map().getCenter().toLatLng(),v={query:w,menu:this.getMenuState(),searchCoord:y.lng()+";"+y.lat(),sm:"clk"};
x=$.extend(v,x);
this.$dao().requestSearch(x,t,u)
},requestRegionLists:function(t,u){var v=this._getParams();
this.$dao().requestRegionLists(v,t,u)
},_beforeRequest:function(u,v,t){this._reset();
this._setSearchQuery(u);
this._setSearchById(v);
this._setSearchOptions(t);
this._setSearchParams(v)
},_setSearchQuery:function(t){t=$.trim(t);
t=this._limitQuery(t);
this._setQuery(t);
if(this.getMenuState()==="LOCATION"){this._setDisplayQuery(t)
}},_limitQuery:function(t){if(t&&(t.length>this.MAX_QUERY_LENGTH)){t=t.substr(0,this.MAX_QUERY_LENGTH)
}return t
},_setSearchById:function(t){this._searchById=!!(t.id);
if(this._searchById){this._isAfterPanorama=t.isAfterPanorama||false
}else{this._isAfterPanorama=false
}},_setSearchParams:function(t){t.query=this.getQuery();
t.menu=this.getMenuState().toLowerCase();
this._setSearchCoord(t);
this._setFirstSearch(t);
this._setSearchMethod(t);
this._setBoundarySearch(t);
this._params=t
},_setParams:function(t){this._params=t
},_getParams:function(){return this._params
},_setSearchCoord:function(t){if(t.searchCoord){this._setCoord(t.searchCoord)
}else{t.searchCoord=this._getCoord()
}},_setCoord:function(t){this._coord=t
},_getCoord:function(){return this._coord
},_setFirstSearch:function(t){this._isFirstSearch=(t.isFirstSearch)?true:false
},_setSearchMethod:function(t){if(!t.sm){t.sm="clk"
}},_setBoundarySearch:function(v){var u=this._isBoundarySearchMode(),t=v._keepPosition,w=(this.getMenuState()=="LOCATION");
if((u||t)&&w){if(!v.boundary){v.boundary=this._getBoundary()
}if(!v.type){v.type="SITE_1"
}if(v.re&&v.re=="1"){delete v.re
}if(v._keepPosition){delete v._keepPosition
}}if(this.getMenuState()=="ROUTE"){delete v.boundary
}},isIndoorMode:function(){return this.$IndoorMap().isIndoorMode()
},leaveIndoorMap:function(){this.$IndoorMap().isIndoorMode()&&this.$IndoorMap().leaveIndoorMap()
},enterIndoorMap:function(t,u){this.$IndoorMap().enterIndoorMap(t,u)
},getIndoorId:function(){return this.$IndoorMap().getIndoorID()
},_getBoundary:function(){var t=this.$map().getBoundAsLatLng();
return t[0]+";"+t[3]+";"+t[2]+";"+t[1]
},_setSearchOptions:function(t){if(this.getMenuState()=="ROUTE"){if("searchBoxType" in t){this._routeOpts=t
}else{t=this._routeOpts
}}else{this._routeOpts={}
}if(!("searchBoxType" in t)){t.searchBoxType=null
}if(!("searchBoxKey" in t)){t.searchBoxKey=null
}if(!("autoSelect" in t)){t.autoSelect=null
}if(!("searchType" in t)){t.searchType=null
}if(!("userTriggered" in t)){t.userTriggered=null
}this._options=t
},_setOptions:function(t){this._options=t
},_getOptions:function(){return this._options
},_onRequest:function(){var u=this._getParams(),t=this.$dao();
if(!this._searchById){t.requestSearch(u,this._onSuccess.bind(this),this._onError.bind(this))
}else{t.requestSpot(u,this._refineSpotData.bind(this),this._onError.bind(this))
}},_refineSpotData:function(u){var t={type:"SITE_1",code:"0",rcode:null,totalCount:1,rank:0};
u=u.result;
t.site={list:[{index:"0",rank:"1",id:u.id,address:u.address,type:"p",isSite:"1",posExact:u.posExact,x:u.x,y:u.y,poiInfo:u.poiInfo,indoor:u.indoor,indoorMapInfo:u.indoorMapInfo,indoorPanorama:u.indoorPanorama,insidePanorama:u.insidePanorama,interiorPanorama:u.interiorPanorama,streetPanorama:u.streetPanorama,skyPanorama:u.skyPanorama}]};
this._onSuccess({result:t})
},_onSuccess:function(u){var t=this._getOptions();
if(t){u.result.isNotResultChangedMap=t.isNotResultChangedMap
}this._afterRequest(u.result)
},_onError:function(u){var v="CONNECTION_ERR",t=(u.error&&u.error.code)||null;
this.set("_searchResult",{key:"error",value:t||v})
},_afterRequest:function(t){t.__rawQuery=this.getQuery();
this._addMenuState(t);
this._addSearchById(t);
this._addFirstSearch(t);
this._addType(t);
this._addAdditionInfo(t);
this._addBoundarySearch(t);
this._applyQuery(t);
this._applyTab(t);
t.bus&&this._addEventBusInfo(t);
this._addSiteInfo(t);
t.bus&&this._processBusOption(t);
NModules.load("panorama",function(){if(this._isBoundarySearchMode()&&this.$Panorama().isPlaying()){this.$Panorama().removeDrawablePoi()
}}.bind(this))
},_initBusOptions:function(){this._savedBusOptions={BUS_ROUTE:{},BUS_STATION:{}}
},_processBusOption:function(t){var u=t.bus,v=this._savedBusOptions;
v=this._savedBusOptions;
u.subTab&&u.subTab.forEach(function(y){var w=v[y.type],x=["doCode","busType","rank"];
x.forEach(function(z){if(typeof w[z]!=="undefined"){y[z]=w[z]
}else{y[z]=u[z]
}})
})
},_clearBusOptions:function(u){if(u){delete this._savedBusOptions[u].doCode;
delete this._savedBusOptions[u].busType;
delete this._savedBusOptions[u].rank
}else{for(var t in this._savedBusOptions){this._clearBusOptions(t)
}}},saveBusOptions:function(u,t){$.extend(this._savedBusOptions[u],t||{},{searchCoord:this._getCoord(),query:this.getQuery()})
},getSavedBusOptions:function(t){return this._savedBusOptions[t]
},_addEventBusInfo:function(t){var u=t.bus;
if(u.subType!=="BUS_ROUTE"){return null
}var v=u.list;
if(v){v.forEach(function(w){if(w.event){this._refineTayoEventBus(w)
}}.bind(this))
}},_refineTayoEventBus:function(u){var y=u.event,A=y.filter(function(B){return B.type==="타요"
}),t=A.length,z=null,x={};
for(var w=0;
w<t;
w++){var v=A[w].name;
x.name=v;
x.cssType=this._getTayoEventCSSType(v);
if(z&&(z!==v)){x.name="꼬마버스 타요";
x.cssType=95;
break
}z=v
}u.refinedTayoEvent=x
},_getTayoEventCSSType:function(u){var t;
switch(u){case"로기":t=91;
break;
case"타요":t=92;
break;
case"라니":t=93;
break;
case"가니":t=94;
break
}return t
},processIndoorMap:function(){},_applyQuery:function(t){var v=t.searchQuery,u=t.__rawQuery||this.getQuery()||v;
if(v!==undefined&&v!==null){if(this._isBoundarySearchMode()&&(v!==u)){v=t.__rawQuery
}this._setQuery(v);
if(!this._getOptions().searchBoxType){this._setDisplayQuery(v)
}}},_applyTab:function(t){if(t.tab){this._setTab(t.tab)
}else{t.tab=this._getTab()
}},_addMenuState:function(t){t._menustate=this.getMenuState()
},_addSearchById:function(t){t._searchById=this._searchById;
if(this._searchById){t._isAfterPanorama=this._isAfterPanorama
}},_addFirstSearch:function(t){t._isFirstSearch=this._isFirstSearch
},_addType:function(t){var v=["region","address","site","bus","subway"],w=this._getViewType(t),y=this._getMarkerType(t.type),z=this._getSearchType(t.type);
t._viewType=w;
for(var u=0,x=v.length;
u<x;
u++){if(t[v[u]]){y=this._getMarkerType(t[v[u]].type||y);
z=this._getSearchType(t[v[u]].type||z);
this._addTypeToItem(t[v[u]],w,y,z);
if(t[v[u]].list){this._addTypeToList(t[v[u]].list,w,y,z)
}if(v[u]==="site"&&!!t.site.advertiseList&&t.site.advertiseList.length>0){this._addTypeToList(t[v[u]].advertiseList,w,"AD",z)
}}}},_addTypeToItem:function(u,t,v,w){u._viewType=t;
u._searchType=w;
u.MarkerType=v
},_addTypeToList:function(x,v,w,y){for(var u=0,t=x.length;
u<t;
u++){this._addTypeToItem(x[u],v,w,y);
if(x[u].mappedAddress){this._addTypeToItem(x[u].mappedAddress,v,w,y);
if(x[u].mappedAddress.mappedAddressList){this._addTypeToList(x[u].mappedAddress.mappedAddressList,v,w,y)
}}}},_getViewType:function(u){if(u._searchById){return"id"
}var t=u.type.toLowerCase().split("_")[0];
return(t=="no"||u.totalCount===0)?"empty":t
},_getMarkerType:function(t){var u=null;
if(this._searchById){u="ID"
}else{if(t=="REGION_1"){u="SPOT"
}else{if(t=="REGION_2"){u="REGION"
}else{if(t=="BUS_STATION"){u="BUS_STATION"
}else{u=t.split("_")[0]
}}}}return u
},_getSearchType:function(t){var u=null;
if(t=="REGION_1"){u="SPOT"
}else{if(t=="REGION_2"){u="REGION"
}else{u=t.split("_")[0]
}}return u
},_addAdditionInfo:function(t){var v=this.getQuery(),u=this._getOptions(),w=this._getParams();
t._additionInfo={};
if(v){t._additionInfo.lastQuery=v
}if("searchBoxType" in u){t._additionInfo.searchBoxType=u.searchBoxType
}if("searchBoxKey" in u){t._additionInfo.searchBoxKey=u.searchBoxKey
}if("autoSelect" in u){t._additionInfo.autoSelect=u.autoSelect
}if("searchType" in u){t._additionInfo.searchType=u.searchType
}if("menu" in w){t._additionInfo.menu=w.menu
}},_addBoundarySearch:function(t){t._isBoundarySearch=this._isBoundarySearchMode()
},_addSiteInfo:function(t){if(!t.site||!t.site.list){this._notifySearchComplete(t)
}else{this.$RoadDAO().request(t)
}},_roadResult_changed:function(){var t=this.get("_roadResult");
if(!t){return
}if(t.key=="error"){this.set("_searchResult",{key:"error",value:"CONNECTION_ERR"})
}else{if(t.key=="success"){this._notifySearchComplete(t.value)
}}},_roadComplete:function(t){if(!t){return
}if(t.key==="success"){this._notifySearchComplete(t.value)
}},_notifySearchComplete:function(t){var w=this._getParams(),u=s.SearchResultRefinery.refine(t),v=this._getOptions().userTriggered;
u.__fromRestorer=!!(w.__fromRestorer);
u.__pinOnly=!!(w.__pinOnly);
u.__userTriggered=v||false;
u.__hasInnerState=!!this._innerState;
if(this.getMenuState()!=="LOCATION"&&!!u.site&&!!u.site.advertiseList){u.site.advertiseList=[]
}this._setResult(u)
},clear:function(){this._setResult("");
this.clearSelectedItem()
},reset:function(){this._reset();
this._resetCoord();
this._setResult("");
this.clearSelectedItem()
},_reset:function(){this._query="";
this._params=null;
this._options=null;
this._searchById=false;
this._selectedItem=null;
this._setDisplayQuery("")
},_resetCoord:function(){this._coord=null
},store:function(){this._outerState=this._saveState()
},setSavedInMenu:function(t){this._savedInMenu=t
},getSavedInMenu:function(){return this._savedInMenu
},restore:function(){if(this.getMenuState()=="LOCATION"){this._restoreInSearch()
}},_restoreInSearch:function(){this._loadState(this._outerState)
},_restoreInDirections:function(){var u=this._getParams();
u.type=="REVIEW"&&delete u.type;
u.tab=1;
if(u.type=="BUS"){var t=this.getResult().bus;
if(t.subType=="BUS_ROUTE"&&t.subTab.length==1){delete u.type
}}this._beforeRequest(this.getQuery(),u,this._getOptions());
this._onRequest()
},save:function(){this._innerState=this._saveState()
},load:function(){this._loadState(this._innerState);
this._innerState=null
},_saveState:function(){return{tab:this._getTab(),coord:this._getCoord(),query:this.getQuery(),result:this.getResult(),params:this._getParams(),options:this._getOptions()}
},_loadState:function(t){if(!t){return
}this._setTab(t.tab);
this._setCoord(t.coord);
this._setParams(t.params);
this._setOptions(t.options);
this._setSearchQuery(t.query);
this._setResult(t.result)
},copyUrl:function(x,w){var u=this.getResult();
if(!u){return
}var t=["noticeOnly","busLinkYN","xPos","yPos","re","sm","isFirstSearch"],y=this._getParams();
t.forEach(function(z){y[z]&&delete y[z]
});
if(this._isBoundarySearchMode()){y.inBound="on"
}else{y.tab="1"
}y.query=this.getDisplayQuery();
var v=$.extend({},y);
if(u._searchById){this._renameParams(v,{id:"pinId",type:"pinType",title:"pinTitle"});
if(v.pinType){v.pinType=v.pinType.toLowerCase()
}}$.extend(w,v)
},_isBoundarySearchMode:function(){return this.$QueryField().isBoundarySearchMode()
},gatherUrlParameter:function(x){var u=this.getResult(),w={};
if(!u||x!=="location"){return
}var t=["noticeOnly","busLinkYN","xPos","yPos","re","sm","isFirstSearch"],y=this._getParams();
t.forEach(function(z){y[z]&&delete y[z]
});
y.tab="1";
if(this._isBoundarySearchMode()){y.inBound="on";
delete y.tab
}y.query=this.getDisplayQuery();
var v=$.extend({},y);
if(u._searchById){this._renameParams(v,{id:"pinId",type:"pinType",title:"pinTitle"});
if(v.pinType){v.pinType=v.pinType.toLowerCase()
}}$.extend(w,v);
return w
},_renameParams:function(v,u){for(var t in u){v[u[t]]=v[t];
delete v[t]
}},isSearchSpotStateForDirections:function(){var t=this._getOptions();
if(!!t){return("searchBoxKey" in t)&&(t.searchBoxKey!=null)
}else{return false
}},setSelectedItem:function(u){var t=null;
if(u&&u.MarkerType){t={type:u.MarkerType.toLowerCase(),id:u.id,index:(parseInt(u.index,10)||0),item:u}
}this.set("_selectedItem",t)
},getSelectedItem:function(){return this.get("_selectedItem")
},clearSelectedItem:function(){delete this._currentDirectionsSpotInfo;
this.set("_selectedItem",null)
},getQueryOptions:function(){return this._getOptions()
},getIsAutoPanning:function(){return this._isAutoPanning
},setIsAutoPanning:function(t){this._isAutoPanning=t
},getCenterPixel:function(){return this._centerPixel
},setCenterPixel:function(t){this._centerPixel=t
},disableBoundarySearch:function(){this._boundarySearchDisabled=true
},enableBoundarySearch:function(){this._boundarySearchDisabled=false
},searchInBoundary:function(w){if(this.getMenuState()!=="LOCATION"||!this._isBoundarySearchMode()||this._boundarySearchDisabled){return
}if(this._pageChanged){this.setPageChanged(false);
return
}var v=this.$map().getCenter().toLatLng(),u=v.lng()+";"+v.lat(),t=this.$map().getCenterPixel();
if(this._isAutoPanning){this._isAutoPanning=false;
this._setCoord(u);
this.setCenterPixel(t)
}else{if(w||this._didMapMove()){if(this.getQuery()){this.request(this.getQuery(),{searchCoord:u});
this.setCenterPixel(t)
}}}},setPageChanged:function(t){this._pageChanged=t
},_didMapMove:function(){if(!this.getCenterPixel()){return
}var u=this.$map().getCenterPixel(),t=u.x-this._centerPixel.x,v=u.y-this._centerPixel.y;
return(Math.abs(t)>this._THRESHOLD_PIXEL||Math.abs(v)>this._THRESHOLD_PIXEL)
},_getDirectionsSpotId:function(t){return t?t.getId():null
},checkSelectedSpot:function(t){this.set("_updateSelectedSpot",t)
},_listenPanorama:function(){this.$Panorama().attach({beforeOpenPanorama:m.bind(this),openPanorama:q.bind(this),afterClosePanorama:e.bind(this),needsSpotWindowOpen:b.bind(this)})
},isPanoramaPlaying:function(){return NModules.has("panorama")&&this.$Panorama().isPlaying()
},getPanoramaData:function(){return NModules.has("panorama")?this.$Panorama().getPanoramaData():null
},addPanoramaMarker:function(t){if(!NModules.has("panorama")){return
}this.$Panorama().addMarker(t)
},clearPanoramaMarker:function(){if(!NModules.has("panorama")){return
}this.$Panorama().clearMarker()
},openPanorama:function(u){var t=this;
function v(w){window.setTimeout(function(){t.$Panorama().openPanorama(w)
},0)
}if(NModules.has("panorama")){v(u)
}else{NModules.load("panorama",function(){v(u)
})
}},closePanorama:function(){NModules.has("panorama")&&this.$Panorama().closePanorama()
},resetToHome:function(){this.setSavedInMenu(false);
this.$Home().requestDefault()
},_listenMenuBar:function(){this.$menubar().attach({reset:i.bind(this),before_change:l.bind(this),change:j.bind(this),after_change:k.bind(this)})
},queryOutdoor:function(t){this.$QueryField().queryOutdoor(t)
},_listenQueryField:function(){this.$QueryField().attach({query:d.bind(this),bsearch_option_changed:h.bind(this)})
},activateBoundarySearch:function(){this.$QueryField().activateBoundarySearch()
},deactivateBoundarySearch:function(){this.$QueryField().deactivateBoundarySearch()
},notifySearchSpotDone:function(){this.dispatch("searchSpotDone",{query:this.getQuery(),options:this.getQueryOptions()})
},notifySearchDrawMapDone:function(){},getMenuState:function(){return this.$menubar().getMenuState()
},goBookmarkMenu:function(){this.$menubar().changeMenu("BOOKMARK")
},adultAuth:function(){this.$login().adultAuth()
},adultAuthExclude:function(){this.$login().adultAuthExclude()
},adultAuthRestore:function(){this.$login().adultAuthRestore()
},isLoggedIn:function(){return this.$login().isLoginUser()
},showBusRouteById:function(u,t){NModules.load("bus",function(){this.$Bus().showBusRouteByID(u,$.extend({bMoveToCenter:false,bMoveBound:true,bHide:false},t))
}.bind(this))
},closeBusRoute:function(){NModules.has("bus")&&this.$Bus().closeBusRoute()
},clearBusMarker:function(){NModules.has("bus")&&this.$Bus().clearSearchBusMarker()
},getBusMarkerList:function(){return NModules.has("bus")?this.$Bus().getSearchBusMarkerList():[]
},getBusMarker:function(x){var t=this.getBusMarkerList(),u;
for(var v=0,w=t.length;
v<w;
v++){if(t[v].id==="BUS_"+x){u=t[v];
break
}}return u||null
},showBusStationWindow:function(t){NModules.load("bus",function(){this.$Bus().showBusStationWindow(t.id,"BUS_RESULT")
}.bind(this))
},closeIndoorLayer:function(){NModules.has("indoor")&&this.$IndoorMap().closeIndoorList()
},_callDirections:function(u){var t=NModules.has("directions");
if(t){u()
}else{NModules.load("directions",u)
}},clearDirectionsResult:function(){if(!NModules.has("directions")){return
}this.$directions().clearResult()
},setDeparture:function(t){this._callDirections(function(){this.$directions().applyDeparture(t)
}.bind(this))
},setWaypoint:function(t){this._callDirections(function(){this.$directions().applyWaypoint(t)
}.bind(this))
},setDestination:function(t){this._callDirections(function(){this.$directions().applyDestination(t)
}.bind(this))
},setTransitDestination:function(t){this._callDirections(function(){var u=this.$directions();
u.applyDestination(t);
u.setDirectionsType("publicTransit")
}.bind(this))
},setRouteWithKey:function(u,t){this._callDirections(function(){this.$directions().applySpotWithKey(u,t);
this._currentDirectionsSpotInfo=t
}.bind(this))
},getCurrentDirectionsSpotInfo:function(){return this._currentDirectionsSpotInfo||null
},applyDeparture:function(t){this._callDirections(function(){this.$directions().applySpotAndDirections(0,t)
}.bind(this))
},applyWaypoint:function(){this.$directions().tryDirections()
},applyDestination:function(t){this.$directions().applySpotAndDirections(1,t)
},searchSuggestionInDirections:function(t,u){this.$directions().searchSuggestion(t,u)
},getCurrentSearchedSpotForDirections:function(){return NModules.has("directions")?this.$directionsContext().getCurrentSearchedSpot():null
},showSearchResultDone:function(){this.dispatch("searchResultDone")
},_listenDirections:function(){this.$directions().attach({apply_spot:this._onApplyDirectionsSpot.bind(this),clearDirectionInput:this._onClearDirectionsInput.bind(this)})
},_onApplyDirectionsSpot:function(y){var v=this.getResult(),w=null,x=this.getSelectedItem(),u,t;
if(!x||!v||!v.directionsInfo||!v.directionsInfo.isDirectionsType){return
}w=v.directionsInfo.spotType;
u=y.spot;
t=y.spotType;
if(t===w&&(u.getId()===null||x.id.replace(/(\D*)/g,"")!==u.getId().replace(/(\D*)/g,""))){this.clearSelectedItem()
}},_onClearDirectionsInput:function(x){var u=this.getResult(),v=null,w=this.getSelectedItem(),t;
if(!w||!u||!u.directionsInfo||!u.directionsInfo.isDirectionsType){return
}v=u.directionsInfo.spotType;
t=x.key;
if(t===v){this.clearSelectedItem()
}},exportShareItem:function(t,u){this.$sharing().exportInfoWindow(t,u)
},getSocialExportData:function(t,u){return this.$sharing().getSocialExportData(t,u)
},openSpotRegistration:function(){var t=function(){this.$SpotRegistration().showForm()
}.bind(this);
NModules.loadAndCall("register",t)
}});
function i(u){var t=u.menu;
if(t!=="LOCATION"){return
}this.resetToHome()
}function l(v){var u=v.prevMenu;
if(u==="LOCATION"){var t=this.getQuery()||null;
if(t){this.store();
this.setSavedInMenu(true)
}else{this.setSavedInMenu(false)
}this.dispatch("leave_search_menu")
}if(u==="ROUTE"){this.dispatch("leave_directions_menu")
}}function j(t){if(t.newMenu==="OPENMAP"){this.clear()
}}function k(t){if(t.trigger!=="tempTrigger"){if(t.newMenu==="LOCATION"){if(this.getSavedInMenu()){this.restore()
}else{this.$Home().request()
}if(!this.$QueryField().getKeyword()){this.$QueryField().focus()
}}}}function p(){}function g(){}function d(x){var u=x.queryType,w=x.userTriggered,t=x.keyword,z=this.$map().getCenter().toLatLng(),y=this;
var v=function(){var B=u==="autocomplete"?"sug":"hty",A=!!w||false;
y.request(t,{sm:B,searchCoord:z.lng()+";"+z.lat(),isFirstSearch:true},{userTriggered:A})
};
if(this.getMenuState()!=="LOCATION"){this.$menubar().changeMenu("LOCATION","tempTrigger",v)
}else{v()
}}function h(t){if(t.bsearchChecked){f.apply(this)
}else{c.apply(this)
}}function f(){var t=this;
this.$map().attach("CHANGE_MAP_DONE.mapsearch",function(u){window.setTimeout(function(){t.searchInBoundary(u.zoomed,u.moved)
},0)
})
}function c(){this.$map().detach("CHANGE_MAP_DONE.mapsearch")
}function m(){this.dispatch("beforeOpenPanorama")
}function q(){this.dispatch("openPanorama")
}function e(){this.dispatch("afterClosePanorama")
}function b(t){this.dispatch("needsPanoramaSpotWindowOpen",{windowInfo:t.windowInfo})
}function n(t){var u=t.msgName;
if(u!=="WHATS_HERE"){return
}this.searchAddressByPoint(t.point)
}function a(t){this._roadComplete({key:t.key,value:t.value})
}function r(){this.dispatch("login")
}function o(){this.dispatch("logout")
}}());
(function(){var b=iron.ns("nhn.map.search");
b.SearchDAO=iron.Class(nhn.map.AbstractDAO,{API:{location:"/search2/local.nhn",siteById:"/search2/getSiteInfo.nhn",regionLists:"/search2/localSearchSummay.nhn"},initialize:function(){this.disableCache()
},requestSearch:function(e,c,d,f){if(this._searchXHR){this._searchXHR.abort();
delete this._searchXHR
}a(e);
this._searchXHR=this._request({url:this.API.location,dataType:"json",data:e,successRule:{result:true},success:c,error:d,abort:f,isHmac:true});
return this._searchXHR
},requestSpot:function(e,c,d,f){if(this._spotXHR){this._spotXHR.abort();
delete this._spotXHR
}a(e);
this._spotXHR=this._request({url:this.API.siteById,dataType:"json",data:e,successRule:{result:true},success:c,error:d,abort:f,isHmac:true});
return this._spotXHR
},requestRegionLists:function(e,c,d,f){if(this._regionListsXHR){this._regionListsXHR.abort();
delete this._regionListsXHR
}a(e);
this._regionListsXHR=this._request({url:this.API.regionLists,dataType:"json",data:e,successRule:{result:{subRegion:true}},success:c,error:d,abort:f});
return this._regionListsXHR
}});
function a(d){var c=nhn.map.LogClick.getMapStateCode();
if(c){d.mpx=c
}}}());
iron.ns("nhn.map.search").Home=iron.Class(iron.KVO,{_params:null,_homeResult:null,initialize:function(){iron.KVO.apply(this)
},getResult:function(){var a=this.get("_homeResult");
return(a&&"value" in a)?a.value:a
},_setResult:function(a){this.set("_homeResult",{key:"success",value:a})
},request:function(a){a=a||{};
this._beforeRequest(a);
if(a.pinTitle||a.title){this._restoreTitle()
}else{this.requestDefault()
}},_beforeRequest:function(a){this.$QueryField().setKeyword("");
this.$Infowindow().close();
this.clear();
this._setParams(a)
},_setParams:function(c){var b=!!(c.xPos&&c.yPos),a=!!(c._keepPosition),d;
if(!b||a){d=this.$map().getCenter().toLatLng();
c.xPos=d.x;
c.yPos=d.y;
if(c._keepPosition){delete c._keepPosition
}}this._params=c
},_getParams:function(){return this._params
},requestDefault:function(){var a=nhn.map.Env.getVar("home");
this._addViewType(a.result);
this._setResult(a.result)
},_addViewType:function(a){a._viewType="home_"+this.$menubar().getMenuState().toLowerCase()
},clear:function(){this.set("_homeResult","")
},restore:function(){this._setResult(this.getResult())
},_restoreTitle:function(){var b=this._getParams(),a={region:{index:0,rank:1,name:b.title,id:1,x:b.xPos,y:b.yPos,rcode:b.rcode||null,MarkerType:"REGION",_viewType:"home_id",_searchType:"point",_titleOnly:true},totalCount:1,type:"REGION_POINT",MarkerType:"REGION",_viewType:"home_id",_searchType:"ID",_additionInfo:{}};
this._setResult(a)
},_addPolygonParamInfo:function(a){if(a.region){this._addRegionPolygonParam(a.region)
}},_addRegionPolygonParam:function(b){var a={group:nhn.map.search.PolygonGroup.SEARCH};
if(b.rcode==null){a.type="ADDRESS";
a.center=new nhn.mapcore.LatLng(b.y,b.x)
}else{a.type="REGION";
a.regionCode=b.rcode
}b._polygonParam=a
}});
iron.ns("nhn.map.search").Road=iron.Class({inherit:iron.KVO},{ROAD_API:"/aoi/fs",DEFAULT_LEVEL:13,_roadResult:null,initialize:function(){iron.KVO.apply(this)
},request:function(b){if(!b.site||!b.site.list){this._notifyRoadComplete(b);
return
}this._setResult(b);
var d=b.site.list;
for(var c=0,a=d.length;
c<a;
c++){if(this._hasRoad(d[c])){this._onRequest(d[c])
}}if(!this._sema.isLock()){this._notifyRoadComplete(this._getResult())
}},_hasRoad:function(a){return(a.poiInfo&&a.poiInfo.hasRoad)
},_onRequest:function(a){this._sema.P();
$.ajax({url:this.ROAD_API,context:this,data:this._getParams(a.poiInfo.road.shapeKey),success:this._onSuccess,error:this._onError})
},_getParams:function(a){return{type_name:a.typeName,FID:a.shapeID,wsid:a.wsid,LEVEL:this.DEFAULT_LEVEL}
},_onSuccess:function(a){a=jindo.$Json(a).toObject();
this._afterRequest(a);
if(!this._sema.isLock()){this._notifyRoadComplete(this._getResult())
}},_onError:function(){this._sema.V();
this.set("_roadResult",{key:"error",value:"CONNECTION_ERR"})
},_afterRequest:function(a){var c=this._getResult().site.list,d=a.properties.ROAD_ID;
var b=this._getItem(c,d);
if(b){b.poiInfo.road.line=a
}this._sema.V()
},_getItem:function(a,b){return $.grep(a,function(c){if(c.poiInfo&&c.poiInfo.hasRoad){return c.poiInfo.road.shapeKey.shapeID==b
}})[0]
},_setResult:function(a){this._result=a
},_getResult:function(){return this._result
},_notifyRoadComplete:function(a){this.set("_roadResult",{key:"success",value:a})
},_sema:{_s:0,P:function(){this._s--
},V:function(){this._s++
},isLock:function(){return(this._s<0)
},reset:function(){this._s=0
}}});
(function(){var e=iron.ns("nhn.map.search"),a="/aoi/fs",d=13;
e.RoadDAO=iron.Class({inherit:nhn.map.AbstractDAO},{request:function(h){if(!b(h)){this.dispatch("road_complete",{key:"success",value:h});
return
}var m=h.site.list,l=0,j=this,n;
for(var k=0,g=m.length;
k<g;
k++){if(c(m[k])){l++;
n=$.Deferred();
n.done(function(){(--l===0)&&j.dispatch("road_complete",{key:"success",value:h})
});
this.requestRoad(m[k].poiInfo.road,n)
}}if(l===0){this.dispatch("road_complete",{key:"success",value:h})
}},requestRoad:function(i,h){var g={url:a,data:f(i.shapeKey),success:this._onSuccess.bind(this,{roadData:i,defObj:h}),error:this._onFail.bind(this,{roadData:i,defObj:h})};
this._request(g)
},_onSuccess:function(j,h){var g=j.roadData,i=j.defObj;
h=jindo.$Json(h).toObject();
g.line=h;
i.resolve()
},_onFail:function(h){var g=h.defObj;
this.dispatch("road_complete",{key:"error"});
g.resolve()
}});
function b(g){return g.site&&g.site.list
}function c(g){return(g.poiInfo&&g.poiInfo.hasRoad)
}function f(g){return{type_name:g.typeName,FID:g.shapeID,wsid:g.wsid,LEVEL:d}
}}());
iron.ns("nhn.map.search").NoticeService=iron.Class({inherit:nhn.map.AbstractDAO},{initialize:function(){this.API_URL="/notice/recentNotice.nhn";
this.maxCount=3
},setMaxCount:function(a){this.maxCount=a
},request:function(){var b=this,a=this._el||null;
this.dispatch("loading",{container:a});
this._request({url:this.API_URL,data:{max:this.maxCount},successRule:{result:true},success:function(c){b.dispatch("response",{response:c,container:a})
},error:function(){b.dispatch("error",{container:a})
}})
},refresh:function(){this.request()
},renderTo:function(a){this._el=$(a);
this.request()
}});
(function(){var x=iron.ns("nhn.map.search"),b=iron.ns("nhn.map.bookmark"),v;
x.SearchResultRefinery={refine:function(y){if(!y){y
}j(y);
i(y);
y.region&&o(y);
y.address&&q(y);
y.site&&w(y);
y.bus&&s(y);
y.type==="NO_RESULT"&&a(y);
return y
}};
function j(y){if(y._viewType==="empty"&&y.type.indexOf("BUS")===0){y._viewType="bus"
}y.directionsInfo=k(y);
y._displayCount=t(y.totalCount)||0;
y.hasTimeOutResult=!!y.hasTimeOutResult;
y.__timeoutHTML=l(y);
y.__hasCorrectWord=!!y.correctWords;
if(y.directionsInfo.isDirectionsType){y.__hasRelationWord=false;
y.__relationWordMore=false
}else{y.__hasRelationWord=!!y.relationWords;
y.__relationWordMore=c(y.relationWords)
}y.inputQuery=y.inputQuery||"";
y.queryForDupRegion=y.queryForDupRegion||"";
y.linkQuery=y.linkQuery||null;
y.lbaQuery=y.lbaQuery||null;
y.hasPollingPlace=y.hasPollingPlace||false;
y.adultKeywordYN=+y.adultKeywordYN;
y.adultYN=+y.adultYN;
y.adultConfirmYN=+y.adultConfirmYN
}function i(y){if(!y.tab){return
}y.tab.forEach(function(A){var z="tab.";
A.__activated=!!(A.type===y.type||y.type.indexOf(A.type)!=-1);
switch(A.type){case"ADDRESS":z+="adr";
break;
case"SITE_1":case"SITE_2":z+="plc";
break;
case"BUS":z+="bus";
break
}A.__ssc=z;
if(A.__activated){y.__displayTabName=A.title
}})
}function o(y){var z=y.region;
f(z);
n(z);
y.region=z
}function q(y){var z=y.address;
if(z.totalCount){z._displayCount=t(z.totalCount)
}z.subTab&&z.subTab.forEach(function(A){A._displayCount=t(A.count)
});
z.__displayTotalCount=0;
z.subTab&&z.subTab.forEach(function(A){z.__displayTotalCount+=+(A.count)
});
z.sscGrp=z.subType==="ADDRESS_ROAD"?"adn":"ado";
m(z);
z.list&&z.list.forEach(function(B){var A=B.mappedAddress;
B.siteCount=+B.siteCount;
B.__hasSiteQuery=!!(B.siteCount>0&&B.siteSearchQuery);
e(B);
m(B);
if(A){A.siteCount=+A.siteCount||0;
A.__hasSiteQuery=!!(A.siteCount>0&&A.siteSearchQuery);
m(A);
B.__mappedAddressList=A.mappedAddressList||null;
if(B.__mappedAddressList){B.__mappedAddressList.forEach(function(C){C.siteCount=+C.siteCount||0;
C.__hasSiteQuery=!!(C.siteCount>0&&C.siteSearchQuery);
m(C)
})
}if(A.zipcode){B.zipcode=A.zipcode
}}if(y.directionsInfo.isDirectionsType){B.__relatedRegionList=[];
B.__favoriteSiteList=[]
}else{B.__relatedRegionList=B.relatedRegionAddressList||[];
B.__favoriteSiteList=p(B.favoriteList)||[]
}if(B.zipcode){B.__displayZipCode=B.zipcode||B.mappedAddress.zipcodes
}});
y.address=z
}function w(z){var A=z.site,D="https://ssl.pstatic.net/static/maps/img/icons/pins_",C=".png",y=A.petrolFilter?+A.petrolFilter.type:-1,B=["__displayGasPrice","__displayHGasPrice","__displayDieselPrice","__displayLPGPrice"][y-1]||"";
if(A.totalCount){A._displayCount=t(A.totalCount)
}A.subTab&&A.subTab.forEach(function(E){E._displayCount=t(E.count)
});
A.sscGrp="plc";
if(A.advertiseList&&A.advertiseList.length){A.adSscGrp="adv"
}if(z._viewType==="site"&&z.address){A.sscGrp="pla"
}A.sort=+A.sort;
if(A.sort===1){A.__sortText="거리순"
}else{if(A.sort===2){A.__sortText="유가순"
}else{A.__sortText="정확도"
}}A.__hasPetrolFilterBound=!!(A.petrolFilter&&A.petrolFilter.bound);
A.list&&A.list.forEach(function(G,F){var E=String.fromCharCode(97+F);
G.__pinAlt=E.toUpperCase();
if(z._viewType==="id"){G.__pinUrl=D+"a";
G.__pinAlt="핀"
}else{if(G.poiInfo.hasRoad){G.__pinUrl=D+"nl_"+E
}else{if(G.poiInfo.hasPolygon){G.__pinUrl=D+"s_"+E
}else{if(+G.posExact){G.__pinUrl=D+"n_"+E
}else{G.__pinUrl=D+"nx_"+E
}}}}G.__pinUrl+=C;
if(!z.directionsInfo||!z.directionsInfo.isDirectionsType){f(G)
}r(G,B)
});
A.advertiseList&&A.advertiseList.forEach(function(G,F){var E=F+1+"";
G.__pinAlt=E.toUpperCase();
G.__pinUrl=D+"ad_"+E+C;
if(!z.directionsInfo||!z.directionsInfo.isDirectionsType){f(G)
}r(G,B)
});
z.site=A
}function r(y,z){g(y);
e(y);
u(y);
y.__clippedThumbUrl=y.thumUrl?"https://search.pstatic.net/common/?type=ofullfill&size=110x110&src="+encodeURIComponent(y.thumUrl):null;
y.__thumbWidth=55;
y.__thumbHeight=55;
if(y.thumUrl&&y.thumUrl.indexOf("https://")===-1){y.thumUrl="https://search.pstatic.net/common/?src="+encodeURIComponent(y.thumUrl)
}y.posExact=+y.posExact;
y.__hasFeatureIcon=y.isPollingPlace||y.streetPanorama||y.skyPanorama||y.insidePanorama||y.interiorPanorama||y.indoorPanorama;
y.couponUrl=y.couponUrl||null;
y.__displayCategory=y.category?y.category.join(" &gt; "):null;
if(y.petrolInfo){y.petrolInfo.__displayGasPrice=y.petrolInfo.gasPrice;
y.petrolInfo.__displayHGasPrice=y.petrolInfo.hGasPrice;
y.petrolInfo.__displayDieselPrice=y.petrolInfo.dieselPrice;
y.petrolInfo.__displayLPGPrice=y.petrolInfo.lpgPrice;
y.petrolInfo[z]="<strong>"+y.petrolInfo[z]+"</strong>";
y._quickType="_gas"
}}function s(y){var z=y.bus;
if(z.totalCount>=0){z._displayCount=t(z.totalCount)
}if(z.subType==="BUS_ROUTE"){z.sscGrp="bnm";
z.__listClassName="lst_bn"
}else{z.sscGrp="bst";
z.__listClassName="lst_bs"
}z.subTab=z.subTab||[];
if(z.subTab.length){z.__displayTabTitle=z.subTab[0].title;
z.subTab.forEach(function(C){C._displayCount=t(C.count);
if(C.type===z.subType){z.__displayTabTitle=C.title
}C._acode=C.type==="BUS_ROUTE"?"num":"stop"
})
}z.__displayResultQuery=z.resultQuery?z.resultQuery.join(""):"";
z.linkQuery=z.linkQuery||null;
z.routeQuery=z.routeQuery||null;
z.__doName="전체지역";
z.__regionOptionDimmed=true;
z.__regionOptionEnabled=!!z.otherList&&z.type.indexOf("BUS")===0;
if(z.otherList){z.__regionOptionDimmed=false;
if(+z.doCode===0&&z.otherList.length>1){z.__doName="전체지역"
}else{if(z.otherList.length<=1){z.__doName=z.otherList[0].doName;
z.__regionOptionDimmed=true
}else{for(var A=0,B=z.otherList.length;
A<B;
A++){if(+z.doCode===+z.otherList[A].doCode){z.__doName=z.otherList[A].doName;
break
}}}}}z.__busTypeName="전체유형";
z.__busTypeOptionDimmed=true;
z.__busTypeOptionEnabled=!!z.otherTypeList&&(z.type!=="BUS_STATION");
if(z.otherTypeList){z.__busTypeOptionDimmed=false;
if(+z.busType===0&&z.otherTypeList.length>1){z.__busTypeName="전체유형"
}else{if(z.otherTypeList.length<=1){z.__busTypeName=z.otherTypeList[0].typeName;
z.__busTypeOptionDimmed=true
}else{for(var A=0,B=z.otherTypeList.length;
A<B;
A++){if(z.busType==z.otherTypeList[A].typeCode){z.__busTypeName=z.otherTypeList[A].typeName;
break
}}}}}z.__dupRegionOptionEnabled=!!(z.otherRegionList&&z.otherRegionList.length);
if(z.subType==="BUS_STATION"&&z.list){z.list.forEach(function(C){C.__busTypeList={};
e(C);
C.routeList&&C.routeList.forEach(function(D){C.__busTypeList[D.type+""]=D.typeName
})
})
}else{if(z.subType==="BUS_ROUTE"&&z.list){z.list.forEach(function(C){var D=[];
e(C);
if(C.firstTime&&C.firstTime!=="null"){D.push("첫차 "+C.firstTime)
}if(C.lastTime&&C.lastTime!=="null"){D.push("막차 "+C.lastTime)
}if(C.intervalTime&&C.intervalTime!=="null"){D.push(C.intervalTime+"분 간격")
}if(C.intervalCount&&C.intervalCount!=="null"){D.push("일 "+C.intervalCount+"회 운행")
}C.__busDisplayDetailInfo=D.join(",")
})
}}y.bus=z
}function a(y){y.__sscGrp="plc";
y.others=y.others||[];
y.linkQuery=y.linkQuery||[];
y._isBoundarySearch=y._isBoundarySearch||false;
y.__displayQuery=y.resultQuery?y.resultQuery.join(" "):"";
y.linkQuery.forEach(function(z){})
}function p(C){var A=0,y=0;
if(!C){return[]
}for(var z=0,B=C.length;
z<B;
z++){A+=nhn.map.Util.getByteLength(C[z]);
if(A<=60){y=z+1
}A+=1
}if(y&&y<C.length){C=C.slice(0,y)
}return C
}function c(z){var y=0;
if(!z){return false
}z.forEach(function(A){y+=nhn.map.Util.getByteLength(A)+1
});
return y>=50
}function h(y){}function f(A){var B="",y="상세보기",z="detail";
if(A.petrolInfo){y="주유소 상세보기";
B="_gas"
}if(A.theme){if(+A.theme.isSubway){z="station";
y="지하철 상세보기";
B="_station"
}if(+A.theme.isMovie){z="movie";
y="영화관 상세보기";
B="_theater"
}if(+A.theme.isLand){B="_land"
}}if(A.poiInfo){if(A.poiInfo.hasLand){z="land"
}if(A.poiInfo.hasRoad){z="road"
}}A._quickType=B;
A.__displayDetailName=y;
A.sscLog=z
}function d(y){return +(String(y).match(/\d+/)[0])
}function g(y){y._id=d(y.id)
}function e(y){y._bookmarkKey=b.Util.generateKeyFromData(y)
}function n(y){y._polygonParam={group:x.PolygonGroup.SEARCH,type:"REGION",regionCode:y.rcode}
}function m(y){if(y.isNewAddress){return
}var z={group:x.PolygonGroup.SEARCH};
if(y.isJibunAddress){z.type="ADDRESS";
z.center=new nhn.mapcore.LatLng(y.y,y.x)
}else{z.type="REGION";
z.regionCode=y.rCode
}y._polygonParam=z
}function u(y){if(y.poiInfo&&y.poiInfo.hasPolygon){y._polygonParam={group:x.PolygonGroup.SEARCH,type:"SITE",shapeId:y.poiInfo.polygon.shapeKey.shapeID,center:new nhn.mapcore.LatLng(y.y,y.x)}
}}function t(y){var z=/(\d+)(\d{3})/;
y+="";
while(z.test(y)){y=y.replace(z,"$1,$2")
}return y
}function k(z){var C={isDirectionsType:false},y=z._additionInfo,B={departure:["spm_sc_start2","출발"],destination:["spm_sc_end2","도착"],waypoint:["spm_sc_via2","경유"],waypointInLayer:["spm_sc_via2","경유"]},A;
if(!y){return C
}if(y.menu==="route"&&y.searchBoxKey!=null){A=B[y.searchBoxType];
C.isDirectionsType=true;
C.suggest=(y.searchType=="suggestSpot"||y.searchType=="suggestSpotInLayer");
C.btnClass=A[0];
C.btnName=A[1];
C.spotType=y.searchBoxType
}return C
}function l(y){if(!y.hasTimeOutResult){return""
}if(!v){v=nhn.mapservice.TemplateRepos.get("search_app_timeout")
}return v.process(y)
}}());
(function(){var a=iron.ns("nhn.map.search");
a.SearchController=iron.Class(iron.KVO,{_mapView:null,_panelView:null,initialize:function(){iron.KVO.apply(this)
},_listenHome:function(){this.bindTo("_homeResult",this.$Home())
},_listenSearch:function(){var b=this.$Search(),c=this._leaveSearchMode.bind(this);
this.bindTo("_searchResult",b);
this.bindTo("_updateSelectedSpot",b);
this.bindTo("_selectedItem",b);
this.bindTo("_indoorData",b);
b.attach({leave_search_menu:c,leave_directions_menu:c,beforeOpenPanorama:this._beforeOpenPanorama.bind(this),openPanorama:this._onOpenPanorama.bind(this),afterClosePanorama:this._afterClosePanorama.bind(this),needsPanoramaSpotWindowOpen:this._onNeedsSpotWindowOpen.bind(this)})
},_leaveSearchMode:function(){var b=this.$QueryField().getKeyword();
this.$Search().reset();
b&&this.$QueryField().setKeyword(b);
delete this._panelView;
delete this._mapView
},_listenHomePanelView:function(){this.bindTo("_homePanelView",this.$HomePanelView())
},_listenAddressMapView:function(){this.bindTo("_addressMapView",this.$AddressMapView())
},_listenAddressPanelView:function(){this.bindTo("_addressPanelView",this.$AddressPanelView())
},_listenSiteMapView:function(){this.bindTo("_siteMapView",this.$SiteMapView())
},_listenSitePanelView:function(){var e=this.$SitePanelView();
this.bindTo("_sitePanelView",e);
var d=this,b=e.drawOtherLists.bind(e),c=e.onFailArealFilter.bind(e);
e.attach({clickOtherLists:function(){d.$Search().requestRegionLists(b,c)
}})
},_listenBusMapView:function(){this.bindTo("_busMapView",this.$BusMapView())
},_listenBusPanelView:function(){this.bindTo("_busPanelView",this.$BusPanelView())
},_listenIdMapView:function(){this.bindTo("_idMapView",this.$IdMapView())
},_listenEmptyPanelView:function(){this.bindTo("_emptyPanelView",this.$EmptyPanelView())
},_searchResult_changed:function(){var b=this.get("_searchResult");
if(!b){return
}if(b.key=="success"){if(!b.value._isBoundarySearch||b.value.__userTriggered){this._closePanorama()
}this._afterSearch(b.value)
}else{if(b.key=="error"){var d,c;
switch(b.value){case"LE0300":d="업체 정보를 찾을 수 없습니다.";
c="지도 검색 또는 업체 상세 페이지를 통해<br/>해당 업체 정보를 다시 확인 후 이용하시기 바랍니다.";
break;
default:d="일시적인 오류로<br/>서비스를 이용할 수 없습니다.";
c="잠시 후 다시 시도해 주세요."
}this.$Search().resetToHome();
nhn.map.service.Alert(d,c)
}}},_selectedItem_changed:function(b){if(b){if(this.$Search().getMenuState()!=="ROUTE"){this._listenCloseInfoWindow()
}this._mapView&&this._mapView.selectMarker(b.item);
this._selectPolygon(b.type,b.item)
}else{this._unlistenCloseInfoWindow();
this._unselectPolygon();
this._panelView&&this._panelView.blurItem();
this._mapView&&this._mapView.unselectMarker();
this._mapView&&this._mapView.closeInfoWindow();
if(this._selectedMarker){this._selectedMarker.options.lookAt=false;
delete this._selectedMarker
}}},_selectPolygon:function(b,c){var b=b.toUpperCase(),d=c._polygonParam;
if(b=="ADDRESS"){this._removeCurrentAddressPolygon();
d&&this.$SearchPolygonService().addPolygon(d);
this._currentAddress=c
}this._currentSelectedPolygonItem&&this.$SearchPolygonService().deselectPolygon(this._currentSelectedPolygonItem._polygonParam);
d&&this.$SearchPolygonService().selectPolygon(d);
if(c._polygonParam){this._currentSelectedPolygonItem=c;
this.__lastPolygonParam=c._polygonParam
}},_unselectPolygon:function(){if(!this._currentAddress&&!this._currentSelectedPolygonItem){return
}var c=this._currentAddress||this._currentSelectedPolygonItem,b=c._polygonParam;
b&&this.$SearchPolygonService().deselectPolygon(b)
},_removeCurrentAddressPolygon:function(){if(this._currentRegion){if(this._currentRegion.id!=this._currentAddress.id){this._currentAddress._polygonParam&&this.$SearchPolygonService().removePolygon(this._currentAddress._polygonParam)
}}else{(this._currentAddress&&this._currentAddress._polygonParam)&&this.$SearchPolygonService().removePolygon(this._currentAddress._polygonParam)
}},_processMarkerDisabledState:function(b){},_indoorData_changed:function(b){},_afterSearch:function(b){var c=this.$Search();
this._removePrevPolygons();
c.closeBusRoute();
c.closeIndoorLayer();
if(!b){this._clear();
this.$AdPin().clear()
}else{if(this._isEmptyResult(b)){c.resetToHome()
}else{if(this._isAdultResult(b)){c.adultAuth()
}else{c.clearDirectionsResult();
c.notifySearchSpotDone();
this.draw(b);
this._processSearchPolygon(b);
if(b.type.indexOf("SITE")===0){this.$AdPin().search(b.__rawQuery)
}else{this.$AdPin().clear()
}if(this._focussedType&&this._panelView){this._panelView.refocusTab(this._focussedType)
}}}}delete this._focussedType
},_removePrevPolygons:function(){var b=this.$SearchPolygonService().getPolygonParamHash();
$.each(b,function(c,d){if(d.group==nhn.map.search.PolygonGroup.SEARCH){this.$SearchPolygonService().removePolygon(d)
}}.bind(this))
},_processSearchById:function(){var b=this.$Search().getResult();
if(b&&b._searchById){var c=this.$Search().getItemByIndex(0,b.type);
this.$Search().setSelectedItem(c);
this._panelView.highlightFirst&&this._panelView.highlightFirst()
}},_processSearchPolygon:function(b){var f=[];
if(b.type==="SITE_2"&&b.address&&this.__lastPolygonParam){var d=b.address.mappedAddr||null;
if(!b.address.isNewAddress||!d||d.isNewAddress){if(b.address._polygonParam){b.address._polygonParam.center=this.__lastPolygonParam.center
}else{b.address._polygonParam=this.__lastPolygonParam
}}}delete this.__lastPolygonParam;
if(b.region&&b.region._polygonParam){this._currentRegion=b.region;
f.push(b.region._polygonParam)
}else{this._currentRegion=null
}if(b.address){if(b.address._polygonParam){f.push(b.address._polygonParam)
}else{if(b.address.mappedAddress&&b.address.mappedAddress._polygonParam){f.push(b.address.mappedAddress._polygonParam)
}}if(b.address.list&&Array.isArray(b.address.list)&&b.address.list.length>0){var c=b.address.list[0];
if(c._polygonParam){f.push(c._polygonParam)
}this._currentAddress=c
}}if(b.site&&b.site.list&&Array.isArray(b.site.list)){b.site.list.forEach(function(g){if(g._polygonParam){f.push(g._polygonParam)
}}.bind(this))
}var e=null;
f.forEach(function(g){if(g){e=g
}this.$SearchPolygonService().addPolygon(g)
}.bind(this));
this.__lastPolygonParam=e
},_isEmptyResult:function(b){var c=((b.totalCount*1)===0),e=(this.$Search().getMenuState()=="LOCATION"),d=b._searchById;
return(c&&e&&d)
},_isAdultResult:function(b){return(b.type=="ADULT_REDIRECT")
},draw:function(b){if(b._viewType==="id"||b._viewType==="home_id"){$.extend(b,nhn.map.Env.getVar("home").result)
}this._drawMap(b);
this._drawPanel(b);
this.$Search().showSearchResultDone()
},_drawPanel:function(c){var b=(c._viewType==="empty"&&c.type==="BUS"||c.type==="BUS_ROUTE"||c.type==="BUS_STATION")?"bus":c._viewType;
this._switchPanelView(b);
if(this._panelView){this._panelView.draw(c);
if(this.$BookmarkService().isLoggedIn()&&(b.indexOf("home")===-1&&b!=="id")){if(this.$BookmarkService().isLoaded()){var d=this.$BookmarkService().getBookmarkListAsData();
this._panelView.updateUiOfBookmarkStuds(d)
}else{this.$BookmarkService().requestBookmarkList()
}}}},_switchPanelView:function(c){var b=null;
switch(c){case"address":b=this.$AddressPanelView();
break;
case"site":b=this.$SitePanelView();
break;
case"bus":b=this.$BusPanelView();
break;
case"empty":b=this.$EmptyPanelView();
break;
case"id":case"home_location":case"home_id":b=this.$HomePanelView();
break;
default:break
}this._panelView&&this._panelView.unbindAllEvent();
b&&b.setPrevView(this._panelView);
this._panelView=b
},_drawMap:function(b){this._switchMapView(b._viewType);
if(this._mapView){this._mapView.draw(b);
this.$Search().notifySearchDrawMapDone()
}},_switchMapView:function(b){switch(b){case"address":this._mapView=this.$AddressMapView();
break;
case"site":this._mapView=this.$SiteMapView();
break;
case"bus":this._mapView=this.$BusMapView();
break;
case"id":case"home_id":this._mapView=this.$IdMapView();
break;
case"empty":this._mapView=this.$EmptyMapView();
break;
case"home_location":this._mapView=this.$HomeMapView();
break;
default:this._mapView=null;
break
}},_homeResult_changed:function(){var b=this.get("_homeResult");
if(!b){return
}if(b.key=="error"){nhn.map.service.Alert("일시적인 오류로<br/>서비스를 이용할 수 없습니다.","잠시 후 다시 시도해 주세요.")
}else{if(b.key=="success"){this._afterHome(b.value)
}}},_afterHome:function(b){if(!b){this._clear()
}else{var c=this.$Search(),d;
if(c.getMenuState()=="LOCATION"){c.reset()
}c.clearDirectionsResult();
this.draw(b);
if(b.region){d=b.region
}if(d){this._processSearchPolygon(b);
c.setSelectedItem(d);
if(this._mapView){this._selectItem(d)
}}}},_research:function(b,d){if("location" in b.value){var c={type:d,queryRank:b.value.rank,siteLocation:b.value.location,re:"1",tab:"1"};
this._requestSearch(b.value.query,c)
}else{this._requestSearch(b.value.query,{type:d,queryRank:b.value.rank})
}},_idPanelView_changed:function(){this._onPanelChange(this.get("_idPanelView"))
},_emptyPanelView_changed:function(){var b=this.get("_emptyPanelView");
switch(b.key){case"boundSearch":this._searchAllMap(b);
break;
case"linkQuery":var c={type:b.value.type,queryRank:b.value.rank,tab:"1"};
this._requestSearch(b.value.query,c);
break;
case"others":this._searchAllMap(b);
break
}},_searchAllMap:function(b){this.$QueryField().deactivateBoundarySearch();
this._requestSearch(b.value.query)
},_busPanelView_changed:function(){this._onPanelChange(this.get("_busPanelView"))
},_addressPanelView_changed:function(){var c=this.get("_addressPanelView");
var d=this.$Search().getQuery();
var b=this.$Search().getResult();
switch(c.key){case"site":this._requestSiteInAddr(c);
break;
case"eaddr":this._drawItem(c.value.index,c.value.type,c.value.depth);
break;
default:this._onPanelChange(c,d,b);
break
}},_homePanelView_changed:function(){var b=this.get("_homePanelView");
if(b.key=="quickTitle"){this._addDirectionsPointWithTitle(b.value.target,b.value.x,b.value.y,b.value.title)
}if(b.key=="mouseover"){this.$SearchPolygonService().focusPolygon(b.value.polygonParam)
}if(b.key=="mouseout"){this.$SearchPolygonService().blurPolygon(b.value.polygonParam)
}},_requestSiteInAddr:function(b){this.$Search().save();
this._requestSearch(b.value.query,{type:"SITE_2",displayAddr:b.value.daddr,mappedAddr:b.value.maddr,tab:"1",re:"1"},{},true)
},_sitePanelView_changed:function(){var c=this.get("_sitePanelView");
var d=this.$Search().getQuery();
var b=this.$Search().getResult();
switch(c.key){case"back":this.$Search().load();
break;
case"sort":this._sort(c,d,b);
break;
case"oilSort":this._oilSort(c,d,b);
break;
case"researchSite":this._research(c,b.type);
break;
case"locationFilter":this._requestSearch(c.value.query,{type:b.type});
break;
default:this._onPanelChange(c,d,b);
break
}},_sort:function(c,d,b){var e={type:b.type,queryRank:b.rank,siteSort:c.value,siteOrder:b[c.name].order,busLinkYN:b.busLinkYN,re:"1"};
this._requestSearch(d,e)
},_oilSort:function(c,f,b){var e=c.value.bound||this._getBoundString(),d=c.value.type+";"+e,g={type:b.type,queryRank:b.rank,siteSort:c.value.sort,siteOrder:b[c.name].order,busLinkYN:b.busLinkYN,re:"1",petrolFilter:d};
this._requestSearch(f,g)
},_getBoundString:function(b){var b=b||this.$map().getBoundAsLatLng();
return[b[0],b[3],b[2],b[1]].join(";")
},_onPanelChange:function(c,d,b){if(!d){d=this.$Search().getQuery()
}if(!b){b=this.$Search().getResult()
}switch(c.key){case"tab":case"more":this._changeTab(d,c,b);
break;
case"subTab":this._requestSearch(d,$.extend({},c.value));
break;
case"list":this._drawItem(c.value.index,c.value.type);
break;
case"page":this._changePage(c,d,b);
break;
case"others":this._requestSearch(c.value,{type:b.type,queryRank:b.rank});
break;
case"region":this._requestSearch(c.value);
break;
case"streetPanorama":case"skyPanorama":case"insidePanorama":case"interiorPanorama":case"indoorPanorama":this._openPanorama(c,b);
break;
case"quick":this._addDirectionsPoint(c.value.target,c.value.index,c.value.type);
break;
case"quickOnly":this._applyDirectionsPoint(c.value.target,c.value.index,c.value.type);
break;
case"directions":this._addDirectionsPointWithKey(c.value.key,c.value.index,c.value.type);
break;
case"bookmark":this._bookmarkDataProcess(c);
break;
case"mouseover":this._showMarkerTooltip(c.value.index,c.value.type);
this._focusPolygon(c.value.index,c.value.type);
break;
case"mouseout":this._hideMarkerTooltip(c.value.index,c.value.type);
this._blurPolygon(c.value.index,c.value.type);
break;
case"path":this._showRoadBound(c.value.index,c.value.type);
break;
case"busRoute":this._showBusRoute(c.value.id,c.value.index,c.value.type);
break;
case"busSearch":this._requestSearch(d,{queryRank:c.value.rank,type:c.name});
break;
case"site":this._requestSiteInAddr(c);
break;
case"eaddr":this._drawItem(c.value.index,c.value.type,c.value.depth);
break;
default:break
}},_changeTab:function(e,c,b){var d=c.value.type,g=c.value.rank,f={type:d,queryRank:g};
this._focussedType=d;
if(b.site&&(d=="SITE_1"||d=="SITE_2")){f.siteLocation=b.siteLocation||b.site.siteLocation
}this._requestSearch(e,f)
},_showBusRoute:function(e,b,c){var d=this.$Search().getItemByIndex(b,c);
this.$Search().setSelectedItem(d);
this._closePanorama();
this.$Search().showBusRouteById(e)
},_requestSearch:function(c,e,b,d){this.$Search().request(c,e,b,d)
},_checkIndoorInfo:function(c){var d=c.indoorMapInfo;
if(d){this.$Search().enterIndoorMap(d.zoneId,d.zOrder)
}else{var b=this.$Search().getSelectedItem();
if(b){var e=b.item.indoorMapInfo;
if(e){this.$Search().leaveIndoorMap()
}}}},_drawItem:function(c,d,g){var b=this.$Search();
b.disableBoundarySearch();
var f=b.getSelectedItem(),e=b.getItemByIndex(c,d,g);
if(b.getMenuState()==="LOCATION"&&f&&f.id===e.id&&f.type===e.MarkerType.toLowerCase()){if(f.type==="address"&&f.item.fullAddress!==e.fullAddress){this._selectItemByPanel(e)
}else{this._unselectItemByPanel()
}}else{this._selectItemByPanel(e)
}},_selectItemByPanel:function(c){var b=this.$Search();
this._unlistenCloseInfoWindow();
this._closePanorama();
this._mapView.showMarker(c);
if(c.MarkerType.indexOf("BUS")===-1){this._mapView.showInfoWindow(c)
}b.setSelectedItem(c);
b.enableBoundarySearch();
this._checkIndoorInfo(c)
},_unselectItemByPanel:function(){this._unselectItem()
},_setCurrentBound:function(b){this._currentBound=b
},_changePage:function(c,d,b){var e={query:d,page:c.value.page,type:b.type,queryRank:b.rank,busLinkYN:b.busLinkYN,re:"1"};
if(this._currentBound&&this.$QueryField().isBoundarySearchChecked()){e.boundary=this._currentBound;
delete this._currentBound
}if(c.name=="site"){e.siteSort=b.site.sort
}if(c.name=="bus"){e.doCode=b.bus.doCode;
e.busType=b.bus.busType
}if(b.site&&b.site.petrolFilter){e.petrolFilter=b.site.petrolFilter.type+";"+b.site.petrolFilter.bound
}this.$Search().setPageChanged(true);
this._requestSearch(d,e,{},true)
},_closePanorama:function(){this.$Search().closePanorama();
delete this._currentBound
},_showRoadBound:function(b,c){this._closePanorama();
var d=this.$Search().getItemByIndex(b,c);
this._mapView.showRoadBound(d)
},_showMarkerTooltip:function(c,d){var e,b;
e=this.$Search().getItemByIndex(c,d);
if(d==="BUS"){b=this.getBusMarker(e.id)
}else{b=this.getSearchMarker(e.id,d)
}if(b!=null&&(!b.isEnabled||b.isEnabled())){this.$bridge().focusMarker(b)
}},_hideMarkerTooltip:function(c,d){var e=this.$Search().getItemByIndex(c,d),b;
if(d==="BUS"){b=this.getBusMarker(e.id)
}else{b=this.getSearchMarker(e.id,d)
}if(b!=null){this.$bridge().blurMarker(b)
}},_focusPolygon:function(b,c){var d=this.$Search().getItemByIndex(b,c),e=d._polygonParam;
if(!e){return
}if(c=="ADDRESS"&&d.id!=this._currentAddress.id){return
}this.$SearchPolygonService().focusPolygon(e)
},_blurPolygon:function(b,c){var d=this.$Search().getItemByIndex(b,c),e=d._polygonParam;
if(!e){return
}if(c=="ADDRESS"&&d.id!=this._currentAddress.id){return
}this.$SearchPolygonService().blurPolygon(e)
},_markStaredMarker:function(e,d,b){if(this._selectedMarker){this._selectedMarker.options.lookAt=false;
delete this._selectedMarker
}var c=this.getSearchMarker(e,d);
if(c){c.options.lookAt=!!(b&&+b.pan===0&&+b.tilt===0&&+b.fov===0);
this._selectedMarker=c
}},_openPanorama:function(e){this._setCurrentBound(this.$map().getBoundAsLatLng());
var g=this.$Search().getItemById(e.value.id,e.value.type),d=g[e.key],c={streetPanorama:3,insidePanorama:5,interiorPanorama:8,indoorPanorama:10},b=c[e.key]||1,h=this.$map().getLevel(),i=(h>11?h:11),f;
i=Math.min(i,(parseInt(g.itemLevel,10)||11));
f={panoramaId:d.id,point:new nhn.mapcore.LatLng(d.lat,d.lng),type:b,pan:d.pan,tilt:d.tilt,fov:d.fov,layout:b==5?0:2,mapLevel:i};
this._markStaredMarker(g.id,e.value.type,d);
this._unlistenCloseInfoWindow();
this.$Search().openPanorama(f)
},_openPanoramaOfItem:function(h){if(!!h._titleOnly){return
}var f=this.$Search().getPanoramaData().type,k=h.insidePanorama||h.streetPanorama,b=iron.ns("nhn.map.panorama").Const,g=b.TYPE_FLIGHT,i=b.TYPE_MUSEUM,e=b.TYPE_STREET,d=b.TYPE_INDOOR,j,c;
if(f===b.TYPE_FLIGHT){k=h.skyPanorama
}c=f===g?g:h.insidePanorama?i:h.indoorPanorama?d:e;
if(!k){this._closePanorama();
this._mapView.showInfoWindow(h);
return
}j={panoramaId:k.id,point:new nhn.mapcore.LatLng(k.lat,k.lng),type:c,pan:k.pan,tilt:k.tilt,fov:k.fov,layout:c==i?0:2};
this._unlistenCloseInfoWindow();
this.$Search().openPanorama(j)
},_addDirectionsPoint:function(g,c,d){var e=this.$Search().getItemByIndex(c,d),b=this._getTargetName(g);
var f={id:e.id,point:{x:e.x,y:e.y},title:d==="ADDRESS"?e.name||e.fullAddress:e.name,type:d};
if(e.entranceCoords){f.entranceCoords=e.entranceCoords
}this.$Search()["set"+b](f)
},_applyDirectionsPoint:function(g,c,d){var e=this.$Search().getItemByIndex(c,d),b=this._getTargetName(g);
var f={id:e.id,point:{x:e.x,y:e.y},title:d==="ADDRESS"?e.name||e.fullAddress:e.name,type:d};
if(e.entranceCoords){f.entranceCoords=e.entranceCoords
}this.$Search()["apply"+b](f)
},_addDirectionsPointWithKey:function(c,b,d){var e=this.$Search().getItemByIndex(b,d);
var f={id:e.id,point:{x:e.x,y:e.y},title:d==="ADDRESS"?e.name||e.fullAddress:e.name,type:d};
if(e.entranceCoords){f.entranceCoords=e.entranceCoords
}this.$Search().setRouteWithKey(c,f)
},_addDirectionsPointWithTitle:function(d,b,g,e){var c=this._getTargetName(d),f=c+"_"+b+"_"+g;
this.$Search()["set"+c]({id:f,point:{x:b,y:g},title:e,type:type})
},_getTargetName:function(b){return b.replace(/(\w)(\w*)$/,function(c,e,d){return e.toUpperCase()+d
})
},_idMapView_changed:function(b){if(!b){return
}this._onMapChange(b)
},_addressMapView_changed:function(b){if(!b){return
}this._onMapChange(b)
},_siteMapView_changed:function(b){if(!b){return
}this._onMapChange(b)
},_busMapView_changed:function(b){if(!b){return
}this._onMapChange(b)
},_onMapChange:function(g){var b=this.$Search(),d="default",f=b.getSelectedItem(),c=b.getMenuState()==="LOCATION",e;
switch(g.key){case"marker":d="marker";
e=b.getItemById(g.value.id,g.value.type);
break;
case"select":e=g.value;
break;
case"infoWindow":case"move_infoWindow":e=b.getItemByIndex(g.value.index,g.value.type);
break;
default:break
}if(g.key=="move_infoWindow"){d="move"
}this._markStaredMarker(e.id,g.value.type);
if(c&&g.key==="marker"&&f&&e&&(f.id===e.id&&f.type===e.MarkerType.toLowerCase())){this._unselectItem()
}else{if(e){b.setSelectedItem(e);
this._selectItem(e,d)
}}},_selectItem:function(e,d){var f=this.$Search();
f.disableBoundarySearch();
this._panelView.highlightItem(e);
if(f.getResult()._viewType==="id"){e.MarkerType="ID"
}if(d!="move"){if(this.$Search().isPanoramaPlaying()){this._openPanoramaOfItem(e)
}else{if(e._searchType!=="BUS"){this._mapView.showInfoWindow(e)
}}}else{this._mapView.moveInfoWindow(e,this._panelView.highlightItem.bind(this._panelView,e))
}if(d==="marker"){var g=e.indoorMapInfo,c=e.indoorPanorama;
if(c&&this.$Search().isPanoramaPlaying()){var b={panoramaId:c.id,point:new nhn.mapcore.LatLng(c.lat,c.lng),type:10,pan:c.pan,tilt:c.tilt,fov:c.fov,layout:2,mapLevel:this.$map().getLevel()};
this.$Search().openPanorama(b)
}else{if(g){this.$Search().enterIndoorMap(g.zoneId,g.zOrder)
}}}window.setTimeout(function(){f.enableBoundarySearch()
},10)
},_unselectItem:function(b){var c=this.$Search().getSelectedItem();
if(b){if(c!==b){return
}}else{}this.$Search().clearSelectedItem()
},_listenCloseInfoWindow:function(){this._unlistenCloseInfoWindow();
this.$InfoWindowFacade().attach("close.searchItem",this._onInfoWindowClose.bind(this))
},_unlistenCloseInfoWindow:function(){this.$InfoWindowFacade().detach("close.searchItem")
},_onInfoWindowClose:function(f){var c=f.infoWindow,d=this.$Search().getSelectedItem(),b,g;
if(!c||!c.getModel||!d||!d.item){return
}if(!c.getModel()){return
}g=c.getModel().getData();
b=d.item;
if(+b.x===+g.x&&+b.y===+g.y){this._unselectItem(d)
}},_clear:function(){this._mapView&&this._mapView.clear();
this._panelView&&this._panelView.clear()
},_bookmarkDataProcess:function(c){var d=this._getSearchInfo(c),b=nhn.map.bookmark.BookmarkModelFactory.createBookmark(d);
switch(c.method){case"ADD":this.$BookmarkService().addBookmarkByBookmarkStud(b);
break;
case"DEL":this.$BookmarkService().removeBookmarkByBookmarkStud(c.bookmark_key);
break
}},_getSearchInfo:function(b){return this.$Search().getItemById(b.id,b.type)
},getBusMarkerList:function(){return this.$Search().getBusMarkerList()
},getBusMarker:function(b){return this.$Search().getBusMarker(b)
},getSearchMarkerList:function(){return this._mapView?this._mapView.getSearchMarkerList():[]
},getAdMarkerList:function(){return this._mapView?this._mapView.getAdMarkerList():[]
},getSearchMarker:function(c,b){return this._mapView?this._mapView.findMarker(c,b):null
},_updateSelectedSpot_changed:function(b){this._panelView.checkHighlightItem(b)
},_beforeOpenPanorama:function(){this._unlistenCloseInfoWindow()
},_onOpenPanorama:function(){var b=this.getSearchMarkerList(),c=this.getBusMarkerList(),d=this.getAdMarkerList();
if(b.length>0){this.$Search().addPanoramaMarker(b)
}if(c.length>0){this.$Search().addPanoramaMarker(c)
}if(d.length>0){this.$Search().addPanoramaMarker(d)
}},_afterClosePanorama:function(){var c=this.$Search().getSelectedItem(),b;
if(c&&this._mapView){b=c.item;
if(b.MarkerType.indexOf("BUS")===-1){this._mapView.showInfoWindow(b)
}else{this._mapView.selectMarker(b)
}this._listenCloseInfoWindow()
}this.$Search().clearPanoramaMarker()
},_onNeedsSpotWindowOpen:function(f){var d=f.windowInfo,h=this.getSearchMarker(d.spotId,d.spotType),c=h?h.getSmallIcon():null,g=c?c.getSize():{width:0,height:0},b;
b={id:d.id,MarkerInfo:{type:"PANORAMA",realType:d.realType,id:d.id,offset:{width:0,height:0},size:g,pixelPoint:{x:d.screen_x,y:d.screen_y},smallIcon:c}};
this.$InfoWindowFacade().open("PANORAMA",b)
},_listenBookmarkService:function(){this.$BookmarkService().attach({load:this._onBookmarkChanged.bind(this),add:this._onBookmarkChanged.bind(this),remove:this._onBookmarkChanged.bind(this)})
},_onBookmarkChanged:function(){if(!this._panelView){return
}var b=this.$BookmarkService().getBookmarkListAsData();
this._panelView.updateUiOfBookmarkStuds(b)
}})
}());
nhn.mapservice.TemplateRepos.add({search_address:function(_d_){var p=[];
with(_d_){p.push('<div class="search_result_top">     ',suggestion_n_relation_result,"     ",search_tab,"     ",search_address_sortbox,"     ",search_address_tab,' </div> <div class="search_result">     ',search_address_content," </div>")
}return p.join("")
},search_site:function(_d_){var p=[];
with(_d_){p.push('<div class="search_result_top">     ',suggestion_n_relation_result,"     ",search_tab,"     ",search_site_tab,"     ",search_site_sortbox,' </div> <div class="search_result">     ',search_site_content," </div>")
}return p.join("")
},search_bus:function(_d_){var p=[];
with(_d_){p.push('<div class="search_result_top">     ',suggestion_n_relation_result,"     ",search_tab,"     ",search_bus_sortbox,"     ",search_bus_tab,' </div> <div class="search_result">     ',search_bus_content,"     ",bus_search_empty_content," </div>")
}return p.join("")
},search_empty:function(_d_){var p=[];
with(_d_){p.push('<div class="search_result_top">     ',suggestion_n_relation_result,"     ",search_empty_tab,' </div> <div class="search_result">     ',search_empty_content," </div>")
}return p.join("")
},search_tab:function(_d_){var p=[];
with(_d_){p.push('<div class="lst_sorting">     <h5 class="blind">검색결과 상세선택</h5>     <ul> ');
for(var i=0,ii=tab.length,eachTab;
i<ii;
i++){eachTab=tab[i];
p.push("     <li");
if(eachTab.__activated){p.push(' class="on"')
}p.push('>         <a href="#" class="nclicks(',eachTab.__ssc,')" data-name="',_viewType,'" data-type="',eachTab.type,'" data-rank="',eachTab.rank,'">',eachTab.title,'<span class="spm spm_red_arr"></span></a>     </li> ')
}p.push("     </ul> ");
if(!directionsInfo.isDirectionsType){p.push('     <a href="#" class="lst_sorting_del">지우기</a> ')
}p.push('     <h3 class="blind">',__displayTabName,"</h3> </div>")
}return p.join("")
},search_empty_tab:function(_d_){var p=[];
with(_d_){p.push("");
if(hasTimeOutResult){p.push(' <div class="srt">     ',__timeoutHTML," </div> ")
}p.push("")
}return p.join("")
},search_address_tab:function(_d_){var p=[];
with(_d_){p.push('<div class="srt">     ',__timeoutHTML," ");
if(address.hasExtendedAddress){p.push('     <div class="srt_alert">         <p class="info">검색결과가 없을 경우 <strong>가까운 주소 정보</strong>를 제공합니다.</p>     </div> ')
}if(address.isIncorrectAddress){p.push('     <div class="srt_alert">         <p class="info">선택한 위치에 지번주소가 없을 경우 <strong>행정구역 결과</strong>를 제공합니다.</p>     </div> ')
}if(hasTimeOutResult){p.push('     <div class="srt_alert">         <p class="info">일시적으로 검색결과 중 일부를 불러오지 못했습니다. 잠시 후 다시 검색해 주세요. <a href="#" class="timeout_research" data-query="',inputQuery,'">재검색하기</a></p>     </div> ')
}p.push('      <h2 class="srt_tit">         <strong>',resultQuery[0],'</strong> 주소 검색결과         <span class="n"><em>',address._displayCount,"</em>건</span>     </h2> </div>")
}return p.join("")
},search_address_sortbox:function(_d_){var p=[];
with(_d_){p.push("");
var sscGrp=address.sscGrp,subTab=address.subTab,subType=address.subType;
if(subTab&&subTab.length){p.push(' <div class="srt_sortbox srt_sortbox_bus">     <ul class="srt_sort_addr">     ');
for(var i=0,ii=subTab.length,eachTab,tabACode;
i<ii;
i++){eachTab=subTab[i];
tabACode=i===0?"newtab":"oldtab";
p.push("     <li");
if(subType==eachTab.type){p.push(' class="on"')
}p.push('>         <a href="#" class="addr nclicks(',sscGrp,".",tabACode,')" data-type="',eachTab.type,'">',eachTab.title,"</a>     </li>     ")
}p.push("     </ul> </div> ")
}p.push("")
}return p.join("")
},search_site_tab:function(_d_){var p=[];
with(_d_){p.push("");
var sscGrp=site.sscGrp;
if(address){p.push('  <div class="srt">     ',__timeoutHTML,'     <div class="srt_place">         <h2>',address.displayAddr,"</h2>     ");
if(address.mappedAddr){p.push("         <p>         ");
if(address.mappedAddr.isNewAddress){p.push('             <span class="spm spm_newaddr_v2">도로명주소</span>         ')
}else{p.push('             <span class="spm spm_addr">지번주소</span>         ')
}p.push("             ",address.mappedAddr.address,"         </p>     ")
}p.push('     </div> </div> <div class="srt_sortbox">     <p class="srt_addr_this">이 주소에 있는 장소 <em>',_displayCount,"</em></p> ");
if(__hasInnerState){p.push('     <a href="#" class="spm spm_lst_diffaddr nclicks(',sscGrp,'.research)">다른주소보기</a> ')
}p.push(" </div>  ")
}else{p.push(" ");
if(brandPromotion&&_menustate==="LOCATION"){p.push(" ");
var bp=brandPromotion,logoImage=new Image();
logoImage.onload=function(){var w=this.width,h=this.height,logo=$($(".sc_brand_logo img")[0]),title=$(".sc_brand_logo strong");
if(w!==h){logo.attr("height","20").addClass("img_logo_wide")
}logo[0].src=this.src;
logo.attr("alt",bp.brandTitle);
title.text(bp.brandTitle)
};
logoImage.src=bp.brandLogoImage;
p.push(' <div class="sc_brand">     <div class="sc_brand_logo">         <img src="" height="34"><strong></strong>         ');
if(bp.brandPcUrl){p.push('         <a href="',bp.brandPcUrl,'" class="spm btn_website nclicks(pbr.home)" target="_blank">홈페이지</a>         ')
}p.push('     </div>     <a href="',bp.promotionPcUrl,'" class="sc_brand_cont nclicks(pbr.event,brand',bp.brandDirNum,')" target="_blank">         <div class="link_banner"><img src="',bp.promotionImage,'" width="100%" alt="프로모션이미지"></div>         ');
if(bp.promotionDetail){p.push('         <strong style="color:',bp.promotionDetailColor,'">',bp.promotionDetail,"</strong>         ")
}p.push("         ");
if(bp.promotionStartDate){p.push("         <p>",bp.promotionStartDate,"~",bp.promotionEndDate,"</p>         ")
}p.push("     </a>     </div> ")
}p.push('  <div class="srt">     ',__timeoutHTML,"      ");
if(adultKeywordYN){p.push('      <div class="srt_alert _adult_alert">         ');
if(adultConfirmYN&&adultYN){p.push('              <p class="adult"><span class="spm spm_lst_adult">19세미만 이용불가</span> 이 정보는 정보통신망 이용촉진 및 정보보호등에 관한 법률 및 청소년보호법의 규정에 의하여 19세 미만의 청소년이 이용할 수 없습니다.</p>             <p class="act"><a href="#" class="spm spm_lst_adultno _no_adult nclicks(adt*e.link)">성인 정보 제외하고 보기</a></p>          ')
}else{if(!adultConfirmYN&&adultYN){p.push('              <p class="adult"><span class="spm spm_lst_adult">19세미만 이용불가</span> 19세 미만 청소년에게 부적합한 검색 결과는 제외 하였습니다. 19세 이상 <span>사용자의 경우 전체 결과를 확인할 수 있습니다.</span></p>             <p class="act"><a href="#" class="spm spm_lst_adultyes nclicks(adt*i.link)">성인 정보 포함하고 보기</a></p>          ')
}else{p.push('              <p class="adult"><span class="spm spm_lst_adult">19세미만 이용불가</span> 19세 미만 청소년에게 부적합한 검색 결과는 제외 하였습니다. 19세 이상 <span>사용자의 경우 전체 결과를 확인할 수 있습니다.</span></p>             <p class="act"><a href="#" class="spm spm_lst_adultyes _auth_adult nclicks(adt*a.auth)">성인 정보 포함하고 보기</a></p>          ')
}}p.push("     </div>     ")
}p.push('      <h3 class="blind">장소</h3>     ');
if(others){p.push('     <h2 class="srt_tit">         <select title="다른 중복지역명 더보기">             ');
var otherRegion=others||[];
for(var i=0,len=otherRegion.length;
i<len;
i++){p.push('                     <option class="nclicks(',sscGrp,'*S.resrch)" data-others="',otherRegion[i]," ",queryForDupRegion,'">',otherRegion[i],"</option>             ")
}p.push("         </select>         ",resultQuery[1],' 검색결과         <span class="n"><em>',_displayCount,"</em>건</span>     </h2>     ")
}else{p.push('     <h2 class="srt_tit">         ',resultQuery[0]," ",resultQuery[1],' 검색결과 <span class="n"><em>',_displayCount,"</em>건</span>     </h2>     ")
}p.push("   ");
if(linkQuery||lbaQuery){p.push('     <div class="srt_different srt_research">         <h5 class="blind">다른검색 리스트</h5>         <ul>         ');
if(lbaQuery){var query=lbaQuery.queryForDisplay&&lbaQuery.queryForDisplay.join("").replace(",","");
p.push('             <li><a href="#" class="nclicks(',sscGrp,"*",lbaQuery.linkqueryType,'.resrch)" data-query="',lbaQuery.queryForReSearch,'" data-location="',lbaQuery.siteLocation,'" data-rank="',lbaQuery.queryRank,'">',query,"</a></li>         ")
}if(linkQuery){for(var i=0,len=linkQuery.length;
i<len;
i++){var linkQueryInfo=linkQuery[i];
var linkQueryOthers=linkQueryInfo.others;
var searchQuery="";
var queryForDisplay=linkQueryInfo.queryForDisplay&&linkQueryInfo.queryForDisplay.join("").replace(",","");
p.push("             <li>             ");
if(linkQueryOthers){searchQuery=linkQueryOthers[0];
queryForDisplay=linkQueryInfo.queryForDisplay[1];
p.push("                 <select>             ");
for(var j=0,len2=linkQueryOthers.length;
j<len2;
j++){p.push('                     <option data-others="',linkQueryOthers[j]+linkQueryInfo.queryForReSearch,'" data-rank="',linkQueryInfo.queryRank,'"');
if(linkQueryInfo.indoorDetail){p.push(" data-indoor-detail='",linkQueryInfo.indoorDetail,"'")
}p.push(">",linkQueryOthers[j],"</option>             ")
}p.push("                 </select>             ")
}p.push('                 <a href="#" class="nclicks(',sscGrp,"*",linkQueryInfo.linkqueryType,'.resrch) _linkQueryResearch" data-query="',searchQuery+linkQueryInfo.queryForReSearch,'" data-rank="',linkQueryInfo.queryRank,'"');
if(linkQueryInfo.indoorDetail){p.push(" data-indoor-detail='",linkQueryInfo.indoorDetail,"'")
}p.push(">",queryForDisplay,"</a>             </li>         ")
}}p.push("         </ul>     </div> ")
}p.push("  ");
if(hasPollingPlace){p.push('     <div class="srt_alert">         <p class="info">실제 투표소 정보와 차이가 있을 수 있으니, <a href="https://www.nec.go.kr/portal/main.do" target="_election">선거관리위원회</a>에서 최종 확정된 투표소 정보를 필히 확인하시기 바립니다.</p>     </div> ')
}p.push(" </div> ")
}p.push("")
}return p.join("")
},search_site_sortbox:function(_d_){var p=[];
with(_d_){p.push("");
if(!address){var sscGrp=site.sscGrp;
p.push('     <div class="search_result_sort srt_sortbox">         ');
if(hasSubRegion){p.push('         <div class="select_area">             <a href="#" class="select_area_a_open nclicks(',sscGrp,'*Z.open)">지역별 <span class="spm spm_smore">더보기 레이어 열기</span></a>             <div class="select_area_ly">                 <h5 class="blind">지역별 더보기 레이어</h5>                 <p class="sa_history"></p>                 <ul class="sa_lst _sub_region_lists">                  </ul>             </div>             <a href="#" class="select_area_a_close nclicks(',sscGrp,'*Z.close)">지역별 <span class="spm spm_smore_close">더보기 레이어 닫기</span></a>             <div class="select_area_loading" style="display:none;">                 <span class="load"></span><span class="mes">데이터를 불러오는중</span>             </div>         </div>         ')
}p.push('         <div class="srt_sort">             <ul>                 <li');
if(site.sort===0){p.push(' class="on"')
}p.push('><a href="#" class="_relevance nclicks(',sscGrp,'.relevance)" data-sort="0">관련도순</a></li>                 <li');
if(site.sort===1){p.push(' class="on"')
}p.push('><a href="#" class="_distance nclicks(',sscGrp,'.distance)" data-sort="1">거리순</a></li>             ');
if(site.isPetrol){p.push("                 <li");
if(site.sort===2){p.push(' class="on"')
}p.push('><a href="#" class="oil nclicks(',sscGrp,'.opunfold)">유가순</a>                     <div class="srt_oil_ly" style="display:none">                         <ul>                             <li><a href="#" class="nclicks(',sscGrp,'.oppetrol)" data-type="1"');
if(site.__hasPetrolFilterBound){p.push(' data-bound="',site.petrolFilter.bound,'"')
}p.push('>휘발유</a></li>                             <li><a href="#" class="nclicks(',sscGrp,'.ophgpetrol)" data-type="2"');
if(site.__hasPetrolFilterBound){p.push(' data-bound="',site.petrolFilter.bound,'"')
}p.push('>고급휘발유</a></li>                             <li><a href="#" class="nclicks(',sscGrp,'.opdiesel)" data-type="3"');
if(site.__hasPetrolFilterBound){p.push(' data-bound="',site.petrolFilter.bound,'"')
}p.push('>경유</a></li>                             <li><a href="#" class="nclicks(',sscGrp,'.oplpg)" data-type="4"');
if(site.__hasPetrolFilterBound){p.push(' data-bound="',site.petrolFilter.bound,'"')
}p.push(">LPG</a></li>                         </ul>                     </div>                 </li>             ")
}p.push('             </ul>              <h4 class="blind">',site.__sortText,"</h4>         </div>     </div> ")
}p.push("")
}return p.join("")
},search_bus_sortbox:function(_d_){var p=[];
with(_d_){p.push('<div class="srt_sortbox srt_sortbox_bus"> ');
var subTab=bus.subTab,sscGrp=bus.sscGrp;
p.push('      <ul class="srt_sort_addr">     ');
for(var i=0,ii=subTab.length;
i<ii;
i++){p.push("         <li");
if(bus.subType===subTab[i].type){p.push(' class="on"')
}p.push('>             <a href="#" class="nclicks(',sscGrp,".",subTab[i]._acode,')" data-name="bus" data-type="',subTab[i].type,'" data-doCode="',subTab[i].doCode,'" data-typeCode="',subTab[i].busType,'" data-rank="',subTab[i].rank,'">',subTab[i].title,"</a>         </li>     ")
}p.push('     </ul>     <h5 class="blind">',bus.__displayTabTitle,"</h5> </div>")
}return p.join("")
},search_bus_tab:function(_d_){var p=[];
with(_d_){p.push("");
var sscGrp=bus.sscGrp;
p.push(' <div class="srt">     ',__timeoutHTML,'      <h2 class="srt_tit">',bus.__displayResultQuery,' <span class="n"><em>',bus._displayCount,'</em>건</span></h2>      <div class="srt_different">         <h5 class="blind">다른검색 리스트</h5>         <ul>     ');
if(bus.linkQuery){for(var i=0,ii=bus.linkQuery.length;
i<ii;
i++){p.push('             <li><a href="#" class="nclicks(',sscGrp,"*",bus.linkQuery[i].queryType,'.resrch)" data-type="search" data-queryType="',bus.linkQuery[i].queryType,'" data-rank="',bus.linkQuery[i].queryRank,'" data-query="',bus.linkQuery[i].queryForReSearch,'">',bus.linkQuery[i].queryForDisplay,"</a></li>      ")
}}if(bus.routeQuery){p.push('             <li><a href="#" class="_route nclicks(',sscGrp,'*D.route)" data-type="route" data-lat="',bus.routeQuery.lat,'" data-lng="',bus.routeQuery.lng,'" data-title="',bus.routeQuery.title,'" data-m-preload="directions">',bus.routeQuery.title,"까지 가는 대중교통 경로보기</a></li>     ")
}p.push("         </ul>     </div>  ");
if(bus.__regionOptionEnabled||bus.__busTypeOptionEnabled||bus.__dupRegionOptionEnabled){p.push('     <div class="srt_sel">         <h5 class="blind">검색결과 옵션</h5>      ');
if(bus.__regionOptionEnabled){p.push('         <div class="ds_select');
if(bus.__regionOptionDimmed){p.push(" dimmed")
}p.push(' _bus_region" data-selectbox="region">             <a href="#" class="dss_a">                 <span class="blind">현재</span><strong class="dss_st">',bus.__doName,'</strong>                 <span class="spm spm_arr_toggle74">지역선택 레이어 열기/닫기</span>             </a>             <div class="ly_dss">                 <h5 class="blind">지역선택 레이어</h5>                 <ul>             ');
if(bus.otherList.length>1){p.push("                     <li");
if(+bus.doCode===0){p.push(' class="on"')
}p.push('><a href="#" class="nclicks(',sscGrp,'.region)" data-type="',bus.subType,'" data-docode="0" title="전체지역">전체지역</a></li>             ')
}for(var i=0,ii=bus.otherList.length,eachOption;
i<ii;
i++){eachOption=bus.otherList[i];
p.push("                     <li");
if(+bus.doCode===+eachOption.doCode){p.push(' class="on"')
}p.push('><a href="#" class="nclicks(',sscGrp,'.region)" data-type="',bus.subType,'" data-typeCode="',bus.busType,'" data-docode="',eachOption.doCode,'" data-rank="',bus.rank,'" title="',eachOption.doName,'">',eachOption.doName,"</a></li>             ")
}p.push("                 </ul>             </div>         </div>     ")
}if(bus.__dupRegionOptionEnabled){p.push('         <div class="ds_select ds_select_b _dup_region" data-selectbox="dup">             <a href="#" class="dss_a">                 <span class="blind">현재</span><strong class="dss_st">다른 중복지역명 결과보기</strong>                 <span class="spm spm_arr_toggle74">다른 중복지역명 선택 레이어 열기/닫기</span>             </a>              <div class="ly_dss">                 <h5 class="blind">다른 중복지역명 선택 레이어</h5>                 <ul>             ');
if(bus.otherRegionList&&bus.otherRegionList.length){for(var i=0,ii=bus.otherRegionList.length,regionDesc;
i<ii;
i++){regionDesc=bus.otherRegionList[i];
p.push('                     <li><a href="#" class="nclicks(',sscGrp,'*S.resrch)" data-others="',[regionDesc,bus.queryForDupRegion].join(" "),'">',regionDesc,"</a></li>             ")
}}p.push("                 </ul>             </div>         </div>     ")
}if(bus.__busTypeOptionEnabled){p.push('         <div class="ds_select');
if(bus.__busTypeOptionDimmed){p.push(" dimmed")
}p.push(' _bus_type " data-selectbox="type">             <a href="#" class="dss_a">                 <span class="blind">현재</span><strong class="dss_st">',bus.__busTypeName,'</strong>                 <span class="spm spm_arr_toggle74">버스유형선택 레이어 열기/닫기</span>             </a>             <div class="ly_dss">                 <h5 class="blind">버스유형선택 레이어</h5>                 <ul>             ');
if(bus.otherTypeList.length>1){p.push('                     <li><a href="#" class="nclicks(',sscGrp,'.type)" data-type="',bus.subType,'" data-typeCode="0" data-doCode="0">전체유형</a></li>             ')
}for(var i=0,ii=bus.otherTypeList.length,eachOption;
i<ii;
i++){eachOption=bus.otherTypeList[i];
p.push('                      <li><a href="#" class="nclicks(',sscGrp,'.type)" data-type="',bus.subType,'" data-doCode="',bus.doCode,'" data-typeCode="',eachOption.typeCode,'" data-rank="',bus.rank,'" title="',eachOption.typeName,'">',eachOption.typeName,"</a></li>                 ")
}p.push("                 </ul>             </div>         </div>     ")
}p.push("     </div><!-- // srt_sel --> ")
}p.push(" </div>")
}return p.join("")
},search_address_content:function(_d_){var p=[];
with(_d_){p.push('<h3 class="blind">주소 리스트</h3> <ul class="lst_addr">  ');
var sscGrp=address.sscGrp,aList=address.list,subType=address.subType;
for(var i=0,ii=aList.length,item,mappedAddress;
i<ii;
i++){item=aList[i];
mappedAddress=item.mappedAddress;
p.push('      <li class="nclicks(',sscGrp,".itemoff,",item.id,",",item.rank,',Y)" data-id="',item.id,'" data-index="',i,'">         <div class="lanx">             <div class="pin2 lanx_pin" style="display:none">                 <a href="#" class="sr_pin"><img src="https://ssl.pstatic.net/static/maps/ux2013/icons/pins_n.png" width="18" height="28" alt="주소"></a>             </div>              <div class="lanx_t">                 <a href="#" class="nclicks(',sscGrp,".title,",item.id,",",item.rank,',Y)">',item.display,"</a>                  ");
if(item.__hasSiteQuery){p.push('                     <span class="bar">|</span> <a href="#" class="place pla nclicks(',sscGrp,'.place)" data-query="',item.siteSearchQuery,'" data-daddr="',item.fullAddress,'"');
if(mappedAddress&&mappedAddress.mappedAddr){p.push(' data-maddr="',mappedAddress.mappedAddr,"")
}p.push('">장소<strong>',item.siteCount,"</strong></a>                 ")
}p.push("             </div>         ");
if(item.__relatedRegionList.length||item.__favoriteSiteList.length){p.push('             <dl class="lanx_inc">             ');
if(item.__relatedRegionList.length){p.push("                 <dt>관련주소</dt>                 <dd>                 ");
for(var k=0,kk=item.__relatedRegionList.length;
k<kk;
k++){p.push('                     <a href="#" class="nclicks(ado.sub)" data-query="',item.__relatedRegionList[k].linkQuery,'">',item.__relatedRegionList[k].address,"</a>");
if(k<kk-1){p.push(",")
}p.push("                 ")
}p.push("             ")
}if(item.__favoriteSiteList.length){p.push("                 <dt>주요장소</dt>                 <dd>                 ");
for(var k=0,kk=item.__favoriteSiteList.length;
k<kk;
k++){p.push('                     <a href="#" class="nclicks(ado.sights)" data-query="',item.__favoriteSiteList[k],'">',item.__favoriteSiteList[k],"</a>");
if(k<kk-1){p.push(",")
}p.push("                 ")
}p.push("                 </dd>             ")
}p.push("             </dl>         ")
}if(mappedAddress){var buildingName=item.buildName,zipCode=item.zipcode;
if(subType==="ADDRESS_ROAD"||!mappedAddress.isNewAddress){p.push('             <div class="lanx_numaddr">                 <div class="NCR-STOP">                 ');
if(item.__mappedAddressList){p.push('                     <a href="#" class="spm spm_addr_open nclicks(',sscGrp,'.foldadr)">지번주소 펼치기</a>                 ')
}else{p.push('                     <span class="spm spm_addr">지번주소</span>                 ')
}p.push('                     <a href="#" class="_adr nclicks(',sscGrp,".old,",mappedAddress.id,",",item.id,',Y)" data-id="',mappedAddress.rCode,'" data-index="',i,'" data-depth="-1">',mappedAddress.abbrAddress,"</a>                 </div>              ");
if(item.__mappedAddressList){p.push('                 <ul class="lanx_numaddr_more" style="display:none">                 ');
for(var j=0,jj=item.__mappedAddressList.length,mItem;
j<jj;
j++){mItem=item.__mappedAddressList[j];
p.push('                      <li>                         <a href="#" class="_adr nclicks(',sscGrp,".old,",mItem.id,",",mItem.id,',Y)" data-id="',mItem.rCode,'" data-index="',i,'" data-depth="',j,'">',mItem.abbrAddress,"</a>                     ");
if(mItem.__hasSiteQuery){p.push('                         <span class="bar">|</span>                         <a href="#" class="place pla nclicks(',sscGrp,'.place)" data-query="',mItem.siteSearchQuery,'" data-daddr="',item.fullAddress,'" data-maddr="',mItem.mappedAddr,'">장소<strong>',mItem.siteCount,"</strong></a>                     ")
}p.push("                     </li>                 ")
}p.push("                 </ul>             ")
}p.push("              ");
if(buildingName&&zipCode){p.push('                 <div class="zipcode">(우) ',item.__displayZipCode,' <span class="bar">|</span> ',buildingName,"</div>             ")
}else{if(!buildingName&&zipCode){p.push('                 <div class="zipcode">(우) ',item.__displayZipCode,"</div>             ")
}else{if(buildingName&&!zipCode){p.push('                 <div class="zipcode">',buildingName,"</div>             ")
}}}p.push("             </div>         ")
}else{p.push('             <div class="lanx_newaddr">                 <div class="NCR-STOP">                 ');
if(item.__mappedAddressList){p.push('                     <a href="#" class="spm spm_newaddr_open_v2 nclicks(',sscGrp,'.foldadr)">도로명주소 펼치기</a>                 ')
}else{p.push('                     <span class="spm spm_newaddr_v2">도로명주소</span>                 ')
}p.push('                     <a href="#" class="_adr nclicks(',sscGrp,".new,",mappedAddress.id,",",item.id,',Y)" data-id="',mappedAddress.rCode,'" data-index="',i,'" data-depth="-1">',mappedAddress.abbrAddress,'</a>                     <em class="zipcode">(우) ',item.__displayZipCode,"</em>                 </div>              ");
if(item.__mappedAddressList){p.push('                 <ul class="lanx_newaddr_more" style="display:none">                 ');
for(var j=0,jj=item.__mappedAddressList.length,mItem;
j<jj;
j++){mItem=item.__mappedAddressList[j];
p.push('                      <li>                         <a href="#" class="_adr nclicks(',sscGrp,".new,",mItem.id,",",mItem.id,',Y)" data-id="',mItem.rCode,'" data-index="',i,'" data-depth="',j,'">',mItem.abbrAddress,'</a>                         <em class="zipcode">(우) ',mItem.zipcode,"</em>                     </li>                  ")
}p.push("                 </ul>             ")
}p.push("              ");
if(buildingName&&zipCode){p.push('                 <div class="zipcode">(우) ',item.__displayZipCode,' <span class="bar">|</span> ',buildingName,"</div>             ")
}else{if(buildingName&&!zipCode){p.push('                 <div class="zipcode">',buildingName,"</div>             ")
}}p.push("             </div>         ")
}p.push("     ")
}p.push("         ");
if(!address.isIncorrectAddress){p.push('             <a href="#" class="spm spm_lst_fav nclicks(',sscGrp,'.bmkadd)" data-id="',item.id,'" data-bookmark-key="',item._bookmarkKey,'" title="즐겨찾기에 추가">즐겨찾기에 추가</a>         ')
}p.push("         </div><!-- // lanx -->      ");
if(!directionsInfo.isDirectionsType){p.push('         <div class="sc_act lanx_act NCR-STOP" data-m-preload="directions">             <h5 class="blind">길찾기설정/공유</h5>             <ul>                  <li class="start">                     <a href="#" data-ncs-acode="',sscGrp,'.from" class="spm spm_sc_start2" data-index="',i,'" data-name="',_viewType,'" data-type="ADDRESS">출발</a>                 </li>                 <li class="end">                     <a href="#" data-ncs-acode="',sscGrp,'.to" class="spm spm_sc_end2" data-index="',i,'" data-name="',_viewType,'" data-type="ADDRESS">도착</a>                 </li>                 ');
if(!address.isIncorrectAddress){p.push('                 <li class="receive _share">',strShareEl,"</li>                 ")
}p.push("             </ul>         </div><!--// lanx_act -->     ")
}p.push("     </li> ")
}p.push('     </ul>  <div class="paginate_wrap">     <div class="paginate loaded">         <span class="pre">이전</span>         <span class="next">다음</span>         <a href="#" title="이전" class="pre">이전</a>         <a href="#" title="다음" class="next">다음</a>     </div> </div><!--// paginate_wrap -->')
}return p.join("")
},search_site_content:function(_d_){var p=[];
with(_d_){p.push("");
if(site){p.push(' <h3 class="blind">장소 리스트</h3>  ');
var sscGrp=site.sscGrp,adList=!!site.advertiseList?site.advertiseList:[];
if(adList.length>0){sscGrpAd="adv";
p.push(' <div class="txt_ad"><strong>\'',queryForDupRegion,'\'</strong> 관련 광고입니다.     <div class="wrap_btn_ad">         <a href="#" class="ico_ad_dsc" title="이 광고가 표시된 이유">이 광고가 표시된 이유</a>         <div class="wrap_ad_dsc" style="display:none;">             <span class="spmh spmh_ico_arr">&nbsp;</span>             <div class="ly_ad_dsc">                 <p>검색어와 관련 있는 지도서비스 등록업체를<br>검색결과 상단에 노출합니다.</p>                 <button type="button" class="bt_ad_clse" title="안내 레이어 닫기">안내 레이어 닫기</button>             </div>         </div>     </div>     <a href="https://localad.naver.com" target="_blank">지역광고 등록<img src="https://ssl.pstatic.net/static/maps/img/ico_adarrw.gif" width="4" height="6" alt=""></a> </div> ')
}p.push('     <ul class="lst_site"> ');
for(var i=0,ii=adList.length,realId,item;
i<ii;
i++){item=adList[i];
realId=item._id;
p.push('     <li class="nclicks(',sscGrpAd,".itemoff,",realId,",",item.rank,',Y) li_ad" data-id="',item.id,'" data-index="',i,'">         <div class="lsnx">         ');
if(item.isPollingPlace){p.push('             <div class="thumb nclicks(',sscGrpAd,".thumb,",realId,",",item.rank,',Y)">                 <img src="https://ssl.pstatic.net/static/maps/ux2013/thumb_vote.png" width="55" height="55" alt="임시 이미지"><span class="fix"></span>             </div>         ')
}else{if(item.__clippedThumbUrl){p.push('             <div class="thumb nclicks(',sscGrpAd,".thumb,",realId,",",item.rank,',Y)">                 <img src="',item.__clippedThumbUrl,'" width="',item.__thumbWidth,'" height="',item.__thumbHeight,'" alt="',item.name,'" ><span class="fix"></span>             </div>         ')
}}p.push('              <div class="pin nclicks(',sscGrpAd,".marker,",realId,",",item.rank,',Y)">                 <img src="',item.__pinUrl,'" width="18" height="28" alt="',item._pinAlt,'" data-adcr="marker">             </div>              <dl class="lsnx_det">             <dt>                 <a href="#" class="nclicks(',sscGrpAd,".title,",realId,",",item.rank,',Y) _ad_title" data-adcr="title">',item.display,'</a>                  <span class="ico">                 ');
if(item.__hasFeatureIcon){p.push('                     <span class="ico_set">                     ');
if(item.isPollingPlace){p.push('                         <span class="spm spm_lst_vote">투표소</span>                     ')
}if(item.indoorMapInfo&&!item.indoorMapInfo.isRepresent&&item.indoorPanorama){p.push('                         <a href="#" title="실내뷰" class="spm spm_lst_road nclicks(',sscGrp,".indoorpano,",realId,",",item.rank,',Y,Y)" data-id="',item.id,'" data-panorama-type="indoor">실내뷰</a>                     ')
}else{if(item.streetPanorama){p.push('                         <a href="#" title="거리뷰" class="spm spm_lst_road nclicks(',sscGrp,".streetpano,",realId,",",item.rank,',Y,Y)" data-id="',item.id,'" data-panorama-type="street">거리뷰</a>                     ')
}}if(item.skyPanorama&&!item.indoorPanorama){p.push('                         <a href="#" title="항공뷰" class="spm spm_lst_air nclicks(',sscGrpAd,".skypano,",realId,",",item.rank,',Y,Y)" data-id="',item.id,'" data-panorama-type="sky">항공뷰</a>                     ')
}if(item.insidePanorama){p.push('                         <a href="#" title="뮤지엄뷰" class="spm spm_lst_museum nclicks(',sscGrpAd,".inside,",realId,",",item.rank,',,Y)" data-id="',item.id,'" data-panorama-type="inside">뮤지엄뷰</a>                     ')
}if(item.interiorPanorama){p.push('                         <a href="#" title="펜션뷰" class="spm spm_lst_pension nclicks(',sscGrpAd,".insidepano,",realId,",",item.rank,',,Y)" data-id="',item.id,'" data-panorama-type="interior">펜션뷰</a>                     ')
}p.push("                     </span>                 ")
}p.push("                  ");
if(item.couponUrl&&!(!!item.menuExist&&item.menuExist==="1"&&item.hasNaverBooking)){p.push('                     <a href="#" title="쿠폰" class="spm spm_lst_coupon nclicks(',sscGrpAd,'.coupon)" data-id="',item.id,'" data-url="',item.couponUrl,'" data-adcr="coupon">쿠폰</a>                 ')
}if(item.hasCardBenefit){p.push('                     <a href="/local/siteview.nhn?code=',item.id.replace(/^[^0-9]+/,""),'&clickArea=ad#infoTab=cardInfo" class="spm spm_lst_card nclicks(',sscGrpAd,".card)\" data-cards='",item.__creditCardDetail,'\' data-adcr="card">카드</a>                 ')
}if(!!item.menuExist&&item.menuExist==="1"){p.push('                     <a href="/local/siteview.nhn?code=',item.id.replace(/^[^0-9]+/,""),'&clickArea=ad#infoTab=baseInfo" title="가격정보" class="spm spm_lst_price nclicks(',sscGrpAd,'.menu)" data-adcr="price">가격</a>                 ')
}if(item.poiInfo.hasRoad){p.push('                     <a href="#" class="spm spm_lst_allpath nclicks(',sscGrpAd,'.roadall)" data-index="',i,'">전체경로</a>                 ')
}if(item.hasNaverBooking){p.push('                     <a href="',item.naverBookingUrl,'" class="spm spm_lst_booking nclicks(',sscGrp,'.reserve)" target="_blank" data-adcr="booking">예약</a>                 ')
}p.push("                 </span>             </dt>          ");
if(item.roadAddress){p.push('             <dd class="addr">',item.roadAddress,"             ");
if(item.address){p.push('                 <a href="#" class="roadname" data-index="',i,'" data-status="off">지번</a>             ')
}p.push("             </dd>         ")
}else{if(item.address){p.push('             <dd class="addr">',item.address,"</dd>         ")
}}if(item.telDisplay){p.push('             <dd class="tel">             ');
if(item.isCallLink){p.push('                 <a href="#" class="free" data-index="',item.index,'">',item.telDisplay,' <span class="spm spm_lst_freetel">무료통화</span></a>             ')
}else{p.push("                 ",item.telDisplay,"             ")
}p.push("             </dd>         ")
}if(item.__displayCategory){p.push('             <dd class="cate">',item.__displayCategory,"</dd>         ")
}if(item.poiInfo.hasRoad){p.push('             <dd class="total_distance">                 총거리 <em><strong>',item.poiInfo.road.detail.wholeDistance,"</strong>km</em>             </dd>         ")
}if(item.petrolInfo){p.push('             <dd class="oil">             ');
if(item.petrolInfo.gasPrice){p.push("                 <span>휘발유 <em>",item.petrolInfo.__displayGasPrice,"</em></span>             ")
}if(item.petrolInfo.hGasPrice){p.push("                 <span>고급 <em>",item.petrolInfo.__displayHGasPrice,"</em></span>             ")
}if(item.petrolInfo.dieselPrice){p.push("                 <span>경유 <em>",item.petrolInfo.__displayDieselPrice,"</em></span>             ")
}if(item.petrolInfo.lpgPrice){p.push("                 <span>LPG <em>",item.petrolInfo.__displayLPGPrice,"</em></span>             ")
}p.push("             </dd>         ")
}p.push("             </dl>          ");
if(item.bizhourInfo||item.menuInfo){p.push('             <div class="highlight">             ');
if(item.bizhourInfo){p.push('                 <a href="/local/siteview.nhn?code=',realId,'&clickArea=ad#detail" target="_blank" class="nclicks(',sscGrpAd,".bizhour,",realId,",",item.rank,',Y)"><strong>영업시간</strong> ',item.bizhourInfo,"</a>             ")
}if(item.menuInfo){p.push('                 <a href="/local/siteview.nhn?code=',realId,'&clickArea=ad#detail" target="_blank" class="nclicks(',sscGrpAd,".menu,",realId,",",item.rank,',Y)"><strong>가격</strong> ',item.menuInfo,"</a>             ")
}p.push("             </div>         ")
}p.push('              <a href="#" data-id="',item.id,'" data-bookmark-key="',item._bookmarkKey,'" class="spm spm_lst_fav nclicks(',sscGrpAd,'.bmkadd)">즐겨찾기에 추가</a>         </div><!-- //lsnx -->          ');
var siteType=site.type||type;
if(!directionsInfo.isDirectionsType){p.push('         <div class="sc_act lsnx_act NCR-STOP" data-m-preload="directions">             <h5 class="blind">길찾기설정/공유</h5>             <ul>                 <li class="start"><a href="#" data-ncs-acode="',sscGrpAd,'.from" class="spm spm_sc_start2" data-index="',i,'" data-name="',_viewType,'" data-type="AD" data-adcr="to_start">출발</a></li>                 <li class="end"><a href="#" data-ncs-acode="',sscGrpAd,'.to" class="spm spm_sc_end2" data-index="',i,'" data-name="',_viewType,'" data-type="AD" data-adcr="to_dest">도착</a></li>                 <li class="receive _share" data-type="AD">',strShareEl,'</li>                  <li class="detail">                     <a href="/local/siteview.nhn?code=',realId,'&clickArea=ad" target="_blank" class="spm spm_sw_detail',item._quickType," _qbtn_detail nclicks(",sscGrpAd,".",item.sscLog,')" data-id="',item.id,'" data-adcr="detail">',item.__displayDetailName,"</a>                 </li>             </ul>         </div><!-- //lsnx_act -->         ")
}p.push("     </li>     ")
}p.push(" ");
for(var i=0,ii=site.list.length,realId,item;
i<ii;
i++){item=site.list[i];
realId=item._id;
p.push('     <li class="nclicks(',sscGrp,".itemoff,",realId,",",item.rank,',Y)" data-id="',item.id,'" data-index="',i,'">         <div class="lsnx">         ');
if(item.isPollingPlace){p.push('             <div class="thumb nclicks(',sscGrp,".thumb,",realId,",",item.rank,',Y)">                 <img src="https://ssl.pstatic.net/static/maps/ux2013/thumb_vote.png" width="55" height="55" alt="임시 이미지"><span class="fix"></span>             </div>         ')
}else{if(item.__clippedThumbUrl){p.push('             <div class="thumb nclicks(',sscGrp,".thumb,",realId,",",item.rank,',Y)">                 <img src="',item.__clippedThumbUrl,'" width="',item.__thumbWidth,'" height="',item.__thumbHeight,'" alt="',item.name,'" ><span class="fix"></span>             </div>         ')
}}p.push('              <div class="pin nclicks(',sscGrp,".marker,",realId,",",item.rank,',Y)">                 <img src="',item.__pinUrl,'" width="18" height="28" alt="',item._pinAlt,'">             </div>              <dl class="lsnx_det">             <dt>                 <a href="#" class="nclicks(',sscGrp,".title,",realId,",",item.rank,',Y)">',item.display,'</a>                  <span class="ico">                 ');
if(item.__hasFeatureIcon){p.push('                     <span class="ico_set">                     ');
if(item.isPollingPlace){p.push('                         <span class="spm spm_lst_vote">투표소</span>                     ')
}if(item.indoorMapInfo&&!item.indoorMapInfo.isRepresent&&item.indoorPanorama){p.push('                         <a href="#" title="실내뷰" class="spm spm_lst_road nclicks(',sscGrp,".indoorpano,",realId,",",item.rank,',Y,Y)" data-id="',item.id,'" data-panorama-type="indoor">실내뷰</a>                     ')
}else{if(item.streetPanorama){p.push('                         <a href="#" title="거리뷰" class="spm spm_lst_road nclicks(',sscGrp,".streetpano,",realId,",",item.rank,',Y,Y)" data-id="',item.id,'" data-panorama-type="street">거리뷰</a>                     ')
}}if(item.skyPanorama){p.push('                         <a href="#" title="항공뷰" class="spm spm_lst_air nclicks(',sscGrp,".skypano,",realId,",",item.rank,',Y,Y)" data-id="',item.id,'" data-panorama-type="sky">항공뷰</a>                     ')
}if(item.insidePanorama){p.push('                         <a href="#" title="뮤지엄뷰" class="spm spm_lst_museum nclicks(',sscGrp,".inside,",realId,",",item.rank,',,Y)" data-id="',item.id,'" data-panorama-type="inside">뮤지엄뷰</a>                     ')
}if(item.interiorPanorama){p.push('                         <a href="#" title="펜션뷰" class="spm spm_lst_pension nclicks(',sscGrp,".insidepano,",realId,",",item.rank,',,Y)" data-id="',item.id,'" data-panorama-type="interior">펜션뷰</a>                     ')
}p.push("                     </span>                 ")
}p.push("                  ");
if(item.couponUrl&&!(!!item.menuExist&&item.menuExist==="1"&&item.hasNaverBooking)){p.push('                     <a href="#" title="쿠폰" class="spm spm_lst_coupon nclicks(',sscGrp,'.coupon)" data-id="',item.id,'" data-url="',item.couponUrl,'">쿠폰</a>                 ')
}if(item.hasCardBenefit){p.push('                     <a href="/local/siteview.nhn?code=',item.id.replace(/^[^0-9]+/,""),'#infoTab=cardInfo" class="spm spm_lst_card nclicks(',sscGrp,".card)\" data-cards='",item.__creditCardDetail,"'>카드</a>                 ")
}if(!!item.menuExist&&item.menuExist==="1"){p.push('                     <a href="/local/siteview.nhn?code=',item.id.replace(/^[^0-9]+/,""),'#infoTab=baseInfo" title="가격정보" class="spm spm_lst_price nclicks(',sscGrp,'.menu)">가격</a>                 ')
}if(item.poiInfo.hasRoad){p.push('                     <a href="#" class="spm spm_lst_allpath nclicks(',sscGrp,'.roadall)" data-index="',i,'">전체경로</a>                 ')
}if(item.hasNaverBooking){p.push('                     <a href="',item.naverBookingUrl,'" class="spm spm_lst_booking nclicks(',sscGrp,'.reserve)" target="_blank">예약</a>                 ')
}p.push("                 </span>             </dt>              ");
if(item.roadAddress){p.push('             <dd class="addr">',item.roadAddress,"             ");
if(item.address){p.push('                 <a href="#" class="roadname" data-index="',i,'" data-status="off">지번</a>             ')
}p.push("             </dd>         ")
}else{if(item.address){p.push('             <dd class="addr">',item.address,"</dd>         ")
}}if(item.telDisplay){p.push('             <dd class="tel">             ');
if(item.isCallLink){p.push('                 <a href="#" class="free" data-index="',item.index,'">',item.telDisplay,' <span class="spm spm_lst_freetel">무료통화</span></a>             ')
}else{p.push("                 ",item.telDisplay,"             ")
}p.push("             </dd>         ")
}if(item.__displayCategory){p.push('             <dd class="cate">',item.__displayCategory,"</dd>         ")
}if(item.poiInfo.hasRoad){p.push('             <dd class="total_distance">                 총거리 <em><strong>',item.poiInfo.road.detail.wholeDistance,"</strong>km</em>             </dd>         ")
}if(item.hasBroadcastInfo){p.push('             <dd class="tv">                 <span class="spm spm_ico_tv"></span>                 ',item.broadcastInfo.name,"                 ");
if(item.broadcastInfo.menu){p.push('                 <span class="bar">|</span>                 <strong>',item.broadcastInfo.menu,"</strong>                 ")
}p.push("             </dd>         ")
}if(item.petrolInfo){p.push('             <dd class="oil">             ');
if(item.petrolInfo.gasPrice){p.push("                 <span>휘발유 <em>",item.petrolInfo.__displayGasPrice,"</em></span>             ")
}if(item.petrolInfo.hGasPrice){p.push("                 <span>고급 <em>",item.petrolInfo.__displayHGasPrice,"</em></span>             ")
}if(item.petrolInfo.dieselPrice){p.push("                 <span>경유 <em>",item.petrolInfo.__displayDieselPrice,"</em></span>             ")
}if(item.petrolInfo.lpgPrice){p.push("                 <span>LPG <em>",item.petrolInfo.__displayLPGPrice,"</em></span>             ")
}p.push("             </dd>         ")
}p.push("             </dl>          ");
if(item.bizhourInfo||item.menuInfo){p.push('             <div class="highlight">             ');
if(item.bizhourInfo){p.push('                 <a href="/local/siteview.nhn?code=',realId,'#detail" target="_blank" class="nclicks(',sscGrp,".bizhour,",realId,",",item.rank,',Y)"><strong>영업시간</strong> ',item.bizhourInfo,"</a>             ")
}if(item.menuInfo){p.push('                 <a href="/local/siteview.nhn?code=',realId,'#detail" target="_blank" class="nclicks(',sscGrp,".menu,",realId,",",item.rank,',Y)"><strong>가격</strong> ',item.menuInfo,"</a>             ")
}p.push("             </div>         ")
}p.push('              <a href="#" data-id="',item.id,'" data-bookmark-key="',item._bookmarkKey,'" class="spm spm_lst_fav nclicks(',sscGrp,'.bmkadd)">즐겨찾기에 추가</a>         </div><!-- //lsnx -->          ');
var siteType=site.type||type;
if(!directionsInfo.isDirectionsType){p.push('         <div class="sc_act lsnx_act NCR-STOP" data-m-preload="directions">             <h5 class="blind">길찾기설정/공유</h5>             <ul>                 <li class="start"><a href="#" data-ncs-acode="',sscGrp,'.from" class="spm spm_sc_start2" data-index="',i,'" data-name="',_viewType,'" data-type="',siteType,'">출발</a></li>                 <li class="end"><a href="#" data-ncs-acode="',sscGrp,'.to" class="spm spm_sc_end2" data-index="',i,'" data-name="',_viewType,'" data-type="',siteType,'">도착</a></li>                 <li class="receive _share">',strShareEl,'</li>                  <li class="detail">                     <a href="/local/siteview.nhn?code=',realId,'" target="_blank" class="spm spm_sw_detail',item._quickType," _qbtn_detail nclicks(",sscGrp,".",item.sscLog,')" data-id="',item.id,'">',item.__displayDetailName,"</a>                 </li>             </ul>         </div><!-- //lsnx_act -->         ")
}p.push("     </li>     ")
}p.push('     </ul>      <div class="paginate_wrap">         <div class="paginate loaded">             <span class="pre">이전</span>             <span class="next">다음</span>             <a href="#" title="이전" class="pre">이전</a>             <a href="#" title="다음" class="next">다음</a>         </div>     </div> ')
}p.push("")
}return p.join("")
},bus_search_empty_content:function(_d_){var p=[];
with(_d_){p.push("");
if(bus._viewType==="empty"){var emptyGuide="";
if(bus.type==="BUS_STATION"){emptyGuide="지역을"
}else{emptyGuide="지역 및 버스 유형을"
}p.push(' <h3 class="blind">검색 결과없음</h3> <div class="no_result">     <p class="nr_p1">선택하신 조건에 대한 검색 결과가 없습니다.</p>     <ul class="nrlst nrlst2">         <li>',emptyGuide," 변경하시면 검색결과를 다시 확인하실 수 있습니다.</li>     </ul> </div> ")
}p.push("")
}return p.join("")
},search_bus_content:function(_d_){var p=[];
with(_d_){p.push("");
if(bus&&bus._viewType!=="empty"){var sscGrp=bus.sscGrp;
p.push('      <h3 class="blind">',bus.__displayTabTitle,' 리스트</h3>     <ul class="',bus.__listClassName,'"> ');
if(bus.subType==="BUS_STATION"){for(var i=0,ii=bus.list.length,item;
i<ii;
i++){item=bus.list[i];
p.push('          <li class="nclicks(',sscGrp,".stitemoff,",item.id,",",item.rank,',Y)" data-id="',item.id,'" data-index=',i,' data-type="',bus.subType,'">             <div class="lbsx">                 <div class="lbsx_pin nclicks(',sscGrp,".stmarker,",item.id,",",item.rank,',Y)">                     <img src="https://ssl.pstatic.net/static/maps/ux2013/icons/pins_bus_',i+1,'.png" width="18" height="28" alt="지도내 ',i+1,'번핀">                 </div>                  <div class="lbsx_t">                     <a href="#" class="lbsx_name nclicks(',sscGrp,".sttitle,",item.id,",",item.rank,',Y)">',item.name,"</a>                 ");
if(item.arsId){p.push('                     <span class="lbsx_id">',item.arsId,"</span>                 ")
}if(item.streetPanorama){p.push('                     <a href="#" title="거리뷰" class="spm spm_ic_road nclicks(',sscGrp,'.streetpano)" data-id="',item.id,'" title="거리뷰 보기">거리뷰 보기</a>                 ')
}p.push('                 </div>                  <div class="lbsx_addr">',item.address,'</div>                  <div class="lbsx_ic">                     <strong class="blind">이 정류장을 지나는 버스유형</strong>             ');
for(var key in item.__busTypeList){p.push('                     <span class="spbi spbi_d',key,'">',item.__busTypeList[key],"</span>             ")
}p.push('                 </div>                  <a href="#" data-id="',item.id,'" data-bookmark-key="',item._bookmarkKey,'" title="즐겨찾기에 추가" class="spm spm_lst_fav nclicks(',sscGrp,'.bmkadd)">즐겨찾기에 추가</a>             </div>          ');
if(!directionsInfo.isDirectionsType){p.push('             <div class="sc_act lbsx_act NCR-STOP" data-id="',item.id,'" data-m-preload="directions">                 <h5 class="blind">길찾기설정/공유</h5>                  <ul>                     <li class="start"><a href="#" data-ncs-acode="',sscGrp,'.from" class="spm spm_sc_start" data-index="',i,'" data-name="',_viewType,'" data-type="',bus.type,'">출발</a></li>                     <li class="end"><a href="#" data-ncs-acode="',sscGrp,'.to" class="spm spm_sc_end" data-index="',i,'" data-name="',_viewType,'" data-type="',bus.type,'">도착</a></li>                     <li class="receive _share">',strShareEl,"</li>                 </ul>             </div>         ")
}p.push("         </li>     ")
}}else{if(bus.subType==="BUS_ROUTE"){var busRoute=bus.list;
for(var i=0,ii=bus.list.length,item;
i<ii;
i++){item=bus.list[i];
var refinedTayoEvent=item.refinedTayoEvent;
p.push("  ");
if(refinedTayoEvent){p.push('         <li class="tayo nclicks(',sscGrp,".nmitem,",item.id,",",item.rank,',Y)" data-id="',item.id,'" data-type="',bus.subType,'" data-index=',i,"> ")
}else{p.push('         <li class="nclicks(',sscGrp,".nmitem,",item.id,",",item.rank,',Y)" data-id="',item.id,'" data-type="',bus.subType,'" data-index=',i,"> ")
}p.push('             <div class="lbnx"> ');
if(refinedTayoEvent){p.push('                 <h4 class="tayo_bus"><span class="tayo_sp tayo_sp',refinedTayoEvent.cssType,'"></span> ',refinedTayoEvent.name,"</h4> ")
}p.push('                 <div class="lbnx_t">                     <span class="spbi spbi_d',item.type," nclicks(",sscGrp,".type,",item.id,",",item.rank,',Y)">',item.typeName,'</span>                     <a href="#" class="num nclicks(',sscGrp,".nmtitle,",item.id,",",item.rank,',Y)">',item.displayName,'</a>                     <span class="dir">',item.cityName,'</span>                 </div>                  <div class="path" title="',item.startPoint," ↔ ",item.endPoint,'">',item.startPoint," ↔ ",item.endPoint,'</div>                  <div class="status">                     <span>',item.__busDisplayDetailInfo,"</span>                 ");
if(item.liveUpdate&&item.liveUpdate!=="null"){p.push('                     <span class="rt">실시간버스<span class="blind">정보있음</span></span>                 ')
}p.push('                 </div>                  <a href="#" data-id="',item.id,'" data-bookmark-key="',item._bookmarkKey,'" title="즐겨찾기에 추가" class="spm spm_lst_fav nclicks(',sscGrp,'.bmkadd)">즐겨찾기에 추가</a>             </div><!-- //lbnx -->         </li> ')
}}}p.push('     </ul>      <div class="paginate_wrap">         <div class="paginate">             <span class="pre">이전</span>             <span class="next">다음</span>             <a href="#" title="이전" class="pre">이전</a>             <a href="#" title="다음" class="next">다음</a>         </div>     </div> ')
}p.push("")
}return p.join("")
},search_empty_content:function(_d_){var p=[];
with(_d_){p.push('<h3 class="blind">검색 결과없음</h3> <div class="no_result">  ');
if(others==null||others.length==0){p.push('     <p class="nr_p1">',__displayQuery,"에 대한 검색결과가 없습니다.</p> ")
}p.push("  ");
if(others.length>0){p.push('     <h2 class="srt_tit">         <select title="다른 중복지역명 더보기">             ');
var otherRegion=others||[];
for(var i=0,len=otherRegion.length;
i<len;
i++){var query=otherRegion[i]+" 근처 "+queryForDupRegion;
p.push('                 <option class="" data-others="',query,'">',otherRegion[i],"</option>             ")
}p.push("         </select>         ",resultQuery[1]," 검색결과가 없습니다.     </h2> ")
}p.push("  ");
if(linkQuery[0]||_isBoundarySearch){p.push('     <ul class="nrl">     ');
if(linkQuery[0]){p.push('         <li><a href="#" class="_linkQuery nclicks(',linkQuery[0].__nclicksCode,')" data-query="',linkQuery[0].queryForReSearch,'" data-rank="',linkQuery[0].queryRank,'"');
if(linkQuery[0].indoorDetail){p.push(" data-indoor-detail='",linkQuery[0].indoorDetail,"'")
}p.push(">",linkQuery[0].queryForDisplay.join(""),"</a></li>     ")
}if(_isBoundarySearch){p.push('         <li><a href="#" class="_boundary" data-query="',_additionInfo.lastQuery,"\">'현 지도에서 장소검색' 해제하고 다시 검색하기</a></li>     ")
}p.push("     </ul> ")
}p.push('      <ul class="nrlst">         <li>단어의 철자가 정확한지 확인해 보세요.</li>         <li>찾으시는 검색결과가 없다면 직접 등록해 보세요.</li>     </ul>     <div class="nra">         <a href="https://',(nhn.map.Env.getServerPhase()!=="real"?"stage.":""),'smartplace.naver.com" class="nclicks(nsr.submit)" target="_blank">내 업체 등록하기</a>         <br>         <a href="#" class="_spot_registration">신규장소 등록 요청하기 (일반사용자)</a>     </div> </div>')
}return p.join("")
},suggestion_n_relation_result:function(_d_){var p=[];
with(_d_){p.push("");
if(__hasCorrectWord){p.push('     <div class="suggestion">         <h5 class="spm spm_lst_sugg">제안</h5>         <p><strong>\'',correctWords[0],'\'</strong>으로 검색하시겠습니까?</p>         <p><a href="#" class="nclicks(sug.list)" data-query="',correctWords[0],"\">'",correctWords[0],"' 검색결과 보기</a></p>     </div> ")
}if(__hasRelationWord){p.push('     <div class="inc_keywords">         <h5 class="spm spm_lst_inc">연관검색어</h5>         <ul class="inck_lst">     ');
for(var i=0,ii=relationWords.length,rword;
i<ii;
i++){rword=relationWords[i];
p.push('             <li><a href="#" data-query="',rword,'" class="nclicks(rel.list)" data-index="',(i+1),'">',nhn.map.Util.ellipsis(rword,35,"..."),"</a>");
if(i<ii-1){p.push('<span class="comma">,</span>')
}p.push("</li>     ")
}p.push("         </ul>     ");
if(__relationWordMore){p.push('         <a href="#" class="inck_open _toggle_btn nclicks(rel.unfold)">더보기</a>         <a href="#" class="inck_close _toggle_btn nclicks(rel.fold)">접기</a>     ')
}p.push("     </div> ")
}p.push("")
}return p.join("")
},search_app_timeout:function(_d_){var p=[];
with(_d_){p.push('<div class="srt_alert">     <p class="info">일시적으로 검색결과 중 일부를 불러오지 못했습니다. 잠시 후 다시 검색해 주세요. <a href="#" class="timeout_research" data-query="',inputQuery,'">재검색하기</a></p> </div>')
}return p.join("")
},user_connect_location:function(_d_){var p=[];
with(_d_){p.push('<div class="panel_main_top">     <h1 class="pmt_tit">         <span class="blind">접속위치</span><a href="#" class="nclicks(lwc.gohere)">',address,'</a>     </h1>     <a href="http://fdback.ngine.naver.com" class="pmt_modify nclicks(lwc.modhere)">접속위치수정</a>      <div class="ly_ca" style="display:none;z-index: 10">         <p>실제 접속 지역과 일치하지 않은 경우,<br><em>위치 정보를 수정</em>할 수 있습니다.</p>         <div class="spm spm_arrow_up"></div>         <div class="opac_line"></div>     </div> </div>')
}return p.join("")
},map_home_panel:function(_d_){var p=[];
with(_d_){p.push('<div class="sr_main">     <div class="sr_main_inner">         <div class="home_bookmark_list_view_panel">             <div class="placeholder" style="height:138px">             </div>         </div>          <!-- 공지사항 -->         <div class="sr_notice">             <h3 class="spm spm_sr_notice">공지사항</h3>              <ul></ul>              <a href="https://blog.naver.com/naver_map" target="_blank" class="more nclicks(lnt.more)"><span class="blind">공지사항</span>더보기</a>         </div>         <!-- //공지사항 -->          <!-- 배너 -->         <div class="sr_banner">             <h5 class="blind">배너</h5>             <a href="',banner.link,'" target="',banner.target,'" class="nclicks(',banner.nclickCode,')"><img src="',banner.imageUrl,'" width="',banner.width,'" height="',banner.height,'" alt="',banner.title,'"></a>         </div>         <!-- 배너 -->     </div> </div>')
}return p.join("")
},map_home_footer:function(_d_){var p=[];
with(_d_){p.push('<div class="panel_footer">     <img src="https://ssl.pstatic.net/static/maps/img/banner_submit.png" height="37" alt="네이버 지도에 내 업체를 등록해 보세요.">     <a href="https://',(nhn.map.Env.getServerPhase()!=="real"?"stage.":""),'smartplace.naver.com" class="panel_footer_txt nclicks(nsr.submit)">업체 정보 등록하기</a> </div>')
}return p.join("")
},home_notice_loading:function(_d_){var p=[];
with(_d_){p.push('<li>     <p class="notice_loading"><span class="loading"></span> 불러오는 중</p> </li>')
}return p.join("")
},home_notice_list:function(_d_){var p=[];
with(_d_){p.push("");
for(var i=0,len=result.length;
i<len;
i++){p.push('     <li>         <a href="',result[i].readURL,'" target="_blank" class="_locsearch_notice_item nclicks(lnt.list)">',result[i].title,"</a>     </li> ")
}p.push("")
}return p.join("")
},home_notice_error:function(_d_){var p=[];
with(_d_){p.push('<li>     <p class="notice_failed">일시적인 오류로 공지사항을 불러오지 못했습니다.<br />잠시 후 다시 시도해 주세요.<br /><a href="#" class="_locsearch_notice_refresh nclicks(not.refresh)">새로 고침</a></p> </li>')
}return p.join("")
}});
iron.ns("nhn.map.search").SearchMarker=iron.Class({initialize:function(){},create:function(e,c,a,d){var b=null;
if(e.poiInfo&&e.poiInfo.hasRoad){b=this._createPolyMarker(e,c,a,d)
}else{b=this._createNormalMarker(e,c,a,d)
}return b
},_createPolyMarker:function(f,c,a,e){var d=this._getIcon(f.type,c,a,"U");
f.smallIcon=this._getSmallIcon(f.type,c,"U");
f.point=f.point.toLatLng();
var b=new nhn.map.service.PolyMarker(d,f);
b.attach(e);
this.$map().addMarker(b);
return b
},_createNormalMarker:function(a,d,g,f){var h,e;
if(a.poiInfo&&a.poiInfo.hasPolygon){h=this._getIcon(a.type,d,g,"P");
e=this._getSmallIcon(a.type,d,"P")
}else{if(a.posExact*1){if(a.type==="ID"&&a.stationClass==="SUBWAY_STATION"){h=this._getIcon("PERI_SUBWAY",d,g);
e=this._getSmallIcon("PERI_SUBWAY",d)
}else{h=this._getIcon(a.type,d,g);
e=this._getSmallIcon(a.type,d)
}}else{h=this._getIcon(a.type,d,g,"q");
e=this._getSmallIcon(a.type,d)
}}a.smallIcon=e;
var b={};
var i=f.click.bind(this);
if(a.type==="AD"){b.click=function(){i();
nhn.map.service.ADCR.log({x:a.x2,p:"marker"})
};
f=$.extend({},f,b)
}var c=new nhn.map.service.Marker(h,a);
c.attach(f);
this.$map().addMarker(c);
return c
},remove:function(a){this.$map().removeMarker(a)
},_getIcon:function(d,c,a,e){var b=d;
if(d=="SITE"||d=="BUS"||d=="AD"){b+="_"+c
}if(e){b+="_"+e
}return new nhn.map.service.MarkerSpriteIcon(b,a)
},_getSmallIcon:function(c,b,d){var a=c;
if(c=="SITE"||c=="BUS"||c=="AD"){a+="_"+b
}if(d){a+="_"+d
}return new nhn.map.service.SmallIcon(a)
}});
(function(){var a={address:{id:"search_address",subTemplates:{suggestion_n_relation_result:{id:"suggestion_n_relation_result"},search_tab:{id:"search_tab"},search_address_tab:{id:"search_address_tab"},search_address_sortbox:{id:"search_address_sortbox"},search_address_content:{id:"search_address_content"}}},site:{id:"search_site",subTemplates:{suggestion_n_relation_result:{id:"suggestion_n_relation_result"},search_tab:{id:"search_tab"},search_site_tab:{id:"search_site_tab"},search_site_sortbox:{id:"search_site_sortbox"},search_site_content:{id:"search_site_content"}}},bus:{id:"search_bus",subTemplates:{suggestion_n_relation_result:{id:"suggestion_n_relation_result"},search_tab:{id:"search_tab"},search_bus_sortbox:{id:"search_bus_sortbox"},search_bus_tab:{id:"search_bus_tab"},search_bus_content:{id:"search_bus_content"},bus_search_empty_content:{id:"bus_search_empty_content"}}},bus_number:{id:"search_bus_number",subTemplates:{suggestion_n_relation_result:{id:"suggestion_n_relation_result"},search_tab:{id:"search_tab"},search_bus_sortbox:{id:"search_bus_sortbox"},search_bus_tab:{id:"search_bus_tab"},search_bus_number_content:{id:"search_bus_number_content"}}},empty:{id:"search_empty",subTemplates:{suggestion_n_relation_result:{id:"suggestion_n_relation_result"},search_empty_tab:{id:"search_empty_tab"},search_empty_content:{id:"search_empty_content"}}}};
iron.ns("nhn.map.search").SearchTemplate=iron.Class({initialize:function(){this._templates={}
},getHtml:function(b){var c=b._viewType,d;
if(!this._templates[c]||c=="id"){this._templates[c]=nhn.mapservice.TemplateRepos.get(a[c])
}d=this._templates[c].process(b);
return d
}})
}());
iron.ns("nhn.map.search").NoticeView=iron.Class({initialize:function(){this._templates={loading:nhn.mapservice.TemplateRepos.get("home_notice_loading"),error:nhn.mapservice.TemplateRepos.get("home_notice_error"),list:nhn.mapservice.TemplateRepos.get("home_notice_list")}
},_setDrawPanel:function(a){this._panel=a
},_drawLoading:function(){this._panel.html(this._templates.loading.process({}))
},_drawError:function(){this._panel.html(this._templates.error.process({}));
this._panel.off().on("click","a._locsearch_notice_refresh",this._refresh.bind(this))
},_drawList:function(a){this._panel.html(this._templates.list.process(a))
},_refresh:function(){this._drawLoading();
this.$service().refresh()
},_listenService:function(){this.$service().attach({response:this._onResponse.bind(this),error:this._onError.bind(this),loading:this._onLoading.bind(this)})
},_onResponse:function(b){var a=b.container;
this._setDrawPanel(a);
this._drawList(b.response)
},_onError:function(b){var a=b.container;
this._setDrawPanel(a);
this._drawError()
},_onLoading:function(b){var a=b.container;
this._setDrawPanel(a);
this._drawLoading()
}});
(function(){iron.ns("nhn.map.search").AbstractPanelView=iron.Class(iron.KVO,{LIMIT_COUNT:310,ITEM_PER_PAGE:10,PAGE_PER_PAGE_LIST:5,LIMIT_CONTAINER_SIZE:38,_result:null,_prevView:null,_boundRedraw:null,_panelHeader:null,_panelContent:null,_allOthers:null,_siteOthers:null,_areaFilter:null,_regionOthers:null,_highlightIndex:null,_highlightClass:null,_relationBox:null,_moreView:null,_narrowModeBox:null,_wideModeBox:null,_isRelationBoxOpenFlag:false,_isRelationShortList:false,initialize:function(){this.UID=iron.guid();
this._doc=nhn.map.DOMCache.getDocument();
iron.KVO.apply(this);
this._boundRedraw=this.redraw.bind(this)
},draw:function(c){this._beforeDraw(c);
this._onDraw();
this._afterDraw()
},redraw:function(){this._saveHighlight();
this._beforeDraw();
this._onDraw();
this._afterDraw();
this._loadHighlight()
},_setResult:function(c){this._result=c
},_getResult:function(){return this._result
},setPrevView:function(c){this._prevView=c
},_getPrevView:function(){return this._prevView
},_getPanelContent:function(){if(!this._panelContent){this._panelContent=this.$ResultPanel().getContentElement()
}return this._panelContent
},_getResultTop:function(){return $(".search_result_top",this._getPanelContent())
},_getResultBody:function(){return $(".search_result",this._getPanelContent())
},_getResultList:function(){return this._getResultBody().find("> ul > li")
},_getResultAdList:function(){return this._getResultBody().find("> ul > li.li_ad")
},_getMenuState:function(){return this.$Search().getMenuState()
},_beforeDraw:function(c){if(c){this._setResult(c)
}this.reset()
},_onDraw:function(){this.$ResultPanel().setContentHtml(this._getPanelHtml(),true,true)
},_getPanelHtml:function(){var c=this._getResult();
this._setPanelInfo(c);
if(this.$social){var e=this._getSocialHandler(),d=this._getSSCGroup&&this._getSSCGroup(c);
c.strShareEl=e.getSocialMarkupStr({navi:{display:"on"}});
d&&e.setAreaCode(d)
}return this.$SearchTemplate().getHtml(c)
},_initSocialPlugin:function(d){var c=this._getSocialHandler();
c&&c.drawTo(d,{navi:{display:"on"}})
},_getExportItem:function(f){if(!f||!f.item){return null
}var d=this.$Search(),e=$.extend(true,{},f.item),c;
e.id=e.id.match(/\d+/)[0];
if(e.MarkerType&&e.MarkerType.indexOf("BUS")===0){c=e.address.split(" ");
e.stationAddress={"do":c[0],gu:c[1],dong:c.splice(2,c.length-1).join(" ")};
e.arsID=e.arsId?e.arsId.replace("-",""):null;
e.stationID=e.id;
if(e.stationClass==="1"){e.MarkerType="BUS_STATION"
}delete e.id
}e.phone=e.tel;
return e
},_setPanelInfo:function(c){c._isWide=false
},_afterDraw:function(){var d=this.$ResultPanel(),c=this._getResult();
if(!c._isBoundarySearch){d.isFolded()&&d.unfold()
}this._setKeywordElementList();
this._bindTabEvent();
this._bindDefaultEvent();
this._bindAdultAuthEvent();
this._bindRelationBoxEvent();
this._checkQuickBtn();
this._checkHighlight()
},_isDirectionsType:function(){var c=this._getResult();
return c.directionsInfo&&c.directionsInfo.isDirectionsType
},_getDirectionsInfo:function(){return this._getResult().directionsInfo
},_clearHeader:function(){this.$ResultPanel().clearHeader();
this.$ResultPanel().setPanelClassByMenu(this._getMenuState())
},refocusTab:function(d){if(!d){return
}var c=$('.search_result_top .lst_sorting ul li a[data-type="'+d+'"]',this._getPanelContent());
if(c.length){c.focus();
this._doc.off("keydown."+this.UID).on("keydown."+this.UID,this._processTabFocus.bind(this))
}},_processTabFocus:function(d){var c=d.shiftKey,f=d.which==9;
if(f&&!c){this._focusToPanel()
}},_focusToPanel:function(){var c=$(".search_result_sort a, .search_result a",this._getPanelContent())[0];
if(c){c.focus()
}},_changeLayout:function(){},_bindTabEvent:function(){this._getResultTop().on("click.panel",".lst_sorting ul li a",this._onClickTab.bind(this)).on("blur.panel",".lst_sorting ul li a",this._onBlurTab.bind(this)).on("click.panel",".lst_sorting a.lst_sorting_del",this._onClickReset.bind(this))
},_onClickReset:function(c){c.preventDefault();
nhn.map.LogClick({event:c.originalEvent,element:c.target,acode:"tab.reset"});
this.$Search().resetToHome()
},_onClickTab:function(g){g.preventDefault();
var f=$(g.currentTarget),d=f.data("type"),c,h;
if(d==this._getResult().type){return
}c=f.data("name");
h=f.data("rank");
this._setTabBlindText(d);
this.set("_"+c+"PanelView",{name:c,key:"tab",value:{type:d,rank:h}})
},_setTabBlindText:function(d){var c=this._getResultTop().find(".lst_sorting h3.blind"),e="장소";
if(d.indexOf("ADDRESS")>-1){e="주소"
}else{if(d.indexOf("SITE")>-1){e="장소"
}else{if(d.indexOf("BUS")>-1){e="버스"
}}}c.text(e)
},_onBlurTab:function(){this._doc.off("keydown."+this.UID)
},_bindDefaultEvent:function(){var d=this._getResultList(),c=d.find("div.lanx_t > a");
if(!d.length){return
}d.on("mouseenter.panel",this._onMouseEnterItem.bind(this)).on("mouseleave.panel",this._onMouseLeaveItem.bind(this));
c.on("mouseenter.panel",this._onMouseEnterAddrItem.bind(this)).on("mouseleave.panel",this._onMouseLeaveAddrItem.bind(this))
},_bindAdultAuthEvent:function(){var c=this._getResultTop().find("._adult_alert");
if(c.length>0){c.on("click.panel","a",this._onClickAdultBtn.bind(this))
}},_bindRelationBoxEvent:function(){this._getResultTop().on("click.panel",".inc_keywords a.inck_open, a.inck_close",b.bind(this)).on("click.panel",".suggestion a, .inc_keywords ul.inck_lst a",a.bind(this));
this._getResultTop().on("click.panel","a.timeout_research",a.bind(this))
},_setKeywordElementList:function(){var c=this._getResultTop(),d=this._getResultBody();
this._relationBox=c.find("div.inc_keywords");
this._suggestionBox=c.find("div.suggestion");
this._researchLink=d.find("a.timeout_research")
},_isRelationBoxOpen:function(){return this._isRelationBoxOpenFlag
},_openRelationBox:function(){this._relationBox.addClass("inc_keywords_open");
this._isRelationBoxOpenFlag=true
},_closeRelationBox:function(){this._relationBox.removeClass("inc_keywords_open");
this._isRelationBoxOpenFlag=false
},_adjustRelationArea:function(){var c=this._relationBox;
this._toggleBtn=$("a.inck_open",this._getPanelContent());
if(c.height()>this.LIMIT_CONTAINER_SIZE){this._toggleBtn.show();
this._isRelationShortList=false
}else{this._toggleBtn.hide();
this._isRelationShortList=true
}c.removeClass("inc_keywords_open")
},_onClickAdultBtn:function(f){f.preventDefault();
var d=$(f.currentTarget),c=this.$Search();
if(d.hasClass("_auth_adult")){c.adultAuth()
}else{if(d.hasClass("_no_adult")){c.adultAuthExclude()
}else{c.adultAuthRestore()
}}},_onMouseEnterItem:function(f){var c=this._panelViewType.toUpperCase(),d=$(f.currentTarget);
if(c==="ADDRESS"){return
}this._registerSelectedItem(d)
},_onMouseLeaveItem:function(f){var c=this._panelViewType.toUpperCase(),d=$(f.currentTarget);
if(c==="ADDRESS"){return
}this._unregisterSelectedItem(d)
},_onMouseEnterAddrItem:function(f){var c=this._panelViewType.toUpperCase(),d=$(f.currentTarget).closest("li");
if(c!=="ADDRESS"){return
}this._registerSelectedItem(d)
},_onMouseLeaveAddrItem:function(f){var c=this._panelViewType.toUpperCase(),d=$(f.currentTarget).closest("li");
if(c!=="ADDRESS"){return
}this._unregisterSelectedItem(d)
},_registerSelectedItem:function(f){var c=this._panelViewType,d=c.toUpperCase(),e=f;
if(e.hasClass("_new_db")||!c){return
}if(e.hasClass("li_ad")){d="AD"
}this._itemOver(e);
this.set("_"+c+"PanelView",{name:c,key:"mouseover",value:{type:d,id:e.data("id"),index:e.data("index")}})
},_unregisterSelectedItem:function(f){var e=f,c=this._panelViewType,d;
if(e.hasClass("_new_db")||!c){return
}d=c.toUpperCase();
if(e.hasClass("li_ad")){d="AD"
}this._itemOut(e);
this.set("_"+c+"PanelView",{name:c,key:"mouseout",value:{type:d,id:e.data("id"),index:e.data("index")}})
},_itemOver:function(g){var e=this._getDirectionsInfo(),c,f,d;
if(g.hasClass("on")){return
}c=this._getPinImage(g);
if(this._isDirectionsType()){this._backupPinImage(g);
f="https://ssl.pstatic.net/static/maps/ux2013/icons/";
if(e.spotType==="departure"){f+="pins_fw_sd.png";
d="출발"
}else{if(e.spotType==="destination"){f+="pins_fw_ed.png";
d="도착"
}else{f+="pins_fw_vd.png";
d="경유"
}}c.attr({src:f,width:24,height:35,alt:d}).closest("div").addClass("pin_fw")
}else{if(c.length){f=c.attr("src");
if(f.indexOf("_over.png")===-1){f=f.replace(".png","_over.png");
c.attr("src",f)
}}}},_itemOut:function(e){var c=this._getPinImage(e),d;
if(e.hasClass("on")){return
}if(this._isDirectionsType()){this._restorePinImage(e)
}else{if(c.length){d=c.attr("src");
if(d.indexOf("_over.png")!==-1){d=d.replace("_over.png",".png");
c.attr("src",d)
}}}},_onClickStartBtn:function(g){g.preventDefault();
g.stopPropagation();
var d=$(g.currentTarget),f;
if(d.parent().hasClass("selected")){return
}f=d.data("ncs-acode");
f&&nhn.map.LogClick({event:g.originalEvent,element:g.target,acode:f});
if($(g.target).closest("._selected").hasClass("li_ad")){var c=this._getResult().site.advertiseList[d.data("index")];
nhn.map.service.ADCR.log({x:c.x2,p:"to_start"})
}this.set("_"+d.data("name")+"PanelView",{name:d.data("name"),key:"quick",value:{target:"departure",index:d.data("index"),type:d.data("type")}})
},_onClickEndBtn:function(g){g.preventDefault();
g.stopPropagation();
var d=$(g.currentTarget),f;
if(d.parent().hasClass("selected")){return
}f=d.data("ncs-acode");
f&&nhn.map.LogClick({event:g.originalEvent,element:g.target,acode:f});
if($(g.target).closest("._selected").hasClass("li_ad")){var c=this._getResult().site.advertiseList[d.data("index")];
nhn.map.service.ADCR.log({x:c.x2,p:"to_dest"})
}this.set("_"+d.data("name")+"PanelView",{name:d.data("name"),key:"quick",value:{target:"destination",index:d.data("index"),type:d.data("type")}})
},highlightItem:function(f){var c=f.index,e=f._viewType,g=f.MarkerType.toLowerCase(),d=this._getElementByIndex(c,e,g);
this._highlight(d);
this._initSocialPlugin(d);
if(this._getMenuState()=="ROUTE"&&this._panelViewType){this._addDirections(c,this._panelViewType)
}},unhighlightItem:function(f){var c=f.index,e=f._viewType,g=f.MarkerType.toLowerCase(),d=this._getElementByIndex(c,e,g);
this._unhighlight(d)
},blurItem:function(){this._blur()
},_getElementByIndex:function(e,g,j){var d=this._getResultList();
if(g==="site"){if(j!=="ad"){var h=0;
for(var f=0,c=d.length;
f<c;
++f){if($(d[f]).hasClass("li_ad")){++h
}}e=(1*e+h)+""
}}return d[e]
},_getElementById:function(e){var d=this._getResultList();
var c=d.filter(function(){return $(this).data("id")==e
});
return c
},_blur:function(){var c=this._getCurrentHighlightElem();
if(c.size()>0){this._unhighlight(c)
}},_getCurrentHighlightElem:function(){return this._getResultBody().find("> ul > li.on")
},_highlight:function(d){var e=$(d),g=this.$ResultPanel(),c,f;
if(e.hasClass("on")){return
}this.blurItem();
e.addClass("on");
c=this._getPinImage(e);
if(this._isDirectionsType()){g.selectItem(d,true);
this._changePinForDirections(e);
g.scrollToTop()
}else{if(c.length){g.selectItem(d);
f=c.attr("src");
if(f.indexOf("_over.png")===-1){f=f.replace(".png","_over.png");
c.attr("src",f)
}}}},_unhighlight:function(d){var e=$(d),c,f;
if(!e.hasClass("on")){return
}this.$ResultPanel().unselectItem();
e.removeClass("on");
c=this._getPinImage(e);
if(this._isDirectionsType()){this._restorePinImage(e)
}else{if(c.length){f=c.attr("src");
if(f.indexOf("_over.png")!==-1){f=f.replace("_over.png",".png");
c.attr("src",f)
}}}},_changePinForDirections:function(g){var e=this._getDirectionsInfo(),c,f,d;
this._restoreAllPinImage();
this._backupPinImage(g);
c=this._getPinImage(g);
if(e.spotType==="departure"){f="https://ssl.pstatic.net/static/maps/ux2013/icons/pins_fw_s.png";
d="출발"
}else{if(e.spotType==="destination"){f="https://ssl.pstatic.net/static/maps/ux2013/icons/pins_fw_e.png";
d="도착"
}else{f="https://ssl.pstatic.net/static/maps/ux2013/icons/pins_fw_v.png";
d="경유"
}}c.attr({src:f,width:24,height:35,alt:d}).closest("div").addClass("pin_fw")
},_getPinImage:function(c){return $(c).find("div.pin > img")
},_backupPinImage:function(d){var c=this._getPinImage(d);
if(c.data("origin-pin-info")){return
}c.data("origin-pin-info",[c.attr("src"),c.attr("width"),c.attr("height"),c.attr("alt")].join(","))
},_restorePinImage:function(e){var c=this._getPinImage(e),d=c.data("origin-pin-info");
if(!d){return
}d=d.split(",");
c.attr({src:d[0],width:d[1],height:d[2],alt:d[3]}).closest("div").removeClass("pin_fw")
},_restoreAllPinImage:function(){var c=this;
this._getResultList().each(function(d,e){c._restorePinImage(e)
})
},_saveHighlight:function(){var c=$(this._getPanelContent()),d=this._getResultBody().find("> ul > li.on");
d=(!d.length)?c.find(".search_result div > div.region_on"):d;
if(!d.length){return
}this._highlightIndex=d.data("index")||0;
this._highlightClass=d.parents("div").attr("class").split(" ")[0]
},_loadHighlight:function(){if(!this._highlightClass){return
}var c=$(this._getPanelContent()),d=(this._highlightClass=="sr_region")?c.find(".search_result div.sr_region > div"):c.find(".search_result div."+this._highlightClass+" > ul > li");
this._highlight(d[this._highlightIndex]);
this._highlightIndex=null;
this._highlightClass=null
},_isSearchInDirections:function(){var c=this._getResult(),d=false;
if(c._additionInfo&&c._additionInfo.searchBoxKey!=null){d=true
}return d
},_isFirstSearch:function(){return this._getResult()._isFirstSearch
},_highlightFirst:function(){this._selectList(this._getResultList()[0])
},_selectList:function(){throw new Error("_selectList method should be implements!")
},checkHighlightItem:function(){var f=this.$Search().getCurrentDirectionsSpotInfo(),e=f?(f.id||f._id):null;
if(!e){this._blur();
return
}var c=this._getCurrentHighlightElem();
var g=c.size()>0;
if(g&&c.data("id")==e){return
}this._blur();
var d=this._getElementById(e);
if(d.size()>0){this._selectList(d)
}},_addDirections:function(f,e){var c=this._getResult(),g=c._additionInfo.searchBoxKey,d=c._additionInfo.autoSelect;
if(g!=null&&d){this.set("_"+e+"PanelView",{name:e,key:"directions",value:{key:g,index:f,type:c.type}})
}},_checkQuickBtn:function(){var c=this._getResult()._viewType;
this.set("_"+c+"PanelView",{name:c,key:"quickBtn",value:{}})
},_checkHighlight:function(){var c=this._getResult();
if(!c._additionInfo){return
}var d=c._additionInfo.searchBoxKey;
if(d!=null){var e=null;
e=(d>1)||"via";
e=(d===0)?"start":"end"
}},resetQuickBtn:function(){var c=this._getResultList();
if(!c.length){return
}c.removeClass("on")
},highlightQuickBtn:function(c,d){var e=this._getResultList();
if(!e.length||!e[d]){return
}this._highlight(e[d])
},_paginate:function(f){var c=this._getResult(),e=c.totalCount||c[f].totalCount;
if(e===0){return
}var h=$(".search_result div.paginate_wrap div.paginate",this._getPanelContent()),g={totalNum:e,thisPage:c[f].page},d=new nhn.Pagination(h[0],{nItem:(g.totalNum>this.LIMIT_COUNT)?this.LIMIT_COUNT:g.totalNum,nItemPerPage:this.ITEM_PER_PAGE,nPagePerPageList:this.PAGE_PER_PAGE_LIST,sMoveUnit:"pagelist",elPrevPageLinkOn:$("a.pre",h)[0],elNextPageLinkOn:$("a.next",h)[0]});
d.attach("beforeMove",function(k){var j=this._getNClickSscGroup(f,c);
var i=$.event.fix(k.weEvent.$value());
this._sendClickLog(i,j+".page")
}.bind(this));
d.movePageTo(parseInt(g.thisPage,10));
d.detachAll("move");
d.attach({move:function(i){this.set("_"+f+"PanelView",{name:f,key:"page",value:{page:i.nPage}})
}.bind(this)})
},_getNClickSscGroup:function(e,c){var d="";
if(e=="address"&&c.address){d=(c.address.subType=="ADDRESS_ROAD")?"adn":"ado"
}else{if(e=="site"&&c.site){d=(c.address)?"pla":"plc"
}else{if(e=="review"&&c.review){d="rev"
}else{if(e=="bus"&&c.bus){d=(c.bus.subType=="BUS_ROUTE")?"bnm":"bst"
}}}}return d
},_checkFooter:function(){},reset:function(){this.clear()
},clear:function(){this._allOthers=null;
this._siteOthers=null;
this._areaFilter=null;
this._regionOthers=null;
this._clearHeader();
this.$ResultPanel().clearContent();
$(this._getPanelContent()).undelegate(".panel").off(".panel");
this._doc.off(".panel").off("."+this.UID);
this._clearSsccode();
this.unbindAllEvent()
},updateUiOfBookmarkStuds:function(c){var d=$(this._getPanelContent()).find("a.spm_lst_fav");
d.each(function(f,g){var h=$(g).data("bookmark-key"),e=c.some(function(i){return i.key===h
});
$(g).toggleClass("on",e)
})
},_setSscode:function(d){var c=this._getResult(),f=c._additionInfo.lastQuery,e=c.pageId,g=c.sessionId;
this.$ResultPanel().addPanelClass("_ssc_nclick");
nhn.map.LogClick.setSscCode(d,f,e,g);
nhn.map.LogClick.setRcode(c.rcode)
},_clearSsccode:function(){this.$ResultPanel().removePanelClass("_ssc_nclick");
nhn.map.LogClick.setSscCode(null,null,null,null);
nhn.map.LogClick.setRcode(null)
},_sendClickLog:function(d,c,e){nhn.map.LogClick({element:d.target,event:d,acode:c,forceSsc:true,rank:e||""})
},_isClickedItem:function(d){var c=$(d.target);
if(c.is(".spm_lst_price, .spm_lst_coupon, spm_lst_card, .spm_lst_road, .spm_ic_road, .spm_lst_homepage, .spm_lst_air, .spm_lst_museum, .spm_lst_pension, .spm_lst_fav, .free, .spm_lst_freetel, .review, a._qbtn_detail, ._famous, .sbtn, .btn_diff_addr, .spm_lst_allpath, .df_search, .spm_sc_start, .spm_sc_end, .spm_sc_start2, .spm_sc_end2, ._bizhour, ._menu, ._spi_btn_release, li.receive a, .spi_close, ._spi_lnk_url")){return false
}return true
},hideBoundaryReSearchLink:function(){var c=$(this.$ResultPanel().getPanelElement()),d=c.find("p.curr a._boundary");
d.hide()
},showBoundaryReSearchLink:function(){var c=$(this.$ResultPanel().getPanelElement()),d=c.find("p.curr a._boundary");
d.show()
},unbindAllEvent:function(){$(this._getPanelContent()).undelegate(".panel").off(".panel");
this._doc.off(".panel").off("."+this.UID);
this._getResultTop().off(".panel");
this._getResultBody().off(".panel");
this._getResultList().off(".panel")
},_getSocialHandler:function(c){var d=this._socialHandler;
if(this.$social&&!d){d=this.$social().createHandler({acode:c,controller:this});
this._socialHandler=d
}return d
},getSocialExportItem:function(){var c=this._getExportItem(this.$Search().getSelectedItem());
return c
}});
function b(d){d.preventDefault();
var c=this._relationBox.hasClass("inc_keywords_open");
if(!c){this._openRelationBox()
}else{this._closeRelationBox()
}}function a(g){g.preventDefault();
var f=$(g.currentTarget),c=this._getResult()._additionInfo.searchBoxKey,d=f.attr("data-query");
if(this._getMenuState()==="ROUTE"){this.$Search().searchSuggestionInDirections(c,d)
}else{this.$Search().queryOutdoor(d)
}}}());
(function(){var d=iron.ns("nhn.map.search"),a=d.AbstractPanelView,f=iron.ns("nhn.map.recent").Const.TYPE_ALL;
d.HomePanelView=iron.Class(a,{initialize:function(){a.apply(this,arguments);
this._clientInfo=nhn.map.Env.getVar("client");
this._initTemplate()
},_initTemplate:function(){this._tpl=nhn.mapservice.TemplateRepos.get("map_home_panel");
this._headerTpl=nhn.mapservice.TemplateRepos.get("user_connect_location");
this._footerTpl=nhn.mapservice.TemplateRepos.get("map_home_footer")
},_getPanelHtml:function(){var g=this._getResult();
this._setPanelInfo(g);
return this._tpl.process(g)
},_afterDraw:function(){a.prototype._afterDraw.apply(this);
var g=this._getResult()._viewType;
if(g=="home_location"||g==="id"||g==="home_id"){this._setHeader();
this._setFooter();
this._setDOM();
this._bindSearchEvent();
this._setHomeBookmark();
this._setNotice();
this._renderWidget();
this.$ResultPanel().refreshScrollBar();
this._checkIpTargeting()
}this._clearSsccode();
nhn.map.LogPV("locationmain")
},_setHeader:function(){var g;
if(!this._clientInfo.address){return
}g=this._headerTpl.process({address:this._clientInfo.address});
this.$ResultPanel().setHeader(g);
this.$ResultPanel().setPanelClassByMenu("MAIN")
},_checkIpTargeting:function(){if(this._ipTargetingNotify){return
}var g=nhn.map.Env.getUrlParam().ipTargeting==="D",h;
if(g){h=this._locationTooltip;
this._ipTargetingNotify=true;
h.fadeIn(function(){window.setTimeout(function(){h.fadeOut()
},5000)
})
}},_setFooter:function(){this._footerEl=this._footerTpl.process();
this.$ResultPanel().setMainFooter(this._footerEl)
},_setDOM:function(){var g=this.$ResultPanel(),h=$(g.getPanelElement()).find("div.sr_main");
this._el=h;
this._topEl=$(g.getHeaderElement());
this._locationTooltip=this._topEl.find(".ly_ca");
this._homeBookmarkListPanel=h.find(".home_bookmark_list_view_panel")
},_setHomeBookmark:function(){this.$BookmarkService().renderHomeBookmarkListTo(this._homeBookmarkListPanel)
},_setNotice:function(){this.$Notice().renderTo(this._el.find("div.sr_notice ul"))
},_renderWidget:function(){this.$widget().renderAfter(this._el.find(".home_bookmark_list_view_panel"),{recentGroup:f})
},_bindSearchEvent:function(){this._topEl.off(".panel").on("click.panel","a.pmt_modify",e.bind(this)).on("hover.panel","a.pmt_modify",b.bind(this)).on("click.panel",".pmt_tit a",c.bind(this))
},unbindAllEvent:function(){a.prototype.unbindAllEvent.apply(this);
this._topEl&&this._topEl.off(".panel");
this._el&&this._el.off(".panel")
}});
function b(h){var g=this._locationTooltip;
if(h.type==="mouseenter"){g.show()
}else{if(h.type==="mouseleave"){g.hide()
}}}function c(i){i.preventDefault();
var k=this._clientInfo,j=new nhn.mapcore.LatLng(k.y,k.x),h=this.$map().getLevel(),g=11;
if(h<=g){this.$map().panMapByPoint(j)
}else{this.$map().setCenter(j,g)
}}function e(i){i.preventDefault();
var h=$(i.currentTarget),g=window.open(h.attr("href"),"_blank","width=448, height=448, location=no, resize=no");
g.focus();
g=null
}}());
(function(){var g=iron.ns("nhn.map.search"),e=g.AbstractPanelView;
g.AddressPanelView=iron.Class(e,{initialize:function(){e.apply(this);
this._panelViewType="address"
},_afterDraw:function(){e.prototype._afterDraw.apply(this);
var l=this._getResult(),k="oldadd",j="search_";
this._bindAddress();
this._paginate("address");
this._setSscode("address");
if(l.address.subType==="ADDRESS_ROAD"){k="newadd"
}if(this._isSearchInDirections()){if(this._isFirstSearch()){this._highlightFirst()
}else{this.checkHighlightItem()
}j="route_";
k="address"
}else{if(l.__fromRestorer&&l.address.list.length===1){this._highlightFirst();
this._getResult().__fromRestorer=false
}this._showAddressPin(0)
}k&&nhn.map.LogPV(j+k)
},_selectList:function(m){var l=$(m),k=l.data("index"),n=l.data("id"),j=this._getResult().address.list[k];
if(typeof k=="undefined"){return
}this._highlight(m);
this._showAddressPin(k);
this.set("_addressPanelView",{name:"address",key:"list",value:{type:"ADDRESS",id:n,index:k}});
if(this._getMenuState()=="ROUTE"){this._addDirections(k,"address")
}if(j._polygonParam){this.$SearchPolygonService().focusPolygon(j._polygonParam)
}this._initSocialPlugin(m)
},reset:function(){this._siteInAddrClicked=false;
e.prototype.reset.apply(this)
},_bindAddress:function(){this._getResultTop().on("click.panel","ul.srt_sort_addr > li a",i.bind(this));
var j=this._getResultList();
j.on("click.panel",h.bind(this)).on("click.panel","a.spm_lst_fav",a.bind(this)).on("click.panel","a.place",c.bind(this)).on("click.panel",".lanx_numaddr a.spm_addr_open, .lanx_newaddr a.spm_newaddr_open_v2",f.bind(this)).on("click.panel",".lanx_numaddr a._adr, .lanx_newaddr a._adr",b.bind(this)).on("click.panel",".lanx_act a.spm_sc_start2",this._onClickStartBtn.bind(this)).on("click.panel",".lanx_act a.spm_sc_end2",this._onClickEndBtn.bind(this)).on("click.panel",".lanx_inc a",d.bind(this))
},_showAddressPin:function(j){if(j==null){return
}this._getResultList().each(function(l,m){var k=$(m).find("div.lanx_pin");
k.toggle(l===j)
})
},_isClickedAddrList:function(k){var j=$(k.target);
return !j.is(".spm_newaddr_open_v2, .spm_addr_open, .spm_lst_fav, .pla, ._adr, .spm_sc_start2, .spm_sc_end2, .lanx_inc a, ._spi_btn_release, li.receive a, .spi_close")
},_getPinImage:function(j){return $(j).find("div.pin2 img")
},_itemOver:function(k){if(!this._isDirectionsType()||k.hasClass("on")){return
}e.prototype._itemOver.apply(this,arguments);
var j=this._getPinImage(k);
j.closest("div.pin2").show()
},_itemOut:function(k){if(!this._isDirectionsType()||k.hasClass("on")){return
}e.prototype._itemOut.apply(this,arguments);
var j=this._getPinImage(k);
j.closest("div.pin2").hide()
},_getSSCGroup:function(j){return j.address.sscGrp
}});
function i(k){k.preventDefault();
var j=this._getResult(),m=$(k.currentTarget),l=m.data("type");
if(l==j.address.subType){return
}this.set("_addressPanelView",{name:"address",key:"subTab",value:{type:l}})
}function h(k){if(!this._isClickedAddrList(k)){return
}if(this._siteInAddrClicked){this._siteInAddrClicked=false;
return
}var j=k.currentTarget;
if(j.href==="#"){k.preventDefault()
}this._selectList(j)
}function a(m){m.preventDefault();
var l=$(m.currentTarget),n=l.data("id"),k=l.data("bookmark-key"),j=l.hasClass("on")?"DEL":"ADD";
this.set("_addressPanelView",{key:"bookmark",type:"ADDRESS",id:n,method:j,bookmark_key:k})
}function c(k){k.preventDefault();
this._siteInAddrClicked=true;
var j=$(k.currentTarget),l=j.closest("li");
this._selectList(l[0]);
this.set("_addressPanelView",{name:"address",key:"site",value:{query:j.data("query"),daddr:j.data("daddr"),maddr:j.data("maddr")}})
}function f(k){k.preventDefault();
var j=$(k.currentTarget);
if(j.hasClass("spm_newaddr_close_v2")||j.hasClass("spm_addr_close")){j.removeClass("spm_newaddr_close_v2 spm_addr_close");
j.parent().parent().find("ul").hide()
}else{if(j.hasClass("spm_newaddr_open_v2")){j.addClass("spm_newaddr_close_v2")
}if(j.hasClass("spm_addr_open")){j.addClass("spm_addr_close")
}j.parent().parent().find("ul").show()
}}function b(l){l.preventDefault();
if(this._tId){return
}var j=$(l.currentTarget),m=j.closest("ul.lst_addr > li");
this._highlight(m);
this._showAddressPin(m.data("index"));
this.set("_addressPanelView",{name:"address",key:"eaddr",value:{type:"ADDRESS",id:j.data("id"),depth:j.data("depth"),index:j.data("index")}});
this._initSocialPlugin(m);
var k=this;
this._tId=window.setTimeout(function(){window.clearTimeout(k._tId);
k._tId=null
},300)
}function d(m){m.preventDefault();
var l=$(m.currentTarget),j=this._getResult()._additionInfo.searchBoxKey,k=l.data("query")||l.text();
if(this._getMenuState()==="ROUTE"){this.$Search().searchSuggestionInDirections(j,k)
}else{this.$Search().queryOutdoor(k)
}}}());
(function(){var L=iron.ns("nhn.map.search"),s=L.AbstractPanelView,F="click.panel",z="change.panel",m="focusin.panel",v="focusout.panel",e="mouseenter.panel",i="mouseleave.panel",n="scroll.panel",G="서버와의 통신이 원활하지 않습니다.",C="잠시 후에 다시 시도해 주세요.",w={top:14,left:4};
L.SitePanelView=iron.Class(s,{_COUPON_URL:"/search2/couponPrint.nhn?id=",_listTimer:null,initialize:function(){s.apply(this);
this._panelViewType="site";
this._$roadNameLayer=$("div.ly_roadname");
this._$scrollPane=$(".scroll_pane")
},_afterDraw:function(){var T="spot",S="search_";
s.prototype._afterDraw.apply(this);
this._bindSite();
this._paginate("site");
this._setSscode("place");
if(this._isSearchInDirections()){if(this._isFirstSearch()){this._highlightFirst()
}else{this.checkHighlightItem()
}S="route_"
}if(this._isSingleResultOfIndoor()){this._highlightFirst()
}this._$linkQueryAnchor=$("._linkQueryResearch");
T&&nhn.map.LogPV(S+T)
},_selectList:function(U){this._highlight(U);
var T=$(U),S=T.data("index");
this.$Search().setIsAutoPanning(true);
this.set("_sitePanelView",{name:"site",key:"list",value:{type:T.hasClass("li_ad")?"AD":"SITE",id:T.data("id"),index:S}});
if(this._getMenuState()=="ROUTE"){this._addDirections(S,"site")
}this._initSocialPlugin(U)
},_bindSite:function(){this._getResultTop().on(F,".srt .srt_double a.srt_double_a_open, .srt .srt_double a.srt_double_a_close",b.bind(this)).on(z,".srt .srt_tit select",B.bind(this)).on(z,".srt_research select",N.bind(this)).on(m,".srt .srt_double a.srt_double_a_open, .srt_double .srt_double_ly li a",y.bind(this)).on(v,".srt .srt_double a.srt_double_a_open, .srt_double .srt_double_ly li a",t.bind(this)).on(F,".srt .srt_different li a",I.bind(this)).on(F,".srt_sortbox a.spm_lst_diffaddr",J.bind(this)).on(F,".srt_sortbox .srt_sort > ul a._relevance, a._distance",O.bind(this)).on(F,".srt_sortbox .srt_sort > ul a.oil",o.bind(this)).on(F,".srt_sortbox .srt_sort > ul div.srt_oil_ly li a",K.bind(this)).on(F,".srt_sortbox .select_area a.select_area_a_open, a.select_area_a_close",a.bind(this)).on(F,".srt_sortbox .select_area p.sa_history a",P.bind(this)).on(F,".srt_sortbox .select_area .sa_lst li a",P.bind(this));
this._getResultList().on(F,u.bind(this)).on(e,".lsnx_det dt > a",g.bind(this)).on(i,".lsnx_det dt > a",R.bind(this)).on(m,".lsnx_det dt > a",g.bind(this)).on(v,".lsnx_det dt > a",R.bind(this)).on(F,".lsnx a.spm_lst_fav",r.bind(this)).on(e,".lsnx .lsnx_det a.roadname",p.bind(this)).on(i,".lsnx .lsnx_det a.roadname",h.bind(this)).on(F,"a.spm_lst_road, a.spm_lst_air, a.spm_lst_museum, a.spm_lst_pension",d.bind(this)).on(F,"a.spm_lst_coupon",Q.bind(this)).on(F,"a.spm_lst_card",c.bind(this)).on(F,"a.spm_lst_price",D.bind(this)).on(F,"dd.tel a.free",l.bind(this)).on(F,"a.spm_lst_allpath",M.bind(this)).on(F,".lsnx_act a.spm_sc_start2",this._onClickStartBtn.bind(this)).on(F,".lsnx_act a.spm_sc_end2",this._onClickEndBtn.bind(this));
this._getResultBody().on(F,".ico_ad_dsc",j.bind(this)).on(F,".bt_ad_clse",k.bind(this));
this._getResultAdList().on(F,q.bind(this));
this._doc.on(F,H.bind(this));
this._$scrollPane.on(n,E.bind(this))
},drawOtherLists:function(U){var ac=$("._sub_region_lists",this._getResultTop()),aa=$(".select_area_loading",this._getResultTop()),Y=$(".sa_history",this._getResultTop()),Z=U.result.subRegion,V="",S=[],ab=[];
for(var T=0,X=Z.items,W=X.length;
T<W;
T++){V=X[T].displayName;
if(V.length>6){V=V.slice(0,6)+"..."
}S.push("<li><a href='#' class='nclicks(plc*Z.list)' title='"+X[T].name+"' data-query='"+X[T].query+"'>"+V+"</a></li>")
}if(Z){Z.regionCategory=Z.regionCategory||[];
ab.push("전국");
Z.regionCategory.forEach(function(ad){if(ad.query){ab.push(' &gt; <a href="#" title="'+ad.name+'" data-query="'+ad.query+'">'+ad.displayName+"</a>")
}else{ab.push(' &gt; <strong title="'+ad.name+'">'+ad.displayName+"</strong>")
}})
}aa.hide();
Y.html(ab.join(""));
ac.html(S.join(""))
},drawErrorAlert:function(T){var S=T.errorCallback;
if(S){S()
}else{nhn.map.service.Alert(G,C)
}},_getSSCGroup:function(S){return S.site.sscGrp
},unbindAllEvent:function(){s.prototype.unbindAllEvent.apply(this);
this._$scrollPane&&this._$scrollPane.off(".panel")
},onFailArealFilter:function(S){$("span.load").parent().hide();
this.drawErrorAlert(S)
},_isSingleResultOfIndoor:function(){var U=this._getResultList(),S=U.length;
if(S!=1){return false
}var T=this.$Search().getItemByIndex(0,"site");
return !!T.indoorMapInfo
}});
function f(){var S=this._currentSelectBox;
if(!S){return
}$(S).removeClass("select_area_open srt_double_on").find("div.srt_oil_ly").hide();
delete this._currentSelectBox
}function H(T){A.apply(this);
if(!this._currentSelectBox){return
}var S=$(T.target).closest(this._currentSelectBox);
if(!S.length){f.apply(this)
}}function b(V){V.preventDefault();
var T=$(V.currentTarget),U=T.parents(".srt_double"),S;
if(this._currentSelectBox!==U[0]){f.apply(this)
}S=U.hasClass("srt_double_on");
U.toggleClass("srt_double_on",!S);
if(!S){this._currentSelectBox=U[0]
}}function B(T){T.preventDefault();
var S=$(T.currentTarget).find(":selected");
this.set("_sitePanelView",{name:"site",key:"others",value:S.data("others")})
}function N(U){var T=$(U.currentTarget).find(":selected");
var S=T.data("others");
var V=T.data("rank");
this._$linkQueryAnchor.data("query",S);
this.set("_sitePanelView",{name:"site",key:"researchSite",value:{query:S,rank:V,location:T.data("location")}})
}function y(){if(this._listTimer===undefined){return
}clearTimeout(this._listTimer);
delete this._listTimer
}function t(){var S=this._getResultTop().find(".srt_double");
this._listTimer=window.setTimeout(function(){S.removeClass("srt_double_on")
},100)
}function I(T){T.preventDefault();
var S=$(T.currentTarget);
this.set("_sitePanelView",{name:"site",key:"researchSite",value:{query:S.data("query"),rank:S.data("rank"),location:S.data("location")}})
}function J(S){S.preventDefault();
this.set("_sitePanelView",{name:"site",key:"back",value:""})
}function O(U){U.preventDefault();
var T=$(U.currentTarget),S=T.data("sort");
if(!T.hasClass("on")){this.set("_sitePanelView",{name:"site",key:"sort",value:S})
}}function o(V){V.preventDefault();
var U=$(V.currentTarget),T=U.parent(),S=T.find("div.srt_oil_ly");
if(this._currentSelectBox!==T[0]){f.apply(this)
}S.show();
this._currentSelectBox=T[0]
}function K(U){U.preventDefault();
var T=$(U.currentTarget),S=T.closest(".srt_sort > ul > li");
if(!S.hasClass("on")){S.addClass("on").siblings().removeClass("on")
}if(!T.parent().hasClass("on")){this.set("_sitePanelView",{name:"site",key:"oilSort",value:{sort:"2",type:T.data("type"),bound:T.data("bound")}})
}}function a(Y){Y.preventDefault();
var X=$(Y.currentTarget),W=X.parent(),U=W.find("li"),T=W.find(".select_area_loading"),V,S;
if(this._currentSelectBox!==W[0]){f.apply(this)
}S=W.hasClass("select_area_open");
if(!S&&!U.size()){T.show();
this.dispatch("clickOtherLists")
}W.toggleClass("select_area_open",!S);
if(!S){this._currentSelectBox=W[0];
V=W.find("ul.sa_lst");
V.height()>249&&V.height(249)
}}function P(T){T.preventDefault();
var S=$(T.target).data("query");
this.set("_sitePanelView",{name:"site",key:"locationFilter",value:{query:S}})
}function q(Z){var Y=$(Z.currentTarget),U=$(Z.target),S=Y.data("index"),T,X,V;
T=this._getResult().site.advertiseList[S];
var W=U.closest("a").data("adcr");
if(!this._isClickedItem(Z)||!!W){if(W==="title"){X=T.x1
}else{if(W==="estimation_num"){X=T.x2
}else{if(W==="card"){X=T.x2
}else{if(W==="coupon"){X=T.x2
}else{if(W==="detail"){X=T.x2
}else{if(W==="marker"){X=T.x2
}else{if(W==="price"){X=T.x2
}else{if(W==="booking"){X=T.x2
}}}}}}}}V=W
}else{V=(Y.hasClass("on"))?"select":"unselect";
X=T.x2
}nhn.map.service.ADCR.log({x:X,p:V})
}function u(T){if(!this._isClickedItem(T)){return
}var S=T.currentTarget;
if(S.href==="#"){T.preventDefault()
}this._selectList(S)
}function g(S){$(S.currentTarget).css("textDecoration","underline")
}function R(S){$(S.currentTarget).css("textDecoration","none")
}function r(X){X.preventDefault();
var W=$(X.currentTarget),T=W.data("id"),U=W.data("bookmark-key"),S=W.hasClass("on")?"DEL":"ADD",V=W.closest("li").hasClass("li_ad")?"AD":"SITE";
this.set("_sitePanelView",{key:"bookmark",type:V,id:T,method:S,bookmark_key:U})
}function j(T){T.preventDefault();
var S=$(T.currentTarget).siblings(".wrap_ad_dsc");
S.toggle()
}function k(T){T.preventDefault();
var S=$(T.currentTarget).closest(".wrap_ad_dsc");
S.hide()
}function p(X){X.preventDefault();
var W=$(X.currentTarget),Y=W.offset(),S=W.data("index"),U=W.closest("li").hasClass("li_ad"),T=U?this._getResult().site.advertiseList[S]:this._getResult().site.list[S],V=T.address;
if(V){x.call(this,V,Y)
}}function h(S){S.preventDefault();
A.apply(this)
}function A(){this._$roadNameLayer.offset({top:0,left:0}).hide()
}function x(S,T){this._$roadNameLayer.text(S).show().offset({top:T.top+w.top,left:T.left+w.left})
}function E(){A.apply(this)
}function d(V){V.preventDefault();
var T=$(V.currentTarget),W=T.data("id"),S=T.data("panorama-type")+"Panorama",U=T.closest("li").hasClass("li_ad");
this.set("_sitePanelView",{name:"site",key:S,value:{type:U?"AD":"SITE",id:W}})
}function Q(V){V.preventDefault();
var T=$(V.currentTarget);
var U=T.data("url");
var S=window.open(U,"siteCoupon","resizable=no,scrollbars=1,status=no,menubar=no,toolbar=no");
if(S){S.focus()
}}function c(V){V.preventDefault();
var T=$(V.currentTarget),U=T.attr("href"),S=window.open(U);
if(S){S.focus()
}}function D(V){V.preventDefault();
var U=$(V.currentTarget),T=U.attr("href"),S=window.open(T);
if(S){S.focus()
}}function l(V){V.preventDefault();
var U=$(V.currentTarget),S=+(U.data("index")),T=this._getResult().site.list[S];
L.openSiteFreeCallWindow({id:T.id.replace(/(\D*)/g,""),tel:T.tel,name:T.name,ktCallMd:T.ktCallMd})
}function M(T){T.preventDefault();
var S=$(T.currentTarget);
this.set("_sitePanelView",{name:"site",key:"path",value:{type:"SITE",index:S.data("index")}})
}}());
(function(){var k=iron.ns("nhn.map.search"),g=k.AbstractPanelView;
k.BusPanelView=iron.Class(g,{_elComboFolder:null,_listTimer:null,initialize:function(){g.apply(this);
this._panelViewType="bus"
},_afterDraw:function(){g.prototype._afterDraw.apply(this);
var s=this._getResult(),r="buslist",q="search_",t;
if(s.bus){t=s.bus.subType;
this._subTabType=t;
this.$Search().saveBusOptions(t);
if(t==="BUS_STATION"){r="stoplist"
}}this._bindBus();
this._paginate("bus");
this._setSscode("bus");
if(this._isSearchInDirections()){if(this._isFirstSearch()){this._highlightFirst("bus")
}else{this.checkHighlightItem()
}q="route_";
r="bus"
}r&&nhn.map.LogPV(q+r)
},_selectList:function(s){this._highlight(s);
var r=$(s),u=r.data("id"),t=r.data("type"),q=r.data("index");
if(t=="BUS_STATION"){this.set("_busPanelView",{name:"bus",key:"list",value:{type:"BUS",id:u,index:q}});
if(this._isDirectionsType()){this._addDirections(q,"bus")
}}else{this.set("_busPanelView",{name:"bus",key:"busRoute",value:{type:"BUS",id:u,index:q}})
}this._initSocialPlugin(s)
},_bindBus:function(){this._getResultTop().on("click.panel",".srt_sortbox_bus ul.srt_sort_addr a",o.bind(this)).on("click.panel",".srt_different li a",m.bind(this)).on("click.panel","._bus_region > a.dss_a, ._bus_type > a.dss_a, ._dup_region > a.dss_a",b.bind(this)).on("click.panel","._bus_region .ly_dss a",j.bind(this)).on("click.panel","._bus_type .ly_dss a",p.bind(this)).on("click.panel","._dup_region .ly_dss a",n.bind(this)).on("focusout.panel",".ds_select a.dss_a, .ds_select .ly_dss a",i.bind(this)).on("focusin.panel",".ds_select a.dss_a, .ds_select .ly_dss a",c.bind(this));
this._getResultList().on("click.panel",e.bind(this)).on("click.panel","a.spm_ic_road",f.bind(this)).on("click.panel",".lbsx a.spm_lst_fav",h.bind(this)).on("click.panel",".lbnx a.spm_lst_fav",l.bind(this)).on("click.panel","a.spm_sc_start",this._onClickStartBtn.bind(this)).on("click.panel","a.spm_sc_end",this._onClickEndBtn.bind(this));
this._doc.on("click.panel",a.bind(this))
},_searchRoute:function(q){var s=new nhn.mapcore.LatLng(q.data("lat"),q.data("lng")),r=q.data("title");
this.$map().setCenter(s.toInner());
this.$Search().setTransitDestination({id:"ANONYMOUS",point:s,title:r})
},_searchPlace:function(q){this.set("_busPanelView",{name:this._subTabType||"BUS",key:"busSearch",value:{query:q.data("query"),rank:q.data("rank")}})
},_getPinImage:function(q){return $(q).find("div.lbsx_pin img")
},_getSSCGroup:function(q){return q.bus.sscGrp
}});
function o(w){w.preventDefault();
var s=$(w.currentTarget),q=s.data("name"),x=s.data("type"),t=this.$Search().getSavedBusOptions(x),v,r,u,y,z={};
if(t.query===this.$Search().getQuery()){if(t.doCode!==undefined){v=t.doCode
}else{v=s.data("docode")
}if(t.busType!==undefined){r=t.busType
}else{r=s.data("typecode")
}if(t.rank!==undefined){u=t.rank
}else{u=s.data("rank")
}if(t.searchCoord!==undefined){y=t.searchCoord
}}z={type:x,queryRank:u,doCode:v,busType:r};
if(y){z.searchCoord=y
}this.set("_"+q+"PanelView",{name:q,key:"subTab",value:z});
this._subTabType=x
}function m(s){s.preventDefault();
var r=$(s.currentTarget),q=r.data("type");
if(q==="route"){this._searchRoute(r)
}else{this._searchPlace(r)
}}function d(){var q=this._currentSelectBox;
if(!q){return
}$(q).removeClass("on");
delete this._currentSelectBox
}function b(t){t.preventDefault();
var s=t.currentTarget.parentNode,r=$(s),q;
if(r.hasClass("dimmed")){return
}if(this._currentSelectBox!==s){d.apply(this)
}q=r.hasClass("on");
r.toggleClass("on",!q);
if(!q){this._currentSelectBox=s
}}function j(v){v.preventDefault();
var u=$(v.currentTarget),t=u.closest("._bus_region"),r=u.data("type"),q=u.data("typecode"),x=u.data("docode"),w=u.data("rank"),s;
u.parent().addClass("on").siblings().removeClass("on");
t.find("a.dss_a strong.dss_st").text(u.text());
if(r==="BUS_STATION"){q=0;
s="bst"
}else{s="bnm"
}this.$Search().saveBusOptions(r,{doCode:x,busType:q,rank:w});
this.set("_busPanelView",{name:"bus",key:"subTab",value:{type:r,busType:q,doCode:x,queryRank:w}})
}function p(u){u.preventDefault();
var t=$(u.currentTarget),s=t.closest("._bus_type"),r=t.data("type"),q=t.data("typecode"),w=t.data("docode"),v=t.data("rank");
t.parent().addClass("on").siblings().removeClass("on");
s.find("a.dss_a strong.dss_st").text(t.text());
this.$Search().saveBusOptions(r,{doCode:w,busType:q,rank:v});
this.set("_busPanelView",{name:"bus",key:"subTab",value:{type:r,busType:q,doCode:w,queryRank:v}})
}function n(u){u.preventDefault();
var t=$(u.currentTarget),s=t.closest("._dup_region"),q="",r="";
t.parent().addClass("on").siblings().removeClass("on");
s.find("a.dss_a strong.dss_st").text(t.text());
var q="";
this.set("_busPanelView",{name:"bus",key:"others",value:t.data("others")});
if(this._isDirectionsType()){q="bst*S.resrch"
}else{if(this._subTabType==="BUS_STATION"){r="bst"
}else{r="bnm"
}if(!t.data("viewtype")||t.data("viewtype")=="empty"){r="nsr"
}q=r+"*S.resrch"
}}function e(r){d.apply(this);
if(!this._isClickedItem(r)){return
}var q=r.currentTarget;
if(q.href==="#"){r.preventDefault()
}this._selectList(q)
}function f(r){r.preventDefault();
var q=$(r.currentTarget);
this.set("_busPanelView",{name:"site",key:"streetPanorama",value:{type:"BUS",id:q.data("id")}})
}function h(u){u.preventDefault();
var t=$(u.currentTarget),s=t.data("id"),r=t.data("bookmark-key"),q=t.hasClass("on")?"DEL":"ADD";
this.set("_busPanelView",{key:"bookmark",type:"BUS",subType:"BUS_STOP",id:s,method:q,bookmark_key:r})
}function l(u){u.preventDefault();
var t=$(u.currentTarget),r=t.data("id"),s=t.data("bookmark-key"),q=t.hasClass("on")?"DEL":"ADD";
this.set("_busPanelView",{key:"bookmark",type:"BUS",subType:"BUS_ROUTE",id:r,method:q,bookmark_key:s})
}function a(r){if(!this._currentSelectBox){return
}var q=$(r.target).closest(this._currentSelectBox);
if(!q.length){d.apply(this)
}}function i(){this._listTimer=setTimeout(function(){},100)
}function c(){if(this._listTimer){clearTimeout(this._listTimer);
this._listTimer=null
}}}());
(function(){var j=iron.ns("nhn.map.search"),g=j.AbstractPanelView;
j.EmptyPanelView=iron.Class(g,{initialize:function(){g.apply(this)
},_afterDraw:function(){g.prototype._afterDraw.apply(this);
this._setSscode("place");
this._bindEmpty()
},_bindEmpty:function(){var k=this._getResultBody().find("div.no_result");
if(!k[0]){return
}k.on("click.panel","a.srt_double_a_open, .a.srt_double_a_close",d.bind(this)).on("click.panel",".srt_double_ly li a",i.bind(this)).on("click.panel","a._linkQuery",b.bind(this)).on("click.panel","a._boundary",f.bind(this)).on("click.panel","a._spot_registration",h.bind(this)).on("change.panel",".srt_tit select",c.bind(this));
this._doc.on("click.panel",a.bind(this))
}});
function a(l){if(!this._currentSelectBox){return
}var k=$(l.target).closest(this._currentSelectBox);
if(!k.length){e.apply(this)
}}function e(){var k=this._currentSelectBox;
if(!k){return
}$(k).removeClass("srt_double_on");
delete this._currentSelectBox
}function d(n){n.preventDefault();
var l=$(n.currentTarget),m=l.parents(".srt_double"),k;
if(this._currentSelectBox!==m[0]){e.apply(this)
}k=m.hasClass("srt_double_on");
m.toggleClass("srt_double_on",!k);
if(!k){this._currentSelectBox=m[0]
}}function i(l){l.preventDefault();
var k=$(l.currentTarget);
this.set("_emptyPanelView",{name:"empty",key:"others",value:{query:k.data("others")}})
}function c(l){l.preventDefault();
var k=$(l.currentTarget).find(":selected");
this.set("_emptyPanelView",{name:"empty",key:"others",value:{query:k.data("others")}})
}function b(l){l.preventDefault();
var k=$(l.currentTarget);
this.set("_emptyPanelView",{name:"empty",key:"linkQuery",value:{query:k.data("query"),indoorDetail:k.data("indoor-detail"),rank:k.data("rank")}})
}function f(l){l.preventDefault();
var k=$(l.currentTarget);
this.set("_emptyPanelView",{name:"empty",key:"boundSearch",value:{query:k.data("query")}})
}function h(k){k.preventDefault();
this.$Search().openSpotRegistration();
nhn.map.LogClick({event:k,element:k.target,acode:"nsr.placesubmit"})
}}());
iron.ns("nhn.map.search").AbstractMapView=iron.Class(iron.KVO,{DEFAULT_ITEM_LEVEL:12,REGION_GROUP_INDEX:1500,_marker:{REGION:{},SPOT:{},ADDRESS:{},SITE:{},BUS:{},BUS_STATION:{},SUBWAY:{},ID:{},AD:{}},_selectedMarker:null,_result:null,_subwayMarker:null,_prevSubwayMarker:null,initialize:function(){iron.KVO.apply(this)
},getSearchMarkerList:function(){var b=[];
for(var c in this._marker){if(c==="AD"){continue
}var a=this._marker[c];
for(var d in a){b.push(a[d])
}}return b
},getAdMarkerList:function(){var b=[];
for(var c in this._marker){if(c!=="AD"){continue
}var a=this._marker[c];
for(var d in a){b.push(a[d])
}}return b
},draw:function(a){this._beforeDraw(a);
this._onDraw();
this._afterDraw()
},_beforeDraw:function(a){this._setResult(a);
this.clear()
},_onDraw:function(){},_afterDraw:function(){},_setResult:function(a){this._result=a;
this._setResultCount(a.totalCount)
},_getResult:function(){return this._result
},showMarker:function(a){if(a.MarkerType=="ADDRESS"){this._deleteMarker(this._marker[a.MarkerType]);
this._createMarker(a,this._getAddressSsc(a))
}this._setPosition(a)
},selectMarker:function(b){var a;
if(b.MarkerType.indexOf("BUS")===0){a=this.$Search().getBusMarker(b.id)
}else{a=this._marker[b.MarkerType][b.id||b.rCode]
}if(!a){return
}if(this._selectedMarker){this.unselectMarker()
}a.select();
this._selectedMarker=a
},unselectMarker:function(){if(this._selectedMarker){this._selectedMarker.unselect();
this._selectedMarker=null
}},_getAddressSsc:function(b){var a=this._getResult();
if(a.address.subType=="ADDRESS_ROAD"){return"adn_map.marker,"+b.id+",,Y,Y"
}else{if(a.address.subType=="ADDRESS_JIBUN"){return"ado_map.marker,"+b.id+",,Y,Y"
}}},_createMarker:function(e,b){var f=e.id||e.rCode,a=e.index||0,d=this._getMarkerOptions(e),c;
if(!e.__simpleSpot){c=this.$SearchMarker().create(d,a,b,{moveMarker:this._onMoveMarker.bind(this,e),click:this._onClickMarker.bind(this,e._viewType,d.type==="AD"?"AD":e._searchType,f)})
}else{if(e.fullAddress){c=this.$SearchMarker().create(d,a,b,{click:this._onClickSingleAddress.bind(this)})
}else{c=this.$SearchMarker().create(d,a,b,{click:this._onClickSimpleSpot.bind(this)})
}}this._marker[e.MarkerType][f]=c
},_onClickSimpleSpot:function(){var a=this.$InfoWindowFacade(),b=a.getWindowByType("SIMPLE");
if(!b){return
}if(b.getVisibility()){a.close()
}else{this._openSimpleWindow(this._currentItem)
}},_onClickSingleAddress:function(){var b=this.$InfoWindowFacade(),a=b.getWindowByType("ADDRESS");
if(!a){return
}if(a.getVisibility()){b.close()
}else{this._openInfoWindow(this._currentItem)
}},_onMoveMarker:function(c,f){var b=this.$InfoWindowFacade().getCurrentWindow(),a=this.$InfoWindowFacade().getCurrentModel();
c.mx=f.point.x;
c.my=f.point.y;
var d=a?a.getData():null;
if(b&&d&&(d.isBookmark||(d.poiInfo&&d.poiInfo.hasRoad))&&(!this._currentItem||this._currentItem.id==c.id)){b.setPoint(f.point);
b.redraw()
}},_getMarkerOptions:function(b){var a={point:new nhn.mapcore.LatLng(b.my||b.y,b.mx||b.x),title:b.name,type:b.MarkerType,id:b.MarkerType+"_"+(b.id||b.rCode),groupIndex:1000,streetPanorama:b.streetPanorama||null,skyPanorama:b.skyPanorama||null,insidePanorama:b.insidePanorama||null,interiorPanorama:b.interiorPanorama||null,indoorPanorama:b.indoorPanorama||null,entranceCoords:b.entranceCoords||null,couponUrl:b.couponUrl||null,stationClass:b.stationClass||null,noExNoPrnt:b.noExNoPrnt,x1:b.x1,x2:b.x2};
if(b.MarkerType=="BUS"){a.stationId=b.id;
if(b.arsId){a.htmlTitle="<strong>"+b.name+"</strong> <em class='bar'>|</em> <em class='busid'>"+b.arsId+"</em>"
}}if(b.MarkerType=="REGION"||b.MarkerType=="SPOT"){a.groupIndex=this.REGION_GROUP_INDEX
}if(b.poiInfo){a.poiInfo=b.poiInfo
}a.posExact=("posExact" in b)?b.posExact:"1";
if("rcode" in b){a.rcode=b.rcode
}if("rCode" in b){a.rCode=b.rCode
}if("isJibunAddress" in b){a.isJibunAddress=b.isJibunAddress
}if("_polygonParam" in b){a._polygonParam=b._polygonParam
}return a
},_deleteMarker:function(b){for(var a in b){this.$SearchMarker().remove(b[a]);
delete b[a]
}},findMarker:function(c,b){if(b){if(this._marker[b]&&this._marker[b][c]){return this._marker[b][c]
}}else{for(var a in this._marker){if(this._marker[a][c]){return this._marker[a][c]
}}}return false
},_removeMarkers:function(){for(var a in this._marker){this._deleteMarker(this._marker[a])
}this.$Search().clearBusMarker()
},_onClickMarker:function(a,b,c){this.set("_"+a+"MapView",{name:a,key:"marker",value:{type:b,id:c}})
},_setPosition:function(a){this._setItemPosition(a)
},showInfoWindow:function(b,a,c){var b=this._addMarkerInfo(b);
this._currentItem=b;
c||this.closeInfoWindow();
if(b._searchType=="BUS"){this._openBusWindow(b)
}else{if(b._searchType=="SUBWAY"){this._openSubwayWindow(b)
}else{if(b.__simpleSpot){if(b.fullAddress){this._openInfoWindow(b)
}else{this._openSimpleWindow(b)
}}else{this._openInfoWindow(b,a)
}}}},closeInfoWindow:function(){var a=this.$InfoWindowFacade().getCurrentWindow(),b;
this.$InfoWindowFacade().abort();
if(!a){return
}b=a.getType?a.getType():a._type;
if(b!=="POI"&&b!=="BOOKMARK_SITE"){this.$InfoWindowFacade().close()
}},moveInfoWindow:function(d,e){var d=this._addMarkerInfo(d),b=this.$InfoWindowFacade(),c=b.getCurrentWindow(),a=$.extend({},d.MarkerInfo);
if(c){a.offset=c.getOffset()
}b.moveCurrentWindow(a,function(){this.showInfoWindow(d,null,true);
e&&e()
}.bind(this))
},_addMarkerInfo:function(b){var c=b.id||b.rCode,a=this._marker[b.MarkerType][c];
b.MarkerInfo=a.getInfo();
if(b.mappedAddr){b.MarkerInfo.mappedAddr=b.mappedAddr
}b.MarkerInfo.first=b.isFirstItem||false;
b.MarkerInfo.last=b.isLastItem||false;
b.mx=b.x=b.MarkerInfo.point.x;
b.my=b.y=b.MarkerInfo.point.y;
return b
},_openBusWindow:function(a){NModules.load("bus",function(){this.$BusService().showBusStationWindow(a.id,"BUS_RESULT")
}.bind(this))
},_openSubwayWindow:function(b){var a=this._marker[b.MarkerType][b.id];
a.offset=b.MarkerInfo.offset;
a.point=a.point.toInner();
a.MarkerInfo=b.MarkerInfo;
NModules.load("subway",function(){this.$SubwayService().openSubwayWindow(b.id,a)
}.bind(this))
},_openSimpleWindow:function(a){this.$Search().setSelectedItem(a);
this.$InfoWindowFacade().openSimpleWindow({x:a.x,y:a.y,title:a.name})
},_openInfoWindow:function(b,a){if(b.mx){b.x=b.mx
}if(b.my){b.y=b.my
}if(b.MarkerType==="AD"){b.isAd=true
}this.$InfoWindowFacade().open(b._searchType,b,{prev:this._goPrevWindow.bind(this),next:this._goNextWindow.bind(this),moveStation:this._moveSubwayStation.bind(this),open:function(){a&&a();
this.$Search().setIsAutoPanning(true)
}.bind(this)})
},_goPrevWindow:function(){var d=this._currentItem,b=d.index*1-1,a=d._viewType,c=d._searchType;
this.set("_"+a+"MapView",{name:a,key:"move_infoWindow",value:{type:c,index:b}})
},_goNextWindow:function(){var d=this._currentItem,b=d.index*1+1,a=d._viewType,c=d._searchType;
this.set("_"+a+"MapView",{name:a,key:"move_infoWindow",value:{type:c,index:b}})
},_removeInfoWindows:function(){if(this.$InfoWindowFacade){var a=this.$InfoWindowFacade().getCurrentWindow();
if(a&&(!a.getType||a.getType()!="POI")){this.$InfoWindowFacade().close()
}}},_setInitPosition:function(a){this._setResultCount(a.totalCount);
this._resetBound();
if(a.boundary){var c=this._fromLatlngToPointBound(a.boundary);
this._addBound(c)
}var b=this.DEFAULT_ITEM_LEVEL;
if(a.region){this._addExtraBound(a.region);
b=this._getMaxAllowedLevel(a.region)
}if(a.address&&a.address.list){this._addExtraBound(a.address.list[0]);
b=this._getMaxAllowedLevel(a.address.list[0])
}if(a.site&&a.site.list){a.site.list.forEach(function(e){if(e._polygonParam){this._addExtraBound(e)
}}.bind(this))
}if(this._hasBound()){this._setBoundPoint(this._getBound(),{maxLevel:b})
}else{var d=this._getSingleItem(a);
this._setItemPosition(d)
}},_isItemIntoBoundary:function(b){var a=this.$map().getBound(),c=(new nhn.mapcore.LatLng(b.y,b.x)).toInner();
return((c.x>=a[0]&&c.x<=a[2])&&(c.y<=a[1]&&c.y>=a[3]))
},_getDefaultLevel:function(b){var c=this.$map().getLevel(),b=b||this._getSingleItem(this._getResult()),a=b.itemLevel?+b.itemLevel:this.DEFAULT_ITEM_LEVEL;
if(a<c||(c>=this.DEFAULT_ITEM_LEVEL&&this._getResultCount()==1&&this._isItemIntoBoundary(b))){return c
}else{if(a>=c){return a
}else{return this.DEFAULT_ITEM_LEVEL
}}},_setResultCount:function(a){this._totalCount=a
},_getResultCount:function(){return this._totalCount
},_resetBound:function(){this._bound=null
},_hasBound:function(){return !!this._bound
},_getBound:function(){return this._bound
},_addBound:function(a){if(!a){return
}if(!this._bound){this._bound=a;
return this._bound
}this._bound[0]=(a[0]<this._bound[0])?a[0]:this._bound[0];
this._bound[1]=(a[1]>this._bound[1])?a[1]:this._bound[1];
this._bound[2]=(a[2]>this._bound[2])?a[2]:this._bound[2];
this._bound[3]=(a[3]<this._bound[3])?a[3]:this._bound[3];
return this._bound
},_addExtraBound:function(a){if(a.boundary){var b=a.boundary;
this._addBound(this._fromLatlngToPointBound([b.minX,b.maxY,b.maxX,b.minY]))
}else{if(a.poiInfo&&a.poiInfo.hasPolygon){var b=a.poiInfo.polygon.boundary;
this._addBound(this._fromLatlngToPointBound([b.minX,b.maxY,b.maxX,b.minY]))
}else{if(a.poiInfo&&a.poiInfo.hasRoad){var b=a.poiInfo.road.boundary;
this._addBound(this._fromUtmkToPointBound(b))
}}}},_setItemPosition:function(c){if(!c||!c.x||!c.y){return
}var d=this.$map().getLevel(),b=this._getDefaultLevel(c);
function a(){this._setCenter(c.x,c.y);
this._resetBound();
this._addExtraBound(c);
var g=this._getBound();
if(g){var f=this._getMaxAllowedLevel(c),e=this.$map().findOptimaizedZoomLevel(g,{minLevel:1,maxLevel:f});
this._setZoomLevel(e)
}else{if(c.fullAddress||b>d||this._getResultCount()==1){this._setZoomLevel(b)
}}}window.clearTimeout(this._armTimer);
if(this.$map().isResizing()){this._armTimer=window.setTimeout(a.bind(this),100)
}else{a.apply(this)
}},_getMaxAllowedLevel:function(c){var a=this._getDefaultLevel();
if(c._polygonParam){var b=this.$SearchPolygonService().getVisibleLevels(c._polygonParam);
a=b[b.length-1]
}return a
},_getSingleItem:function(a){if(!a){return
}var b=[];
if(a.region){b=a.region
}if(a.address){b=(a.address.list)?a.address.list[0]:[]
}if(a.site){b=(a.site.list)?a.site.list[0]:[]
}if(a.bus){b=(a.bus.list)?a.bus.list[0]:[]
}return b
},_setBoundPoint:function(b,a){if(!b){return
}this.$map().setBound(b,a)
},_setBoundLatLng:function(b){var a=nhn.mapcore.CoordConverter.inputFilter(new nhn.mapcore.LatLng(b[1],b[0]));
var c=nhn.mapcore.CoordConverter.inputFilter(new nhn.mapcore.LatLng(b[3],b[2]));
this.$map().setBound([a.x,a.y,c.x,c.y])
},_fromLatlngToPointBound:function(b){var a=nhn.mapcore.CoordConverter.inputFilter(new nhn.mapcore.LatLng(b[1],b[0])),c=nhn.mapcore.CoordConverter.inputFilter(new nhn.mapcore.LatLng(b[3],b[2]));
return[a.x,a.y,c.x,c.y]
},_fromUtmkToPointBound:function(b){var a=nhn.mapcore.CoordConverter.inputFilter(new nhn.mapcore.UTMK(b.minX,b.maxY)),c=nhn.mapcore.CoordConverter.inputFilter(new nhn.mapcore.UTMK(b.maxX,b.minY));
return[a.x,a.y,c.x,c.y]
},_setCenter:function(a,b){this.$map().setCenter(new nhn.mapcore.LatLng(b,a))
},_setZoomLevel:function(a){this.$map().setLevel(a)
},showRoadBound:function(b){if(!b.poiInfo||!b.poiInfo.road){return
}var a=b.poiInfo.road.boundary;
if(a){this._setBoundPoint(this._fromUtmkToPointBound(a))
}},clear:function(){this._removeMarkers();
this._removeInfoWindows()
},_drawBus:function(){var a=this._getResult();
if(!a.bus||a.bus.subType=="BUS_ROUTE"){return
}var b=a.bus.list||[];
NModules.load("bus",function(){var c;
for(var e=b.length-1,d=0;
e>=d;
e--){this.$BusService().addSearchBusMarker(b[e],"bst_map.marker,"+b[e].id+","+b[e].rank+",Y,Y")
}c=this.$BusService().getSearchBusMarkerList();
c=c.reverse();
for(var e=c.length-1,d=0;
e>=d;
e--){c[e].attach({click:this._onSelectBusMarker.bind(this,e)})
}}.bind(this))
},_onSelectBusMarker:function(b){var a=this.$Search().getResult(),c;
if(!a||!a.bus){return
}c=a.bus.list[b];
this._onClickMarker("bus","BUS",c.id)
},_onUnselectBusMarker:function(){},_moveSubwayStation:function(a){NModules.load("subway",function(){this.$SubwayService().moveSubwayStation({stationID:a.stationID,title:a.title,x:a.x,y:a.y})
}.bind(this))
}});
(function(){var b=iron.ns("nhn.map.search"),a=b.AbstractMapView;
b.HomeMapView=iron.Class(a,{initialize:function(){a.apply(this,arguments)
},_afterDraw:function(){a.prototype._afterDraw.apply(this);
var c=this._getResult();
if(c._viewType=="home_id"&&c.region){this._createMarker(c.region,"mmk.adr");
this._setCenter(c.region.x,c.region.y)
}}})
}());
(function(){var b=iron.ns("nhn.map.search"),a=b.AbstractMapView;
b.AddressMapView=iron.Class(a,{initialize:function(){a.apply(this,arguments)
},_onDraw:function(){this._drawAddress()
},_drawAddress:function(){var e=this._getResult().address,d=e.list[0],c=(e.subType=="ADDRESS_ROAD")?"adn_map.marker,"+d.id+","+d.rank+",Y,Y":"ado_map.marker,"+d.id+","+d.rank+",Y,Y";
d.noExNoPrnt=e.isIncorrectAddress;
this._createMarker(d,c)
},_afterDraw:function(){this._setInitPosition(this._getResult())
}})
}());
(function(){var b=iron.ns("nhn.map.search"),a=b.AbstractMapView;
b.SiteMapView=iron.Class(a,{initialize:function(){a.apply(this,arguments)
},_onDraw:function(){var c=this._getResult();
if(!c._isBoundarySearch||c._menustate=="ROUTE"){this._setInitPosition(c)
}this._drawSite()
},_drawSite:function(){var d=this._getResult();
if(!d.site){return
}var j=d.site.list,f=!!d.site.advertiseList?d.site.advertiseList:[],c=(d.address)?"pla_map.marker,":"plc_map.marker,",e;
if(d.site.advertiseList){e="mmk.locallink,"
}for(var h=j.length-1,g=0;
h>=g;
h--){this._createMarker(j[h],c+j[h].id+","+j[h].rank+",Y,Y")
}for(var h=f.length-1,g=0;
h>=g;
h--){this._createMarker(f[h],e+f[h].id+","+f[h].rank+",Y,Y")
}},_afterDraw:function(){}})
}());
(function(){var b=iron.ns("nhn.map.search"),a=b.AbstractMapView;
b.BusMapView=iron.Class(a,{initialize:function(){a.apply(this,arguments);
this.minPoint;
this.maxPoint
},_onDraw:function(){this._drawBus()
},_afterDraw:function(){this._setInitPosition(this._getResult());
this.minPoint=undefined;
this.maxPoint=undefined
},_addMarkerInfo:function(c){return c
}})
}());
(function(){var c=iron.ns("nhn.map.search"),a=c.AbstractMapView;
c.IdMapView=iron.Class(a,{initialize:function(){a.apply(this,arguments)
},_onDraw:function(){var d=this._getResult();
d.region&&this._drawRegion(d.region);
d.site&&this._drawSite(d.site);
d.bus&&d.bus.subType!=="BUS_ROUTE"&&this._drawBus();
d.subway&&this._drawSubway(d.subway)
},_drawRegion:function(d){if(d._viewType==="home_id"){d.MarkerType="ID";
d._viewType="id";
d.__simpleSpot=true
}this._createMarker(d,"mmk.local")
},_drawSite:function(d){this._createMarker(d.list[0],"mmk.place")
},_drawSubway:function(d){this._createMarker(d.list[0],"mmk.place")
},_afterDraw:function(){var e=this._getResult(),g=e.address||e.region||e.site||e.bus||e.subway,f=(g&&g.list)?g.list[0]:g,d=(e.bus&&e.bus.subType=="BUS_ROUTE");
if(f&&!d){f.x&&f.y&&this._setCenter(f.x,f.y);
if(b){this.showRoadBound(f)
}else{f.itemLevel&&this._setZoomLevel(f.itemLevel)
}if(!e._isAfterPanorama&&(e.site||e.bus||e.subway)&&!this._getResult().__pinOnly){this.$Search().setSelectedItem(f);
this.showInfoWindow(f)
}}},_addMarkerInfo:function(d){if(d._searchType!="BUS"){d=a.prototype._addMarkerInfo.apply(this,arguments)
}return d
},_addPrintData:function(d){this.set("_idMapView",{name:"id",key:"select",value:d})
}});
function b(d){if(d.poiInfo&&d.poiInfo.hasRoad){return true
}return false
}}());
(function(){var b=iron.ns("nhn.map.search"),a=b.AbstractMapView;
b.EmptyMapView=iron.Class(a,{initialize:function(){a.apply(this,arguments)
},_afterDraw:function(){}})
}());
iron.ns("nhn.map.service").CardTooltip=iron.Class({inherit:nhn.map.Dispatcher},{TOOLTIP_MARGIN:5,SHOWING_MAX_NUMBER_OF_CARDS:2,initialize:function(){this._template=nhn.mapservice.TemplateRepos.get("card_tooltip");
this._prepareDOM()
},_prepareDOM:function(){this._el=$(this._template.processWithTrim({}));
this._dataEl=this._el.find("._cardList")
},getElement:function(){return this._el[0]
},_setDataEl:function(a){this._dataEl.empty();
if(a.length===0){return false
}a.forEach(function(b){var c=b.name,d=b.benefit;
this._dataEl.append("<p><strong>"+c+"</strong> "+d+"</p>")
}.bind(this));
return true
},_getContainer:function(){return $("#container")
},_getTooltipOffset:function(b){var a=this._getContainer(),d=this._getOffsetRelativeToOffsetParent(a,b);
var c={left:d.left+b.outerWidth(true)/2-this._el.outerWidth(true)/2,top:d.top+b.height()+this.TOOLTIP_MARGIN};
return c
},_getOffsetRelativeToOffsetParent:function(d,b){var e=this._getPositionIncludingMargin(b),c=b.offsetParent();
while(!c.is(d)&&!c.is($(document.body))){b=b.offsetParent();
c=b.offsetParent();
var a=this._getPositionIncludingMargin(b);
e.left+=a.left;
e.top+=a.top
}return e
},_getPositionIncludingMargin:function(b){var a=b.position(),d=parseInt(b.css("margin-top"),10),c=parseInt(b.css("margin-left"),10);
if(!isNaN(d)){a.top+=d
}if(!isNaN(c)){a.left+=c
}return a
},_shuffleCards:function(d){var c=d.length,b,a;
if(c===0){return
}while(--c){b=Math.floor(Math.random()*(c+1));
a=d[c];
d[c]=d[b];
d[b]=a
}}});
(function(){var d=iron.ns("nhn.map.search"),b=8,a=[],e,c;
d.AdPinService=iron.Class(nhn.map.Dispatcher,{initialize:function(){e=false;
c=""
},search:function(){if(!e&&this.$Map().getLevel()>b&&!this.$Panorama().isPlaying()&&(this.$Menubar()&&this.$Menubar().getMenuState()==="LOCATION")){this._search()
}},_search:function(){var f=this.$Search().getQuery();
if(!f){return
}a=this.$Map().getBoundAsLatLng();
this.$Control().searchAdPins(f,a)
},_bindMapEvents:function(){this.$Map().attach({CHANGE_MAP_DONE:this._onChangeMap.bind(this),SET_MAP_SIZE:this._onChangeMap.bind(this),PAN_MAP_START_DONE:this._suspend.bind(this),PAN_MAP_END_DONE:this._resume.bind(this),BEGIN_DRAG:this._beginDrag.bind(this),END_DRAG:this._endDrag.bind(this)});
this.$Control().attach("adpin_update",this._onPinLabelUpdate.bind(this))
},_bindPanoEvents:function(){this.$Panorama().attach({openPanorama:this._suspend.bind(this),closePanorama:this._resume.bind(this)})
},_bindMenuEvents:function(){this.$Menubar().attach({change:this._onChangeMenu.bind(this)})
},_onChangeMenu:function(f){if(f.newMenu!=="LOCATION"&&f.prevMenu==="LOCATION"){this._suspend()
}else{if(f.newMenu==="LOCATION"&&f.prevMenu!=="LOCATION"){this._resume()
}}},_onChangeMap:function(f){if(this.$Map().getBoundAsLatLng().join(":")!==a.join(":")){if(this.$Map().getLevel()>b){this.search()
}else{if(this.$Map().getLevel()<=b){this.$Control().clearPins();
this.$Control().closeInfowindow();
a=[]
}}}},_onPinLabelUpdate:function(f){this.dispatch("adpin_update",{id:f.id,html:f.html})
},getAdPinLabelHTML:function(f){return this.$Control().getLabelHTML(f)
},clear:function(){this.$Control().clearPins()
},_suspend:function(f){this.$Control().clearPins();
e=true;
this.$Control().setSuspend(e)
},_resume:function(f){e=false;
this.$Control().setSuspend(e);
this.search()
},updateDupLayer:function(f){this.$Control().updateDupLayer(f)
},_beginDrag:function(f){c=f.domEvent.pageX+" "+f.domEvent.pageY
},_endDrag:function(g){var f=g.domEvent.pageX+" "+g.domEvent.pageY;
if(f!==c){this.search()
}c=""
},updateAdPinLabelHTML:function(g,f){this.$Control().updateAdPinLabelHTML(g,f)
}})
}());
(function(){var f=iron.ns("nhn.map.search"),a={search_pins:"/search2/searchAdPinWithinRectangle.nhn",info_pin:"/search2/getAdSiteInfo.nhn"},b=100,d=new nhn.map.Size(10,11),c=new nhn.map.Offset(0,-120),e=[],g=false;
f.AdPinControl=iron.Class(nhn.map.AbstractDAO,{initialize:function(){},searchAdPins:function(h,j){if(!!h){var i=this._refinePinParams(h,j);
this._requestAdPins(i,this._onAdPins.bind(this),this.clearPins.bind(this))
}else{this.clearPins()
}},_getPinByID:function(m){var h;
for(var k=0,j=e.length;
k<j;
++k){if(m===e[k].id){h=e[k];
break
}}return h
},_getPinDataByID:function(m){var h;
for(var k=0,j=this._adPins.length;
k<j;
++k){this._adPins[k].type="adPin";
if(m===this._adPins[k].id){h=this._adPins[k];
break
}}return h
},_refinePinParams:function(h,i){return{query:h,boundary:i[0]+";"+i[3]+";"+i[2]+";"+i[1],pageSize:b}
},_onAdPins:function(h){if(g){this.clearPins()
}else{this._drawAdPins(this._prepareAdPins(h))
}this._adPins=h.result.pin||[]
},_drawAdPins:function(h){this.clearPins();
this._addPins(h)
},clearPins:function(){for(var h=e.pop();
!!h;
h=e.pop()){this.$Map().removeMarker(h)
}this.$InfoLayer().hide()
},_addPins:function(l){for(var k=l.length-1,j=0;
k>=j;
k--){var h=this._createMarker(l[k]);
e.push(h);
this.$Map().addMarker(h)
}if(e.length>0){this.$InfoLayer().show()
}},_createMarker:function(i){var k=new nhn.map.service.MarkerSpriteIcon("ADPIN","mmk.adpin"),j=this._optionize(i),h=new nhn.map.service.Marker(k,j);
h.attach("click",this._onClickAdPin.bind(this,j));
return h
},_onClickAdPin:function(h,j){var i=this._getMarkerData(j.markerInfo.id,this._openInfoWindowLater.bind(this));
this._getPinByID(j.markerInfo.id).unselect();
if(i.valid){this.$Infowindow().openAdPinWindow(this._refineAdSiteData(i));
nhn.map.service.ADCR.log({x:h.x2,p:"marker"})
}},_openInfoWindowLater:function(h){var j=h.result.sites[0],k="adpin_"+j.id,i;
this._refinePinInfo(j);
i=this._getMarkerData(k);
this.$Infowindow().openPOIWindow(this._refineAdSiteData(i))
},_refineAdSiteData:function(i){var h=this._getPinDataByID(i.id);
var j=$.extend({isAd:true,isPollingPlace:"0",hasCardBenefit:false,displayHomepage:"",petrolInfo:null,selectedPinData:h},i);
return j
},_optionize:function(i){var h={title:"광고핀",id:"adpin_"+i.id,type:"ADPIN",point:new nhn.mapcore.LatLng(i.y,i.x),siteId:i.id,streetPanorama:null,groupIndex:0,smallIcon:new nhn.map.service.SmallIcon("ADPIN"),x1:i.x1,x2:i.x2};
return h
},_prepareAdPins:function(h){return !!h.result.pin?h.result.pin:[]
},_requestAdPins:function(j,h,i,k){if(this._adPinXHR){this._adPinXHR.abort();
delete this._adPinXHR
}this._adPinXHR=this._request({url:a.search_pins,dataType:"json",data:j,successRule:{result:true},success:h,error:i,abort:k});
return this._adPinXHR
},_requestPinInfo:function(j,h,i,k){if(this._adPinInfoXHR){this._adPinInfoXHR.abort();
delete this._adPinInfoXHR
}if(!h){h=function(l){this._refinePinInfo(l.result.sites[0])
}.bind(this)
}this._adPinInfoXHR=this._request({url:a.info_pin,dataType:"json",data:j,successRule:{result:true},success:h,error:i,abort:k});
return this._adPinInfoXHR
},_refinePinInfo:function(k){var m="adpin_"+k.id;
for(var j=0,h=e.length;
j<h;
++j){if(m===e[j].id){e[j].info=k;
e[j].title=k.name;
e[j].cached=true;
break
}}},_getMarkerData:function(k,h){var j={id:k,valid:false},i=this._getPinByID(k);
if(!!i&&!i.cached){this._requestPinInfo({query:k.split("_")[1]},h)
}else{if(!!i){j=$.extend(j,i.info);
j.valid=true
}}return j
},getLabelHTML:function(h){return this.$ADLabel().getLabelHTML({id:h,valid:false})
},updateDupLayer:function(i){var h=this._getUnknownPinIDs(i),j=h.splice(0,10);
if(j.length>0){this._requestPinInfo({query:j.join(":")},this._updateDupLayer.bind(this,i))
}},_getUnknownPinIDs:function(k){var q=[],p=[];
for(var o=0,r=k.child(),m=r.length;
o<m;
++o){var h=r[o].attr("id").split(":")[1];
if(h.indexOf("adpin")===0){q.push(h)
}}for(var o=0,m=e.length;
o<m;
++o){for(var n=0,s=q.length;
n<s;
++n){if(e[o].id===q[n]){if(!e[o].cached){p.push(q[n].split("_")[1])
}}}}return p
},_updateDupLayer:function(m,t){for(var q=0,s=t.result.sites,n=s.length;
q<n;
++q){var k="adpin_"+s[q].id,h=s[q].name;
this._refinePinInfo(s[q]);
for(var p=0,o=m.child(),v=o.length;
p<v;
++p){var w=o[p].attr("id").split(":")[1];
if(k===w){var r=$(o[p]._element),u=r.find("a"),x=r.find("img");
u.text(s[q].name);
x.attr("title",s[q].name);
x.attr("alt",s[q].name)
}}}this.updateDupLayer(m)
},setSuspend:function(h){g=h
},closeInfowindow:function(){if(!!this.$Infowindow().getCurrentWindow()&&this.$Infowindow().getCurrentWindow().getType()==="AD"){this.$Infowindow().close()
}},updateAdPinLabelHTML:function(n,k){var m,j,h;
for(j=0,h=e.length;
j<h;
++j){if(e[j].id===n){m=e[j]
}}if(!!m&&m.cached){this._updateAdPinLabelHTML(k,$.extend({id:n,valid:true},m.info))
}else{this._requestPinInfo({query:n.split("_")[1]},this._onUpdateAdPinLabelInfo.bind(this,k))
}},_onUpdateAdPinLabelInfo:function(i,h){var k=h.result.sites[0],l="adpin_"+k.id,j;
this._refinePinInfo(k);
j=this._getMarkerData(l);
this._updateAdPinLabelHTML(i,j)
},_updateAdPinLabelHTML:function(j,l){var i=j.find(".adly"),p=i.parent(),n,h="adpin_"+l.id;
l.id=h;
n=this.$ADLabel().getLabelHTML(l);
if(i.attr("id")===h){var q,k,m,o;
o=i.find(".spmh_spot_arrow2").hasClass("spmh_spot_arrow2_rgt");
k=i.outerHeight();
i=$(n);
if(o){i.find(".spmh_spot_arrow2").addClass("spmh_spot_arrow2_rgt")
}j.show();
p.empty();
p.append(i);
q=i.outerHeight();
m=j.position();
j.css("top",m.top+(k-q)/2+"px");
j.css("visibility","visible");
j.show()
}}})
}());
nhn.mapservice.TemplateRepos.add({ad_pin_label:function(_d_){var p=[];
with(_d_){p.push('<div class="adly" id="',id,'">     <div class="spotly_detail">         <div class="spotly_flexible"> ');
if(valid){p.push('             <h3 class="sh_h"><a href="#">',name,'</a></h3>             <strong class="addr">',address,'</strong>         </div>         <div class="default_block">             <p class="info_tel"> ');
if(phone){p.push('                 <span class="tel">',phone,'</span>                 <span class="bar">|</span> ')
}p.push(" ");
if(category){p.push('                 <span class="cate">',category,"</span> ")
}p.push("             </p> ")
}p.push('         </div>     </div>     <div class="spmh spmh_spot_arrow2"></div>     <div class="spotly_oc"></div> </div>')
}return p.join("")
},adpin_info:function(_d_){var p=[];
with(_d_){p.push('<div class="around_ad" style="display:none;">     <a href="#" class="spmh spmh_adpin_v2">광고</a>     <div class="ly_ad_txt" style="display:none;">         <p>지도 위 붉은핀은 등록업체의 위치 표시입니다.</p>         <span class="spmh spmh_arr"></span>     </div> </div>')
}return p.join("")
}});
(function(){var b=iron.ns("nhn.map.search"),a=nhn.mapservice.TemplateRepos.get("ad_pin_label");
b.AdPinLabelLayer=iron.Class({initialize:function(){},getLabelHTML:function(c){return a.process(c)
}})
}());
(function(){var d=iron.ns("nhn.map.search"),c=$(nhn.mapservice.TemplateRepos.get("adpin_info").process()),e,b,a;
d.AdPinInfoView=iron.Class({initialize:function(){this._checkReady()
},_init:function(){c.insertAfter(".around_info");
b=c.find(".spmh_adpin_v2");
e=c.find(".ly_ad_txt");
this._setEventHandlers();
this.show=this._show;
this.hide=this._hide
},_setEventHandlers:function(){b.on("click",this._onButtonClick.bind(this))
},_onButtonClick:function(f){f.preventDefault();
f.stopPropagation();
this._showDetail()
},_hideDetail:function(){e.hide()
},_showDetail:function(){clearTimeout(a);
e.stop();
e.hide();
e.fadeIn(100,function(){a=setTimeout(function(){e.fadeOut(500)
},3000)
})
},_checkReady:function(f){if($(".around_info").length>0){this._init();
if(f==="show"){this.show()
}else{if(f==="hide"){this.hide()
}}}},show:function(){this._checkReady("show")
},_show:function(){c.show()
},hide:function(){this._checkReady("hide")
},_hide:function(){this._hideDetail();
c.hide()
}})
}());(function(e,a,d){var c=a.ns("nhn.map.bookmark"),b=d.extend({},e.map.bookmark.Const.BOOKMARK_TYPE);
c.Util={zeroPadding:function(i,f){var g=parseFloat(i,10),h=f||7;
return isNaN(g)?i:g.toFixed(h)
},stripHtmlTag:function(f){return f.replace(/(<([^>]+)>)/ig,"")
},requestAddress:function(g,f){if(!this._addrService){this._addrService=e.map.service.AddressService.getInstance()
}this._addrService.requestAddress(g,function(h){f(h)
}.bind(this),function(){e.map.service.Alert("해당 장소의 지역정보가 없어<br>즐겨찾기를 제한합니다.")
})
},getSpotTypeByMarkerId:function(g){var f="ADDRESS";
if(g&&g.indexOf("_")>-1){f=g.split("_")[0]
}return f
},generateBookmark:function(l,g,m){var k=g?g.type||this.getSpotTypeByMarkerId(g.markerId):"ADDRESS",i,j,n,f,h;
if(g&&(k==="DirectionsStep"||k==="NumberStep"||k==="transport")){i=ctx.get("directions_service").getAllSpots();
j=i.waypoints||[];
n=d("#"+g.markerId);
if(n.hasClass("_route_start")){f=this._getSpotId(i.departure)
}else{if(n.hasClass("_route_end")){f=this._getSpotId(i.destination)
}else{if(n.hasClass("_route_via")&&j.length>0){h=Number(g.markerId.replace(/ROUTE_way|ROUTE_POINT_VIA_/,""));
if(g.markerId.indexOf("ROUTE_POINT_VIA_")>-1){h=h-1
}f=this._getSpotId(j[h])
}}}if(f){g.id=f
}else{k=g.markerId?this.getSpotTypeByMarkerId(g.markerId):"ADDRESS"
}}if(k==="BOOKMARK"){e.map.service.Alert&&e.map.service.Alert("즐겨찾기로 이미 등록된 장소입니다.")
}else{if(k==="ADDRESS"||k==="HOME"||k==="ROUTE"||k==="FLIGHT"||k==="BUS"){this.createAddressBookmark(l.toLatLng(),g?g.title:"",m)
}else{this.createPlaceBookmark(l.toLatLng(),g,m)
}}},_getSpotId:function(g){if(!g||!g.getType()){return null
}var f=g.getType();
if(f.indexOf("SITE")>-1){return g.getId()
}else{return null
}},createAddressBookmark:function(h,f,g){this.requestAddress(h,function(i){if(i){i.jibun_x=h.x;
i.jibun_y=h.y;
i.MarkerType=i.MarkerType||"ADDRESS";
i.name=i.name||i.displayName||i.address;
var j=c.BookmarkModelFactory.createBookmark(i);
j.setType(b.ADDRESS);
if(f!="명칭 없음"&&!!f){j.setName(f);
j.setDisplayName(f)
}g&&g(j)
}else{e.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.")
}}.bind(this))
},requestSiteInfoById:function(i,h){var f=ctx.get("bookmark_service"),g=f.$BookmarkDao();
g.requestSiteInfo(i,h,function(){e.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.")
})
},createPlaceBookmark:function(h,f,g){this.requestSiteInfoById(f.id||f.markerId,function(j){var i=j.result,l={name:i.name,displayName:i.name,isHome:false,shortcutType:null,px:i.x,py:i.y,address:i.address};
if(this._checkIsStationType(i.theme)){l.stationId=i.subwayId;
l.bookmarkType=b.STATION
}else{l.sid=i.id;
l.bookmarkType=b.PLACE
}var k=c.BookmarkModelFactory.createBookmark(l);
g&&g(k)
}.bind(this))
},checkBookmarkType:function(f){if(f.bookmarkType){return
}if(f.MarkerType){this._processWhenIdType(f);
switch(f.MarkerType){case"SITE":case"AD":case"SUBWAY":case"SPOT":if(this._checkIsStationType(f)){f.bookmarkType=b.STATION
}else{if(f.MarkerType=="SPOT"&&!f.indoorMapInfo){return
}f.bookmarkType=b.PLACE
}break;
case"ADDRESS":f.bookmarkType=b.ADDRESS;
break;
case"BUS":case"BUS_ROUTE":case"BUS_STATION":if(f.stationClass){f.bookmarkType=b.BUS_STOP
}else{f.bookmarkType=b.BUS
}break
}}else{if(f.stationClass){if(2<=f.stationClass&&f.stationClass<=6){f.bookmarkType=b.STATION
}else{if(f.stationClass==1&&f.busID){f.bookmarkType=b.BUS_STOP_LANE
}else{if(f.stationClass==1){f.bookmarkType=b.BUS_STOP
}}}}}},_processWhenIdType:function(f){if(f.MarkerType!="ID"){return
}if(f._searchType=="BUS"){f.MarkerType="BUS"
}else{f.MarkerType="SITE"
}},_checkIsStationType:function(f){var g=f.theme||f;
return this._stringToBoolean(g.isSubway)
},_stringToBoolean:function(f){if(typeof(f)!="string"){return f
}switch(f.toLowerCase()){case"1":return true;
case"0":return false;
default:return Boolean(f)
}},generateKeyFromData:function(m){var k=d.extend({},m),u=null;
this.checkBookmarkType(k);
switch(k.bookmarkType){case b.ADDRESS:var r=k.fullAddress||k.mappedAddress;
u=this._generateKeyPointBased(b.ADDRESS,r,k.x,k.y);
break;
case b.PLACE:var h=k.id||k.sid;
h=h?h.replace(/[^0-9]/gi,""):null;
u=[b.PLACE,h].join("|");
break;
case b.BUS_STOP:var t=k.id||k.BusStopID||k.stationID;
u=this._generateKeyBusStop(b.BUS_STOP,t);
break;
case b.BUS:var o=k.cityCode||k.busCityCode;
var i=k.id||k.busID;
u=this._generateKeyBusRoute(b.BUS,o,i,k.type);
break;
case b.BUS_STOP_LANE:var q=this._generateKeyBusStop(b.BUS_STOP,k.stationID),f=this._generateKeyBusRoute(b.BUS,k.busCityCode||k.cityCode,k.busID,k.busType);
u=[q,f].join("|");
break;
case b.STATION:var s=k.theme&&k.theme.themeId;
var j=s||k.stationId||k.stationID||k.subwayID;
u=[b.STATION,j].join("|");
break;
case b.ROUTE:u=this._generateRouteKey(b.ROUTE,k.startInfo,k.viaInfo||[],k.endInfo,k.pathType,k.dtPathType,k.isInterCity||false);
break;
case b.SUBWAY:var p=k.stationId||k.stationID||k.subwayID;
u=[b.SUBWAY,p].join("|");
break;
case b.SUBWAY_PATH:var n=k.startStationID||k.startStationId,l=k.endStationID||k.endStationId,g=k.pathType;
u=[b.SUBWAY_PATH,n,l,g].join("|");
break
}return u
},_generateKeyPointBased:function(h,k,j,i){var g=this.zeroPadding(j),f=this.zeroPadding(i);
return[h,k,g,f].join("|")
},_generateKeyBusRoute:function(f,h,i,g){return[f,h,i,g].join("|")
},_generateKeyBusStop:function(f,g){return[f,g].join("|")
},generateModelKey:function(h){this.checkBookmarkType(h);
var g=h.getType();
var f=null;
switch(g){case b.PLACE:f=this._generatePlaceKey(h);
break;
case b.ADDRESS:f=this._generateAddressKey(h);
break;
case b.BUS_STOP:f=this._generateBusStopKey(h);
break;
case b.BUS:f=this._generateBusRouteKey(h);
break;
case b.BUS_STOP_LANE:f=this._generateBusStopRouteKey(h);
break;
case b.STATION:f=this._generateStationKey(h);
break;
case b.ROUTE:f=this._generateRouteKey(b.ROUTE,h.getStartPoint(),h.getViaPoint(),h.getEndPoint(),h.getPathType(),h.getDtPathType(),h.getIsInterCity());
break;
case b.SUBWAY:f=this._generateStationKey(h);
break;
case b.SUBWAY_PATH:f=this._generateSubwayPathKey(h);
break
}return f
},_generateRouteKey:function(k,i,h,n,g,f,j){this.zeroPadding(i.lng);
this.zeroPadding(i.lng);
var r=this.zeroPadding(i.lng),q=this.zeroPadding(i.lat);
var l=h.map(function(s){return[this.zeroPadding(s.lng),this.zeroPadding(s.lat)]
}.bind(this)).reduce(function(t,s){return t.concat(s)
},[]).join("|");
var p=this.zeroPadding(n.lng),o=this.zeroPadding(n.lat),m=!!j;
return[k,g,f,m,r,q,l,p,o].filter(function(s){return s!==""
}).join("|")
},_generatePlaceKey:function(h){var f=h.getSID(),g=h.getType();
return[g,f].join("|")
},_generateAddressKey:function(j){var i=j.getPX(),g=j.getPY(),f=j.getAddress()||j.getMappedFullAddress(),h=j.getType();
return this._generateKeyPointBased(h,f,i,g)
},_generateBusStopKey:function(g){var h=g.getStationId(),f=g.getType();
return this._generateKeyBusStop(f,h)
},_generateBusRouteKey:function(i){var f=i.getType(),h=i.getCityCode(),j=i.getBusId(),g=i.getBusType();
return this._generateKeyBusRoute(f,h,j,g)
},_generateBusStopRouteKey:function(h){var i=h.getStationId(),k=h.getCityCode(),l=h.getBusId(),j=h.getBusType(),f=this._generateKeyBusStop(b.BUS_STOP,i),g=this._generateKeyBusRoute(b.BUS,k,l,j);
return[f,g].join("|")
},_generateStationKey:function(g){var f=g.getType(),h=g.getStationId();
return[f,h].join("|")
},_generateSubwayPathKey:function(g){var f=g.getType(),i=g.getStartStationID(),j=g.getEndStationID(),h=g.getPathType();
return[f,i,j,h].join("|")
},getSpotIdFromText:function(h){var g=/\{\{id\:(\S+)\}\}/g,f=g.exec(h);
return f&&f.length>1?f[1]:""
},getSpotTextOnly:function(g){var f=/\{\{id\:(\S+)\}\}/g;
return g.replace(f,"")
},getTextWithSpotId:function(f,g){return f+(g?"{{id:"+g+"}}":"")
}}
}(nhn,iron,jQuery));
(function(){var d=iron.ns("nhn.map.bookmark"),b=$.extend({},d.Const.BOOKMARK_TYPE);
d.Overlay=iron.Class({initialize:function(g){this._bookmark=g;
this.marker=this._createMarker()
},_createMarker:function(){var i=this._bookmark,g=null,h={id:"BOOKMARK_"+i.getBookmarkId(),title:i.getDisplayName()||i.getName(),bookmarkId:i.getBookmarkId(),bookmarkType:i.getType()};
switch(i.getType()){case b.PLACE:h=$.extend(h,{sid:i.getSID()});
g=e(i,h);
break;
case b.ADDRESS:g=a(i,h);
break;
case b.BUS_STOP:case b.BUS_STOP_LANE:h=$.extend(h,{stationID:i.getStationId(),stationClass:i.getStationClass()});
g=new d.BusStopMarker(i.getPoint().toInner(),h);
break;
case b.STATION:h=$.extend(h,{stationID:i.getStationId(),stationClass:i.getStationClass()});
g=new d.PublicTransitMarker(i.getPoint().toInner(),h);
break
}return g
},getBookmark:function(){return this._bookmark
},getMarker:function(){return this.marker
}});
d.Overlay.createPlaceMarker=function(g,h){return new d.SpotMarker(g.toInner(),h)
};
function f(h){h.smallIcon=new nhn.map.service.SmallIcon("BOOKMARK");
h.point=h.point.toLatLng();
var g=new d.PolyMarker(h.point,h);
return g
}function c(g){return g&&g.hasRoad
}function e(i,h){var k=i.getPoiInfo(),g;
if(c(k)){var j={poiInfo:i.getPoiInfo(),point:i.getPoint(),title:i.getDisplayName()||i.getName(),type:"SITE"};
h=$.extend(h,j);
h.isPoi=true;
g=f(h)
}else{g=new d.SpotMarker(i.getPoint().toInner(),h)
}return g
}function a(j,h){var k=j.getPolyInfo(),i=$.extend(h,{address:j.getAddress(),name:j.getName(),xPos:j.getPX(),yPos:j.getPY(),rcode:j.getRCode(),fullAddress:j.getAddress(),isNewAddress:j.getIsNewAddress(),mappedAddress:j.getMappedAddress()}),g;
if(k){i=$.extend(i,{polyInfo:k});
g=new d.AddressPolyMarker(j.getPoint().toInner(),i)
}else{var g=new d.AddressMarker(j.getPoint().toInner(),i)
}return g
}}());
(function(j,k,e,c){var d=k.ns("nhn.map.bookmark"),g=function(){var l=this._currentApiId
},b=e.extend({},d.Const.BOOKMARK_GROUP),h=e.extend({},d.Const.BOOKMARK_TYPE),f=e.extend({},d.Const.BOOKMARK_SORT_ORDER),a=12;
d.BookmarkService=k.Class({inherit:k.KVO},{initialize:function(){k.KVO.apply(this);
this._healthy=true;
this._bookmarkList=new d.BookmarkList();
this._homeBookmarkList=new d.BookmarkList();
this._loaded=false;
this._isBusRouteLayerOfList=false;
this._bookmarkSortOrder;
this.$Login().attach({afterLogin:i.bind(this)})
},isHealthy:function(){return this._healthy
},_listenDAO:function(l){var m=this;
l.attach({responseSuccess:function(n){m._currentApiId=n.apiId;
m._healthy=true;
m.dispatch("responseSuccess",{apiId:n.apiId,response:n.response})
},responseError:function(n){m._currentApiId=n.apiId;
m._healthy=false;
m.dispatch("responseError",{apiId:n.apiId})
}})
},_setBookmarkList:function(m){var l=m.result.bookmark.map(function(n){return d.BookmarkModelFactory.createBookmark(n)
});
this._bookmarkList=new d.BookmarkList(l);
this._bookmarkList.setBookmarkCount(m.result);
this._bookmarkList.setSortOrder(m.result.sortOrder)
},_setBookmarkGroupType:function(l){this._bookmarkGroupType=l
},_setHomeBookmarkList:function(m){if(m.result){var l=m.result.homeBookmark.map(function(n){return d.BookmarkModelFactory.createBookmark(n)
});
this._homeBookmarkList=new d.BookmarkList(l);
this._homeBookmarkList.setBookmarkCount(m.result)
}},getBookmarkList:function(){return this._bookmarkList
},getBookmarkGroupType:function(){return this._bookmarkGroupType
},getBookmarkListAsData:function(m,l){return this._bookmarkList.getBookmarkAsData(m,l)
},getBookmarkListAsEachData:function(l,m){return this._bookmarkList.getBookmarkAsEachData(l,m)
},getBookmarkByKey:function(l){return this._bookmarkList.getBookmarkByKey(l)
},getBookmarkById:function(l){return this._bookmarkList.getBookmarkById(l)
},getBookmarkCount:function(){return this._bookmarkList.getBookmarkCount()
},getHomeBookmarkList:function(){return this._homeBookmarkList
},isBookmarked:function(l){return !!this.getBookmarkByKey(l)
},addBookmarkOverlay:function(l,m){this.$BookmarkOverlayMgr().addBookmarkOverlay(l).done(function(n){m&&m(n)
})
},removeBookmarkOverlayById:function(l){this.$BookmarkOverlayMgr().removeBookmarkOverlayById(l)
},removeAllBookmarkOverlay:function(){this.$BookmarkOverlayMgr().removeAllBookmarkOverlay()
},updateBookmarkUseTime:function(l){var n=this.getBookmarkById(l);
this.$BookmarkDao().updateBookmarkUseTime(l);
if(this._bookmarkSortOrder===f.BY_LAST_USE_TIME){var o=this.getBookmarkList(),m=o.getAllBookmark();
o.remove(n);
m.unshift(n);
this.dispatch("update",{bookmark:n})
}},selectBookmark:function(l){var m=this.getBookmarkById(l),n=function(){this.dispatch("select",{bookmark:m});
if(m.getType()===h.BUS_STOP){this.$map().setLevel(a)
}}.bind(this);
if(!m||l===this._selectedBookmarkId){return
}this.deselectBookmark(this._selectedBookmarkId);
this._selectedBookmarkId=l;
if(m){switch(m.getType()){case h.PLACE:case h.ADDRESS:case h.BUS_STOP:case h.STATION:this.addBookmarkOverlay(m,n);
break;
case h.BUS:this.showBusRoute(m);
break;
case h.BUS_STOP_LANE:this.showBusRouteStop(m);
break;
case h.ROUTE:this.showRoute(m);
break;
case h.SUBWAY:case h.SUBWAY_PATH:NModules.load("subway",function(){this.$SubwayService().showSubwayRouteByBookmark(m)
}.bind(this));
break
}}this.updateBookmarkUseTime(l)
},deselectBookmark:function(l){var m=this.getBookmarkById(l);
if(!m){return
}if(l!=this._selectedBookmarkId){return
}else{this._selectedBookmarkId=null
}this.dispatch("deselect",{bookmark:m})
},getSelectedBookmark:function(){return this.getBookmarkById(this._selectedBookmarkId)
},showRoute:function(t){var o=t.getStartPoint(),n=t.getViaPoint(),u=t.getEndPoint(),m=t.getPathType(),l=t.getDtPathType(),v=this._makeRouteString(o),r=this._makeEntranceString(o),w=this._makeRouteString(u),p=this._makeEntranceString(u),s=[],y=[],q,x;
for(q=0,x=n.length;
q<x;
q++){s[q]=this._makeRouteString(n[q]);
y[q]=n[q].id||null
}if(s.length===0){s=null;
y=null
}else{s=s.join("|");
y=y.join("|")
}NModules.load("directions",function(){this.$directions().findExDirections({departure:v,departureId:o.id,destination:w,destinationId:u.id,etDestination:p,etDeparture:r,waypoints:s,waypointIds:y,type:m,option:l,searchType:0})
}.bind(this))
},_makeRouteString:function(l){return[l.lng,l.lat,l.text].join(",")
},_makeEntranceString:function(l){if(l.elng&&l.elat){return[l.elng,l.elat].join(",")
}return null
},showBusRoute:function(m,l){var o=m.getBusId(),n=e.extend({bMoveToCenter:false,bMoveBound:true,bHide:false,noResultBusRouteCallback:function(){j.map.service.Alert("해당 정보가 확인되지 않아,<br>즐겨찾기에서 불러올 수 없습니다.")
}},l);
this._isBusRouteLayerOfList=true;
NModules.load("bus",function(){this.$BusService().showBusRouteByID(o,n)
}.bind(this))
},showBusRouteStop:function(l){this.showBusRoute(l,{moveBound:false,stationID:l.getStationId(),openStationWindow:true})
},markBookmarkStud:function(n){var l=e(".spm_lst_fav",n);
if(!l){return
}if(this.isLoggedIn()){if(this.isLoaded()){var m=this.getBookmarkList();
e.each(l,function(o,r){var q=e(r),s=q.data("bookmark-key"),p=m.getBookmarkByKey(s);
if(p){this.mark(q)
}else{this.unmark(q)
}}.bind(this))
}else{this.requestBookmarkList()
}}},mark:function(l){l.addClass("on").attr("title","즐겨찾기 삭제")
},unmark:function(l){l.removeClass("on").attr("title","즐겨찾기 추가")
},isLoggedIn:function(){return this.$Login().isLoginUser()
},login:function(m,l){this.$Login().checkLoginWithPopup(m,l||"bookmark")
},requestBookmarkList:function(n,o,l){if(e.isFunction(n)){l=o||null;
o=n;
n={}
}var m={sortOrder:f.BY_LAST_USE_TIME},n=e.extend(m,n);
this.$BookmarkDao().requestBookmarkList(n,function(p){if(p.result){this._setBookmarkList(p);
this._setHomeBookmarkList(p);
this._loaded=true;
if(!n.doNotTriggerForAll){this.dispatch("load",{bookmarkList:this.getBookmarkList(),homeBookmarkList:this.getHomeBookmarkList()})
}if(n.listType){p=this.getBookmarkListAsEachData(n.listType)
}o&&o(p)
}else{if(p.error&&p.error.code==="LE0200"){this.$Login().refreshLoginInfo()
}else{g.apply(this);
l&&l()
}}}.bind(this),function(){g.apply(this);
l&&l()
})
},addBookmark:function(m,l,n){if(e.isFunction(l)){n=l;
l={}
}this.$BookmarkDao().addBookmark(m,l,function(q){if(q.result){var p=q.result,o=d.BookmarkModelFactory.createBookmark(p);
this.requestBookmarkList(function(){this.dispatch("add",{bookmark:o})
}.bind(this))
}else{if((q.error&&q.error.code==="LE0301")){this.requestBookmarkList(function(){this.dispatch("update",{bookmark:o})
}.bind(this))
}}n&&n(q)
}.bind(this))
},addBookmarkByBookmarkStud:function(n,o,m){var p=o||e("#wrap"),l={adjustPosition:false};
m=e.extend(l,m);
this.login(function(){this.addBookmark(n,m,function(q){if(q.error&&q.error.code==="LE0301"){this.dispatch("errorWhenBookmarkAdded",{errorObj:q.error})
}else{this.dispatch("showAddCompleteDialog",{container:p,options:m});
setTimeout(function(){this.dispatch("hideAddCompleteDialog",{container:p,options:m})
}.bind(this),1000)
}}.bind(this));
NModules.has("mapcommon")&&this.$menubar().getMenuState()==="SUBWAY"&&j.map.LogPV("subwayroute_favorite")
}.bind(this))
},requestRoadInfo:function(q,m,o,s,n){var l=e.Deferred(),r=function(t){s&&s(t);
l.resolve(t)
},p=function(){n&&n();
l.resolve()
};
this.$BookmarkDao().requestRoadInfo(q,m,o||{},r,p);
return l.promise()
},requestSiteInfo:function(l,n,m){this.$BookmarkDao().requestSiteInfo(l,n,m)
},updateBookmark:function(m,l,n){this.$BookmarkDao().updateBookmark(m,l,function(q){if(q.result){var p=q.result,o=d.BookmarkModelFactory.createBookmark(p);
this.requestBookmarkList(function(){this.dispatch("update",{bookmark:o})
}.bind(this))
}n&&n(q)
}.bind(this),g.bind(this))
},removeBookmark:function(l,m){this.$BookmarkDao().removeBookmark(l,function(p){if(p.result){var o=p.result,n=d.BookmarkModelFactory.createBookmark(o);
if(n.isHome()){this.getHomeBookmarkList().removeById(n.getBookmarkId())
}this.getBookmarkList().removeById(n.getBookmarkId());
this.removeBookmarkOverlayById(l);
if(p.result.type===h.BUS&&this._isBusRouteLayerOfList){this._closeBusRouteLayer();
this._isBusRouteLayerOfList=false
}}if(!n){n=this.getBookmarkById(l);
this.getBookmarkList().removeById(l);
this.removeBookmarkOverlayById(l)
}this.dispatch("remove",{bookmark:n});
m&&m(p)
}.bind(this),g.bind(this))
},removeBookmarkByBookmarkStud:function(m,o){var n=e("#wrap"),l={adjustPosition:false};
this.removeBookmarkByKey(m,function(q){var p=q.result;
if(p&&p.error){this.dispatch("errorWhenBookmarkDeleted",{errorObj:p.error})
}else{this.dispatch("showDeleteCompleteDialog",{container:n,options:l});
setTimeout(function(){this.dispatch("hideDeleteCompleteDialog",{container:n,options:l})
}.bind(this),1000)
}o&&o(q)
}.bind(this))
},_closeBusRouteLayer:function(){NModules.has("bus")&&this.$BusService().closeBusRoute()
},removeBookmarkByKey:function(m,n){var l=this.getBookmarkByKey(m);
l&&this.removeBookmark(l.getBookmarkId(),n)
},isLoaded:function(){return this._loaded
},searchDirections:function(l){this._searchDirectionsCallback&&this._searchDirectionsCallback(l)
},showListDialog:function(o,p,n){var m=p||e("#wrap"),l={adjustPosition:true,sortOrder:f.BY_LAST_USE_TIME},n=e.extend(l,n);
this.login(function(){this.dispatch("showListDialog",{bookmark:o,container:m,options:n});
this._searchDirectionsCallback=n.callback
}.bind(this))
},showEditDialog:function(o,q,n){var p=this.getBookmarkById(o),m=q||e("#wrap"),l={adjustPosition:true,dialogType:"edit"};
n=e.extend(l,n);
this.login(function(){this.dispatch("showEditDialog",{bookmark:p,container:m,options:n})
}.bind(this))
},showDeleteDialog:function(l){j.map.service.Confirm("즐겨찾기 삭제 하시겠습니까?","삭제 시 홈 설정 및 즐겨찾기 목록에서 삭제 됩니다.",function(m){m&&this.removeBookmark(l)
}.bind(this))
},showHomeListSettingDialog:function(m){var o=e("#wrap"),l={adjustPosition:true,group:"all",maxDisplayCount:200,sortOrder:f.BY_LAST_USE_TIME},n=function(){this.dispatch("showHomeListSettingDialog",{container:o,options:m})
}.bind(this);
m=e.extend(l,m);
this.login(function(){var p=this.isLoaded();
this.requestBookmarkList(n)
}.bind(this))
},showHomeAndCompanySettingBySearchDialog:function(m){var n=e("#wrap"),l={adjustPosition:true};
m=e.extend(l,m);
this.login(function(){this.dispatch("showHomeAndCompanySettingBySearchDialog",{container:n,options:m})
}.bind(this))
},showHomeAndCompanySettingByBookmarkDialog:function(m){var n=e("#wrap"),l={adjustPosition:true,group:"place",maxDisplayCount:200,sortOrder:f.BY_LAST_USE_TIME};
m=e.extend(l,m);
this.login(function(){this.dispatch("showHomeAndCompanySettingByBookmarkDialog",{container:n,options:m})
}.bind(this))
},renderHomeBookmarkListTo:function(m){var l=function(){this.dispatch("renderHomeBookmarkList",{container:m})
}.bind(this);
if(this.isLoggedIn()){if(this.isLoaded()){l()
}else{this.requestBookmarkList(l,function(){this.dispatch("errorRenderHomeBookmarkList",{apiId:this._currentApiId,container:m})
}.bind(this))
}}else{l()
}},renderBookmarkListTo:function(o,m,p){var l={group:"all",maxDisplayCount:200,sortOrder:f.BY_LAST_USE_TIME},m=e.extend(l,m),n=function(){var q=this.getBookmarkList().getBookmarkAsData(m.group);
this.dispatch("renderBookmarkList",{container:o,group:m.group,maxDisplayCount:m.maxDisplayCount});
p&&p({count:q.length})
}.bind(this);
this._setBookmarkGroupType(m.group);
if(this.isLoggedIn()){this.requestBookmarkList({sortOrder:m.sortOrder},n,function(){this.dispatch("errorRenderBookmarkList",{apiId:this._currentApiId,container:o})
}.bind(this))
}else{n()
}},refreshBusLiveUpdate:function(o){var p=this.getBookmarkById(o),q=p.getStationId(),s=p.getBusId(),m=[],n=new Date(),r=function(t){if(t){n=j.map.service.DateFormatter.getDateByString(t.analysisDate);
t.locationNo1&&t.predictTime1&&m.push({locationNo:t.locationNo1,predictTime:t.predictTime1});
t.locationNo2&&t.predictTime2&&m.push({locationNo:t.locationNo2,predictTime:t.predictTime2})
}this.dispatch("updateBusArrival",{bookmarkId:o,liveInfo:m,driveEnd:t.driveEnd,errorCode:null,updateTime:n})
}.bind(this),l=function(t){this.dispatch("updateBusArrival",{bookmarkId:o,liveInfo:null,driveEnd:null,errorCode:(t&&t.error&&t.error.code)||12,updateTime:n})
}.bind(this);
if(NModules.has("bus")){this.$BusService().requestBusArrivalDataWithBusID(q,s,r,l)
}else{NModules.load("bus",function(){this.$BusService().requestBusArrivalDataWithBusID(q,s,r,l)
}.bind(this))
}},_listenMenuBar:function(){this.$menubar().attach({reset:this._onResetMenu.bind(this),change:this._onChangeMenu.bind(this)})
},_onResetMenu:function(l){this.$BookmarkOverlayMgr().removeAllBookmarkOverlay();
if(l.menu!=="BOOKMARK"){return
}this.dispatch("enterhome")
},_onChangeMenu:function(m){this.$BookmarkOverlayMgr().removeAllBookmarkOverlay();
if(m.newMenu!=="BOOKMARK"){this._selectedBookmarkId=null;
return
}var l={};
if(m.trigger!=="user"){switch(m.prevMenu){case"ROUTE":l.group=b.ROUTE;
break;
case"BUS":l.group=b.BUS;
break;
case"SUBWAY":l.group=b.SUBWAY;
break
}}this.dispatch("enterhome",{options:l})
},_listenSearch:function(){this.bindTo("_searchResult",this.$search())
},_searchResult_changed:function(l){if(!l||!l.value){return
}this.$BookmarkOverlayMgr().removeAllBookmarkOverlay()
},_listenBusService:function(){this.$BusService().attach({close_bus_route:this._onCloseBusRoute.bind(this)})
},_onCloseBusRoute:function(){var n=this.getSelectedBookmark();
if(!n){return
}var m=n.getType(),l=n.getBookmarkId();
if(m===h.BUS||m===h.BUS_STOP_LANE){this._closeBusRouteLayer();
this._isBusRouteLayerOfList=false;
this.deselectBookmark(l)
}},_listenSubwayService:function(){this.$SubwayService().attach({reset_service:this._onResetService.bind(this)})
},_onResetService:function(){var n=this.getSelectedBookmark();
if(!n){return
}var m=n.getType(),l=n.getBookmarkId();
if(m===h.SUBWAY||m===h.SUBWAY_PATH){this.deselectBookmark(l)
}},_listenContextMenu:function(){this._initContextMenu();
this.$ContextMenu().attach({updateContextMenuList:this._onUpdateContextMenuList.bind(this),item_clicked:this._onClickContextItem.bind(this)})
},_initContextMenu:function(){this.ctxMenuItem=new j.map.service.ContextMenuItem(300,100,"즐겨찾기 추가","ADD_BOOKMARK",false,"cw_favorite nclicks(map*R.bmkadd)");
this.$ContextMenu().addContextMenu(this.ctxMenuItem)
},_onUpdateContextMenuList:function(p){var n=p.markerId,o=p.target,m=d.Util.getSpotTypeByMarkerId(n),l=this.$ContextMenu();
switch(m){case"BOOKMARK":case"BUS":case"traffic":case"ROUTE":l.hideContextMenuList(this.ctxMenuItem);
break;
default:l.showContextMenuList(this.ctxMenuItem)
}this._updateContextMenu(m,o)
},_updateContextMenu:function(n,q){var p=NModules.has("indoor")?this.$IndoorMap().isIndoorMode():false,o=e(q).parent().data("id"),m=this.$ContextMenu(),l=this.ctxMenuItem;
if(p&&n=="ADDRESS"&&this.$IndoorMap().isActivatedIndoorPolygon(o)){m.hideContextMenuList(l)
}else{m.showContextMenuList(l)
}},_onClickContextItem:function(n){if(n.msgName!=="ADD_BOOKMARK"){return
}var p=this,l=n.point,m=n.itemInfo,o=function(){d.Util.generateBookmark(l,m,function(q){p.addBookmarkByBookmarkStud(q)
})
};
this.login(o,"ADD_BOOKMARK");
j.map.LogPV("favoritesadd")
},gatherUrlParameter:function(){var m=this.getSelectedBookmark(),l,n=null;
if(!m){return
}l=m.getType();
switch(l){case h.PLACE:n=this._getSiteUrlParameter(m);
break;
case h.STATION:case h.BUS_STOP:n=this._getStationParameter(m);
break;
case h.ADDRESS:n=this._getAddressUrlParameter(m);
break;
case h.BUS:case h.BUS_STOP_LANE:n={};
break;
case h.SUBWAY:n=this._getStationParameter(m);
break
}if(!n){n={}
}n.bmType=l;
return n
},_getSiteUrlParameter:function(m){var l=m.getSID();
return{pinId:l,pinType:"site"}
},_getAddressUrlParameter:function(o){var l=o.getAddress(),n=o.getPX(),m=o.getPY();
return{query:l,lng:n,lat:m,type:"address"}
},_getStationParameter:function(m){var n=m.getStationId(),l=m.getStationClass();
return{stationId:n,stationClass:l}
}});
function i(){if(this.$menubar&&this.$menubar().getMenuState()==="BOOKMARK"){this.$BookmarkOverlayMgr().removeAllBookmarkOverlay();
this.dispatch("enterhome")
}}}(nhn,iron,jQuery));
(function(){var b=iron.ns("nhn.map.bookmark"),a=$.extend({},b.Const.BOOKMARK_TYPE);
b.BookmarkModelFactory={createBookmark:function(e){b.Util.checkBookmarkType(e);
var c=e.bookmarkType||e.type,d=null;
switch(c){case a.PLACE:d=new b.SiteBookmark(e);
break;
case a.ADDRESS:d=new b.AddressBookmark(e);
break;
case a.ROUTE:d=new b.RouteCourseBookmark(e);
break;
case a.BUS:d=new b.BusRouteBookmark(e);
break;
case a.BUS_STOP:d=new b.BusStopBookmark(e);
break;
case a.BUS_STOP_LANE:d=new b.BusStopRouteBookmark(e);
break;
case a.STATION:d=new b.PublicTransitBookmark(e);
break;
case a.SUBWAY:d=new b.SubwayStationBookmark(e);
break;
case a.SUBWAY_PATH:d=new b.SubwayPathBookmark(e);
break
}return d
}}
}());
(function(a){a.BookmarkDataConverter={fromRouteCourseData:function(e){var b=e.currentRoutePoint;
var g={bookmarkType:"route",dtPathType:e.dtPathType,pathType:e.pathType,startInfo:this._convertStringPointToObject(b.start),endInfo:this._convertStringPointToObject(b.destination),etStartInfo:this._convertStringPointToObject(b.etStart),etEndInfo:this._convertStringPointToObject(b.etDestination)};
g.startInfo.id=b.sid||null;
g.endInfo.id=b.did||null;
g.startInfo.type=b.startType||null;
g.endInfo.type=b.destinationType||null;
if(b.via&&b.via.length>0){var c=[];
for(var d=0,f=b.via.length;
d<f;
d++){c[d]=this._convertStringPointToObject(b.via[d]);
c[d].id=b.vid[d];
c[d].type=b.vit[d]
}g.via=c
}if(e.pathType==1){this._addPublicTransitData(e,g)
}if(e.pathType==1||e.pathType==3){this._removeVia(g)
}return g
},_addPublicTransitData:function(b,c){c.isInterCity=b.searchType;
c.transPathType=b.transPathType
},_removeVia:function(b){delete b.via
},_convertStringPointToObject:function(b){var c=nhn.mapservice.Util.convertStringPointToObject(b);
return{lng:c.x,lat:c.y,text:c.title}
}}
})(iron.ns("nhn.map.bookmark"));
(function(){var c=iron.ns("nhn.map.bookmark"),a=$.extend({},c.Const.BOOKMARK_GROUP),b=$.extend({},c.Const.BOOKMARK_TYPE);
c.Categorizer={getGroup:function(d){return this._mapBookmarkTypeIntoGroup(d.getType())
},_mapBookmarkTypeIntoGroup:function(d){var e="unknown";
switch(d){case b.PLACE:case b.ADDRESS:case b.STATION:e=a.PLACE;
break;
case b.BUS_STOP:case b.BUS:case b.BUS_STOP_LANE:e=a.BUS;
break;
case b.ROUTE:e=a.ROUTE;
break;
case b.SUBWAY:case b.SUBWAY_PATH:e=a.SUBWAY;
break
}return e
}}
}());
iron.ns("nhn.map.bookmark").BookmarkList=iron.Class({ERR_RANGE:0.0001,_bookmarkTabCount:{all:0,bus:0,place:0,route:0},_sortOrder:null,initialize:function(a){if(a&&!Array.isArray(a)){throw new TypeError("Invalid type - bookmark list should array.")
}this._bookmarks=[];
a&&a.forEach(function(b){this.add(b)
},this)
},indexOf:function(a){return this._bookmarks.indexOf(a)
},indexOfKey:function(b){var a=-1;
this._bookmarks.forEach(function(d,c){if(d.getKey()==b){a=c
}});
return a
},indexOfId:function(b){var a=-1;
this._bookmarks.forEach(function(d,c){if(d.getBookmarkId()==b){a=c
}});
return a
},indexOfSID:function(b){var a=-1;
this._bookmarks.forEach(function(d,c){if(d.getSID()==b){a=c
}});
return a
},add:function(a){this._bookmarks.push(a)
},remove:function(b){var a=this.indexOf(b);
if(a>-1){this._bookmarks.splice(a,1)
}},removeByKey:function(b){var a=this.indexOfKey(b);
(a>-1)&&this._bookmarks.splice(a,1)
},removeById:function(b){var a=this.indexOfId(b);
(a>-1)&&this._bookmarks.splice(a,1)
},modify:function(b){var a=this.indexOfId(b.getBookmarkId());
if(a>-1){this._bookmarks.splice(a,1,b)
}},getBookmarkByKey:function(b){var a=this.indexOfKey(b);
return(a>-1)?this._bookmarks[a]:null
},getBookmarkById:function(b){var a=this.indexOfId(b);
return(a>-1)?this._bookmarks[a]:null
},getAllBookmark:function(){return this._bookmarks
},getAllBookmarkAsData:function(){return this._bookmarks.map(function(a){return a.toJSON()
})
},getBookmarkAsData:function(b,a){if(b===undefined||b=="all"){return this.getAllBookmarkAsData()
}return this._bookmarks.filter(function(d){var c=nhn.map.bookmark.Categorizer.getGroup(d);
return c===b
}).map(function(c){if(a){return c
}return c.toJSON()
})
},getBookmarkAsEachData:function(a,b){if(a===undefined||a=="all"){return this.getAllBookmarkAsData()
}return this._bookmarks.filter(function(c){return c.getType()===a
}).map(function(c){if(b){return c
}return c.toJSON()
})
},hasAddress:function(b){var d=this._bookmarks;
for(var c=0,a=d.length;
c<a;
c++){if((d[c].getAddress().indexOf(b)===0)||(b.indexOf(d[c].getAddress())===0)){return true
}}return false
},hasSameLocation:function(b,e){var d=this._bookmarks;
for(var c=0,a=d.length;
c<a;
c++){if(Math.abs(b-d[c].getPX())<=this.ERR_RANGE&&Math.abs(e-d[c].getPY())<=this.ERR_RANGE){return true
}}return false
},setBookmarkCount:function(a){this._bookmarkTabCount.all=a.allCount;
this._bookmarkTabCount.bus=a.busCount;
this._bookmarkTabCount.place=a.placeCount;
this._bookmarkTabCount.route=a.routeCount
},getBookmarkCount:function(){return this._bookmarkTabCount
},setSortOrder:function(a){this._sortOrder=a
},getSortOrder:function(){return this._sortOrder
}});
iron.ns("nhn.map.bookmark").BookmarkAddEditErrorResolver={resolve:function(c){var d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error").process({displayMsg:c.displayMsg}),b=false,a=false;
switch(c.code){case"LE0321":d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_exceed_limit_of_homebookmark_count").process({});
a=true;
break;
case"LE0322":d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_shortcut_to_home_already_exists").process({});
b=true;
break;
case"LE0323":d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_shortcut_to_office_already_exists").process({});
b=true;
break;
case"LE0301":case"LE0302":case"LE0303":case"LE0304":case"LE0305":case"LE0306":case"LE0307":case"LE0308":d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_bookmark_already_exists").process({});
b=true;
break;
case"LE0311":d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_exceed_limit_of_bookmark_count").process({});
a=true;
break;
case"LE0314":d=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_exceed_limit_of_busstop_lane_count").process({});
a=true;
break
}return{errorMsg:d,forceUpdate:b,isUnableToProceed:a}
},checkHomeSetting:function(c,e,d){var b={},a=e.filter(function(h){return h.getKey()!=c.getKey()
}),f=a.some(function(h){return h.getShortcutType()==="home"
}),g=a.some(function(h){return h.getShortcutType()==="office"||h.getShortcutType()==="school"
});
b.forceUpdate=false;
b.isUnableToProceed=false;
if(d==="home"&&f){b.errorMsg=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_shortcut_to_home_already_exists").process({});
b.forceUpdate=true
}else{if((d==="office"||d==="school")&&g){b.errorMsg=nhn.mapservice.TemplateRepos.get("bookmark_add_edit_error_shortcut_to_office_already_exists").process({});
b.forceUpdate=true
}else{b=null
}}return b
}};
iron.ns("nhn.map.bookmark").BookmarkAlertFormatErrorResolver={resolve:function(a){var c=a.displayMsg,b="";
switch(a.code){case"LE0100":c="즐겨찾기 명칭이 없습니다.";
b="즐겨찾기 명칭을 등록해 주세요.";
break;
case"LE0311":c="즐겨찾기에 추가할 수 있는 항목은 최대 200개입니다.";
b="기존 항목 삭제 후 다시 등록 바랍니다.";
break;
case"LE0314":c="특정 버스에 대한 정류장 즐겨찾기는 최대 10개까지 가능합니다.";
b="기존 즐겨찾기 항목 삭제 후 다시 등록 바랍니다.";
break;
case"LE0308":case"LE0302":c="이미 즐겨찾기에 등록되어 있습니다.";
break;
case"LE0315":c="글자수가 150자를 초과하였습니다.";
break
}return{errorMsgTitle:c,errorMsg:b}
}};
(function(c,d){var b=iron.ns("nhn.map.bookmark"),a=c.extend({},b.Const.BOOKMARK_TYPE);
b.BookmarkRestorer=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){},restore:function(e){switch(e.bmType){case a.PLACE:this._restorePlace(e);
break;
case a.ADDRESS:this._restoreAddress(e);
break;
case a.STATION:this._restoreStation(e);
break;
case a.BUS:this._restoreBusRoute(e);
break;
case a.BUS_STOP:this._restoreBusStop(e);
break
}},_restorePlace:function(f){var e=f.bmSid;
this.$dao().requestSiteInfo(e,function(i){if(i.result){var g=i.result;
g.bookmarkType=a.PLACE;
var h=b.BookmarkModelFactory.createBookmark(g);
h.setBookmarkId(f.bmId);
this.$service().addBookmarkOverlay(h)
}}.bind(this))
},_restoreAddress:function(g){var f={bookmarkId:g.bmId,bookmarkType:a.ADDRESS,name:g.bmDisplayName,px:g.bmPx,py:g.bmPy},e=b.BookmarkModelFactory.createBookmark(f);
this.$service().addBookmarkOverlay(e)
},_restoreBusRoute:function(g){var f={bookmarkId:g.bmId,bookmarkType:a.BUS,px:g.bmPx,py:g.bmPy,busID:g.bmStationId},e=b.BookmarkModelFactory.createBookmark(f);
this.$service().showBusRoute(e)
},_restoreBusStop:function(g){var f={bookmarkId:g.bmId,bookmarkType:a.BUS_STOP,stationClass:g.stationClass,stationID:g.busStationId,px:g.bmPx,py:g.bmPy,stationType:1},e=b.BookmarkModelFactory.createBookmark(f);
this.$service().addBookmarkOverlay(e)
},_restoreStation:function(g){var f={bookmarkId:g.bmId,bookmarkType:a.STATION,stationClass:g.stationClass,stationID:g.bmStationId,px:g.bmPx,py:g.bmPy},e=b.BookmarkModelFactory.createBookmark(f);
this.$service().addBookmarkOverlay(e)
}})
}(jQuery));
(function(l,m,f,d){var e=m.ns("nhn.map.bookmark"),j=f.extend({},e.Const.BOOKMARK_TYPE),i=function(){l.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.")
};
e.BookmarkOverlayManager=m.Class({inherit:l.map.Dispatcher},{initialize:function(){this._overlays={}
},_listenService:function(){this.$BookmarkService().attach({select:this._onSelectBookmark.bind(this),deselect:this._onDeselectBookmark.bind(this)})
},_onSelectBookmark:function(s){var q=s.bookmark,p=q.getBookmarkId(),o=this.getBookmarkOverlayById(p);
if(!o){return
}var n=o.getMarker(),r=n.options._polygonParam;
n.select();
this._openInfoWindow(n.getInfo(),n);
r&&this.$SearchPolygonService().selectPolygon(r);
this._listenInfoWindowClose()
},_onDeselectBookmark:function(s){var q=s.bookmark,p=q.getBookmarkId(),o=this.getBookmarkOverlayById(p);
if(!o){return
}var n=o.getMarker(),r=n.options._polygonParam;
this._unlistenInfoWindowClose();
n.unselect();
this._closeInfoWindow();
r&&this.$SearchPolygonService().deselectPolygon(r)
},addBookmarkOverlay:function(r){var q=r.getBookmarkId(),p=this.getBookmarkOverlayById(q),s=r.getPoiInfo?r.getPoiInfo():null,t=true,n=f.Deferred();
if(s){if(s.hasRoad){t=false
}}this._closePanorama();
if(p){var o=p.getMarker();
t&&this.$Map().setCenter(o.getPoint());
n.resolve(p)
}else{this.removeAllBookmarkOverlay();
this._createBookmarkOverlay(r).done(function(v){var u=v.getMarker();
t&&this.$Map().setCenter(u.getPoint());
n.resolve(v)
}.bind(this))
}return n.promise()
},_createBookmarkOverlay:function(q){var p={},r,n=f.Deferred(),o;
if(q.getType()===j.PLACE){this._createPlaceOverlay(q,p).done(function(s){q.setPoiInfo(s);
o=this._addOverlay(q,p);
n.resolve(o)
}.bind(this))
}else{if(q.getType()===j.ADDRESS&&q.isDetailAddress()!==null&&!q.getIsNewAddress()){r=b(q);
if(r){p._polygonParam=r;
this.$SearchPolygonService().addPolygon(r);
q.setPolyInfo(r)
}o=this._addOverlay(q,p);
n.resolve(o)
}else{o=this._addOverlay(q,p);
n.resolve(o)
}}return n.promise()
},_createPlaceOverlay:function(r,q){var o="s"+r.getSID(),n=f.Deferred(),s=function(w){if(!w.result){var v=this.$BookmarkService().getSelectedBookmark(),u=(v&&v.getBookmarkId())||null;
if(u){this.$BookmarkService().deselectBookmark(u)
}return
}var t=w.result;
if(k(t)){this._requestRoadOverlay(t.poiInfo).done(function(x){n.resolve(x)
})
}else{if(g(t)){this._requestPolygon(v,t.poiInfo,t.x,t.y,q);
n.resolve(t.poiInfo)
}else{n.resolve()
}}}.bind(this),p=function(){i()
}.bind(this);
this.$BookmarkDao().requestSiteInfo(o,s,p);
return n.promise()
},_requestRoadOverlay:function(r){var t=r.road.shapeKey,s=t.wsid,o=t.shapeID,q={type_name:t.typeName,level:10},u=function(v){r.road.line=v;
n.resolve(r)
},p=function(){n.resolve()
},n=f.Deferred();
this.$BookmarkDao().requestRoadInfo(s,o,q,u,p);
return n.promise()
},_requestPolygon:function(o,q,t,p,n){var r=q.polygon.shapeKey.shapeID,s=h(t,p,r);
n._polygonParam=s;
o.setPoiInfo(q);
o.setPolyInfo(s);
this.$SearchPolygonService().addPolygon(s)
},_addOverlay:function(q,o){var n=this._createOverlay(q),p=q.getBookmarkId();
this._overlays["BOOKMARK_"+p]=n;
this._drawOverlay(n);
f.extend(n.getMarker().options,o);
return n
},getBookmarkOverlayById:function(n){return this._overlays["BOOKMARK_"+n]
},getAllMarkers:function(){var n=[];
f.each(this._overlays,function(p,o){n.push(o.getMarker())
});
return n
},removeBookmarkOverlay:function(o){var n="BOOKMARK_"+o.getBookmarkId();
this.removeBookmarkOverlayById(n)
},removeBookmarkOverlayById:function(n){var n=String(n).indexOf("BOOKMARK")===0?n:"BOOKMARK_"+n;
this._removeOverlay(this._overlays[n]);
delete this._overlays[n]
},removeAllBookmarkOverlay:function(){f.each(this._overlays,function(n){this.removeBookmarkOverlayById(n)
}.bind(this))
},_closeBusRouteLayer:function(){NModules.has("bus")&&this.$BusService().closeBusRoute()
},_createOverlay:function(n){return new e.Overlay(n)
},_removeOverlay:function(o){if(o){var n=o.getMarker(),p=o.getBookmark();
this._closeInfoWindow();
n&&this.$Map().removeMarker(n);
n.detach();
if(p instanceof e.SiteBookmark||p instanceof e.AddressBookmark){var q=p.getPolyInfo();
q&&this.$SearchPolygonService().removePolygon(q)
}}},_drawOverlay:function(o){var n=o.getMarker();
if(n.options.isPoi&&n.options.poiInfo.hasRoad){this.$bridge().addPolyMarker(n)
}else{this.$Map().addMarker(n)
}this._bindOverlayEvent(o)
},_bindOverlayEvent:function(o){var n=o.getMarker();
n.attach({select:this._onSelectMarker.bind(this),unselect:this._onUnselectMarker.bind(this),mouseover:this._onMouseoverMarker.bind(this),mouseout:this.onMouseoutMarker.bind(this),moveMarker:this._onMoveMarker.bind(this,n)})
},_onSelectMarker:function(p){var n=p.markerInfo,o=n.bookmarkId;
this.$BookmarkService().selectBookmark(o)
},_onUnselectMarker:function(p){var n=p.markerInfo,o=n.bookmarkId;
this.$BookmarkService().deselectBookmark(o)
},_onMouseoverMarker:function(s){var o=s.markerInfo,p=o.bookmarkId,n=this.getBookmarkOverlayById(p);
if(!n){return
}var q=n.getBookmark(),r=q.getPolyInfo();
r&&this.$SearchPolygonService().focusPolygon(r)
},onMouseoutMarker:function(s){var o=s.markerInfo,p=o.bookmarkId,n=this.getBookmarkOverlayById(p);
if(!n){return
}var q=n.getBookmark(),r=q.getPolyInfo();
r&&this.$SearchPolygonService().blurPolygon(r)
},_onMoveMarker:function(q){var o=this.$InfoWindowFacade().getCurrentWindow(),n=this.$InfoWindowFacade().getCurrentModel(),p=n?n.getData():null;
if(o&&p&&(p.isBookmark||(p.poiInfo&&p.poiInfo.hasRoad))){o.setPoint(q.point);
o.redraw()
}},_unlistenInfoWindowClose:function(){this.$InfoWindowFacade().detach("close.bookmark")
},_listenInfoWindowClose:function(){this._unlistenInfoWindowClose();
this.$InfoWindowFacade().attach({"close.bookmark":this._onCloseInfoWindow.bind(this)})
},_onCloseInfoWindow:function(q){var n=q.infoWindow;
if(!n){return
}var o=n.getModel().getData().MarkerInfo,p=o.bookmarkId||(o.id&&o.id.replace(/^BOOKMARK_/,""));
if(!p){return
}this.$BookmarkService().deselectBookmark(p)
},_openInfoWindow:function(o,n){if(!o){return
}this._closePanorama();
switch(o.bookmarkType){case j.PLACE:this._openPlaceInfoWindow(o,n);
break;
case j.ADDRESS:this._openAddressInfoWindow(o);
break;
case j.BUS_STOP:case j.BUS_STOP_LANE:this._openBusStopInfoWindow(o);
break;
case j.STATION:NModules.load("bus",function(){this._openPublicTransitInfoWindow(o)
}.bind(this));
break
}},_openPlaceInfoWindow:function(p,o){var q=null,n={id:"s"+p.sid,MarkerInfo:p};
if(o){q=function(s){var t=s.getModel?s.getModel().getData():null;
if(!t){return
}var v=t.poiInfo;
if(v&&v.hasPolygon){var w=v.polygon.boundary,u=new l.mapcore.LatLng(w.minY,w.minX).toInner(),r=new l.mapcore.LatLng(w.maxY,w.maxX).toInner();
this.$Map().setBound([u.x,u.y,r.x,r.y])
}}.bind(this);
f.extend(n,{x:o.getPoint().toLatLng().getLng(),y:o.getPoint().toLatLng().getLat()})
}this.$InfoWindowFacade().open("BOOKMARK_SITE",n,q)
},_openAddressInfoWindow:function(n){this.$InfoWindowFacade().open("ADDRESS",{address:n.address,name:n.name,px:n.xPos,py:n.yPos,rCode:n.rcode,fullAddress:n.fullAddress,isNewAddress:n.isNewAddress,mappedAddress:n.mappedAddress,MarkerInfo:n},function(w){var s=w.getModel().getData(),q=s.boundary;
if(!q){return
}var t=s.MarkerInfo.options._polygonParam,o=s.MarkerInfo.point.toLatLng(),u=new l.mapcore.LatLng(q.minY,q.minX).toInner(),y=new l.mapcore.LatLng(q.maxY,q.maxX).toInner(),x=[u.x,u.y,y.x,y.y];
if(t){var r=this.$SearchPolygonService().getVisibleLevels(t),v=r[r.length-1],p=this.$Map().findOptimaizedZoomLevel(x,{minLevel:1,maxLevel:v});
this.$Map().setCenter(o);
this.$Map().setLevel(p)
}else{this.$Map().setBound(x)
}}.bind(this))
},_openBusStopInfoWindow:function(o){var n={errorCallback:function(){l.map.service.Alert("해당 정보가 확인되지 않아,<br>즐겨찾기에서 불러올 수 없습니다.")
},listeners:{close:(function(){this.$BookmarkService().deselectBookmark(o.bookmarkId)
}).bind(this)}};
NModules.load("bus",function(){this.$BusService().showBusStationWindow(o.marker,null,n)
}.bind(this))
},_openPublicTransitInfoWindow:function(p){var o=p.stationID;
var n={errorCallback:function(){l.map.service.Alert("해당 정보가 확인되지 않아,<br>즐겨찾기에서 불러올 수 없습니다.")
}};
if(p.stationClass===2){NModules.load("subway",function(){this.$SubwayService().openSubwayWindow(o,p.marker,n)
}.bind(this))
}},_closeInfoWindow:function(){this.$InfoWindowFacade().close()
},_closePanorama:function(){if(!NModules.has("panorama")){return
}this.$Panorama().closePanorama()
},_listenSearchPolygonService:function(){this.$SearchPolygonService().attach({blur_polygon:this._onBlurPolygon.bind(this)})
},_onBlurPolygon:function(o){var n=o.polygonParam;
n&&this.$SearchPolygonService().blurPolygon(n)
},_listenIndoorMap:function(){},_onEnterIndoorMap:function(){},_onLeaveIndoorMap:function(){}});
function k(n){return n.poiInfo&&n.poiInfo.hasRoad
}function g(n){return n.poiInfo&&n.poiInfo.hasPolygon
}function h(q,o,p){var n=new l.mapcore.LatLng(o,q),r=p;
return{type:"SITE",center:n,shapeId:r,group:l.map.search.PolygonGroup.BOOKMARK}
}function c(p,o){var n=new l.mapcore.LatLng(p,o);
return{type:"ADDRESS",center:n,group:l.map.search.PolygonGroup.BOOKMARK}
}function a(n){return{type:"REGION",regionCode:n,group:l.map.search.PolygonGroup.BOOKMARK}
}function b(n){var r=null;
if(n.isDetailAddress()){var q=n.getPX(),o=n.getPY();
r=c(o,q)
}else{if(!n.getIsNewAddress()){var p=n.getRCode();
r=a(p)
}}return r
}}(nhn,iron,jQuery));
(function(m,n,h,e){var f=n.ns("nhn.map.bookmark"),i='<li><a href="#" class="lfl_a" data-bookmark-id="{BOOKMARK_ID}" data-id="{SPOT_ID}" data-name="{DISPLAY_NAME}" data-coord="{COORD}" data-type="{TYPE}">{DISPLAY_NAME}</a></li>',g='<li><a class="lfl_a" data-bookmark-id="{BOOKMARK_ID}" data-index={INDEX} data-action="select" data-key={STATION_KEY} href="#">{STATION_NAME}</a></li>',a=10;
f.BookmarkSpotListLayer=n.Class({mix:[m.map.UIComponent]},{initialize:function(){this._region=null
},_prepareDOM:function(){this._template=m.mapservice.TemplateRepos.get("bookmark_spot_list");
this._containerEl=h(this._template.process());
this._baseEl.append(this._containerEl)
},_getBookmarkList:function(p){var o=this._bookmarkService.getBookmarkListAsEachData(this._type,p);
return o
},_bindEvent:function(){this._containerEl.on("mousedown."+this._UID,".lah_more",j.bind(this)).on("mousedown."+this._UID,".lah_fav_lst",j.bind(this)).on("mousedown."+this._UID,".lah_fav_lst li",k.bind(this)).on("mousedown."+this._UID,".lah_more a",d.bind(this))
},_unbindEvent:function(){this._containerEl.off("."+this._UID);
this._bookmarkService&&this._bookmarkService.detach(".spotlist")
},setBookmarkService:function(o){this._bookmarkService=o
},setOptions:function(o,p){this._UID=n.guid();
this._index=o.index||null;
this._baseEl=h(o.el);
this._type=o.type;
this._directionsType=o.directionsType||"departure";
this._callback=p
},renderBookmarkList:function(t,w,x,u){if(typeof w==="undefined"||h(w).size()===0){return
}var x=(typeof x==="undefined")?10:x,p=[],q=this._getBookmarkList(),w=h(w);
this._wrapperEl=w;
var s=null;
this._region=null;
if(t==="subway"&&u){this._region=u;
s=q.filter(function(y){return y.cityCode==u
})
}else{s=q
}this._displayMoreBtn(w,s);
if(!s.length){if(t==="directions"){w.hide()
}else{this._baseEl.hide()
}return
}for(var r=0;
r<x;
r++){if(!s[r]){break
}if(t==="directions"){p.push(i.replace(/{SPOT_ID}/,s[r].sid||s[r].rcode).replace(/{BOOKMARK_ID}/g,s[r].bookmarkId).replace(/{DISPLAY_NAME}/g,s[r].displayName).replace(/{COORD}/,s[r].px+"|"+s[r].py).replace(/{TYPE}/,(s[r].type||"").toUpperCase()))
}else{if(t==="subway"){var v=s[r].key&&s[r].key.split("|"),o=s[r].name&&s[r].name.split(" ");
p.push(g.replace(/{INDEX}/,(r+1)).replace(/{BOOKMARK_ID}/,s[r].bookmarkId).replace(/{STATION_KEY}/,[o[0],"|",v[1]].join("")).replace(/{STATION_NAME}/,s[r].displayName))
}}}w.html(p.join(""));
w.show();
return s
},_displayMoreBtn:function(p,q){var o=q.length,r=p.next();
if(o>a){r.show()
}else{r.hide()
}},getDirectionsType:function(){return this._directionsType
},_onActivate:function(){this._prepareDOM();
this._bindEvent()
},_onDeactivate:function(){this._unbindEvent();
this._containerEl.remove();
this._containerEl=null;
this._baseEl=null;
this._bookmarkService=null
}});
function l(o){return{bookmarkId:o.data("bookmark-id"),name:o.data("name"),id:o.data("id"),key:o.data("id")||o.data("key"),coord:o.data("coord"),type:o.data("type")}
}function j(o){o.preventDefault();
o.stopPropagation()
}function k(q){q.preventDefault();
if(q.which!==1){return
}var p=h(q.target);
if(!p.is("a")){p=p.find("a")
}var o=l(p);
this._bookmarkService.updateBookmarkUseTime(o.bookmarkId);
this._callback&&this._callback(o);
this._baseEl.hide();
b(q,q.target,".blist",this.getDirectionsType())
}function d(q){q.preventDefault();
if(q.which!==1){return
}var p=this._wrapperEl.children().size()-1,r,o=this.getDirectionsType();
switch(o){case"departure":r=f.Const.DIALOG_TYPE.MORE_FOR_DEPARTURE;
break;
case"destination":r=f.Const.DIALOG_TYPE.MORE_FOR_ARRIVAL;
break;
case"waypoint":r=f.Const.DIALOG_TYPE.MORE_FOR_WAYPOINT;
break
}this._bookmarkService.showListDialog(this._getBookmarkList(),null,{directionsType:this.getDirectionsType(),lastListIndex:p,callback:this._callback,dialogType:r,region:this._region});
this._baseEl.hide();
b(q,q.target,".bmore",this.getDirectionsType())
}function c(o){var p="";
switch(o){case"departure":p="s";
break;
case"destination":p="d";
break;
case"waypoint":p="v";
break
}return p
}function b(s,r,o,q){var p=c(q);
m.map.LogClick({event:s,element:r,acode:"sfd*"+p+o})
}}(nhn,iron,jQuery));
(function(){var a=iron.ns("nhn.map.bookmark");
a.RouteCourseBookmarkController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){},_listenService:function(){this.$service().attach({load:this._onBookmarkLoad.bind(this),add:this._onBookmarkLoad.bind(this),remove:this._onBookmarkLoad.bind(this)})
},_addBookmark:function(d){var c=a.BookmarkDataConverter.fromRouteCourseData(d.routeData),b=a.BookmarkModelFactory.createBookmark(c);
this.$service().addBookmarkByBookmarkStud(b)
},_removeBookmark:function(b){this.$service().removeBookmarkByBookmarkStud(b.bookmarkKey)
},_markBookmarkStud:function(){if(this.$service().isLoggedIn()){if(this.$service().isLoaded()){var b=$(".spm_lst_fav");
this._markBookmarkStuds(b)
}else{this.$service().requestBookmarkList()
}}},_onBookmarkLoad:function(){var b=$(".spm_lst_fav");
this._markBookmarkStuds(b)
},_markBookmarkStuds:function(b){var c=this.$service().getBookmarkList();
if(!b){return
}$.each(b,function(e,d){var g=$(d),h=g.data("bookmark-key"),f=c.getBookmarkByKey(h);
if(f){this.mark(g)
}else{this.unmark(g)
}}.bind(this))
},mark:function(b){b.addClass("on").attr("title","즐겨찾기 삭제")
},unmark:function(b){b.removeClass("on").attr("title","즐겨찾기 추가")
},_listenBridge:function(){this.$bridge().attach({ADD_ROUTE_COURSE_BOOKMARK:this._addBookmark.bind(this),REMOVE_ROUTE_COURSE_BOOKMARK:this._removeBookmark.bind(this),MARK_ROUTE_COURSE_BOOKMARK:this._markBookmarkStud.bind(this)})
}})
}());
(function(f,b,d,e){var c=b.ns("nhn.map.bookmark"),a=d.extend({},c.Const.BOOKMARK_SORT_ORDER);
c.BookmarkHomeViewController=b.Class({initialize:function(){this._serviceListener={enterhome:this._onEnterHome.bind(this),load:this._onLoad.bind(this)};
this._viewListener={groupChanged:this._onGroupChanged.bind(this),sortOrderChanged:this._onSortOrderChanged.bind(this),loginClicked:this._onLoginClicked.bind(this)}
},_listenService:function(){this.$service().attach(this._serviceListener)
},_onEnterHome:function(g){this._showHome(g.options)
},_onLoad:function(){var g=this.$service().getBookmarkList().getSortOrder();
this.$view().updateUiOfSortOrderList(g)
},_showHome:function(h){var g={group:"all",sortOrder:a.BY_LAST_USE_TIME},h=d.extend(g,h||{}),j=this.$service().isLoggedIn();
this.$view().show();
if(!j){return
}var k=this.$view().getHomeBookmarkListContainer(),i=this.$view().getBookmarkListContainer();
this.$view().updateUiOfGroupTab(h.group);
this.$view().updateUiOfSortOrderList(h.sortOrder);
this.$service().renderHomeBookmarkListTo(k);
this.$service().renderBookmarkListTo(i,h)
},_listenView:function(){this.$view().attach(this._viewListener)
},_onGroupChanged:function(j){var i=j.group,h=a.BY_LAST_USE_TIME,g=this.$view().getBookmarkListContainer();
this.$service().renderBookmarkListTo(g,{group:i,sortOrder:h});
this.$view().updateUiOfGroupTab(i);
this.$view().updateUiOfSortOrderList(h)
},_onSortOrderChanged:function(h){var g=h.sortOrder;
this.$service().requestBookmarkList({sortOrder:g})
},_onLoginClicked:function(){this.$service().login(function(){}.bind(this))
}})
}(nhn,iron,jQuery));
(function(d,e){var c=iron.ns("nhn.map.bookmark"),b=c.Const.DIALOG_TYPE,a=c.Const.BOOKMARK_SORT_ORDER;
c.HomeBookmarkListViewController=iron.Class({initialize:function(){this._listenView()
},_listenService:function(){this.$service().attach({renderHomeBookmarkList:this._onRenderHomeBookmarkList.bind(this),errorRenderHomeBookmarkList:this._onErrorRenderHomeBookmarkList.bind(this),load:this._loadData.bind(this),add:this._loadData.bind(this),update:this._loadData.bind(this),remove:this._loadData.bind(this),updateBusArrival:this._onUpdateBusArrival.bind(this),responseError:this._onResponseError.bind(this)})
},_onResponseError:function(f){this.$view().renderError(f.apiId)
},_onErrorRenderHomeBookmarkList:function(f){this.$view().renderError(f.apiId,f.container)
},_onRenderHomeBookmarkList:function(h){var g=h.container,f=this.$service().getHomeBookmarkList().getAllBookmark().map(function(i){return i.toJSON()
});
this.$view().setContainer(g);
this.$view().load(f,this.$service().isLoggedIn())
},_loadData:function(g){var f=this.$service().getHomeBookmarkList().getAllBookmark().map(function(h){return h.toJSON()
});
this.$view().load(f,this.$service().isLoggedIn(),(g?g.type:null))
},_onUpdateBusArrival:function(k){var i=k.bookmarkId,g=k.liveInfo,h=k.updateTime,f=k.driveEnd,j=k.errorCode;
this.$view().updateBusArrival(i,g,h,f,j)
},_listenView:function(){this.$view().attach({select:this._onSelectItem.bind(this),"delete":this._onDeleteItem.bind(this),refreshBusLiveUpdate:this._onRefreshBusLiveUpdate.bind(this),showDialog:this._onShowDialog.bind(this),login:this._onLogIn.bind(this)})
},_onSelectItem:function(g){var f=g.bookmarkId;
this.$service().selectBookmark(f)
},_onDeleteItem:function(i){var g=i.bookmarkId,h=this.$service().getBookmarkById(g),f={displayName:h.getDisplayName(),isHome:false};
this.$service().updateBookmark(g,f)
},_onRefreshBusLiveUpdate:function(g){var f=g.bookmarkId;
this.$service().refreshBusLiveUpdate(f)
},_onShowDialog:function(g){var f=g.actionType;
switch(f){case"showHomeSettingDialog":this.$service().showHomeAndCompanySettingBySearchDialog({dialogType:b.HOUSE});
break;
case"showCompanySettingDialog":this.$service().showHomeAndCompanySettingBySearchDialog({dialogType:b.COMPANY});
break;
case"showHomeListSettingDialog":this.$service().showHomeListSettingDialog({dialogType:b.HOME});
break
}},_onLogIn:function(){this.$service().login(function(){this.$service().requestBookmarkList({sortOrder:a.BY_LAST_USE_TIME});
this.$view().hideBeforeLogin()
}.bind(this))
}})
}(jQuery));
iron.ns("nhn.map.bookmark").BookmarkListViewController=iron.Class({initialize:function(){this._listenView()
},_listenService:function(){this.$service().attach({renderBookmarkList:this._onRenderBookmarkList.bind(this),errorRenderBookmarkList:this._onErrorRenderBookmarkList.bind(this),load:this._loadData.bind(this),add:this._loadData.bind(this),update:this._loadData.bind(this),remove:this._loadData.bind(this),updateBusArrival:this._onUpdateBusArrival.bind(this),select:this._onSelectBookmark.bind(this),deselect:this._onDeselectBookmark.bind(this)})
},_onRenderBookmarkList:function(d){var b=d.container,c=d.group,a=d.maxDisplayCount;
this.$view().setContainer(b);
this.$view().setGroup(c);
this.$view().setMaxDisplayCount(a);
this._loadData(d)
},_onErrorRenderBookmarkList:function(a){this.$view().renderError(a.apiId,a.container)
},_loadData:function(f){var d=this.$view().getGroup(),a=f?f.type:null,b=this.$service().getBookmarkList().getBookmarkAsData(d),c=this.$service().getSelectedBookmark();
this.$view().load(b,a);
c&&this.$view().updateUi(c.getBookmarkId())
},_onUpdateBusArrival:function(g){var d=g.bookmarkId,b=g.liveInfo,c=g.updateTime,a=g.driveEnd,f=g.errorCode;
this.$view().updateBusArrival(d,b,c,a,f)
},_onSelectBookmark:function(b){var a=b.bookmark;
this.$view().updateUi(a.getBookmarkId())
},_onDeselectBookmark:function(){this.$view().updateUi()
},_listenView:function(){this.$view().attach({select:this._onSelectItem.bind(this),deselect:this._onDeselectItem.bind(this),edit:this._onEditItem.bind(this),"delete":this._onDeleteItem.bind(this),refreshBusLiveUpdate:this._onRefreshBusLiveUpdate.bind(this)})
},_onSelectItem:function(b){var a=b.bookmarkId;
this.$service().selectBookmark(a)
},_onDeselectItem:function(b){var a=b.bookmarkId;
this.$service().deselectBookmark(a)
},_onEditItem:function(b){var a=b.bookmarkId;
this.$service().showEditDialog(a)
},_onDeleteItem:function(b){var a=b.bookmarkId;
this.$service().showDeleteDialog(a)
},_onRefreshBusLiveUpdate:function(b){var a=b.bookmarkId;
this.$service().refreshBusLiveUpdate(a)
}});
(function(k,l,f,c){var d=l.ns("nhn.map.bookmark"),e=d.Const.ITEM_COUNT_PER_PAGE,g=d.Const.DIALOG_TITLE;
d.BookmarkListLayerViewController=l.Class({initialize:function(){},_listenService:function(){this.$service().attach({showListDialog:i.bind(this)})
},_listenView:function(){this.$view().attach({changeSortOrder:j.bind(this),changePage:a.bind(this),clickFavoriteList:h.bind(this)})
},_renderBookmarkList:function(p){var n=this.$view().getOptions(),o=n.sortOrder,m=this.$view();
p=this._refine(p);
p.forEach(function(s){var r=s.type;
var q=(r==="subway")?s.name.split(" "):s.name;
s.spotName=(q instanceof Array)?(q[0]||""):q;
s.spotId=s.sid||(q[0]?q[0]+"|"+s.stationID:"");
s.coord=(s.px&&s.py)?[s.px,"|",s.py].join(""):""
});
m.setOptions(f.extend(n,{type:p[0].type}));
m.renderList(p);
m.updateUiOfSortOrderTab(o)
},_refine:function(n){var m=this.$view().getOptions(),p=m.page,q,o;
o=p*d.Const.ITEM_COUNT_PER_PAGE;
if(p===1){q=0
}else{q=o-d.Const.ITEM_COUNT_PER_PAGE
}return n.slice(q,o)
}});
function i(q){var p=q.bookmark,o=q.options,r=q.container,m=p.length,n=!!o.region;
this.$view().setContainer(r);
this.$view().setOptions(f.extend(o,{page:2,totalCount:m,isEmpty:(m==0),titleByDialogType:d.Const.DIALOG_TITLE[o.dialogType.toUpperCase()]}));
this.$view().showDialog();
if(n){p=b(p,o.region)
}this._renderBookmarkList(p)
}function j(o){var n=o.sortOrder,m=this.$view().getOptions();
this.$service().requestBookmarkList({sortOrder:n,listType:m.type,doNotTriggerForAll:true},function(q){var p=this.$service().getBookmarkList().getSortOrder();
this.$view().setOptions(f.extend(m,{page:1,sortOrder:p}));
this._renderBookmarkList(q)
}.bind(this))
}function a(q){var p=q.page,n=this.$view().getOptions(),o=this.$service().getBookmarkList().getBookmarkAsEachData(n.type),m=!!n.region;
this.$view().setOptions(f.extend(n,{page:p}));
if(m){o=b(o,n.region)
}this._renderBookmarkList(o)
}function h(m){this.$service().searchDirections(m.selectedData);
this.$view().hideDialog()
}function b(m,n){return m.filter(function(o){return(o.cityCode==n)
})
}}(nhn,iron,jQuery));
(function(f,g){var d=iron.ns("nhn.map.bookmark"),e=d.BookmarkAlertFormatErrorResolver;
d.BookmarkEditViewController=iron.Class({initialize:function(){},_listenService:function(){this.$service().attach("showEditDialog",a.bind(this))
},_listenView:function(){this.$view().attach("edit",b.bind(this))
}});
function a(j){var i=j.bookmark,k=j.container,h=j.options;
this.$view().setContainer(k);
this.$view().setOptions(h);
this.$view().showDialog(i)
}function c(){this.$view().releaseDialog()
}function b(m){var l=m.bookmark,i=m.displayName,k=l.getBookmarkId(),h;
if(i.length>150){h=e.resolve({code:"LE0315"});
this.$view().lockDialog();
nhn.map.service.Alert(h.errorMsgTitle,h.errorMsg,c.bind(this));
return
}var j={displayName:i,isHome:l.isHome(),shortcutType:l.getShortcutType(),forceUpdate:true};
this.$service().updateBookmark(k,j,function(n){if(n.error){h=e.resolve(n.error);
this.$view().lockDialog();
nhn.map.service.Alert(h.errorMsgTitle,h.errorMsg,c.bind(this))
}else{this.$view().hideDialog()
}}.bind(this))
}}(jQuery));
(function(c,a){var b=iron.ns("nhn.map.bookmark"),d=b.BookmarkAlertFormatErrorResolver;
b.BookmarkAddAndDeleteCompleteViewController=iron.Class({_listenService:function(){this.$service().attach({showAddCompleteDialog:i.bind(this),hideAddCompleteDialog:f.bind(this),showDeleteCompleteDialog:h.bind(this),hideDeleteCompleteDialog:g.bind(this),errorWhenBookmarkAdded:e.bind(this),errorWhenBookmarkDeleted:e.bind(this)})
}});
function i(k){var l=k.container,j=k.options;
this.$view().showCompleteDialog(l,j,"ADD")
}function f(){this.$view().hideCompleteDialog("ADD")
}function h(k){var l=k.container,j=k.options;
this.$view().showCompleteDialog(l,j,"DELETE")
}function g(){this.$view().hideCompleteDialog("DELETE")
}function e(n){var l=n.errorObj,k=d.resolve(l),j=k.errorMsgTitle,m=k.errorMsg,o=function(){if(this.$service().isLoggedIn()&&!this.$service().isLoaded()){this.$service().requestBookmarkList()
}}.bind(this);
if(!m){m=o
}if(j||m){nhn.map.service.Alert&&nhn.map.service.Alert(j,m,o)
}}}(jQuery));
(function(g,c){var d=iron.ns("nhn.map.bookmark"),h=d.BookmarkAddEditErrorResolver,e=d.Const.ITEM_COUNT_PER_PAGE,i=d.Const.DIALOG_TITLE;
d.HomeListSettingViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){},_listenService:function(){this.$service().attach({showHomeListSettingDialog:k.bind(this)})
},_listenView:function(){this.$view().attach({select:j.bind(this,true),deselect:j.bind(this,false),changeGroup:f.bind(this),changeSortOrder:b.bind(this),changePage:a.bind(this)})
},_renderBookmarkList:function(o){var m=this.$view().getOptions(),p=m.group,n=m.sortOrder,l=this.$view();
o=this._refine(o);
l.renderList(o);
l.updateUiOfGroupTab(p);
l.updateUiOfSortOrderTab(n)
},_refine:function(m){var l=this.$view().getOptions(),o=l.page,p,n;
n=o*e;
if(o===1){p=0
}else{p=n-e
}return m.slice(p,n)
}});
function k(q){var r=q.container,n=q.options,p=n.group,o=this.$service().getBookmarkList().getBookmarkAsData(p),m=o.length,l=this.$view();
l.setContainer(r);
l.setOptions(g.extend(n,{page:1,totalCount:m,isEmpty:(m==0),titleByDialogType:i[n.dialogType.toUpperCase()]}));
l.showDialog();
this._renderBookmarkList(o)
}function j(q,p){var l=p.bookmarkTarget,n=p.bookmarkId,o=this.$service().getBookmarkById(n),m={displayName:o.getDisplayName(),isHome:q,forceUpdate:false};
this.$service().updateBookmark(n,m,function(s){if(s.error){var r=h.resolve(s.error);
this.$view().showErrorMsg(r.errorMsg)
}else{this.$view().hideErrorMsg();
if(q){this.$view().showCheckToken(l)
}else{this.$view().hideCheckToken(l)
}}}.bind(this))
}function f(p){var o=p.group,m=this.$view().getOptions(),n=this.$service().getBookmarkList().getBookmarkAsData(o),l=n.length;
this.$view().setOptions(g.extend(m,{group:o,page:1,totalCount:l,isEmpty:(l==0)}));
this._renderBookmarkList(n)
}function b(o){var m=o.sortOrder,l=this.$view().getOptions(),n=l.group;
this.$service().requestBookmarkList({sortOrder:m,doNotTriggerForAll:true},function(){var q=this.$service().getBookmarkList().getBookmarkAsData(n),p=this.$service().getBookmarkList().getSortOrder();
this.$view().setOptions(g.extend(l,{page:1,sortOrder:p}));
this._renderBookmarkList(q)
}.bind(this))
}function a(p){var n=p.page,l=this.$view().getOptions(),o=l.group,m=this.$service().getBookmarkList().getBookmarkAsData(o);
this.$view().setOptions(g.extend(l,{page:n}));
this._renderBookmarkList(m)
}}(jQuery));
(function(g,c){var d=iron.ns("nhn.map.bookmark"),h=d.BookmarkAddEditErrorResolver,i=d.Const.DIALOG_TITLE,m=d.Const.DIALOG_TYPE;
d.HomeAndCompanySettingBySearchViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._currentBookmarkList={}
},_listenService:function(){this.$service().attach({showHomeAndCompanySettingBySearchDialog:b.bind(this)})
},_listenView:function(){this.$view().attach({search:n.bind(this),updateBookmark:j.bind(this),showBookmarkDialog:e.bind(this),changePage:a.bind(this),changeGroup:f.bind(this),close:l.bind(this)})
},_renderSearchResultList:function(r){var o=this.$view(),p=o.getOptions(),s=p.group,q=p.tabs;
o.renderTab(q,s);
o.renderList(r)
},_refine:function(q,o,p){q.forEach(function(s){s.MarkerType=o;
s.bookmark=d.BookmarkModelFactory.createBookmark(s);
var t=s.bookmark.getKey(),r=p.getBookmarkByKey(t);
if(r){this._currentBookmarkList[t]=r;
s.bookmark=r
}else{this._currentBookmarkList[t]=s.bookmark
}}.bind(this))
},_showNoData:function(){var o=this.$view();
o.hideList();
o.hideTab();
o.showNoData()
},_hideNoData:function(){var o=this.$view();
o.hideNoData();
o.showList();
o.showTab()
}});
function b(q){var o=this.$view(),r=q.container,p=q.options;
o.setContainer(r);
o.setOptions(g.extend(p,{titleByDialogType:i[p.dialogType.toUpperCase()]}));
o.showDialog()
}function n(q){var p=q.query,o=this.$view().getOptions();
this.$view().setOptions(g.extend(o,{query:p}));
this.$search().requestByHomeSetting(p,{},k.bind(this))
}function k(s){var y=s.result,x=this.$view().getOptions();
if(y){this._hideNoData();
var o=this.$service().getHomeBookmarkList(),u=y.type,v=y.tab||x.tabs,w=y.totalCount;
if(v){this.$view().setOptions(g.extend(x,{tabs:v}))
}if(u==="SITE_1"||u==="ADDRESS"){var p=(u==="SITE_1"?"SITE":"ADDRESS"),q=y[p.toLowerCase()],t=q.page,r=q.list;
x=this.$view().getOptions();
this.$view().setOptions(g.extend(x,{page:t,totalCount:w,isEmpty:(w==0),group:u,queryRank:y.rank,busLinkYN:y.busLinkYN}));
this._refine(r,p,o);
this._renderSearchResultList(r)
}else{this._showNoData()
}}else{this._showNoData()
}}function j(s){var r=s.bookmarkKey,p=s.shortcutType,o=this.$service().isBookmarked(r),q;
if(o){q=this.$service().getBookmarkByKey(r);
this.$service().updateBookmark(q.getBookmarkId(),{displayName:q.getDisplayName(),isHome:true,shortcutType:p,forceUpdate:true},function(u){if(u.error){var t=h.resolve(u.error);
this.$view().showErrorMsg(t.errorMsg)
}else{this.$view().hideErrorMsg();
this.$view().hideDialog()
}}.bind(this))
}else{q=this._currentBookmarkList[r];
q.setHome(true);
q.setShortcutType(p);
this.$service().addBookmark(q,{forceUpdate:true},function(u){if(u.error){var t=h.resolve(u.error);
this.$view().showErrorMsg(t.errorMsg)
}else{this.$view().hideErrorMsg();
this.$view().hideDialog()
}}.bind(this))
}}function e(p){var o=this.$view().getOptions(),q=o.dialogType;
this.$view().hideDialog();
this.$service().showHomeAndCompanySettingByBookmarkDialog({dialogType:q})
}function f(r){var q=r.group,o=this.$view().getOptions(),p=o.query;
this.$view().setOptions(g.extend(o,{group:q,page:1}));
this.$search().requestByHomeSetting(p,{page:1,query:p,type:o.group,queryRank:o.rank,busLinkYN:o.busLinkYN,re:1},k.bind(this))
}function a(r){var q=r.page,o=this.$view().getOptions(),p=o.query;
this.$search().requestByHomeSetting(p,{page:q,query:p,type:o.group,queryRank:o.rank,busLinkYN:o.busLinkYN,re:1},k.bind(this))
}function l(){this._currentBookmarkList={}
}}(jQuery));
(function(e,b){var c=iron.ns("nhn.map.bookmark"),f=c.BookmarkAddEditErrorResolver,d=c.Const.ITEM_COUNT_PER_PAGE,h=c.Const.DIALOG_TITLE,k=c.Const.DIALOG_TYPE;
c.HomeAndCompanySettingByBookmarkViewController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){},_listenService:function(){this.$service().attach({showHomeAndCompanySettingByBookmarkDialog:l.bind(this)})
},_listenView:function(){this.$view().attach({changeSortOrder:j.bind(this),showSearchDialog:g.bind(this),changePage:a.bind(this),updateBookmark:i.bind(this)})
},_renderBookmarkList:function(o){var m=this.$view().getOptions(),n=m.sortOrder;
o=this._refine(o);
this.$view().renderList(o);
this.$view().updateUiOfSortOrderTab(n)
},_refine:function(n){var m=this.$view().getOptions(),p=m.page,q,o;
o=p*d;
if(p===1){q=0
}else{q=o-d
}return n.slice(q,o)
},_updateBookmark:function(q,r){var m=q.bookmarkTarget,o=q.bookmarkId,p=this.$service().getBookmarkById(o),n={displayName:p.getDisplayName(),isHome:r,forceUpdate:false};
this.$service().updateBookmark(o,n,function(t){if(t.error){var s=f.resolve(t.error);
this.$view().showErrorMsg(s.errorMsg)
}else{this.$view().hideErrorMsg();
if(r){this.$view().showCheckToken(m)
}else{this.$view().hideCheckToken(m)
}}}.bind(this))
}});
function l(q){var r=q.container,n=q.options,p=n.group,o=this.$service().getBookmarkList().getBookmarkAsData(p),m=o.length;
this.$view().setContainer(r);
this.$view().setOptions(e.extend(n,{page:1,totalCount:m,isEmpty:(m==0),titleByDialogType:h[n.dialogType.toUpperCase()]}));
this.$view().showDialog();
this._renderBookmarkList(o)
}function j(p){var n=p.sortOrder,m=this.$view().getOptions(),o=m.group;
this.$service().requestBookmarkList({sortOrder:n,doNotTriggerForAll:true},function(s){var r=this.$service().getBookmarkList().getBookmarkAsData(o),q=this.$service().getBookmarkList().getSortOrder();
this.$view().setOptions(e.extend(m,{page:1,sortOrder:q}));
this._renderBookmarkList(r)
}.bind(this))
}function g(n){var m=this.$view().getOptions(),o=m.dialogType;
this.$view().hideDialog();
this.$service().showHomeAndCompanySettingBySearchDialog({dialogType:o})
}function a(q){var o=q.page,m=this.$view().getOptions(),p=m.group,n=this.$service().getBookmarkList().getBookmarkAsData(p);
this.$view().setOptions(e.extend(m,{page:o}));
this._renderBookmarkList(n)
}function i(p){var n=p.bookmarkId,m=p.shortcutType,o=this.$service().getBookmarkById(n);
this.$service().updateBookmark(n,{displayName:o.getDisplayName(),isHome:true,shortcutType:m,forceUpdate:true},function(r){if(r.error){var q=f.resolve(r.error);
this.$view().showErrorMsg(q.errorMsg)
}else{this.$view().hideErrorMsg();
this.$view().hideDialog()
}}.bind(this))
}}(jQuery));
nhn.map.bookmark.AbstractBookmarkMarker=iron.Class({inherit:nhn.map.service.Marker},{initialize:function(b,c){var a=$.extend({type:"BOOKMARK",title:"즐겨찾은 장소",groupIndex:3000,smallIcon:this._createSmallIcon()},c||{});
a.point=b;
var d=this._createIcon();
nhn.map.service.Marker.apply(this,[d,a])
},_createIcon:function(){return new nhn.map.service.MarkerSpriteIcon("BOOKMARK","mmk.bmk")
},_createSmallIcon:function(){return new nhn.map.service.SmallIcon("BOOKMARK")
},setBookmarkId:function(a){this.options.bookmarkId=a
},getBookmarkId:function(){return this.options.bookmarkId
},getBookmarkType:function(){return this.options.bookmarkType
},getInfo:function(){var a=nhn.map.service.Marker.prototype.getInfo.apply(this);
return $.extend(a,{bookmarkId:this.getBookmarkId(),bookmarkType:this.getBookmarkType()})
}});
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.AbstractBookmarkMarker.prototype;
b.SpotMarker=iron.Class({inherit:b.AbstractBookmarkMarker},{initialize:function(){a.constructor.apply(this,arguments)
},getSID:function(){return this.options.sid
},getInfo:function(){var c=a.getInfo.apply(this);
return $.extend(c,{sid:this.getSID(),marker:this})
}})
}());
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.AbstractBookmarkMarker.prototype;
b.AddressMarker=iron.Class({inherit:b.AbstractBookmarkMarker},{initialize:function(){a.constructor.apply(this,arguments)
},getAddress:function(){return this.options.address
},getName:function(){return this.options.name
},getXPoint:function(){return this.options.xPos
},getYPoint:function(){return this.options.yPos
},getRcode:function(){return this.options.rcode
},getFullAddress:function(){return this.options.fullAddress
},isNewAddress:function(){return this.options.isNewAddress
},getMappedAddress:function(){return this.options.mappedAddress
},getInfo:function(){var c=a.getInfo.apply(this);
return $.extend(c,{address:this.getAddress(),name:this.getName(),xPos:this.getXPoint(),yPos:this.getYPoint(),rcode:this.getRcode(),fullAddress:this.getFullAddress(),isNewAddress:this.isNewAddress(),mappedAddress:this.getMappedAddress()})
}})
}());
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.AbstractBookmarkMarker.prototype;
b.BusStopMarker=iron.Class({inherit:b.AbstractBookmarkMarker},{initialize:function(){a.constructor.apply(this,arguments)
},getStationID:function(){return this.options.stationID
},getStationClass:function(){return this.options.stationClass
},getInfo:function(){var c=a.getInfo.apply(this);
return $.extend(c,{stationID:this.getStationID(),stationClass:this.getStationClass(),marker:this})
}})
}());
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.AbstractBookmarkMarker.prototype;
b.PublicTransitMarker=iron.Class({inherit:b.AbstractBookmarkMarker},{initialize:function(){a.constructor.apply(this,arguments)
},getStationID:function(){return this.options.stationID
},getStationClass:function(){return this.options.stationClass
},getInfo:function(){var c=a.getInfo.apply(this);
return $.extend(c,{stationID:this.getStationID(),stationClass:this.getStationClass(),marker:this})
}})
}());
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.SpotMarker.prototype;
b.PolyMarker=iron.Class({inherit:b.SpotMarker},{initialize:function(){this.oPolyLines=[];
a.constructor.apply(this,arguments)
},_calcDist:function(c,f){var e=c.x-f.x;
var d=c.y-f.y;
return Math.sqrt(e*e+d*d)
},setPointByBound:function(d,j,h){var h=h||1,g=1,f,c,e,i=this.getPoint().toInner();
if(this._isInBound(d,i,h)){return
}f=i.copy();
c=i.copy();
e=this._calcDist(i,j);
this.oPolyLines.forEach(function(l,m){var o=l.getPoints(),k,p;
for(var m=0,n=o.length;
m<n;
m+=g){k=o[m].toInner();
if(this._isInBound(d,k,h)){var p=this._calcDist(k,j);
if(e>p){c=k;
e=p
}}else{if(!c.equals(i)){break
}}}},this);
this.setPoint(c.toLatLng());
this.dispatch($.Event("moveMarker",{oldPoint:f,point:this.getPoint()}))
},_isInBound:function(c,e,d){var e=e||this.getPoint().toInner(),d=d||0;
return e.x>c[0]+d&&e.y<c[1]-d&&e.x<c[2]-d&&e.y>c[3]+d
},setLine:function(l){if(!l||!l.geometry||!this.oPolyLines){return
}var c=l;
var k=[];
var h=c.geometry.coordinates;
if(c.geometry.type=="FilledPolygon"){var n=h.split(" ");
for(var f=0;
f<n.length;
++f){var o=n[f].split(",");
k.push(new nhn.mapcore.UTMK(o[0],o[1]))
}var m={stroke:"#FF3B92","stroke-width":5,"stroke-opacity":0.45,fill:l.color,"fill-opacity":"0.3"};
l.stroke=m;
var e=new nhn.mapcore.Polygon(k,m);
this.oPolyLines.push(e)
}else{if(c.geometry.type=="LineString"){var g={stroke:"#FF3B92","stroke-width":5,"stroke-opacity":0.45};
l.stroke=g;
k=[];
var n=h;
for(var d=0;
d<n.length;
d++){var o=n[d];
k.push(new nhn.mapcore.UTMK(o[0],o[1]))
}var e=new nhn.mapcore.Polyline(k,g);
this.oPolyLines.push(e)
}else{if(c.geometry.type=="MultiLineString"){var g={stroke:"#FF3B92","stroke-width":5,"stroke-opacity":0.45};
l.stroke=g;
for(var f=0;
f<h.length;
++f){k=[];
var n=h[f];
for(var d=0;
d<n.length;
d++){var o=n[d];
k.push(new nhn.mapcore.UTMK(o[0],o[1]))
}var e=new nhn.mapcore.Polyline(k,g);
this.oPolyLines.push(e)
}}else{alert("Error : not defined type. "+c.geometry.type)
}}}delete c.geometry
},setPolygon:function(e){var k=e.geometry,h=k.coordinates,l,n,m,d;
for(var g=0,c=h.length;
g<c;
g++){n=[];
for(var f=0;
f<h[g].length;
f++){m=h[g][f];
d=new nhn.mapcore.LatLng(m[1],m[0]);
n.push(d)
}l=new nhn.mapcore.Polygon(n,{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.7",strokeStyle:"solid",fillColor:"FF8D8D",fillOpacity:"0"});
this.oPolyLines.push(l)
}},onadd:function(){nhn.map.service.Marker.prototype.onadd.apply(this,arguments);
var f=this.options.poiInfo;
if(f.hasRoad){var g=this.options.poiInfo.road.line;
this.setLine(g)
}else{if(f.hasPolygon){var d=f.polygon.features.features;
for(var c=0,e=d.length;
c<e;
c++){this.setPolygon(d[c])
}}}},focus:function(){var c=parseInt(this.getZIndex(),10);
if(c>this.HIGHLIGHT_ZINDEX){return
}this.element.css("z-index",c+this.HIGHLIGHT_ZINDEX)
},blur:function(){this.setZIndex(this.options.zIndex)
}})
}());
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.AddressMarker.prototype;
b.AddressPolyMarker=iron.Class({inherit:b.AddressMarker},{initialize:function(){this.oPolyLines=[];
a.constructor.apply(this,arguments)
},_calcDist:function(c,f){var e=c.x-f.x;
var d=c.y-f.y;
return Math.sqrt(e*e+d*d)
},setPointByBound:function(d,j,h){var h=h||1,g=1,f,c,e,i=this.getPoint().toInner();
if(this._isInBound(d,i,h)){return
}f=i.copy();
c=i.copy();
e=this._calcDist(i,j);
this.oPolyLines.forEach(function(l,m){var o=l.getPoints(),k,p;
for(var m=0,n=o.length;
m<n;
m+=g){k=o[m].toInner();
if(this._isInBound(d,k,h)){var p=this._calcDist(k,j);
if(e>p){c=k;
e=p
}}else{if(!c.equals(i)){break
}}}},this);
this.setPoint(c.toLatLng());
this.dispatch($.Event("moveMarker",{oldPoint:f,point:this.getPoint()}))
},_isInBound:function(c,e,d){var e=e||this.getPoint().toInner(),d=d||0;
return e.x>c[0]+d&&e.y<c[1]-d&&e.x<c[2]-d&&e.y>c[3]+d
},setPolygon:function(e){var k=e.geometry,h=k.coordinates,l,n,m,d;
for(var g=0,c=h.length;
g<c;
g++){n=[];
for(var f=0;
f<h[g].length;
f++){m=h[g][f];
d=new nhn.mapcore.LatLng(m[1],m[0]);
n.push(d)
}l=new nhn.mapcore.Polygon(n,{strokeWidth:"4",strokeColor:"#EF3232",strokeOpacity:"0.7",strokeStyle:"solid",fillColor:"FF8D8D",fillOpacity:"0"});
this.oPolyLines.push(l)
}},onadd:function(){nhn.map.service.Marker.prototype.onadd.apply(this,arguments);
var e=this.options.polyInfo;
if(!e){return
}for(var c=0,d=e.length;
c<d;
c++){this.setPolygon(e[c])
}},focus:function(){var c=parseInt(this.getZIndex(),10);
if(c>this.HIGHLIGHT_ZINDEX){return
}this.element.css("z-index",c+this.HIGHLIGHT_ZINDEX)
},blur:function(){this.setZIndex(this.options.zIndex)
}})
}());
(function(e,a,c,d){var b={INQUIRE_BOOKMARK_LIST:{url:"/bookmark/bookmarkList.nhn",defaultParams:{}},INQUIRE_SHORTCUT_LIST:{url:"/bookmark/shortcutList.nhn",defaultParams:{}},ADD_BOOKMARK:{url:"/bookmark/addBookmark.nhn",defaultParams:{}},UPDATE_BOOKMARK:{url:"/bookmark/updateBookmark.nhn",defaultParams:{}},UPDATE_BOOKMARK_USE_TIME:{url:"/bookmark/updateUseTime.nhn",defaultParams:{}},DELETE_BOOKMARK:{url:"/bookmark/deleteBookmark.nhn",defaultParams:{}},INQUIRE_SITE_INFO:{url:"/search2/getSiteInfo.nhn",defaultParams:{}},INQUIRE_ROAD_INFO:{url:"/aoi/fs",defaultParams:{output:"json"}},FIND_EXISTING_BOOKMARK:{url:"/bookmark/findExistingBookmark.nhn",defaultParams:{}}};
a.ns("nhn.map.bookmark").BookmarkDAO=a.Class({inherit:e.map.AbstractDAO},{initialize:function(){e.map.AbstractDAO.apply(this,arguments);
this.disableCache()
},_onResponseSuccess:function(i,k,g){var f=g;
if(g.error){var h=g.error,j=h.code;
if(j==="LE0300"){this.$dialog().alert("해당 정보가 존재하지 않습니다")
}}if(g.result){f=this._refineResponse(i,g)
}this.dispatch("responseSuccess",{apiId:i,response:f});
k&&k(f)
},_onResponseError:function(f,g){this.dispatch("responseError",{apiId:f});
g&&g()
},requestBookmarkList:function(h,k,g){var f="INQUIRE_BOOKMARK_LIST",j=b[f],i=c.extend({},j.defaultParams,h);
this._request({url:j.url,data:i,success:this._onResponseSuccess.bind(this,f,k||null),error:this._onResponseError.bind(this,f,g||null)})
},requestShortcutList:function(j,g){var f="INQUIRE_SHORTCUT_LIST",i=b[f],h=c.extend({},i.defaultParams);
this._request({url:i.url,data:h,success:this._onResponseSuccess.bind(this,f,j||null),error:this._onResponseError.bind(this,f,g||null)})
},addBookmark:function(k,h,l,g){var f="ADD_BOOKMARK",j=b[f],i=c.extend({},j.defaultParams,k.toJSON(),h);
this._request({type:"POST",url:j.url,data:i,success:this._onResponseSuccess.bind(this,f,l||null),error:this._onResponseError.bind(this,f,g||null)})
},updateBookmark:function(i,h,l,g){var f="UPDATE_BOOKMARK",k=b[f],j=c.extend({},k.defaultParams,{bookmarkId:i},h);
this._request({url:k.url,data:j,success:this._onResponseSuccess.bind(this,f,l||null),error:this._onResponseError.bind(this,f,g||null)})
},updateBookmarkUseTime:function(h,k,g){var f="UPDATE_BOOKMARK_USE_TIME",j=b[f],i=c.extend({},j.defaultParams,{bookmarkId:h});
this._request({url:j.url,data:i,success:this._onResponseSuccess.bind(this,f,k||null),error:this._onResponseError.bind(this,f,g||null)})
},removeBookmark:function(h,k,g){var f="DELETE_BOOKMARK",j=b[f],i=c.extend({},j.defaultParams,{bookmarkId:h});
this._request({url:j.url,data:i,success:this._onResponseSuccess.bind(this,f,k||null),error:this._onResponseError.bind(this,f,g||null)})
},requestSiteInfo:function(k,j,g){var f="INQUIRE_SITE_INFO",i=b[f],h=c.extend({},i.defaultParams,{id:k});
this._request({url:i.url,data:h,success:this._onResponseSuccess.bind(this,f,j||null),error:this._onResponseError.bind(this,f,g||null),isHmac:true})
},requestRoadInfo:function(l,f,i,m,h){var g="INQUIRE_ROAD_INFO",k=b[g],j=c.extend({},k.defaultParams,{wsid:l,FID:f},i);
this._request({url:k.url,data:j,success:this._onResponseSuccess.bind(this,g,m||null),error:this._onResponseError.bind(this,g,h||null)})
},checkDuplicateBookmark:function(j,k,g){var f="FIND_EXISTING_BOOKMARK",i=b[f],h=c.extend({},i.defaultParams,j.toJSON());
this._request({url:i.url,data:h,success:this._onResponseSuccess.bind(this,f,k||null),error:this._onResponseError.bind(this,f,g||null)})
},_refineResponse:function(h,g){var f=g;
switch(h){case"INQUIRE_BOOKMARK_LIST":case"INQUIRE_SHORTCUT_LIST":var k=f.result.bookmark,j=f.result.homeBookmark;
k=k.filter(function(l){return l
});
k.forEach(function(l){l.bookmarkType=l.type
});
j=j.filter(function(l){return l
});
j.forEach(function(l){l.bookmarkType=l.type
});
break;
case"ADD_BOOKMARK":case"UPDATE_BOOKMARK":case"DELETE_BOOKMARK":case"FIND_EXISTING_BOOKMARK":var i=f.result;
i.bookmarkType=i.type;
break
}return f
}})
}(nhn,iron,jQuery));
(function(){var a=iron.ns("nhn.map.bookmark"),b=a.Util;
a.AbstractBookmark=iron.Class({initialize:function(c){this._name=null;
this._displayName="";
this._type=null;
this._userID=null;
this._key=null;
this._bookmarkID=null;
this._isHome=false;
this._shortcutType=null;
this._extra=null;
if(c){this._initData(c)
}},_initData:function(d){this.setBookmarkId(d.bookmarkId);
this.setType(d.type);
this.setName(d.name);
var c=d.displayName||d.name;
c&&this.setDisplayName(b.stripHtmlTag(c));
d.isHome&&this.setHome(d.isHome);
this.setShortcutType(d.shortcutType);
this._setExtraData(d.extra)
},_generateKey:function(){var c=b.generateModelKey(this);
this._setKey(c)
},_setKey:function(c){this._key=c
},getKey:function(){return this._key
},setType:function(c){this._type=c
},getType:function(){return this._type
},getUserID:function(){return this._userID
},_setUserID:function(c){this._userID=c
},setDisplayName:function(c){this._displayName=c
},getDisplayName:function(){return this._displayName||""
},setBookmarkId:function(c){this._bookmarkID=c
},getBookmarkId:function(){return this._bookmarkID
},setName:function(c){this._name=c
},getName:function(){return this._name
},_setExtraData:function(c){this._extra=c
},getExtraData:function(){return this._extra
},setHome:function(c){this._isHome=c
},isHome:function(){return this._isHome
},setShortcutType:function(c){this._shortcutType=c
},getShortcutType:function(){return this._shortcutType
},toJSON:function(){throw"toJSON이 하위클래스에서 구현되지 않았습니다."
},toUrlParameter:function(){throw"toUrlParameter이 하위클래스에서 구현되지 않았습니다."
}})
}());
(function(){var b=iron.ns("nhn.map.bookmark"),a=b.AbstractBookmark.prototype;
b.PointBasedBookmark=iron.Class({inherit:b.AbstractBookmark},{initialize:function(){this._px=null;
this._py=null;
this._address=null;
a.constructor.apply(this,arguments)
},_initData:function(c){a._initData.apply(this,arguments);
this._setPX(c.x||c.px);
this._setPY(c.y||c.py);
this._setAddress(c)
},getPoint:function(){this._point=new nhn.mapcore.LatLng(this.getPY(),this.getPX());
return this._point
},_setPX:function(c){this._px=b.Util.zeroPadding(c)
},getPX:function(){return this._px
},_setPY:function(c){this._py=b.Util.zeroPadding(c)
},getPY:function(){return this._py
},_setAddress:function(d){this._address=d.address||d.fullAddress;
var c=d.roadAddr;
if(c&&c.text){this._address=c.text
}this._generateKey()
},getAddress:function(){return this._address
},getPolyInfo:function(){return null
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.PointBasedBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE);
c.SiteBookmark=iron.Class({inherit:c.PointBasedBookmark},{name:"nhn.map.bookmark.SiteBookmark",initialize:function(){this._sid=null;
this._poiInfo=null;
this._polyInfo=null;
if(arguments[0]&&!!arguments[0].roadAddress){arguments[0].address=arguments[0].roadAddress
}a.constructor.apply(this,arguments)
},_initData:function(d){a._initData.apply(this,arguments);
this.setType(b.PLACE);
var e=d.sid||d.id||"";
this._setSID(parseInt(e.replace(/[^0-9]/gi,""),10));
this._generateKey()
},_setSID:function(d){this._sid=d+""
},getSID:function(){return this._sid
},setPoiInfo:function(d){this._poiInfo=d
},getPoiInfo:function(){return this._poiInfo
},setPolyInfo:function(d){this._polyInfo=d
},getPolyInfo:function(){return this._polyInfo
},toJSON:function(){this._generateKey();
var e=this.getBookmarkId(),d={key:this.getKey(),name:this.getName(),displayName:this.getDisplayName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),px:this.getPX(),py:this.getPY(),sid:this.getSID(),address:this.getAddress(),listType:"place"};
if(e){d.bookmarkId=e
}return d
},toUrlParameter:function(){return"bmType=place&bmId="+this.getBookmarkId()+"&bmSid="+this.getSID()
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.PointBasedBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE);
c.AddressBookmark=iron.Class({inherit:c.PointBasedBookmark},{name:"nhn.map.bookmark.AddressBookmark",initialize:function(){this._address=null;
this._fullAddress=null;
this._mappedAddress=null;
this._isNewAddress=null;
this._rcode=null;
this._mappedFullAddress=null;
this._detailAddress=null;
this._polyInfo=null;
a.constructor.apply(this,arguments)
},_initData:function(d){a._initData.apply(this,arguments);
this.setType(b.ADDRESS);
this._setIsNewAddress(d.isNewAddress);
this._setFullAddress(d);
if(d.mappedAddress){this._setMappedAddress(d.mappedAddress)
}if(d.isDetailAddress===undefined){this._setDetailAddress(d.isJibunAddress)
}else{this._setDetailAddress(d.isDetailAddress)
}this._setRCode(d.rcode||d.rCode);
this._generateKey()
},_setAddress:function(d){this._address=d.address||d.fullAddress||null
},getAddress:function(){return this._address
},_setFullAddress:function(d){this._fullAddress=d.fullAddress||d.address
},getFullAddress:function(){return this._fullAddress
},_setMappedAddress:function(d){if(d.fullAddress){this._mappedAddress=d;
this._setMappedFullAddress(d.fullAddress)
}else{this._mappedAddress={fullAddress:d,isNewAddress:!this.getIsNewAddress()};
this._setMappedFullAddress(d)
}},getMappedAddress:function(){return this._mappedAddress
},_setMappedFullAddress:function(d){this._mappedFullAddress=d
},getMappedFullAddress:function(){return this._mappedFullAddress
},_setIsNewAddress:function(d){this._isNewAddress=d
},getIsNewAddress:function(){return this._isNewAddress
},_setRCode:function(d){this._rcode=d
},getRCode:function(){return this._rcode
},_setDetailAddress:function(d){this._detailAddress=d
},isDetailAddress:function(){return this._detailAddress
},setPolyInfo:function(d){this._polyInfo=d
},getPolyInfo:function(){return this._polyInfo
},toJSON:function(){this._generateKey();
var e=this.getBookmarkId(),d={key:this.getKey(),name:this.getName()||this.getFullAddress(),displayName:this.getDisplayName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),px:this.getPX(),py:this.getPY(),address:this.getAddress(),mappedAddress:this.getMappedFullAddress(),isNewAddress:this.getIsNewAddress(),isDetailAddress:this.isDetailAddress(),rcode:this.getRCode(),listType:"address"};
if(e){d.bookmarkId=e
}return d
},toUrlParameter:function(){var d=["bmType=address","bmId="+this.getBookmarkId(),"bmPx="+this.getPX(),"bmPy="+this.getPY(),"bmDisplayName="+this.getName()];
return d.join("&")
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.PointBasedBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE);
c.BusStopBookmark=iron.Class({inherit:c.PointBasedBookmark},{name:"nhn.map.bookmark.BusStopBookmark",initialize:function(){this._stationId=null;
this._stationDisplayId=null;
this._stationName=null;
this._stationClass=null;
this._stationType=null;
this._stationTypeName=null;
a.constructor.apply(this,arguments)
},_initData:function(d){a._initData.apply(this,arguments);
this.setType(b.BUS_STOP);
this.setDisplayName(d.displayName||d.stationDisplayName||d.name);
this._setStationId(d.id||d.stationID);
this._setStationDisplayId(d.arsId||d.arsID||d.stationDisplayID);
this._setStationName(d.stationName);
this._setStationClass(d.stationClass);
this._setStationType(d.station||d.stationType);
this._setStationTypeName(d.stationTypeName);
this.setName(d.name||d.stationName);
if(d.stationAddress){this._setAddress({address:d.stationAddress["do"]+" "+d.stationAddress.gu+" "+d.stationAddress.dong})
}else{this._setAddress(d)
}this._generateKey()
},_setStationId:function(d){this._stationId=d
},getStationId:function(){return this._stationId
},_setStationDisplayId:function(d){if(!d){return
}var e=d;
this._stationDisplayId=e
},getStationDisplayId:function(){return this._stationDisplayId
},_setStationName:function(d){this._stationName=d
},getStationName:function(){return this._stationName
},_setStationClass:function(d){this._stationClass=d
},getStationClass:function(){return this._stationClass
},_setStationType:function(d){this._stationType=d
},getStationType:function(){return this._stationType
},_setStationTypeName:function(d){this._stationTypeName=d
},getStationTypeName:function(){return this._stationTypeName
},toJSON:function(){this._generateKey();
var e=this.getBookmarkId(),d={key:this.getKey(),name:this.getName(),displayName:this.getDisplayName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),px:this.getPX(),py:this.getPY(),stationID:this.getStationId(),stationDisplayID:this.getStationDisplayId(),stationName:this.getStationName(),stationType:this.getStationType(),stationClass:1,address:this.getAddress(),listType:"busStop"};
if(e){d.bookmarkId=e
}return d
},toUrlParameter:function(){var d=["bmType=busStop","bmId="+this.getBookmarkId(),"stationClass="+this.getStationClass(),"busStationId="+this.getStationId(),"bmPx="+this.getPX(),"bmPy="+this.getPY()];
return d.join("&")
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.AbstractBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE);
c.BusRouteBookmark=iron.Class({inherit:c.AbstractBookmark},{name:"nhn.map.bookmark.BusRouteBookmark",initialize:function(){this._px=null;
this._py=null;
this._busId=null;
this._busNo=null;
this._cityCode=null;
this._cityName=null;
this._busType=null;
this._busTypeName=null;
this._point=null;
a.constructor.apply(this,arguments)
},_initData:function(d){a._initData.apply(this,arguments);
this.setType(b.BUS);
this._setPX(d.px||"127.0186406");
this._setPY(d.py||"37.5829737");
this._setBusId(d.busID||d.id);
this._setBusNo(d.busNo||d.name);
this._setCityCode(d.cityCode||d.busCityCode);
this._setCityName(d.cityName||d.busCityName);
this._setBusType(d.busType||d.type);
this._setBusTypeName(d.busTypeName||d.typeName);
this.setName(d.busNo||d.name);
this.setDisplayName(d.displayName||d.busNo);
this._generateKey()
},setName:function(d){if(!!!d){return
}this._name=d
},getPoint:function(){this._point=new nhn.mapcore.LatLng(this.getPY(),this.getPX());
return this._point
},_setPX:function(d){this._px=c.Util.zeroPadding(d)
},getPX:function(){return this._px
},_setPY:function(d){this._py=c.Util.zeroPadding(d)
},getPY:function(){return this._py
},_setBusId:function(d){this._busId=d
},getBusId:function(){return this._busId
},_setBusNo:function(d){this._busNo=d
},getBusNo:function(){return this._busNo
},_setCityCode:function(d){this._cityCode=d
},getCityCode:function(){return this._cityCode
},_setCityName:function(d){this._cityName=d
},getCityName:function(){return this._cityName
},_setBusType:function(d){this._busType=d
},getBusType:function(){return this._busType
},getBusIconInfo:function(){return nhn.map.service.VehicleIconLib.get("bus",this.getBusType())
},_setBusTypeName:function(d){this._busTypeName=d
},getBusTypeName:function(){return this._busTypeName
},toJSON:function(){this._generateKey();
var e=this.getBookmarkId();
var d={key:this.getKey(),name:this.getName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),px:this.getPX(),py:this.getPY(),busID:this.getBusId(),busNo:this.getBusNo(),cityCode:this.getCityCode(),busType:this.getBusType(),busIconInfo:this.getBusIconInfo(),displayName:this.getDisplayName(),listType:"bus",cityName:this.getCityName(),busTypeName:this.getBusTypeName()};
if(e){d.bookmarkId=e
}return d
},toUrlParameter:function(){var d=["bmType=bus","bmId="+this.getBookmarkId(),"bmPx="+this.getPX(),"bmPy="+this.getPY(),"bmStationId="+this.getBusId()];
return d.join("&")
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.PointBasedBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE);
c.BusStopRouteBookmark=iron.Class({inherit:c.PointBasedBookmark},{name:"nhn.map.bookmark.BusStopRouteBookmark",initialize:function(){this._stationId=null;
this._stationDisplayId=null;
this._stationName=null;
this._stationDisplayName=null;
this._stationClass=null;
this._stationType=null;
this._stationTypeName=null;
this._liveUpdate=false;
this._busId=null;
this._busName=null;
this._cityCode=null;
this._cityName=null;
this._busType=null;
this._busTypeName=null;
a.constructor.apply(this,arguments)
},_initData:function(f){a._initData.apply(this,arguments);
this.setType(b.BUS_STOP_LANE);
this._setStationId(f.stationID);
this._setStationDisplayId(f.stationDisplayID||f.arsId);
this._setStationName(f.stationName);
this._setStationDisplayName(f.stationDisplayName||f.stationName);
this._setStationClass(f.stationClass);
this._setStationType(f.stationType);
this._setStationTypeName(f.stationTypeName);
this._setLiveUpdate(f.liveUpdate);
this._setBusId(f.busID);
this._setBusName(f.busName||f.busNo);
this._setCityCode(f.cityCode||f.busCityCode);
this._setCityName(f.cityName||f.busCityName);
this._setBusType(f.busType);
this._setBusTypeName(f.busTypeName);
if(f.stationAddress){this._setAddress({address:f.stationAddress["do"]+" "+f.stationAddress.gu+" "+f.stationAddress.dong})
}else{this._setAddress(f)
}if(!this.getName()){var d=this.getStationName(),e=this.getBusName();
if(this.getStationDisplayId()){d+="["+this.getStationDisplayId()+"]"
}this.setName([d,e].join(" | "))
}if(!this.getDisplayName()){this.setDisplayName(this.getName())
}this._generateKey()
},_setStationId:function(d){this._stationId=d
},getStationId:function(){return this._stationId
},_setStationDisplayId:function(d){if(!d){return
}var e=d;
this._stationDisplayId=e
},getStationDisplayId:function(){return this._stationDisplayId
},_setStationName:function(d){this._stationName=d
},getStationName:function(){return this._stationName
},_setStationDisplayName:function(d){this._stationDisplayName=d
},getStationDisplayName:function(){return this._stationDisplayName
},_setStationClass:function(d){this._stationClass=d
},getStationClass:function(){return this._stationClass
},_setStationType:function(d){this._stationType=d
},getStationType:function(){return this._stationType
},_setStationTypeName:function(d){this._stationTypeName=d
},getStationTypeName:function(){return this._stationTypeName
},_setLiveUpdate:function(d){this._liveUpdate=d
},getLiveUpdate:function(){return this._liveUpdate
},_setBusId:function(d){this._busId=d
},getBusId:function(){return this._busId
},_setBusName:function(d){this._busName=d.replace("번","")
},getBusName:function(){return this._busName
},_setCityCode:function(d){this._cityCode=d
},getCityCode:function(){return this._cityCode
},_setCityName:function(d){this._cityName=d
},getCityName:function(){return this._cityName
},_setBusType:function(d){this._busType=d
},getBusType:function(){return this._busType
},getBusIconInfo:function(){return nhn.map.service.VehicleIconLib.get("bus",this.getBusType())
},_setBusTypeName:function(d){this._busTypeName=d
},getBusTypeName:function(){return this._busTypeName
},toJSON:function(){this._generateKey();
var e=this.getBookmarkId(),d={key:this.getKey(),name:this.getName(),displayName:this.getDisplayName(),address:this.getAddress(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),px:this.getPX(),py:this.getPY(),stationID:this.getStationId(),stationDisplayID:this.getStationDisplayId(),stationName:this.getStationName(),stationType:this.getStationType(),stationTypeName:this.getStationTypeName(),stationClass:1,cityCode:this.getCityCode(),cicyName:this.getCityName(),busID:this.getBusId(),busNo:this.getBusName(),busType:this.getBusType(),busTypeName:this.getBusTypeName(),liveUpdate:this.getLiveUpdate(),listType:"busStopLane"};
if(e){d.bookmarkId=e
}return d
},toUrlParameter:function(){var d=["bmType=busStop","bmId="+this.getBookmarkId(),"stationClass="+this.getStationClass(),"busStationId="+this.getStationId(),"bmPx="+this.getPX(),"bmPy="+this.getPY()];
return d.join("&")
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.PointBasedBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE);
c.PublicTransitBookmark=iron.Class({inherit:c.PointBasedBookmark},{name:"nhn.map.bookmark.PublicTransitBookmark",initialize:function(){this._stationId=null;
this._stationClass=null;
this._stationType=null;
this._stationTypeName=null;
this._cityCode=null;
a.constructor.apply(this,arguments)
},_initData:function(d){a._initData.apply(this,arguments);
this._setName(d);
this.setDisplayName(d.displayName||this.getName());
this.setType(b.STATION);
this._setStationID(d);
this._setStationClass(d.stationClass);
this._setStationType(d.stationType||d.type);
this._setStationTypeName(d.stationTypeName);
this._setCityCode(d.cityCode);
this._generateKey()
},_setName:function(e){var d=e.name||e.stationName;
this._name=d
},_setAddress:function(e){if(e.address){this._address=e.address
}else{if(e.stationAddress){var d=e.stationAddress;
this._address=d["do"]+" "+d.gu+" "+d.dong
}}},_setStationID:function(f){var d=f.theme&&f.theme.themeId,e=d||f.stationId||f.stationID||f.subwayID;
this._stationId=e
},getStationId:function(){return this._stationId
},_setStationClass:function(d){this._stationClass=d
},getStationClass:function(){return this._stationClass
},_setStationType:function(d){this._stationType=d
},getStationType:function(){return this._stationType
},_setStationTypeName:function(d){this._stationTypeName=d
},getStationTypeName:function(){return this._stationTypeName
},_setCityCode:function(d){this._cityCode=d
},getCityCode:function(){return this._cityCode
},toJSON:function(){this._generateKey();
var e=this.getBookmarkId(),d={key:this.getKey(),name:this.getName()||this.getAddress(),displayName:this.getDisplayName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),px:this.getPX(),py:this.getPY(),stationID:this.getStationId(),stationClass:this.getStationClass(),cityCode:this.getCityCode(),address:this.getAddress(),listType:b.STATION};
if(e){d.bookmarkId=e
}return d
},toUrlParameter:function(){var d=["bmId="+this.getBookmarkId(),"bmType="+this.getType(),"bmPx="+this.getPX(),"bmPy="+this.getPY(),"bmStationId="+this.getStationId(),"stationClass="+this.getStationClass()];
return d.join("&")
}})
}());
(function(){var c=iron.ns("nhn.map.bookmark"),a=c.AbstractBookmark.prototype,b=$.extend({},c.Const.BOOKMARK_TYPE),d=c.Util;
c.RouteCourseBookmark=iron.Class({inherit:c.AbstractBookmark},{name:"nhn.map.bookmark.RouteCourseBookmark",DETAIL_PATH_TYPE:{CAR:{0:"최단",1:"최적",2:"추천",3:"무료",4:"자동차 전용 제외"},INTRACITY:{0:"추천",1:"지하철",2:"버스",3:"버스+지하철"},INTERCITY:{0:"고속버스",1:"시외버스",2:"기차",3:"항공"},WALK:{0:"추천",2:"계단 제외",3:"큰길 우선"}},initialize:function(){this._startPoint={};
this._viaPoint=[];
this._endPoint={};
this._pathType=null;
this._dtPathType=null;
this._isInterCity=null;
this._transPathType=null;
a.constructor.apply(this,arguments)
},_initData:function(k){a._initData.apply(this,arguments);
var h=k.startInfo||k.startPoint;
var e=k.etStartInfo;
this._mergeEntranceInfo(h,e);
var q=k.via||k.viaPoints;
var n=k.endInfo||k.endPoint;
var g=k.etEndInfo;
this._mergeEntranceInfo(n,g);
var j="";
this.setType(b.ROUTE);
this._setPoint(this._startPoint,h);
if(q){this._setViaPoint(q);
for(var l=0,p=q.length;
l<p;
l++){j+=(d.getSpotTextOnly(q[l].text)+" → ")
}}this._setPoint(this._endPoint,n);
this._setDtPathType(k.dtPathType);
this._setPathType(k.pathType);
var o=d.getSpotIdFromText(h.text),f=d.getSpotIdFromText(n.text);
this.setName(d.getSpotTextOnly(h.text)+" → "+j+d.getSpotTextOnly(n.text));
this.getDisplayName()||this.setDisplayName(this.getName());
var m=k.isInterCity?true:false;
this._setIsInterCity(m);
this._setTransPathType(k.transPathType);
this._generateKey()
},_mergeEntranceInfo:function(e,f){if(!!!f){return
}e.elat=f.lat;
e.elng=f.lng
},_setIsInterCity:function(e){this._isInterCity=e
},getIsInterCity:function(){return this._isInterCity
},_setTransPathType:function(e){this._transPathType=e
},getTransPathType:function(){return this._transPathType
},_setPathType:function(e){this._pathType=e
},_setViaPoint:function(g){this._viaPoint=[];
for(var e=0,f=g.length;
e<f;
e++){this._viaPoint[e]={};
this._setPoint(this._viaPoint[e],g[e])
}},_setPoint:function(e,g){e.lat=g.lat;
e.lng=g.lng;
e.elat=g.elat||"";
e.elng=g.elng||"";
var f=d.getSpotIdFromText(g.text);
e.text=d.getSpotTextOnly(g.text);
e.id=g.id||g.sid||f||null;
e.type=g.type||""
},getStartPoint:function(){return this._startPoint
},getEndPoint:function(){return this._endPoint
},getViaPoint:function(){return this._viaPoint
},getPathType:function(){return this._pathType
},_setDtPathType:function(e){this._dtPathType=e
},getDtPathType:function(){return this._dtPathType
},getPathTypeString:function(){var e="",g=this.getPathType(),h=this.getDtPathType();
switch(g){case 0:e="자동차 | "+this.DETAIL_PATH_TYPE.CAR[h];
break;
case 1:var f=this._isInterCity?this.DETAIL_PATH_TYPE.INTERCITY:this.DETAIL_PATH_TYPE.INTRACITY;
e="대중교통 | "+f[h];
break;
case 2:e="자전거";
break;
case 3:e="도보 | "+this.DETAIL_PATH_TYPE.WALK[h];
break
}return e
},_toOnlyNumber:function(g){var f=/(?:\d*\.)?\d+/g,e=f.exec(g);
return(e&&e.length>0&&e[0])||""
},toJSON:function(){this._generateKey();
var j=this.getBookmarkId(),l=this.getStartPoint(),h=this.getEndPoint(),g={key:this.getKey(),name:this.getName()||this.getAddress(),displayName:this.getDisplayName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),slng:l.lng,slat:l.lat,sText:l.text,sType:l.type||"",sId:this._toOnlyNumber(l.id),elng:h.lng,elat:h.lat,eText:h.text,eType:h.type||"",eId:this._toOnlyNumber(h.id),pathType:this.getPathType(),dtPathType:this.getDtPathType(),isInterCity:this.getIsInterCity(),transPathType:this.getTransPathType(),listType:"route",pathTypeStr:this.getPathTypeString()};
if(l.elng){g.eslng=l.elng
}if(l.elat){g.eslat=l.elat
}if(h.elng){g.eelng=h.elng
}if(h.elat){g.eelat=h.elat
}if(j){g.bookmarkId=j
}if(this.getViaPoint().length>0){var e=this.getViaPoint();
for(var f=0,k=e.length;
f<k;
f++){g["t"+(f+1)+"lng"]=e[f].lng;
g["t"+(f+1)+"lat"]=e[f].lat;
g["t"+(f+1)+"Text"]=e[f].text;
g["t"+(f+1)+"Id"]=this._toOnlyNumber(e[f].id)
}}return g
},toUrlParameter:function(){var k={menu:"route",slng:this.getStartPoint().lng,slat:this.getStartPoint().lat,sText:this.getStartPoint().text,elng:this.getEndPoint().lng,elat:this.getEndPoint().lat,eText:this.getEndPoint().text,pathType:this.getPathType(),dtPathType:this.getDtPathType(),transPathType:this.getTransPathType()};
if(this.getStartPoint().elng!=0){k.eslng=this.getStartPoint().elng
}if(this.getStartPoint().elat!=0){k.eslat=this.getStartPoint().elat
}if(this.getEndPoint().elng!=0){k.eelng=this.getEndPoint().elng
}if(this.getEndPoint().elat!=0){k.eelat=this.getEndPoint().elat
}if(this.getViaPoint().length>0){var e=this.getViaPoint();
for(var g=0,h=e.length;
g<h;
g++){k["t"+(g+1)+"lng"]=e[g].lng;
k["t"+(g+1)+"lat"]=e[g].lat;
k["t"+(g+1)+"Text"]=e[g].text
}}var j="";
for(var f in k){j+=(f+"="+k[f]+"&")
}return j.substring(0,j.length-1)
}})
}());
(function(g,b,e,f){var d=b.ns("nhn.map.bookmark"),a=d.PublicTransitBookmark.prototype,c=e.extend({},d.Const.BOOKMARK_TYPE);
d.SubwayStationBookmark=b.Class({inherit:d.PublicTransitBookmark},{name:[d,"SubwayStationBookmark"].join("."),initialize:function(){a.constructor.apply(this,arguments)
},_initData:function(){a._initData.apply(this,arguments);
this.setType(c.SUBWAY);
this._generateKey()
}})
}(nhn,iron,jQuery));
(function(e,f){var d=iron.ns("nhn.map.bookmark"),a=d.AbstractBookmark.prototype,c=e.extend({},d.Const.BOOKMARK_TYPE),b=e.extend({},nhn.map.subway.Const.SUBWAY_SEARCH_TYPE);
d.SubwayPathBookmark=iron.Class({inherit:d.AbstractBookmark},{name:[d,"SubwayPathBookmark"].join("."),initialize:function(){this._cityCode=null;
this._startStationID=null;
this._startStationName=null;
this._endStationID=null;
this._endStationName=null;
this._pathType=null;
a.constructor.apply(this,arguments)
},_initData:function(g){a._initData.apply(this,arguments);
this.setType(c.SUBWAY_PATH);
this._setCityCode(g.cityCode);
this._setStartStationID(g.startStationID);
this._setStartStationName(g.startStationName);
this._setEndStationID(g.endStationID);
this._setEndStationName(g.endStationName);
this._setPathType(g.pathType);
if(!this.getName()){this.setName([this.getStartStationName(),this.getEndStationName()].join(" → "))
}if(!this.getDisplayName()){this.setDisplayName(this.getName())
}this._generateKey()
},_setCityCode:function(g){this._cityCode=g
},getCityCode:function(){return this._cityCode
},_setStartStationID:function(g){this._startStationID=g
},getStartStationID:function(){return this._startStationID
},_setStartStationName:function(g){this._startStationName=g
},getStartStationName:function(){return this._startStationName
},_setEndStationID:function(g){this._endStationID=g
},getEndStationID:function(){return this._endStationID
},_setEndStationName:function(g){this._endStationName=g
},getEndStationName:function(){return this._endStationName
},_setPathType:function(g){this._pathType=g
},getPathType:function(){return this._pathType
},getPathTypeName:function(){var g="알수 없음";
switch(this.getPathType()){case b.BEST_ROUTE:g="최소시간";
break;
case b.FEWER_TRANSFERS:g="최소환승";
break
}return g
},toJSON:function(){this._generateKey();
var h=this.getBookmarkId(),g={key:this.getKey(),name:this.getName(),displayName:this.getDisplayName(),type:this.getType(),isHome:this.isHome(),shortcutType:this.getShortcutType(),cityCode:this.getCityCode(),startStationID:this.getStartStationID(),startStationName:this.getStartStationName(),endStationID:this.getEndStationID(),endStationName:this.getEndStationName(),pathType:this.getPathType(),pathTypeName:this.getPathTypeName(),listType:"subwayPath"};
if(h){g.bookmarkId=h
}return g
},toUrlParameter:function(){var g={menu:"subway",sId:this.getStartStationID(),sName:this.getStartStationName(),eId:this.getEndStationID(),eName:this.getEndStationName(),cityCode:this.getCityCode(),pathType:this.getPathType()};
return e.param(g)
}})
}(jQuery));
(function(h,i,e,c){var d=i.ns("nhn.map.bookmark"),b=e.extend({},d.Const.BOOKMARK_GROUP),f=e.extend({},d.Const.BOOKMARK_SORT_ORDER);
function a(k){var j;
switch(k){case b.PLACE:j="tpl";
break;
case b.BUS:j="tbs";
break;
case b.ROUTE:j="trt";
break;
case b.SUBWAY:j="tsw";
break;
default:j="tal"
}return j
}function g(n,m,k){var l=a(m),j;
switch(k){case f.BY_CREATE_TIME:j="regist";
break;
case f.BY_LAST_USE_TIME:j="usage";
break;
case f.BY_NAME:j="name";
break
}h.map.LogClick({acode:[l,j].join("."),element:n.target,event:n})
}d.BookmarkHomeView=i.Class({inherit:h.map.Dispatcher},{initialize:function(){this._UID=i.guid();
this._initTemplate()
},_initTemplate:function(){this._tpl=h.mapservice.TemplateRepos.get("bookmark_home");
this._tplNoLogin=h.mapservice.TemplateRepos.get("bookmark_home_nologin")
},_bindEvent:function(j){j.on("click."+this._UID,".sr_tab1 li[data-group]",this._onClickGroupTab.bind(this)).on("click."+this._UID,".sr_sort1 li[data-sort_order]",this._onClickSortOrderTab.bind(this)).on("click."+this._UID,"a.spm_fav_login",this._onClickLogIn.bind(this))
},_unbindEvent:function(j){j.off("."+this._UID)
},_onClickGroupTab:function(l){var j=e(l.currentTarget),k=j.data("group");
this._group=k;
this.dispatch("groupChanged",{group:k})
},_onClickSortOrderTab:function(l){var j=e(l.currentTarget),k=j.data("sort_order");
this.dispatch("sortOrderChanged",{sortOrder:k});
g(l,this._group,k)
},_onClickLogIn:function(j){j.preventDefault();
this.dispatch("loginClicked");
h.map.LogClick({event:j,element:j.target[0],acode:"lhm.login"})
},getElement:function(){return this._el?this._el[0]:null
},show:function(){var j=this.$service().isLoggedIn()?this._tpl:this._tplNoLogin,k=e(j.process());
this._unbindEvent(e(this.$panel().getContentElement()));
this.$panel().setContent(k);
this._bindEvent(e(this.$panel().getContentElement()));
this._el=e(this.$panel().getContentElement());
h.map.LogPV("bookmark")
},getHomeBookmarkListContainer:function(){return this._el?this._el.find("._home_bookmark_list_container")[0]:null
},getBookmarkListContainer:function(){return this._el?this._el.find("._bookmark_list_container")[0]:null
},updateUiOfGroupTab:function(l){if(!this._el){return
}var k=this._el.find(".sr_tab1"),j=k.find('[data-group="'+l+'"]'),m=j.text();
k.find("li").each(function(o,p){var n=e(p).data("group");
e(p).toggleClass("on",n===l)
});
k.siblings("h3.blind").text(m)
},updateUiOfSortOrderList:function(m){if(!this._el){return
}var l=this._el.find(".sr_sort1"),j=l.find('[data-sort_order="'+m+'"]'),k=j.text();
l.find("li").each(function(o,p){var n=e(p).data("sort_order");
e(p).toggleClass("on",n===m)
});
l.siblings("h4.blind").text(k)
}})
}(nhn,iron,jQuery));
(function(f,b){var c=iron.ns("nhn.map.bookmark"),d=nhn.map.service.DateFormatter,j=f.extend({},c.Const.BOOKMARK_TYPE),e={displayName:'<p class="sbl_addr">displayName</p>',btn:'<a href="#" class="spm spm_sbl_set nclicks(lhm.edit)" data-action="actionName">설정</a>',withLinkHome:'<a href="#" class="sbl_a">집</a>',withoutLinkHome:'<span class="sbl_a">집</span>',withLinkCompany:'<a href="#" class="sbl_a">titleOfCompany</a>',withoutLinkCompany:'<span class="sbl_a">학교/회사</span>'};
c.HomeBookmarkListView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._UID=iron.guid();
this._tpl=nhn.mapservice.TemplateRepos.get("home_bookmark_list");
this._errorTpl=nhn.mapservice.TemplateRepos.get("error_home_bookmark_list");
this._$container=null;
this._$beforeLogin=null
},_bindEvent:function(n){n.on("mouseenter."+this._UID,".shl_l",k.bind(this)).on("mouseleave."+this._UID,".shl_l",g.bind(this)).on("click."+this._UID,".shl_l",a.bind(this)).on("click."+this._UID,"a.spm_srl_del",h.bind(this)).on("mouseenter."+this._UID,".sbl_l",k.bind(this)).on("mouseleave."+this._UID,".sbl_l",g.bind(this)).on("click."+this._UID,".sbl_l",a.bind(this)).on("click."+this._UID,"a.spm_sbl_modify",l.bind(this)).on("click."+this._UID,"a.spm_sbl_del",h.bind(this)).on("click."+this._UID,"a.spm_sl_refresh",m.bind(this)).on("click."+this._UID,"a.spm_sbl_set",l.bind(this)).on("click."+this._UID,"a.sbl_set",l.bind(this)).on("click."+this._UID,"a._login",i.bind(this))
},_unbindEvent:function(n){n.off("."+this._UID)
},getElement:function(){return this._$container?this._$container[0]:null
},setContainer:function(n){this._$container=f(n)
},load:function(o,q,n){if(!this._$container){return
}var p=this._processHomeBookmarkList(o,q);
this._bindEvent(p);
this._$container.empty().append(p);
this._$beforeLogin=this._$container.find(".before_login");
this.processBeforeLogin(q);
f("ul.sr_bmk_lst",this._$container).css("visibility","visible");
if(n&&n!=="add"){o.forEach(function(r){if(r.type===j.BUS_STOP_LANE){this.$service().refreshBusLiveUpdate(r.bookmarkId)
}}.bind(this))
}},renderError:function(o,n){var p=f(n||this._$container);
if(o==="INQUIRE_BOOKMARK_LIST"){p.html(this._errorTpl.process())
}},_processHomeBookmarkList:function(x,q){var o=[],s=null,u=null,w=e.btn.replace("actionName","showHomeSettingDialog"),v=e.withoutLinkHome,r=e.btn.replace("actionName","showCompanySettingDialog"),p=e.withoutLinkCompany,n="company",t="학교/회사";
x.forEach(function(B){this._refineHomeBookmark(B);
var z=B.shortcutType,y=B.ellipsisName,A=B.bookmarkId;
switch(z){case"home":s=A;
w=e.displayName.replace("displayName",y);
if(q){v=e.withLinkHome
}break;
case"office":u=A;
r=e.displayName.replace("displayName",y);
t="회사";
if(q){p=e.withLinkCompany.replace("titleOfCompany","회사")
}break;
case"school":u=A;
r=e.displayName.replace("displayName",y);
n="school";
t="학교";
if(q){p=e.withLinkCompany.replace("titleOfCompany","학교")
}else{p=e.withoutLinkCompany
}break;
default:o.push(B);
break
}}.bind(this));
return f(this._tpl.process({bookmarkIdOfHome:s,bookmarkIdOfCompany:u,titleOfHome:v,descriptionOfHome:w,titleOfCompany:p,descriptionOfCompany:r,classOfCompany:n,nameOfCompany:t,bookmarkList:o,isLoggedIn:q}))
},updateBusArrival:function(p,w,v,y,x){if(!this._$container){return
}var r=this._$container.find("li").filter(function(){return f(this).data("bookmark_id")==p
});
if(r.length==0){return
}var n=r.find("._upperSectionArrival"),s=r.find("._lowerSectionArrival"),u=r.find("._notSupported");
var q=d.formatTimeTo12Hours(v,":")+" 기준",t=[],o="";
if(x){switch(x){case 10:u.hide();
s.find(".arrive").text("운행종료");
s.find(".update_time").text(q);
s.show();
break;
case 11:u.hide();
s.find(".arrive").text("시스템 점검 중");
s.find(".update_time").text(q);
s.show();
break;
default:break
}return
}else{if(Array.isArray(w)){u.hide();
w.forEach(function(z){var A=z.locationNo+" 정류장 전 (약 "+Math.round(parseInt(z.predictTime,10)/60)+"분)";
t.push(A)
});
if(t.length===0){switch(y){case"A":o="운행종료";
break;
case"S":o="막차통과";
break;
case"W":o="차고지대기";
break;
case"E":o="오류";
break;
default:o="도착 예정정보 없음";
break
}t.push(o)
}t.reverse();
t.forEach(function(z,A){if(A==0){s.find(".arrive").text(z);
s.find(".update_time").text(q);
s.show()
}if(A==1){n.find(".arrive").text(z);
n.show()
}})
}}},showBeforeLogin:function(){this._$beforeLogin&&this._$beforeLogin.show()
},hideBeforeLogin:function(){this._$beforeLogin&&this._$beforeLogin.hide()
},processBeforeLogin:function(n){if(n){this.hideBeforeLogin()
}else{this.showBeforeLogin()
}},_refineHomeBookmark:function(n){n.ellipsisName=n.displayName.replace(/→/g,'<span class="path_arr"></span>').replace(/\|/g,'<span class="shl_bar">|</span>');
if(n.pathTypeStr){n.pathTypeStr=n.pathTypeStr.replace(/\|/g,'<span class="shl_bar">|</span>')
}},_getBookmarkId:function(n){return n.closest(".shl_l").data("bookmark_id")||n.closest(".sbl_l").data("bookmark_id")
}});
function k(p){var n=f(p.currentTarget),o=n.find(".spm_sbl_set").data("action");
if(o){return
}n.addClass("over")
}function g(o){var n=f(o.currentTarget);
n.removeClass("over")
}function a(q){q.preventDefault();
var n=f(q.target),o=f(q.currentTarget),p=this._getBookmarkId(o);
if(n.closest(".icon_set, .spm_sl_refresh").length>0){return
}this.dispatch("select",{bookmarkId:p});
nhn.map.LogClick({event:q,element:q.target[0],acode:"lhm.list"})
}function h(p){p.preventDefault();
p.stopPropagation();
var n=f(p.currentTarget),o=this._getBookmarkId(n);
this.dispatch("delete",{bookmarkId:o});
nhn.map.LogClick({event:p,element:p.target[0],acode:"lhm.del"})
}function l(q){q.preventDefault();
q.stopPropagation();
var n=f(q.currentTarget),p=n.data("action"),o;
this.dispatch("showDialog",{actionType:p});
switch(p){case"showHomeSettingDialog":case"showCompanySettingDialog":o="edit";
break;
case"showHomeListSettingDialog":o="config";
break
}nhn.map.LogClick({event:q,element:q.target[0],acode:"lhm."+o})
}function m(p){p.preventDefault();
var n=f(p.currentTarget),o=this._getBookmarkId(n);
this.dispatch("refreshBusLiveUpdate",{bookmarkId:o})
}function i(n){n.preventDefault();
this.dispatch("login");
nhn.map.LogClick({event:n,element:n.target[0],acode:"lhm.login"})
}}(jQuery));
(function(h,i,e,b){var c=i.ns("nhn.map.bookmark"),d=h.map.service.DateFormatter,a=e.extend({},c.Const.BOOKMARK_GROUP),g=e.extend({},c.Const.BOOKMARK_TYPE);
function f(m,n,l,j){var k;
switch(l){case a.PLACE:k="tpl";
break;
case a.BUS:k="tbs";
break;
case a.ROUTE:k="trt";
break;
case a.SUBWAY:k="tsw";
break;
default:k="tal"
}if(n!=="BOOKMARK"){k="lbk"
}h.map.LogClick({acode:[k,j].join("."),element:m.target,event:m})
}c.BookmarkListView=i.Class({inherit:h.map.Dispatcher},{initialize:function(){this._UID=i.guid();
this._template=h.mapservice.TemplateRepos.get("bookmark_list");
this._errorTpl=h.mapservice.TemplateRepos.get("bookmark_list_error")
},_bindEvent:function(j){j.on("mouseenter."+this._UID,".srl_l",this._onMouseenterItem.bind(this)).on("mouseleave."+this._UID,".srl_l",this._onMouseleaveItem.bind(this)).on("click."+this._UID,".srl_l",this._onClickItem.bind(this)).on("click."+this._UID,"a.spm_srl_modify",this._onClickEditBtn.bind(this)).on("click."+this._UID,"a.spm_srl_del",this._onClickDeleteBtn.bind(this)).on("click."+this._UID,"a.spm_sl_refresh",this._onClickBusLiveUpdate.bind(this))
},_unbindEvent:function(j){j.off("."+this._UID)
},_onMouseenterItem:function(k){var j=e(k.currentTarget);
j.addClass("over")
},_onMouseleaveItem:function(k){var j=e(k.currentTarget);
j.removeClass("over")
},_onClickItem:function(l){l.preventDefault();
var k=e(l.target),j=e(l.currentTarget);
if(k.closest(".icon_set, .spm_sl_refresh").length>0){return
}if(j.hasClass("on")){this.dispatch("deselect",{bookmarkId:j.closest(".srl_l").data("bookmark_id")})
}else{this.dispatch("select",{bookmarkId:j.closest(".srl_l").data("bookmark_id")})
}f(l,this.$menubar().getMenuState(),this.getGroup(),"list")
},_onClickEditBtn:function(k){k.preventDefault();
var j=e(k.currentTarget);
this.dispatch("edit",{bookmarkId:j.closest(".srl_l").data("bookmark_id")});
f(k,this.$menubar().getMenuState(),this.getGroup(),"edit")
},_onClickDeleteBtn:function(k){k.preventDefault();
var j=e(k.currentTarget);
this.dispatch("delete",{bookmarkId:j.closest(".srl_l").data("bookmark_id")});
f(k,this.$menubar().getMenuState(),this.getGroup(),"del")
},_onClickBusLiveUpdate:function(k){k.preventDefault();
var j=e(k.currentTarget);
this.dispatch("refreshBusLiveUpdate",{bookmarkId:j.closest(".srl_l").data("bookmark_id")})
},getElement:function(){return this._containerEl?this._containerEl[0]:null
},setContainer:function(j){this._containerEl=e(j)
},setGroup:function(j){this._group=j
},getGroup:function(){return this._group
},setMaxDisplayCount:function(j){this._maxDisplayCount=j
},getMaxDisplayCount:function(){return this._maxDisplayCount
},load:function(l,k){if(!this._containerEl||!Array.isArray(l)){return
}var j=this.getMaxDisplayCount();
if(j>0){l=l.slice(0,j)
}l.forEach(function(n){this._refineBookmark(n)
}.bind(this));
var m=e(this._template.process({bookmarkList:l}));
this._bindEvent(m);
this._containerEl.empty().append(m);
if(k&&k!=="add"){l.forEach(function(n){if(n.type===g.BUS_STOP_LANE){this.$service().refreshBusLiveUpdate(n.bookmarkId)
}}.bind(this))
}this.$panel().refreshScrollBar()
},renderError:function(k,j){var l=e(j||this._containerEl);
if(k==="INQUIRE_BOOKMARK_LIST"){l.html(this._errorTpl.process())
}},_refineBookmark:function(j){j.ellipsisDisplayName=j.displayName.replace(/→/g,'<span class="path_arr">→</span>').replace(/\|/g,'<span class="srl_bar">|</span>');
if(j.pathTypeStr){j.pathTypeStr=j.pathTypeStr.replace(/\|/g,'<span class="srl_bar">|</span>')
}},updateBusArrival:function(l,s,r,u,t){if(!this._containerEl){return
}var n=this._containerEl.find("li").filter(function(){return e(this).data("bookmark_id")==l
});
if(n.length==0){return
}var j=n.find("._upperSectionArrival"),o=n.find("._lowerSectionArrival"),q=n.find("._notSupported");
var m=d.formatTimeTo12Hours(r,":")+" 기준",p=[],k="";
if(t){switch(t){case 10:q.hide();
o.find(".arrive").text("운행종료");
o.find(".update_time").text(m);
o.show();
break;
case 11:q.hide();
o.find(".arrive").text("시스템 점검 중");
o.find(".update_time").text(m);
o.show();
break;
default:break
}return
}else{if(Array.isArray(s)){q.hide();
s.forEach(function(w){var x=w.locationNo+" 정류장 전 (약 "+Math.round(parseInt(w.predictTime,10)/60)+"분)";
p.push(x)
});
if(p.length===0){switch(u){case"A":k="운행종료";
break;
case"S":k="막차통과";
break;
case"W":k="차고지대기";
break;
case"E":k="오류";
break;
default:k="도착 예정정보 없음";
break
}p.push(k)
}p.reverse();
p.forEach(function(w,x){if(x==0){o.find(".arrive").text(w);
o.find(".update_time").text(m);
o.show()
}if(x==1){j.find(".arrive").text(w);
j.show()
}})
}}},updateUi:function(j){this._containerEl.find(".srl_l").each(function(m,n){var l=e(n),k=l.data("bookmark_id");
if(k===j){l.addClass("on")
}else{l.removeClass("on")
}})
}})
}(nhn,iron,jQuery));
nhn.mapservice.TemplateRepos.add({bookmark_home:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER;
p.push(' <div class="_home_bookmark_list_container"></div>  <div class="sr_tab1">  <h5 class="blind">즐겨찾기 리스트 선택옵션</h5>  <ul>   <li data-group="all" class="nclicks(tab.all)"><a href="#">전체</a></li>   <li data-group="place" class="nclicks(tab.place)"><a href="#">장소</a></li>   <li data-group="route" class="nclicks(tab.route)"><a href="#">길찾기</a></li>   <li data-group="bus" class="nclicks(tab.bus)"><a href="#">버스</a></li>   <li data-group="subway" class="nclicks(tab.subway)"><a href="#">지하철</a></li>  </ul> </div>  <!-- [D] : 상단 선택된 타이틀이 들어감 (전체,장소,길찾기,버스,지하철) --> <h3 class="blind">전체</h3>  <ul class="sr_sort1">  <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,'"><a href="#">최신사용순</a></li>  <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_CREATE_TIME,'"><a href="#">최신등록순</a></li>  <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_NAME,'"><a href="#">가나다순</a></li> </ul>  <h4 class="blind">최신등록순</h4>  <div class="_bookmark_list_container"></div>')
}return p.join("")
},bookmark_home_nologin:function(_d_){var p=[];
with(_d_){p.push('<div class="notlg_tit">  <span class="spm spm_fav_tit">로그인하면 즐겨찾기 메뉴를 사용할 수 있습니다. 즐겨찾기를 등록하면 PC 또는 모바일 지도앱에서 자주 쓰는 정보를 쉽고 빠르게 사용할 수 있습니다.</span>  <a href="#" class="spm spm_fav_login">로그인하기</a> </div> <div class="logout_image"><img src="https://ssl.pstatic.net/static/maps/ux2013/img_favorite_main.png" width="315" height="218" alt=""></div> <div class="blind">1.집,회사,업체등 자주 방문하는 장소를 저장해 보세요. 2.자동차,대중교통,자전거,도보길찾기 경로를 저장해 보세요. 3.자주 이용하는 버스 혹은 정류장 정보를 저장해 보세요. 4.자주 이용하는 지하철역,지하철경로를 저장해 보세요.</div>')
}return p.join("")
},bookmark_list:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE;
if(bookmarkList.length>0){p.push('  <h5 class="blind">즐겨찾기 리스트</h5>  <ul class="sr_recent_list" style="display:block"> ');
bookmarkList.forEach(function(bookmark){if(bookmark.type===BOOKMARK_TYPE.ADDRESS){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_site" title="주소">주소</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">주소</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.PLACE||bookmark.type===BOOKMARK_TYPE.STATION){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_site" title="장소">장소</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.address,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.ROUTE){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_path" title="경로">경로</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.pathTypeStr,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_busst" title="버스정보">버스정보</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.cityName," ",bookmark.busTypeName,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_busst" title="버스정류장">버스정류장</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.address," ");
if(bookmark.stationDisplayID&&bookmark.stationDisplayID.length>0){p.push(' <span class="srl_bar">|</span> ',bookmark.stationDisplayID," ")
}p.push('</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP_LANE){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_busst" title="정류장+버스정보">정류장+버스정보</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>       <div class="shl_d _upperSectionArrival" style="display:none;">        <span class="arrive"></span>       </div>       <div class="shl_d _lowerSectionArrival" style="display:none;">        <span class="arrive"></span> <span class="srl_bar">|</span> <span class="update_time"></span> <a href="#" class="spm spm_sl_refresh" title="새로고침">새로고침</a>       </div>       <div class="srl_d _notSupported">실시간 정보 제공하지 않음</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_subway" title="지하철역">지하철역</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">지하철역</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY_PATH){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_subway" title="지하철노선">지하철노선</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">지하철노선 <span class="srl_bar">|</span> ',bookmark.pathTypeName,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}}}}}}}}p.push(" ")
});
p.push("  </ul> ")
}else{p.push('  <div class="sr_favorite_nodata">   <span class="spm spm_alert1"></span> 등록된 즐겨찾기 정보가 없습니다.  </div> ')
}p.push("")
}return p.join("")
},bookmark_list_error:function(_d_){var p=[];
with(_d_){p.push('<div class="sr_favorite_msg">         <strong>일시적으로 즐겨찾기를 불러오지 못했습니다.</strong>         <p>잠시 후에 다시 시도해 주세요.</p>     </div>')
}return p.join("")
},bookmark_add_edit_layer:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_GROUP=nhn.map.bookmark.Const.BOOKMARK_GROUP;
p.push('  <div class="spot_favorite spot_favorite_edit" style="z-index: 999">  <h5 class="blind">즐겨찾기 ',modeTxt,' 레이어</h5>  <div class="sf_header">   <h3>즐겨찾기 ',modeTxt,'</h3>  </div>  <div class="sf_container">   <dl class="sfc_dl">    <dt>명칭</dt>    <dd><span class="ii_wrap"><input type="text" title="명칭" value="',bookmark.getDisplayName(),'"></span></dd>    <dt>홈 설정<a href="#"></a></dt>    <dd>     <div class="ds_select ds_select_h">      <a href="#" class="dss_a nclicks(map*f.config)" data-nclicks="sif*f.config">       <span class="blind">현재</span><strong class="dss_st">홈 화면 설정 안함</strong>       <span class="spm spm_arr_toggle74">홈설정 레이어 열기/닫기</span>      </a>      <div class="ly_dss">       <h5 class="blind">홈설정 레이어</h5>       <ul>        <li data-is_home="false"><a href="#">홈 화면 설정 안함</a></li>        <li data-is_home="true"><a href="#">홈 화면 설정 등록</a></li> ');
if(nhn.map.bookmark.Categorizer.getGroup(bookmark)===BOOKMARK_GROUP.PLACE){p.push('        <li data-is_home="true" data-home_shortcut_type="home"><a href="#">\'집\'으로 등록</a></li>        <li data-is_home="true" data-home_shortcut_type="office"><a href="#">\'회사\'로 등록</a></li>        <li data-is_home="true" data-home_shortcut_type="school"><a href="#">\'학교\'로 등록</a></li> ')
}p.push('       </ul>      </div>     </div>    </dd>   </dl>   <div class="sfc_mes" style="display: none;"></div>  </div>  <div class="sf_footer">   <a href="#" class="spm spm_sf_check nclicks(map*f.add)" data-nclicks="sif*f.add">확인</a>   <a href="#" class="spm spm_sf_cancel nclicks(map*f.cancel)" data-nclicks="sif*f.cancel">취소</a>  </div>  <a href="#" class="spm spm_lpb_close nclicks(map*f.close)" data-nclicks="sif*f.close" title="즐겨찾기 ',modeTxt,' 레이어 닫기">즐겨찾기 ',modeTxt,' 레이어 닫기</a>  <input type="hidden" name="mode" value="',mode,'">  <input type="hidden" name="forceUpdate" value="false"> </div>')
}return p.join("")
},bookmark_spot_list:function(_d_){var p=[];
with(_d_){p.push('<div class="_fav_list">   <h4 class="blind">즐겨찾기 리스트</h4>   <ul class="lah_fav_lst">   </ul>   <div class="lah_more"><a href="#">더보기</a></div>  </div>')
}return p.join("")
},bookmark_list_layer:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER;
p.push('  <div class="spot_favorite spot_favorite_more" style="top:0;left:0;z-index: 999">   <h5 class="blind">즐겨찾기 더보기 레이어</h5>   <div class="sf_header">    <h3>',directionsType,' 선택하기</h3>   </div>   <div class="sf_container">    <!-- [D] : 선택된 메뉴 타이틀 -->    <h4 class="blind">전체</h4>    <div class="srt_sort">     <ul>      <li class="_last_use_time" data-sort_order="',BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,'"><a href="#">최신사용순</a></li>      <li class="_create_time" data-sort_order="',BOOKMARK_SORT_ORDER.BY_CREATE_TIME,'"><a href="#">최신등록순</a></li>      <li class="_by_name" data-sort_order="',BOOKMARK_SORT_ORDER.BY_NAME,'"><a href="#">가나다순</a></li>     </ul>     <h5 class="blind">최신등록순</h5>    </div>     <div class="sf_lst_wrap">     <ul class="sf_lst">      ',bookmarkList,'     </ul>     <div class="paginate_wrap">      <div class="paginate loaded">       <span class="pre">이전</span>                      <span class="next">다음</span>                      <a href="#" title="이전" class="pre">이전</a>                      <a href="#" title="다음" class="next">다음</a>      </div>     </div>    </div>   </div>   <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">홈 설정하기 레이어 닫기</a>  </div>')
}return p.join("")
},bookmark_add_edit_error:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>',displayMsg,"</strong></p>")
}return p.join("")
},bookmark_add_edit_error_exceed_limit_of_homebookmark_count:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>최대 3개의 홈을 설정할 수 있습니다.</p><p class="m2">기존 홈 설정 삭제 후 다시 등록 바랍니다.</p>')
}return p.join("")
},bookmark_add_edit_error_shortcut_to_home_already_exists:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>\'집\'은 한 개 위치만 설정할 수 있습니다.</strong><br/>새로운 정보로 덮어씌우겠습니까?</p><p class="m3">모바일 지도 앱에도 동일하게 적용됩니다.</p>')
}return p.join("")
},bookmark_add_edit_error_shortcut_to_office_already_exists:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>\'학교/회사\'는 한 개 위치만 설정할 수 있습니다.</strong><br/>새로운 정보로 덮어씌우겠습니까?</p><p class="m3">모바일 지도 앱에도 동일하게 적용됩니다.</p>')
}return p.join("")
},bookmark_add_edit_error_bookmark_already_exists:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>이미 즐겨찾기에 등록되어 있습니다.</strong><br/>새로운 정보로 덮어씌우겠습니까?</p><p class="m3">모바일 지도 앱에도 동일하게 적용됩니다.</p>')
}return p.join("")
},bookmark_add_edit_error_exceed_limit_of_bookmark_count:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>즐겨찾기에 추가할 수 있는 항목은 최대 200개입니다.</strong></p><p class="m2">기존 항목 삭제 후 다시 등록 바랍니다.</p>')
}return p.join("")
},bookmark_add_edit_error_exceed_limit_of_busstop_lane_count:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>특정 버스에 대한 정류장 즐겨찾기는 최대 10개까지 가능합니다.</strong></p><p class="m2">기존 즐겨찾기 항목 삭제 후 다시 등록 바랍니다.</p>')
}return p.join("")
},no_house:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>집으로 설정할 항목을 선택해 주세요.</strong></p>')
}return p.join("")
},no_company:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>학교나 회사로 설정할 항목을 선택해 주세요.</strong></p>')
}return p.join("")
},promo_20130730_1:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:0">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <a title="이전" class="pfb_pre dimmed">이전</a><a href="#" title="다음" class="pfb_next">다음</a>    <div class="pfb_paging"><a title="1페이지" class="on" data-page="1">1페이지</a><a href="#" title="2페이지" data-page="2">2페이지</a><a href="#" title="3페이지" data-page="3">3페이지</a><a href="#" title="4페이지" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},promo_20130730_2:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:-659px">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <!-- [D] : 딤드시 span으로 변경 또는 href="#" 제거후 dimmed 추가 -->    <a href="#" title="이전" class="pfb_pre">이전</a><a href="#" title="다음" class="pfb_next">다음</a>    <!-- [D] : 활성화시 on 추가하고 href="#" 제거 -->    <div class="pfb_paging"><a href="#" title="1페이지" data-page="1">1페이지</a><a class="on" title="2페이지" data-page="2">2페이지</a><a href="#" title="3페이지" data-page="3">3페이지</a><a href="#" title="4페이지" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},promo_20130730_3:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:-1318px">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <!-- [D] : 딤드시 span으로 변경 또는 href="#" 제거후 dimmed 추가 -->    <a href="#" title="이전" class="pfb_pre">이전</a><a href="#" title="다음" class="pfb_next">다음</a>    <!-- [D] : 활성화시 on 추가하고 href="#" 제거 -->    <div class="pfb_paging"><a href="#" title="1페이지" data-page="1">1페이지</a><a href="#" title="2페이지" data-page="2">2페이지</a><a title="3페이지" class="on" data-page="3">3페이지</a><a href="#" title="4페이지" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},promo_20130730_4:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:-1977px">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <!-- [D] : 딤드시 span으로 변경 또는 href="#" 제거후 dimmed 추가 -->    <a href="#" title="이전" class="pfb_pre">이전</a><a title="다음" class="pfb_next dimmed">다음</a>    <!-- [D] : 활성화시 on 추가하고 href="#" 제거 -->    <div class="pfb_paging"><a href="#" title="1페이지" data-page="1">1페이지</a><a href="#" title="2페이지" data-page="2">2페이지</a><a href="#" title="3페이지" data-page="3">3페이지</a><a title="4페이지" class="on" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},bookmark_edit_layer:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_GROUP=nhn.map.bookmark.Const.BOOKMARK_GROUP;
p.push('  <div class="spot_favorite spot_favorite_change" style="top:0;left:0;z-index: 999;">  <h5 class="blind">이름변경 레이어</h5>  <div class="sf_header">   <h3>이름변경</h3>  </div>  <div class="sf_container">   <dl class="sf_enter">    <dt>명칭</dt>    <dd>     <!-- [D] : 마우스 오버시 ii_over 추가, 포커스시 ii_focus 추가 -->     <span class="ii_wrap ii_over">      <span class="ii">       <input type="text" title="명칭입력" value="',bookmark.getDisplayName(),'" class="input_act">       <a href="#" class="spm spm_pfe_del">삭제</a>      </span>     </span>    </dd>   </dl>  </div>  <div class="sf_footer">   <a href="#" class="spm spm_sf_check">확인</a>   <a href="#" class="spm spm_sf_cancel">취소</a>  </div>  <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">이름변경 레이어 닫기</a> </div>')
}return p.join("")
},bookmark_add_complete_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert spot_alert_fav" style="z-index: 999;">     <div class="spot_alert_content">         <p class="st"><strong>즐겨찾기에 추가했습니다.</strong></p>     </div>     <span class="spm spm_alert_ic"></span>     <span class="opac_line"></span> </div>')
}return p.join("")
},bookmark_delete_complete_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert spot_alert_fav" style="z-index: 999;">     <div class="spot_alert_content">         <p class="st"><strong>즐겨찾기에서 삭제했습니다.</strong></p>     </div>     <span class="spm spm_alert_ic"></span>     <span class="opac_line"></span> </div>')
}return p.join("")
},home_bookmark_list:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE;
p.push(" ");
if(isLoggedIn){p.push(' <div>  <h5 class="blind">홈설정 리스트</h5>     <div class="before_login">         <p><a href="#" class="_login">로그인</a> 후 설정한 집, 학교/회사, 즐겨찾기를 이용하세요.</p>     </div>  <ul class="sr_bmk_lst" style="visibility: hidden;">   <li class="sbl_l" data-bookmark_id="',bookmarkIdOfHome,'">    <div class="sbl_box">     <span class="sbl_pin spm spm_shl_home" title="집">집</span>     ',titleOfHome,"     ",descriptionOfHome,'    </div>    <div class="sbl_fix"></div>    <div class="sbl_act">     <a href="#" title="설정" class="spm spm_sbl_modify" data-action="showHomeSettingDialog">설정</a>     <a href="#" title="삭제" class="spm spm_sbl_del">삭제</a>    </div>   </li>   <li class="sbl_l" data-bookmark_id="',bookmarkIdOfCompany,'">    <div class="sbl_box">        <span class="sbl_pin spm spm_shl_',classOfCompany,'" title="',nameOfCompany,'">',nameOfCompany,"</span>     ",titleOfCompany,"     ",descriptionOfCompany,'    </div>    <div class="sbl_fix"></div>    <div class="sbl_act">     <a href="#" title="설정" class="spm spm_sbl_modify" data-action="showCompanySettingDialog">설정</a>     <a href="#" title="삭제" class="spm spm_sbl_del">삭제</a>    </div>   </li>  </ul> </div> <div>  <h5 class="blind">즐겨찾기 리스트</h5>  <ul class="sr_home_list" style="display:block"> ');
if(bookmarkList.length>0){p.push(" ");
bookmarkList.forEach(function(bookmark){p.push("     ");
if(bookmark.type===BOOKMARK_TYPE.ADDRESS){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_place" title="주소">주소</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.address,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.PLACE||bookmark.type===BOOKMARK_TYPE.STATION){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_place" title="장소">장소</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.address,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.ROUTE){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_path" title="경로">경로</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.pathTypeStr,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_busst" title="버스정보">버스정보</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.cityName," ",bookmark.busTypeName,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_busst" title="버스정류장">버스정류장</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.address," ");
if(bookmark.stationDisplayID&&bookmark.stationDisplayID.length>0){p.push(' <span class="shl_bar">|</span> ',bookmark.stationDisplayID," ")
}p.push('</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP_LANE){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_busst" title="정류장+버스정보">정류장+버스정보</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d _upperSectionArrival" style="display:none;">                     <span class="arrive"></span>                 </div>                 <div class="shl_d _lowerSectionArrival" style="display:none;">                     <span class="arrive"></span> <span class="shl_bar">|</span> <span class="update_time"></span> <a href="#" class="spm spm_sl_refresh" title="새로고침">새로고침</a>                 </div>                 <div class="shl_d _notSupported">실시간 정보 제공하지 않음</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_subway" title="지하철역">지하철역</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">지하철역</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY_PATH){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_subway" title="지하철노선">지하철노선</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">지하철노선 <span class="shl_bar">|</span> ',bookmark.pathTypeName,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}}}}}}}}p.push(" ")
});
p.push('  </ul>  <div class="shl_act">      <a href="#" class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</a>      <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a>     </div> </div> ')
}else{p.push(' <div class="sr_fav_setting2">  <span class="spm spm_srfav_fav"></span>  <strong>자주찾는 즐겨찾기</strong>  <span class="bar">|</span>  <a href="#" class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</a>  <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a> </div> ')
}p.push(" ")
}else{p.push(' <div>  <h5 class="blind">홈설정 리스트</h5>  <div class="before_login">   <p>    <a href="#" class="_login">로그인</a> 후 설정한 집, 학교/회사, 즐겨찾기를 이용하세요.   </p>  </div>  <ul class="sr_bmk_lst" style="display:block">   <li class="sbl_l" data-bookmark_id="">    <div class="sbl_box">     <span class="sbl_pin spm spm_shl_home" title="집">집</span>     <span class="sbl_a">집      <a href="#" class="spm spm_sbl_set" data-action="showHomeSettingDialog">설정</a>     </span>    </div>    <div class="sbl_fix"></div>    <div class="sbl_act"></div>   </li>   <li class="sbl_l" data-bookmark_id="">    <div class="sbl_box">     <span class="sbl_pin spm spm_shl_company" title="학교/회사">학교/회사</span>     <span class="sbl_a">학교/회사      <a href="#" class="spm spm_sbl_set" data-action="showCompanySettingDialog">설정</a>     </span>    </div>    <div class="sbl_fix"></div>    <div class="sbl_act"></div>   </li>  </ul> </div> <div>  <h5 class="blind">즐겨찾기 리스트</h5>     <div class="sr_fav_setting2">         <span class="spm spm_srfav_fav"></span>         <strong>자주찾는 즐겨찾기</strong>         <span class="bar">|</span>         <a href="#" class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</a>         <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a>     </div> </div> ')
}p.push("")
}return p.join("")
},error_home_bookmark_list:function(_d_){var p=[];
with(_d_){p.push('<div>         <h5 class="blind">홈설정 리스트</h5>         <ul class="sr_bmk_lst">             <li class="sbl_l">                 <div class="sbl_box">                     <span class="sbl_pin spm spm_shl_home" title="집">집</span>                     <span class="sbl_a sbl_error">집</span>                 </div>                 <div class="sbl_fix"></div>             </li>             <li class="sbl_l">                 <div class="sbl_box">                     <span class="sbl_pin spm spm_shl_company" title="회사">회사</span>                     <span class="sbl_a sbl_error">회사</span>                 </div>                 <div class="sbl_fix"></div>             </li>             <li class="sbl_l sbl_l_error">일시적으로 즐겨찾기를 불러오지 못했습니다.</li>         </ul>     </div>     <div class="sr_fav_setting2">         <span class="spm spm_srfav_fav"></span>         <strong>자주찾는 즐겨찾기</strong>         <span class="bar">|</span>         <span class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</span>         <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a>     </div>')
}return p.join("")
},bookmark_list_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <div class="spot_favorite" style="top:0;left:0;z-index: 999">  <h5 class="blind">',titleByDialogType,' 레이어</h5>  <div class="sf_header"> ');
if(dialogType==DIALOG_TYPE.HOME){p.push("         <h3>",titleByDialogType,"</h3> ")
}else{if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.COMPANY){p.push("         <h3>",titleByDialogType,'</h3>         <span class="bar">|</span>         <a href="#" class="sfh_a">검색하여 선택하기</a> ')
}else{if(dialogType==DIALOG_TYPE.MORE_FOR_DEPARTURE||dialogType==DIALOG_TYPE.MORE_FOR_ARRIVAL||dialogType==DIALOG_TYPE.MORE_FOR_WAYPOINT){p.push("         <h3>",titleByDialogType," 선택하기</h3> ")
}}}p.push('  </div>  <div class="sf_container"> ');
if(dialogType==DIALOG_TYPE.HOME){p.push('   <div class="sr_tab1">    <h5 class="blind">즐겨찾기 리스트 선택옵션</h5>    <ul>     <li data-group="all"><a href="#">전체</a></li>                 <li data-group="place"><a href="#">장소</a></li>                 <li data-group="route"><a href="#">길찾기</a></li>                 <li data-group="bus"><a href="#">버스</a></li>                 <li data-group="subway"><a href="#">지하철</a></li>    </ul>   </div> ')
}p.push('   <h4 class="blind">전체</h4>   <div class="srt_sort">    <ul>                 <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,'"><a href="#">최신사용순</a></li>     <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_CREATE_TIME,'"><a href="#">최신등록순</a></li>                 <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_NAME,'"><a href="#">가나다순</a></li>    </ul>    <h5 class="blind">최신등록순</h5>   </div>         <div class="sf_lst_wrap" style="display:none;">             <div class="paginate_wrap">                 <div class="paginate loaded">                     <span class="pre">이전</span>                     <span class="next">다음</span>                     <a href="#" title="이전" class="pre">이전</a>                     <a href="#" title="다음" class="next">다음</a>                 </div>             </div>         </div>   <div class="sfc_mes" style="display:none;"></div>         <div class="sfl_nodata" style="display:none;">   </div>  </div>  <div class="sf_footer"> ');
if(dialogType==DIALOG_TYPE.COMPANY){p.push('         <a href="#" class="spm spm_sfl_school" data-btn_type="school">학교 설정하기</a>         <a href="#" class="spm spm_sfl_office" data-btn_type="office">회사 설정하기</a> ')
}else{if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.HOME){p.push('         <a href="#" class="spm spm_sf_check2" data-btn_type="confirm">확인</a> ')
}}p.push('  </div>  <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">홈 설정하기 레이어 닫기</a> </div>')
}return p.join("")
},bookmark_list_of_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <ul class="sf_lst"> ');
var lastIndex=list.length;
list.forEach(function(bookmark,index){var shortcutType=bookmark.shortcutType,bookmarkType=bookmark.type,isHome=bookmark.isHome,isLast=(index===lastIndex-1),isChecked=false;
if(dialogType==DIALOG_TYPE.HOME){isChecked=bookmark.isHome
}p.push(" ");
if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&isHome&&shortcutType=="home"){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="집으로 설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_home">집</span>             </a>         </li> ')
}else{if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&isHome&&shortcutType=="school"){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="학교로 설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_school">학교</span>             </a>         </li> ')
}else{if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&isHome&&shortcutType=="office"){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="회사로 설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_office">회사</span>             </a>         </li> ')
}else{if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&dialogType!=DIALOG_TYPE.HOME&&isHome&&shortcutType==null){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="홈설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_register">홈설정</span>             </a>         </li> ')
}else{if(dialogType==DIALOG_TYPE.MORE_FOR_DEPARTURE||dialogType==DIALOG_TYPE.MORE_FOR_ARRIVAL||dialogType==DIALOG_TYPE.MORE_FOR_WAYPOINT){p.push('         <li data-bookmark_id="',bookmark.bookmarkId,'" data-id="',bookmark.spotId,'" data-coord="',bookmark.coord,'" data-name="',bookmark.spotName,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="_token ',isChecked?"checked":"",'">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sfl_ck">선택됨</span>             </a>         </li> ')
}else{p.push('         <li data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="_token ',isChecked?"checked":"",'">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sfl_ck">선택됨</span>             </a>         </li> ')
}}}}}p.push(" ")
});
p.push(" </ul>")
}return p.join("")
},search_result_list_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <div class="spot_favorite" style="top:0;left:0;z-index: 999">  <h5 class="blind">홈 설정하기 레이어</h5>  <div class="sf_header">   <h3>',titleByDialogType,"</h3> ");
if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.COMPANY){p.push('         <span class="bar">|</span>         <a href="#" class="sfh_a">즐겨찾기에서 선택하기</a> ')
}p.push('  </div>  <div class="sf_container">      <fieldset class="sfl_fieldset">    <legend>검색</legend>    <span class="ii ii_after">     <span class="ii_inner">      <input type="text" title="검색어 입력" value="" class="input_act">     </span>    </span>    <button type="submit" class="spm spm_ssch">검색</button>   </fieldset>   <div class="sfl_nodata sfl_nodata_border" style="display:none;">   </div>   <div class="sr_tab1" style="display:none;">    <h5 class="blind">즐겨찾기 리스트 선택옵션</h5>    <ul>     <li data-group="SITE_1"><a href="#">장소</a></li>     <li data-group="ADDRESS"><a href="#">주소</a></li>    </ul>   </div>   <h4 class="blind">장소</h4>         <div class="sf_lst_wrap" style="display:none;">             <div class="paginate_wrap">                 <div class="paginate loaded">                     <span class="pre">이전</span>                     <span class="next">다음</span>                     <a href="#" title="이전" class="pre">이전</a>                     <a href="#" title="다음" class="next">다음</a>                 </div>             </div>         </div>   <div class="sfc_mes" style="display:none;"></div>  </div>  <div class="sf_footer"> ');
if(dialogType==DIALOG_TYPE.COMPANY){p.push('         <a href="#" class="spm spm_sfl_school" data-btn_type="school">학교 설정하기</a>         <a href="#" class="spm spm_sfl_office" data-btn_type="office">회사 설정하기</a> ')
}else{if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.HOME){p.push('         <a href="#" class="spm spm_sf_check2" data-btn_type="confirm">확인</a> ')
}}p.push('  </div>  <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">홈 설정하기 레이어 닫기</a> </div>')
}return p.join("")
},search_result_list_of_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <ul class="sf_lst"> ');
var lastIndex=list.length;
list.forEach(function(data,index){var shortcutType=data.bookmark.getShortcutType(),isHome=data.bookmark.isHome(),isAddress=(data.bookmark.getType()==="address"),isLast=(index===lastIndex-1),classNameOfLi="";
if(isAddress){classNameOfLi=classNameOfLi.concat("addr")
}if(isLast){classNameOfLi=classNameOfLi.concat(" last")
}classNameOfLi=classNameOfLi.trim();
p.push(" ");
if(isHome&&shortcutType=="home"){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="집으로 설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_home">집</span>                             </a>                         </li> ')
}else{if(isHome&&shortcutType=="school"){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="학교로 설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_school">학교</span>                             </a>                         </li> ')
}else{if(isHome&&shortcutType=="office"){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="회사로 설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_office">회사</span>                             </a>                         </li> ')
}else{if(isHome){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="홈설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_register">홈설정</span>                             </a>                         </li> ')
}else{p.push('                         <li data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="_token">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sfl_ck">선택됨</span>                             </a>                         </li> ')
}}}}p.push(" ")
});
p.push(" </ul>")
}return p.join("")
}});
(function(e,f){var d=iron.ns("nhn.map.bookmark");
d.PromoLayerView=iron.Class({initialize:function(){},loadLayer:function(){this.page=1;
var g={onShow:this._onShow.bind(this),onClose:this._onClose.bind(this)};
this._drawLayer(b,g)
},_onShow:function(){c=e("#simplemodal-data");
this._bindEvents()
},_onClose:function(g){if(g.type==="click"){g.preventDefault()
}this.$dialog().hideDialog();
if(!c){return
}this._unbindEvents();
c=null
},_bindEvents:function(){c.on("click",".btn_popd_close",this._onClose.bind(this));
c.on("click",".pfb_next",this._onNext.bind(this));
c.on("click",".pfb_pre",this._onPrev.bind(this));
c.on("click",".pfb_paging a",this._onPaging.bind(this))
},_unbindEvents:function(){c.off("click")
},_onNext:function(g){g.preventDefault();
if(this.page===4){return
}c.html(a[this.page++])
},_onPrev:function(g){g.preventDefault();
if(this.page===1){return
}c.html(a[--this.page-1])
},_onPaging:function(h){h.preventDefault();
var g=e(h.target).data("page");
if(g===this.page){return
}this.page=g;
c.html(a[this.page-1])
},_drawLayer:function(g,h){this.$dialog().hideDialog();
this.$dialog().showDialog(g,h)
}});
var b=nhn.mapservice.TemplateRepos.get("promo_20130730_1").process();
var a=[e(b).html(),e(nhn.mapservice.TemplateRepos.get("promo_20130730_2").process()).html(),e(nhn.mapservice.TemplateRepos.get("promo_20130730_3").process()).html(),e(nhn.mapservice.TemplateRepos.get("promo_20130730_4").process()).html()];
var c=null
}(jQuery));
(function(f,h){var d=iron.ns("nhn.map.bookmark"),g=nhn.map.DOMCache,e=d.Const.PAGE_UNIT,c=d.Const.ITEM_COUNT_PER_PAGE,a=d.Const.BOOKMARK_SORT_ORDER,b=d.Const.DIALOG_TYPE;
d.AbstractDialogView=iron.Class({inherit:nhn.map.Dispatcher},{_UID:null,_isLock:false,_$body:null,_$window:null,initialize:function(){this._UID=iron.guid();
this._$body=g.getBody();
this._$window=g.getWindow()
},showErrorMsg:function(i){this._$errorMsg.empty().html(i).show()
},hideErrorMsg:function(){this._$errorMsg.empty().hide()
},showList:function(){this._$listWrap.show()
},hideList:function(){this._$listWrap.hide()
},showNoData:function(){var i=this.getOptions(),j=i.query,k="";
if(j){k="<p>'"+j+"'에 대한 검색결과가 없습니다.</p>"
}else{k="<p>등록된 즐겨찾기 정보가 없습니다.</p>"
}this._$noData.empty().html(k).show()
},hideNoData:function(){this._$noData.empty().hide()
},showFooter:function(){this._$footer.show()
},hideFooter:function(){this._$footer.hide()
},setOptions:function(i){this._options=i
},showCheckToken:function(i){i.find("._token").addClass("checked")
},hideCheckToken:function(i){i.find("._token").removeClass("checked")
},hideCheckTokenOfSiblings:function(i){i.siblings().find(".checked").removeClass("checked")
},getOptions:function(){return this._options
},setContainer:function(i){this._$container=f(i)
},getContainer:function(){return this._$container
},setDialog:function(i){this._$dialog=i
},getDialog:function(){return this._$dialog
},updateUiOfGroupTab:function(k){var j=this.getDialog();
if(!j){return
}var i=j.find(".sr_tab1"),m=i.find('[data-group="'+k+'"]'),l=m.text();
i.find("li").each(function(o,p){var n=f(p).data("group");
f(p).toggleClass("on",n===k)
});
i.siblings("h3.blind").text(l)
},updateUiOfSortOrderTab:function(j){var k=this.getDialog();
if(!k){return
}var m=k.find(".srt_sort"),l=m.find('[data-sort_order="'+j+'"]'),i=l.text();
m.find("li").each(function(o,p){var n=f(p).data("sort_order");
f(p).toggleClass("on",n===j)
});
m.siblings("h4.blind").text(i)
},lockDialog:function(){this._isLock=true
},releaseDialog:function(){this._isLock=false
},_initVariable:function(){this._options={};
this._paginate=null;
this._$dialog=null;
this._$container=null;
this._$listWrap=null;
this._$paginateWrap=null;
this._$noData=null;
this._$footer=null;
this._$errorMsg=null
},_prepareDOM:function(){var i=this.getOptions(),j=f(this._tpl.DIALOG.process({dialogType:i.dialogType,titleByDialogType:i.titleByDialogType}));
this.setDialog(j);
this._$listWrap=f("div.sf_lst_wrap",j);
this._$paginateWrap=f("div.paginate_wrap",j);
this._$noData=f("div.sfl_nodata",j);
this._$footer=f("div.sf_footer",j);
this._$errorMsg=f("div.sfc_mes",j)
},_addDialog:function(m){var l=this.getContainer(),k=this.getDialog(),i=this.getOptions(),j=null;
l.append(k);
this._bindEvent();
this._adjustPosition();
m&&m();
switch(i.dialogType){case b.HOME:j="myplaces_fromFavorites";
break;
case b.COMPANY:if(i.group){j="mywork_fromFavorites"
}else{j="mywork_fromSearch"
}break;
case b.HOUSE:if(i.group){j="myhome_fromFavorites"
}else{j="myhome_fromSearch"
}break;
case b.EDIT:j="favorites";
break
}if(j){nhn.map.LogPV(j)
}},_removeDialog:function(){var i=this.getDialog();
if(!i){return
}this._unbindEvent();
i.remove()
},_bindEvent:function(){this._$dialog.on("click."+this._UID,".spm_lpb_close",this._onCloseDialog.bind(this));
this._$body.on("mousedown."+this._UID,this._onMouseDownBody.bind(this));
var i=this.getOptions();
if(i.adjustPosition){this._$window.on("resize."+this._UID,this._onResizeWindow.bind(this))
}},_unbindEvent:function(){var i=this.getDialog();
if(!i){return
}var j="."+this._UID;
this._$dialog.off(j);
this._$body.off(j);
this._$window.off(j)
},_adjustPosition:function(){var q=this.getOptions();
if(!q.adjustPosition){return
}var o=this.getContainer(),i=this.getDialog(),n=o.width(),p=o.height(),k=i.width(),m=i.height(),j=(n/2)-(k/2),l=(p/2)-(m/2);
i.css({left:j,top:l})
},_isChecked:function(i){return i.find("._token").hasClass("checked")
},_getBookmarkInfoOfCheckedItem:function(j){var k=this.getDialog(),i=k.find(".checked");
if(!i){return null
}return i.parent().data(j)
},_getPaginate:function(l,m,i){var k=f("div.paginate",l),j;
if(k.length===0){return null
}j=new nhn.Pagination(k[0],{nItem:i,nItemPerPage:c,nPagePerPageList:e,sMoveUnit:"pagelist",elPrevPageLinkOn:f("a.pre",k)[0],elNextPageLinkOn:f("a.next",k)[0]});
j.movePageTo(parseInt(m,10));
return j
},_processPaginate:function(){var k=this.getDialog(),j=this.getOptions(),i=j.totalCount;
if(this._paginate){this._paginate.setItemCount(i);
this._paginate.movePageTo(j.page,false)
}else{this._paginate=this._getPaginate(k,j.page,i);
this._paginate&&this._paginate.attach({move:this._onClickPage.bind(this)})
}if(i<11){this._$paginateWrap.hide()
}else{this._$paginateWrap.show()
}},_updateList:function(i){this._$listWrap.find("ul").remove();
f(i).insertBefore(this._$paginateWrap);
this._$listWrap.scrollTop(0)
},_renderList:function(j){if(!Array.isArray(j)){return
}var i=this.getOptions(),k=i.isEmpty;
if(k){this.hideList();
this.showNoData()
}else{this._updateList(this._tpl.LIST.process({list:j,dialogType:i.dialogType}));
this._processPaginate()
}},_onCloseDialog:function(i){if(this._isLock){return
}i.preventDefault();
this.hideDialog();
nhn.map.LogClick({event:i,element:i.target[0],acode:"hcl.close"})
},_onMouseDownBody:function(k){if(this._isLock){return
}var i=f(k.target),j=this.getDialog(),l=i.closest(j).length===0;
if(l){if(!i.parents().hasClass("spot_alert")){this.hideDialog()
}}},_onResizeWindow:function(){this._adjustPosition()
},_onClickGroupTab:function(k){k.preventDefault();
var i=f(k.currentTarget),j=i.data("group");
this.dispatch("changeGroup",{group:j});
nhn.map.LogClick({event:k,element:k.target[0],acode:"hcl."+j})
},_onClickSortOrderTab:function(n){n.preventDefault();
var i=f(n.currentTarget),m=i.data("sort_order"),k=this.getOptions(),j="hcl.",l;
if(!k.isEmpty){this.dispatch("changeSortOrder",{sortOrder:m})
}switch(m){case a.BY_CREATE_TIME:l="regist";
break;
case a.BY_LAST_USE_TIME:l="usage";
break;
case a.BY_NAME:l="name";
break
}if(k.dialogType===b.MORE_FOR_DEPARTURE||k.dialogType===b.MORE_FOR_ARRIVAL||k.dialogType===b.MORE_FOR_WAYPOINT){j="sfd*k."
}nhn.map.LogClick({event:n,element:n.target[0],acode:j+l})
},_onClickPage:function(j){var i=j.nPage;
this.dispatch("changePage",{page:i})
},_onClickItemForNClicks:function(k){var j="hcl.list",i=this.getOptions();
if(i.dialogType===b.MORE_FOR_DEPARTURE||i.dialogType===b.MORE_FOR_ARRIVAL||i.dialogType===b.MORE_FOR_WAYPOINT){j="sfd*k.list"
}nhn.map.LogClick({event:k,element:k.target[0],acode:j})
},_onClickConfirmForNClicks:function(i){nhn.map.LogClick({event:i,element:i.target[0],acode:"hcl.ok"})
}})
}(jQuery));
(function(h,i,d,b){var c=i.ns("nhn.map.bookmark"),e=c.AbstractDialogView.prototype,g=c.Const.BOOKMARK_TYPE;
c.BookmarkListLayerView=i.Class(c.AbstractDialogView,{initialize:function(){c.AbstractDialogView.apply(this,arguments);
this._tpl={DIALOG:h.mapservice.TemplateRepos.get("bookmark_list_dialog"),LIST:h.mapservice.TemplateRepos.get("bookmark_list_of_dialog")};
this._initVariable()
},_bindEvent:function(j){e._bindEvent.apply(this);
var k=this.getDialog();
k.on("click."+this._UID,".srt_sort li[data-sort_order]",this._onClickSortOrderTab.bind(this)).on("click."+this._UID,".sf_lst_wrap li",a.bind(this))
},showDialog:function(j){this._removeDialog();
this._prepareDOM();
this._addDialog();
this._showLine()
},hideDialog:function(){this._hideLine();
this._removeDialog();
this._initVariable()
},renderList:function(k){if(!Array.isArray(k)){return
}var j=this.getOptions(),l=j.isEmpty;
if(l){this.hideList();
this.showNoData()
}else{k.forEach(function(m){this._refineBookmark(m)
}.bind(this));
this.showList();
this.hideNoData();
this._renderList(k);
this._adjustPosition()
}},_refineBookmark:function(j){j.ellipsisName=j.displayName.replace(/\|/g,'<span class="bar">|</span>');
if(j.pathTypeStr){j.pathTypeStr=j.pathTypeStr.replace(/\|/g,'<span class="bar">|</span>')
}var k="";
switch(j.type){case g.ADDRESS:k="주소";
break;
case g.BUS:k=j.cityName+" "+j.busTypeName;
break;
case g.BUS_STOP_LANE:case g.PLACE:case g.STATION:k=j.address;
break;
case g.BUS_STOP:k=j.address;
if(j.stationDisplayID){k=k.concat(' <span class="bar">|</span> '+j.stationDisplayID)
}break;
case g.ROUTE:k=j.pathTypeStr;
break;
case g.SUBWAY:k="지하철역";
break;
case g.SUBWAY_PATH:k='지하철노선 <span class="bar">|</span> '+j.pathTypeName;
break
}j.bookmarkTypeString=k
},_showLine:function(){var j=this.getDialog();
j.addClass("spot_favorite_more")
},_hideLine:function(){var j=this.getDialog();
j.removeClass("spot_favorite_more")
},destroy:function(){this._containerEl=null;
this._unbindEvent()
}});
function a(k){k.preventDefault();
e._onClickItemForNClicks.call(this,k);
var j=d(k.currentTarget);
this.dispatch("clickFavoriteList",{selectedData:{bookmarkId:j.data("bookmark_id"),name:j.data("name"),id:j.data("id"),key:j.data("id"),coord:j.data("coord")}})
}function f(l,m,k,j){}}(nhn,iron,jQuery));
(function(g,d){var e=iron.ns("nhn.map.bookmark"),i=e.AbstractDialogView.prototype,h=e.BookmarkAlertFormatErrorResolver,j={ENTER:13};
e.BookmarkEditView=iron.Class(e.AbstractDialogView,{initialize:function(){e.AbstractDialogView.apply(this,arguments);
this._tpl=nhn.mapservice.TemplateRepos.get("bookmark_edit_layer");
this._initVariable()
},_initVariable:function(){i._initVariable.apply(this);
this._$input=null
},_bindEvent:function(){i._bindEvent.apply(this);
var k=this.getDialog();
k.on("click."+this._UID,".spm_pfe_del",b.bind(this)).on("click."+this._UID,".spm_sf_check",c.bind(this)).on("click."+this._UID,".spm_sf_cancel",a.bind(this)).on("keydown."+this._UID,".input_act",f.bind(this))
},_prepareDOM:function(k){var l=g(this._tpl.process({bookmark:k}));
l.data("bookmark",k);
this.setDialog(l);
this._$input=l.find("input")
},showDialog:function(k){this._removeDialog();
this._prepareDOM(k);
this._addDialog(function(){var l=this._$input.val().length,m=this._$input[0];
this._$input.focus();
m.selectionStart=l;
m.selectionEnd=l
}.bind(this))
},hideDialog:function(){this._removeDialog();
this._initVariable()
},_confirm:function(){var k=this._$input.val(),n=this.getDialog(),m=n.data("bookmark");
if(k){this.dispatch("edit",{bookmark:m,displayName:k})
}else{var l=h.resolve({code:"LE0100"});
this.lockDialog();
nhn.map.service.Alert(l.errorMsgTitle,l.errorMsg,function(){this._$input.focus();
this.releaseDialog()
}.bind(this))
}}});
function b(k){k.preventDefault();
this._$input.val("")
}function c(k){k.preventDefault();
this._confirm()
}function a(k){k.preventDefault();
this.hideDialog()
}function f(l){var k=l.keyCode;
if(k===j.ENTER){l.preventDefault();
l.stopPropagation();
this._confirm()
}}}(jQuery));
(function(b,c){var a=iron.ns("nhn.map.bookmark");
a.BookmarkAddAndDeleteCompleteView=iron.Class({initialize:function(){this._$dialog={ADD:b(nhn.mapservice.TemplateRepos.get("bookmark_add_complete_layer").process()),DELETE:b(nhn.mapservice.TemplateRepos.get("bookmark_delete_complete_layer").process())}
},showCompleteDialog:function(f,d,e){f.append(this._$dialog[e]);
if(d.adjustPosition){this._adjustPosition()
}},hideCompleteDialog:function(d){this._$dialog[d].remove()
}})
}(jQuery));
(function(e,g){var d=iron.ns("nhn.map.bookmark"),a=d.AbstractDialogView.prototype,c=d.Const.BOOKMARK_TYPE;
d.HomeListSettingView=iron.Class(d.AbstractDialogView,{initialize:function(){d.AbstractDialogView.apply(this,arguments);
this._tpl={DIALOG:nhn.mapservice.TemplateRepos.get("bookmark_list_dialog"),LIST:nhn.mapservice.TemplateRepos.get("bookmark_list_of_dialog")};
this._initVariable()
},_bindEvent:function(){a._bindEvent.apply(this);
var h=this.getDialog();
h.on("click."+this._UID,".sr_tab1 li[data-group]",this._onClickGroupTab.bind(this)).on("click."+this._UID,".srt_sort li[data-sort_order]",this._onClickSortOrderTab.bind(this)).on("click."+this._UID,"a.spm_sf_check2",b.bind(this)).on("click."+this._UID,".sf_lst_wrap li[data-bookmark_id]",f.bind(this))
},showDialog:function(){this._removeDialog();
this._prepareDOM();
this._addDialog()
},hideDialog:function(){this._removeDialog();
this._initVariable()
},renderList:function(i){if(!Array.isArray(i)){return
}var h=this.getOptions(),j=h.isEmpty;
if(j){this.hideList();
this.showNoData()
}else{i.forEach(function(k){this._refineBookmark(k)
}.bind(this));
this.showList();
this.hideNoData();
this._renderList(i);
this._adjustPosition()
}},_refineBookmark:function(h){h.ellipsisName=h.displayName.replace(/\|/g,'<span class="bar">|</span>');
if(h.pathTypeStr){h.pathTypeStr=h.pathTypeStr.replace(/\|/g,'<span class="bar">|</span>')
}var i="";
switch(h.type){case c.ADDRESS:i="주소";
break;
case c.BUS:i=h.cityName+" "+h.busTypeName;
break;
case c.BUS_STOP_LANE:case c.PLACE:case c.STATION:i=h.address;
break;
case c.BUS_STOP:i=h.address;
if(h.stationDisplayID){i=i.concat(' <span class="bar">|</span> '+h.stationDisplayID)
}break;
case c.ROUTE:i=h.pathTypeStr;
break;
case c.SUBWAY:i="지하철역";
break;
case c.SUBWAY_PATH:i='지하철노선 <span class="bar">|</span> '+h.pathTypeName;
break
}h.bookmarkTypeString=i
}});
function b(h){h.preventDefault();
a._onClickConfirmForNClicks.call(this,h);
this.hideDialog()
}function f(j){j.preventDefault();
a._onClickItemForNClicks.call(this,j);
var h=e(j.currentTarget),k=h.data("status")==="dimmed",i="select";
if(k){return
}if(this._isChecked(h)){i="deselect"
}this.dispatch(i,{bookmarkId:h.data("bookmark_id"),bookmarkTarget:h})
}}(jQuery));
(function(g,d){var e=iron.ns("nhn.map.bookmark"),h=e.AbstractDialogView.prototype,l={ENTER:13};
e.HomeAndCompanySettingBySearchView=iron.Class(e.AbstractDialogView,{initialize:function(){e.AbstractDialogView.apply(this,arguments);
this._tpl={DIALOG:nhn.mapservice.TemplateRepos.get("search_result_list_dialog"),LIST:nhn.mapservice.TemplateRepos.get("search_result_list_of_dialog"),NO_CONFIRM_HOME:nhn.mapservice.TemplateRepos.get("no_house"),NO_CONFIRM_COMPANY:nhn.mapservice.TemplateRepos.get("no_company")};
this._placeholder="설정하고 싶은 장소를 입력하세요.";
this._initVariable()
},_initVariable:function(){h._initVariable.apply(this);
this._$input=null;
this._$tab=null;
this._checkedBookmarkKey=null
},_bindEvent:function(){h._bindEvent.apply(this);
var m=this.getDialog();
m.on("click."+this._UID,".spm_ssch",k.bind(this)).on("click."+this._UID,".sr_tab1 li[data-group]",this._onClickGroupTab.bind(this)).on("click."+this._UID,"a.sfh_a",i.bind(this)).on("click."+this._UID,"a.spm_sf_check2",c.bind(this)).on("click."+this._UID,"a.spm_sfl_school",c.bind(this)).on("click."+this._UID,"a.spm_sfl_office",c.bind(this)).on("click."+this._UID,".sf_lst_wrap li[data-id]",b.bind(this)).on("keydown."+this._UID,".input_act",f.bind(this)).on("focus."+this._UID,".input_act",j.bind(this)).on("blur."+this._UID,".input_act",a.bind(this))
},_prepareDOM:function(){h._prepareDOM.apply(this);
var m=this.getDialog();
this._$input=g("input",m);
this._$tab=g("div.sr_tab1",m);
this._$input.M_placeHolder(this._placeholder)
},showDialog:function(){this._removeDialog();
this._prepareDOM();
this._addDialog(function(){this.hideFooter();
this._addNoResultClassName();
this._$input.focus()
}.bind(this))
},hideDialog:function(){this._removeDialog();
this._initVariable();
this.dispatch("close")
},renderList:function(o){if(!Array.isArray(o)){return
}var n=this.getOptions(),p=n.isEmpty;
if(p){this.hideList();
this.showNoData()
}else{this.showList();
this.hideNoData();
this._renderList(o);
if(this._checkedBookmarkKey){var m=this._$listWrap.find('[data-bookmark_key="'+this._checkedBookmarkKey+'"]');
if(m){m.find("._token").addClass("checked")
}}}this.showFooter();
this._removeNoResultClassName();
this._adjustPosition()
},renderTab:function(n,o){var m=["<ul>"];
n.forEach(function(p){if(p.type==="SITE_1"||p.type==="ADDRESS"){m.push('<li data-group="'+p.type+'"><a href="#">'+p.title+"</a></li>")
}}.bind(this));
m.push("</ul>");
this._$tab.find("ul").remove();
g(m.join("")).insertAfter(this._$tab.find("h5"));
this.showTab();
this.updateUiOfGroupTab(o)
},showTab:function(){this._$tab.show()
},hideTab:function(){this._$tab.hide()
},_addNoResultClassName:function(){var m=this.getDialog();
m.addClass("sf_no_result")
},_removeNoResultClassName:function(){var m=this.getDialog();
m.removeClass("sf_no_result")
},_search:function(){var m=this._$input.val().trim();
this._checkedBookmarkKey=null;
this.hideErrorMsg();
if(m===this._placeholder){m=""
}if(m){this.dispatch("search",{query:m})
}else{this.lockDialog();
nhn.map.service.Alert("검색어를 입력해 주세요.",function(){this._$input.focus();
this.releaseDialog()
}.bind(this))
}},_updateBookmark:function(m,n){this.dispatch("updateBookmark",{bookmarkKey:n,shortcutType:m})
}});
function k(m){m.preventDefault();
this._search();
nhn.map.LogClick({event:m,element:m.target[0],acode:"hcl.search"})
}function i(m){m.preventDefault();
this.dispatch("showBookmarkDialog");
nhn.map.LogClick({event:m,element:m.target[0],acode:"hcl.bsel"})
}function c(p){p.preventDefault();
h._onClickConfirmForNClicks.call(this,p);
var m=g(p.currentTarget),o=m.data("btn_type"),n="";
if(o==="confirm"){o="home"
}if(this._checkedBookmarkKey){this._updateBookmark(o,this._checkedBookmarkKey)
}else{if(o==="home"){n=this._tpl.NO_CONFIRM_HOME.process()
}else{n=this._tpl.NO_CONFIRM_COMPANY.process()
}this.hideErrorMsg();
this.showErrorMsg(n)
}}function b(o){o.preventDefault();
h._onClickItemForNClicks.call(this,o);
var m=g(o.currentTarget),q=m.data("status")==="dimmed",p=this._isChecked(m),n=m.data("bookmark_key");
if(q){return
}if(p){this.hideCheckToken(m);
this._checkedBookmarkKey=null
}else{this.hideCheckTokenOfSiblings(m);
this.showCheckToken(m);
this._checkedBookmarkKey=n
}this.hideErrorMsg()
}function f(n){var m=n.keyCode;
if(m===l.ENTER){n.preventDefault();
n.stopPropagation();
this._search()
}}function j(m){g(m.currentTarget).addClass("input_act_focus")
}function a(m){g(m.currentTarget).removeClass("input_act_focus")
}}(jQuery));
(function(f,h){var e=iron.ns("nhn.map.bookmark"),a=e.AbstractDialogView.prototype,d=e.Const.BOOKMARK_TYPE;
e.HomeAndCompanySettingByBookmarkView=iron.Class(e.AbstractDialogView,{initialize:function(){e.AbstractDialogView.apply(this,arguments);
this._tpl={DIALOG:nhn.mapservice.TemplateRepos.get("bookmark_list_dialog"),LIST:nhn.mapservice.TemplateRepos.get("bookmark_list_of_dialog"),NO_CONFIRM_HOME:nhn.mapservice.TemplateRepos.get("no_house"),NO_CONFIRM_COMPANY:nhn.mapservice.TemplateRepos.get("no_company")};
this._initVariable()
},_initVariable:function(){a._initVariable.apply(this);
this._checkedBookmarkId=null
},_bindEvent:function(){a._bindEvent.apply(this);
var i=this.getDialog();
i.on("click."+this._UID,".srt_sort li[data-sort_order]",this._onClickSortOrderTab.bind(this)).on("click."+this._UID,"a.spm_sfl_school",c.bind(this)).on("click."+this._UID,"a.spm_sfl_office",c.bind(this)).on("click."+this._UID,"a.spm_sf_check2",c.bind(this)).on("click."+this._UID,".sf_lst_wrap li[data-bookmark_id]",g.bind(this)).on("click."+this._UID,"a.sfh_a",b.bind(this))
},showDialog:function(){this._removeDialog();
this._prepareDOM();
this._addDialog();
this._showLine()
},hideDialog:function(){this._hideLine();
this._removeDialog();
this._initVariable()
},renderList:function(k){if(!Array.isArray(k)){return
}var j=this.getOptions(),l=j.isEmpty;
if(l){this.hideList();
this.showNoData()
}else{k.forEach(function(m){this._refineBookmark(m)
}.bind(this));
this.showList();
this.hideNoData();
this._renderList(k);
this._adjustPosition();
if(this._checkedBookmarkId){var i=this._$listWrap.find('[data-bookmark_id="'+this._checkedBookmarkId+'"]');
if(i){i.find("._token").addClass("checked")
}}}},_refineBookmark:function(i){i.ellipsisName=i.displayName.replace(/\|/g,'<span class="bar">|</span>');
if(i.pathTypeStr){i.pathTypeStr=i.pathTypeStr.replace(/\|/g,'<span class="bar">|</span>')
}var j="";
switch(i.type){case d.ADDRESS:j="주소";
break;
case d.BUS:j=i.cityName+" "+i.busTypeName;
break;
case d.BUS_STOP_LANE:case d.PLACE:case d.STATION:j=i.address;
break;
case d.BUS_STOP:j=i.address;
if(i.stationDisplayID){j=j.concat(' <span class="bar">|</span> '+i.stationDisplayID)
}break;
case d.ROUTE:j=i.pathTypeStr;
break;
case d.SUBWAY:j="지하철역";
break;
case d.SUBWAY_PATH:j='지하철노선 <span class="bar">|</span> '+i.pathTypeName;
break
}i.bookmarkTypeString=j
},_updateBookmark:function(i,j){this.dispatch("updateBookmark",{bookmarkId:j,shortcutType:i})
},_showLine:function(){var i=this.getDialog();
i.addClass("spot_favorite_more")
},_hideLine:function(){var i=this.getDialog();
i.removeClass("spot_favorite_more")
}});
function c(l){l.preventDefault();
a._onClickConfirmForNClicks.call(this,l);
var i=f(l.currentTarget),k=i.data("btn_type"),j="";
if(k==="confirm"){k="home"
}if(this._checkedBookmarkId){this._updateBookmark(k,this._checkedBookmarkId)
}else{if(k==="home"){j=this._tpl.NO_CONFIRM_HOME.process()
}else{j=this._tpl.NO_CONFIRM_COMPANY.process()
}this.hideErrorMsg();
this.showErrorMsg(j)
}}function g(k){k.preventDefault();
a._onClickItemForNClicks.call(this,k);
var i=f(k.currentTarget),m=i.data("status")==="dimmed",l=this._isChecked(i),j=i.data("bookmark_id");
if(m){return
}if(l){this.hideCheckToken(i);
this._checkedBookmarkId=null
}else{this.hideCheckTokenOfSiblings(i);
this.showCheckToken(i);
this._checkedBookmarkId=j
}this.hideErrorMsg()
}function b(i){i.preventDefault();
this.dispatch("showSearchDialog");
nhn.map.LogClick({event:i,element:i.target[0],acode:"hcl.ssel"})
}}(jQuery));
nhn.mapservice.TemplateRepos.add({bookmark_home:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER;
p.push(' <div class="_home_bookmark_list_container"></div>  <div class="sr_tab1">  <h5 class="blind">즐겨찾기 리스트 선택옵션</h5>  <ul>   <li data-group="all" class="nclicks(tab.all)"><a href="#">전체</a></li>   <li data-group="place" class="nclicks(tab.place)"><a href="#">장소</a></li>   <li data-group="route" class="nclicks(tab.route)"><a href="#">길찾기</a></li>   <li data-group="bus" class="nclicks(tab.bus)"><a href="#">버스</a></li>   <li data-group="subway" class="nclicks(tab.subway)"><a href="#">지하철</a></li>  </ul> </div>  <!-- [D] : 상단 선택된 타이틀이 들어감 (전체,장소,길찾기,버스,지하철) --> <h3 class="blind">전체</h3>  <ul class="sr_sort1">  <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,'"><a href="#">최신사용순</a></li>  <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_CREATE_TIME,'"><a href="#">최신등록순</a></li>  <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_NAME,'"><a href="#">가나다순</a></li> </ul>  <h4 class="blind">최신등록순</h4>  <div class="_bookmark_list_container"></div>')
}return p.join("")
},bookmark_home_nologin:function(_d_){var p=[];
with(_d_){p.push('<div class="notlg_tit">  <span class="spm spm_fav_tit">로그인하면 즐겨찾기 메뉴를 사용할 수 있습니다. 즐겨찾기를 등록하면 PC 또는 모바일 지도앱에서 자주 쓰는 정보를 쉽고 빠르게 사용할 수 있습니다.</span>  <a href="#" class="spm spm_fav_login">로그인하기</a> </div> <div class="logout_image"><img src="https://ssl.pstatic.net/static/maps/ux2013/img_favorite_main.png" width="315" height="218" alt=""></div> <div class="blind">1.집,회사,업체등 자주 방문하는 장소를 저장해 보세요. 2.자동차,대중교통,자전거,도보길찾기 경로를 저장해 보세요. 3.자주 이용하는 버스 혹은 정류장 정보를 저장해 보세요. 4.자주 이용하는 지하철역,지하철경로를 저장해 보세요.</div>')
}return p.join("")
},bookmark_list:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE;
if(bookmarkList.length>0){p.push('  <h5 class="blind">즐겨찾기 리스트</h5>  <ul class="sr_recent_list" style="display:block"> ');
bookmarkList.forEach(function(bookmark){if(bookmark.type===BOOKMARK_TYPE.ADDRESS){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_site" title="주소">주소</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">주소</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.PLACE||bookmark.type===BOOKMARK_TYPE.STATION){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_site" title="장소">장소</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.address,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.ROUTE){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_path" title="경로">경로</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.pathTypeStr,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_busst" title="버스정보">버스정보</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.cityName," ",bookmark.busTypeName,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_busst" title="버스정류장">버스정류장</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">',bookmark.address," ");
if(bookmark.stationDisplayID&&bookmark.stationDisplayID.length>0){p.push(' <span class="srl_bar">|</span> ',bookmark.stationDisplayID," ")
}p.push('</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP_LANE){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_busst" title="정류장+버스정보">정류장+버스정보</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>       <div class="shl_d _upperSectionArrival" style="display:none;">        <span class="arrive"></span>       </div>       <div class="shl_d _lowerSectionArrival" style="display:none;">        <span class="arrive"></span> <span class="srl_bar">|</span> <span class="update_time"></span> <a href="#" class="spm spm_sl_refresh" title="새로고침">새로고침</a>       </div>       <div class="srl_d _notSupported">실시간 정보 제공하지 않음</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_subway" title="지하철역">지하철역</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">지하철역</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY_PATH){p.push('    <li class="srl_l" data-bookmark_id="',bookmark.bookmarkId,'">     <div class="srl_box">      <span class="srl_pin spm spm_srl_subway" title="지하철노선">지하철노선</span>      <a href="#" class="srl_a" title="',bookmark.displayName,'">',bookmark.ellipsisDisplayName,'</a>      <div class="srl_d">지하철노선 <span class="srl_bar">|</span> ',bookmark.pathTypeName,'</div>      <div class="icon_set">       <a href="#" title="수정" class="spm spm_srl_modify">수정</a>       <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>      </div>     </div>    </li> ')
}}}}}}}}p.push(" ")
});
p.push("  </ul> ")
}else{p.push('  <div class="sr_favorite_nodata">   <span class="spm spm_alert1"></span> 등록된 즐겨찾기 정보가 없습니다.  </div> ')
}p.push("")
}return p.join("")
},bookmark_list_error:function(_d_){var p=[];
with(_d_){p.push('<div class="sr_favorite_msg">         <strong>일시적으로 즐겨찾기를 불러오지 못했습니다.</strong>         <p>잠시 후에 다시 시도해 주세요.</p>     </div>')
}return p.join("")
},bookmark_add_edit_layer:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_GROUP=nhn.map.bookmark.Const.BOOKMARK_GROUP;
p.push('  <div class="spot_favorite spot_favorite_edit" style="z-index: 999">  <h5 class="blind">즐겨찾기 ',modeTxt,' 레이어</h5>  <div class="sf_header">   <h3>즐겨찾기 ',modeTxt,'</h3>  </div>  <div class="sf_container">   <dl class="sfc_dl">    <dt>명칭</dt>    <dd><span class="ii_wrap"><input type="text" title="명칭" value="',bookmark.getDisplayName(),'"></span></dd>    <dt>홈 설정<a href="#"></a></dt>    <dd>     <div class="ds_select ds_select_h">      <a href="#" class="dss_a nclicks(map*f.config)" data-nclicks="sif*f.config">       <span class="blind">현재</span><strong class="dss_st">홈 화면 설정 안함</strong>       <span class="spm spm_arr_toggle74">홈설정 레이어 열기/닫기</span>      </a>      <div class="ly_dss">       <h5 class="blind">홈설정 레이어</h5>       <ul>        <li data-is_home="false"><a href="#">홈 화면 설정 안함</a></li>        <li data-is_home="true"><a href="#">홈 화면 설정 등록</a></li> ');
if(nhn.map.bookmark.Categorizer.getGroup(bookmark)===BOOKMARK_GROUP.PLACE){p.push('        <li data-is_home="true" data-home_shortcut_type="home"><a href="#">\'집\'으로 등록</a></li>        <li data-is_home="true" data-home_shortcut_type="office"><a href="#">\'회사\'로 등록</a></li>        <li data-is_home="true" data-home_shortcut_type="school"><a href="#">\'학교\'로 등록</a></li> ')
}p.push('       </ul>      </div>     </div>    </dd>   </dl>   <div class="sfc_mes" style="display: none;"></div>  </div>  <div class="sf_footer">   <a href="#" class="spm spm_sf_check nclicks(map*f.add)" data-nclicks="sif*f.add">확인</a>   <a href="#" class="spm spm_sf_cancel nclicks(map*f.cancel)" data-nclicks="sif*f.cancel">취소</a>  </div>  <a href="#" class="spm spm_lpb_close nclicks(map*f.close)" data-nclicks="sif*f.close" title="즐겨찾기 ',modeTxt,' 레이어 닫기">즐겨찾기 ',modeTxt,' 레이어 닫기</a>  <input type="hidden" name="mode" value="',mode,'">  <input type="hidden" name="forceUpdate" value="false"> </div>')
}return p.join("")
},bookmark_spot_list:function(_d_){var p=[];
with(_d_){p.push('<div class="_fav_list">   <h4 class="blind">즐겨찾기 리스트</h4>   <ul class="lah_fav_lst">   </ul>   <div class="lah_more"><a href="#">더보기</a></div>  </div>')
}return p.join("")
},bookmark_list_layer:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER;
p.push('  <div class="spot_favorite spot_favorite_more" style="top:0;left:0;z-index: 999">   <h5 class="blind">즐겨찾기 더보기 레이어</h5>   <div class="sf_header">    <h3>',directionsType,' 선택하기</h3>   </div>   <div class="sf_container">    <!-- [D] : 선택된 메뉴 타이틀 -->    <h4 class="blind">전체</h4>    <div class="srt_sort">     <ul>      <li class="_last_use_time" data-sort_order="',BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,'"><a href="#">최신사용순</a></li>      <li class="_create_time" data-sort_order="',BOOKMARK_SORT_ORDER.BY_CREATE_TIME,'"><a href="#">최신등록순</a></li>      <li class="_by_name" data-sort_order="',BOOKMARK_SORT_ORDER.BY_NAME,'"><a href="#">가나다순</a></li>     </ul>     <h5 class="blind">최신등록순</h5>    </div>     <div class="sf_lst_wrap">     <ul class="sf_lst">      ',bookmarkList,'     </ul>     <div class="paginate_wrap">      <div class="paginate loaded">       <span class="pre">이전</span>                      <span class="next">다음</span>                      <a href="#" title="이전" class="pre">이전</a>                      <a href="#" title="다음" class="next">다음</a>      </div>     </div>    </div>   </div>   <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">홈 설정하기 레이어 닫기</a>  </div>')
}return p.join("")
},bookmark_add_edit_error:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>',displayMsg,"</strong></p>")
}return p.join("")
},bookmark_add_edit_error_exceed_limit_of_homebookmark_count:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>최대 3개의 홈을 설정할 수 있습니다.</p><p class="m2">기존 홈 설정 삭제 후 다시 등록 바랍니다.</p>')
}return p.join("")
},bookmark_add_edit_error_shortcut_to_home_already_exists:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>\'집\'은 한 개 위치만 설정할 수 있습니다.</strong><br/>새로운 정보로 덮어씌우겠습니까?</p><p class="m3">모바일 지도 앱에도 동일하게 적용됩니다.</p>')
}return p.join("")
},bookmark_add_edit_error_shortcut_to_office_already_exists:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>\'학교/회사\'는 한 개 위치만 설정할 수 있습니다.</strong><br/>새로운 정보로 덮어씌우겠습니까?</p><p class="m3">모바일 지도 앱에도 동일하게 적용됩니다.</p>')
}return p.join("")
},bookmark_add_edit_error_bookmark_already_exists:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>이미 즐겨찾기에 등록되어 있습니다.</strong><br/>새로운 정보로 덮어씌우겠습니까?</p><p class="m3">모바일 지도 앱에도 동일하게 적용됩니다.</p>')
}return p.join("")
},bookmark_add_edit_error_exceed_limit_of_bookmark_count:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>즐겨찾기에 추가할 수 있는 항목은 최대 200개입니다.</strong></p><p class="m2">기존 항목 삭제 후 다시 등록 바랍니다.</p>')
}return p.join("")
},bookmark_add_edit_error_exceed_limit_of_busstop_lane_count:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>특정 버스에 대한 정류장 즐겨찾기는 최대 10개까지 가능합니다.</strong></p><p class="m2">기존 즐겨찾기 항목 삭제 후 다시 등록 바랍니다.</p>')
}return p.join("")
},no_house:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>집으로 설정할 항목을 선택해 주세요.</strong></p>')
}return p.join("")
},no_company:function(_d_){var p=[];
with(_d_){p.push('<p class="m1"><strong>학교나 회사로 설정할 항목을 선택해 주세요.</strong></p>')
}return p.join("")
},promo_20130730_1:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:0">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <a title="이전" class="pfb_pre dimmed">이전</a><a href="#" title="다음" class="pfb_next">다음</a>    <div class="pfb_paging"><a title="1페이지" class="on" data-page="1">1페이지</a><a href="#" title="2페이지" data-page="2">2페이지</a><a href="#" title="3페이지" data-page="3">3페이지</a><a href="#" title="4페이지" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},promo_20130730_2:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:-659px">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <!-- [D] : 딤드시 span으로 변경 또는 href="#" 제거후 dimmed 추가 -->    <a href="#" title="이전" class="pfb_pre">이전</a><a href="#" title="다음" class="pfb_next">다음</a>    <!-- [D] : 활성화시 on 추가하고 href="#" 제거 -->    <div class="pfb_paging"><a href="#" title="1페이지" data-page="1">1페이지</a><a class="on" title="2페이지" data-page="2">2페이지</a><a href="#" title="3페이지" data-page="3">3페이지</a><a href="#" title="4페이지" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},promo_20130730_3:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:-1318px">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <!-- [D] : 딤드시 span으로 변경 또는 href="#" 제거후 dimmed 추가 -->    <a href="#" title="이전" class="pfb_pre">이전</a><a href="#" title="다음" class="pfb_next">다음</a>    <!-- [D] : 활성화시 on 추가하고 href="#" 제거 -->    <div class="pfb_paging"><a href="#" title="1페이지" data-page="1">1페이지</a><a href="#" title="2페이지" data-page="2">2페이지</a><a title="3페이지" class="on" data-page="3">3페이지</a><a href="#" title="4페이지" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},promo_20130730_4:function(_d_){var p=[];
with(_d_){p.push('<div class="popd popd_fav">  <div class="pop_notice"></div>  <div class="popd_top"></div>  <div class="popd_middle">   <div class="pop_container">    <h3 class="blind">즐겨찾기 홈 설정 활용법</h3>    <div class="popd_fav_box">     <!-- [D] : -659px 갭 -->     <ul style="left:-1977px">      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide01.png" width="659" height="399" alt="자주 찾는 장소, 경로, 버스, 지하철 정보를 즐겨찾기 등록시 설정 해두시면 지도 홈 화면에서 언제든지 확인할수 있고, 길찾기시 빠르게 출발지 및 도착지로 지정할 수 있습니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide02.png" width="659" height="399" alt="원하는 정보에서 별표를 클릭하여 즐겨찾기를 추가합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide03.png" width="659" height="399" alt="즐겨찾기 추가 레이어에서 홈 설정을 합니다."></li>      <li><img src="https://ssl.pstatic.net/static/maps/ux2013/fav_guide04.png" width="659" height="399" alt="지도 홈 화면에서 설정한 항목을 확인하세요."></li>     </ul>    </div>    <!-- [D] : 딤드시 span으로 변경 또는 href="#" 제거후 dimmed 추가 -->    <a href="#" title="이전" class="pfb_pre">이전</a><a title="다음" class="pfb_next dimmed">다음</a>    <!-- [D] : 활성화시 on 추가하고 href="#" 제거 -->    <div class="pfb_paging"><a href="#" title="1페이지" data-page="1">1페이지</a><a href="#" title="2페이지" data-page="2">2페이지</a><a href="#" title="3페이지" data-page="3">3페이지</a><a title="4페이지" class="on" data-page="4">4페이지</a></div>   </div>   <div class="pop_footer">    <a href="#" title="닫기" class="sbtn btn_popd_close">닫기</a>   </div>   <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2032" class="view_more" target="_blank">더 자세히 알아보기</a>  </div>  <div class="popd_bottom"></div> </div>')
}return p.join("")
},bookmark_edit_layer:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_GROUP=nhn.map.bookmark.Const.BOOKMARK_GROUP;
p.push('  <div class="spot_favorite spot_favorite_change" style="top:0;left:0;z-index: 999;">  <h5 class="blind">이름변경 레이어</h5>  <div class="sf_header">   <h3>이름변경</h3>  </div>  <div class="sf_container">   <dl class="sf_enter">    <dt>명칭</dt>    <dd>     <!-- [D] : 마우스 오버시 ii_over 추가, 포커스시 ii_focus 추가 -->     <span class="ii_wrap ii_over">      <span class="ii">       <input type="text" title="명칭입력" value="',bookmark.getDisplayName(),'" class="input_act">       <a href="#" class="spm spm_pfe_del">삭제</a>      </span>     </span>    </dd>   </dl>  </div>  <div class="sf_footer">   <a href="#" class="spm spm_sf_check">확인</a>   <a href="#" class="spm spm_sf_cancel">취소</a>  </div>  <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">이름변경 레이어 닫기</a> </div>')
}return p.join("")
},bookmark_add_complete_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert spot_alert_fav" style="z-index: 999;">     <div class="spot_alert_content">         <p class="st"><strong>즐겨찾기에 추가했습니다.</strong></p>     </div>     <span class="spm spm_alert_ic"></span>     <span class="opac_line"></span> </div>')
}return p.join("")
},bookmark_delete_complete_layer:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert spot_alert_fav" style="z-index: 999;">     <div class="spot_alert_content">         <p class="st"><strong>즐겨찾기에서 삭제했습니다.</strong></p>     </div>     <span class="spm spm_alert_ic"></span>     <span class="opac_line"></span> </div>')
}return p.join("")
},home_bookmark_list:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE;
p.push(" ");
if(isLoggedIn){p.push(' <div>  <h5 class="blind">홈설정 리스트</h5>     <div class="before_login">         <p><a href="#" class="_login">로그인</a> 후 설정한 집, 학교/회사, 즐겨찾기를 이용하세요.</p>     </div>  <ul class="sr_bmk_lst" style="visibility: hidden;">   <li class="sbl_l" data-bookmark_id="',bookmarkIdOfHome,'">    <div class="sbl_box">     <span class="sbl_pin spm spm_shl_home" title="집">집</span>     ',titleOfHome,"     ",descriptionOfHome,'    </div>    <div class="sbl_fix"></div>    <div class="sbl_act">     <a href="#" title="설정" class="spm spm_sbl_modify" data-action="showHomeSettingDialog">설정</a>     <a href="#" title="삭제" class="spm spm_sbl_del">삭제</a>    </div>   </li>   <li class="sbl_l" data-bookmark_id="',bookmarkIdOfCompany,'">    <div class="sbl_box">        <span class="sbl_pin spm spm_shl_',classOfCompany,'" title="',nameOfCompany,'">',nameOfCompany,"</span>     ",titleOfCompany,"     ",descriptionOfCompany,'    </div>    <div class="sbl_fix"></div>    <div class="sbl_act">     <a href="#" title="설정" class="spm spm_sbl_modify" data-action="showCompanySettingDialog">설정</a>     <a href="#" title="삭제" class="spm spm_sbl_del">삭제</a>    </div>   </li>  </ul> </div> <div>  <h5 class="blind">즐겨찾기 리스트</h5>  <ul class="sr_home_list" style="display:block"> ');
if(bookmarkList.length>0){p.push(" ");
bookmarkList.forEach(function(bookmark){p.push("     ");
if(bookmark.type===BOOKMARK_TYPE.ADDRESS){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_place" title="주소">주소</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.address,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.PLACE||bookmark.type===BOOKMARK_TYPE.STATION){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_place" title="장소">장소</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.address,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.ROUTE){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_path" title="경로">경로</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.pathTypeStr,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_busst" title="버스정보">버스정보</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.cityName," ",bookmark.busTypeName,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_busst" title="버스정류장">버스정류장</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">',bookmark.address," ");
if(bookmark.stationDisplayID&&bookmark.stationDisplayID.length>0){p.push(' <span class="shl_bar">|</span> ',bookmark.stationDisplayID," ")
}p.push('</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.BUS_STOP_LANE){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_busst" title="정류장+버스정보">정류장+버스정보</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d _upperSectionArrival" style="display:none;">                     <span class="arrive"></span>                 </div>                 <div class="shl_d _lowerSectionArrival" style="display:none;">                     <span class="arrive"></span> <span class="shl_bar">|</span> <span class="update_time"></span> <a href="#" class="spm spm_sl_refresh" title="새로고침">새로고침</a>                 </div>                 <div class="shl_d _notSupported">실시간 정보 제공하지 않음</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_subway" title="지하철역">지하철역</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">지하철역</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}else{if(bookmark.type===BOOKMARK_TYPE.SUBWAY_PATH){p.push('         <li class="shl_l" data-bookmark_id="',bookmark.bookmarkId,'">             <div class="shl_box">                 <span class="shl_pin spm spm_shl_subway" title="지하철노선">지하철노선</span>                 <a href="#" class="shl_a">',bookmark.ellipsisName,'</a>                 <div class="shl_d">지하철노선 <span class="shl_bar">|</span> ',bookmark.pathTypeName,'</div>                 <div class="icon_set icon_set_only">                     <a href="#" title="삭제" class="spm spm_srl_del">삭제</a>                 </div>             </div>         </li>     ')
}}}}}}}}p.push(" ")
});
p.push('  </ul>  <div class="shl_act">      <a href="#" class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</a>      <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a>     </div> </div> ')
}else{p.push(' <div class="sr_fav_setting2">  <span class="spm spm_srfav_fav"></span>  <strong>자주찾는 즐겨찾기</strong>  <span class="bar">|</span>  <a href="#" class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</a>  <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a> </div> ')
}p.push(" ")
}else{p.push(' <div>  <h5 class="blind">홈설정 리스트</h5>  <div class="before_login">   <p>    <a href="#" class="_login">로그인</a> 후 설정한 집, 학교/회사, 즐겨찾기를 이용하세요.   </p>  </div>  <ul class="sr_bmk_lst" style="display:block">   <li class="sbl_l" data-bookmark_id="">    <div class="sbl_box">     <span class="sbl_pin spm spm_shl_home" title="집">집</span>     <span class="sbl_a">집      <a href="#" class="spm spm_sbl_set" data-action="showHomeSettingDialog">설정</a>     </span>    </div>    <div class="sbl_fix"></div>    <div class="sbl_act"></div>   </li>   <li class="sbl_l" data-bookmark_id="">    <div class="sbl_box">     <span class="sbl_pin spm spm_shl_company" title="학교/회사">학교/회사</span>     <span class="sbl_a">학교/회사      <a href="#" class="spm spm_sbl_set" data-action="showCompanySettingDialog">설정</a>     </span>    </div>    <div class="sbl_fix"></div>    <div class="sbl_act"></div>   </li>  </ul> </div> <div>  <h5 class="blind">즐겨찾기 리스트</h5>     <div class="sr_fav_setting2">         <span class="spm spm_srfav_fav"></span>         <strong>자주찾는 즐겨찾기</strong>         <span class="bar">|</span>         <a href="#" class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</a>         <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a>     </div> </div> ')
}p.push("")
}return p.join("")
},error_home_bookmark_list:function(_d_){var p=[];
with(_d_){p.push('<div>         <h5 class="blind">홈설정 리스트</h5>         <ul class="sr_bmk_lst">             <li class="sbl_l">                 <div class="sbl_box">                     <span class="sbl_pin spm spm_shl_home" title="집">집</span>                     <span class="sbl_a sbl_error">집</span>                 </div>                 <div class="sbl_fix"></div>             </li>             <li class="sbl_l">                 <div class="sbl_box">                     <span class="sbl_pin spm spm_shl_company" title="회사">회사</span>                     <span class="sbl_a sbl_error">회사</span>                 </div>                 <div class="sbl_fix"></div>             </li>             <li class="sbl_l sbl_l_error">일시적으로 즐겨찾기를 불러오지 못했습니다.</li>         </ul>     </div>     <div class="sr_fav_setting2">         <span class="spm spm_srfav_fav"></span>         <strong>자주찾는 즐겨찾기</strong>         <span class="bar">|</span>         <span class="sbl_set" data-action="showHomeListSettingDialog">홈 설정하기</span>         <a href="https://help.naver.com/support/contents/contents.nhn?serviceNo=768&categoryNo=2523" target="_blank" class="spm spm_srfav_info">안내</a>     </div>')
}return p.join("")
},bookmark_list_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <div class="spot_favorite" style="top:0;left:0;z-index: 999">  <h5 class="blind">',titleByDialogType,' 레이어</h5>  <div class="sf_header"> ');
if(dialogType==DIALOG_TYPE.HOME){p.push("         <h3>",titleByDialogType,"</h3> ")
}else{if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.COMPANY){p.push("         <h3>",titleByDialogType,'</h3>         <span class="bar">|</span>         <a href="#" class="sfh_a">검색하여 선택하기</a> ')
}else{if(dialogType==DIALOG_TYPE.MORE_FOR_DEPARTURE||dialogType==DIALOG_TYPE.MORE_FOR_ARRIVAL||dialogType==DIALOG_TYPE.MORE_FOR_WAYPOINT){p.push("         <h3>",titleByDialogType," 선택하기</h3> ")
}}}p.push('  </div>  <div class="sf_container"> ');
if(dialogType==DIALOG_TYPE.HOME){p.push('   <div class="sr_tab1">    <h5 class="blind">즐겨찾기 리스트 선택옵션</h5>    <ul>     <li data-group="all"><a href="#">전체</a></li>                 <li data-group="place"><a href="#">장소</a></li>                 <li data-group="route"><a href="#">길찾기</a></li>                 <li data-group="bus"><a href="#">버스</a></li>                 <li data-group="subway"><a href="#">지하철</a></li>    </ul>   </div> ')
}p.push('   <h4 class="blind">전체</h4>   <div class="srt_sort">    <ul>                 <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_LAST_USE_TIME,'"><a href="#">최신사용순</a></li>     <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_CREATE_TIME,'"><a href="#">최신등록순</a></li>                 <li data-sort_order="',BOOKMARK_SORT_ORDER.BY_NAME,'"><a href="#">가나다순</a></li>    </ul>    <h5 class="blind">최신등록순</h5>   </div>         <div class="sf_lst_wrap" style="display:none;">             <div class="paginate_wrap">                 <div class="paginate loaded">                     <span class="pre">이전</span>                     <span class="next">다음</span>                     <a href="#" title="이전" class="pre">이전</a>                     <a href="#" title="다음" class="next">다음</a>                 </div>             </div>         </div>   <div class="sfc_mes" style="display:none;"></div>         <div class="sfl_nodata" style="display:none;">   </div>  </div>  <div class="sf_footer"> ');
if(dialogType==DIALOG_TYPE.COMPANY){p.push('         <a href="#" class="spm spm_sfl_school" data-btn_type="school">학교 설정하기</a>         <a href="#" class="spm spm_sfl_office" data-btn_type="office">회사 설정하기</a> ')
}else{if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.HOME){p.push('         <a href="#" class="spm spm_sf_check2" data-btn_type="confirm">확인</a> ')
}}p.push('  </div>  <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">홈 설정하기 레이어 닫기</a> </div>')
}return p.join("")
},bookmark_list_of_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <ul class="sf_lst"> ');
var lastIndex=list.length;
list.forEach(function(bookmark,index){var shortcutType=bookmark.shortcutType,bookmarkType=bookmark.type,isHome=bookmark.isHome,isLast=(index===lastIndex-1),isChecked=false;
if(dialogType==DIALOG_TYPE.HOME){isChecked=bookmark.isHome
}p.push(" ");
if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&isHome&&shortcutType=="home"){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="집으로 설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_home">집</span>             </a>         </li> ')
}else{if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&isHome&&shortcutType=="school"){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="학교로 설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_school">학교</span>             </a>         </li> ')
}else{if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&isHome&&shortcutType=="office"){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="회사로 설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_office">회사</span>             </a>         </li> ')
}else{if(dialogType!=DIALOG_TYPE.MORE_FOR_DEPARTURE&&dialogType!=DIALOG_TYPE.MORE_FOR_ARRIVAL&&dialogType!=DIALOG_TYPE.MORE_FOR_WAYPOINT&&dialogType!=DIALOG_TYPE.HOME&&isHome&&shortcutType==null){p.push('         <li data-status="dimmed" data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="setting" title="홈설정되어 있어 선택이 불가능합니다.">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sflset_register">홈설정</span>             </a>         </li> ')
}else{if(dialogType==DIALOG_TYPE.MORE_FOR_DEPARTURE||dialogType==DIALOG_TYPE.MORE_FOR_ARRIVAL||dialogType==DIALOG_TYPE.MORE_FOR_WAYPOINT){p.push('         <li data-bookmark_id="',bookmark.bookmarkId,'" data-id="',bookmark.spotId,'" data-coord="',bookmark.coord,'" data-name="',bookmark.spotName,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="_token ',isChecked?"checked":"",'">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sfl_ck">선택됨</span>             </a>         </li> ')
}else{p.push('         <li data-bookmark_id="',bookmark.bookmarkId,'" ');
if(isLast){p.push(' class="last" ')
}p.push('>             <a href="#" class="_token ',isChecked?"checked":"",'">                 <strong class="sfl_tit">',bookmark.ellipsisName,'</strong>                 <span class="sfl_addr">',bookmark.bookmarkTypeString,'</span>                 <span class="spm spm_sfl_ck">선택됨</span>             </a>         </li> ')
}}}}}p.push(" ")
});
p.push(" </ul>")
}return p.join("")
},search_result_list_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_SORT_ORDER=nhn.map.bookmark.Const.BOOKMARK_SORT_ORDER,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <div class="spot_favorite" style="top:0;left:0;z-index: 999">  <h5 class="blind">홈 설정하기 레이어</h5>  <div class="sf_header">   <h3>',titleByDialogType,"</h3> ");
if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.COMPANY){p.push('         <span class="bar">|</span>         <a href="#" class="sfh_a">즐겨찾기에서 선택하기</a> ')
}p.push('  </div>  <div class="sf_container">      <fieldset class="sfl_fieldset">    <legend>검색</legend>    <span class="ii ii_after">     <span class="ii_inner">      <input type="text" title="검색어 입력" value="" class="input_act">     </span>    </span>    <button type="submit" class="spm spm_ssch">검색</button>   </fieldset>   <div class="sfl_nodata sfl_nodata_border" style="display:none;">   </div>   <div class="sr_tab1" style="display:none;">    <h5 class="blind">즐겨찾기 리스트 선택옵션</h5>    <ul>     <li data-group="SITE_1"><a href="#">장소</a></li>     <li data-group="ADDRESS"><a href="#">주소</a></li>    </ul>   </div>   <h4 class="blind">장소</h4>         <div class="sf_lst_wrap" style="display:none;">             <div class="paginate_wrap">                 <div class="paginate loaded">                     <span class="pre">이전</span>                     <span class="next">다음</span>                     <a href="#" title="이전" class="pre">이전</a>                     <a href="#" title="다음" class="next">다음</a>                 </div>             </div>         </div>   <div class="sfc_mes" style="display:none;"></div>  </div>  <div class="sf_footer"> ');
if(dialogType==DIALOG_TYPE.COMPANY){p.push('         <a href="#" class="spm spm_sfl_school" data-btn_type="school">학교 설정하기</a>         <a href="#" class="spm spm_sfl_office" data-btn_type="office">회사 설정하기</a> ')
}else{if(dialogType==DIALOG_TYPE.HOUSE||dialogType==DIALOG_TYPE.HOME){p.push('         <a href="#" class="spm spm_sf_check2" data-btn_type="confirm">확인</a> ')
}}p.push('  </div>  <a href="#" class="spm spm_lpb_close" title="홈 설정하기 레이어 닫기">홈 설정하기 레이어 닫기</a> </div>')
}return p.join("")
},search_result_list_of_dialog:function(_d_){var p=[];
with(_d_){p.push("");
var BOOKMARK_TYPE=nhn.map.bookmark.Const.BOOKMARK_TYPE,DIALOG_TYPE=nhn.map.bookmark.Const.DIALOG_TYPE;
p.push(' <ul class="sf_lst"> ');
var lastIndex=list.length;
list.forEach(function(data,index){var shortcutType=data.bookmark.getShortcutType(),isHome=data.bookmark.isHome(),isAddress=(data.bookmark.getType()==="address"),isLast=(index===lastIndex-1),classNameOfLi="";
if(isAddress){classNameOfLi=classNameOfLi.concat("addr")
}if(isLast){classNameOfLi=classNameOfLi.concat(" last")
}classNameOfLi=classNameOfLi.trim();
p.push(" ");
if(isHome&&shortcutType=="home"){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="집으로 설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_home">집</span>                             </a>                         </li> ')
}else{if(isHome&&shortcutType=="school"){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="학교로 설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_school">학교</span>                             </a>                         </li> ')
}else{if(isHome&&shortcutType=="office"){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="회사로 설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_office">회사</span>                             </a>                         </li> ')
}else{if(isHome){p.push('                         <li data-status="dimmed" data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="setting" title="홈설정되어 있어 선택이 불가능합니다.">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sflset_register">홈설정</span>                             </a>                         </li> ')
}else{p.push('                         <li data-id="',data.id,'" data-bookmark_key="',data.bookmark.getKey(),'" class="',classNameOfLi,'">                             <a href="#" class="_token">                                 <strong class="sfl_tit">',data.name,"</strong> ");
if(!isAddress){p.push('                                     <span class="sfl_addr">',data.address,"</span> ")
}p.push('                                 <span class="spm spm_sfl_ck">선택됨</span>                             </a>                         </li> ')
}}}}p.push(" ")
});
p.push(" </ul>")
}return p.join("")
}});
(function(e,f){var d=iron.ns("nhn.map.bookmark");
d.PromoLayerView=iron.Class({initialize:function(){},loadLayer:function(){this.page=1;
var g={onShow:this._onShow.bind(this),onClose:this._onClose.bind(this)};
this._drawLayer(b,g)
},_onShow:function(){c=e("#simplemodal-data");
this._bindEvents()
},_onClose:function(g){if(g.type==="click"){g.preventDefault()
}this.$dialog().hideDialog();
if(!c){return
}this._unbindEvents();
c=null
},_bindEvents:function(){c.on("click",".btn_popd_close",this._onClose.bind(this));
c.on("click",".pfb_next",this._onNext.bind(this));
c.on("click",".pfb_pre",this._onPrev.bind(this));
c.on("click",".pfb_paging a",this._onPaging.bind(this))
},_unbindEvents:function(){c.off("click")
},_onNext:function(g){g.preventDefault();
if(this.page===4){return
}c.html(a[this.page++])
},_onPrev:function(g){g.preventDefault();
if(this.page===1){return
}c.html(a[--this.page-1])
},_onPaging:function(h){h.preventDefault();
var g=e(h.target).data("page");
if(g===this.page){return
}this.page=g;
c.html(a[this.page-1])
},_drawLayer:function(g,h){this.$dialog().hideDialog();
this.$dialog().showDialog(g,h)
}});
var b=nhn.mapservice.TemplateRepos.get("promo_20130730_1").process();
var a=[e(b).html(),e(nhn.mapservice.TemplateRepos.get("promo_20130730_2").process()).html(),e(nhn.mapservice.TemplateRepos.get("promo_20130730_3").process()).html(),e(nhn.mapservice.TemplateRepos.get("promo_20130730_4").process()).html()];
var c=null
}(jQuery));(function(){var l=iron.ns("nhn.map.recent"),p=l.Const,i=p.TYPE_ALL,e=p.TYPE_SEARCH,m=p.TYPE_DIRECTIONS,f=p.TYPE_BUS,n=p.TYPE_SUBWAY_ROUTE;
l.RecentService=iron.Class(nhn.map.Dispatcher,{initialize:function(){this._bindStorageEvent();
this.$storage().load()
},_bindStorageEvent:function(){this.$storage().attach({added:j.bind(this),removed:h.bind(this),storageUpdated:a.bind(this),itemUpdated:g.bind(this)})
},renderToBy:function(r,q){this._dispatchRender(r,q)
},getAllList:function(){return this.getList(i)
},renderAllTo:function(q){this._dispatchRender(i,q)
},addSearch:function(q){this._addRecent(e,q)
},getSearchList:function(){return this.getList(e)
},renderSearchTo:function(q){this._dispatchRender(e,q)
},addDirections:function(q){this._addRecent(m,q)
},getDirectionsList:function(){return this.getList(m)
},renderDirectionsTo:function(q){this._dispatchRender(m,q)
},addBus:function(q){this._addRecent(f,q)
},getBusList:function(){return this.getList(f)
},renderBusTo:function(q){this._dispatchRender(f,q)
},addSubwayRoute:function(q){this._addRecent(n,q)
},getSubwayRouteList:function(){return this.getList(n)
},renderSubwayRouteTo:function(q){this._dispatchRender(n,q)
},getItemByKey:function(q){var s=this.getAllList(),r=s.filter(function(t){return t.key===q
});
return r[0]||null
},getCurrentItemKey:function(){return this._currentItemKey
},getCurrentItem:function(){return this._currentItem
},select:function(s){if(!this._searchIDCleared){this.$search().clearIDResult();
this._searchIDCleared=true
}var q={recentItem:s},r;
switch(s.type){case"place":r="site_selected";
break;
case"address":r="address_selected";
break;
case"station":r="subway_station_selected";
break;
case"route":r="directions_selected";
break;
case"busStop":r="busstop_selected";
break;
case"bus":r="busroute_selected";
break;
case"busRouteStation":r="busroute_stop_selected";
this.unselect();
break;
case"subwayPath":r="subway_route_path_selected";
break;
case"subway":r="subway_route_station_selected";
break
}if(r){this.closePanorama();
this.closeBookmarkOverlay();
this._currentItemKey=s.key;
this._currentItem=s;
this.dispatch(r,q)
}},selectByKey:function(q){var r=this.getItemByKey(q);
this.select(r)
},unselect:function(){delete this._currentItemKey;
delete this._currentItem;
this.dispatch("unselected")
},setCurrentItem:function(q){this._currentItemKey=q.key;
this._currentItem=q
},remove:function(q){var r=this.getItemByKey(q);
if(!r){return null
}this.$storage().remove(r.recentType||r.type,r);
return r
},_addRecent:function(q,r){this.$storage().add(q,r)
},getList:function(q){return this.$storage().getPool(q)||[]
},refreshBusLiveByKey:function(r,q){var s=this.getItemByKey(r);
this.dispatch("refreshBusLive",{recentItem:s,container:$(q)})
},_dispatchRender:function(r,q){var s=this.getList(r);
this.dispatch("render",{recentType:r,recentList:s,container:$(q)});
delete this._currentItemKey;
delete this._currentItem
},_listenPanorama:function(){this._panoramaReady=true;
this.$panorama().attach({openPanorama:o.bind(this)})
},closePanorama:function(){if(this._panoramaReady&&this.$panorama().isPlaying()){this.$panorama().closePanorama()
}},_listenMenuBar:function(){this.$menubar().attach({change:k.bind(this),reset:d.bind(this)})
},changeMenu:function(q){this.$menubar().changeMenu(q)
},getMenuState:function(){return this.$menubar().getMenuState()
},refreshAll:function(){this.dispatch("refresh",{recentType:i})
},refreshDirections:function(){this.dispatch("refresh",{recentType:m})
},refreshBus:function(){this.dispatch("refresh",{recentType:f})
},refreshSubwayRoute:function(){this.dispatch("refresh",{recentType:n})
},refreshBy:function(q){this.dispatch("refresh",{recentType:q})
},_listenBookmark:function(){this.$bookmark().attach("select",b.bind(this))
},closeBookmarkOverlay:function(){this.$bookmark().removeAllBookmarkOverlay()
},requestRoadInfo:function(t,q,s,u,r){this.$bookmark().requestRoadInfo(t,q,s,u,r)
}});
function j(q){this.dispatch("added",{recentType:q.recentType,recentItem:q.recentItem})
}function h(q){this.dispatch("removed",{recentType:q.recentType,recentItem:q.recentItem})
}function g(q){this.dispatch("itemUpdated",{recentType:q.recentType,recentItem:q.recentItem})
}function a(){this.dispatch("storageUpdated")
}function k(q){this.unselect();
this.dispatch("menu_changed",{prevMenu:q.prevMenu,newMenu:q.newMenu})
}function d(){this.unselect();
this.dispatch("menu_reseted")
}function o(){}function b(){this.dispatch("bookmark_selected")
}l.createRecentData=function(t){var r=nhn.map.bookmark.BookmarkModelFactory.createBookmark(t),s=r?r.toJSON():null;
if(s){for(var q in s){if(s[q]==="true"){s[q]=true
}if(s[q]==="false"){s[q]=false
}if(s[q]==="0"||s[q]==="1"){s[q]=+s[q]
}}}return s
}}());
(function(){var b=iron.ns("nhn.map.recent"),a=nhn.map.service.PolyMarker;
b.RecentMarker=iron.Class(a,{initialize:function(d){var e=new nhn.map.service.MarkerSpriteIcon("ID"),f=$.extend({smallIcon:new nhn.map.service.SmallIcon("ID")},d);
a.apply(this,[e,f])
}})
}());
(function(){var a=iron.ns("nhn.map.recent");
a.RecentMarkerService=iron.Class(nhn.map.Dispatcher,{getMarker:function(d){var b=this._marker;
if(!b){b=new a.RecentMarker({title:d.name})
}else{this._prevMarker=b;
this.$map().removeMarker(b);
delete b.options.isPoi;
delete b.options.poiInfo;
delete b.options._polygonParam;
delete b.options.stationID
}if(d.stationID){b.options.stationID=d.stationID
}b.recentKey=d.key;
this._marker=b;
return b
},getInfo:function(){if(!this._marker){return null
}return this._marker.getInfo()
},setPoint:function(b){if(!this._marker){return
}this._marker.setPoint(b)
},getMarkerOptions:function(){if(!this._marker){return
}return this._marker.options
},draw:function(f,e){var h=new nhn.mapcore.LatLng(f.py||f.y,f.px||f.x),b=this.getMarker(f),g=this.$map(),d;
if(f.stationID&&f.stationClass){d="ID_"+f.stationClass+"_"+f.stationID
}else{d="ID_"+(f.id||f.sid||f.stationID||f.rcode)
}b.setId(d);
b.setPoint(h);
b.setTitle(f.name);
b.setId(d);
if(f.poiInfo){b.options.isPoi=true;
b.options.poiInfo=f.poiInfo
}if(f.polygonParams){b.options._polygonParam=f.polygonParams
}g.setCenter(h);
g.addMarker(b);
e&&this._bindEvent(e);
this.dispatch("draw");
return b
},hide:function(){var b=this._marker;
this.$map().removeMarker(b);
this._prevMarker=b;
delete this._marker;
this.dispatch("hide")
},select:function(){if(!this._marker){return
}this._marker.select()
},unselect:function(){if(!this._marker){return
}this._marker.unselect()
},equalsBy:function(b){return this._marker&&this._marker.recentKey===b.key
},setPanoramaData:function(b){if(!this._marker){return
}$.extend(this._marker.options,{skyPanorama:b.skyPanorama,streetPanorama:b.streetPanorama,insidePanorama:b.insidePanorama,interiorPanorama:b.interiorPanorama})
},clearPanoramaData:function(){if(!this._marker){return
}$.extend(this._marker.options,{skyPanorama:null,streetPanorama:null,insidePanorama:null,interiorPanorama:null})
},_bindEvent:function(d){var b=this._marker;
b.detach(".recent");
b.attach(d)
}})
}());
(function(g){var g=iron.ns("nhn.map.recent"),a=g.Const,h=[a.TYPE_ALL,a.TYPE_SEARCH,a.TYPE_DIRECTIONS,a.TYPE_BUS,a.TYPE_SUBWAY_ROUTE];
g.RecentSessionStorage=iron.Class({inherit:nhn.map.Dispatcher},{MAX_POOL_SIZE:5,initialize:function(){this._identifier="nmap_recent";
this._pool={};
this._sessionStorageSupports=!!window.sessionStorage;
if(!this._sessionStorageSupports){try{b();
if(typeof sessionStorage!=="undefined"&&sessionStorage!==null&&!sessionStorage.disabled){this._sessionStorageSupports=true
}else{this._sessionStorageSupports=false
}}catch(j){this._sessionStorageSupports=false
}}else{try{sessionStorage.setItem(this._identifier+"_test","test");
if(sessionStorage.getItem(this._identifier+"_test")!=="test"){this._sessionStorageSupports=false
}sessionStorage.removeItem(this._identifier+"_test")
}catch(j){this._sessionStorageSupports=false
}}this._loadLocalRecents()
},_setStorage:function(j){if(!this._sessionStorageSupports){return
}sessionStorage.setItem(this._identifier,j)
},_getStorage:function(){if(!this._sessionStorageSupports){return{}
}var j=sessionStorage.getItem(this._identifier),k={};
if(j){try{k=JSON.parse(j)||{}
}catch(l){k={}
}}return k
},_loadLocalRecents:function(){this._pool=this._getStorage()||{};
this.dispatch("loaded")
},_updateLocalRecents:function(){if(!this._sessionStorageSupports){return
}var j=JSON.stringify(this._pool);
this._setStorage(j);
this.dispatch("storageUpdated")
},_getToDateString:function(){var j=new Date();
return j.getTime()
},load:function(){this._loadLocalRecents()
},getPoolRaw:function(){return this._pool
},getPool:function(j){if(!j||j===a.TYPE_ALL){return this.getAllPool()
}else{f(j);
return this._pool[j]||[]
}},getAllPool:function(){var m=$.extend(true,{},this.getPoolRaw()),j=[],l,k;
for(k in m){l=m[k];
j=j.concat(l)
}j.sort(function(o,n){var q=new Date(o.date),p=new Date(n.date);
return n.date-o.date
});
return j
},add:function(k,m){f(k);
if(m.type==="busRouteStation"){d(m)
}if(!this._pool[k]){this._pool[k]=[]
}var j=this._pool[k],l,n;
l=$.extend(m,{recentType:k,date:this._getToDateString()});
n=this.remove(k,m,true);
if(j.length>=this.MAX_POOL_SIZE){j.pop()
}j.unshift(l);
if(n){this.dispatch("itemUpdated",{recentType:k,recentItem:l})
}else{this.dispatch("added",{recentType:k,recentItem:l})
}this._updateLocalRecents();
return l
},remove:function(n,p,q){f(n);
var m=this.getPool(n),k=-1,o;
if(!m){return
}for(var l=m.length-1,j;
l>=0;
l--){j=m[l];
if(p.recentType===a.TYPE_DIRECTIONS){if(e(j,p)){k=l;
o=j;
break
}}else{if(p.recentType===a.TYPE_SUBWAY_ROUTE&&p.type==="subwayPath"){if(i(j,p)){k=l;
o=j;
break
}}else{if(j.key===p.key){k=l;
o=j;
break
}}}}if(k>-1){m.splice(k,1);
q||this.dispatch("removed",{recentType:n,recentItem:o})
}this._updateLocalRecents();
return o||null
},clear:function(){this._pool={};
this._updateLocalRecents();
this.dispatch("clear")
}});
function d(j){j.busNo=j.busNo.toString().replace("번","")
}function f(j){if(h.indexOf(j)===-1){throw new Error("알 수 없는 type입니다.")
}return true
}function e(m,l){var k=m.key.split("|"),p=l.key.split("|"),j=true;
for(var n=0,o=k.length;
n<o;
n++){if(n!==2){if(k[n]!==p[n]){j=false;
break
}}}return j
}function i(m,l){var k=[m.recentType,m.startStationName,m.endStationName],p=[l.recentType,l.startStationName,l.endStationName],j=true;
for(var n=0,o=k.length;
n<o;
n++){if(k[n]!==p[n]){j=false;
break
}}return j
}function b(){(function(q){var p=q;
try{while(p!==p.top){p=p.top
}}catch(r){}var u=(function(j,k){return{decode:function(m,l){return this.encode(m,l)
},encode:function(B,F){for(var z=B.length,D=F.length,A=[],C=[],E=0,H=0,l=0,m=0,G;
E<256;
++E){C[E]=E
}for(E=0;
E<256;
++E){H=(H+(G=C[E])+B.charCodeAt(E%z))%256;
C[E]=C[H];
C[H]=G
}for(H=0;
l<D;
++l){E=l%256;
H=(H+(G=C[E]))%256;
z=C[E]=C[H];
C[H]=G;
A[m++]=j(F.charCodeAt(l)^C[(z+G)%256])
}return A.join("")
},key:function(l){for(var m=0,y=[];
m<l;
++m){y[m]=j(1+((k()*255)<<0))
}return y.join("")
}}
})(q.String.fromCharCode,q.Math.random);
var x=(function(l){function k(m,y,z){this._i=(this._data=z||"").length;
if(this._key=y){this._storage=m
}else{this._storage={_key:m||""};
this._key="_key"
}}k.prototype.c=String.fromCharCode(1);
k.prototype._c=".";
k.prototype.clear=function(){this._storage[this._key]=this._data
};
k.prototype.del=function(y){var m=this.get(y);
if(m!==null){this._storage[this._key]=this._storage[this._key].replace(j.call(this,y,m),"")
}};
k.prototype.escape=l.escape;
k.prototype.get=function(A){var y=this._storage[this._key],m=this.c,B=y.indexOf(A=m.concat(this._c,this.escape(A),m,m),this._i),z=null;
if(-1<B){B=y.indexOf(m,B+A.length-1)+1;
z=y.substring(B,B=y.indexOf(m,B));
z=this.unescape(y.substr(++B,z))
}return z
};
k.prototype.key=function(){var y=this._storage[this._key],m=this.c,C=m+this._c,B=this._i,z=[],A=0,D=0;
while(-1<(B=y.indexOf(C,B))){z[D++]=this.unescape(y.substring(B+=2,A=y.indexOf(m,B)));
B=y.indexOf(m,A)+2;
A=y.indexOf(m,B);
B=1+A+1*y.substring(B,A)
}return z
};
k.prototype.set=function(y,m){this.del(y);
this._storage[this._key]+=j.call(this,y,m)
};
k.prototype.unescape=l.unescape;
function j(z,y){var m=this.c;
return m.concat(this._c,this.escape(z),m,m,(y=this.escape(y)).length,m,y)
}return k
})(q);
if(Object.prototype.toString.call(q.opera)==="[object Opera]"){history.navigationMode="compatible";
x.prototype.escape=q.encodeURIComponent;
x.prototype.unescape=q.decodeURIComponent
}function o(){function j(){C.cookie=["sessionStorage="+q.encodeURIComponent(s=u.key(128))].join(";");
t=u.encode(s,t);
x=new x(p,"name",p.name)
}var z=p.name,C=p.document,y=/\bsessionStorage\b=([^;]+)(;|$)/,l=y.exec(C.cookie),k;
if(l){s=q.decodeURIComponent(l[1]);
t=u.encode(s,t);
x=new x(p,"name");
for(var B=x.key(),k=0,m=B.length,A={};
k<m;
++k){if((l=B[k]).indexOf(t)===0){w.push(l);
A[l]=x.get(l);
x.del(l)
}}x=new x.constructor(p,"name",p.name);
if(0<(this.length=w.length)){for(k=0,m=w.length,c=x.c,l=[];
k<m;
++k){l[k]=c.concat(x._c,x.escape(B=w[k]),c,c,(B=x.escape(A[B])).length,c,B)
}p.name+=l.join("")
}}else{j();
if(!y.exec(C.cookie)){w=null
}}}o.prototype={length:0,key:function(j){if(typeof j!=="number"||j<0||w.length<=j){throw"Invalid argument"
}return w[j]
},getItem:function(j){j=t+j;
if(v.call(n,j)){return n[j]
}var k=x.get(j);
if(k!==null){k=n[j]=u.decode(s,k)
}return k
},setItem:function(j,k){this.removeItem(j);
j=t+j;
x.set(j,u.encode(s,n[j]=""+k));
this.length=w.push(j)
},removeItem:function(j){var k=x.get(j=t+j);
if(k!==null){delete n[j];
x.del(j);
this.length=w.remove(j)
}},clear:function(){x.clear();
n={};
w.length=0
}};
var t=p.document.domain,w=[],n={},v=n.hasOwnProperty,s;
w.remove=function(k){var j=this.indexOf(k);
if(-1<j){this.splice(j,1)
}return this.length
};
if(!w.indexOf){w.indexOf=function(k){for(var j=0,l=this.length;
j<l;
++j){if(this[j]===k){return j
}}return -1
}}if(p.sessionStorage){o=function(){};
o.prototype=p.sessionStorage
}o=new o;
if(w!==null){q.sessionStorage=o
}})(window)
}}());
(function(){var k=iron.ns("nhn.map.recent");
k.SpotHandler=iron.Class({inherit:iron.KVO},{unselectMarker:function(){this.$markers().unselect()
},_drawSpot:function(r,p,q){this._removePolygon();
this.unselectMarker();
var m=$.Deferred(),n;
this.$InfoWindow().close();
m.promise().done(function(t,s){var u=$.extend(true,{},r);
u.poiInfo=u.poiInfo;
if(s){u.polygonParams=s
}this.$markers().draw(u,{"select.recent":f.bind(this,p,q),"unselect.recent":j.bind(this,q),"moveMarker.recent":b.bind(this)});
n=this.$markers().getInfo();
this.$markers().select()
}.bind(this));
if(p==="ADDRESS"&&r.isDetailAddress!==null&&!r.isNewAddress){var o=e(r);
o&&this.$polygons().addPolygon(o);
m.resolve(r.poiInfo,o)
}else{if(l(r)){this.requestRoad(r,function(s){r.poiInfo.road.line=s;
m.resolve(r.poiInfo)
})
}else{if(g(r)){var o=this.drawPolygon(r);
m.resolve(r.poiInfo,o)
}else{m.resolve()
}}}},_listenInfoWindowClose:function(){this.$InfoWindow().attach("close.recent_spothandler",function(){this._unlistenInfoWindowClose();
this.unselectMarker()
}.bind(this))
},_unlistenInfoWindowClose:function(){this.$InfoWindow().detach("close.recent_spothandler")
},_hideMarker:function(){this.unselectMarker();
this.$markers().hide()
},_removePolygon:function(){var m=this.$markers().getMarkerOptions();
if(m&&m._polygonParam){this.$polygons().removePolygon(m._polygonParam)
}},_listenService:function(){this.$service().attach({site_selected:this._onSelectSite.bind(this),address_selected:this._onSelectAddress.bind(this),subway_station_selected:this._onSelectSubwayStation.bind(this),unselected:this._onUnselected.bind(this),removed:this._onRemoveRecentItem.bind(this),menu_changed:this._onMenuChanged.bind(this),menu_reseted:this._onMenuChanged.bind(this),bookmark_selected:this._onBookmarkSelected.bind(this)})
},_onSelectAddress:function(n){var m=n.recentItem;
this._drawSpot(m,"ADDRESS",{address:m.address,name:m.displayName,px:m.px,py:m.py,rCode:m.rcode,fullAddress:m.address,isNewAddress:m.isNewAddress,simpleSpot:m.simpleSpot})
},_onSelectSite:function(n){var m=n.recentItem;
this._drawSpot(m,"SITE",{id:m.sid})
},_onSelectSubwayStation:function(n){var m=n.recentItem;
this._drawSpot(m,"SUBWAY",{stationId:m.stationID})
},_onUnselected:function(){this._removePolygon();
this._hideMarker()
},_onRemoveRecentItem:function(n){var m=n.recentItem;
if(this.$markers().equalsBy(m)){this._removePolygon();
this._hideMarker()
}},_onMenuChanged:function(){this._removePolygon();
this._hideMarker()
},_onBookmarkSelected:function(){this._removePolygon();
this._hideMarker()
},_listenSearch:function(){iron.KVO.apply(this);
this.bindTo("_searchResult",this.$search())
},_searchResult_changed:function(m){if(!m||!m.value){return
}this._removePolygon();
this._hideMarker()
},_listenInfoWindow:function(){this.$InfoWindow().attach({opened:this._onOpenInfowindow.bind(this)})
},_onOpenInfowindow:function(q){var o=q.infowindowType,n=["PUBLIC_TRANSIT_SUBWAY","PUBLIC_TRANSIT_TERMINAL","PUBLIC_TRANSIT_BUS","PUBLIC_TRANSPORT","BUS","SUBWAY_ROUTE","THEME","THEME_EDIT"],t,p;
if(n.indexOf(o)!==-1){return
}t=q.infowindowData;
if(o!=="SIMPLE"){p=k.createRecentData(t)
}else{var m=t.x,s=t.y,r=t.title;
p={key:["address",r,m,s].join("|"),address:r,date:Date.now(),displayName:r,listType:"address",name:r,px:m,py:s,recentType:"SEARCH",type:"address",simpleSpot:true}
}if(p&&p.type!=="busStop"){this._addPoiInfo(p,t);
this.$service().addSearch(p);
if(this.$markers().equalsBy(p)){this.$markers().setPanoramaData(t)
}else{this.$markers().clearPanoramaData()
}}},_addPoiInfo:function(m,n){if(!l(n)&&!g(n)){return
}m.poiInfo=n.poiInfo
},requestRoad:function(p,s){var o=p.poiInfo,r=o.road.shapeKey,q=r.wsid,m=r.shapeID,n={type_name:r.typeName,level:10};
this.$service().requestRoadInfo(q,m,n,function(t){s&&s(t)
}.bind(this))
},_listenPolygons:function(){this.$polygons().attach({blur_polygon:this._onBlurPolygon.bind(this)})
},drawPolygon:function(n){var m=n.poiInfo,o=m.polygon.shapeKey.shapeID,p=h(n.px,n.py,o);
this.$polygons().addPolygon(p);
return p
},_onBlurPolygon:function(m){var n=m.polygonParam;
n&&this.$polygons().blurPolygon(n)
}});
function l(m){return m.poiInfo&&m.poiInfo.hasRoad
}function g(m){return m.poiInfo&&m.poiInfo.hasPolygon
}function h(p,n,o){var m=new nhn.mapcore.LatLng(n,p),q=o;
return{type:"SITE",center:m,shapeId:q,group:nhn.map.search.PolygonGroup.BOOKMARK}
}function d(o,n){var m=new nhn.mapcore.LatLng(o,n);
return{type:"ADDRESS",center:m,group:nhn.map.search.PolygonGroup.BOOKMARK}
}function a(m){return{type:"REGION",regionCode:m,group:nhn.map.search.PolygonGroup.BOOKMARK}
}function e(n){var q=null;
if(n.isDetailAddress){var p=n.px,m=n.py;
q=d(m,p)
}else{if(!n.isNewAddress){var o=n.rcode;
q=a(o)
}}return q
}function f(p,q,r){var n=this.$InfoWindow(),m=r.markerInfo,o=this.$markers().getMarkerOptions()._polygonParam;
this.$service().closePanorama();
if(q.simpleSpot){q.x=q.px;
q.y=q.py;
q.title=q.address;
n.openSimpleWindow(q)
}else{n.open(p,$.extend(q,{MarkerInfo:m,x:m.point.x,y:m.point.y}),{moveStation:i.bind(this)})
}o&&this.$polygons().selectPolygon(o);
this._listenInfoWindowClose()
}function j(q){var n=this.$InfoWindow(),q=n.getCurrentModel(),o=this.$markers().getMarkerOptions()._polygonParam,m=this.$markers().getInfo(),p,r;
if(!q||!this.$markers().getInfo()){return
}r=q.getData();
p=m.id.split("_").pop();
if(r.id===p||+r.rcode===+p||r.stationID===+p){this._unlistenInfoWindowClose();
n.close();
o&&this.$polygons().deselectPolygon(o)
}}function i(n){if(!this.$markers().getInfo()){return
}var p=new nhn.mapcore.LatLng(n.y,n.x),m={offset:{width:0,height:0},size:{width:0,height:0},point:p},o=this.$InfoWindow();
o.moveCurrentWindow(m,function(){o.open("SUBWAY",$.extend(n,{MarkerInfo:m,stationId:n.stationID,__fromMoveStation:true}),{moveStation:i.bind(this)})
}.bind(this))
}function b(p){var n=this.$InfoWindow().getCurrentWindow(),m=this.$InfoWindow().getCurrentModel();
var o=m?m.getData():null;
this.$markers().setPoint(p.point);
if(n&&o&&l(o)){n.setPoint(p.point);
n.redraw()
}}}());
(function(){var e=iron.ns("nhn.map.recent"),d=nhn.map.bookmark,a=d.Util;
e.DirectionsHandler=iron.Class({_listenService:function(){this.$service().attach({directions_selected:f.bind(this)})
},_listenDirections:function(){this.$directions().attach({responseDirectionsResult:g.bind(this)})
}});
function f(k){var j=k.recentItem,i=b.call(this,j),h={departure:[j.slng,j.slat,a.getSpotTextOnly(j.sText)].join(","),departureId:j.sId||null,departureType:j.sType||"",destination:[j.elng,j.elat,a.getSpotTextOnly(j.eText)].join(","),destinationId:j.eId||null,destinationType:j.eType||"",etDestination:null,etDeparture:null,waypoints:i.waypoints,waypointIds:i.waypointIds,type:j.pathType,option:j.dtPathType,searchType:+j.isInterCity};
if(j.eelng&&j.eelat){h.etDestination=[j.eelng,j.eelat].join(",")
}if(j.eslng&&j.eslat){h.etDeparture=[j.eslng,j.eslat].join(",")
}NModules.load("directions",function(){this.$directions().findExDirections(h)
}.bind(this))
}function b(i){var k=/(t\d)(.*)/,m=[],j=[],l;
$.each(i,function(p,q){var o=p.match(k),n;
if(!o||!o.length){return
}n=+(o[1].substr(1))-1;
if(!m[n]){m[n]=[]
}if(o[2]==="lng"){m[n][0]=q
}if(o[2]==="lat"){m[n][1]=q
}if(o[2]==="Text"){m[n][2]=a.getSpotTextOnly(q)
}if(o[2]==="Id"){j[n]=q||""
}});
var h={waypoints:null,waypointIds:null};
if(m.length){h.waypoints=m.map(function(n){return n.join(",")
}).join("|");
h.waypointIds=j.join("|")
}return h
}function g(h){var j=h.getRequest(),l={currentRoutePoint:j.getJson(),pathType:j.getTypeNum(),dtPathType:j.getOption()},i=d.BookmarkDataConverter.fromRouteCourseData(l),k=e.createRecentData(i);
k&&this.$service().addDirections(k)
}}());
(function(){var w=iron.ns("nhn.map.recent"),r=iron.ns("nhn.map.service"),q=iron.ns("nhn.map.bus.Constant").SOURCE,x=12;
w.BusHandler=iron.Class({_drawBusStop:function(A){this.$markers().unselect();
var z=this.$markers().draw(A,{select:g.bind(this),unselect:a.bind(this)});
this._stationMarker=z;
this.$map().setLevel(x);
z.select()
},_hideMarker:function(){if(this._stationMarker){this.$markers().unselect();
this.$markers().hide();
delete this._stationMarker
}},_listenService:function(){this.$service().attach({busstop_selected:i.bind(this),busroute_selected:b.bind(this),busroute_stop_selected:s.bind(this),unselected:v.bind(this),refreshBusLive:j.bind(this),menu_changed:n.bind(this),menu_reseted:n.bind(this),removed:p.bind(this),bookmark_selected:y.bind(this)})
},_listenBus:function(){var z=this._hideMarker.bind(this);
this.$bus().attach({no_earch_result:z,no_search_result_with_options:z,ready_busstation_data:t.bind(this),open_bus_route_layer:e.bind(this),close_bus_route:f.bind(this),search_complete:o.bind(this)})
}});
function d(A,z){var A=z?A.bind(z):A;
NModules.has("bus")?A():NModules.load("bus",A)
}function b(A){var z=A.recentItem;
d(function(){this.$bus().showBusRouteByID(z.busID,{bMoveToCenter:false,bMoveBound:true,bHide:false,source:q.ROUTE_RESULT})
},this)
}function i(A){var z=A.recentItem;
d(function(){this._drawBusStop(z)
},this)
}function s(A){var z=A.recentItem;
d(function(){this.$bus().showBusRouteByID(z.busID,{stationID:z.stationID,moveBound:false,openStationWindow:true,source:q.BUS_STATION_WINDOW})
},this)
}function v(){this._hideMarker()
}function j(B){var A=B.recentItem,z=B.container;
d(function(){this.$bus().requestBusArrivalDataWithBusID(A.stationID,A.busID,k.bind(this,A,z),u.bind(this,z))
},this)
}function n(){this._hideMarker()
}function k(H,z,J){if(!J){return u(z)
}var O=r.DateFormatter.getDateByString(J.analysisDate),D=Math.round(parseInt(J.predictTime1,10)/60),A=Math.round(parseInt(J.predictTime2,10)/60),N=J.locationNo1,L=J.locationNo2,M=J.driveEnd,K=[],I=[],G=r.DateFormatter.formatTimeTo12Hours(O,":")+" 기준",E,C,F,B="";
if(D!==null&&N!==null){K.push(N," 정류장 전 (약 ",D+"분)")
}if(A!==null&&L!==null){I.push(L," 정류장 전 (약 ",A+"분)")
}K=K.join("")||null;
I=I.join("")||null;
E=z.find("._upperSectionArrival");
C=z.find("._lowerSectionArrival");
F=z.find("._notSupported");
F.hide();
if(!K&&!I){switch(M){case"A":B="운행종료";
break;
case"S":B="막차통과";
break;
case"W":B="차고지대기";
break;
case"E":B="오류";
break;
default:B="도착 예정정보 없음";
break
}C.find(".arrive").text(B);
C.show()
}else{if(K&&!I||!K&&I){C.find(".arrive").text(K||I);
C.show()
}else{E.find(".arrive").text(K);
E.show();
C.find(".arrive").text(I);
C.show()
}}z.find(".update_time").text(G)
}function u(z){z.find(".arrive:eq(0)").parent().hide();
z.find(".arrive:eq(1)").html("도착 예정정보 없음");
z.find(".update_time").text(r.DateFormatter.formatTime(new Date(),":")+"기준")
}function p(A){var z=A.recentItem;
if(this.$markers().equalsBy(z)){this._hideMarker()
}}function y(){this._hideMarker()
}function t(B){var C=B.busStationData,z=B.options?B.options.source:null,A;
this._busStationData=C;
if(z===q.ROUTE_RESULT&&this._busRouteData){A=h(this._busRouteData,C)
}else{A=w.createRecentData(C)
}if(A){this.$service().addBus(A);
if(this.$markers().equalsBy(A)){this.$markers().setPanoramaData(C)
}else{this.$markers().clearPanoramaData()
}}}function e(C){var D=C.busRouteResult,A=C.options?C.options.source:null,z=C.options?C.options.openStationWindow:false,B;
this._busRouteData=D;
if(A===q.BUS_STATION_WINDOW&&this._busStationData){B=h(D,this._busStationData)
}else{if(!z){B=w.createRecentData(D)
}}B&&this.$service().addBus(B)
}function h(A,D){var C=w.createRecentData(A),z=w.createRecentData(D),B=$.extend(C,z);
B.type="busRouteStation";
B.liveUpdate=D.liveUpdate&&A.liveUpdate;
B.key=B.key.replace("busStop|","busRouteStation|"+A.busID+"|");
return B
}function f(){delete this._busRouteData;
delete this._busStationData
}function o(z){if(!z.busData){return
}this._hideMarker();
delete this._busStationData;
delete this._busRouteData
}function g(){d(function(){if(!this._stationMarker){return
}this.$bus().showBusStationWindow(this._stationMarker,null);
m.apply(this)
},this)
}function a(){var z=this.$InfoWindow().getCurrentModel(),A;
if(!z||!this._marker){return
}A=z.getData();
if(A.stationID===this._marker.options.stationID){l.apply(this);
this.$InfoWindow().close()
}}function m(){this.$InfoWindow().attach("close.recent_bushandler",function(){l.apply(this);
this.$markers().unselect()
}.bind(this))
}function l(){this.$InfoWindow().detach("close.recent_bushandler")
}}());
(function(){var e=iron.ns("nhn.map.recent");
e.SubwayRouteHandler=iron.Class({_listenService:function(){this.$service().attach({subway_route_path_selected:a.bind(this),subway_route_station_selected:a.bind(this)})
},_listenSubway:function(){this.$subway().attach({showSubwayRouteDone:b.bind(this)})
},_listenInfoWindow:function(){this.$InfoWindow().attach({opened:d.bind(this)})
}});
function b(g){var h=g.bookmarkData,f=e.createRecentData(h);
f&&this.$service().addSubwayRoute(f)
}function a(h){var g=h.recentItem,f;
f=nhn.map.bookmark.BookmarkModelFactory.createBookmark(g);
NModules.load("subway",function(){this.$subway().showSubwayRouteByBookmark(f)
}.bind(this))
}function d(h){var f=h.infowindowType,i,g;
if(f!=="SUBWAY_ROUTE"){return
}i=h.infowindowData;
g=e.createRecentData(i);
g.bookmarkType="subway";
g&&this.$service().addSubwayRoute(g)
}}());
iron.ns("nhn.map.recent").RecentListView=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._initTemplate()
},_initTemplate:function(){var b=nhn.mapservice.TemplateRepos,a=b.get.bind(b);
this._tpl=a("recent_list_view");
this._nodataTpl=a("recent_no_data");
this._blindTpl=a("recent_blind_text");
this._listTpl={place:a("recent_site_list_item"),address:a("recent_address_list_item"),station:a("recent_site_list_item"),busRouteStation:a("recent_bus_route_station_list_item"),busStop:a("recent_bus_station_list_item"),bus:a("recent_bus_route_list_item"),route:a("recent_directions_list_item"),subway:a("recent_subway_list_item"),subwayPath:a("recent_subway_path_list_item")}
},_prepareDOM:function(){if(this._el){this._unbindEvent();
this._el.remove()
}this._el=$(this._tpl.process());
this._bindEvent()
},showEmpty:function(){if(!this._container){return
}this._empty=true;
this._el=$(this._nodataTpl.process());
this._container.empty().append(this._el)
},getElement:function(){return this._el?this._el[0]:null
},getBlindElement:function(){return $(this._blindTpl.process())[0]
},_focusCurrentItem:function(){var a=this.$service().getCurrentItemKey();
if(!a){return
}this._el.find("li").each(function(d,b){var e=$(b);
if(e.data("recent-key")===a){e.addClass("on");
this._currentList=e
}else{e.removeClass("on")
}}.bind(this))
},_drawList:function(b){var d=[],a=this._listTpl,b=b;
b.slice(0,5).forEach(function(g){var f=a[g.type],h,e;
if(!f){return
}e=$.extend({},g);
if(g.type==="route"){e.pathSpotList=g.name.split("→").map(function(i){return i.replace(/^\s\s*/,"").replace(/\s\s*$/,"")
})
}h=$(f.process(e))[0];
if(g.type==="busRouteStation"){this.$service().refreshBusLiveByKey(g.key,h)
}d.push(h)
},this);
this._el.empty().append(d);
this._focusCurrentItem();
this._empty=false
},_render:function(b,d,a){this._type=b;
this._container=a;
if(!d||!d.length){this.showEmpty();
return
}a.empty();
this._prepareDOM();
this._drawList(d);
a.append(this.getBlindElement(),this.getElement());
this.$service().dispatch("listview_updated")
},_refresh:function(){if(!this._type||!this._container||(!this._isVisible())){return
}var a=this.$service().getList(this._type);
if(!a||!a.length){this.showEmpty();
return
}this._container.empty();
this._prepareDOM();
this._drawList(a);
this._container.append(this.getBlindElement(),this.getElement());
this.$service().dispatch("listview_updated")
},_isVisible:function(){var a=$(this.getElement());
if(!this._panelEl){this._panelEl=$(this.$panel().getPanelElement())
}return !!(this._panelEl.has(a[0]).length)
},_bindEvent:function(){this._el.on("mouseenter","li",this._onMouseEnterList.bind(this)).on("mouseleave","li",this._onMouseLeaveList.bind(this)).on("click","li",this._onClickRecent.bind(this)).on("click","li a.spm_srl_del",this._onClickRemove.bind(this)).on("click","li a.spm_sl_refresh",this._onClickRefreshBus.bind(this))
},_unbindEvent:function(){this._el.off()
},_onMouseEnterList:function(b){var a=$(b.currentTarget);
a.addClass("over")
},_onMouseLeaveList:function(b){var a=$(b.currentTarget);
a.removeClass("over")
},_onClickRecent:function(f){f.preventDefault();
var d=$(f.target),b,a;
if(d.hasClass("spm_srl_del")||d.hasClass("spm_sl_refresh")){return
}b=d.closest("li.srl_l"),a=b.data("recent-key");
if(this._currentList){this._currentList.removeClass("on")
}b.addClass("on");
this._currentList=b;
this.$service().selectByKey(a)
},_onClickRemove:function(d){d.preventDefault();
var b=$(d.target).closest("li.srl_l"),a=b.data("recent-key");
if(this.$service().remove(a)){this._refresh()
}},_onClickRefreshBus:function(d){d.preventDefault();
var b=$(d.target).closest("li.srl_l"),a=b.data("recent-key");
this.$service().refreshBusLiveByKey(a,b)
},_listenService:function(){this.$service().attach({render:this._onRender.bind(this),added:this._onStorageChanged.bind(this),itemUpdated:this._onStorageChanged.bind(this),unselected:this._onUnselected.bind(this),refresh:this._onStorageChanged.bind(this)})
},_onRender:function(a){this._render(a.recentType,a.recentList,a.container)
},_onStorageChanged:function(a){if(a.recentType===this._type||this._type==="ALL"){this._refresh()
}},_onUnselected:function(){if(this._el){this._el.find("li").removeClass("on")
}}});
nhn.mapservice.TemplateRepos.add({recent_blind_text:function(_d_){var p=[];
with(_d_){p.push('<h3 class="blind">최근검색 리스트</h3>')
}return p.join("")
},recent_list_view:function(_d_){var p=[];
with(_d_){p.push('<ul class="sr_recent_list" style="display:block"></ul>')
}return p.join("")
},recent_no_data:function(_d_){var p=[];
with(_d_){p.push('<div class="sr_favorite_nodata">  <span class="spm spm_alert1"></span> 최근 사용하신 정보가 없습니다. </div>')
}return p.join("")
},recent_site_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'">  <div class="srl_box">   <span class="srl_pin spm spm_srl_site" title="장소">장소</span>   <a href="#" class="srl_a">',name,'</a>   <div class="srl_d">',address,'</div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_address_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'">  <div class="srl_box">   <span class="srl_pin spm spm_srl_site" title="주소">주소</span>   <a href="#" class="srl_a">',address,'</a>   <div class="srl_d">주소</div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_subway_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'">  <div class="srl_box">   <span class="srl_pin spm spm_srl_subway" title="지하철역">지하철역</span>   <a href="#" class="srl_a">',displayName,'</a>   <div class="srl_d">지하철역</div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_directions_list_item:function(_d_){var p=[];
with(_d_){p.push("");
var pathTypeScheme=pathTypeStr.split("|");
p.push(' <li class="srl_l nclicks(lri.list)" data-recent-key="',key,'" data-m-preload="directions">  <div class="srl_box">   <span class="srl_pin spm spm_srl_path" title="경로">경로</span>   <a href="#" class="srl_a">',pathSpotList.join(' <span class="path_arr">→</span> '),'</a>   <div class="srl_d">',pathTypeScheme[0],"");
if(pathTypeScheme[1]){p.push(' <span class="srl_bar">|</span> ',pathTypeScheme[1],"")
}p.push('</div>    <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_bus_route_station_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'">  <div class="srl_box">   <span class="srl_pin spm spm_srl_busst" title="정류장+버스정보">정류장+버스정보</span>   <a href="#" class="srl_a">',name,"",stationDisplayID?" ["+stationDisplayID+"]":"",' <span class="srl_bar">|</span> ',busNo,'</a>   <div class="srl_d _notSupported">    실시간 정보 제공하지 않음   </div>   <div class="srl_d _upperSectionArrival" style="display:none;">    <span class="arrive"></span>   </div>   <div class="srl_d _lowerSectionArrival" style="display:none;">    <span class="arrive"></span> <span class="srl_bar">|</span> <span class="update_time"></span> <a href="#" class="spm spm_sl_refresh" title="새로고침">새로고침</a>   </div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_bus_station_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'" data-m-preload="bus">  <div class="srl_box">   <span class="srl_pin spm spm_srl_busst" title="정류장">정류장</span>   <a href="#" class="srl_a">',name,"",stationDisplayID?" ["+stationDisplayID+"]":"",'</a>   <div class="srl_d">',address,'</div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_bus_route_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'" data-m-preload="bus">  <div class="srl_box">   <span class="srl_pin spm spm_srl_bus" title="버스노선">버스노선</span>   <a href="#" class="srl_a">',busNo,'</a>   <div class="srl_d">',cityName," ",busTypeName,'</div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
},recent_subway_path_list_item:function(_d_){var p=[];
with(_d_){p.push('<li class="srl_l nclicks(lri.list)" data-recent-key="',key,'">  <div class="srl_box">   <span class="srl_pin spm spm_srl_subway" title="지하철노선 길찾기">지하철노선</span>   <a href="#" class="srl_a" title="',displayName,'">',startStationName,' <span class="path_arr">→</span> ',endStationName,'</a>   <div class="srl_d">지하철노선 <span class="srl_bar">|</span> ',pathTypeName,'</div>   <div class="icon_set icon_set_only NCR-SKIP">    <a href="#" title="삭제" class="spm spm_srl_del nclicks(lri.del)">삭제</a>   </div>  </div> </li>')
}return p.join("")
}});iron.ns("nhn.map.mappoi").MapPoiService=iron.Class({inherit:nhn.map.AbstractDAO,mix:[nhn.map.UIComponent]},{API:{POI:"/mappoi/picker",CLUE:"/mappoi/picker",INFO:"/search2/getSiteInfo.nhn"},initialize:function(){},_onActivate:function(){this.dispatch("activate")
},deleteClueList:function(){delete this._clueList
},_onDeactivate:function(){delete this._clueList;
this.dispatch("deactivate")
},getClueMidByLatLng:function(f){var e=this.$Indoor(),a=this._clueList,d=e.getClickables(),g=f.latlng,c=!!f.indoorID;
var b=null;
if(c){b=this._searchMid(d,g,"indoor");
if(!b.mid&&!e.isIndoorMode()){b=this._searchMid(a,g,"normal")
}}else{b=this._searchMid(a,g,"normal")
}if(b.mid&&b.midType){this.dispatch("clickable_poi_changed",{isClickable:true})
}else{this.dispatch("clickable_poi_changed",{isClickable:false})
}return b
},_searchMid:function(l,b,h){var a={mid:null,midType:null,midPoint:null};
if(!l){return a
}for(var e=0,g=l.length;
e<g;
e++){var c=l[e],m=(c.bbox||c.box),j=[m[0],m[1]],f=[m[2],m[3]];
if(b.x>j[0]&&b.x<f[0]&&b.y>j[1]&&b.y<f[1]){var d=c.properties||c,k=d.mID;
return{mid:k,midType:h,midPoint:[m[3],(m[0]+m[2])/2]}
}}return a
},requestPOI:function(a,e,b){this._poiXHR&&this._poiXHR.abort();
this._poi={};
var c=[a.x,a.y].join(","),d={request:"pointToFeatures",version:1.4,sourcecrs:"EPSG:4326",order:"detail",output:"json",coords:c,level:e};
if(b){d.floor=b
}else{}if(!this._boundResponsePOI){this._boundResponsePOI=this._onResponsePOI.bind(this);
this._boundErrorPOI=this._onErrorPOI.bind(this)
}this._poiXHR=this._request({url:this.API.POI,dataType:"json",data:d,successRule:{features:true},success:this._boundResponsePOI,error:this._boundErrorPOI})
},_onResponsePOI:function(a){this._poi=a.features[0];
delete this._poiXHR;
this.requestSiteInfo(this._poi.properties.mID,"normal")
},requestSiteInfo:function(a,b,e){var c="p"+a,d={id:c};
if(b==="indoor"){d.theme="indoor2"
}this._infoXHR&&this._infoXHR.abort();
if(!this._responseInfoError){this._responseInfoError=this._onErrorInfo.bind(this)
}this._infoXHR=this._request({url:this.API.INFO,dataType:"json",data:d,successRule:{result:true},success:this._onResponseInfo.bind(this,e),error:this._responseInfoError,isHmac:true})
},_onResponseInfo:function(g,a){var b=a.result.subwayId?"subway":"spot",c=a.result,f;
if(g){c.x=g[1];
c.y=g[0]
}f={poiType:b,poiInfo:c};
this._resultSet=c;
if(b==="subway"&&this._poi.properties.optType===2){var e=c.x,d=c.y;
if(this._poi&&this._poi.geometry){e=this._poi.geometry.coordinates[0];
d=this._poi.geometry.coordinates[1]
}this._transferInfo={minLevel:+this._poi.properties.optDpMinLv,maxLevel:+this._poi.properties.optDpMaxLv,transferPoint:new nhn.mapcore.LatLng(this._poi.properties.optY,this._poi.properties.optX),originPoint:new nhn.mapcore.LatLng(d,e)};
f.transferInfo=this._transferInfo
}delete this._infoXHR;
this._poi={};
this.dispatch("responsePOI",f)
},_onErrorInfo:function(){delete this._infoXHR;
this._poi={};
this.dispatch("errorPOI")
},_onErrorPOI:function(){delete this._resultSet;
delete this._transferInfo;
delete this._poiXHR;
this.dispatch("errorPOI")
},requestClue:function(a,b,f,c){this._clueXHR&&this._clueXHR.abort();
var d=[[a.x,a.y].join(","),[b.x,b.y].join(",")].join("|"),e={request:"polygonToFeatures",version:1.4,sourcecrs:"EPSG:4326",order:"simple",output:"json",coords:d,level:f};
if(c){e.floor=c
}if(!this._boundResponseClue){this._boundResponseClue=this._onResponseClue.bind(this);
this._boundErrorClue=this._onErrorClue.bind(this)
}this._clueXHR=this._request({url:this.API.CLUE,dataType:"json",data:e,successRule:{type:"FeatureCollection"},success:this._boundResponseClue,error:this._boundErrorClue})
},_onResponseClue:function(a){this._clueList=a.features;
delete this._clueXHR;
this.dispatch("responseClue",{clueList:a.features})
},_onErrorClue:function(){delete this._clueList;
delete this._clueXHR;
this.dispatch("errorClue")
},requestSubway:function(c){var a=c.stationID,b=!!c.fromTransfer;
NModules.load("subway",function(){this.$Subway().requestSubway(a,{success:this._onResponseSubway.bind(this,b),error:this._onErrorSubway.bind(this)})
}.bind(this))
},_onResponseSubway:function(c,a){var b=a.result,d;
if(c){b._transferd=c;
if(this._transferInfo){b.optType=2;
b.optDpMinLv=this._transferInfo.minLevel;
b.optDpMaxLv=this._transferInfo.maxLevel;
b.optX=this._transferInfo.transferPoint.x;
b.optY=this._transferInfo.transferPoint.y
}}else{delete this._transferInfo
}d={subwayInfo:b};
if(+b.optType===2){this._transferInfo={minLevel:+b.optDpMinLv,maxLevel:+b.optDpMaxLv,transferPoint:new nhn.mapcore.LatLng(b.optY,b.optX),originPoint:new nhn.mapcore.LatLng(b.y,b.x)};
d.transferInfo=this._transferInfo
}this._resultSet=b;
this.dispatch("responseSubway",d)
},_onErrorSubway:function(){delete this._resultSet;
delete this._transferInfo;
this.dispatch("errorSubway")
},_listenMenuBar:function(){var a=function(){this.dispatch("clear")
}.bind(this);
this.$menubar().attach({change:a,reset:a})
},leaveIndoorMap:function(){this.$Indoor().leaveIndoorMap()
},enterIndoorMapByPolygon:function(a){this.$Indoor().enterIndoorMapByPolygon(a)
},getState:function(){return this.$state().getState()
},setState:function(a){return this.$state().setState(a)
},getIndoorID:function(){return this.$Indoor().getIndoorID()
},isPanoramaPlaying:function(){return this.$Panorama().isPlaying()
},isFlightActivated:function(){return this.$Panorama().isFlightActivated()
}});
iron.ns("nhn.map.mappoi").MapPoiView=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{initialize:function(){var a=this._onLoadAnotherPane.bind(this),b=this._onUnloadAnotherPane.bind(this);
this._anotherPaneCount=0;
this._defaultListener={LOAD_STREET_PANE:a,UNLOAD_STREET_PANE:b,load_traffic_pane:a,unload_traffic_pane:b,load_cadastral_pane:a,unload_cadastral_pane:b};
this._listener={CLICK_MAP_DONE:this._onClickMapDone.bind(this),MOUSEUP_EVENT_DONE:this._onMapMouseUpDone.bind(this)};
this._transferListener={ZOOM:this._changeSubwayWindowPosition.bind(this)};
this._listener.CHANGE_MAP_DONE=this._onChangeMapDone.bind(this);
this._listener.MOUSEMOVE_EVENT_DONE=this._onMapMouseMove.bind(this);
this.$map().attach(this._defaultListener)
},_onActivate:function(){var a=this.$map();
this._centerPixel=a.getCenterPixel();
a.attach(this._listener);
this._mapMove();
this.dispatch("activate")
},_onDeactivate:function(){this.$map().detach(this._listener);
this.closePOIWindow();
this.dispatch("deactivate")
},openPOIWindow:function(a){this._unwatchMapForTransfer();
this.$InfoWindowFacade().openPOIWindow(a);
this.dispatch("poiWindowOpen",{type:"spot"})
},openSubwayPOIWindow:function(b,a){this.$InfoWindowFacade().openPOIWindow(b,{moveStation:this._onMoveSubwayStation.bind(this)});
this._unwatchMapForTransfer();
a&&this._watchMapForTransfer(a);
this.dispatch("poiWindowOpen",{type:"subway"})
},closePOIWindow:function(){this._transferInfo&&this._unwatchMapForTransfer();
this.$InfoWindowFacade().abort();
this.$InfoWindowFacade().close("POI");
this.dispatch("poiWindowClose")
},getPOIWindow:function(){var a=this.$InfoWindowFacade().getCurrentWindow();
if(a.getVisibility()&&a.getType()==="POI"){return a
}else{return null
}},_watchMapForTransfer:function(a){this._level=this.$map().getLevel();
this._transferInfo=a;
if(this.$map().levelInRange(a.minLevel,a.maxLevel,this._level)){this.getPOIWindow().setPoint(a.transferPoint)
}this.$map().attach(this._transferListener)
},_unwatchMapForTransfer:function(){delete this._transferInfo;
delete this._level;
this.$map().detach(this._transferListener)
},_changeSubwayWindowPosition:function(){if(!this._transferInfo||!this.getPOIWindow()){this._unwatchMapForTransfer();
return
}var b=this._transferInfo,a=this._level,g=this.$map().getLevel(),d=b.minLevel,e=b.maxLevel,c=this.getPOIWindow(),f=false;
if(a>e&&this.$map().levelInRange(d,e,g)){c.setPoint(b.transferPoint);
f=true
}else{if(a<=e&&g>e){c.setPoint(b.originPoint);
f=true
}}f&&this.dispatch("transferChanged",{transferPoint:b.transferPoint,originPoint:b.originPoint});
this._level=g
},_onMoveSubwayStation:function(a){this.dispatch("moveStation",{stationData:a})
},moveSubwayPOIWindow:function(c,b){var d=this.$map().getLevel(),a={offset:{width:0,height:2},point:new nhn.mapcore.LatLng(c.y,c.x)};
this._transferInfo&&this._unwatchMapForTransfer();
if(b&&d>=b.minLevel&&d<=b.maxLevel){a.point=b.transferPoint
}this.$InfoWindowFacade().moveCurrentWindow(a,this.openSubwayPOIWindow.bind(this,c,b))
},_determineTrigger:function(c){var d=this.$map().getMapType().toLowerCase(),a=["a",".nmap_overlay_pane",".nmap_info_pane"],e,b;
if(d=="satellite"){return false
}e=$(c);
b=e.closest(a.join(","));
this._clickedTarget=e;
if(b.length){return false
}return true
},_onClickMapDone:function(f){var d=this.$map(),g=f.latlng,f=f.domEvent||f,b=f.target||f.srcElement,a=this._determineTrigger(b),c={domEvent:f,pixPoint:d.getPointToOffset(g.toInner()),level:d.getLevel(),indoorID:null};
if(!a||this.$state().getState()!==nhn.map.Const.STATE_MAPPOI_HOVERD){if(this._isIndoorRegion(b)){c.indoorID=$(b).parent().data("id");
c.floor=$(b).parent().data("floor")
}}else{c.latlng=g
}this._mousedown=true;
this.dispatch("click",c);
if(!c.indoorPolygonID&&!!c.latlng){nhn.map.LogClick({event:f,element:b,acode:"map*l.label"})
}},_isIndoorRegion:function(a){return($(a).closest("._indoor_region_clue").length>0)
},_onMapMouseUpDone:function(f){var d=this.$map(),g=f.latlng,f=f.domEvent||f,c=f.target||f.srcElement,b=this._determineTrigger(c),a=(f.which||f.button)===1;
if(!a||!b){return
}delete this._mousedown;
this.dispatch("mouseup",{domEvent:f,latlng:g,pixPoint:d.getPointToOffset(g.toInner()),level:d.getLevel(),floor:d.getFloor()||0})
},_getMinMaxPoint:function(){var d=this.$map(),c=d.getEntireBound(),a=new nhn.mapcore.Inner(c[0],c[3]).toLatLng(),b=new nhn.mapcore.Inner(c[2],c[1]).toLatLng();
return{minPoint:a,maxPoint:b}
},_onChangeMapDone:function(a){if(!a.zoomed&&!this._checkOverThreshold()){return
}this._mapMove()
},_mapMove:function(){var b=this.$map(),a=this._getMinMaxPoint();
this.dispatch("mapmoved",{minPoint:a.minPoint,maxPoint:a.maxPoint,level:b.getLevel(),floor:b.getFloor()||0})
},_checkOverThreshold:function(){var b=this.$map().getCenterPixel(),a=b.x-this._centerPixel.x,d=b.y-this._centerPixel.y,c=(Math.abs(a)>50||Math.abs(d)>50);
if(c){this._centerPixel=b
}return c
},_onMapMouseMove:function(f){var f=f.domEvent||f,d=this.$map(),g=d.getLatLngByScreenPoint({x:f.clientX,y:f.clientY}),a=d.getLevel();
var c=f.target?$(f.target):$(f.srcElement),b=null;
if(c.hasClass("_mapclick_img")){return
}if(this._isIndoorRegion(c)){b=c.parent().data("id")
}this.dispatch("mousemove",{latlng:g,indoorID:b,level:a})
},_onLoadAnotherPane:function(){this._anotherPaneCount++;
this.isActivating()&&this.deactivate()
},_onUnloadAnotherPane:function(){this._anotherPaneCount--;
if(!this.isActivating()&&this._anotherPaneCount===0){this.activate()
}},getMapMovableContainer:function(){return this.$map().getMovableContainer()
},pointInBound:function(a,b){return this.$map().pointInBound(a,b)
}});
(function(){iron.ns("nhn.map.mappoi").SpotHighlighter=iron.Class({initialize:function(){this._prepareDOM()
},getElement:function(){return this._el[0]
},_prepareDOM:function(){var b=!!($.browser.msie&&parseInt($.browser.version,10)<=8),d="https://ssl.pstatic.net/static/maps/ux2013/map_click.png",c;
if(b){d=d.replace("map_click.png","map_click_8.png")
}c=$('<img class="_mapclick_img" src="'+d+'" alt="" style="position:absolute;z-index:100;top:-9999px;left:-9999px;width:0px;height:0px;pointer-events:none;display:none">');
$(this.$view().getMapMovableContainer()).append(c);
this._el=c
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},stop:function(){this._el.stop(true).css({width:4,height:4,opacity:1,display:"none"})
},twinkle:function(b){var c=this._el;
this.stop();
c.css({left:b.x-2,top:b.y-2,display:"block"}).animate({width:26,height:26,opacity:0,left:b.x-13,top:b.y-13},{duration:500,easing:"easieEaseOut",complete:function(){c.hide().css("opacity",1)
}})
},_listenView:function(){this.$view().attach({mouseup:a.bind(this)})
}});
function a(b){var c=b.pixPoint;
this.twinkle({x:c.x,y:c.y})
}}());
iron.ns("nhn.map.mappoi").MapPoiController=iron.Class({initialize:function(){},_listenService:function(){this.$service().attach({activate:this._onActivate.bind(this),deactivate:this._onDeactivate.bind(this),responsePOI:this._onResponsePOI.bind(this),errorPOI:this._onErrorPOI.bind(this),responseSubway:this._onResponseSubway.bind(this),clear:this._onClear.bind(this)})
},_listenView:function(){this.$view().attach({click:this._onClick.bind(this),mapmoved:this._onMapMoved.bind(this),mousemove:this._onMouseMove.bind(this),moveStation:this._onMoveStation.bind(this)})
},_onActivate:function(){this.$view().activate()
},_onDeactivate:function(){this.$view().deactivate()
},_onResponsePOI:function(c){var a=c.poiType,b=c.poiInfo;
if(a==="spot"){this.$view().openPOIWindow(b)
}else{if(a==="subway"){this.$view().openSubwayPOIWindow(b,c.transferInfo)
}}},_onErrorPOI:function(){this.$view().closePOIWindow()
},_onResponseSubway:function(b){var a=b.subwayInfo;
this.$view().moveSubwayPOIWindow(a,b.transferInfo)
},_onClear:function(){this.$view().closePOIWindow()
},_onClick:function(g){if(!this._isValidState()){return
}if(this.$service().isPanoramaPlaying()&&this.$service().isFlightActivated()){return
}var d=!!g.indoorID,a=this._mid,b=this._midType,h=this._midPoint;
if(a&&b){if(b==="normal"){if(g.latlng){this.$service().requestPOI(g.latlng,g.level,g.floor)
}}else{this.$service().requestSiteInfo(a,b,h)
}}else{if(d){this.$service().enterIndoorMapByPolygon(g)
}else{var f=$(g.domEvent.target),c=f.closest("._nmap_marker");
if(f.hasClass("_mapclick_img")||f.hasClass("nmap_movable_container")){return
}else{if(c.length==0){this.$service().leaveIndoorMap()
}}}}},_onMapMoved:function(a){if(a.level>14){this.$service().deleteClueList();
return
}this.$service().requestClue(a.minPoint,a.maxPoint,a.level,a.floor)
},_isValidState:function(){var a=this.$service().getState();
return(a===nhn.map.Const.STATE_NONE||a===nhn.map.Const.STATE_MAPPOI_HOVERD||a===nhn.map.Const.STATE_UNACTIVATED_INDOOR_HOVERD)
},_onMouseMove:function(d){if(!this._isValidState()){return
}if(this.$service().isPanoramaPlaying()&&this.$service().isFlightActivated()){return
}var c=this.$service().getClueMidByLatLng(d);
var a=c.mid,b=c.midType,f=c.midPoint;
if(a&&b){this.$service().setState(nhn.map.Const.STATE_MAPPOI_HOVERD)
}else{if(!!d.indoorID&&d.indoorID!==this.$service().getIndoorID()){this.$service().setState(nhn.map.Const.STATE_UNACTIVATED_INDOOR_HOVERD)
}else{this.$service().setState(nhn.map.Const.STATE_NONE)
}}this._mid=a;
this._midType=b;
this._midPoint=f
},_onMoveStation:function(a){var b=a.stationData;
this.$service().requestSubway(b)
}});(function(){var l=iron.ns("nhn.map.sharing"),f={width:534,height:418},k={mail:"메일로 보내기를",blog:"블로그에 담기를",cafe:"카페에 담기를",mobile:"모바일로 보내기를",navi:"내비게이션에 보내기를"},b="제공하지 않는 영역으로 <br/>실행할 수 없습니다.",h="지도를 이동한 후 다시 시도해 주세요.";
l.SharingService=iron.Class({inherit:nhn.map.Dispatcher},{urlCopyLayerOpenStatus:false,_mapURL:null,_mapShortURL:null,exportMap:function(x){var A=this.$region(),w=this.$dataGatherer(),u=this.getMenuState(),z=this.$search().getQuery(),C=A.getRegionText(),y,B,D,v;
B=this.getURLData();
y=this.$map().isActiveMapType("satellite")?"satellite":"normal";
D=n(B,w);
v=p(D,B,u,C,z,y);
this.$popupHandler().openPopup(x);
if(x==="mail"&&v.panorama){this._requestPanoramaImage(v,x)
}else{this._requestImage(D,v,x,true)
}},exportInfoWindow:function(w,x){var v=this.$popupHandler(),B=this.$dataGatherer(),u=this.getURLData(),z,y,A;
if(x.MarkerType==="AD"){x.MarkerType="SITE"
}z=n(u,B);
y=l.InfowindowDataFactory.create(w,x,u,z);
y.panorama=z.panorama||null;
v.openPopup(w);
if(w==="mobile"||w==="navi"){v.exportDataUsingForm(y,w);
return
}if(w==="mail"&&y.panorama){this._requestPanoramaImage(y,w)
}else{this._requestImage(z,y,w,true)
}},getSocialExportData:function(z,E){var u=E.MarkerType,x=this.$dataGatherer(),C=this.getURLData(),D,v,B,A;
D=n(C,x);
v=l.InfowindowDataFactory.create(z,E,C);
B=r(u,E.type);
A=l.SocialDataFactory.create(B,v);
if(this.getMenuState()==="SUBWAY"&&!E.IsPanoramaMode){A.mapUrl=nhn.map.subway.Util.generateRestorationUrlOfInfoWindow(E)
}if(z==="sms"){var y="";
if(this.getMenuState()==="SUBWAY"){var w=A.mapUrl.match(/stationId=(\d+)/g);
if(w){y="/subway/subwayStation.nhn?"+w[0]
}}else{y="/?"+A.mapUrl.split("?")[1]
}A.mapUrl="https://m.map.naver.com"+y
}return A
},getSpluginExportData:function(x){var u=x.MarkerType,y=this.$dataGatherer(),C=this.getURLData(),D,v,B,A;
D=n(C,y);
v=l.InfowindowDataFactory.createExportData(x,C);
B=r(u,x.type);
A=l.SocialDataFactory.create(B,v);
if(this.getMenuState()==="SUBWAY"&&!x.IsPanoramaMode){A.mapUrl=nhn.map.subway.Util.generateRestorationUrlOfInfoWindow(x)
}var z="";
if(this.getMenuState()==="SUBWAY"){var w=A.mapUrl.match(/stationId=(\d+)/g);
if(w){z="/subway/subwayStation.nhn?"+w[0]
}}else{z="/?"+A.mapUrl.split("?")[1]
}A.__smsUrl="https://m.map.naver.com"+z;
if(x.roadAddr&&x.roadAddr.text){A.addressRoad=x.roadAddr.text
}if(!A.addressRoad&&x.roadAddress){A.addressRoad=x.roadAddress
}return A
},_requestPanoramaImage:function(v,u){var w=this.$panorama();
w.requestPanoramaImage(f.width,f.height,this._startExport.bind(this,v,u))
},_requestImage:function(y,v,u,w){var z=y.map.dlevel,x=l.ImageDataFactory.create(y,v,z,f.width,f.height);
this._setSiteMarkerToCenter(x,v);
this.$mashupDAO().requestImage(x,this._startExport.bind(this,v,u),this._exportFail.bind(this,v,u),w)
},_startExport:function(x,v,w){var u=this.$popupHandler();
x.mapImageSrc=w;
u.exportDataUsingForm(x,v)
},_exportFail:function(x,v,w){var u=this.$popupHandler(),y;
u.closePopup();
if(w){y=k[v]+b;
nhn.map.service.Alert(y,h)
}else{x.mapImageSrc="";
u.exportDataUsingForm(x,v)
}},_setSiteMarkerToCenter:function(A,z){if(!z.result||!("site" in z.result)){return
}var y=z.result.site.list[0],w=nhn.mapcore.CoordConverter.fromLatLngToInner(new nhn.mapcore.LatLng(y.y,y.x)),v=this.getCenterPoint(),x=w.x-v.x,u=w.y-v.y;
A.map.bound[0]+=x;
A.map.bound[1]+=u;
A.map.bound[2]+=x;
A.map.bound[3]+=u
},saveMap:function(){var w=this.getMenuState(),u=this,y,v,x;
if(w==="SUBWAY"){this.$subway().openSavePopup()
}else{y=this.$dataGatherer();
v=y.gather();
x=this.getZoomLevel();
l.SaveMapDialog(function(z){u.dispatch("save_map",{mapData:v,isSaveAll:z})
})
}},requestMapImage:function(x,v,u,w){this.$mashupDAO().requestImage(x,v,u,w)
},printMap:function(){var w=this.$dataGatherer(),v=t(w),u=this.$region().getHmac();
v.hmac=u;
this.dispatch("print_map",{mapData:v})
},printInfoWindow:function(w){var x=this.$dataGatherer(),u=this.$polygon().getPolygonParamHash(),v=i(x,w,u);
this.dispatch("print_info_window",{infoData:v})
},getMapData:function(){var u=this.$dataGatherer();
return u.gather()
},openURLCopyLayer:function(y){var u=this.getURLData(),x=u.toURL(),z=this.$menubar().getMenuState(),w=this,v;
nhn.map.service.EncryptParamsDAO.request(x,function(A){if(A){var C=A,B=x.substring(0,x.indexOf("?")+1)+C;
w._requestHTMLTagImage(u,B);
w._requestShortURL(B);
w.setMapURL(B);
v=$.extend({url:B,menu:z},y);
if(!w.isURLCopyLayerOpenStatus()){w.dispatch("open_map_copy_layer",v)
}else{w.closeURLCopyLayer()
}}},function(){nhn.map.service.Alert("서버와의 통신이 원활하지 않습니다.","잠시 후에 다시 시도해 주세요.")
})
},insertMap:function(){var w=this.$dataGatherer(),v=t(w),u=this.getURLData();
this.dispatch("insert_map",{mapData:v,mapURL:u.toURL()})
},_requestShortURL:function(v){var u=this.$shortURLDAO();
u.requestShortURL(v,s.bind(this),m.bind(this))
},_requestHTMLTagImage:function(u,v){var w=this.$dataGatherer(),x=g(w);
this.dispatch("request_tag_copy_image",{mapData:x,mapURL:v})
},closeURLCopyLayer:function(){this.dispatch("close_map_copy_layer")
},setURLCopyLayerStatus:function(u){this.urlCopyLayerOpenStatus=u
},isURLCopyLayerOpenStatus:function(){return this.urlCopyLayerOpenStatus
},getMapURL:function(){return this._mapURL
},setMapURL:function(u){this._mapURL=u
},getMapShortURL:function(){return this._mapShortURL
},setMapShortURL:function(u){this._mapShortURL=u
},getURLData:function(){var y=this.$urlGatherer(),x=this.$map(),z,u,w,v;
z=this.getMenuState().toLowerCase();
u=x.getMapType();
u=c(u);
w=y.gatherURLData(z,u);
v=new nhn.map.sharing.URLData(w);
return v
},getMenuState:function(){var u=this.$menubar();
return u.getMenuState()
},getMapSize:function(){return this.$map().getMapSize()
},getActiveMapType:function(){return this.$map().getActiveMapType()
},getZoomLevel:function(){return this.$map().getLevel()
},getBoundPoint:function(){return this.$map().getBound()
},trimPath:function(w,u,x,v){return this.$map().trimPath(w,u,x,v)
},getCenterPoint:function(){return this.$map().getCenter()
},initDataGatherer:function(){var u=this.$dataGatherer(),v=this.$bridge();
u.addListener({GATHER_MAP_DATA:function(x){var w=x.gatherer;
v.gatherMapData(w)
}})
},initToolbox:function(u){this.dispatch("toolbox_init",{container:u})
},showToolbox:function(){this.dispatch("show_toolbox")
},hideToolbox:function(){this.dispatch("hide_toolbox")
},hidePrint:function(){this.dispatch("hide_print")
},showPrint:function(){this.dispatch("show_print")
},_listenPanorama:function(){this.$panorama().attach({afterOpenPanorama:o.bind(this),closePanorama:e.bind(this),panoramaLoadStatus:q.bind(this),player_clicked:a.bind(this),click_print:j.bind(this),click_share:d.bind(this)})
},getExportUrl:function(w){if(!w){return
}var u=this.getURLData(),v=l.InfowindowDataFactory.createExportData(w,u);
return(v.mapUrl||null)
}});
function p(A,u,z,v,x,y){var w=u.toURL();
return nhn.map.sharing.ExportDataFatory.create(A,z,v,x,w,y)
}function n(u,w){var v=w.gather();
l.MapDataRefinery.refine(v,u);
return v
}function t(v){var u=v.gather();
l.PrintMapDataRefinery.refine(u);
return u
}function g(v){var u=v.gather();
l.PrintDataRefinery.refine(u);
return u
}function i(x,v,u){var w=x.gather();
l.PrintInfoWindowDataRefinery.refine(w,v,u);
return w
}function c(u){var v;
switch(u){case"hybrid":v=1;
break;
case"satellite":v=2;
break;
case"terrain":v=3;
break;
default:v=0
}return v
}function r(w,u){var v=w;
if(w==="SITE"){v=(u==="poi")?"poi":"drt"
}return v
}function s(u){this._mapShortURL=u
}function m(){this._mapShortURL=null
}function o(){this.dispatch("afterOpenPanorama",{toolboxContainer:this.$panorama().getToolboxContainer()})
}function e(){this.dispatch("closePanorama")
}function q(){this.dispatch("panoramaLoadStatus")
}function a(){this.dispatch("clickPanoramaPlayer")
}function j(){this.printMap()
}function d(){this.openURLCopyLayer()
}}());
(function(){var a=iron.ns("nhn.map.sharing");
a.MapDataGatherer=iron.Class({inherit:iron.Dispatcher},{_targetList:[],initialize:function(){},gather:function(){return b.apply(this,[this._targetList])
},initBus:function(){this._targetList.push(this.$bus())
},initPolygon:function(){this._targetList.push(this.$polygon())
},initDirections:function(){this._targetList.push(this.$directions())
},initMapHandler:function(){this._targetList.push(this.$mapHandler())
},initSearchHandler:function(){this._targetList.push(this.$searchHandler())
},initPanorama:function(){this._targetList.push(this.$panorama())
},initPerimeter:function(){this._targetList.push(this.$perimeter())
},initDistance:function(){this._targetList.push(this.$distance())
},initArea:function(){this._targetList.push(this.$area())
},initTraffic:function(){this._targetList.push(this.$traffic())
}});
function b(g){var f={map:"",print:[],service:[],panorama:"",pane:[]},e=function(h,i){if(h==="map"){f.map=i
}else{if(h==="print"){f.print.push(i)
}else{if(h==="service"){f.service.push(i)
}else{if(h==="pane"){f.pane.push(i)
}else{if(h==="panorama"){f.panorama=i
}}}}}},c,d;
this.dispatch("GATHER_MAP_DATA",{gatherer:e});
for(c=0,d=g.length;
c<d;
c++){g[c].gatherMapData(e)
}return f
}}());
(function(){var a=iron.ns("nhn.map.sharing");
a.URLDataGatherer=iron.Class({inherit:iron.Dispatcher},{initialize:function(){this._targetList=[]
},gatherURLData:function(f,c){var e={menu:f,mapMode:c},d=this._getPanelStatus();
b.apply(this,[this._targetList,f,e]);
if(d!=="n-u"){e.rpanel=d
}e=this._gatherTitlePinQuery(e);
return e
},_gatherTitlePinQuery:function(d){var c=this.$home().getResult();
if(!!c&&!!c.region&&!!c.region._titleOnly){d.x=c.region.x;
d.y=c.region.y;
d.title=Base64.encode(c.region.name)
}return d
},_getPanelStatus:function(){var e=this._isPanelWide(),d=this._isPanelFolded(),c;
c=e+"-"+d;
return c
},_isPanelWide:function(){return"n"
},_isPanelFolded:function(){return this.$panel().isFolded()?"f":"u"
},initMap:function(){this._targetList.unshift(this.$map())
},initDirections:function(){this._targetList.push(this.$directions())
},initPerimeter:function(){this._targetList.push(this.$perimeter())
},initSearch:function(){this._targetList.push(this.$search())
},initTrafficGuide:function(){this._targetList.push(this.$trafficGuide())
},initPanorama:function(){this._targetList.push(this.$panorama())
},initIndoor:function(){this._targetList.push(this.$indoor())
},initWeather:function(){this._targetList.push(this.$weather())
},initTheme:function(){this._targetList.push(this.$theme())
},initBus:function(){this._targetList.push(this.$bus())
},initCctv:function(){this._targetList.push(this.$cctv())
},initSubway:function(){this._targetList.push(this.$subway())
},initBookmark:function(){this._targetList.push(this.$bookmark())
}});
function b(f,e,c){var d=this.$topicControl().getTopicToRestore();
f&&f.forEach(function(g){var h=g.gatherUrlParameter(e);
if(h){c=$.extend(c,h)
}});
d.forEach(function(g){if(g==="traffic"||g==="cctv"){c[g]="on"
}})
}}());
(function(){var c=iron.ns("nhn.map.sharing"),l=location.href.replace(/(\?|#).*$/g,"")+"?",f=2040,m="enc=b64",h={pinTitle:false,query:false,psName:true,psQuery:false,ptName:true,ptQuery:false,sText:true,t1Text:true,t2Text:true,t3Text:true,t4Text:true,t5Text:true,eText:true,mappedAddr:false,displayAddr:true,vrpanoartifactid:true};
c.URLData=iron.Class({_query:null,initialize:function(n){this._query=n
},setData:function(n,o){this._query[n]=o
},getData:function(n){return this._query[n]
},getRawData:function(){return this._query
},toURL:function(t,u,s){var r=this._query;
r=a(r,t);
r=e(r,u);
var o=k(r),p=j(o),n=i(r,p),q=s?"":l;
return[q,o,n,m].join("")
},clone:function(){var n=$.extend({},this._query);
return new c.URLData(n)
}});
function a(r,s){var n={},p,o,q;
if(!s){return r
}for(o=0,q=s.length;
o<q;
o++){p=s[o];
if(p in r){n[p]=r[p]
}}return n
}function e(q,r){var o,n,p;
if(!r){return q
}for(n=0,p=r.length;
n<p;
n++){o=r[n];
delete q[o]
}return q
}function d(q){var n=0,o,p;
for(o=0,p=q.length;
o<p;
o++){n+=(q.charCodeAt(o)>127?2:1)
}return n
}function k(q){var n="",o,p;
for(o in q){if(!q.hasOwnProperty(o)||h[o]===true){continue
}p=q[o];
if(o in h){p=Base64.encode(p)
}n+=[o,"=",encodeURIComponent(p),"&"].join("")
}return n
}function j(n){return f-n.length-m.length
}function g(r,n){var o,p,q;
for(p=0,q=r.length;
p<q;
p++){o=r.charCodeAt(p)>127?2:1;
n-=o;
if(n<0){return r.substr(0,p)
}}return r
}function i(t,r){var n="",q=b(t),p,o,s;
for(p=q;
p>0;
p--){for(o in t){if(!t.hasOwnProperty(o)||!h[o]){continue
}s=t[o];
s=g(s,p);
s=encodeURIComponent(Base64.encode(s));
n+=[o,"=",s,"&"].join("")
}if(n.length<r){break
}}return n
}function b(r){var o=0,n,q,p;
for(n in r){if(!r.hasOwnProperty(n)||!h[n]){continue
}q=r[n];
p=d(q);
o=Math.max(o,p)
}return o
}}());
(function(){var b=iron.ns("nhn.map.sharing");
b.PrintMarker=iron.Class({MARKER_LARGE_ICON_URL:{bus_station:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",pl:"https://ssl.pstatic.net/static/maps2/icons/pin_g2.png",pr:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",s:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",k:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",kp:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",p:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",line:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",error:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png",traffic:"https://ssl.pstatic.net/static/maps3/icons/one_sp_around.png",spot:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_default.png",dev:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_spot.png"},MARKER_ICON_SIZE:{bus_station:{width:24,height:37},pl:{width:28,height:36},pr:{width:24,height:37},s:{width:24,height:37},k:{width:24,height:37},kp:{width:24,height:37},p:{width:24,height:37},line:{width:24,height:37},error:{width:24,height:37},traffic:{width:18,height:23},spot:{width:24,height:35},dev:{width:24,height:37}},MARKER_ICON_OFFSET:{bus_station:{width:12,height:34},pl:{width:14,height:36},pr:{width:12,height:34},s:{width:12,height:34},k:{width:12,height:34},kp:{width:12,height:34},p:{width:12,height:34},line:{width:12,height:33},error:{width:12,height:34},traffic:{width:9,height:23},spot:{width:12,height:35},dev:{width:12,height:34}},SPRITE_SIZE_BY_TYPE:{bus_station:{width:500,height:200,marginX:29,marginY:40},pl:{width:500,height:34,marginX:31,marginY:34},pr:{width:500,height:200,marginX:29,marginY:40},s:{width:500,height:200,marginX:29,marginY:40},k:{width:500,height:200,marginX:29,marginY:40},kp:{width:500,height:200,marginX:29,marginY:40},p:{width:500,height:200,marginX:29,marginY:40},line:{width:500,height:34,marginX:29,marginY:40},error:{width:500,height:200,marginX:29,marginY:40},traffic:{width:600,height:23,marginX:23,marginY:23},spot:{width:200,height:35,marginX:30,marginY:35},dev:{width:500,height:200,marginX:29,marginY:40}},MARKER_TOP_ORDER:{bus_station:3,pl:0,pr:0,s:0,k:0,kp:0,p:0,line:1,error:2,traffic:0,spot:0,dev:4},initialize:function(f,h){this.HIGHLIGHT_ZINDEX=f.HIGHLIGHT_ZINDEX;
this.PREFIX_ID="MARKER_";
this.group=f.group;
this.id=f.getId?f.getId():f.id;
this._markerType=a(f,this.id,h);
this._orderY=this.MARKER_TOP_ORDER[this._markerType];
if(f.order){this.order=f.order
}else{var i=f.getIcon().getSpriteOffset();
var e=this.SPRITE_SIZE_BY_TYPE[this._markerType];
this.order=(Math.abs(i.getLeft())/e.marginX)
}this.siForcedSelection=false;
var g={};
if(h&&h.poiInfo){g=$.extend(g,h.poiInfo)
}this.options=$.extend(g,f.options);
var d=this.options.point.toInner();
this.point={x:d.x,y:d.y};
this.title=f.title;
this.zIndex=f.zIndex;
this._markerType="";
if(this.id.indexOf("BUS")!=-1){if(!!h.mainStation){return
}this._markerType="bus_station"
}else{if(this.id.indexOf("ADDRESS")!=-1){this._markerType="spot"
}else{if(this.id.indexOf("REGION")!=-1){this._markerType="spot"
}else{if(this.id.indexOf("traffic")!=-1){this._markerType="traffic";
this.order=14
}else{if(c(h)){this._markerType="dev"
}else{if(h.MarkerType=="ID"){this._markerType="spot"
}else{this._markerType=this.id.match(/_((\D+)(\d+))(_\d+)?$/)[2];
if(h.posExact=="0"){this._markerType="error"
}else{if(h.poiInfo.hasRoad){this._markerType="line"
}}}}}}}}this.url=this.MARKER_LARGE_ICON_URL[this._markerType];
this.size=this.MARKER_ICON_SIZE[this._markerType];
this.offset=this.MARKER_ICON_OFFSET[this._markerType];
this.type="Sprite"
},getType:function(){return this.type
},toPrint:function(){return{type:this.type,offset:this.offset,size:this.size,imgOrder:this.order,imgOrderY:this._orderY,spriteClass:"sp_pin",spriteSize:this.SPRITE_SIZE_BY_TYPE[this._markerType],url:this.url,zIndex:this.zIndex}
}});
function c(f){var e=f.poiInfo,d=false;
if(e&&e.hasPolygon&&e.polygon.shapeKey.typeName==="DVLP"){d=true
}return d
}function a(e,f,g){var d;
if(f.indexOf("BUS")!=-1){if(!!g.mainStation){return
}d="bus_station"
}else{if(f.indexOf("ADDRESS")!=-1){d="spot"
}else{if(f.indexOf("REGION")!=-1){d="spot"
}else{if(f.indexOf("traffic")!=-1){d="traffic";
this.order=14
}else{if(c(g)){d="dev"
}else{if(g.MarkerType=="ID"){d="spot"
}else{d=f.match(/_((\D+)(\d+))(_\d+)?$/)[2];
if(g.posExact=="0"){d="error"
}else{if(g.poiInfo.hasRoad){d="line"
}}}}}}}}return d
}}());
(function(){var a=iron.ns("nhn.map.sharing");
a.SharingUtil=iron.Class({singleton:true},{name:"nhn.map.sharing.SharingUtil",initialize:function(){},_trimPath:function(d,b,e,c){return window.mapObj.trimPath(d,b,e,c)
}});
a.SharingUtil.trimPath=function(e,c,f,d){var b=nhn.map.sharing.SharingUtil.getInstance();
return b._trimPath(e,c,f,d)
};
a.SharingUtil.calcBoundInfo=function(n,m,b,l,d){if(!l){l="dynamic"
}var q=parseInt(b[2],10)-parseInt(b[0],10),f=parseInt(b[1],10)-parseInt(b[3],10),j=Math.round((parseInt(b[0],10)+parseInt(b[2],10))/2),h=Math.round((parseInt(b[1],10)+parseInt(b[3],10))/2),r=new nhn.mapcore.Inner(j,h),c=d.level||"",s=d.minLevel||0,e=d.maxLevel||15,t=null,o,p,g,k;
switch(l){case"dynamic":for(o=e;
o>=s;
o--){t=nhn.mapcore.mapSpec.getScale(o);
p=n/t;
g=m/t;
if((p>q)&&(g>f)){c=o;
break
}}break;
case"static":t=nhn.mapcore.mapSpec.getScale(c);
break
}k=[r.x-(n/2)/t,r.y+(m/2)/t,r.x+(n/2)/t,r.y-(m/2)/t];
return{level:c,center:r,bound:k}
};
a.SharingUtil.deleteByNameFromMapData=function(f,d,b){var e=f[d],c;
if(!e){return false
}for(c=0;
c<e.length;
c++){if(e[c].name===b){e.splice(c--,1)
}}};
a.SharingUtil.findByNameFromMapData=function(f,c,e){var d=f[c],b;
if(!d){return false
}for(b=0;
b<d.length;
b++){if(d[b].name===e){return d[b]
}}return false
};
a.SharingUtil.stringifyRoute=function(e){var b=[],c,d;
for(c=0,d=e.length;
c<d;
c++){b.push([e[c].x,e[c].y].join(","))
}if(!e.length){return"-1,-1"
}return b.join(" ")
}}());
(function(){var c=iron.ns("nhn.map.sharing"),d="width=400, height=300",b="width=400, height=300, scrollbars=yes, resizable=yes",a={footer_export_send_to_mail:"/common2/storeMapDataInDB.nhn",footer_export_send_to_blog:"/common2/sendMapToBlog.nhn",footer_export_send_to_cafe:"/common2/sendMapToCafe.nhn",mail:"/common2/storeMapDataInDB.nhn",blog:"/common2/sendMapToBlog.nhn",cafe:"/common2/sendMapToCafe.nhn",mobile:"/common2/sendMapToMobile.nhn",navi:"/common2/sendMapToNavi.nhn"};
c.ExportPopupHandler=iron.Class({initialize:function(){this._popupWindow=null;
this._popupName=null;
this._windows={}
},_getWindow:function(f){var h=f||this._popupName;
if(!h){return null
}var g=this._windows[h];
try{if(g&&!g.name){delete this._windows[h];
this._popupName=null;
return null
}else{return g
}}catch(i){delete this._windows[h];
this._popupName=null;
return null
}},openPopup:function(f){var k=d,g=nhn.map.service.LowResolution.isLowResolution(),i;
switch(f){case"mail":k+=", resizable=yes";
i="ExportMail";
break;
case"blog":i="ExportBlog";
break;
case"cafe":i="ExportCafe";
break;
case"navi":i="ExportNavi";
if(g){k=b
}break
}var h=this._getWindow(i);
if(h){this._popupWindow=h;
h.focus()
}else{try{h=window.open("about:blank",i,k);
h.focus();
this._windows[i]=h;
this._popupWindow=h
}catch(j){}}this._popupName=i
},closePopup:function(){if(this._popupWindow){this._popupWindow.close();
delete this._windows[this._popupName];
this._popupWindow=null;
this._popupName=null
}},exportDataUsingForm:function(g,f){var j=this._popupName,h=this._popupWindow;
if(!h){return
}var i=$("<form>"),l=$("<input>");
i.attr({method:"post",target:j,action:a[f]});
l.attr({type:"hidden",name:"data",value:JSON.stringify(g).replace(/undefined/g,"null")});
i.append(l);
nhn.map.DOMCache.getBody().append(i);
try{i.submit();
i.remove();
this._popupWindow&&this._popupWindow.focus()
}catch(k){}}})
}());
(function(){var b=iron.ns("nhn.map.sharing");
b.MapDataHandler=iron.Class({gatherMapData:function(n){var g=this._getSharing(),h=g.getActiveMapType(),j=g.getMapSize(),f=g.getZoomLevel(),i=g.getBoundPoint(),m={},e,l,k;
e=a(h);
l=c(h);
k=this._getIndoorData();
m={mode:e,width:j.width,height:j.height,dlevel:f,bound:i};
m=$.extend(m,l);
m.indoorData=k;
m._tileUrlRule={version:nhn.mapcore.RealTileUrlRule.prototype._version,host:nhn.mapcore.RealTileUrlRule.prototype.HOST};
n("map",m)
},_getIndoorData:function(){var i=this._getIndoor(),f=i.getCurrentFloor()||null,k=i.getIndoorID(),e=i.getDataVersion(),j=i.getIndoorMinLevel(),h=i.isRepresent(),g="";
if(!!k){g=f+"|"+k
}else{if(h){g="represent"
}}return{floor:f?f:null,id:k?k:null,dv:e,ml:j,indoorParam:g}
}});
function a(h){var f=d(h,"hybrid"),g=d(h,"satellite"),e=d(h,"terrain"),i=0;
if(f&&g){i=1
}else{if(!f&&g){i=2
}else{if(e){i=3
}}}return i
}function c(k){var e=["traffic","land","bicycle","cadastral"],h={},f,g,j;
for(g=0,j=e.length;
g<j;
g++){f=e[g];
h[f]=d(k,f)?1:0
}return h
}function d(e,f){return e.indexOf(f)!==-1
}}());
(function(){var e=iron.ns("nhn.map.sharing");
e.SearchDataHandler=iron.Class({gatherMapData:function(i){var h=null;
h=this._gatherServiceData(i);
this._gatherPrintData(i,h)
},_gatherServiceData:function(o){var j=this._getSearch(),n=this._getHome(),i=this._getSharing(),h=j.getResult(),l=j.getSelectedItem(),m=i.getMenuState(),k;
if(a(h)){k=d(h,l,m)
}else{h=n.getResult();
if(!h){return
}k=f(h,l,m)
}o("service",k);
return h
},_gatherPrintData:function(k,h){var j=this.$searchController().getSearchMarkerList()||[],i=null;
if(j.length===0){return
}i=c(j,h);
if(i.length===0){return
}k("print",{name:"search",icons:i})
}});
function b(i,j){for(var h=0;
h<i.length;
h++){if(i[h].id===j){return h
}}return -1
}function c(j,s){var r=[],m,l,q,o,n,k,h;
if(!!s&&!!s.region&&!!s.region._titleOnly){return[new nhn.map.sharing.PrintMarker(j[0],s.region)]
}if(!s){return r
}for(k=0,h=j.length;
k<h;
k++){l=j[k];
n=l.type.toLowerCase();
if(n==="id"){n="site";
l.type="SITE";
q=l.id.replace("ID_","");
l.id=l.type+"_"+q
}else{q=l.id.replace(l.type+"_","")
}if(n==="region"){o=s[n];
r.push(new nhn.map.sharing.PrintMarker(l,o))
}else{var p=s[n]||s[s.type.toLowerCase()]||{};
o=p.list||null;
if(o){m=b(o,q);
if(m!==-1){r.push(new nhn.map.sharing.PrintMarker(l,o[m]))
}}}}return r
}function a(h){return h?(h.totalCount*1>0):false
}function d(q,l,j){var p={name:"search",selected:l,menu:j},m={boundary:$.extend({},q.boundary),type:q.type},n=["site","address","region","bus"],o,k,h;
for(o=0,k=n.length;
o<k;
o++){h=n[o];
g(q,m,h)
}p.data=m;
return p
}function f(h,j,k){var i={name:"search",selected:j,menu:k,data:{type:h.type}};
g(h,i.data,"region");
return i
}function g(i,j,h){if(i[h]){j[h]=$.extend({},i[h],true)
}}}());
(function(){var f=iron.ns("nhn.map.sharing"),c="/common2/printMap.nhn",e="printPopup",g="width=705,height={WINDOW_HEIGHT},status=no,resizable=no,scrollbars=yes";
f.PrintMapController=iron.Class({_listenService:function(){this.$service().attach({print_map:d.bind(this),print_info_window:b.bind(this)})
}});
function a(){var h;
var i=nhn.map.service.LowResolution,j=i.isLowResolution(),k=(j)?490:660;
h=window.open(c,e,g.replace("{WINDOW_HEIGHT}",k));
if(h){if($.browser.msie){h.opener=window
}h.focus()
}}function d(h){var i=h.mapData;
nhn.mapservice.PrintData=JSON.stringify(i);
a()
}function b(i){var h=i.infoData;
nhn.mapservice.PrintData=JSON.stringify(h);
a()
}}());
(function(){var e=iron.ns("nhn.map.sharing"),c=2048;
var f="지도의 가로 또는 세로가 2048픽셀을 <br /> 넘을 경우, 저장이 되지 않습니다.",i="지도 크기를 변경하여 저장해 주세요.",h="지도 저장을 제공하지 않는 영역으로 <br/>실행할 수 없습니다.",a="지도를 이동한 후 다시 시도해 주세요.",j="지도 저장을 실행할 수 없습니다.",k="잠시 후 다시 이용해 주세요.";
e.SaveMapController=iron.Class({inherit:nhn.map.Dispatcher},{_listenService:function(){this.$service().attach({save_map:g.bind(this)})
}});
function g(q){var p=this.$service(),t=q.mapData,r=q.isSaveAll,l=p.getZoomLevel(),o=p.getMenuState(),n=t.map.width,s=t.map.height,m;
nhn.map.LogPV("save");
if(n>c||s>c){nhn.map.service.Alert(f,i);
return
}if(!r){t.pane=[];
t.print=[];
t.service=[]
}e.PaneDataRefinery.refine(t);
e.PrintDataRefinery.refine(t);
m=e.ImageDataFactory.create(t,{menu:o},l,n,s);
p.requestMapImage(m,b,d,false)
}function b(l){window.location=l+"&download=true"
}function d(l){if(l){nhn.map.service.Alert(h,a)
}else{nhn.map.service.Alert(j,k)
}}}());
(function(){var r=iron.ns("nhn.map.sharing"),a="copy_tag",o="copy_panorama_tag",k="/common2/insertMap.nhn",h="insertMapPopup",l="width=592,height=686,status=no,resizable=yes,scrollbars=yes",f=460,n=340;
r.MapCopyController=iron.Class({_listenSharingService:function(){var v=b.bind(this);
this.$service().attach({open_map_copy_layer:d.bind(this),close_map_copy_layer:v,request_tag_copy_image:e.bind(this),insert_map:q.bind(this),afterOpenPanorama:s.bind(this),closePanorama:i.bind(this),panoramaLoadStatus:v,clickPanoramaPlayer:v})
},_listenView:function(){this.$view().addListener({close_map_copy_layer:b.bind(this),set_short_url:u.bind(this),open_preview:g.bind(this)})
}});
function d(y){var w=this.$view(),x=y.url,z=y.menu,v=y.position;
t(z,w);
this.$view().open(x,v);
this.$service().setURLCopyLayerStatus(true)
}function t(w,v){switch(w){case"SUBWAY":case"OPENMAP":v.hideCopyTagElement();
break;
default:v.showCopyTagElement();
break
}}function b(){var v=this.$service();
this.$view().close();
v.setURLCopyLayerStatus(false);
v.setMapURL(null);
v.setMapShortURL(null)
}function g(){this.$service().insertMap()
}function q(x){var y=x.mapData,w=x.mapURL,v;
nhn.mapservice.InsertMapData=JSON.stringify(y);
nhn.mapservice.InsertMapUrl=w;
v=window.open(k,h,l);
if(v){if($.browser.msie){v.opener=window
}v.focus()
}}function u(y){var v=this.$view(),x=y.checked,w=c.apply(this,[x]);
if(w===null&&x===true){v.showErrorMsg()
}else{v.hideErrorMsg();
v.setMapURL(w)
}}function c(w){var v=this.$service();
return w?v.getMapShortURL():v.getMapURL()
}function e(y){var v=this.$service(),A=y.mapData,w=y.mapURL,B=v.getZoomLevel(),z=v.getMenuState(),x;
r.PaneDataRefinery.refine(A);
x=r.ImageDataFactory.create(A,{menu:z},B,f,n);
v.requestMapImage(x,m.bind(this,A,w),p.bind(this),true)
}function m(y,x,w){var v=j(y,x,w);
this.$view().setHTMLTag(v)
}function p(){}function j(A,z,y){var x=new Date(),v=A.panorama,w;
if(v){w=nhn.mapservice.TemplateRepos.get(o).process({width:f,height:n,panoramaURL:v.iframeURL,exportDate:x.getFullYear()+"."+(x.getMonth()+1)+"."+x.getDate(),returnURL:z})
}else{w=nhn.mapservice.TemplateRepos.get(a).process({mapBoxWidth:f+2,mapUrl:z,mapImagePath:y,mapWidth:f,mapHeight:n,mapDate:x.getFullYear()+"."+(x.getMonth()+1)+"."+x.getDate(),cadastral:A.cadastral===1})
}return w
}function s(w){if(!w.toolboxContainer||this._urlCopyElContainer){return
}var v=this.$view().getElement();
this._urlCopyElContainer=v.parentNode;
w.toolboxContainer.appendChild(v)
}function i(){if(this._urlCopyElContainer){this._urlCopyElContainer.appendChild(this.$view().getElement());
delete this._urlCopyElContainer
}b.apply(this)
}}());
(function(){var c=iron.ns("nhn.map.sharing"),a="/external/nshorturl";
c.ShortURLDAO=iron.Class({inherit:nhn.map.AbstractDAO},{requestShortURL:function(f,d,e){var g=b(f,d,e);
this._request(g)
}});
function b(f,d,e){return{url:a,data:{svcCode:'"0006"',url:'"'+f+'"'},successRule:{result:true,code:"200",message:"ok"},success:function(h){var g=h.result.url;
d(g)
},error:e}
}}());
(function(){var c=iron.ns("nhn.map.sharing"),b="/api2/print-server",a=[0,80040002,80040005,80040007,80040008];
c.MashupPrintDAO=iron.Class({inherit:nhn.map.AbstractDAO},{requestImage:function(i,h,e,f){i=JSON.stringify(i);
var g=d(i,h,e,f);
this._request(g)
}});
function d(h,g,e,f){f=f===true?1:0;
return{url:b,type:"POST",data:{mapData:h,save:f},successRule:{status:0},success:function(i){g&&g(i.url)
},error:function(i){if(i&&"status" in i){if(i.status===8004007){e&&e(true)
}else{e&&e()
}}else{e&&e()
}}}
}}());
(function(){var a=iron.ns("nhn.map.sharing");
a.MapDataRefinery=function(){};
a.MapDataRefinery.refine=function(c,b){a.PaneDataRefinery.refine(c);
a.PrintDataRefinery.refine(c);
a.PanoramaDataRefinery.refine(c,b)
}}());
(function(){var c=iron.ns("nhn.map.sharing"),a="polyline";
c.PaneDataRefinery=function(){};
c.PaneDataRefinery.refine=function(h){var l=h.pane,j,f,k,h,e,g;
if(!l&&l.length===0){delete h.pane
}j=h.map;
f=j.bound;
k=j.dlevel;
for(e=0,g=l.length;
e<g;
e++){h=l[e].data;
b(h,k,f)
}};
function b(k,l,g){var f,h,e;
for(f=0,h=k.length;
f<h;
f++){e=k[f];
if(e.name===a){var j=d(e,l,g);
if(j){k.splice(f,1);
--f;
--h
}}}}function d(e,h,g){var f=c.SharingUtil.trimPath(e.points,false,h,g);
e.points=c.SharingUtil.stringifyRoute(f);
return(f.length===0)
}}());
(function(){var a=iron.ns("nhn.map.sharing");
a.PanoramaDataRefinery=function(){};
a.PanoramaDataRefinery.refine=function(d,b){var c=d.panorama;
if(c&&c.flashOptions.id){c.restoreUrl=b.toURL()
}}
}());
(function(){var d=iron.ns("nhn.map.sharing");
d.PrintDataRefinery=function(){};
d.PrintDataRefinery.refine=function(n){var g=n.print,k=g.length,h=n.map.dlevel,j=false,o=null,l,p,m;
if(n.map.indoorData.indoorParam){n.map.indoorRegion=n.map.indoorData.indoorParam
}if(k===0){delete n.print;
return
}for(m=0;
m<k;
m++){if(g[m]){p=g[m].paths||null;
l=g[m].bound;
if(g[m].name==="search"||g[m].name==="interestZone"||g[m].name==="route"||g[m].name==="cctv"||g[m].name==="layer"){o=g[m].icons
}if(!!p){o=c(g[m]);
e(g[m],h,l)
}else{if(!p){g[m].paths=[{mode:"normal",points:"-1,-1"}]
}}g[m].icons=b(o,j)
}}};
function e(g,o,j){var n=g.paths,m=[],l,h,k;
if(!n){return
}if(typeof(n)==="string"){n=JSON.parse(n)
}for(h=0,k=n.length;
h<k;
h++){if(n[h].path){l=d.SharingUtil.trimPath(n[h].path,false,o,j);
m.push({path:l,stroke:n[h].stroke})
}}g.paths=f(m)
}function f(p){var g=[],q,j,h,k,o,r,m,l,n;
for(j=0,h=p.length;
j<h;
j++){q=p[j].path;
q=a(q);
o=p[j].stroke;
if(o){k=o.strokeStyle||"normal";
r=o.stroke;
m=o["stroke-width"];
l=o["stroke-opacity"]
}else{k="normal"
}if(q){n={mode:k,points:q};
if(r){n.strokeColor=r
}if(m){n.strokeWeight=m
}if(l){n.strokeOpacity=l
}g.push(n)
}}return g
}function a(j){var l=[],g,h,k;
for(h=0,k=j.length;
h<k;
h++){g=j[h];
g=[g.x,g.y].join(",");
l.push(g)
}return l.join(" ")
}function c(g){var l=g.icons,j=[],h,k,m,n;
for(k=0,m=l.length;
k<m;
k++){h=l[k].options||{};
n=h.visible;
if(n!==false){j.push(l[k])
}}return(j.length>0)?j:null
}function b(g,h){if(!g){return
}return d.IconsDataRefinery.refine(g,h)
}}());
(function(){var b=iron.ns("nhn.map.sharing");
b.IconsDataRefinery=function(){};
b.IconsDataRefinery.refine=function(n,p){var k=[],j={},m,o;
for(m=0,o=n.length;
m<o;
m++){c(n[m],j,p);
p&&f(n[m],k)
}for(var l in j){k.push(j[l])
}return k
};
function f(m,j,k){if(m.options.indoor){return
}var o=m.toPrint(),l=o.spriteSize,n=o.offset;
j.push({mode:"Sprite",url:"https://ssl.pstatic.net/static/maps3/sp_pin_dimmed.png",width:l.marginX,height:l.marginY,offsetX:n.width,offsetY:n.height,zIndex:m.zIndex+1,spriteOffsets:"0,0",points:m.point.x+","+m.point.y})
}function c(n,k,o){var m=n.getType(),j=i(m),l;
if(!n.toPrint){n=new nhn.map.sharing.PrintMarker(n,n.options)
}l=g(n,m,k,o);
switch(j){case"Sprite":h(l,n,o);
break;
case"Text":a(l,n,o);
break
}}function h(l,m,n){var p=m.toPrint(),j=m.point,k=null,o;
if(j.toInner){j=j.toInner()
}if("imgOrder" in p){o=p.imgOrderY||0;
k=p.imgOrder+[",",o," "].join("")
}else{k=p.spriteOffsets+" "
}if(!n){l.points+=[j.x,",",j.y," "].join("");
l.spriteOffsets+=k
}else{l.points=[j.x,",",j.y," "].join("");
l.spriteOffsets=k
}}function a(k,l,m){var n=l.toPrint(),j=l.point;
if(!m){k.points+=[j.x,",",j.y," "].join("");
k.texts+=n.text+" "
}else{k.points=[j.x,",",j.y," "].join("");
k.texts=n.text+" "
}}function d(k){var l=k.toPrint(),j=l.size;
return[l.url,j.width,j.height].join("")
}function g(n,m,j,o){var k=null,l;
l=d(n);
k=j[l];
if(!k&&!o){k=e(n,m);
j[l]=k
}if(o){k=e(n,m);
j[l+"_"+n.point.x+"_"+n.point.y]=k
}return k
}function e(p,o){var q=p.toPrint(),l=null,k,n,m,j;
o=o||q.type;
k=i(o);
switch(k){case"Sprite":n=q.spriteSize;
m=n.marginX||q.size.width;
j=n.marginY||q.size.height;
l={mode:"Sprite",url:q.url,width:m,height:j,offsetX:q.offset.width,offsetY:q.offset.height,zIndex:q.zIndex,spriteOffsets:"",points:""};
break;
case"Text":l={mode:"Text",url:q.url,width:q.size.width,height:q.size.height,offsetX:q.offset.width,offsetY:q.offset.height,zIndex:q.zIndex,texts:"",points:""};
break
}return l
}function i(k){var j=null;
switch(k){case"Sprite":case"DirectionsStep":case"transport":case"BUS":case"SUBWAY":case"DINING":case"CAFE":case"CONVENIENCE":case"PARKING":case"OIL":case"MART":case"STORE":case"ACCOMMODATION":case"CINEMA":case"SPORT":case"HOSPITAL":case"BANK":case"POST":case"GOVERNMENT":case"NewNormal":j="Sprite";
break;
case"Text":case"NumberStep":j="Text";
break
}return j
}}());
(function(){var c=iron.ns("nhn.map.sharing");
c.PrintMapDataRefinery=function(){};
c.PrintMapDataRefinery.refine=function(j){var g=j.print,f,e,h;
for(h=0;
h<g.length;
h++){e=g[h];
f=e.name;
if(f==="interestZone"){g.splice(h--,1);
continue
}if("icons" in e){e.icons=d(e.icons)
}}};
function d(f){var g=[],j=null,h=null,e;
for(e=0;
e<f.length;
e++){h=a(f[e]);
j=b(f[e]);
j&&g.push({HIGHTLIGHT_ZINDEX:f[e].HIGHTLIGHT_ZINDEX,PREFIX_ID:f[e].PREFIX_ID,defaultIcon:{},group:f[e].group,icon:{},id:f[e].id,siForcedSelection:f[e].siForcedSelection,offset:{},options:f[e].options,point:{x:f[e].point.x,y:f[e].point.y},title:f[e].title,zIndex:f[e].zIndex,printType:h,printIcon:j})
}return g
}function a(e){var f=e.printType;
if(!f){f=e.getPrintType?e.getPrintType():e.getType()
}return f
}function b(e){if(e.printIcon){return e.printIcon
}else{if(e.toPrint){return e.toPrint()
}}return null
}}());
(function(){var c=iron.ns("nhn.map.sharing"),g="BUS_STATION",b="ADDRESS";
c.PrintInfoWindowDataRefinery=function(){};
c.PrintInfoWindowDataRefinery.refine=function(p,o,l){var m=p.print,n=o.MarkerType,k;
k=new nhn.mapcore.LatLng(o.y,o.x);
m=f(m,o,l);
if(k){p.map.lat=k.y;
p.map.lng=k.x
}p.service=[];
if(n===b){p.service=[{name:"search",data:{type:"ADDRESS"},selected:{type:"address",id:o.MarkerInfo.id.split("_")[1],index:0,item:o},menu:"LOCATION"}]
}else{if(n!==g){p.service=[{name:"search",data:{type:"SITE_1",list:[{id:o.id,name:o.name,index:"0"}],_searchById:true},selected:{type:"site",id:o.id,index:"0",item:null},menu:"LOCATION"}]
}}p.print=m
};
function f(l,o,k){var m=o.MarkerType===g?"infowindow":"search",n=null,p;
n=d(o,k);
if(n!==null){p=[{name:m,icons:n}]
}return p
}function d(n,l){var m=n.MarkerType,k=null;
switch(m){case b:k=j(n);
break;
case g:k=i(n);
break;
default:k=a(n,l)
}return k
}function a(n,l){var k=new nhn.mapcore.LatLng(n.y,n.x),m=n.poiInfo,p,o;
if(l&&m&&m.hasPolygon){p=m.polygon.shapeKey.shapeID;
o=l["SEARCH_SITE_"+k.x+"_"+k.y+"_"+p];
o=$.extend({},o);
delete o.drawings
}return[{id:"SITE_"+n.id,options:{point:k,poiInfo:m,_polygonParam:o},point:k.toInner(),title:n.name,zIndex:1,printType:"Sprite",printIcon:{type:"Sprite",offset:{width:9,height:27},size:{width:19,height:27},spriteSize:{width:500,height:27,marginX:30,marginY:27},imgOrder:0,url:"https://ssl.pstatic.net/static/maps2/icons/pins_s_spot.png",zIndex:1}}]
}function j(n){var k=new nhn.mapcore.LatLng(n.y,n.x),m=n.MarkerInfo||{},p=m.id,l=m.options||{},o=l._polygonParam;
return[{id:p,title:n.name,point:k.toInner(),options:{point:k,_polygonParam:o},printType:"Sprite",printIcon:{type:"Sprite",imgOrder:0,offset:{width:12,height:37},size:{width:24,height:37},spriteSize:{width:300,height:40,marginX:24,marginY:37},spriteClass:"sp_pin",url:"https://ssl.pstatic.net/static/maps/ux2013/icons/sp_pins_default_over.png"},zIndex:1}]
}function i(n){var l=nhn.map.bus.TrafficMarkerUtil.createTempTrafficMarker(n),m,o,k;
m=h(l);
o=e(m);
k=[{HIGHTLIGHT_ZINDEX:m.HIGHTLIGHT_ZINDEX,PREFIX_ID:m.PREFIX_ID,defaultIcon:{},group:m.group,icon:{},id:m.id,siForcedSelection:m.siForcedSelection,offset:{},options:m.options,point:{x:m.point.x,y:m.point.y},title:m.title,zIndex:m.zIndex,printType:o,printIcon:m.toPrint()}];
return k
}function h(k){return k.toPrint?k:new c.PrintMarker(k,k.options)
}function e(k){return k.getPrintType?k.getPrintType():k.getType()
}}());
(function(){var c=iron.ns("nhn.map.sharing");
c.ExportDataFatory=function(){};
c.ExportDataFatory.create=function(h,j,d,g,f,i){var e={walkRoute:0,bicycleRoute:0};
if(j==="LOCATION"){c.LocationDataFactory.create(e,h)
}else{if(j==="ROUTE"){c.RouteDataFactory.create(e,h)
}}b(e,h,d,g,f,i);
a(e,h);
return e
};
function b(e,h,d,g,f,i){e.location=d;
e.mapImageSrc="";
e.query=g;
e.mapUrl=f;
e.tileType=i;
e.cadastral=h.map.cadastral
}function a(d,f){var e=f.panorama;
if(!e){return
}d.mapUrl=e.restoreUrl;
d.panorama=e
}}());
(function(){var d=iron.ns("nhn.map.sharing");
d.LocationDataFactory=function(){};
d.LocationDataFactory.create=function(i,k){var j;
i.menu="location";
j=a(k.service,"search");
if(!j){return
}i.currentTab="notab";
i.type="nodata";
i.result={};
h(i,j);
b(i,j);
c(i,j);
f(i,j);
g(i,j)
};
function g(i,j){if(j.data&&j.data.adultKeywordYN&&j.data.adultKeywordYN==="1"){i.isAdultKeyword=true
}else{i.isAdultKeyword=false
}}function f(i,j){if(j.selected){i.hasSelected=true;
i.selected=j.selected
}else{i.hasSelected=false
}}function c(i,j){if(i.type!=="nothing"&&i.type!=="nodata"){i.result[i.type]=j.data[i.type]
}}function h(i,k){var j;
if(k.data){j=k.data.type;
i.type=e(j);
i.currentTab=i.type
}}function b(i,j){switch(i.type){case"region":if(j.data.region){i.type="nothing"
}if(j.selected&&j.selected.item&&!j.selected.item.address){j.selected.item.address=j.selected.item.name;
j.selected.item.title=j.selected.item.address
}break;
case"spot":j.data.spot=j.data.region;
break
}}function e(j){var i;
switch(j){case"REGION_HOME":case"REGION_2":case"REGION_POINT":i="region";
break;
case"BUS":i="bus";
break;
case"REGION_1":case"SITE_1":case"SITE_2":case"SITE_3":i="site";
break;
case"ADDRESS":i="address";
break;
case"POI":i="poi";
break;
default:i="nodata"
}return i
}function a(m,j){var k,l;
if(!m){return false
}for(k=0,l=m.length;
k<l;
k++){if(m[k].name===j){return m[k]
}}}}());
(function(){var d=iron.ns("nhn.map.sharing"),a={drive:h,publicTransit:b,bicycle:i,walk:f},j={type:"nodata",result:{}};
d.RouteDataFactory=function(){};
d.RouteDataFactory.create=function(l,o){var k=c(o),m,n;
if(k===null){l.menu="route-";
l.type="nodata";
l.result={};
return
}m=k.item;
l.menu=l.type="route";
n=k.type;
a[n](l,m)
};
function c(p){var n=p.service,o=n.length,m=null,k,l;
for(l=0;
l<o;
l++){k=n[l].name;
if(k==="route"){m=n[l];
break
}}return m
}function h(k,l){var m=j;
if(l){m={menu:"route-car",result:l,startTitle:l.StartTitle,endTitle:l.EndTitle}
}$.extend(k,m)
}function b(k,l){var m=j;
if(l&&!e(l)){m={menu:"route-transport",result:$.extend({},l),startTitle:l.StartTitle,endTitle:l.EndTitle};
nhn.map.service.TransportUtil.setTransportPathwalkInfo(m.result)
}$.extend(k,m)
}function i(m,n){var o=j,l,k;
if(n&&n.summary){l=n.summary;
k=g(l);
o={menu:"route-bicycle",bicycleRoute:1,result:n,startTitle:k.start,endTitle:k.end}
}$.extend(m,o)
}function f(m,n){var o=j,l,k;
if(n&&n.summary){l=n.summary;
k=g(l);
o={menu:"route-walk",walkRoute:1,result:n,startTitle:k.start,endTitle:k.end}
}$.extend(m,o)
}function e(k){return k&&k.path&&k.error
}function g(k){return{start:k.startPoint.name,end:k.endPoint.name}
}}());
(function(){var b=iron.ns("nhn.map.sharing");
b.ImageDataFactory=function(){};
b.ImageDataFactory.create=function(m,h,g,e,k){var d=m.map,f=h.menu||"",l,i,j="static";
if(h.type==="route"){j="dynamic"
}c(d,e,k,g,j);
if(f.indexOf("ROUTE")>-1){b.SharingUtil.deleteByNameFromMapData(m,"print","bus")
}else{if(f.indexOf("LOCATION")>-1){i=b.SharingUtil.findByNameFromMapData(m,"print","search");
i=b.SharingUtil.findByNameFromMapData(m,"print","interestZone");
if(i){i.icons=[]
}}}if(f==="layer"){if(h.type==="bus"){l=b.SharingUtil.findByNameFromMapData(m,"print","bus");
m.print=[l]
}else{m.print=a(h.selected)
}}l=b.SharingUtil.findByNameFromMapData(m,"print","bus");
if(l){l.icons=[]
}if(m.service){delete m.service
}return m
};
function a(g){var i=[],j="0,0",f=g.item.posExact!=null&&g.item.posExact!="1",e=g.item.poiInfo&&g.item.poiInfo.hasRoad===true;
if(f){j="3,0"
}else{if(e){j="1,0"
}}if(g){var h=nhn.mapcore.CoordConverter.fromLatLngToInner(new nhn.mapcore.LatLng(g.item.y,g.item.x));
var d=h.x+","+h.y;
i[0]={};
i[0].name="search";
i[0].icons=[];
i[0].icons[0]={mode:"Sprite",url:"https://ssl.pstatic.net/static/maps2/icons/pins_spot.png",height:37,width:31,offsetX:13,offsetY:37,points:d,spriteOffsets:j,zIndex:"55"}
}return i
}function c(h,g,d,j,i){if(!h){return
}var f=h.bound,e;
e=b.SharingUtil.calcBoundInfo(g,d,f,i,{level:j});
h.dlevel=e.level;
h.bound=e.bound;
h.width=g;
h.height=d;
h.warning=0
}}());
(function(){var o=iron.ns("nhn.map.sharing"),k="/local/siteview.nhn?code=",f={BUS:u,BUS_STATION:r,POI:p,ADDRESS:b,REGION:b,ROUTE:m,SUBWAY:j,SITE:j,SPOT:j,AD:j};
o.InfowindowDataFactory=function(){};
o.InfowindowDataFactory.create=function(w,y,v,C){var B=g(y.MarkerType),x=i(y,v.clone(),C);
if(y.MarkerType==="ROUTE"){return x.item
}var z={menu:"layer",type:B,currentTab:"notab",tileType:"normal"},A;
c(B,z,x);
if(z.type==="address"){A=false
}else{A=s(w,y,z,v)
}if(!A){t(y,z,v,"")
}z.mapImageSrc="";
return z
};
o.InfowindowDataFactory.createExportData=function(v,w,B){var A=g(v.MarkerType),x=i(v,w.clone(),B);
if(v.MarkerType==="ROUTE"){return x.item
}var y={menu:"layer",type:A,currentTab:"notab",tileType:"normal"},z;
c(A,y,x);
if(y.type==="address"){z=false
}else{z=s("splugin",v,y,w)
}if(!z){t(v,y,w,"")
}y.mapImageSrc="";
return y
};
function s(w,x,y,v){var z,A;
if(!w||!x.id){return false
}v=v.clone();
switch(w){case"mail":case"cafe":case"blog":case"memo":case"calendar":case"me2Post":case"facebook":case"twitter":case"copyUrl":case"sms":case"splugin":v.setData("pinType","site");
v.setData("pinId",x.id);
v.setData("x",x.x);
v.setData("y",x.y);
A=v.toURL(["dlevel","pinType","pinId","x","y","zOrder","zoneID"]);
y.mapUrl=A;
z=true;
break;
default:z=false
}return z
}function t(w,x,v,z){var y=w.MarkerType;
switch(y){case"ADDRESS":case"REGION":case"BUS_STATION":x.mapUrl=x.selected.item.restoreUrl;
break;
case"BUS":x.mapUrl=x.selected.restoreUrl;
break;
default:v=v.clone();
x.mapUrl=v.toURL();
x.query=z
}}function c(x,w,v){$.extend(w,{result:{},hasSelected:true,selected:v});
if(x==="site"){w.result={site:{list:[v.item]}}
}}function i(w,v,A){var x=w.MarkerType,y=null;
var z={type:x,index:"0"};
y=f[x](w,v,z,A);
z.item=y;
return z
}function u(x,w,y){var v=x.bus,z=v.busID,A;
w.setData("busId",z);
A=w.toURL(["busId"]);
$.extend(y,{restoreUrl:A,hasSelectedStation:v.hasSelectedStation,selectedStationID:v.selectedStationID});
return{id:z,name:v.busNo,busStartPoint:v.busStartPoint,busEndPoint:v.busEndPoint,busFirstTime:v.busFirstTime,busLastTime:v.busLastTime,busIntervalTime:v.busIntervalTime}
}function r(w,v){var x=null;
v.setData("x",w.x);
v.setData("y",w.y);
v.setData("stationId",w.stationID);
x=v.toURL(["dlevel","x","y","stationId"]);
return{stationID:w.stationID||w.id,displayID:w.stationDisplayID||w.arsID,x:w.x,y:w.y,restoreUrl:x,address:w.stationAddress||w.address,stationDisplayName:w.stationDisplayName||w.name}
}function p(v){return{id:v.id,name:v.name,display:v.name,address:v.address,x:v.x,y:v.y}
}function b(x,w){var z=null,A=x.fullAddress,y=x.rcode||x.rCode,v=(typeof x.isDetailAddress==="undefined"?x.isJibunAddress:x.isDetailAddress);
w.setData("lat",x.y);
w.setData("lng",x.x);
w.setData("query",A);
w.setData("type","ADDRESS");
w.setData("tab",1);
w.setData("isNewAddress",x.isNewAddress);
w.setData("isDetailAddress",v);
w.setData("rcode",y);
z=w.toURL(["dlevel","lat","lng","query","type","tab","isDetailAddress","isNewAddress","rcode"]);
return{name:x.name,display:x.displayName||x.name,address:x.address,fullAddress:A,mappedAddress:x.mappedAddress,restoreUrl:z,x:x.x,y:x.y,isDetailAddress:v,isNewAddress:x.isNewAddress,rcode:y}
}function e(A){var x=A.substr(0,4),y=A.substr(4,2),w=A.substr(6,2),v=A.substr(8,2),z=A.substr(10,2);
return[x,"-",y,"-",w," ",v,":",z].join("")
}function d(y){var z=null,x="",w="";
var v=function(A){x=(A.location)?A.location.split(","):A.split(",");
if(x.length===2){w=A.address
}else{w=x[2]
}z=new nhn.mapcore.LatLng(x[1],x[0]).toInner();
return{name:w,x:z.x,y:z.y}
};
if(y instanceof Array){return y.map(v)
}return v(y)
}function a(v){var x=[],w=[],y=0;
v.forEach(function(A){var z=A.steps;
z.forEach(function(B){if(B.steps){x=x.concat(B.steps)
}else{x.push(B)
}})
});
x.forEach(function(A){if(typeof A.key==="string"&&A.key==="way_dup"){return false
}if(typeof A.key!=="string"){A.index=y++
}var z="";
z=A.guide.instructions.replace(/b/g,"strong");
w.push({point:[{key:(typeof A.key==="string")?A.key:A.index,name:z,guide:{no:A.guide.turn||0,name:""},road:{congestion:(A.traffic&&A.traffic.congestion)||0,distance:(A.summary&&A.summary.distance)||0}}]})
});
return w
}function l(z){var C=z.mileage,A=z.summary,w=z.points,B=d(A.start||w.start),y=d(A.end||w.destination),v=d(A.waypoints||w.via),x={};
x=(A)?{searchOption:A.searchOption||0,trafficInfo:(A.traffic_time&&e(A.traffic_time))||0,totalDistance:(A.distance||A.totalDistance)||0,totalTime:(A.duration||A.totalTime)||0,mileage:C.mileage||0,car:C.kindOfCarId||0,taxi:A.taxi_fare||0,gasPayPerLiter:C.gasPayPerLiter||0,tollgate:A.toll||0,startTitle:B&&B.name,endTitle:y&&y.name,startPoint:B,endPoint:y,wayPoint:v}:null;
return x
}function m(w,v){var z=w.type,y=h(w),x=n(w);
return{walkRoute:(z==="walk")?1:0,bicycleRoute:(z==="bicycle")?1:0,type:(x)?"route":"nodata",menu:(z==="drive")?"route-car":("route-"+z),result:{summary:x,route:y},startTitle:x.startTitle||x.startPoint.name,endTitle:x.endTitle||x.endPoint.name,mapUrl:v.toURL()}
}function h(v){var w=v.type;
switch(w){case"walk":return v.result.route;
case"publicTransit":return v.item;
default:return a(v.item)
}}function n(v){var w=v.type;
switch(w){case"walk":return v.result.summary;
case"publicTransit":return{startTitle:v.item.StartTitle,endTitle:v.item.EndTitle};
default:return l(v)
}}function j(v){var w=q(v.id);
return{id:v.id,name:v.name,display:v.name,tel:v.phone,ppc:"",category:v.category,coupon:v.coupon||"",address:v.address,posExact:v.posExact,restoreUrl:w,couponURL:w,x:v.x,y:v.y,poiInfo:v.poiInfo,type:""}
}function q(y){var w=location.href.replace(/(\?|#).*$/g,"")+"?",x=w.match(/^(http|https|mms):\/\/([^\/]*)/i)[0],v=y.match(/\d+/);
return[x,k,v].join("")
}function g(w){var v=w.toLowerCase();
if(v==="subway"){v="site"
}return v
}}());
(function(){var c=iron.ns("nhn.map.sharing");
c.SocialDataFactory=function(){};
c.SocialDataFactory.create=function(h,g){var j=g.selected.item,l=g.mapUrl,i=j.poiInfo,k=null;
switch(h){case"BUS_STATION":k=b(j);
break;
case"BUS":k=a(j,g);
break;
case"ADDRESS":case"REGION":h="drt";
k=e(j);
break;
default:if(i&&i.hasRoad){h="poi";
k=f(j)
}else{h="drt";
k=d(j)
}}return $.extend(k,{type:h,mapUrl:l,category:j.category})
};
function b(g){return{display:g.stationDisplayName,displayID:g.displayID,address:g.address}
}function a(h,g){return $.extend({mapUrl:g.selected.restoreUrl},h)
}function e(g){return{display:g.display,tel:g.tel}
}function f(m){var i=m.name,h=m.tel,l=m.poiInfo,g=null,k=null,j=null,n=null;
if(l.hasRoad){g=l.road.detail;
k=g.beginAddress;
j=g.destAddress;
n=g.wholeDistance
}return{display:i,tel:h,beginAddress:k,destAddress:j,distance:n}
}function d(g){return{display:g.display,tel:g.tel,address:g.address}
}}());
(function(){var b=iron.ns("nhn.map.sharing"),e="URL이 복사되었습니다.\n원하는 곳에 붙여넣기(Ctrl+Shift+V)하세요.",d="아래의 URL을 복사(Ctrl+C)하여\n원하는 곳에 붙여넣기(Ctrl+V)하세요.",h="HTML 코드가 클립보드에 저장되었습니다.",k="mrt*u.copy",c="mrt*u.copyhtml";
b.MapCopyLayer=iron.Class({inherit:iron.Dispatcher},{_element:null,initialize:function(){this._element=$("#urlCopyLayer");
this._mapControl=$(".map_ctrl");
this._urlShortenBtn=$("input._btnShortURL",this._element);
this._urlShortenFailMsg=$("div._fail_message",this._element);
this._urlEl=$("a._urlText",this._element);
this._urlCopyBtn=$("a._btnURLCopy",this._element)[0];
this._htmlCopyContainer=$("li._copy_tag",this._element);
this._htmlEl=$("a._html_tag",this._element);
this._htmlCopyBtn=$("a._btnTagCopy",this._element)[0];
this._attachEvent();
nhn.map.DOMCache.getBody().on("click",i.bind(this))
},open:function(n){f();
this._enableSelection(this._mapControl);
this.setMapURL(n);
this._element.show()
},_enableSelection:function(n){n.attr("unselectable","").css({"user-select":"all","-o-user-select":"","-moz-user-select":"all","-khtml-user-select":"","-webkit-user-select":"text","-ms-user-select":"text"}).off("selectstart",false)
},close:function(){this._mapControl.disableSelection();
this.hideErrorMsg();
this._element.hide();
this._urlShortenBtn.attr("checked",null)
},showCopyTagElement:function(){this._htmlCopyContainer.show();
this._element.css("bottom","")
},hideCopyTagElement:function(){this._htmlCopyContainer.hide();
this._element.css("bottom","-73px")
},getElement:function(){return this._element[0]
},showErrorMsg:function(){this._urlShortenFailMsg.show()
},hideErrorMsg:function(){if(this._urlShortenFailMsg.is(":visible")){this._urlShortenFailMsg.hide()
}},setMapURL:function(n){this._urlEl.text(n)
},setHTMLTag:function(n){this._htmlEl.text(n)
},_attachEvent:function(){this._element.on("click","a._close",a.bind(this)).on("click","input._btnShortURL",j.bind(this)).on("click","a._btnURLCopy",this.onClickURLCopy.bind(this)).on("click","a._btnTagCopy",this.onClickTagCopy.bind(this)).on("click","a._preview_html",m.bind(this))
},onClickURLCopy:function(n){l(this._urlEl,this._urlCopySuccess.bind(this,n),this._urlCopyFailure.bind(this,n))
},onClickTagCopy:function(n){l(this._htmlEl,this._tagCopySuccess.bind(this,n),this._tagCopyFailure.bind(this,n))
},_urlCopySuccess:function(n){g(n,k);
a.apply(this);
setTimeout(function(){alert(e)
},0)
},_urlCopyFailure:function(o,n){g(o,k);
prompt(d,n)
},_tagCopySuccess:function(n){g(n,c);
a.apply(this);
setTimeout(function(){alert(h)
},0)
},_tagCopyFailure:function(o,n){g(o,c);
prompt(d,n)
}});
function l(r,s,u){if(+$.browser.version===8){window.clipboardData.setData("Text",r.text());
s();
return
}if(!document.queryCommandSupported||!document.queryCommandSupported("copy")){u(r.text());
return
}var o=document.createRange(),q=window.getSelection(),p=r.get(0),n;
o.selectNodeContents(p);
q.removeAllRanges();
q.addRange(o);
try{n=document.execCommand("copy")
}catch(t){}if(n){s()
}else{u(r.text())
}}function a(){this.dispatch("close_map_copy_layer")
}function j(o){var n=!!$(o.target).attr("checked");
this.dispatch("set_short_url",{checked:n})
}function m(){this.dispatch("open_preview")
}function i(o){var n=$(o.target),p=this._element.is(":visible");
if(!p){return
}if(n.is("embed")||n.hasClass("spmc_url")||n.parents("#urlCopyLayer").length>0){return
}if(p){a.apply(this)
}}function g(o,n){nhn.map.LogClick({element:o.element,event:o,acode:n})
}function f(){nhn.map.LogPV("copyurl")
}}());
(function(){var a=iron.ns("nhn.map.sharing"),b="save_map_dialog";
a.SharingDialog=iron.Class({inherit:nhn.map.service.Dialog,singleton:true},{confirmSaveMap:function(e){var c=this;
var d=nhn.mapservice.TemplateRepos.get(b).process();
this.showDialog(d);
this.dialog.on("click.userInteraction","a._ok",function(g){g.preventDefault();
var f=$("input",c.dialog).filter(":checked");
if(f.hasClass("_saveAll")){c._close();
e(true)
}else{c._close();
e(false)
}}).on("click.userInteraction","a._cancel",function(f){f.preventDefault();
c._close()
}).on("click.userInteraction","input",function(){$("input",c.dialog).attr("checked",false);
$(this).attr("checked",true)
}).on("click.userInteraction","a._close",function(f){f.preventDefault();
c._close()
})
},_close:function(){this.dialog.off(".userInteraction");
this.hideDialog()
}});
a.SaveMapDialog=function(d){var c=a.SharingDialog.getInstance();
c.confirmSaveMap(d)
}}());
iron.ns("nhn.map.sharing").ToolboxView=iron.Class({initialize:function(){this.inited=false;
this._tpl=nhn.mapservice.TemplateRepos.get("sharing_toolbox");
this._prepareDOM();
this._bindEvent()
},_prepareDOM:function(){this._el=$(this._tpl.process());
this._btnPrint=this._el.find("a.spmc_print")
},_bindEvent:function(){this._el.on("click","a.spmc_print",this._onClickPrint.bind(this)).on("click","a.spmc_capture",this._onClickSaveMap.bind(this)).on("click","a.spmc_url",this._onClickCopyUrl.bind(this))
},show:function(){this._el.show()
},hide:function(){this._el.hide()
},hidePrint:function(){this._btnPrint.hide()
},showPrint:function(){this._btnPrint.show()
},getElement:function(){return this._el[0]
},_onClickPrint:function(a){a.preventDefault();
this.$service().printMap()
},_onClickSaveMap:function(a){a.preventDefault();
this.$service().saveMap()
},_onClickCopyUrl:function(a){a.preventDefault();
this.$service().openURLCopyLayer()
},_listenService:function(){this.$service().attach({toolbox_init:this._onToolboxInit.bind(this),show_toolbox:this.show.bind(this),hide_toolbox:this.hide.bind(this),hide_print:this._onHidePrint.bind(this),show_print:this._onShowPrint.bind(this)})
},_onToolboxInit:function(c){if(this._container===c.container){return
}var a=c.container,b=this.getElement();
a.appendChild(b);
this._container=a
},_onHidePrint:function(){this.hidePrint()
},_onShowPrint:function(){this.showPrint()
}});
nhn.mapservice.TemplateRepos.add({sharing_toolbox:function(_d_){var p=[];
with(_d_){p.push('<div class="mc_receive">  <h3 class="blind">지도 옵션</h3>  <a href="#" class="spmc spmc_print nclicks(mrt.print)" title="인쇄">인쇄</a>  <a href="#" class="spmc spmc_capture nclicks(mrt.savemap)" title="지도저장">지도저장</a>  <a href="#" class="spmc spmc_url nclicks(mrt.copyurl)" title="URL복사">URL복사</a>  <div id="urlCopyLayer" class="ly_copy_url" style="display:none">   <h5 class="blind">URL,HTML태그 복사 레이어</h5>   <ul>    <li>     <h3 class="urlcopy_h3">URL 복사</h3>     <div class="urlcopy_h3sub">      <input type="checkbox" id="urlCopy001" class="input_chk _btnShortURL nclicks(mrt*u.short)"><label for="urlCopy001">단축URL</label>      <a href="#" class="urlcopy_help_a">       <span class="spmc spmc_help">도움말</span>       <span class="ly_urlcopy_help">        <span class="ly_urlcopy_help_txt">원본 URL을 짧게 줄여 글자 수 제한이 있는<br>SNS에서 손쉽게 활용하실 수 있습니다.</span>        <span class="spmc spmc_arrow_up"></span>       </span>      </a>     </div>     <div class="fail_mes _fail_message" style="display:none"><span class="spmc spmc_info"></span> 단축 URL 생성에 실패했습니다. 잠시 후 다시 시도해 주세요.</div>     <div class="ii_url_wrap">      <a href="#" class="ii_url _urlText" style="cursor:default;"></a><a href="#" class="spmc spmc_copy _btnURLCopy nclicks(mrt*u.copy)">복사</a>     </div>    </li>    <li class="_copy_tag">     <h3 class="urlcopy_h3">HTML 태그 복사</h3>     <a href="#" class="ucp">      <span class="ucp_act">열기</span>      <span class="ucp_layer">지도 이미지(일반, 위성, 거리뷰, 실내뷰 등 지도<br>서비스 내 이미지)에 대한 저작권은 당사에게<br>있으며, <strong>복사된 이미지는 비상업적용도로만<br>이용을 허락</strong>합니다.<span class="spmc spmc_arrow_up"></span></span>     </a>     <span class="bar">|</span> <a href="#" class="html_prv _preview_html nclicks(mrt*u.chghtml)">HTML 태그 편집기 및 미리보기 <span class="spmc spmc_arr"></span></a>     <div class="ii_url_wrap">      <a href="#" class="ii_url _html_tag" style="cursor:default;"></a><a href="#" class="spmc spmc_copy _btnTagCopy">복사</a></div>    </li>   </ul>   <a href="#" class="spmc spmc_close _close nclicks(mrt*u.close)" title="URL,HTML태그 복사 레이어 닫기">URL,HTML태그 복사 레이어 닫기</a>   <span class="opac_line"></span>  </div> </div>')
}return p.join("")
},save_map_dialog:function(_d_){var p=[];
with(_d_){p.push('<div class="spot_alert">  <h3>지도화면 저장</h3>  <div class="spot_alert_content">   <ul class="save_chk">    <li>     <input type="radio" id="saveChk003" name="" class="input_rdo _saveAll nclicks(mrt*s.withinfo)" checked="true"><label for="saveChk003">모든 정보를 이미지 저장</label>     <div class="save_prv"><img src="https://ssl.pstatic.net/static/maps/ux2013/thumb_savechk03.png" width="110" height="73" alt=""></div>    </li>    <li>     <input type="radio" id="saveChk004" name="" class="input_rdo _saveMapOnly nclicks(mrt*s.imgonly)"><label for="saveChk004">지도만 이미지 저장</label>     <div class="save_prv"><img src="https://ssl.pstatic.net/static/maps/ux2013/thumb_savechk04.png" width="110" height="73" alt=""></div>    </li>   </ul>  </div>  <div class="spot_alert_act">   <a href="#" class="spm spm_alert_check _ok nclicks(mrt*s.ok)">확인</a>   <a href="#" class="spm spm_alert_cancel _cancel nclicks(mrt*s.cancel)">취소</a>  </div>  <a href="#" class="spm spm_spot_close _close nclicks(mrt*s.close)" title="레이어 닫기">레이어 닫기</a>  <span class="opac_line"></span> </div>')
}return p.join("")
},copy_tag:function(_d_){var p=[];
with(_d_){p.push('<table cellpadding="0" cellspacing="0" width="',mapBoxWidth,'"> <tr> <td style="border:1px solid #cecece;"><a href="',mapUrl,'" target="_blank"><img src="',mapImagePath,'" width="',mapWidth,'" height="',mapHeight,'" alt="지도 크게 보기" title="지도 크게 보기" border="0" style="vertical-align:top;"/></a></td> </tr> <tr> <td>  <table cellpadding="0" cellspacing="0" width="100%">  <tr>  <td height="30" bgcolor="#f9f9f9" align="left" style="padding-left:9px; border-left:1px solid #cecece; border-bottom:1px solid #cecece;">   <span style="font-family: tahoma; font-size: 11px; color:#666;">',mapDate,'</span>&nbsp;<span style="font-size: 11px; color:#e5e5e5;">|</span>&nbsp;<a style="font-family: dotum,sans-serif; font-size: 11px; color:#666; text-decoration: none; letter-spacing: -1px;" href="',mapUrl,'" target="_blank">지도 크게 보기</a>  </td>  <td width="98" bgcolor="#f9f9f9" align="right" style="text-align:right; padding-right:9px; border-right:1px solid #cecece; border-bottom:1px solid #cecece;">   <span style="float:right;"><span style="font-size:9px; font-family:Verdana, sans-serif; color:#444;">&copy;&nbsp;</span>&nbsp;<a style="font-family:tahoma; font-size:9px; font-weight:bold; color:#2db400; text-decoration:none;" href="http://www.nhncorp.com" target="_blank">NAVER Corp.</a></span>  </td>  </tr>  </table> </td> </tr> ');
if(cadastral){p.push(' <tr>  <td style="padding:10px 0;font-family:dotum, sans-serif;font-size:12px;line-height:18px;vertical-align:middle"><img src="https://ssl.pstatic.net/static/maps2/ico_info8.gif" width="12" height="11" alt="" style="vertical-align:top"> 본 지적편집도의 내용은 변경 및 취소될 수 있으니 참고용으로만 사용하시기 바랍니다.</td> </tr> ')
}p.push(" </table>")
}return p.join("")
},copy_panorama_tag:function(_d_){var p=[];
with(_d_){p.push('<table cellpadding="0" cellspacing="0" width="',width,'">  <tr>  <td style="border:1px solid #cecece;"><iframe src="',panoramaURL,'" width="',width,'" height="',height,'"></iframe></td>  </tr>  <tr>  <td>   <table cellpadding="0" cellspacing="0" width="100%">   <tr>   <td height="30" bgcolor="#f9f9f9" align="left" style="padding-left:9px; border-left:1px solid #cecece; border-bottom:1px solid #cecece;">    <span style="font-family: tahoma; font-size: 11px; color:#666;">',exportDate,'</span>&nbsp;<span style="font-size: 11px; color:#e5e5e5;">|</span>&nbsp;<a style="font-family: dotum,sans-serif; font-size: 11px; color:#666; text-decoration: none; letter-spacing: -1px;" href="',returnURL,'" target="_blank">지도 크게 보기</a>   </td>   <td width="98" bgcolor="#f9f9f9" align="right" style="text-align:right; padding-right:9px; border-right:1px solid #cecece; border-bottom:1px solid #cecece;">    <span style="float:right;"><span style="font-size:9px; font-family:Verdana, sans-serif; color:#444;">&copy;&nbsp;</span>&nbsp;<a style="font-family:tahoma; font-size:9px; font-weight:bold; color:#2db400; text-decoration:none;" href="http://www.nhncorp.com" target="_blank">NAVER Corp.</a></span>   </td>   </tr>   </table>  </td>  </tr> </table>')
}return p.join("")
}});(function(){var a=iron.ns("nhn.map.perimeter");
a.Constant={API:{SPOT_SERVER_URL:"search2/interestSpot.nhn",CATE_SERVER_URL:"search2/getCategoryList.nhn",TRAFFIC_SERVER_URL:"pubtrans/searchSpotWithinRectangle.nhn?",SITE_INFO_URL:"search2/getSiteInfo.nhn?"},TRAFFIC_MARKER_LIMIT_NUMBER:[15,15,20,20,20,40,40,70,70,100,100,100,100,100],SPOT_MARKER_LIMIT_NUMBER:[15,15,20,20,20,40,40,70,70,100,100,100,100,100],TRAFFIC_TYPE:["TRANSPORT","TRANSPORT_BUS","TRANSPORT_SUBWAY"],TRAFFIC_NUMBER:{TRANSPORT_BUS:1,TRANSPORT_SUBWAY:2},SHOW_LEVEL_GROUP:{TRANSPORT_SUBWAY:{SubwayStationLayer:{showLevelLow:1,showLevelHigh:15}},TRANSPORT_BUS:{PerimeterTraffic:{showLevelLow:1,showLevelHigh:15}}},DEFAULT_LEVEL:11,LIMITED_ZOOM_LEVEL:10,DEFAULT_CATEGORY_CLASS:"spm_ais_dining",TYPE_TO_NUMBER:{TRANSPORT_BUS:0,TRANSPORT_SUBWAY:1,DINING:2,DINING_KOREAN:3,DINING_JAPANESE:4,DINING_ASIAN:5,DINING_WESTERN:6,DINING_FAMILY:7,DINING_SNACK:8,DINING_FASTFOOD:9,DINING_PIZZA:10,DINING_CHICKEN:11,DINING_BAR:12,DINING_ETC:13,CAFE:14,CAFE_COFFEE:15,CAFE_BAKERY:16,CAFE_ICECREAM:17,CAFE_ETC:18,CONVENIENCE:19,CONVENIENCE_LAUNDRY:20,CONVENIENCE_PCBANG:21,CONVENIENCE_NORAEBANG:22,CONVENIENCE_BEAUTY:24,CONVENIENCE_SAUNA:25,CONVENIENCE_STUDY:26,CONVENIENCE_MENDING:27,CONVENIENCE_FLOWER:28,PARKING:27,OIL_OIL:28,OIL_GS:29,OIL_SK:30,OIL_SOIL:40,OIL_OILBANK:41,OIL_E1:42,OIL_SKLPG:43,OIL_GSLPG:44,OIL_SOILLPG:45,OIL_OILBANKLPG:46,OIL_ETC:47,MART:48,STORE:49,ACCOMMODATION:50,CINEMA:51,SPORT:52,HOSPITAL:53,HOSPITAL_GENERAL:54,HOSPITAL_OPHTHALMOLOGY:55,HOSPITAL_DERMATOLOGY:56,HOSPITAL_ORTHOPEDICS:57,HOSPITAL_PEDIATRICS:58,HOSPITAL_INTERNAL:59,HOSPITAL_OTOLARYNGOLOGY:60,HOSPITAL_DENTAL:61,HOSPITAL_GYNECOLOGY:62,HOSPITAL_ETC:63,HOSPITAL_PUBLIC:64,HOSPITAL_PHARMACY:65,HOSPITAL_ORIENTAL:66,BANK:67,BANK_SHINHAN:68,BANK_KB:69,BANK_KEB:70,BANK_IBK:71,BANK_WOORI:72,BANK_HANA:73,BANK_SC:74,BANK_CITY:75,BANK_HSBC:76,BANK_KN:77,BANK_KJ:78,BANK_DG:79,BANK_BUSAN:80,BANK_JB:81,BANK_JEJU:82,BANK_NONGHYUP:83,BANK_SUHYUP:84,BANK_CHUKHYUP:85,BANK_SHINHYUP:86,BANK_FSB:87,BANK_KFCC:88,BANK_ETC:89,GOVERNMENT:91,PARKING_PUBLIC:92,PARKING_SHARING:93,PARKING_TRANSFER:94,BANK_ATM:95,BANK_NH:96,DINING_CHINESE:97,BANK_KDB:98,OIL_GAS:99,TRANSPORT:100,ACCOMMODATION_HOTEL:101,ACCOMMODATION_PENSION:102,ACCOMMODATION_RESORT:103,ACCOMMODATION_GUESTHOUSE:104,ACCOMMODATION_CAMPING:105,ACCOMMODATION_MOTEL:106,ACCOMMODATION_INN:107,ACCOMMODATION_YOUTHHOSTEL:108,ACCOMMODATION_RESIDENCE:109,ACCOMMODATION_ETC:110},PERIMETER_MARKER_NCLICK:{DINING:"map*m.restaurant",CAFE:"map*m.cafe",CONVENIENCE:"map*m.life",PARKING:"map*m.park",OIL:"map*m.gas",MART:"map*m.mart",STORE:"map*m.cvs",ACCOMMODATION:"map*m.accom",CINEMA:"map*m.movie",SPORT:"map*m.sports",HOSPITAL:"map*m.medical",BANK:"map*m.bank",GOVERNMENT:"map*m.office"}}
}());
(function(b){var a=iron.ns("nhn.map.perimeter");
a.PerimeterInfoDAO=iron.Class({inherit:nhn.map.AbstractDAO},{_defaultParams:{},initialize:function(){nhn.map.AbstractDAO.apply(this,arguments)
},_onResponseSuccess:function(e,d,c){this.dispatch("responseSuccess",{response:c});
e&&e(c,d)
},_onResponseError:function(){this.dispatch("responseError")
},requestInterestSpot:function(f,h,e,g,c){if(!f||f.length===0){return
}var d=this.getSpotParams(f,h,e);
this._request({url:a.Constant.API.SPOT_SERVER_URL,data:d,successRule:{result:true,error:false},success:this._onResponseSuccess.bind(this,g||null,f),error:this._onResponseError.bind(this,c||null)})
},addRequestParam:function(c,d){},removeRequestParam:function(c){},getSpotParams:function(d,g,f){var c=a.Constant.SPOT_MARKER_LIMIT_NUMBER[g-1],e=b.extend({},this._defaultParams);
e=b.extend(e,{type:d.toUpperCase(),boundary:f[0]+";"+f[3]+";"+f[2]+";"+f[1],pageSize:c});
return e
},requsetCategoryList:function(d,c){this._request({url:a.Constant.API.CATE_SERVER_URL,successRule:{result:true,error:false},success:this._onResponseCateList.bind(this,d),error:this._onResponseError.bind(this,c||null)})
},_onResponseCateList:function(d,c){d&&d(c.result)
}})
})(jQuery);
(function(){var e=iron.ns("nhn.map.perimeter"),d=e.Constant,f=d.TRAFFIC_TYPE,c=f[0],a=f[1],b=f[2];
e.PerimeterInfoService=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{_currentMarkers:[],_currentPerimeterType:"",_bound:[0,0,0,0],_clickedMarkerId:null,_noticeShowed:false,initialize:function(){this.UID=iron.guid()
},_onActivate:function(){if(this.isActivating()){return
}this._bindEvent();
this._requsetCategoryList(function(g){this.dispatch("activate",{categoryList:g});
this._onReady()
}.bind(this))
},_onDeactivate:function(){if(!this.isActivating()){return
}this._unbindEvent();
this.dispatch("deactivate")
},_requsetCategoryList:function(g){this.$PerimeterInfoDAO().requsetCategoryList(g)
},_bindEvent:function(){nhn.map.DOMCache.getDocument().on("click."+this.UID,this._clickDocument.bind(this))
},_unbindEvent:function(){nhn.map.DOMCache.getDocument().off("click."+this.UID)
},addRequestParam:function(g,h){this.$PerimeterInfoDAO().addRequestParam(g,h)
},removeRequestParam:function(g){this.$PerimeterInfoDAO().removeRequestParam(g)
},_onMsgAppReday:function(){this.activate()
},isNoticeShowed:function(){return this._noticeShowed
},setNoticeShowedState:function(g){this._noticeShowed=g
},_listenMap:function(){this.$MapConnector().attach({MSG_APP_READY:this._onMsgAppReday.bind(this),CHANGE_MAP_DONE:this._changeMapDone.bind(this),SET_MAP_SIZE:this._onSetMapSize.bind(this)})
},_listenBridge:function(){this.$bridge().attach({OPEN_MARKER_DUP_LAYER:this._openMarkerDupLayer.bind(this),UNSELECT_TRAFFIC_MARKER:this._unselectClickedMarker.bind(this)})
},_listenPanorama:function(){this.$Panorama().attach({beforeOpenPanorama:function(){this._runWhenReady("_beforeOpenPanorama")
}.bind(this),afterClosePanorama:this._afterClosePanorama.bind(this)})
},_listenDirectionsInputToolLayer:function(){this.$DirectionsInputToolLayer().attach({show:function(){this._runWhenReady("_adjustPosition",arguments)
}.bind(this),hide:function(){this._runWhenReady("_adjustPosition",arguments)
}.bind(this),updateWaypoint:function(){this._runWhenReady("_adjustPosition",arguments)
}.bind(this),addWaypoint:function(){this._runWhenReady("_adjustPosition",arguments)
}.bind(this),removeWaypoint:function(){this._runWhenReady("_adjustPosition",arguments)
}.bind(this)})
},_adjustPosition:function(g){this.dispatch("adjustPosition",{layerWidth:g.width})
},_onSetMapSize:function(){this.requestInterestSpot(this._currentPerimeterType)
},_changeMapDone:function(i){var h=this._isActivePerimeter(),j=this._isActiveBusSubway(),g=this._isPerimeterAllowedLevel();
window.clearTimeout(this.drawMarkerTimer);
delete this.drawMarkerTimer;
this.dispatch("CHANGE_MAP_DONE",{isAllowedLevel:g,isActivePerimter:h,isActiveTraffic:j});
if(h===false||j===true){return
}if(!g){this.removeMarkers(this._currentMarkers);
this.closeInfoWindow()
}else{if(!this._isBoundarySame(this._bound,i.bound)){this.drawMarkerTimer=window.setTimeout(function(){this.drawMarkers(this._currentPerimeterType,false)
}.bind(this),10)
}}this._bound=i.bound
},_clickDocument:function(g){this.dispatch("CLICK_DOCUMENT",{event:g.originalEvent})
},resetPerimeter:function(){this.$PerimeterInfoDAO().abortLast();
this.dispatch("RESET_PERIMETER_SELECTION");
this.$Bus().deactivate();
this.$Subway().deactivate();
this._perimeterData=null
},_openMarkerDupLayer:function(){window.clearTimeout(this.drawMarkerTimer)
},setCurrentPerimeterType:function(g){g=g.toUpperCase();
this._currentPerimeterType=g;
if(g.indexOf(c)!==0){this.$Bus().deactivate();
this.$Subway().deactivate()
}else{if(g===c){this.$Bus().activate();
this.$Subway().activate()
}else{if(g===a){this.$Subway().deactivate();
this.$Bus().activate()
}else{if(g===b){this.$Bus().deactivate();
this.$Subway().activate()
}}}}},resetPerimeterSelection:function(){this._currentPerimeterType=null
},getCurrentPerimeterType:function(){return this._currentPerimeterType
},getZoomLevel:function(){return this.$MapConnector().getLevel()
},gatherMapData:function(h){var g=this._currentPerimeterType;
if(g===a||g===c){h("print",{name:"interestZone",icons:this.$Bus().getMarkerList()})
}else{h("print",{name:"interestZone",icons:this._currentMarkers})
}},gatherUrlParameter:function(){var h={},g=this._currentPerimeterType;
if(g&&g.length>0){h.perimeter=e.Constant.TYPE_TO_NUMBER[this._currentPerimeterType]
}return h
},_unselectClickedMarker:function(){var g=this._findMarker(this._clickedMarkerId);
if(g){g.unselect()
}},_findMarker:function(k){var g=null;
for(var h=0,j=this._currentMarkers.length;
h<j;
h++){if(this._currentMarkers[h].id==k){g=this._currentMarkers[h];
break
}}return g
},_isBoundarySame:function(g,k){var j=true;
for(var h=0;
h<4;
h++){if(g[h]!=k[h]){j=false;
break
}}return j
},_responseInterestSpot:function(k,j){var g,i=k.result==null?{}:k.result.site,h=this._findMarkerToDelete(this._currentMarkers,i);
g=this._deleteDuplecatedResult(this._currentMarkers,i);
this.removeMarkers(h);
this.addCreatedMarkers(g,j);
this._perimeterData={spots:k.result};
this.filterIndoor();
this.dispatch("response_complete",{perimeterData:k.result})
},_responseErrorInterestSpot:function(){this.resetPerimeter()
},getPerimeterData:function(){return this._perimeterData||null
},drawMarkers:function(i,g,j){i=i.toUpperCase();
if(g){this.closeInfoWindow()
}if(j===true&&this.getZoomLevel()<e.Constant.DEFAULT_LEVEL){this.$MapConnector().setLevel(e.Constant.DEFAULT_LEVEL)
}var h=this._currentPerimeterType||"";
if(h!=i){if(h.indexOf(c)!==0){this.removeMarkers(this._currentMarkers)
}}if(i.indexOf(c)!==0){this._currentPerimeterType=i;
this.requestInterestSpot(i)
}this.setCurrentPerimeterType(i)
},requestInterestSpot:function(i,j,h){var k=nhn.mapcore.CoordConverter.toLatLng(this.$MapConnector().getBound()),g=this.getZoomLevel();
this.$PerimeterInfoDAO().requestInterestSpot(i,g,k,j||this._responseInterestSpot.bind(this),h||this._responseErrorInterestSpot.bind(this))
},removeAllMarkers:function(g){if(g){this.closeInfoWindow();
this._currentPerimeterType=""
}var h=this.$MapConnector();
this._currentMarkers.forEach(function(i){h.removeMarker(i)
});
this._currentMarkers=[];
this.$Bus().deactivate();
this.$Subway().deactivate()
},removeMarkers:function(j){var h={},n=[],g=0,m=this.$MapConnector(),k,l;
for(k=0,l=j.length;
k<l;
k++){h[j[k].id]=j[k];
m.removeMarker(j[k])
}for(k=0,l=this._currentMarkers.length;
k<l;
k++){var o=this._currentMarkers[k].id;
if(!h[o]){n[g++]=this._currentMarkers[k]
}}this._currentMarkers=n
},addCreatedMarkers:function(p,k){var n=this._trimPerimeterType(k),j=e.Constant.PERIMETER_MARKER_NCLICK[n],h=null,m=null,g=this.$MapConnector();
for(var l=0,o=p.length;
l<o;
l++){h=new nhn.mapcore.LatLng(p[l].y,p[l].x);
m=this.createMarker(p[l],n,j);
if(!$("#"+m.id)[0]){this._currentMarkers.push(m);
g.addMarker(m);
m.attach({select:this._onSelectMarker.bind(this,m),unselect:this._onUnselectMarker.bind(this,m)})
}}},createMarker:function(k,j,g){var i=this._createMarkerOption(k,j),h=new nhn.map.service.PerimeterMarker(i,g);
return h
},getMarkers:function(){return this._currentMarkers||[]
},closeInfoWindow:function(){var g=this.$InfoWindowFacade().getCurrentWindow();
if(g&&g instanceof nhn.map.service.PerimeterInfoWindow){this.$InfoWindowFacade().close()
}},_createMarkerOption:function(i,g){var h;
h={title:i.name,id:"PerimeterInfo_"+i.id,type:(i.couponExist==="1")?"COUPON":g,point:new nhn.mapcore.LatLng(i.y,i.x),siteId:i.id,streetPanorama:i.streetPanorama,couponExist:(i.couponExist==="1"),zIndex:(i.couponExist==="1")?4999:0,indoorMapInfo:i.indoorMapInfo||null};
return h
},_findMarkerToDelete:function(j,g){var n={},h=[],o,k,m;
for(k=0,m=g.length;
k<m;
k++){if(g[k].stationID){o=g[k].stationID
}else{o=g[k].id
}n[o]=g[k]
}for(k=0,m=j.length;
k<m;
k++){var l=j[k].type;
if(e.Constant.TRAFFIC_NUMBER[l]){o=j[k].options.stationId
}else{o=j[k].options.siteId
}if(!n[o]){h.push(j[k])
}}return h
},_deleteDuplecatedResult:function(n,h){var j={},g=[],o,k,m;
for(k=0,m=n.length;
k<m;
k++){var l=n[k].type;
if(e.Constant.TRAFFIC_NUMBER[l]){o=n[k].options.stationId
}else{o=n[k].options.siteId
}j[o]=true
}for(k=0,m=h.length;
k<m;
k++){if(h[k].stationID){o=h[k].stationID
}else{o=h[k].id
}if(!j[o]){g.push(h[k])
}}return g
},_onSelectMarker:function(g){this.$Search().setIsAutoPanning(true);
window.clearTimeout(this.drawMarkerTimer);
var h=g.getInfo();
this._setIndoorStateBy(g);
this.closeInfoWindow();
this._showPerimeterInfoWindow(g);
this._clickedMarkerId=h.id;
this._listenInfoWindowClose();
this.dispatch("select_marker",{marker:g})
},_onUnselectMarker:function(g){this._unlistenInfoWindowClose();
this.closeInfoWindow();
this.dispatch("unselect_marker",{marker:g})
},_showPerimeterInfoWindow:function(g){this.$InfoWindowFacade().open("PERIMETERINFO",{id:g.getInfo().id,MarkerInfo:g.getInfo()})
},_trimPerimeterType:function(i){var g=i.indexOf("_");
var h=null;
if(g==-1){h=i
}else{h=i.substring(0,g)
}return h
},_beforeOpenPanorama:function(){this.dispatch("beforeOpenPanorama");
this._savedCategory=this.getCurrentPerimeterType()||this._savedCategory;
var g=this.$InfoWindowFacade().getCurrentWindow();
if(g){if(g.getType()!=="SUBWAY_ROUTE"){this.resetPerimeter()
}}else{this.resetPerimeter()
}},_afterClosePanorama:function(){this.dispatch("afterClosePanorama");
if(!this._savedCategory){return
}this._bound=this.$MapConnector().getBound();
var g=e.Constant.TYPE_TO_NUMBER[this._savedCategory];
this.restore(g);
delete this._savedCategory
},_checkZoomLevel:function(){return this.$MapConnector().getLevel()>e.Constant.LIMITED_ZOOM_LEVEL
},_convertNumberToType:function(){var g={};
for(var i in e.Constant.TYPE_TO_NUMBER){var h=e.Constant.TYPE_TO_NUMBER[i];
g[h]=i
}return g
},restore:function(h){var g=this._convertNumberToType()[h];
this._runWhenReady("dispatch",["restore",{category:g}]);
if(this._checkZoomLevel()){this.drawMarkers(g,true,true)
}else{this.setCurrentPerimeterType(g);
this.dispatch("restore_complete")
}},_runWhenReady:function(g,h){if(this.isReady()){this[g].apply(this,h||[])
}else{this._readyQueue=this._readyQueue||[];
this._readyQueue.push({methodName:g,args:h})
}},isReady:function(){return this._ready
},_onReady:function(){this._ready=true;
if(!this._readyQueue){return
}this._readyQueue.forEach(function(g){this[g.methodName].apply(this,g.args)
},this);
this._readyQueue=[]
},refresh:function(){var g=this.getCurrentPerimeterType();
g&&this.drawMarkers(g)
},getMarkerById:function(g){return this.$bridge().getMarkerById(g)
},getIconInfo:function(){if(this._currentPerimeterType==a||this._currentPerimeterType==b||this._currentPerimeterType==c){return this._getPerimeterTrafficIcons()
}else{return this._getPerimeterIcons()
}},_getPerimeterIcons:function(){var g=null;
if(!this._currentMarkers||this._currentMarkers.length===0){return g
}var k=this._currentMarkers[0].getIcon();
var h=k.src;
var i=k.size.width;
var o=k.size.height;
var m=k.offset.width;
var l=k.offset.height;
var j=this._currentMarkers.map(function(p){var q=p.getIcon().getSpriteOffset();
return[q.left,q.top]
},this);
var n=this._currentMarkers.map(function(q){var p=q.point;
var r=p.toInner();
return r.x+","+r.y
});
g={url:h,width:i,height:o,offsetX:m,offsetY:l,spriteOffsets:j,points:n.join(" ")};
return g
},_getPerimeterTrafficIcons:function(){var g=null;
var j=this._getPerimeterTrafficInstance();
if(j==null){return g
}var m=[];
j.forEach(function(r){m=m.concat(r.getMarkerList())
});
if(!m||m.length===0){return g
}var l=m[0].getIcon();
var h=l.src;
var i=l.size.width;
var q=l.size.height;
var o=l.offset.width;
var n=l.offset.height;
var k=m.map(function(r){var s=r.getIcon().getSpriteOffset();
return[s.left,s.top]
},this);
var p=m.map(function(s){var r=s.point;
var t=r.toInner();
return t.x+","+t.y
});
g={url:h,width:i,height:q,offsetX:o,offsetY:n,spriteOffsets:k,points:p.join(" ")};
return g
},_isActiveBusSubway:function(){if(this._currentPerimeterType==a||this._currentPerimeterType==b||this._currentPerimeterType==c){return true
}return false
},_isActivePerimeter:function(){return !!this._currentPerimeterType
},_isPerimeterAllowedLevel:function(){return(this.getZoomLevel()>e.Constant.LIMITED_ZOOM_LEVEL)
},_getPerimeterTrafficInstance:function(){var g=null;
if(this._currentPerimeterType==a){g=[this.$Bus()]
}else{if(this._currentPerimeterType==b){g=[this.$Subway()]
}else{if(this._currentPerimeterType==c){g=[this.$Bus(),this.$Subway()]
}}}return g
},onLcsPerimeterPlace:function(){nhn.map.LogPV("place")
},onLcsPerimeterSubway:function(){nhn.map.LogPV("subwaymarker")
},onLcsPerimeterBus:function(){nhn.map.LogPV("busmarker")
},_listenPerimeterBus:function(){this.$Bus().attach({needsCloseInfoWindow:this.closeInfoWindow.bind(this),deactivated:this._onDeactivatedBus.bind(this),response_complete:this._onResponseComplete.bind(this,"bus")})
},_onDeactivatedBus:function(){if(this._perimeterData){delete this._perimeterData.bus;
if(!this._perimeterData.subway){this._perimeterData=null
}}this.closeInfoWindow()
},_listenPerimeterSubway:function(){this.$Subway().attach({needsCloseInfoWindow:this.closeInfoWindow.bind(this),deactivated:this._onDeactivatedSubway.bind(this),response_complete:this._onResponseComplete.bind(this,"subway")})
},_onDeactivatedSubway:function(){if(this._perimeterData){delete this._perimeterData.subway;
if(!this._perimeterData.bus){this._perimeterData=null
}}this.closeInfoWindow()
},_onResponseComplete:function(g,h){if(!h.perimeterData||!h.perimeterData.result){return
}if(!this._perimeterData||(!this._perimeterData.bus&&!this._perimeterData.subway)){this._perimeterData={}
}this._perimeterData[g]=h.perimeterData.result;
this.dispatch("response_complete",{perimeterData:h.perimeterData.result})
},_listenInfoWindowClose:function(){this._unlistenInfoWindowClose();
this.$InfoWindowFacade().attach({"close.perimeter":this._onCloseInfoWindow.bind(this)})
},_onCloseInfoWindow:function(j){var h=j.infoWindow;
if(h instanceof nhn.map.service.PerimeterInfoWindow){var i=h.getModel().getData().MarkerInfo,g=this._findMarker(i.id);
g&&g.unselect()
}},_unlistenInfoWindowClose:function(){this.$InfoWindowFacade().detach("close.perimeter")
},_listenIndoor:function(){this.$Indoor().attach({floorInfo_changed:this.filterIndoor.bind(this),currentFloor_changed:this.filterIndoor.bind(this),leaveIndoorMap:this.unfilterIndoor.bind(this)})
},enterIndoorMap:function(g,h){if(typeof g==="object"){var i=g;
h=i.zOrder;
g=i.zoneId
}this.$Indoor().enterIndoorMap(g,h)
},_setIndoorStateBy:function(h){var i=h.getInfo()||{},m=this.$Indoor(),k=m.isIndoorMode(),l=i.options?i.options.indoorMapInfo:null;
if(!l&&k){m.leaveIndoorMap()
}else{if(l){if(!k){this.enterIndoorMap(l)
}else{var g=m.getIndoorID(),j=m.getCurrentFloor();
if(l.zOrder!==j||l.zoneId!==g){this.enterIndoorMap(l)
}}}}if(h.unmask){h.unmask()
}},filterIndoor:function(){var h=this.$Indoor();
if(!this.getCurrentPerimeterType()||!h.isIndoorMode()){return
}var g=this.getPerimeterData();
if(g&&g.spots){this._mask(g.spots)
}},unfilterIndoor:function(){if(this._masked){this.getMarkers().forEach(function(g){g.unmask()
})
}this._masked=false
},_mask:function(j){if(!j.site){return
}var m=this.$Indoor(),h=m.getIndoorID(),i=m.getCurrentFloor();
var l=j.site||[];
l.forEach(function(o){var r=o.indoorMapInfo,q=r&&r.zoneId===h,p=q&&r.zOrder===i,n=this.getMarkerById("PerimeterInfo_"+o.id);
if(!n){return
}if(r){if(!q){n.unmask()
}else{if(!p){n.mask()
}else{n.unmask()
}}}else{n.unmask()
}}.bind(this));
var g=this.$InfoWindowFacade().getCurrentModel();
if(g){var k=(g.getData()||{}).indoorMapInfo;
if(!k||k.zOrder!==i||k.zoneId!==h){this.$InfoWindowFacade().close()
}}this._masked=true
}})
}());
(function(){var a=iron.ns("nhn.map.perimeter");
a.PerimeterInfoController=iron.Class({inherit:nhn.map.Dispatcher},{initialize:function(){this._serviceListener={activate:this._onActivate.bind(this),deactivate:this._onDeactivate.bind(this),restore:this._restore.bind(this),beforeOpenPanorama:this._beforeOpenPanorama.bind(this),afterClosePanorama:this._afterClosePanorama.bind(this),adjustPosition:this._adjustPosition.bind(this),CHANGE_MAP_DONE:this._changeMapDone.bind(this),RESET_PERIMETER_SELECTION:this._resetPerimeter.bind(this)};
this._viewListener={selectTop:this._select.bind(this),unselectTop:this._unselect.bind(this),selectSub:this._select.bind(this),unselectSub:this._unselect.bind(this),addRequestParam:this._addRequestParam.bind(this),removeRequestParam:this._removeRequestParam.bind(this),reset:this._reset.bind(this),refresh:this._refresh.bind(this)}
},_listenService:function(){this.$PerimeterInfoService().attach(this._serviceListener)
},_onActivate:function(c){this.$PerimeterInfoView().activate(c.categoryList);
this.$PerimeterInfoView().attach(this._viewListener)
},_onDeactivate:function(){this.$PerimeterInfoView().deactivate();
this.$PerimeterInfoView().detach(this._viewListener)
},_adjustPosition:function(c){this.$PerimeterInfoView().adjustPosition(c.layerWidth)
},_beforeOpenPanorama:function(){this.$PerimeterInfoView().hide()
},_afterClosePanorama:function(){this.$PerimeterInfoView().show()
},_select:function(d){var c=d.category;
b(c);
this.$PerimeterInfoService().drawMarkers(d.category,true,true)
},_unselect:function(){this.$PerimeterInfoService().removeAllMarkers(true);
this.$PerimeterInfoService().resetPerimeterSelection()
},_addRequestParam:function(c){this.$PerimeterInfoService().addRequestParam(c.paramName,c.paramValue)
},_removeRequestParam:function(c){this.$PerimeterInfoService().removeRequestParam(c.paramName)
},_changeMapDone:function(i){var d=this.$PerimeterInfoService(),h=i.isAllowedLevel,f=i.isActivePerimter,c=i.isActiveTraffic,g=d.isNoticeShowed();
if(!f&&!c){return
}if(!h&&!g){this._showNoticeAlert()
}else{if(h){this._hideNoticeAlert()
}}},_showNoticeAlert:function(){this.$PerimeterInfoService().setNoticeShowedState(true);
this.$PerimeterInfoView().showMsgZoom()
},_hideNoticeAlert:function(){this.$PerimeterInfoService().setNoticeShowedState(false);
this.$PerimeterInfoView().hideMsgZoom()
},_refresh:function(){this.$PerimeterInfoService().refresh()
},_reset:function(){this.$PerimeterInfoService().removeAllMarkers(true)
},_resetPerimeter:function(){this.$PerimeterInfoView().reset()
},_restore:function(c){this.$PerimeterInfoView().restore(c.category)
}});
function b(c){var d;
switch(c){case"transport_subway":d="subwaymarker";
break;
case"transport":case"transport_bus":d="busmarker";
break;
default:d="place"
}nhn.map.LogPV(d)
}}());
(function(d){var b=iron.ns("nhn.map.perimeter"),f=21;
b.PerimeterInfoView=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{_CATEGORIES:{transport:{sub:true},dining:{sub:true},cafe:{sub:true},bank:{sub:true},parking:{sub:true},oil_oil:{sub:true},mart:{},store:{},accommodation:{sub:true},cinema:{},sport:{},hospital:{sub:true},convenience:{sub:true},government:{}},_curCategory:null,_curMenu:null,_zoomTimer:null,_mainCategory:["transport","dining"],initialize:function(){this._UID=iron.guid()
},_prepareDOM:function(g){this._wrapper=d(nhn.mapservice.TemplateRepos.get("perimeter_info").process(g));
var h=this.$MapConnector();
h.getStaticContainer().appendChild(this._wrapper[0]);
this._foldedLayer=d("div._perimeter_menu_folded",this._wrapper);
this._defaultCategory=d("a.spm:nth-child(1)",this._foldedLayer);
this._customizeCategory=d("a.spm:nth-child(2)",this._foldedLayer);
this._unfoldedLayer=d("div._perimeter_menu",this._wrapper);
this._msgZoom=d("div._msg_zoom",this._wrapper);
this._placeIcons=this._unfoldedLayer.find(" > ul > li");
this._placeIcons.each(function(k,m){var j=d(m),l=j.data("category");
this._CATEGORIES[l].main=j
}.bind(this));
h.addIgnoreClass("ai");
h.addIgnoreClass("aimore")
},_onActivate:function(g){this._prepareDOM(g);
this._bindEvent()
},_onDeactivate:function(){this._unbindEvent()
},showMsgZoom:function(){var g=this;
this._msgZoom.show();
this._zoomTimer=setTimeout(function(){g.hideMsgZoom()
},3000)
},hideMsgZoom:function(){this._msgZoom.hide();
if(this._zoomTimer){clearTimeout(this._zoomTimer);
this._zoomTimer=null
}},_bindEvent:function(){this._wrapper.on("mouseenter."+this._UID,"div._perimeter_menu_folded",this._onMouseEnterFoldedLayer.bind(this)).on("mouseenter."+this._UID,"div._perimeter_menu",this._onMouseEnterUnfoldedLayer.bind(this)).on("mouseleave."+this._UID,"div._perimeter_menu",this._onMouseLeaveUnfoldedLayer.bind(this)).on("click."+this._UID,"li._category",this._onClickCategory.bind(this)).on("click."+this._UID,"ul._menu > li",this._onClickMenu.bind(this)).on("mouseleave."+this._UID,"div.ai_layer",c.bind(this));
nhn.map.DOMCache.getDocument().on("click",this._onDocumentClick.bind(this))
},_unbindEvent:function(){this._wrapper.off("."+this._UID)
},_onMouseEnterFoldedLayer:function(){this.openLayer()
},_onMouseEnterUnfoldedLayer:function(){this._clearTimeout()
},_onMouseLeaveUnfoldedLayer:function(i){var g=this,h=d(i.relatedTarget);
var j=h.attr("src")||"";
if(j.indexOf("pinpoint")>0){return
}this._timer=setTimeout(function(){if(!g._isOpenedLastMenu()){g.closeLayer()
}g._timer=null
},200)
},_clearTimeout:function(){clearTimeout(this._timer);
this._timer=null
},_onClickCategory:function(j){var h=d(j.currentTarget),k=d(j.target),i=h.data("category"),g=h.data("sub");
if(k.parents("ul._menu").length>0){return
}if(g){this._onClickSubMenuCategory(i,h)
}else{this._onClickSingleMenuCategory(i,h)
}},_onClickSingleMenuCategory:function(j,g){var i=g.hasClass("on"),h=this._getOpenCategory();
this._unselectPrevSelection(h);
if(i){this.dispatch("unselectTop",{category:j});
this._clearSelection()
}else{g.addClass("on");
this.dispatch("selectTop",{category:j});
this._setFoldedMenuIcon(j);
this._curCategory=g
}},_onClickSubMenuCategory:function(i,g){var h=this._getOpenCategory();
e(g);
if(g.hasClass("on")){a(g);
return
}this._unselectPrevSelection(h);
g.addClass("on");
this._setFoldedMenuIcon(i);
this._setSelectMenu(i);
this.dispatch("selectTop",{category:i});
this._curCategory=g
},_unselectPrevSelection:function(g){if(this._curCategory){this._curCategory.removeClass("down").removeClass("on")
}else{if(g){g.removeClass("down")
}}},_onClickMenu:function(j){j.preventDefault();
var i=d(j.currentTarget),k=i.data("subtype"),h=k.split("_")[0],g;
if(i.hasClass("on")){this.dispatch("unselectSub",{category:k});
this._clearSelection();
return
}this._curMenu&&this._curMenu.removeClass("on");
this._curMenu=i;
i.addClass("on");
if(!this._curCategory){if(h==="oil"){h="oil_oil"
}g=this._getOpenCategory();
g.addClass("on");
this._setFoldedMenuIcon(h);
this._curCategory=g
}this.dispatch("selectSub",{category:k})
},_clearSelection:function(){this._curMenu&&this._curMenu.removeClass("on");
this._curCategory&&this._curCategory.removeClass("on");
this._curMenu=null;
this._curCategory=null;
this._resetFoldedMenuIcon()
},_setSelectMenu:function(i){var g=this._CATEGORIES[i].main,h=d("li[data-subtype="+i+"]",g);
this._curMenu&&this._curMenu.removeClass("on");
h.addClass("on");
this._curMenu=h
},_setFoldedMenuIcon:function(g){if(g===null){this._resetFoldedMenuIcon()
}else{if(this._mainCategory[0]===g){this._defaultCategory.addClass("on");
this._changeIcon(this._customizeCategory,this._mainCategory[1])
}else{this._defaultCategory.removeClass("on");
this._changeIcon(this._customizeCategory,g);
this._customizeCategory.addClass("on")
}}},_changeIcon:function(h,i){var g=i;
if(g==="oil_oil"){g="gas"
}h.attr("class","spm spm_ais_"+g);
h.data("category",i)
},_refreshFoldedMenuIcon:function(){var h=this._getFirstSecondIcon();
this._mainCategory=[];
for(var g=0;
g<h.length;
g++){this._mainCategory.push()
}this._mainCategory=[h[0].data("category"),h[1].data("category")]
},_resetFoldedMenuIcon:function(){this._changeIcon(this._defaultCategory,this._mainCategory[0]);
this._changeIcon(this._customizeCategory,this._mainCategory[1])
},_getOpenCategory:function(){var i=null,g=null;
for(var h in this._CATEGORIES){i=this._CATEGORIES[h].main;
if(i.hasClass("down")){g=i;
break
}}return g
},_onDocumentClick:function(h){var g=d(h.target);
if(g.closest("div.aimore").size()===0){this.closeLayer()
}},openLayer:function(){this._unfoldedLayer.show();
this.dispatch("open")
},closeLayer:function(){var g=this._getOpenCategory();
g&&g.removeClass("down");
this._unfoldedLayer.hide();
this.dispatch("close")
},adjustPosition:function(h){var g=(h===0)?6:9;
this._wrapper.css("left",(h+g))
},getSelectedMenu:function(){var g=this._curCategory,i=this._curMenu,j=null,h;
if(!g){return null
}h=g.data("sub");
if(h){j=i.data("subtype")
}else{j=g.data("category")
}return j
},addRequestParam:function(g,h){this.dispatch("addRequestParam",{paramName:g,paramValue:h})
},removeRequestParam:function(g){this.dispatch("removeRequestParam",{paramName:g})
},_isOpenedLastMenu:function(){return this._selectedMenu&&this._selectedMenu.hasClass("down")
},toggleNoticeLayer:function(){},_showNoticeAlert:function(){},_hideNoticeAlert:function(){},_getZoomLevel:function(){return this.$MapConnector().getLevel()
},deactivateCategory:function(g){if(!(g instanceof Array)){g=[g]
}g.forEach(function(h){this._CATEGORIES[h].main.hide()
},this)
},activateCategory:function(g){if(!(g instanceof Array)){g=[g]
}g.forEach(function(h){this._CATEGORIES[h].main.show()
},this)
},show:function(){this._wrapper.show()
},hide:function(){this._wrapper.hide()
},refresh:function(){this.dispatch("refresh")
},reset:function(){this._clearSelection();
this._resetFoldedMenuIcon();
this._curMenu=null;
this._curCategory=null;
this.dispatch("reset")
},_getFirstSecondIcon:function(){var h=[],j=0,i,g;
for(i in this._CATEGORIES){g=this._CATEGORIES[i].main;
if(g.css("display")!=="none"){h.push(g);
j++;
if(j===2){break
}}}return h
},_getCategoryNameByTypeName:function(g){if(g.toLowerCase().indexOf("oil")>-1){return"oil_oil"
}var h=g.split("_")[0].toLowerCase();
return h
},restore:function(j){var k=this._getCategoryNameByTypeName(j),i=this._CATEGORIES[k],h=i.main,j=j.toLowerCase(),g=h.find("li[data-subtype="+j+"]");
h.addClass("on");
g&&g.addClass("on");
this._curCategory=h;
this._curMenu=g;
this._setFoldedMenuIcon(k)
}});
function e(h){var g=h.data("sub");
if(g){h.toggleClass("down")
}}function c(){var g=this._getOpenCategory();
if(!this._curMenu){if(this._menuTimer){clearTimeout(this._menuTimer)
}this._menuTimer=setTimeout(function(){g.removeClass("down")
},100)
}}function a(h){var j=d("div.ai_layer > div.ai_layer_scroll",h),i=d("ul._menu > li.on",j),g,k,l;
if(i.length===0){return
}g=parseInt(j.css("height"),10),k=i.position().top;
l=k-g;
if(l>=0){j.scrollTop(l+f)
}}})(jQuery);
nhn.mapservice.TemplateRepos.add({perimeter_info:function(_d_){var p=[];
with(_d_){p.push('<div class="around_info _none_pointer">  <h3 class="blind">주변정보</h3>  <!-- 선택된 항목은 \'on\' className -->  <!-- 두번째 항목은 사용자가 선택한 항목, className의 prefix가 변경. -->   <div class="ai _perimeter_menu_folded">   <a href="#" class="spm spm_ais_transport" data-category="bus">버스</a>   <a href="#" class="spm spm_ais_dining" data-category="dining">음식점</a>   <a href="#" class="spm spm_ais_more">주변정보 더보기</a>   <span class="ai_opac"></span>   <div class="ai_mes _msg_zoom" style="display:none">    <p>현재의 지도 배율에서는 주변정보를 볼 수 없습니다.<br><em>지도를 좀 더 높은 배율</em>로 확대하면, 주변정보를<br>보실 수 있습니다.</p>    <span class="spmh spmh_arrow_left"></span>    <span class="opac_line"></span>   </div>  </div>   <div class="aimore _perimeter_menu" style="display:none;">   <div class="aimore_line">    <span class="t"></span><span class="r"></span><span class="b"></span><span class="l"></span>   </div>   <ul>    ');
for(var i=0,len=categories.length;
i<len;
++i){p.push("    ");
var callID=categories[i].callId.toLowerCase(),className=callID,name=categories[i].name,nClickPrefixId=categories[i].nClickPrefixId,nClickId=categories[i].nClickId,useAllCategory=categories[i].useAllCategory,subCategories=categories[i].categories;
if(callID==="oil"){callID="oil_oil";
className="gas"
}else{if(callID==="busandsubway"){p.push('    <!-- [D] : 활성화시 on 추가 -->    <li class="bus _category" data-category="transport" data-sub="true">     <a href="#" class="spm spm_ai_bus nclicks(mtr.bus)" data-title="버스/지하철">버스/지하철</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">버스/지하철 레이어</h4>       <ul class="_menu">        <li data-subtype="transport" class="nclicks(mtr*s.all)"><a href="#">전체</a></li>        <li data-subtype="transport_bus" class="nclicks(mtr*s.bus)"><a href="#">버스</a></li>        <li data-subtype="transport_subway" class="nclicks(mtr*s.subway)"><a href="#">지하철</a></li>       </ul>      </div>     </div>    </li>    ');
continue
}}p.push('     <li class="',className,' _category" data-category="',callID,'" data-sub="',!!subCategories,'">     <a href="#" class="spm spm_ai_',className," nclicks(mtr.",nClickId,')" data-title="',name,'">',name,"</a>      ");
if(subCategories&&subCategories.length){p.push('      <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">',name,' 레이어</h4>       <ul class="_menu">         ');
if(useAllCategory){p.push('        <li data-subtype="',className,'" class="nclicks(',nClickPrefixId,'.all)"><a href="#">전체</a></li<name />        ')
}p.push("         ");
for(var j=0,jlen=subCategories.length;
j<jlen;
++j){p.push("        ");
var callID=subCategories[j].callId,className=callID.toLowerCase(),name=subCategories[j].name,nClickId=subCategories[j].nClickId;
p.push('         <li data-subtype="',className,'" class="nclicks(',nClickPrefixId,".",nClickId,')"><a href="#">',name,"</a></li>         ")
}p.push("        </ul>      </div>     </div>      ")
}p.push("    </li>     ")
}p.push("   </ul>  </div> </div>")
}return p.join("")
},test:function(_d_){var p=[];
with(_d_){p.push('<div class="around_info _none_pointer">  <h3 class="blind">주변정보</h3>  <!-- 선택된 항목은 \'on\' className -->  <!-- 두번째 항목은 사용자가 선택한 항목, className의 prefix가 변경. -->   <div class="ai _perimeter_menu_folded">   <a href="#" class="spm spm_ais_transport" data-category="bus">버스</a>   <a href="#" class="spm spm_ais_dining" data-category="dining">음식점</a>   <a href="#" class="spm spm_ais_more">주변정보 더보기</a>   <span class="ai_opac"></span>   <div class="ai_mes _msg_zoom" style="display:none">    <p>현재의 지도 배율에서는 주변정보를 볼 수 없습니다.<br><em>지도를 좀 더 높은 배율</em>로 확대하면, 주변정보를<br>보실 수 있습니다.</p>    <span class="spmh spmh_arrow_left"></span>    <span class="opac_line"></span>   </div>  </div>   <div class="aimore _perimeter_menu" style="display:none;">   <div class="aimore_line">    <span class="t"></span><span class="r"></span><span class="b"></span><span class="l"></span>   </div>   <ul>    <!-- [D] : 활성화시 on 추가 -->    <li class="bus _category" data-category="transport" data-sub="true">     <a href="#" class="spm spm_ai_bus nclicks(mtr.bus)" data-title="버스/지하철">버스/지하철</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">버스/지하철 레이어</h4>       <ul class="_menu">        <li data-subtype="transport" class="nclicks(mtr*s.all)"><a href="#">전체</a></li>        <li data-subtype="transport_bus" class="nclicks(mtr*s.bus)"><a href="#">버스</a></li>        <li data-subtype="transport_subway" class="nclicks(mtr*s.subway)"><a href="#">지하철</a></li>       </ul>      </div>     </div>    </li>    <!-- [D] : 선택레이어 열었을시 down 추가 -->    <li class="dining _category" data-category="dining" data-sub="true">     <a href="#" class="spm spm_ai_dining nclicks(mtr.restaurant)" data-title="음식점">음식점</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">음식점 레이어</h4>       <ul class="_menu">        <li data-subtype="dining" class="nclicks(mtr*r.all)"><a href="#">전체</a></li>        <li data-subtype="dining_korean" class="nclicks(mtr*r.korean)"><a href="#">한식</a></li>        <li data-subtype="dining_japanese" class="nclicks(mtr*r.japanese)"><a href="#">일식</a></li>        <li data-subtype="dining_chinese"class="nclicks(mtr*r.chinese)"><a href="#">중식</a></li>        <li data-subtype="dining_asian" class="nclicks(mtr*r.asia)"><a href="#">아시안퓨전</a></li>        <li data-subtype="dining_western" class="nclicks(mtr*r.western)"><a href="#">서양음식</a></li>        <li data-subtype="dining_family" class="nclicks(mtr*r.family)"><a href="#">패밀리레스토랑</a></li>        <li data-subtype="dining_snack" class="nclicks(mtr*r.snack)"><a href="#">분식</a></li>        <li data-subtype="dining_fastfood" class="nclicks(mtr*r.fastfood)"><a href="#">패스트푸드</a></li>        <li data-subtype="dining_pizza" class="nclicks(mtr*r.pizza)"><a href="#">피자</a></li>        <li data-subtype="dining_chicken" class="nclicks(mtr*r.chichken)"><a href="#">치킨</a></li>        <li data-subtype="dining_bar" class="nclicks(mtr*r.bar)"><a href="#">주점</a></li>        <li data-subtype="dining_etc" class="nclicks(mtr*r.etc)"><a href="#">기타 음식점</a></li>       </ul>      </div>     </div>    </li>    <li class="cafe _category" data-category="cafe" data-sub="true">     <a href="#" class="spm spm_ai_cafe nclicks(mtr.cafe)" data-title="카페">카페</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">카페 레이어</h4>       <ul class="_menu">        <li data-subtype="cafe" class="nclicks(mtr*c.all)"><a href="#">전체</a></li>        <li data-subtype="cafe_coffee" class="nclicks(mtr*c.coffee)"><a href="#">카페</a></li>        <li data-subtype="cafe_bakery" class="nclicks(mtr*c.bakery)"><a href="#">제과점</a></li>        <li data-subtype="cafe_icecream" class="nclicks(mtr*c.ice)"><a href="#">아이스크림</a></li>        <li data-subtype="cafe_etc" class="nclicks(mtr*c.etc)"><a href="#">기타 카페</a></li>       </ul>      </div>     </div>    </li>    <li class="accommodation _category" data-category="accommodation" data-sub=true>     <a href="#" class="spm spm_ai_accommodation nclicks(mtr.accom)" data-title="숙박">숙박</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">숙박 레이어</h4>       <ul class="_menu">        <li data-subtype="accommodation" class="nclicks(mtr*a.all)"><a href="#">전체</a></li>        <li data-subtype="accommodation_hotel" class="nclicks(mtr*a.hotel)"><a href="#">호텔</a></li>        <li data-subtype="accommodation_pension" class="nclicks(mtr*a.pension)"><a href="#">펜션,민박</a></li>        <li data-subtype="accommodation_resort" class="nclicks(mtr*a.resort)"><a href="#">리조트,콘도</a></li>        <li data-subtype="accommodation_guesthouse" class="nclicks(mtr*a.guesthouse)"><a href="#">게스트하우스</a></li>        <li data-subtype="accommodation_camping" class="nclicks(mtr*a.camping)"><a href="#">캠핑장</a></li>        <li data-subtype="accommodation_motel" class="nclicks(mtr*a.motel)"><a href="#">모텔</a></li>        <li data-subtype="accommodation_inn" class="nclicks(mtr*a.inn)"><a href="#">여관</a></li>        <li data-subtype="accommodation_youthhostel" class="nclicks(mtr*a.youth)"><a href="#">유스호스텔</a></li>        <li data-subtype="accommodation_residence" class="nclicks(mtr*a.residence)"><a href="#">레지던스</a></li>        <li data-subtype="accommodation_etc" class="nclicks(mtr*a.etc)"><a href="#">기타</a></li>       </ul>      </div>     </div>    </li>    <!-- [D] : 선택레이어 열었을시 down 추가 -->    <li class="hospital _category" data-category="hospital" data-sub=true>     <a href="#" class="spm spm_ai_hospital nclicks(mtr.medical)" data-title="병원,의료">병원,의료</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">병원,의료 레이어</h4>       <ul class="_menu">        <li data-subtype="hospital" class="nclicks(mtr*m.all)"><a href="#">전체</a></li>        <li data-subtype="hospital_general" class="nclicks(mtr*m.general)"><a href="#">종합병원</a></li>        <li data-subtype="hospital_ophthalmology" class="nclicks(mtr*m.ophth)"><a href="#">안과</a></li>        <li data-subtype="hospital_dermatology" class="nclicks(mtr*m.oa)"><a href="#">피부과</a></li>        <li data-subtype="hospital_orthopedics" class="nclicks(mtr*m.orth)"><a href="#">정형외과</a></li>        <li data-subtype="hospital_pediatrics" class="nclicks(mtr*m.pedia)"><a href="#">소아과</a></li>        <li data-subtype="hospital_internal" class="nclicks(mtr*m.intern)"><a href="#">내과</a></li>        <li data-subtype="hospital_otolaryngology" class="nclicks(mtr*m.otorth)"><a href="#">이비인후과</a></li>        <li data-subtype="hospital_dental" class="nclicks(mtr*m.denti)"><a href="#">치과</a></li>        <li data-subtype="hospital_gynecology" class="nclicks(mtr*m.oster)"><a href="#">산부인과</a></li>        <li data-subtype="hospital_etc" class="nclicks(mtr*m.etc)"><a href="#">기타병원</a></li>        <li data-subtype="hospital_public" class="nclicks(mtr*m.hcenter)"><a href="#">보건소</a></li>        <li data-subtype="hospital_pharmacy" class="nclicks(mtr*m.pharmacy)"><a href="#">약국</a></li>        <li data-subtype="hospital_oriental" class="nclicks(mtr*m.oriclinic)"><a href="#">한의원</a></li>       </ul>      </div>     </div>    </li>    <li class="bank _category" data-category="bank" data-sub=true>     <a href="#" class="spm spm_ai_bank nclicks(mtr.bank)" data-title="은행">은행</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">은행 레이어</h4>       <ul class="_menu">        <li data-subtype="bank" class="nclicks(mtr*b.all)"><a href="#">전체</a></li>        <li data-subtype="bank_atm" class="nclicks(mtr*b.atm)"><a href="#">ATM</a></li>        <li data-subtype="bank_kb" class="nclicks(mtr*b.kb)"><a href="#">KB국민은행</a></li>        <li data-subtype="bank_woori" class="nclicks(mtr*b.woori)"><a href="#">우리은행</a></li>        <li data-subtype="bank_shinhan" class="nclicks(mtr*b.shinhan)"><a href="#">신한은행</a></li>        <li data-subtype="bank_nh" class="nclicks(mtr*b.nh)"><a href="#">NH농협은행</a></li>        <li data-subtype="bank_nonghyup" class="nclicks(mtr*b.nacf)"><a href="#">농협</a></li>        <li data-subtype="bank_ibk" class="nclicks(mtr*b.ibk)"><a href="#">IBK기업은행</a></li>        <li data-subtype="bank_hana" class="nclicks(mtr*b.hana)"><a href="#">하나은행</a></li>        <li data-subtype="bank_keb" class="nclicks(mtr*b.exchange)"><a href="#">KEB외환은행</a></li>        <li data-subtype="bank_sc" class="nclicks(mtr*b.sc)"><a href="#">스탠다드차타드은행</a></li>        <li data-subtype="bank_city" class="nclicks(mtr*b.city)"><a href="#">한국씨티은행</a></li>        <li data-subtype="bank_kdb" class="nclicks(mtr*b.kdb)"><a href="#">KDB산업은행</a></li>        <li data-subtype="bank_dg" class="nclicks(mtr*b.daegu)"><a href="#">대구은행</a></li>        <li data-subtype="bank_busan" class="nclicks(mtr*b.pusan)"><a href="#">부산은행</a></li>        <li data-subtype="bank_kj" class="nclicks(mtr*b.kwangju)"><a href="#">광주은행</a></li>        <li data-subtype="bank_kn" class="nclicks(mtr*b.kyoungnam)"><a href="#">경남은행</a></li>        <li data-subtype="bank_jb" class="nclicks(mtr*b.jeonbuk)"><a href="#">전북은행</a></li>        <li data-subtype="bank_jeju" class="nclicks(mtr*b.jeju)"><a href="#">제주은행</a></li>        <li data-subtype="bank_kfcc" class="nclicks(mtr*b.ccc)"><a href="#">새마을금고</a></li>        <li data-subtype="bank_shinhyup" class="nclicks(mtr*b.ncufk)"><a href="#">신협</a></li>        <li data-subtype="bank_suhyup" class="nclicks(mtr*b.nffc)"><a href="#">수협</a></li>        <li data-subtype="bank_chukhyup" class="nclicks(mtr*b.kflc)"><a href="#">축협</a></li>        <li data-subtype="bank_hsbc" class="nclicks(mtr*b.hsbc)"><a href="#">HSBC</a></li>        <li data-subtype="bank_fsb" class="nclicks(mtr*b.fsb)"><a href="#">상호저축은행</a></li>        <li data-subtype="bank_etc" class="nclicks(mtr*b.etc)"><a href="#">기타은행</a></li>       </ul>      </div>     </div>    </li>    <!-- [D] : 선택레이어 열었을시 down 추가 -->    <li class="parking _category" data-category="parking" data-sub=true>     <a href="#" class="spm spm_ai_parking nclicks(mtr.park)" data-title="주차장">주차장</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">주차장 레이어</h4>       <ul class="_menu">        <li data-subtype="parking" class="nclicks(mtr*p.all)"><a href="#">전체</a></li>        <li data-subtype="parking_public" class="nclicks(mtr*p.public)"><a href="#">공영주차장</a></li>        <li data-subtype="parking_sharing" class="nclicks(mtr*p.with)"><a href="#">공용주차장</a></li>        <li data-subtype="parking_transfer" class="nclicks(mtr*p.transfer)"><a href="#">환승주차장</a></li>       </ul>      </div>     </div>    </li>    <!-- [D] : 선택레이어 열었을시 down 추가 -->    <li class="gas _category" data-category="oil_oil" data-sub=true>     <a href="#" class="spm spm_ai_gas nclicks(mtr.gas)" data-title="주유소">주유소</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">주유소 레이어</h4>       <ul class="_menu">        <li data-subtype="oil_oil" class="nclicks(mtr*g.oil)"><a href="#">전체주유소</a></li>        <li data-subtype="oil_gas" class="nclicks(mtr*g.lpg)"><a href="#">전체충전소</a></li>        <li data-subtype="oil_gs" class="nclicks(mtr*g.gs)"><a href="#">GS주유소</a></li>        <li data-subtype="oil_sk" class="nclicks(mtr*g.sk)"><a href="#">SK주유소</a></li>        <li data-subtype="oil_soil" class="nclicks(mtr*g.soil)"><a href="#">에스오일주유소</a></li>        <li data-subtype="oil_oilbank" class="nclicks(mtr*g.hdoil)"><a href="#">현대오일뱅크주유소</a></li>        <li data-subtype="oil_e1" class="nclicks(mtr*g.e1lpg)"><a href="#">E1충전소</a></li>        <li data-subtype="oil_sk_lpg" class="nclicks(mtr*g.sklpg)"><a href="#">SK충전소</a></li>        <li data-subtype="oil_gs_lpg" class="nclicks(mtr*g.gslpg)"><a href="#">GS충전소</a></li>        <li data-subtype="oil_soil_lpg" class="nclicks(mtr*g.soillpg)"><a href="#">에스오일충전소</a></li>        <li data-subtype="oil_oilbank_lpg" class="nclicks(mtr*g.hdlpg)"><a href="#">현대오일뱅크충전소</a></li>        <li data-subtype="oil_etc" class="nclicks(mtr*g.etc)"><a href="#">기타주유소</a></li>       </ul>      </div>     </div>    </li>    <li class="mart _category" data-category="mart" data-sub=false>     <a href="#" class="spm spm_ai_mart nclicks(mtr.mart)" data-title="마트,슈퍼">마트,슈퍼</a>    </li>    <li class="store _category" data-category="store" data-sub=false>     <a href="#" class="spm spm_ai_store nclicks(mtr.cvs)" data-title="편의점">편의점</a>    </li>    <!-- [D] : 선택레이어 열었을시 down 추가 -->    <li class="convenience _category" data-category="convenience" data-sub=true>     <a href="#" class="spm spm_ai_convenience nclicks(mtr.life)" data-title="생활,편의">생활,편의</a>     <div class="ai_layer">      <div class="ai_layer_scroll">       <h4 class="blind">생활,편의 레이어</h4>       <ul class="_menu">        <li data-subtype="convenience" class="nclicks(mtr*l.all)"><a href="#">전체</a></li>        <li data-subtype="convenience_pcbang" class="nclicks(mtr*l.pc)"><a href="#">PC방</a></li>        <li data-subtype="convenience_sauna" class="nclicks(mtr*l.sauna)"><a href="#">찜질방</a></li>        <li data-subtype="convenience_beauty" class="nclicks(mtr*l.beauty)"><a href="#">미용실</a></li>        <li data-subtype="convenience_noraebang" class="nclicks(mtr*l.karaoke)"><a href="#">노래방</a></li>        <li data-subtype="convenience_study" class="nclicks(mtr*l.studyroom)"><a href="#">독서실</a></li>        <li data-subtype="convenience_laundry" class="nclicks(mtr*l.clean)"><a href="#">세탁소</a></li>        <li data-subtype="convenience_mending" class="nclicks(mtr*l.key)"><a href="#">열쇠/구두수선</a></li>        <li data-subtype="convenience_flower" class="nclicks(mtr*l.flower)"><a href="#">꽃집/화원</a></li>       </ul>      </div>     </div>    </li>    <li class="cinema _category" data-category="cinema" data-sub=false>     <a href="#" class="spm spm_ai_cinema nclicks(mtr.movie)" data-title="영화">영화</a>    </li>    <li class="sport _category" data-category="sport" data-sub=false>     <a href="#" class="spm spm_ai_sport nclicks(mtr.sports)" data-title="체육시설">체육시설</a>    </li>    <li class="government _category" data-category="government" data-sub=false>     <a href="#" class="spm spm_ai_government nclicks(mtr.office)" data-title="관공사">관공사</a>    </li>   </ul>  </div> </div>')
}return p.join("")
},perimeter_info_tooltip:function(_d_){var p=[];
with(_d_){p.push('<span class="ly_tooltip" style="display:none;left:856px"><span class="inner"><strong>지하철</strong></span><span class="right"></span><span class="arrow"></span></span>')
}return p.join("")
}});
nhn.map.service.AbstractPerimeter=iron.Class({inherit:nhn.map.Dispatcher,mix:[nhn.map.UIComponent]},{STATION_CLASS:0,ICON_TYPE:"TRAFFIC_BUS",MIN_LEVEL:11,API_URL:"/pubtrans/searchSpotWithinRectangle.nhn",MARKER_LIMIT_BY_LEVEL:[15,15,20,20,20,40,40,70,70,100,100,100,100,100],initialize:function(){this._markerTable={};
this._onBoundClickMarker=this._onClickMarker.bind(this)
},redraw:function(){this._request()
},cleanUp:function(){var a=this.$map().getLevel();
if(a<this.MIN_LEVEL){this._removeAllMarker()
}},_onActivate:function(){var a=this.$map().getLevel();
this._enableBoundCheck();
if(a>=this.MIN_LEVEL){this.redraw()
}this.dispatch("activated")
},_onDeactivate:function(){this._xhr&&this._xhr.abort();
this._disableBoundCheck();
this._removeAllMarker();
this.dispatch("deactivated")
},_enableBoundCheck:function(){var a=this.$map();
this._listeners={CHANGE_MAP_DONE:this._onChangeMapDone.bind(this),SET_MAP_SIZE:this._onSetMapSize.bind(this)};
a.attach(this._listeners);
this._centerPixel=a.getCenterPixel()
},_disableBoundCheck:function(){this.$map().detach(this._listeners)
},_afterZoomChanged:function(){this._removeAllMarker(true)
},_onChangeMapDone:function(f){var a=f.zoomed,b=this.$map().getLevel()>=this.MIN_LEVEL,c=a?false:this._checkOverThreshold(this.$map().getCenterPixel()),d=b&&(a||c);
a&&this._afterZoomChanged();
d&&this.redraw();
b||this._closeInfoWindow()
},_onSetMapSize:function(){this._request()
},_closeInfoWindow:function(){this.dispatch("needsCloseInfoWindow")
},_checkOverThreshold:function(b){if(!this._centerPixel){return false
}var b=b||this.$map().getCenterPixel(),a=b.x-this._centerPixel.x,c=b.y-this._centerPixel.y;
this._centerPixel=b;
return Math.abs(a)>50||Math.abs(c)>50
},_createMarkerId:function(a){return["traffic",this.STATION_CLASS,a].join("_")
},addMarkerToTable:function(a){this._markerTable[a.id]=a
},_addMarker:function(d){var c=this._createMarkerId(d.stationID),b=d.stationDisplayName+(d.laneCity&&d.laneName?" ("+d.laneCity+" "+d.laneName+")":""),a=new nhn.map.service.TrafficMarker(this.ICON_TYPE,{id:c,point:new nhn.mapcore.LatLng(d.y,d.x),title:b,onClick:this._onBoundClickMarker,trafficData:d,isFromPerimeter:true,stationType:this.STATION_CLASS,couponUrl:d.couponUrl||null});
if(this.ICON_TYPE=="TRAFFIC_BUS"&&d.stationDisplayID){a.options.htmlTitle="<strong>"+b+"</strong> <em class='bar'>|<em> <em class='busid'>"+d.stationDisplayID+"</em>"
}this.$map().addMarker(a);
this._markerTable[c]=a
},_removeMarker:function(a){this.$map().removeMarker(a);
delete this._markerTable[a.id]
},_removeAllMarker:function(){for(var b in this._markerTable){var a=this._markerTable[b];
this._removeMarker(a);
delete this._markerTable[b]
}this._markerTable={}
},_request:function(){this._xhr=$.ajax({async:true,url:this.API_URL,data:this._getRequestParam(),dataType:"json",success:this._onResponse.bind(this),error:this._onResponseFailed.bind(this),complete:this._onResponseComplete.bind(this)})
},_getRequestParam:function(){var c=this.$map(),a=c.getLevel()-1,b=nhn.mapcore.CoordConverter.toLatLng(c.getBound());
return{bounds:[b[0],b[3]].join(",")+";"+[b[2],b[1]].join(","),count:this.MARKER_LIMIT_BY_LEVEL[a]||50,stationClass:this.STATION_CLASS}
},_onResponseComplete:function(c,a){if(a==="success"){this.dispatch("response_complete",{perimeterData:this._data})
}else{this.dispatch("response_complete",{data:{}})
}var b=this.$map().getLevel()>=this.MIN_LEVEL;
b||this._removeAllMarker()
},_onResponse:function(a){if(a.error){this._alert(a.error.displayMsg);
return false
}this._data=a;
this._redraw(a)
},_redraw:function(e){var b=e.result,g={};
var d=this._getPerimeterMarkerList(),a=this._convertListToMap(d);
$.extend(g,a);
b&&b.station&&b.station.forEach(function(h){var i=this._createMarkerId(h.stationID);
if(!!g[i]){delete g[i]
}this._addMarker(h)
},this);
for(var f in g){var c=g[f];
this._removeMarker(c)
}g=null
},_getPerimeterMarkerList:function(){throw new Error("This method should be implemented!")
},_convertListToMap:function(b){var a={};
for(var c=0,d=b.length;
c<d;
c++){a[b[c].id]=b[c]
}return a
},_onResponseFailed:function(){},_alert:function(a){var a=(a+"<br />")||"";
nhn.map.service.Alert("<strong>일시적인 오류로<br/>서비스를 이용할 수 없습니다.</strong>",a+"잠시 후 다시 시도해 주세요")
},_onClickMarker:function(){throw new Error("You must implement handler for click in Marker")
},getMarkerList:function(){var a=[];
for(var b in this._markerTable){a.push(this._markerTable[b])
}return a
}});
(function(){var a=nhn.map.service.AbstractPerimeter.prototype;
nhn.map.service.PerimeterBus=iron.Class({inherit:nhn.map.service.AbstractPerimeter},{STATION_CLASS:1,ICON_TYPE:"TRAFFIC_BUS",API_URL:"/search2/searchBusStopWithinRectangle.nhn",initialize:function(){a.constructor.apply(this,arguments)
},redraw:function(){if(NModules.has("bus")){a._request.apply(this)
}else{NModules.load("bus",function(){a._request.apply(this)
}.bind(this))
}},_addMarker:function(b){this.$service().addPerimeterMarker(b)
},_removeMarker:function(b){NModules.has("bus")&&this.$service().removePerimeterMarker(b.id)
},_removeAllMarker:function(b){if(b){NModules.has("bus")&&this.$service().clearPerimeterMarkerOnly()
}else{NModules.has("bus")&&this.$service().clearPerimeterMarker()
}},_getPerimeterMarkerList:function(){return NModules.has("bus")?this.$service().getPerimeterMarkerList():[]
},_getRequestParam:function(){var d=this.$map(),e=d.getLevel(),b=e-1,c=nhn.mapcore.CoordConverter.toLatLng(d.getBound());
return{bounds:[c[0],c[3],c[2],c[1]].join(";"),count:this.MARKER_LIMIT_BY_LEVEL[b]||50,level:e}
},_onClickMarker:function(){},getMarkerList:function(){return this._getPerimeterMarkerList()
}})
})();
(function(){var a=nhn.map.service.AbstractPerimeter.prototype;
nhn.map.service.PerimeterSubway=iron.Class({inherit:nhn.map.service.AbstractPerimeter},{STATION_CLASS:2,ICON_TYPE:"TRAFFIC_SUBWAY",initialize:function(){a.constructor.apply(this,arguments)
},_onDeactivate:function(){a._onDeactivate.apply(this);
NModules.has("subway")&&this.$service().offPerimeter()
},redraw:function(){if(NModules.has("subway")){a._request.apply(this)
}else{NModules.load("subway",function(){a._request.apply(this)
}.bind(this))
}},_addMarker:function(b){this.$service().addPerimeterMarker(b)
},_removeMarker:function(b){NModules.has("subway")&&this.$service().removePerimeterMarker(b.id)
},_removeAllMarker:function(){NModules.has("subway")&&this.$service().clearPerimeterMarker()
},_getPerimeterMarkerList:function(){return NModules.has("subway")?this.$service().getPerimeterMarkerList():[]
},_onClickMarker:function(c){var b=c;
b.point=b.getPoint().copy().toInner()
}})
})();
nhn.map.service.PerimeterMarker=iron.Class({inherit:nhn.map.service.Marker},{_ICON_SET:{},_SELECTED_ZINDEX:5001,_UNSELECTED_ZINDEX:1,_UNSELECTED_COUPON_ZINDEX:4999,_nClickCode:null,initialize:function(c,b){var a=$.extend({zIndex:0},c||{});
var d=this._getPeriMarkerIcon(a.type,b);
nhn.map.service.Marker.call(this,d,a);
if(a.type==="COUPON"){this.MASK_CLASS_NAME="sp_pins_coupon_dmm"
}else{this.MASK_CLASS_NAME="sp_pins_around_dmm"
}this._nClickCode=b;
this.offset=a.offset;
this._initSmallIcon()
},_getPeriMarkerIcon:function(b,a){return new nhn.map.service.MarkerSpriteIcon((b=="COUPON")?b:"PERI_"+b,a)
},_getIcon:function(a){var b=this._ICON_SET[a];
if(!b){b=new nhn.map.service.MarkerSpriteIcon(a,this._nClickCode);
this._ICON_SET[a]=b
}return b
},_initSmallIcon:function(){var a=this.getType();
this._normalSmallIcon=new nhn.map.service.SmallIcon((a=="COUPON")?a:"PERI_"+a);
this._maskSmallIcon=new nhn.map.service.SmallIcon((a=="COUPON")?a:"PERI_"+a,{url:"https://ssl.pstatic.net/static/maps/img/pins_ds_dmm.png"});
this.setSmallIcon(this._normalSmallIcon)
},toPrint:function(){var b=this.getIcon(),a=b.getSpriteOffset();
return{type:"Sprite",url:"https://ssl.pstatic.net/static/maps3/icons/one_sp_around.png",size:{width:23,height:23},spriteSize:{marginX:23,marginY:23},offset:{width:9,height:23},spriteOffsets:(a.left/-23)+","+a.top}
},MASK_CLASS_NAME:"sp_pins_around_dmm",mask:function(){if(this._masked){return
}var b=this.getIcon();
if(!(b instanceof nhn.map.service.MarkerSpriteIcon)){return
}var a=this.MASK_CLASS_NAME,c=b.getClassName();
if(c.indexOf(a)>-1){return
}b.setClassName(c+" "+a);
this.setIcon(b);
this.setSmallIcon(this._maskSmallIcon);
this._masked=true
},unmask:function(){if(!this._masked){return
}var b=this.getIcon();
if(!(b instanceof nhn.map.service.MarkerSpriteIcon)){return
}var a=this.MASK_CLASS_NAME,d=b.getClassName();
if(d.indexOf(a)<0){return
}var c=d.replace(a,"").split(/\s+/).join(" ");
b.setClassName(c);
this.setIcon(b);
this.setSmallIcon(this._normalSmallIcon);
this._masked=false
}});